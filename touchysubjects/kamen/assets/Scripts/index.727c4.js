window.__require=function e(a,t,o){function n(r,p){if(!t[r]){if(!a[r]){var l=r.split("/");if(l=l[l.length-1],!a[l]){var s="function"==typeof __require&&__require;if(!p&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var c=t[r]={exports:{}};a[r][0].call(c.exports,function(e){return n(a[r][1][e]||e)},c,c.exports,e,a,t,o)}return t[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({Byte_analytics:[function(e,a,t){"use strict";cc._RF.push(a,"a16597u6y5E55uQnpMqFCGN","Byte_analytics"),Object.defineProperty(t,"__esModule",{value:!0}),t.Byte_analytics=void 0;var o=function(){function e(){}return e.init=function(e){this.ge=new window.GravityEngineAPI(e)},e.ge=null,e}();t.Byte_analytics=o,cc._RF.pop()},{}],JalapenoBoomEffect:[function(e,a,t){"use strict";cc._RF.push(a,"c4481S+vWVBRYRSa3hlY3DY","JalapenoBoomEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJalapenoBoomEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../pzaGameState"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a);var t=l.pzaGameState.map.getBlockLogicPos(0,a.yIndex,0,0);t.x+=l.pzaGameState.map.blockWidth/2,this.node.setPosition(t),this.showEffect()},a.prototype.showEffect=function(){var e;e=5==l.pzaGameState.mapId||6==l.pzaGameState.mapId?"idle2":"idle",this.spine.playAnimation(e,!1,function(){},function(e,a){console.log("event ",a)})},a.prototype.pauseSelf=function(){this.spine.pauseAnimation()},a.prototype.resumeSelf=function(){this.spine.resumeAnimation()},i([u({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"spine",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaJalapenoBoomEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController","../pzaGameState":"pzaGameState"}],ShufenManager:[function(e,a,t){"use strict";cc._RF.push(a,"96dc0OzT0RL6K7Cl70Ja7Mk","ShufenManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.ShufenEvent=void 0,t.ShufenEvent={login:"login",signup:"signup",custom:"custom",video:"video",prop:"prop",guide:"guide",level:"level",load:"load",onlineTime:"onlineTime"};var o=function(){function e(){}return e.report=function(a,o){void 0===o&&(o=!1),a&&a.event?a.event==t.ShufenEvent.load?1==a.type?(e.uuidStr=e.generateUUID(),e.uuidStr?(e.loadStartTime=e.getTime(),a.userId=e.uuidStr,a.len=0,e.send(a,o)):console.log(".....is loaded")):2==a.type?e.uuidStr?(e.loadStartTime?a.len=""+(e.getTime()-e.loadStartTime):a.len=0,a.userId=e.uuidStr,e.send(a,o)):console.log(".....is loaded 2"):console.error(".....shu fen load type error"):a.event==t.ShufenEvent.login?a.userId?(e.openid=a.userId,e.send(a,o)):console.error("......shufen no openid..."):e.send(a,o):console.error(".....shu fen data error")},e.sendAll=function(){if(e.sendT&&(clearTimeout(e.sendT),e.sendT=null),e.sendDataList.length>0){for(var a=0;a<e.sendDataList.length;a++){var t=e.sendDataList[a];e.send(t,!0)}e.sendDataList=[]}},e.send=function(a,t){if(a.appid||(a.appid=e.appid),a.userId||(a.userId=e.openid),a.timestamp||(a.timestamp=""+Math.floor(e.getTime()/1e3)),t){var o=e.object2String(a,"&")+"&"+e.secret;a.sign=e.getMD5(o),e.httpRequest(e.shufenUrl,a,null,null,"POST")}else e.sendDataList.length>0?(e.sendDataList.push(a),e.queueToSend()):e.send(a,!0)},e.queueToSend=function(){if(e.sendDataList.length>0){var a=e.sendDataList.shift();e.send(a,!0),e.sendDataList.length>0?e.sendT=setTimeout(function(){e.queueToSend()},50):e.sendT=null}},e.getTime=function(){return(new Date).getTime()},e.generateUUID=function(){var a="mj_rsck_local_uuid"+e.appid,t=cc.sys.localStorage.getItem(a);if(t&&t.length>0)return null;var o=(new Date).getTime(),n=Math.floor(o/1e5)%1e6,i="xx-xxx-yxx-xx".replace(/[xy]/g,function(e){var a=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==e?a:3&a|8).toString(16)}),r="mj_"+e.appid+"_"+n+"_"+i;return cc.sys.localStorage.setItem(a,r),r},e.object2String=function(e,a){for(var t=Object.keys(e).sort(),o="",n=0;n<t.length;n++)n==t.length-1?o+=t[n]+"="+e[t[n]]:o+=t[n]+"="+e[t[n]]+a;return console.log("\u6570\u636e1",o),o},e.getMD5=function(e){function a(e,a){return e<<a|e>>>32-a}function t(e,a){var t,o,n,i,r;return n=2147483648&e,i=2147483648&a,r=(1073741823&e)+(1073741823&a),(t=1073741824&e)&(o=1073741824&a)?2147483648^r^n^i:t|o?1073741824&r?3221225472^r^n^i:1073741824^r^n^i:r^n^i}function o(e,a,t){return e&a|~e&t}function n(e,a,t){return e&t|a&~t}function i(e,a,t){return e^a^t}function r(e,a,t){return a^(e|~t)}function p(e,n,i,r,p,l,s){return e=t(e,t(t(o(n,i,r),p),s)),t(a(e,l),n)}function l(e,o,i,r,p,l,s){return e=t(e,t(t(n(o,i,r),p),s)),t(a(e,l),o)}function s(e,o,n,r,p,l,s){return e=t(e,t(t(i(o,n,r),p),s)),t(a(e,l),o)}function c(e,o,n,i,p,l,s){return e=t(e,t(t(r(o,n,i),p),s)),t(a(e,l),o)}function u(e){var a,t="",o="";for(a=0;a<=3;a++)t+=(o="0"+(e>>>8*a&255).toString(16)).substr(o.length-2,2);return t}var d,h,m,f,z,y,g,v,b,P=new Array;for(P=function(e){for(var a,t=e.length,o=t+8,n=16*((o-o%64)/64+1),i=new Array(n-1),r=0,p=0;p<t;)r=p%4*8,i[a=(p-p%4)/4]=i[a]|e.charCodeAt(p)<<r,p++;return r=p%4*8,i[a=(p-p%4)/4]=i[a]|128<<r,i[n-2]=t<<3,i[n-1]=t>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var a="",t=0;t<e.length;t++){var o=e.charCodeAt(t);o<128?a+=String.fromCharCode(o):o>127&&o<2048?(a+=String.fromCharCode(o>>6|192),a+=String.fromCharCode(63&o|128)):(a+=String.fromCharCode(o>>12|224),a+=String.fromCharCode(o>>6&63|128),a+=String.fromCharCode(63&o|128))}return a}(e)),y=1732584193,g=4023233417,v=2562383102,b=271733878,d=0;d<P.length;d+=16)h=y,m=g,f=v,z=b,y=p(y,g,v,b,P[d+0],7,3614090360),b=p(b,y,g,v,P[d+1],12,3905402710),v=p(v,b,y,g,P[d+2],17,606105819),g=p(g,v,b,y,P[d+3],22,3250441966),y=p(y,g,v,b,P[d+4],7,4118548399),b=p(b,y,g,v,P[d+5],12,1200080426),v=p(v,b,y,g,P[d+6],17,2821735955),g=p(g,v,b,y,P[d+7],22,4249261313),y=p(y,g,v,b,P[d+8],7,1770035416),b=p(b,y,g,v,P[d+9],12,2336552879),v=p(v,b,y,g,P[d+10],17,4294925233),g=p(g,v,b,y,P[d+11],22,2304563134),y=p(y,g,v,b,P[d+12],7,1804603682),b=p(b,y,g,v,P[d+13],12,4254626195),v=p(v,b,y,g,P[d+14],17,2792965006),y=l(y,g=p(g,v,b,y,P[d+15],22,1236535329),v,b,P[d+1],5,4129170786),b=l(b,y,g,v,P[d+6],9,3225465664),v=l(v,b,y,g,P[d+11],14,643717713),g=l(g,v,b,y,P[d+0],20,3921069994),y=l(y,g,v,b,P[d+5],5,3593408605),b=l(b,y,g,v,P[d+10],9,38016083),v=l(v,b,y,g,P[d+15],14,3634488961),g=l(g,v,b,y,P[d+4],20,3889429448),y=l(y,g,v,b,P[d+9],5,568446438),b=l(b,y,g,v,P[d+14],9,3275163606),v=l(v,b,y,g,P[d+3],14,4107603335),g=l(g,v,b,y,P[d+8],20,1163531501),y=l(y,g,v,b,P[d+13],5,2850285829),b=l(b,y,g,v,P[d+2],9,4243563512),v=l(v,b,y,g,P[d+7],14,1735328473),y=s(y,g=l(g,v,b,y,P[d+12],20,2368359562),v,b,P[d+5],4,4294588738),b=s(b,y,g,v,P[d+8],11,2272392833),v=s(v,b,y,g,P[d+11],16,1839030562),g=s(g,v,b,y,P[d+14],23,4259657740),y=s(y,g,v,b,P[d+1],4,2763975236),b=s(b,y,g,v,P[d+4],11,1272893353),v=s(v,b,y,g,P[d+7],16,4139469664),g=s(g,v,b,y,P[d+10],23,3200236656),y=s(y,g,v,b,P[d+13],4,681279174),b=s(b,y,g,v,P[d+0],11,3936430074),v=s(v,b,y,g,P[d+3],16,3572445317),g=s(g,v,b,y,P[d+6],23,76029189),y=s(y,g,v,b,P[d+9],4,3654602809),b=s(b,y,g,v,P[d+12],11,3873151461),v=s(v,b,y,g,P[d+15],16,530742520),y=c(y,g=s(g,v,b,y,P[d+2],23,3299628645),v,b,P[d+0],6,4096336452),b=c(b,y,g,v,P[d+7],10,1126891415),v=c(v,b,y,g,P[d+14],15,2878612391),g=c(g,v,b,y,P[d+5],21,4237533241),y=c(y,g,v,b,P[d+12],6,1700485571),b=c(b,y,g,v,P[d+3],10,2399980690),v=c(v,b,y,g,P[d+10],15,4293915773),g=c(g,v,b,y,P[d+1],21,2240044497),y=c(y,g,v,b,P[d+8],6,1873313359),b=c(b,y,g,v,P[d+15],10,4264355552),v=c(v,b,y,g,P[d+6],15,2734768916),g=c(g,v,b,y,P[d+13],21,1309151649),y=c(y,g,v,b,P[d+4],6,4149444226),b=c(b,y,g,v,P[d+11],10,3174756917),v=c(v,b,y,g,P[d+2],15,718787259),g=c(g,v,b,y,P[d+9],21,3951481745),y=t(y,h),g=t(g,m),v=t(v,f),b=t(b,z);return(u(y)+u(g)+u(v)+u(b)).toLowerCase()},e.httpRequest=function(e,a,t,o,n){void 0===n&&(n="GET");var i="";for(var r in a)i&&(i+="&"),i+=r+"="+a[r];var p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(p.status>=200&&p.status<400){var a=p.responseText;if(console.log("\u8fd4\u56de\u6210\u529f",a),a){if(-1!=e.indexOf(".json"))n=JSON.parse(a);else var n=JSON.parse(a);o&&o(n,t)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),o&&o(!1,t)}else console.log("\u8bf7\u6c42\u5931\u8d25"),o&&o(!1,t)},"GET"==n?(p.open("GET",e+"?"+i,!0),p.send()):(p.open("POST",e,!0),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(i)),console.log("\u8c03\u7528\u94fe\u63a5\uff1a"+e+"?"+i)},e.appid="yr1lmttwpf89lwaw29ng",e.secret="bugj9akhlb2t23g91ieppkofbabx1j",e.shufenUrl="https://ddht.jinkezhexin.com/shufen/writeLog",e.loadStartTime=null,e.sendDataList=[],e.sendT=null,e.uuidStr=null,e.openid=null,e}();t.default=o,cc._RF.pop()},{}],ks_analytics:[function(e,a,t){"use strict";cc._RF.push(a,"ddb93iGOUtPtL4ZmYA8X8uq","ks_analytics"),Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.init=function(a,t,o,n,i){if(void 0===a&&(a=""),void 0===t&&(t=""),void 0===o&&(o={}),void 0===n&&(n=function(){}),void 0===i&&(i=function(){}),""!=t){var r={app_id:a,js_code:t,query:JSON.stringify(o)};console.log("param",r),e.httpPost("init_code",r,function(e){console.log(e),null!=e.result?n(e):i(e)},"https://kszt-sdk.tianjinyuren.cn/ks")}else console.error("\u53c2\u6570code\u9519\u8bef")},e.init_uid=function(a,t,o,n,i,r){void 0===a&&(a=""),void 0===t&&(t=""),void 0===o&&(o="test_union_id"),void 0===n&&(n={}),void 0===i&&(i=function(){}),void 0===r&&(r=function(){});var p={app_id:a,open_id:t,union_id:o,query:JSON.stringify(n)};console.log("param",p),e.httpPost("init_uid",p,function(e){console.log(e),0==e.code?i(e):r(e)},"https://kszt-sdk.tianjinyuren.cn/ks")},e.ad_complete=function(a,t,o){void 0===a&&(a=""),void 0===t&&(t=function(){}),void 0===o&&(o=function(){});var n={open_id:a};e.httpPost("handle_ad_complete",n,function(e){console.log(e),0==e.code?t(e):o(e)},"https://kszt-sdk.tianjinyuren.cn/ks")},e.ad_exposure=function(a,t,o){void 0===a&&(a=""),void 0===t&&(t=function(){}),void 0===o&&(o=function(){});var n={open_id:a};e.httpPost("handle_ad_exposure",n,function(e){console.log(e),0==e.code?t(e):o(e)},"https://kszt-sdk.tianjinyuren.cn/ks")},e.httpGet=function(e,a,t,o){var n=new XMLHttpRequest,i=o+"/"+e;n.open("GET",i,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e=JSON.parse(n.responseText);null!==t&&t(e)}else console.error("httpGet status --\x3e",n.status)},n.send(a)},e.httpPost=function(e,a,t,o){var n=new XMLHttpRequest,i=o+"/"+e;n.open("POST",i,!0),n.setRequestHeader("Content-type","multipart/form-data"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e=JSON.parse(n.responseText);null!==t&&t(e)}else console.error("httpGet status --\x3e",n.status)},n.send(a)},e}();t.default=o,cc._RF.pop()},{}],lanfei:[function(e,a,t){"use strict";cc._RF.push(a,"17a64VHWytA+K73wlTh7LLf","lanfei");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var n=e("./pzaChannel"),i=e("./pzakc");function r(e){var a=0;function t(e){for(var a=Array(e.length>>2),t=0;t<a.length;t++)a[t]=0;for(var o=0;o<8*e.length;o+=8)a[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return a}function o(e){for(var a="",t=0;t<32*e.length;t+=8)a+=String.fromCharCode(e[t>>5]>>>t%32&255);return a}function n(e,a){e[a>>5]|=128<<a%32,e[14+(a+64>>>9<<4)]=a;for(var t=1732584193,o=-271733879,n=-1732584194,i=271733878,u=0;u<e.length;u+=16){var d=t,h=o,m=n,f=i;t=r(t,o,n,i,e[u+0],7,-680876936),i=r(i,t,o,n,e[u+1],12,-389564586),n=r(n,i,t,o,e[u+2],17,606105819),o=r(o,n,i,t,e[u+3],22,-1044525330),t=r(t,o,n,i,e[u+4],7,-176418897),i=r(i,t,o,n,e[u+5],12,1200080426),n=r(n,i,t,o,e[u+6],17,-1473231341),o=r(o,n,i,t,e[u+7],22,-45705983),t=r(t,o,n,i,e[u+8],7,1770035416),i=r(i,t,o,n,e[u+9],12,-1958414417),n=r(n,i,t,o,e[u+10],17,-42063),o=r(o,n,i,t,e[u+11],22,-1990404162),t=r(t,o,n,i,e[u+12],7,1804603682),i=r(i,t,o,n,e[u+13],12,-40341101),n=r(n,i,t,o,e[u+14],17,-1502002290),t=p(t,o=r(o,n,i,t,e[u+15],22,1236535329),n,i,e[u+1],5,-165796510),i=p(i,t,o,n,e[u+6],9,-1069501632),n=p(n,i,t,o,e[u+11],14,643717713),o=p(o,n,i,t,e[u+0],20,-373897302),t=p(t,o,n,i,e[u+5],5,-701558691),i=p(i,t,o,n,e[u+10],9,38016083),n=p(n,i,t,o,e[u+15],14,-660478335),o=p(o,n,i,t,e[u+4],20,-405537848),t=p(t,o,n,i,e[u+9],5,568446438),i=p(i,t,o,n,e[u+14],9,-1019803690),n=p(n,i,t,o,e[u+3],14,-187363961),o=p(o,n,i,t,e[u+8],20,1163531501),t=p(t,o,n,i,e[u+13],5,-1444681467),i=p(i,t,o,n,e[u+2],9,-51403784),n=p(n,i,t,o,e[u+7],14,1735328473),t=l(t,o=p(o,n,i,t,e[u+12],20,-1926607734),n,i,e[u+5],4,-378558),i=l(i,t,o,n,e[u+8],11,-2022574463),n=l(n,i,t,o,e[u+11],16,1839030562),o=l(o,n,i,t,e[u+14],23,-35309556),t=l(t,o,n,i,e[u+1],4,-1530992060),i=l(i,t,o,n,e[u+4],11,1272893353),n=l(n,i,t,o,e[u+7],16,-155497632),o=l(o,n,i,t,e[u+10],23,-1094730640),t=l(t,o,n,i,e[u+13],4,681279174),i=l(i,t,o,n,e[u+0],11,-358537222),n=l(n,i,t,o,e[u+3],16,-722521979),o=l(o,n,i,t,e[u+6],23,76029189),t=l(t,o,n,i,e[u+9],4,-640364487),i=l(i,t,o,n,e[u+12],11,-421815835),n=l(n,i,t,o,e[u+15],16,530742520),t=s(t,o=l(o,n,i,t,e[u+2],23,-995338651),n,i,e[u+0],6,-198630844),i=s(i,t,o,n,e[u+7],10,1126891415),n=s(n,i,t,o,e[u+14],15,-1416354905),o=s(o,n,i,t,e[u+5],21,-57434055),t=s(t,o,n,i,e[u+12],6,1700485571),i=s(i,t,o,n,e[u+3],10,-1894986606),n=s(n,i,t,o,e[u+10],15,-1051523),o=s(o,n,i,t,e[u+1],21,-2054922799),t=s(t,o,n,i,e[u+8],6,1873313359),i=s(i,t,o,n,e[u+15],10,-30611744),n=s(n,i,t,o,e[u+6],15,-1560198380),o=s(o,n,i,t,e[u+13],21,1309151649),t=s(t,o,n,i,e[u+4],6,-145523070),i=s(i,t,o,n,e[u+11],10,-1120210379),n=s(n,i,t,o,e[u+2],15,718787259),o=s(o,n,i,t,e[u+9],21,-343485551),t=c(t,d),o=c(o,h),n=c(n,m),i=c(i,f)}return Array(t,o,n,i)}function i(e,a,t,o,n,i){return c((r=c(c(a,e),c(o,i)))<<(p=n)|r>>>32-p,t);var r,p}function r(e,a,t,o,n,r,p){return i(a&t|~a&o,e,a,n,r,p)}function p(e,a,t,o,n,r,p){return i(a&o|t&~o,e,a,n,r,p)}function l(e,a,t,o,n,r,p){return i(a^t^o,e,a,n,r,p)}function s(e,a,t,o,n,r,p){return i(t^(a|~o),e,a,n,r,p)}function c(e,a){var t=(65535&e)+(65535&a);return(e>>16)+(a>>16)+(t>>16)<<16|65535&t}return function(e){for(var t,o=a?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<e.length;i++)t=e.charCodeAt(i),n+=o.charAt(t>>>4&15)+o.charAt(15&t);return n}(function(e){return o(n(t(e),8*e.length))}(function(e){for(var a,t,o="",n=-1;++n<e.length;)a=e.charCodeAt(n),t=n+1<e.length?e.charCodeAt(n+1):0,55296<=a&&a<=56319&&56320<=t&&t<=57343&&(a=65536+((1023&a)<<10)+(1023&t),n++),a<=127?o+=String.fromCharCode(a):a<=2047?o+=String.fromCharCode(192|a>>>6&31,128|63&a):a<=65535?o+=String.fromCharCode(224|a>>>12&15,128|a>>>6&63,128|63&a):a<=2097151&&(o+=String.fromCharCode(240|a>>>18&7,128|a>>>12&63,128|a>>>6&63,128|63&a));return o}(e)))}var p=cc._decorator,l=p.ccclass,s=(p.property,function(){function e(){}var a;return a=e,e.mkSignStr=function(e,t){e.appid=a.appId,e.appsecret=a.appSecret,e.time=t;var o=[];for(var n in e)o.push(""+n);for(var i="",r=(n=0,(o=o.sort()).length);n<r;n++)i+="&"+o[n]+"="+e[o[n]];return i.length<=0?"":i.substring(1)},e.mkSign=function(e,t){var o=r(a.mkSignStr(e,t));return delete e.appsecret,o},e.mkHeader=function(e,t,o){var n=Math.floor(Date.now()/1e3),i=a.mkSign(e,n);t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("KP-Appid",a.appId),t.setRequestHeader("KP-Timestamp",n),t.setRequestHeader("KP-Sign",i),o&&t.setRequestHeader("KP-Token",o)},e.req=function(e,t,o,n){n||(n=function(e){if(e)return console.error(e)});var i=new XMLHttpRequest;i.open("POST",e,!0),a.mkHeader(t,i,o);var r=JSON.stringify(t);console.log("post j:"+r),i.send(r),i.onerror=function(e){n(e)},i.onload=function(){if(200==i.status){if("object"==typeof i.responseText)return n(null,i.responseText);var a={postERR:""+i.responseText};try{a=JSON.parse(i.responseText)}catch(t){return console.error(t),n(null,{code:"555",err:"jsonErr:"+i.responseText,url:e})}return n(null,a)}return n(null,{code:""+i.status})}},e.getToken=function(e,t){var o="4";"wx"==n.pzaChannel.instance().channel?o="3":"tt"==n.pzaChannel.instance().channel&&(o="4");var i={kunpo_appid:a.appId,id:e,channelid:o};a.req("https://game-admin.lanfeitech.com/api/game/getToken",i,null,function(e,a){if(e)return console.error(e),t(e);console.log("LanfeiGetToken====re:",a),t(null,a)})},e.get_list_task=function(e,t,o){var i=4;"wx"==n.pzaChannel.instance().channel?i=3:"tt"==n.pzaChannel.instance().channel&&(i=4);var r={app_account:e,show_position:0,channel_id:i};a.req("https://game-admin.lanfeitech.com/api/minigame/integral/get_list_task",r,t,function(e,a){if(e)return console.error(e),o(e);console.log("get_list_task-re:",a),o(null,a)})},e.get_state=function(e,t,o){var i=4;"wx"==n.pzaChannel.instance().channel?i=3:"tt"==n.pzaChannel.instance().channel&&(i=4);var r={target_kunpo_appid:"yC0pRoqd",app_account:e,channel_id:i};a.req("https://game-admin.lanfeitech.com/api/minigame/integral/get_state",r,t,function(e,a){if(e)return console.error(e),o(e);o(null,a)})},e.do_get_reward=function(e,t,o,i){var r=4;"wx"==n.pzaChannel.instance().channel?r=3:"tt"==n.pzaChannel.instance().channel&&(r=4);var p={received_kunpo_appid:"yC0pRoqd",app_account:e,channel_id:r,task_id:o};a.req("https://game-admin.lanfeitech.com/api/minigame/integral/receive_reward",p,t,function(e,a){if(e)return console.error(e),i(e);console.log("do_get_reward-re:",a),i(null,a)})},e.receive_reward=function(e,t,o,r,p,l,s){var c=n.pzaChannel.instance().getPara("appId");n.pzaChannel.isConfRemote&&(c="wx9f06a674f593285a"),i.default.jpost("https://ga.gamejym.com/fcm/cps/receive_reward",{appId:c,cid:o,openId:e,reward:r,pickState:s},function(o,n){if(o)return console.error(o),void(p&&p(o));console.log("receive_reward code ",n),0==n.code&&(0==l?a.do_get_reward(e,t,r,function(e,a){if(e)return console.error(e),void(p&&p(e));p&&p(null,a,l)}):p&&p(null,null,l))})},e.jumpToGame=function(e,a){var t=3,o="?wxgamecid=CCBgAAoXkpQY9Nnu6r-gll";"wx"==n.pzaChannel.instance().channel&&(t=3,o="?wxgamecid=CCBgAAoXkpQY9Nnu6r-gll"),console.log("jumpToGame msg:",o);var r=n.pzaChannel.instance().getPara("appId");n.pzaChannel.instance().getChannel().channelObj.navigateToMiniProgram({appId:e,path:o,extraData:{from_kunpo_appid:"x8xDF4cn",from_app_account:a,to_kunpo_appid:"yC0pRoqd",channel_id:t},success:function(){i.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:r,cid:e,openId:a})},fail:function(e){console.error("\u8df3\u8f6c\u5931\u8d25 :",e)},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},e.jumpGame=function(e,a){console.log("targetAppID ",e,"openId ",a);var t=n.pzaChannel.instance().getPara("appId");n.pzaChannel.instance().getChannel().channelObj.navigateToMiniProgram({appId:e,extraData:{fromAppId:t,fromUserId:a,fromloginappid:a,from_app_account:a},path:"?fromAppId="+t+"&fromUserId="+a+"&from_app_account="+a+"&fromloginappid="+a,success:function(){i.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:t,cid:e,openId:a})},fail:function(){console.error("\u8df3\u8f6c\u5931\u8d25")},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},e.getTask=function(e,a,t){var o=n.pzaChannel.instance().getPara("appId");n.pzaChannel.isConfRemote&&(o="wx987d4570f328b6d4");var r={appId:o,cid:e,openId:a};i.default.jpost("https://ga.gamejym.com/fcm/cps/getTask",r,function(e,a){if(e)return console.error(e),void t(e,null);console.log("getTask-re:",a),t(null,a)})},e.appId="x8xDF4cn",e.appSecret="255cc053a3f12cd68a650ae2b35936b4",e.token=null,a=o([l],e)}());t.default=s,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaAES:[function(e,a,t){"use strict";cc._RF.push(a,"b3fcfx7pd9Mp7FHwnuJb1Jb","pzaAES"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAES=void 0;var o=e("./pzakc"),n=function(){function e(a){if(this.outMap={base64:e.base64,hex:e.hex,binary:function(e){return e}},this.inMap={base64:e.base64_to_binary,hex:e.str2hex,binary:function(e){return e}},this.modMap={cbc:{mEncrypt:function(a,t,o){t=e.pad(t);for(var n=new Uint8Array(t.length),i=o,r=0;r<t.length;r+=e.blockSize)i=a.encrypt(e.xor(t.slice(r,r+e.blockSize),i)),n.set(i,r);return n},mDecrypt:function(a,t,o){for(var n=new Uint8Array(t.length),i=o,r=0;r<t.length;r+=e.blockSize){var p=t.slice(r,r+e.blockSize);n.set(e.xor(a.decrypt(p),i),r),i=p}return e.unpad(n)}},cfb:{mEncrypt:function(a,t,o){for(var n=new Uint8Array(t.length),i=o,r=0;r<t.length;r+=e.blockSize)i=e.xor(t.slice(r,r+e.blockSize),a.encrypt(i)),n.set(i,r);return n},mDecrypt:function(a,t,o){for(var n=new Uint8Array(t.length),i=o,r=0;r<t.length;r+=e.blockSize){var p=t.slice(r,Math.min(r+e.blockSize,t.length));n.set(e.xor(p,a.encrypt(i)),r),i=p}return n}},ecb:{mEncrypt:function(a,t){if((t=e.pad(t)).length%e.blockSize!=0)throw"Message is not properly padded";for(var o=new Uint8Array(t.length),n=0;n<t.length;n+=e.blockSize)o.set(a.encrypt(t.slice(n,n+e.blockSize)),n);return o},mDecrypt:function(a,t){if(t.length%e.blockSize!=0)throw"Message is not properly padded";for(var o=new Uint8Array(t.length),n=0;n<t.length;n+=e.blockSize)o.set(a.decrypt(t.slice(n,n+e.blockSize)),n);return e.unpad(o)}}},this.opt={mode:"cbc",iv:new Uint8Array(16),padding:"pkcs5",output:"base64"},!a)throw new Error("AES requires key!");switch(a.length){case 16:this.NK=4,this.NR=10;break;case 24:this.NK=6,this.NR=12;break;case 32:this.NK=8,this.NR=14;break;default:throw new Error("AES supports only 16, 24 and 32 bytes keys!")}this.KEY=new Array(e.AES_NB*(this.NR+1)*4),this.expandKey(a)}return e.subWord=function(a){for(var t=0;t<4;t++)a[t]=e.AES_SBOX[16*((240&a[t])>>4)+(15&a[t])]},e.rotWord=function(e){for(var a=e[0],t=0;t<3;t++)e[t]=e[t+1];e[3]=a},e.gmult=function(e,a){for(var t=0,o=0,n=0;n<8;n++)1&a&&(t^=e),o=128&e,e<<=1,o&&(e^=27),a>>=1;return t},e.coefAdd=function(e,a,t){t[0]=e[0]^a[0],t[1]=e[1]^a[1],t[2]=e[2]^a[2],t[3]=e[3]^a[3]},e.coefMult=function(a,t,o){o[0]=e.gmult(a[0],t[0])^e.gmult(a[3],t[1])^e.gmult(a[2],t[2])^e.gmult(a[1],t[3]),o[1]=e.gmult(a[1],t[0])^e.gmult(a[0],t[1])^e.gmult(a[3],t[2])^e.gmult(a[2],t[3]),o[2]=e.gmult(a[2],t[0])^e.gmult(a[1],t[1])^e.gmult(a[0],t[2])^e.gmult(a[3],t[3]),o[3]=e.gmult(a[3],t[0])^e.gmult(a[2],t[1])^e.gmult(a[1],t[2])^e.gmult(a[0],t[3])},e.xor=function(e,a){for(var t=new Uint8Array(e.length),o=0;o<t.length;o++)t[o]=e[o]^a[o%a.length];return t},e.hex=function(e){for(var a="",t=0;t<e.length;t++)a+=e[t].toString(16).padStart(2,"0");return a},e.str2hex=function(e){if(e.length%2!=0)throw"Invalid hex format";for(var a=new Uint8Array(e.length>>1),t=0,o=0;o<e.length;o+=2)a[t++]=parseInt(e.substring(o,o+2),16);return a},e.concat=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];for(var t=e.reduce(function(e,a){return e+a.length},0),o=new Uint8Array(t),n=0,i=0;i<e.length;i++)o.set(e[i],n),n+=e[i].length;return o},e.random_bytes=function(e){for(var a=new Uint8Array(e),t=0;t<e;t++)a[t]=1+(254*Math.random()|0);return a},e.pad=function(e){var a=16*Math.ceil((e.length+1)/16),t=a-e.length,o=new Uint8Array(a);return o.set(e,0),o.set(new Array(t).fill(t),e.length),o},e.unpad=function(e){var a=e[e.length-1];return new Uint8Array(e.slice(0,e.length-a))},e.base64=function(a){return e.base64encode(String.fromCharCode.apply(null,a))},e.base64encode=function(a){var t,o,n,i,r,p;for(n=a.length,o=0,t="";o<n;){if(i=255&a.charCodeAt(o++),o==n){t+=e.base64EncodeChars.charAt(i>>2),t+=e.base64EncodeChars.charAt((3&i)<<4),t+="==";break}if(r=a.charCodeAt(o++),o==n){t+=e.base64EncodeChars.charAt(i>>2),t+=e.base64EncodeChars.charAt((3&i)<<4|(240&r)>>4),t+=e.base64EncodeChars.charAt((15&r)<<2),t+="=";break}p=a.charCodeAt(o++),t+=e.base64EncodeChars.charAt(i>>2),t+=e.base64EncodeChars.charAt((3&i)<<4|(240&r)>>4),t+=e.base64EncodeChars.charAt((15&r)<<2|(192&p)>>6),t+=e.base64EncodeChars.charAt(63&p)}return t},e.base64decode=function(a){var t,o,n,i,r,p,l;for(p=a.length,r=0,l="";r<p;){do{t=e.base64DecodeChars[255&a.charCodeAt(r++)]}while(r<p&&-1==t);if(-1==t)break;do{o=e.base64DecodeChars[255&a.charCodeAt(r++)]}while(r<p&&-1==o);if(-1==o)break;l+=String.fromCharCode(t<<2|(48&o)>>4);do{if(61==(n=255&a.charCodeAt(r++)))return l;n=e.base64DecodeChars[n]}while(r<p&&-1==n);if(-1==n)break;l+=String.fromCharCode((15&o)<<4|(60&n)>>2);do{if(61==(i=255&a.charCodeAt(r++)))return l;i=e.base64DecodeChars[i]}while(r<p&&-1==i);if(-1==i)break;l+=String.fromCharCode((3&n)<<6|i)}return l},e.utf16to8=function(e){var a,t,o,n;for(a="",o=e.length,t=0;t<o;t++)(n=e.charCodeAt(t))>=1&&n<=127?a+=e.charAt(t):n>2047?(a+=String.fromCharCode(224|n>>12&15),a+=String.fromCharCode(128|n>>6&63),a+=String.fromCharCode(128|n>>0&63)):(a+=String.fromCharCode(192|n>>6&31),a+=String.fromCharCode(128|n>>0&63));return a},e.utf8to16=function(e){var a,t,o,n,i,r;for(a="",o=e.length,t=0;t<o;)switch((n=e.charCodeAt(t++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=e.charAt(t-1);break;case 12:case 13:i=e.charCodeAt(t++),a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e.charCodeAt(t++),r=e.charCodeAt(t++),a+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return a},e.base64_to_binary=function(a){for(var t=e.base64decode(a),o=t.length,n=new Uint8Array(o),i=0;i<o;i++)n[i]=t.charCodeAt(i);return n},e.computeMessage=function(e){if("string"!=typeof e)return e;for(var a,t,o=e,n=[],i=0;i<o.length;i++){a=o.charCodeAt(i),t=[];do{t.push(255&a),a>>=8}while(a);n=n.concat(t.reverse())}return Uint8Array.from(n)},e.create=function(a,t){var n=e.computeMessage(a),i=new e(n);return t&&(o.default.forMap(i.opt,function(e){t[e]&&(i.opt[e]=t[e])}),"string"==typeof i.opt.iv&&(i.opt.iv=e.computeMessage(i.opt.iv))),i},e.prototype.encString=function(a){var t=this.modMap[this.opt.mode];if(!t)throw"Unknown mode:"+this.opt.mode;var o=t.mEncrypt(this,e.computeMessage(a),this.opt.iv);return(0,this.outMap[this.opt.output])(o)},e.prototype.Uint8ArrayToString=function(e){var a,t,o,n,i,r;for(a="",o=e.length,t=0;t<o;)switch((n=e[t++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=e[t++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e[t++],r=e[t++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return a},e.prototype.decString=function(e){var a=this.modMap[this.opt.mode];if(!a)throw"Unknown mode:"+this.opt.mode;var t=this.inMap[this.opt.output],o=a.mDecrypt(this,t(e),this.opt.iv);return this.Uint8ArrayToString(o)},e.prototype.encrypt=function(e){var a=this.createState(e);this.addRoundKey(a,0);for(var t=1;t<this.NR;t++)this.subBytes(a),this.shiftRows(a),this.mixColumns(a),this.addRoundKey(a,t);return this.subBytes(a),this.shiftRows(a),this.addRoundKey(a,this.NR),this.stateToResult(a)},e.prototype.decrypt=function(e){var a=this.createState(e);this.addRoundKey(a,this.NR);for(var t=this.NR-1;t>=1;t--)this.shiftRows(a,!0),this.subBytes(a,!0),this.addRoundKey(a,t),this.mixColumns(a,!0);return this.shiftRows(a,!0),this.subBytes(a,!0),this.addRoundKey(a,0),this.stateToResult(a)},e.prototype.createState=function(a){for(var t=new Uint8Array(4*e.AES_NB),o=0;o<4;o++)for(var n=0;n<e.AES_NB;n++)t[e.AES_NB*o+n]=a[o+4*n];return t},e.prototype.stateToResult=function(a){for(var t=new Uint8Array(16),o=0;o<4;o++)for(var n=0;n<e.AES_NB;n++)t[o+4*n]=a[e.AES_NB*o+n];return t},e.prototype.expandKey=function(a){for(var t=new Array(4),o=e.AES_NB*(this.NR+1),n=0;n<this.NK;n++)this.KEY[4*n]=a[4*n],this.KEY[4*n+1]=a[4*n+1],this.KEY[4*n+2]=a[4*n+2],this.KEY[4*n+3]=a[4*n+3];for(n=this.NK;n<o;n++)t[0]=this.KEY[4*(n-1)],t[1]=this.KEY[4*(n-1)+1],t[2]=this.KEY[4*(n-1)+2],t[3]=this.KEY[4*(n-1)+3],n%this.NK==0?(e.rotWord(t),e.subWord(t),e.coefAdd(t,e.roundConstant(n/this.NK),t)):this.NK>6&&n%this.NK==4&&e.subWord(t),this.KEY[4*n]=this.KEY[4*(n-this.NK)]^t[0],this.KEY[4*n+1]=this.KEY[4*(n-this.NK)+1]^t[1],this.KEY[4*n+2]=this.KEY[4*(n-this.NK)+2]^t[2],this.KEY[4*n+3]=this.KEY[4*(n-this.NK)+3]^t[3]},e.roundConstant=function(a){if(1==a)e.AES_R[0]=1;else if(a>1)for(e.AES_R[0]=2,a--;a-1>0;)e.AES_R[0]=e.gmult(e.AES_R[0],2),a--;return e.AES_R},e.prototype.addRoundKey=function(a,t){for(var o=0;o<e.AES_NB;o++)a[o]^=this.KEY[4*e.AES_NB*t+4*o],a[e.AES_NB+o]^=this.KEY[4*e.AES_NB*t+4*o+1],a[2*e.AES_NB+o]^=this.KEY[4*e.AES_NB*t+4*o+2],a[3*e.AES_NB+o]^=this.KEY[4*e.AES_NB*t+4*o+3]},e.prototype.mixColumns=function(a,t){void 0===t&&(t=!1);for(var o=t?[14,9,13,11]:[2,1,1,3],n=new Array(4),i=new Array(4),r=0;r<e.AES_NB;r++){for(var p=0;p<4;p++)n[p]=a[e.AES_NB*p+r];for(e.coefMult(o,n,i),p=0;p<4;p++)a[e.AES_NB*p+r]=i[p]}},e.prototype.shiftRows=function(a,t){void 0===t&&(t=!1);for(var o=1;o<4;o++)for(var n=0;n<o;){var i=t?a[e.AES_NB*o+e.AES_NB-1]:a[e.AES_NB*o+0];if(t){for(var r=e.AES_NB-1;r>0;r--)a[e.AES_NB*o+r]=a[e.AES_NB*o+r-1];a[e.AES_NB*o]=i}else{for(r=1;r<e.AES_NB;r++)a[e.AES_NB*o+r-1]=a[e.AES_NB*o+r];a[e.AES_NB*o+e.AES_NB-1]=i}n++}},e.prototype.subBytes=function(a,t){void 0===t&&(t=!1);for(var o=t?e.AES_INVERSE_SBOX:e.AES_SBOX,n=0;n<4;n++)for(var i=0;i<e.AES_NB;i++){var r=(240&a[e.AES_NB*n+i])>>4,p=15&a[e.AES_NB*n+i];a[e.AES_NB*n+i]=o[16*r+p]}},e.AES_NB=4,e.AES_SBOX=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],e.AES_INVERSE_SBOX=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],e.AES_R=[2,0,0,0],e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),e.blockSize=16,e}();t.pzaAES=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaATest:[function(e,a,t){"use strict";cc._RF.push(a,"00f4e7Fz0RATYep1rVwZB7o","pzaATest");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaATest=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.sp1=null,a.sp2=null,a.sp3=null,a.sp4=null,a.sp5=null,a.pic1=null,a.pic2=null,a.theSlot=null,a.atlasSlotAttMap=new Map,a}return n(a,e),a.prototype.onLoad=function(){var e=this;this.sp2.node.active=!1,this.initAtlasSlot(),this.scheduleOnce(function(){e.changeA()},1),this.scheduleOnce(function(){e.changeB()},2)},a.prototype.initAtlasSlot=function(){for(var e=this.sp2._skeleton.slots,a=0;a<e.length;a++){var t=e[a],o=t.getAttachment();o&&this.atlasSlotAttMap.set(t.data.name,o)}},a.prototype.setSlotAtt=function(e,a,t,o,n){var i=e.findSlot(t);if(i)if(a){var r=this.atlasSlotAttMap.get(a);if(r){var p=r.copy();return p.x=o,p.y=n,p.updateOffset(),i.setAttachment(p),i}console.log("atlasSlotName\u4e0d\u5b58\u5728",a)}else i.setAttachment(null);else console.log("targetSlotName\u4e0d\u5b58\u5728",t)},a.prototype.changeB=function(){var e=this;this.sp3.setSkin("1zombie"),this.setSlotAtt(this.sp3,"5body1","5body",262.41,-1.5),this.scheduleOnce(function(){e.setSlotAtt(e.sp3,"10pr","10pr",-11.57,78.5),e.sp3.paused=!0},2),this.scheduleOnce(function(){e.setSlotAtt(e.sp3,null,"10pr",0,0),e.setSlotAtt(e.sp3,"5body3","5body",262.41,-1.5),e.sp3.timeScale=1},5)},a.prototype.changeA=function(){console.log("pic1",this.pic1.spriteFrame);var e=this.pic1.spriteFrame._texture,a=new sp.SkeletonTexture;a.setRealTexture(e),a._image=e._image;var t=this.pic1.spriteFrame._rect,o=new sp.spine.TextureAtlasPage;o.name=e.name,o.uWrap=sp.spine.TextureWrap.ClampToEdge,o.vWrap=sp.spine.TextureWrap.ClampToEdge,o.texture=a,o.texture.setWraps(o.uWrap,o.vWrap),o.width=t.width,o.height=t.height;var n=new sp.spine.TextureAtlasRegion;n.page=o,n.width=t.width,n.height=t.height,n.originalWidth=e.width,n.originalHeight=e.height,n.offsetX=t.x,n.offsetY=t.y,n.rotate?(n.u=t.x/e.width,n.v=t.y/e.height,n.u2=(t.x+t.height)/e.width,n.v2=(t.y+t.width)/e.height):(n.u=t.x/e.width,n.v=t.y/e.height,n.u2=(t.x+t.width)/e.width,n.v2=(t.y+t.height)/e.height,console.log("\u4e0d\u8f6c")),n.texture=a,console.log("region",n);var i=this.sp1.findSlot("head").getAttachment();i.region=n,i instanceof sp.spine.MeshAttachment?i.updateUVs():i.updateOffset(),console.log("changeA")},i([l(sp.Skeleton)],a.prototype,"sp1",void 0),i([l(sp.Skeleton)],a.prototype,"sp2",void 0),i([l(sp.Skeleton)],a.prototype,"sp3",void 0),i([l(sp.Skeleton)],a.prototype,"sp4",void 0),i([l(sp.Skeleton)],a.prototype,"sp5",void 0),i([l(cc.Sprite)],a.prototype,"pic1",void 0),i([l(cc.Sprite)],a.prototype,"pic2",void 0),i([p],a)}(cc.Component);t.pzaATest=s,cc._RF.pop()},{}],pzaAbsorbIronEquip:[function(e,a,t){"use strict";cc._RF.push(a,"d06f0s2FhRHL5NufHOcxmir","pzaAbsorbIronEquip");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAbsorbIronEquip=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../Data/pzaZombieEnum"),s=e("../../Common/pzaGameCommonPool"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.atlasSpine=null,a.jackBoxAni=null,a.poolPrefab=null,a.absorbFlying=!0,a.returnTime=0,a.plantData=null,a}return n(a,e),a.prototype.init=function(e,a,t,o){var n=this;if(void 0===o&&(o=0),null!=e&&null!=a&&null!=a.zombieData){this.plantData=e,this.node.zIndex=5;var i=cc.v2(80,100);this.atlasSpine.node.active=!0,this.jackBoxAni.node.active=!1,this.atlasSpine.paused=!0,this.atlasSpine.node.opacity=0;var r=this.node.getChildByName("ladder");switch(r.active=!1,this.atlasSpine.node.opacity=255,a.zombieData.zombieType){case l.pzaZombieEnum.BUCKET_HEAD_ZOMBIE:case l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE:t==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):t==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1"),i=cc.v2(-10,130);break;case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE:t==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("4door3"):t==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("4door2"):this.atlasSpine.setSkin("4door1");break;case l.pzaZombieEnum.FOOTBALL_ZOMBIE:t==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("6hat3"):t==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("6hat2"):this.atlasSpine.setSkin("6hat1");break;case l.pzaZombieEnum.JACK_ZOMBIE:this.jackBoxAni.node.active=!0,this.atlasSpine.node.active=!1,this.jackBoxAni.pauseAnimation(),i=cc.v2(10,60);break;case l.pzaZombieEnum.POGO_ZOMBIE:t==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("13pr2"):t==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("13pr2"):this.atlasSpine.setSkin("13pr1");break;case l.pzaZombieEnum.DIGGER_ZOMBIE:this.atlasSpine.setSkin("20pr1");break;case l.pzaZombieEnum.LADDER_ZOMBIE:this.atlasSpine.node.active=!1,this.jackBoxAni.node.active=!1,r.active=!0,i=cc.v2(50,150)}if(null!=a.logicPos?this.node.setPosition(a.logicPos.clone()):a.zombieData.zombieType==l.pzaZombieEnum.Mac_GARGANTUAR&&(this.node.y+=180,this.node.x-=40),null!=e.logicPos){var p=e.logicPos.clone();null!=i&&(p.x+=i.x,p.y+=i.y),this.absorbFlying=!0,this.node.runAction(cc.sequence(cc.moveTo(.5,p),cc.callFunc(function(){n.absorbFlying=!1,n.returnTime=10,n.node.zIndex=10*-e.yIndex})))}}},a.prototype.labbyInit=function(e,a){var t,o=this;if(this.plantData=e,this.node.zIndex=5,this.jackBoxAni.node.active=!1,this.atlasSpine.node.active=!1,this.node.getChildByName("ladder").active=!0,t=cc.v2(100,100),null!=a.logicPos&&this.node.setPosition(a.logicPos.clone()),null!=e.logicPos){var n=e.logicPos.clone();null!=t&&(n.x+=t.x,n.y+=t.y),this.absorbFlying=!0,this.node.runAction(cc.sequence(cc.moveTo(.5,n),cc.callFunc(function(){o.absorbFlying=!1,o.returnTime=10,o.node.zIndex=10*-e.yIndex})))}},a.prototype.logicUpdate=function(e){this.absorbFlying||(null==this.plantData||this.plantData.isDead?this.close():(this.returnTime-=e,this.returnTime<=0&&this.close()))},a.prototype.pauseSelf=function(){this.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.node.resumeAllActions()},a.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([d(sp.Skeleton)],a.prototype,"atlasSpine",void 0),i([d(p.pzaSpineController)],a.prototype,"jackBoxAni",void 0),i([d(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([u],a)}(r.pzaBaseComponent);t.pzaAbsorbIronEquip=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaZombieEnum":"pzaZombieEnum"}],pzaAchieveItem:[function(e,a,t){"use strict";cc._RF.push(a,"3d125L0iahI36Dm6qIZMrRf","pzaAchieveItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaSpriteFrameManager"),c=e("../Common/pzaWorldEventManager"),u=e("./pzaAchieveMgr"),d=e("./pzaAchieveRewardItem"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.t_name=null,a.t_desc=null,a.reward_prefab=null,a.pic_icon=null,a.bt_reward=null,a.reward_rec=null,a.reward=null,a.rewardContainer=null,a.special=null,a.achieve=null,a.bg_res=null,a.rewardItems=null,a}return n(a,e),a.prototype.onEnable=function(){c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SPECIAL_ACH,this.showSpecial,this),this.bt_reward.on(cc.Node.EventType.TOUCH_END,this.clickRecieveReward,this)},a.prototype.onDisable=function(){c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SPECIAL_ACH,this.showSpecial,this),this.bt_reward.off(cc.Node.EventType.TOUCH_END,this.clickRecieveReward,this)},a.prototype.show=function(e,a,t){return void 0===t&&(t=null),this.achieve=a,this.bg_res=t,this.node.active=!0,this.node.parent=e.container,this.special.active=!1,this.updateUI(!0),this.showRewards(),1==this.achieve.hide&&(this.node.active=!1),this},a.prototype.updateUI=function(e){return null!=this.achieve&&36==this.achieve.id&&0==this.achieve.state?(this.t_desc.node.active=!1,this.t_name.node.active=!1,void(this.pic_icon.node.active=!1)):this.achieve?(this.t_desc.node.active=!0,this.t_name.node.active=!0,this.pic_icon.node.active=!0,e&&(this.t_name.string=this.achieve.name,this.t_desc.string=this.achieve.desc),s.pzaSpriteFrameManager.loadAchieveIcon(this.achieve.id,this.pic_icon),this.achieve.state?(this.pic_icon.node.opacity=255,36===this.achieve.id&&(this.t_desc.string=this.achieve.desc.replace("100",p.pzaLocalData.data.specailAchTime.toFixed(2)))):this.pic_icon.node.opacity=80,this.bt_reward.active=1===this.achieve.state,this.reward_rec.active=2===this.achieve.state,this.reward.active=!0,void(this.reward.active?this.node.zIndex=-1:this.node.zIndex=0)):(this.t_desc.node.active=!1,this.t_name.node.active=!1,void(this.pic_icon.node.active=!1))},a.prototype.showRewards=function(){if(this.achieve){this.reward.active=!0;var e=this.achieve.reward;null!=this.rewardItems&&this.rewardItems.forEach(function(e){r.pzaGameCommonPool.returnInstant(e.node)}),this.rewardItems=[];for(var a=0;a<e.length;a++){var t=e[a].split("_"),o=parseInt(t[0]),n=parseInt(t[1]),i=r.pzaGameCommonPool.requestInstant(this.reward_prefab),p=i.getComponent(d.pzaAchieveRewardItem);p.init(o,n),this.rewardItems.push(p),i.parent=this.rewardContainer,i.setPosition(0,0),i.active=!0}null!=this.achieve&&36==this.achieve.id&&0==this.achieve.state&&(this.reward.active=!1)}else this.reward.active=!1},a.prototype.showSpecial=function(){"achieve_i_3"==this.bg_res&&(this.special.active=!0)},a.prototype.clickRecieveReward=function(){null!=this.achieve&&(l.pzaSoundManager.playSFX(),u.default.instance().getAllRewards())},i([f({displayName:"\u6210\u5c31\u540d",type:cc.Label})],a.prototype,"t_name",void 0),i([f({displayName:"\u6210\u5c31\u63cf\u8ff0",type:cc.Label})],a.prototype,"t_desc",void 0),i([f({displayName:"\u5956\u52b1\u5185\u5bb9\u9884\u8bbe",type:cc.Prefab})],a.prototype,"reward_prefab",void 0),i([f({displayName:"\u6210\u5c31icon",type:cc.Sprite})],a.prototype,"pic_icon",void 0),i([f({displayName:"\u5956\u52b1\u6309\u94ae",type:cc.Node})],a.prototype,"bt_reward",void 0),i([f({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],a.prototype,"reward_rec",void 0),i([f({displayName:"\u5956\u52b1\u7236\u8282\u70b9",type:cc.Node})],a.prototype,"reward",void 0),i([f({displayName:"\u5956\u52b1\u5bb9\u5668",type:cc.Node})],a.prototype,"rewardContainer",void 0),i([f({displayName:"\u7279\u6b8a\u6210\u5c31\u8fbe\u6210\u63d0\u793a",type:cc.Node})],a.prototype,"special",void 0),i([m],a)}(cc.Component);t.default=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaAchieveMgr":"pzaAchieveMgr","./pzaAchieveRewardItem":"pzaAchieveRewardItem"}],pzaAchieveMgr:[function(e,a,t){"use strict";cc._RF.push(a,"0b984szx4VDnYKdQmGVCQ6w","pzaAchieveMgr");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=e("../Battle/pzaGameState"),r=e("../Common/pzaGamePropConfig"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaRewardManager"),s=e("../Common/pzaTipManager"),c=e("../utils/pzaResMgr"),u=e("../utils/pzakc"),d=e("./pzaAchieve"),h=function(){function e(){this.achieveMap=null,this.list=null}return e.instance=function(){return e._me||(e._me=new e),e._me},e.prototype.init=function(e){this.achieveMap=new Map;for(var a=[],t=[],o=[],n=p.pzaLocalData.data.achieves||{},i=0;i<e.length;i++){var r=new d.pzaAchieve(e[i]),l=n[""+r.id];r.state=l||0,this.achieveMap.set(r.id,r),1==l?a.push(r):2==l?o.push(r):t.push(r)}this.list=a.concat(t).concat(o),this.checkAddAchieve(d.pzaAchieveType.ACH_4,p.pzaLocalData.data.ownPlants.length,!1),this.myConf=e},e.prototype.refreshConf=function(){this.init(c.pzaResMgr.instance().getConf("a9"))},e.prototype.getConf=function(){return this.myConf},e.prototype.getAchieve=function(e){return this.achieveMap.get(e)},e.prototype.canGetAchieve=function(e,a){var t=this.achieveMap.get(e);return t?!t.state&&(a>=t.condNum?(this.addAchieve(e),!0):void 0):(console.error("\u65e0\u6210\u5c31id",e),!1)},e.prototype.hasAchieve=function(e){return this.achieveMap.get(e)},e.prototype.addAchieve=function(e,a){void 0===a&&(a=1);var t=this.achieveMap.get(e);t&&(t.state=a,p.pzaLocalData.data.achieves[""+e]=a,p.pzaLocalData.addDirty("achieves"),u.default.sendMsg("achieveUpdate"))},e.prototype.obtainReward=function(e){var a=this.achieveMap.get(e);if(a){a.state=2,p.pzaLocalData.data.achieves[""+e]=2,p.pzaLocalData.addDirty("achieves"),u.default.sendMsg("achieveUpdate");var t=[];null!=a.reward&&a.reward.forEach(function(e){if(null!=e){var a=e.split("_"),o=new r.pzaRewardPropData(parseInt(a[0]),parseInt(a[1]));t.push(o)}}),l.pzaRewardManager.recieveRewards(t)}else console.error("\u65e0\u6b64\u6210\u5c31id",e)},e.prototype.getAllRewards=function(){var e,a,t=[];try{for(var i=o(this.achieveMap),s=i.next();!s.done;s=i.next()){var c=n(s.value,2),d=c[0],h=c[1];1===h.state&&(null!=h.reward&&h.reward.forEach(function(e){if(null!=e){var a=e.split("_"),o=new r.pzaRewardPropData(parseInt(a[0]),parseInt(a[1]));t.push(o)}}),h.state=2,p.pzaLocalData.data.achieves[""+d]=2)}}catch(m){e={error:m}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}l.pzaRewardManager.recieveRewards(l.pzaRewardManager.rerarrgeArray(t)),p.pzaLocalData.addDirty("achieves"),u.default.sendMsg("achieveUpdate")},e.prototype.getAchieveList=function(){return this.list?this.list:(this.refreshConf(),this.list)},e.prototype.setListNull=function(){this.list=null},e.prototype.obtainPlant=function(){for(var e=p.pzaLocalData.getAdvancedPlant(),a=0;a<e;a++){var t=this.achieveMap.get(d.pzaAchieveType.ACH_28+a);t&&0==t.state&&(t.state=1,p.pzaLocalData.data.achieves[""+t.id]=1,p.pzaLocalData.addDirty("achieves"))}this.checkAddAchieve(d.pzaAchieveType.ACH_4,p.pzaLocalData.data.ownPlants.length,!1)},e.prototype.addMature=function(){var e=this.achieveMap.get(d.pzaAchieveType.ACH_26);null!=e&&0==e.state&&(p.pzaLocalData.data.maturePlantCount++,p.pzaLocalData.addDirty("maturePlantCount"),e.condNum<=p.pzaLocalData.data.maturePlantCount&&(e.state=1,p.pzaLocalData.data.achieves[""+e.id]=1,p.pzaLocalData.addDirty("achieves")))},e.prototype.addGardenPlant=function(e){if(!p.pzaLocalData.data.hasGardenPlants.includes(e)&&(p.pzaLocalData.data.hasGardenPlants.push(e),p.pzaLocalData.addDirty("hasGardenPlants"),p.pzaLocalData.data.hasGardenPlants.length>=39)){var a=this.achieveMap.get(d.pzaAchieveType.ACH_25);if(null==a||0!=a.state)return;a.state=1,p.pzaLocalData.data.achieves[""+a.id]=1,p.pzaLocalData.addDirty("achieves")}},e.prototype.checkAchieve=function(e,a,t){if(void 0===a&&(a=1),void 0===t&&(t=!0),null!=e&&!i.pzaGameState.achieveArr.includes(e)){var o=this.getAchieve(e);if(null!=o&&0==o.state&&!(o.condNum>a)&&(i.pzaGameState.achieveArr.push(e),this.addAchieve(e),t)){var n=o.name+" \u6210\u5c31\u8fbe\u6210";s.pzaTipManager.showGameTip(n)}}},e.prototype.checkAddAchieve=function(e,a,t){void 0===a&&(a=1),void 0===t&&(t=!0),this.checkAchieve(e,a,t)},e.prototype.zombieCheckAchieve=function(e,a,t){void 0===a&&(a=1),void 0===t&&(t=!0),i.pzaGameState.isZombieMode()&&this.checkAchieve(e,a,t)},e._me=null,e}();t.default=h,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaTipManager":"pzaTipManager","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaAchieve":"pzaAchieve"}],pzaAchieveRewardItem:[function(e,a,t){"use strict";cc._RF.push(a,"3acbcbOR+RH8YDGyBTTqyU6","pzaAchieveRewardItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAchieveRewardItem=void 0;var r=e("../Common/pzaGamePropConfig"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.propCount=null,a.sub=null,a.coin=null,a.sun=null,a.cherry=null,a.magnet=null,a}return n(a,e),a.prototype.init=function(e,a){if(null!=e){switch(this.coin=this.sub.getChildByName("coin"),this.sun=this.sub.getChildByName("sun"),this.cherry=this.sub.getChildByName("cherry"),this.magnet=this.sub.getChildByName("magnet"),this.coin.active=!1,this.sun.active=!1,this.cherry.active=!1,this.magnet.active=!1,e){case r.pzaGamePropEnum.PROP_COIN:this.coin.active=!0;break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:this.cherry.active=!0;break;case r.pzaGamePropEnum.PROP_AUTO_PICK:this.magnet.active=!0;break;case r.pzaGamePropEnum.PROP_FREE_SUN:this.sun.active=!0}this.propCount.string="x"+a}},i([s({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"propCount",void 0),i([s({type:cc.Node})],a.prototype,"sub",void 0),i([l],a)}(cc.Component);t.pzaAchieveRewardItem=c,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaAchieveView:[function(e,a,t){"use strict";cc._RF.push(a,"e73c0q6S7BLdbS1+m2BEFUd","pzaAchieveView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaStatisticsMgr"),s=e("../Common/pzaWorldEventManager"),c=e("../Load/pzaBundleObjectPool"),u=e("../View/pzaCommonMask"),d=e("../utils/pzakc"),h=e("./pzaAchieveItem"),m=e("./pzaAchieveMgr"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.container=null,a.bt_home=null,a.popup=null,a.scrollView=null,a.prefab_top=null,a.prefab_item=null,a.scrollBegin=0,a.scrollBottomTime=0,a.itemArr=[],a.homeView=null,a}var t;return n(a,e),t=a,a.prototype.onEnable=function(){var e=this;l.pzaStatisticsMgr.sendEvent("System",{name:"system",value:15}),this.bt_home.on(cc.Node.EventType.TOUCH_END,this.clickHome,this),d.default.delMsgReciever("achieveUpdate"),d.default.regMsgReciever("achieveUpdate",function(){return e.refreshList(),!1}),this.scrollView.node.on("scroll-began",function(){e.scrollBegin||(e.scrollBegin=Date.now(),console.log("\u5f00\u59cb\u6eda\u52a8!!",e.scrollBegin))},this),this.scrollView.node.on("scroll-ended",function(){e.scrollBegin<=0||e.scrollView.getScrollOffset().y+5<e.scrollView.getMaxScrollOffset().y||(e.scrollBottomTime=(Date.now()-e.scrollBegin)/1e3,console.log("\u5230\u5e95\u4e86!!",e.scrollBottomTime),r.pzaLocalData.data.specailAchTime=e.scrollBottomTime,r.pzaLocalData.addDirty("specailAchTime"),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.SPECIAL_ACH,null),e.scrollBegin=-1)},this)},a.prototype.onDisable=function(){t.instance=null,this.scrollBegin=0,this.bt_home.off(cc.Node.EventType.TOUCH_END,this.clickHome,this),d.default.delMsgReciever("achieveUpdate"),this.scrollView.node.off("scroll-began"),this.scrollView.node.off("scroll-ended")},a.prototype.clickHome=function(){p.pzaSoundManager.playSFX(),this.node.active=!1},a.prototype.show=function(e){return this.node?(this.homeView=e,this.node.active=!0,this.itemArr=[],this.node.parent=e.achUI,this.refreshList(),this.scrollView.scrollToTop(),this):null},a.prototype.refreshList=function(){if(this.itemArr&&this.itemArr.length>0)for(var e=this.itemArr.length,a=0;a<e;a++)(n=this.itemArr[a])&&n.achieve&&n.updateUI(!1);else{d.default.removeNodeChildren(this.container),this.itemArr=[];var t=m.default.instance().getAchieveList();if(t){for(a=0;a<t.length;a++){var o=t[a],n=cc.instantiate(this.prefab_item).getComponent(h.default);this.itemArr.push(n.show(this,o,null))}u.pzaCommonMask.hideMask()}}},a.show=function(e){if(t.instance)return m.default.instance().refreshConf(),void t.instance.show(e);u.pzaCommonMask.showMask(!0),c.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Achieve/AchieveView",!1,function(a,o){!a&&o?(m.default.instance().refreshConf(),t.instance=o.getComponent(t).show(e)):console.error(a)})},a.instance=null,i([y({displayName:"\u6210\u5c31\u5bb9\u5668",type:cc.Node})],a.prototype,"container",void 0),i([y({displayName:"\u8fd4\u56dehome\u6309\u94ae",type:cc.Node})],a.prototype,"bt_home",void 0),i([y({displayName:"\u5f39\u7a97\u5c42",type:cc.Node})],a.prototype,"popup",void 0),i([y(cc.ScrollView)],a.prototype,"scrollView",void 0),i([y(cc.Prefab)],a.prototype,"prefab_top",void 0),i([y(cc.Prefab)],a.prototype,"prefab_item",void 0),t=i([z],a)}(cc.Component);t.default=g,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../View/pzaCommonMask":"pzaCommonMask","../utils/pzakc":"pzakc","./pzaAchieveItem":"pzaAchieveItem","./pzaAchieveMgr":"pzaAchieveMgr"}],pzaAchieve:[function(e,a,t){"use strict";cc._RF.push(a,"ce8dfzoBBFECoL0EhxMStB9","pzaAchieve"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAchieveType=t.pzaAchieve=void 0;var o=e("../utils/pzakc");t.pzaAchieve=function(e){this.id=0,this.name="",this.desc="",this.icon="",this.reward=[],this.condNum=0,this.state=0,this.hide=0,this.id=e.id,this.name=e.name||"",this.desc=e.desc||"",this.icon=e.icon||"",this.reward=o.default.strArr(e.reward),this.condNum=e.condNum||0,this.hide=e.hide||0},function(e){e[e.ACH_1=1]="ACH_1",e[e.ACH_2=2]="ACH_2",e[e.ACH_3=3]="ACH_3",e[e.ACH_4=4]="ACH_4",e[e.ACH_5=5]="ACH_5",e[e.ACH_6=6]="ACH_6",e[e.ACH_7=7]="ACH_7",e[e.ACH_8=8]="ACH_8",e[e.ACH_9=9]="ACH_9",e[e.ACH_10=10]="ACH_10",e[e.ACH_11=11]="ACH_11",e[e.ACH_12=12]="ACH_12",e[e.ACH_13=13]="ACH_13",e[e.ACH_14=14]="ACH_14",e[e.ACH_15=15]="ACH_15",e[e.ACH_16=16]="ACH_16",e[e.ACH_17=17]="ACH_17",e[e.ACH_18=18]="ACH_18",e[e.ACH_19=19]="ACH_19",e[e.ACH_20=20]="ACH_20",e[e.ACH_21=21]="ACH_21",e[e.ACH_22=22]="ACH_22",e[e.ACH_23=23]="ACH_23",e[e.ACH_24=24]="ACH_24",e[e.ACH_25=25]="ACH_25",e[e.ACH_26=26]="ACH_26",e[e.ACH_27=27]="ACH_27",e[e.ACH_28=28]="ACH_28",e[e.ACH_29=29]="ACH_29",e[e.ACH_30=30]="ACH_30",e[e.ACH_31=31]="ACH_31",e[e.ACH_32=32]="ACH_32",e[e.ACH_33=33]="ACH_33",e[e.ACH_34=34]="ACH_34",e[e.ACH_35=35]="ACH_35",e[e.ACH_41=41]="ACH_41",e[e.ACH_42=42]="ACH_42"}(t.pzaAchieveType||(t.pzaAchieveType={})),cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaActivityPageItem:[function(e,a,t){"use strict";cc._RF.push(a,"0f03fjQW45IW6cX4JI+T+ES","pzaActivityPageItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaOperationMgr"),p=e("../Common/pzaRedPointMgr"),l=e("../Common/pzaSpriteFrameManager"),s=e("../LoginRewardView/pzaLoginActivityConf"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.img_activity=null,a.activityType=s.pzaActivityTypeEnum.RIDER_FALL,a.homeView=null,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.click,this)},a.prototype.bindData=function(e,a){var t=this;this.homeView=e,this.activityType=a;var o=null;switch(a){case s.pzaActivityTypeEnum.RIDER_FALL:this.getComponent(p.default).setRedType("riderfall"),o="resources/Texture/PageItem/page_1";break;case s.pzaActivityTypeEnum.LOGIN_REWARDER:this.getComponent(p.default).setRedType("loginreward"),o="resources/Texture/PageItem/page_0";break;case s.pzaActivityTypeEnum.NEWPLAYER_TASK:this.getComponent(p.default).setRedType("newplayer"),o="resources/Texture/PageItem/page_2"}l.pzaSpriteFrameManager.loadSpriteFrame(o,function(e){t.img_activity.spriteFrame=e})},a.prototype.click=function(){switch(this.activityType){case s.pzaActivityTypeEnum.RIDER_FALL:r.pzaOperationMgr.showRiderFall();break;case s.pzaActivityTypeEnum.LOGIN_REWARDER:r.pzaOperationMgr.showLoginActivity();break;case s.pzaActivityTypeEnum.NEWPLAYER_TASK:r.pzaOperationMgr.showNewPlayerTask()}},a.prototype.onDisable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.click,this)},i([d({displayName:"\u6d3b\u52a8\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_activity",void 0),i([u],a)}(cc.Component);t.default=h,cc._RF.pop()},{"../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRedPointMgr":"pzaRedPointMgr","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../LoginRewardView/pzaLoginActivityConf":"pzaLoginActivityConf"}],pzaActivityPageView:[function(e,a,t){"use strict";cc._RF.push(a,"69d17gnaOBPQLUqr3hDAevu","pzaActivityPageView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaLocalData"),p=e("../Common/pzaOperationMgr"),l=e("../LoginRewardView/pzaLoginActivityConf"),s=e("../utils/pzakc"),c=e("./pzaActivityPageItem"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.prefab_pageItem=null,a.actPage=null,a.indicator=null,a.allActivityCnt=2,a.completeCnt=0,a.activityNames=[],a}return n(a,e),a.prototype.onEnable=function(){var e=this;r.pzaLocalData.disablePostFn?this.node.active=!1:(s.default.regMsgReciever("readGameData",function(){return e.checkActivity(),!0}),this.node.opacity=0,this.checkActivity(),this.pageScrollTimer=setInterval(function(){e.autoScrollView()},3e3))},a.prototype.checkActivity=function(){var e=this;this.actPage.removeAllPages(),p.pzaOperationMgr.checkRiderFall(function(){e.checkActivityComplete(l.pzaActivityTypeEnum.RIDER_FALL)}),p.pzaOperationMgr.checkLoginReward(function(){e.checkActivityComplete(l.pzaActivityTypeEnum.LOGIN_REWARDER)}),p.pzaOperationMgr.checkNewPlayerTask(function(){e.checkActivityComplete(l.pzaActivityTypeEnum.NEWPLAYER_TASK)})},a.prototype.onDisable=function(){s.default.delMsgReciever("readGameData"),clearInterval(this.pageScrollTimer)},a.prototype.clickLoginReward=function(){p.pzaOperationMgr.showLoginActivity()},a.prototype.clickRiderFall=function(){p.pzaOperationMgr.showRiderFall()},a.prototype.checkActivityComplete=function(e){var a;this.indicator.active=!1,this.node.opacity=255,this.actPage.node.active=!0,e==l.pzaActivityTypeEnum.RIDER_FALL&&((a=cc.instantiate(this.prefab_pageItem)).getComponent(c.default).bindData(null,l.pzaActivityTypeEnum.RIDER_FALL),this.actPage.addPage(a)),e==l.pzaActivityTypeEnum.LOGIN_REWARDER&&((a=cc.instantiate(this.prefab_pageItem)).getComponent(c.default).bindData(null,l.pzaActivityTypeEnum.LOGIN_REWARDER),this.actPage.addPage(a)),e==l.pzaActivityTypeEnum.NEWPLAYER_TASK&&((a=cc.instantiate(this.prefab_pageItem)).getComponent(c.default).bindData(null,l.pzaActivityTypeEnum.NEWPLAYER_TASK),this.actPage.addPage(a)),this.actPage.getPages().length>1&&(this.indicator.active=!0)},a.prototype.autoScrollView=function(){var e=this.actPage.getCurrentPageIndex()+1;e+1>this.actPage.getPages().length&&(e=0),this.actPage.scrollToPage(e,.5)},i([h({displayName:"\u6d3b\u52a8pageItem",type:cc.Prefab})],a.prototype,"prefab_pageItem",void 0),i([h({type:cc.PageView})],a.prototype,"actPage",void 0),i([h({type:cc.Node})],a.prototype,"indicator",void 0),i([d],a)}(cc.Component);t.default=m,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../LoginRewardView/pzaLoginActivityConf":"pzaLoginActivityConf","../utils/pzakc":"pzakc","./pzaActivityPageItem":"pzaActivityPageItem"}],pzaAdNative:[function(e,a,t){"use strict";cc._RF.push(a,"cfc56ai9w5HdaBb5+sG/urM","pzaAdNative");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaChannel"),p=e("./pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.pic=null,a.close=null,a.clickArea=null,a.adKey=null,a.adList=null,a}return n(a,e),a.prototype.onLoad=function(){var e=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){p.default.log("\u539f\u751f\u5c06\u5173\u95ed");var a=r.pzaChannel.instance().getCtrl("p8");a&&Math.random()<a/100&&r.pzaChannel.instance().reportAdClick(e.adKey),e.hide()}),this.clickArea.on(cc.Node.EventType.TOUCH_END,function(){p.default.log("\u539f\u751f\u70b9\u51fb"),r.pzaChannel.instance().reportAdClick(e.adKey),e.adKey.indexOf("Icon")<0&&e.hide()})},a.prototype.hide=function(){this.node.active=!1,r.pzaChannel.instance().closeNative(this.adKey),this.node.destroy()},a.prototype.show=function(e,a,t,o){var n=this;this.adKey=t,this.adList=o,p.default.log("\u539f\u751f\u5f00\u59cbshow",t,o);var i=o[0];if(i){var l=i.icon;if(i.imgUrlList&&i.imgUrlList.length>0?l=i.imgUrlList[0]:i.iconUrlList&&i.iconUrlList>0&&(l=i.iconUrlList[0]),p.default.log("\u539f\u751fpicUrl:",l),l){var s=".jpg";-1!=l.indexOf(".png")?s=".png":-1!=l.indexOf(".jpg")?s=".jpg":-1!=l.indexOf(".jpeg")&&(s=".jpeg"),cc.assetManager.loadRemote(l,{ext:s},function(o,l){if(o)return p.default.err("\u539f\u751f\u56fe\u7247\u52a0\u8f7d\u5931\u8d25",s,o),void r.pzaChannel.instance().closeNative(n.adKey);var c=new cc.SpriteFrame(l);n.pic.spriteFrame=c,p.default.log("adid==",i.adId);var u=r.pzaChannel.instance().getCtrl("p2");u>0&&n.adKey.indexOf("nsert")>0?setTimeout(function(){n.node.active=!0,n.node.parent=e,n.node.setPosition(a),r.pzaChannel.instance().reportAdShow(t,n.node)},1e3*u):(n.node.active=!0,n.node.parent=e,n.node.setPosition(a),r.pzaChannel.instance().reportAdShow(t,n.node))})}}},i([c(cc.Sprite)],a.prototype,"pic",void 0),i([c(cc.Node)],a.prototype,"close",void 0),i([c(cc.Node)],a.prototype,"clickArea",void 0),i([s],a)}(cc.Component);t.default=u,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaAdTicketIcon:[function(e,a,t){"use strict";cc._RF.push(a,"7ff46OJBOxMo526UYe9FYB3","pzaAdTicketIcon");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAdTicketIcon=void 0;var r=e("../Common/pzaLocalData"),p=e("../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.icon=null,a}return n(a,e),a.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this),this.updateView()},a.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this)},a.prototype.updateView=function(){this.icon.enabled=r.pzaLocalData.data.adTicket>0},i([c({type:cc.Sprite})],a.prototype,"icon",void 0),i([s],a)}(cc.Component);t.pzaAdTicketIcon=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaAdTicketView:[function(e,a,t){"use strict";cc._RF.push(a,"21facSkcRpOTYQDmynChyAH","pzaAdTicketView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAdTicketView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaWorldEventManager"),s=e("../utils/pzaChannel"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.adTickCount=null,a}return n(a,e),a.prototype.onEnable=function(){this.updateView(),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this),this.node.active=s.pzaChannel.isConfRemote||"ks1"==s.pzaChannel.instance().getChannel().channel||"wx"==s.pzaChannel.instance().getChannel().channel},a.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this)},a.prototype.updateView=function(){this.adTickCount.string=""+p.pzaLocalData.data.adTicket},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({type:cc.Label})],a.prototype,"adTickCount",void 0),i([u],a)}(cc.Component);t.pzaAdTicketView=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzaChannel":"pzaChannel"}],pzaAniMask:[function(e,a,t){"use strict";cc._RF.push(a,"f41ccws4n1N76Ef/xqoh/IX","pzaAniMask");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAniMask=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.fadeInMask=null,a.fadeOutMask=null,a.showAniMask=!1,a.hideAniMask=!1,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){t.instance=this},a.prototype.update=function(e){var a=this;this.showAniMask&&(this.fadeInMask.width-=1800*e,this.fadeInMask.height-=1800*e,this.fadeInMask.width<0&&(this.fadeInMask.width=0),this.fadeInMask.height<0&&(this.fadeInMask.height=0),this.fadeInMask.width<=0&&this.fadeInMask.height<=0&&(this.showAniMask=!1,console.log("\u6de1\u5165\u52a8\u753b\u7ed3\u675f"),setTimeout(function(){a.callBack&&a.callBack()},500))),this.hideAniMask&&(this.fadeOutMask.width+=1800*e,this.fadeOutMask.height+=1800*e,this.fadeOutMask.width>2e3&&(this.fadeOutMask.width=2e3),this.fadeOutMask.height>2e3&&(this.fadeOutMask.height=2e3),this.fadeOutMask.width>=2e3&&this.fadeOutMask.height>=2e3&&(this.hideAniMask=!1,console.log("\u6de1\u51fa\u52a8\u753b\u7ed3\u675f"),this.fadeOutMask.active=!1))},a.showMask=function(e){var a=t.instance;null!=a&&(a.callBack=e,a.showAniMask=!0,a.fadeOutMask.active=!1,a.fadeInMask.active=!0,a.fadeInMask.width=2e3,a.fadeInMask.height=2e3)},a.hideMask=function(){var e=t.instance;null!=e&&(e.hideAniMask=!0,e.fadeInMask.active=!1,e.fadeOutMask.active=!0,e.fadeOutMask.width=0,e.fadeOutMask.height=0)},a.instance=null,i([l({type:cc.Node})],a.prototype,"fadeInMask",void 0),i([l({type:cc.Node})],a.prototype,"fadeOutMask",void 0),t=i([p],a)}(cc.Component);t.pzaAniMask=s,cc._RF.pop()},{}],pzaArtTest:[function(e,a,t){"use strict";cc._RF.push(a,"837feCEGUNN0KW8Hoa9RsO7","pzaArtTest");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaArtTest=void 0;var r=e("../../start/pzaBundleController"),p=e("../Achieve/pzaAchieveMgr"),l=e("../Battle/pzaGameState"),s=e("../Common/pzaGameConfig"),c=e("../Common/pzaGameManager"),u=e("../Common/pzaGamePartConfig"),d=e("../Common/pzaGamePropConfig"),h=e("../Common/pzaLocalData"),m=e("../Common/pzaUtil"),f=e("../Load/pzaBundleObjectPool"),z=e("../Load/pzaPreLoadManager"),y=e("../Shop/pzaShopConfig"),g=e("../Task/pzaTaskMgr"),v=e("../utils/pzaChannel"),b=e("../utils/pzakc"),P=e("../utils/pzaResMgr"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.layer_loading=null,a.progressBar=null,a.progressTxt=null,a.showLoadingView=!1,a}return n(a,e),a.prototype.onLoad=function(){console.log("\u6f14\u793a\u5f00\u59cb"),b.default.init(),m.pzaUtil.initGameSpeed(),this.channelInit()},a.prototype.loadGame=function(){var e=this;cc.assetManager.loadBundle(r.pzaBundleType.Spine,function(a,t){null==a&&null!=t?(cc.assetManager.loadBundle(r.pzaBundleType.Loading,function(a,t){null==a&&null!=t?e.showLoadingView||r.pzaBundleController.loadBundle(r.pzaBundleType.Game,function(a){null!=a?f.pzaBundleObjectPool.preLoadResource(z.pzaPreLoadManager.MainResourceMap.get(z.pzaResourceUrl.MAIN_SCENE),function(a,t){e.progressBar.progress=a/t,e.progressTxt.string=Math.floor(a/t*100)+"%"},function(){e.finishLoad()}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")}):console.error(a)}),r.pzaBundleController.loadBundle(r.pzaBundleType.Spine,function(e){null!=e||console.error("\u52a0\u8f7dSpine Bundle\u5f02\u5e38~")})):console.error(a)})},a.prototype.finishLoad=function(){this.layer_loading.active=!1,console.log("cc.director.loadScene"),cc.director.loadScene("main",function(){c.pzaGameManager.preLoadAndStart(l.pzaGameMode.ART_TEST,1,9)})},a.prototype.channelInit=function(){var e=this;v.pzaChannel.getRemoteTime(),v.pzaChannel.isConfRemote&&(v.pzaChannel.instance().channel="noAD"),h.pzaLocalData.testData(),v.pzaChannel.instance().init(function(){e.loadGame(),e.initConfig()})},a.prototype.initConfig=function(){P.pzaResMgr.instance().loadConf(function(){u.pzaWaveConfig.initBaseWaveConfig(P.pzaResMgr.instance().getConf("a2")),s.pzaGameConfig.initPlantConfig(P.pzaResMgr.instance().getConf("a3")),s.pzaGameConfig.initZombieConfig(P.pzaResMgr.instance().getConf("a4")),u.pzaGamePartConfig.initPartConfig(P.pzaResMgr.instance().getConf("a5")),y.pzaShopConfig.initShopConfig(P.pzaResMgr.instance().getConf("a6")),d.pzaGamePropConfig.initPropConfig(P.pzaResMgr.instance().getConf("a7")),p.default.instance().init(P.pzaResMgr.instance().getConf("a9")),g.default.instance().init()})},i([S(cc.Node)],a.prototype,"layer_loading",void 0),i([S(cc.ProgressBar)],a.prototype,"progressBar",void 0),i([S(cc.Label)],a.prototype,"progressTxt",void 0),i([E],a)}(cc.Component);t.pzaArtTest=_,cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUtil":"pzaUtil","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc"}],pzaAssessView:[function(e,a,t){"use strict";cc._RF.push(a,"173b5FvLf5FWof0z0h/yswq","pzaAssessView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAssessView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaCommonPopView"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameConfig"),c=e("../../Common/pzaGameManager"),u=e("../../Common/pzaLocalData"),d=e("../../Common/pzaTipManager"),h=e("../../Common/pzaUIManager"),m=e("../../Common/pzaUtil"),f=e("../../Common/pzaWorldEventManager"),z=e("../../Load/pzaPreLoadManager"),y=e("../pzaWarningView"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.assessNode=null,a.noAssessNode=null,a.backBtn=null,a.backTxt=null,a.reStartBtn=null,a.plantStarLab=null,a.victoryLb=null,a.backGameCall=null,a.specailPartTip=new Map([["2-3","\u987a\u5229\u901a\u5173"],["5-3","\u987a\u5229\u901a\u5173"],["5-7","\u987a\u5229\u901a\u5173"],["7-3","\u987a\u5229\u901a\u5173"],["10-3","\u987a\u5229\u901a\u5173"],["10-7","\u987a\u5229\u901a\u5173"]]),a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this);var a=0;c.pzaGameManager.getCurrentGame().skipPartStar()||(a=s.pzaGameConfig.getPartStar(r.pzaGameState.curChapter,r.pzaGameState.curPart)),this.noAssessNode.active=a<=0,this.assessNode.active=a>0,this.backBtn.x=-204,this.reStartBtn.active=!0,this.backTxt.string="\u8fd4\u56de\u6e38\u620f",this.plantStarLab.string="\u4e0d\u88ab\u51fb\u7834"+r.pzaGameState.lossStarCount+"\u4f4d\u9a91\u58eb\u6295\u5f71";var t=r.pzaGameState.hasMainConf();t&&t.tips?this.victoryLb.string=t.tips:this.victoryLb.string="\u987a\u5229\u901a\u5173",this.specailPartTip.get(r.pzaGameState.curChapter+"-"+r.pzaGameState.curPart)&&(this.victoryLb.string=this.specailPartTip.get(r.pzaGameState.curChapter+"-"+r.pzaGameState.curPart))},a.prototype.bindBackGameCall=function(e,a){void 0===a&&(a=!1),this.backGameCall=e,a&&(this.backBtn.x=0,this.reStartBtn.active=!1,this.backTxt.string="\u786e\u5b9a")},a.prototype.clickBackGame=function(){this.backGameCall&&this.backGameCall(),this.close()},a.prototype.clickRestart=function(){var e=this,a=u.pzaLocalData.endLessPowerCost,t=!0;(c.pzaGameManager.getCurrentGame().isMainMode()||r.pzaGameState.judgeIsMini(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsVase(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsZombie(r.pzaGameState.gameMode))&&(a=u.pzaLocalData.normalPowerCost),u.pzaLocalData.isShowPowerGift||(a=0),r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)&&(a=0,t=!1),h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(y.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){if(u.pzaLocalData.data.power<a)return d.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void h.pzaUIManager.showPowerView();u.pzaLocalData.setPower(-a),u.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,u.pzaLocalData.addDirty("autoPickLeft"),c.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUtil.changeGameSpeed(1),c.pzaGameManager.getCurrentGame().gameRestart(),e.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1,!1,0,t,a,!1,1)})},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],a.prototype,"assessNode",void 0),i([b({displayName:"\u65e0\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],a.prototype,"noAssessNode",void 0),i([b({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],a.prototype,"backBtn",void 0),i([b({displayName:"\u8fd4\u56de\u6309\u94ae\u6587\u5b57",type:cc.Label})],a.prototype,"backTxt",void 0),i([b({displayName:"\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",type:cc.Node})],a.prototype,"reStartBtn",void 0),i([b({displayName:"\u690d\u7269\u661f\u7ea7\u63cf\u8ff0",type:cc.Label})],a.prototype,"plantStarLab",void 0),i([b({displayName:"\u901a\u5173\u661f\u7ea7\u63cf\u8ff0",type:cc.Label})],a.prototype,"victoryLb",void 0),i([v],a)}(p.default);t.pzaAssessView=P,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaCommonPopView":"pzaCommonPopView","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../pzaWarningView":"pzaWarningView"}],pzaAttackType:[function(e,a,t){"use strict";cc._RF.push(a,"6732547mBFJwZjBvvCg1w3a","pzaAttackType"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaAttackType=void 0,function(e){e[e.FLOOR_ATK=1]="FLOOR_ATK",e[e.BOOM=2]="BOOM",e[e.EAT=3]="EAT",e[e.BANG=4]="BANG",e[e.SPIKE=5]="SPIKE",e[e.TWINE=6]="TWINE",e[e.ROLLING=7]="ROLLING",e[e.CLEAN_CAR=8]="CLEAN_CAR",e[e.BOWLING=9]="BOWLING",e[e.NORMAL_BOOM=10]="NORMAL_BOOM",e[e.KNOCK=11]="KNOCK",e[e.PENETRATE=12]="PENETRATE",e[e.DEATH=13]="DEATH",e[e.THROW_ATK=14]="THROW_ATK",e[e.TALL_BOWLING=15]="TALL_BOWLING",e[e.DEATH_ANI=16]="DEATH_ANI",e[e.FLOOR_ASHES_ATK=17]="FLOOR_ASHES_ATK",e[e.HIT_FLY=18]="HIT_FLY"}(t.pzaAttackType||(t.pzaAttackType={})),cc._RF.pop()},{}],pzaBackPumpkin:[function(e,a,t){"use strict";cc._RF.push(a,"f2546d9ZlZCerwKwtGHxLQB","pzaBackPumpkin");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBackPumpkin=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.animation=null,a}return n(a,e),a.prototype.bindData=function(e){if(this.baseData=e,null!=e&&null!=e.yIndex){var a=10*-this.baseData.yIndex-2;this.node.zIndex=a}this.animation.playAnimation("idle",!0),this.logicLateUpdate()},a.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},a.prototype.logicLateUpdate=function(){null==this.baseData||this.baseData.isDead||0==this.baseData.floatY||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},a.prototype.pauseSelf=function(){this.animation.pauseAnimation()},a.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||this.animation.resumeAnimation()},i([c({displayName:"\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"animation",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaBackPumpkin=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaBackupDancerZombie:[function(e,a,t){"use strict";cc._RF.push(a,"6429fMJWr9ANbWhxTI8PfRn","pzaBackupDancerZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBackupDancerZombie=void 0;var r=e("../../Common/pzaUIManager"),p=e("../../Common/pzaWorldEventManager"),l=e("../../Load/pzaPreLoadManager"),s=e("../../View/Battle/pzaNewZombieView"),c=e("../Data/pzaBaseData"),u=e("../Data/pzaBuffData"),d=e("../Data/pzaZombieEnum"),h=e("../pzaGameState"),m=e("./pzaNormalZombie"),f=e("./pzaZombieSlot"),z=e("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=(y.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName="skin2",a.dacing=!1,a.summoning=!1,a.breakCall=null,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,-1.69,53.99))]])},a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.dacing=!1,this.summoning=!1,this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.IMM_CONTROL,-1))},a.prototype.breakDirt=function(e){this.breakCall=e,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.5,this.animation.node.y=-140,this.animation.playAnimation("idle1",!0)},a.prototype.logicUpdate=function(e){var a=this,t=this.lastBePasueControled?0:1;if(this.animation.changeAnimationTimeScale(t),this.baseData.isDead?this.animation.changeAnimationTimeScale(1):this.animation.changeAnimationTimeScale(t),this.breakDirtTime>0){this.breakDirtTime-=e;var o=140*-Math.max(0,this.breakDirtTime/.5);if(this.animation.node.y=o,this.breakDirtTime<=0&&null!=this.mask){this.mask.enabled=!1,this.summoning=!0,this.curShadow&&this.curShadow.showShadow();var n=!1,i=this.animation.getAnimationDuration("idle5")/this.animation.spineAnimation.timeScale+.1;this.scheduleOnce(function(){n||(n=!0,a.summoning=!1,a.breakCall&&(a.breakCall()||a.dance()),a.baseData.buffData.removeBuff(u.pzaBuffType.IMM_CONTROL))},i),this.animation.playAnimation("idle5",!1,function(){n||(n=!0,a.summoning=!1,a.breakCall&&(a.breakCall()||a.dance()),a.baseData.buffData.removeBuff(u.pzaBuffType.IMM_CONTROL))})}}else if(!this.summoning&&null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(e);else{var r=this.findTarget();null==r||r.isDead?this.updateMove(e):(this.dacing&&(this.dacing=!1),this.attack(e,r))}else this.changeRowMove(e)}},a.prototype.updateMove=function(e){if(!this.dacing&&this.baseData.zombieData.danceData){this.zombieState!=z.pzaZombieState.MOVE&&this.playMoveAnimation();var a=this.baseData.zombieData.moveSpd,t=1;if(a*=t+=this.baseData.zombieData.danceData.getSpeedBuff(),this.hasStopZombie()&&(a=0),this.animation.changeAnimationTimeScale(t),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=e*a:this.baseData.logicPos.x-=e*a,this.baseData.zombieData.hypnosis&&this.baseData.logicPos.x>=640)this.death(!1);else{this.baseData.logicPos.x<(h.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome(),this.baseData.xIndex;var o=h.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.xIndex=o,-1==this.changeTargetRow){var n=.1*h.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;h.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,n)}if(h.pzaGameState.newZombie==this.baseData.zombieData.zombieType){h.pzaGameState.gamePause=!0,p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.GAME_PAUSE,null);var i=this.node.convertToWorldSpaceAR(cc.v2());r.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(e){var a=e&&e.getComponent(s.pzaNewZombieView);a&&a.showNewZombie(h.pzaGameState.newZombie,i),h.pzaGameState.showUnlockZombie()})}}}},a.prototype.playMoveAnimation=function(){var e=this;this.zombieState=z.pzaZombieState.MOVE,this.baseData.isDead||(this.baseData.zombieData.danceData.getMainData()==this.baseData?this.baseData.zombieData.danceData.walkStep>=3&&!this.hasStopZombie()?this.dance():this.animation.playAnimation("idle6",!1,function(){e.baseData.zombieData.danceData.walkStep++,e.playMoveAnimation()}):this.animation.playAnimation("idle6",!1,function(){e.playMoveAnimation()}))},a.prototype.dance=function(){var e=this;if(this.dacing=!0,this.animation.playAnimation("idle7",!1,function(){e.animation.playAnimation("idle8",!1,function(){e.dacing=!1,e.playMoveAnimation()})}),this.baseData.zombieData.danceData.getMainData()==this.baseData){this.baseData.zombieData.danceData.walkStep=0,this.zombieState=z.pzaZombieState.SPECIAL;var a=this.baseData.zombieData.danceData.getOtherDatas();a&&a.forEach(function(e){var a=e.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(e):window.pzazombieManager.getZombie(e);a&&a.dance()})}},a.prototype.bePauseControl=function(){var e=this;if(null!=this.baseData&&!this.baseData.isDead&&!this.lastBePasueControled){this.lastBePasueControled=!0,this.pauseSelf();var a=this.baseData.zombieData.danceData.getOtherDatas();null!=a&&a.forEach(function(a){if(a!=e.baseData&&null!=a&&!a.isDead){var t=a.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(a):window.pzazombieManager.getZombie(a);t&&t.bePauseControl()}})}},a.prototype.hasStopZombie=function(){if(!this.baseData||!this.baseData.zombieData)return!1;if(!this.baseData.zombieData.danceData)return!1;var e=this.baseData.zombieData.danceData.getOtherDatas(),a=this.baseData.zombieData.danceData.getMainData();if(null==e)return!1;null!=a&&e.push(a);for(var t=0;t<e.length;t++){var o=e[t];if(o!=this.baseData&&null!=o&&!o.isDead){if(o.isBeControlled())return!0;var n=o.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(o):window.pzazombieManager.getZombie(o);if(null==n)continue;var i=n;if(i.zombieState==z.pzaZombieState.EAT_ATK||i.zombieState==z.pzaZombieState.SPECIAL)return!0}}return!1},a.prototype.changeMapRow=function(){e.prototype.changeMapRow.call(this),this.dacing=!1,this.baseData.zombieData.danceData.removeOtherData(this.baseData),this.baseData.zombieData.danceData=new c.pzaDanceData(this.baseData)},a.prototype.zombieHurt=function(){this.zombieHurtState=d.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.death=function(a,t){if(this.breakDirtTime>0||this.summoning)return this.breakCall&&this.breakCall(),void e.prototype.death.call(this,!1,t);e.prototype.death.call(this,a,t)},i([g],a)}(m.pzaNormalZombie));t.pzaBackupDancerZombie=v,cc._RF.pop()},{"../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBagPlantCard:[function(e,a,t){"use strict";cc._RF.push(a,"d4c9aa5gwhP3pERHLKMrPqN","pzaBagPlantCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBagPlantCard=void 0;var p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/pzaGameState"),s=e("../../Common/pzaGameCommonPool"),c=e("../../Common/pzaGameConfig"),u=e("../../Common/pzaGameManager"),d=e("../../Common/pzaLocalData"),h=e("../../Common/pzaSoundManager"),m=e("../../Common/pzaSpriteFrameManager"),f=e("../../Common/pzaUIManager"),z=e("../../Common/pzaWorldEventManager"),y=e("../../Load/pzaPreLoadManager"),g=e("../../utils/pzaChannel"),v=e("../pzaWarningView"),b=e("./pzaPlantSelectView"),P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.voidBoard=null,a.swIcon=null,a.cardBoard=null,a.cardIcon=null,a.priceLabel=null,a.mask=null,a.selected=null,a.unselectTag=null,a.videoTrial=null,a.videoIcon=null,a.professorSP=null,a.priceSP=null,a.lockNode=null,a.checkFrame=null,a.redPoint=null,a.curPlantType=null,a.plantConfigData=null,a.clickCall=null,a.isSelected=!1,a.isFull=!1,a.isNoRecommend=!1,a.lock=!1,a.imitaterPlant=!1,a.weekTwoLock=!1,a.trailPlant=!1,a}return n(a,e),a.prototype.onEnable=function(){this.lock||this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},a.prototype.bindData=function(e,a,t,o,n){void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),this.weekTwoLock=!1;var i=null!=d.pzaLocalData.data.ownPlants&&d.pzaLocalData.data.ownPlants.indexOf(e)>=0;if(l.pzaGameState.isSurvival()&&d.pzaLocalData.data.preOpenSurvival&&null!=e&&e>=p.pzaPlantEnum.PEA_SHOOTER&&e<=p.pzaPlantEnum.MELON_PULT&&(i=!0),l.pzaGameState.isMiniMode()&&(4==l.pzaGameState.curPart||l.pzaGameState.curPart>=10)&&(i=!0),this.videoTrial.active=!1,n&&(this.trailPlant=!0,this.videoTrial.active=!0,this.videoTrial.getComponent(cc.Button).enabled=!0,this.videoIcon.active=!0,i=!0),null==e||!i&&!o)return this.voidBoard.active=!0,this.cardBoard.node.active=!1,this.lock=!0,void(this.node.active=!1);o||this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this),this.lock=!1,this.voidBoard.active=!1,this.cardBoard.node.active=!0,this.imitaterPlant=t,this.curPlantType=e,this.plantConfigData=c.pzaGameConfig.getPlantConfig(e),this.clickCall=a,m.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),this.setPlantCardSP(e),l.pzaGameState.gameMode==l.pzaGameMode.SUR_ENDLESS&&c.pzaGameConfig.isAdvancePlant(e)?this.priceLabel.string=l.pzaGameState.getPlantPrice(e)+"+":this.priceLabel.string=""+l.pzaGameState.getPlantPrice(e),this.node.stopAllActions(),this.unselectTag.active=!1,this.isSelected=!1,this.isFull=!1,this.refreshRecommend(!1),this.swIcon.active=!1,d.pzaLocalData.data.plantTrial[e+""]>0&&d.pzaLocalData.data.plantTrial[""+e]<=10&&(this.swIcon.active=!0),this.isEnablePlant()&&this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this),this.selected.active=this.isSelected,this.checkRedPoint()},a.prototype.checkRedPoint=function(e){void 0===e&&(e=!1),e&&(d.pzaLocalData.data.redPointPlants[this.curPlantType]="1"),null==d.pzaLocalData.data.redPointPlants[this.curPlantType]?(this.redPoint.active=!0,this.redPoint.stopAllActions(),this.redPoint.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,125),cc.fadeTo(1,255))))):this.redPoint.active=!1},a.prototype.setPlantCardSP=function(e){this.plantConfigData=c.pzaGameConfig.getPlantConfig(e),this.plantConfigData?(m.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),m.pzaSpriteFrameManager.loadPlantProfess(this.plantConfigData.profession,this.professorSP),m.pzaSpriteFrameManager.loadPlantCardSlotFrame(this.cardBoard,e,this.imitaterPlant),m.pzaSpriteFrameManager.loadPlantCardPriceFrame(this.priceSP.getComponent(cc.Sprite),e,this.imitaterPlant)):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",e)},a.prototype.moveTo=function(e,a,t){var o=this;null!=e?this.node.runAction(cc.sequence(cc.moveTo(a,e),cc.callFunc(function(){o.close(),t&&t()}))):this.close()},a.prototype.initSelect=function(){if(this.isSelected=!0,this.weekTwoLock)return this.lockNode.active=!0,this.selected.active=!1,this.mask.active=!0,void(this.mask.opacity=150);this.selected.active=this.isSelected,this.selected.active&&(this.unselectTag.active=!1,this.mask.active=!0,this.mask.opacity=185)},a.prototype.disSelect=function(){this.isSelected=!1,this.unselectTag.active=!1,this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1,this.isEnablePlant(),this.selected.active=this.isSelected,this.selected.active&&(this.mask.active=!0,this.mask.opacity=185)},a.prototype.selectFull=function(e){this.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&l.pzaGameState.isMiniMode()&&14==l.pzaGameState.curPart&&!e||(this.isFull=e,this.isSelected||this.isEnablePlant())},a.prototype.clickCard=function(){if(!l.pzaGameState.cardIsMove){if(this.imitaterPlant)return z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.curPlantType),void(this.clickCall&&this.clickCall(this.curPlantType,null));if(this.checkRedPoint(!0),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.curPlantType,this),!this.isFull&&!this.isSelected&&this.curPlantType){if(this.isNoRecommend&&!l.pzaGameState.grayPlantWarning)return l.pzaGameState.grayPlantWarning=!0,void f.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(v.pzaWarningView);a&&a.show("\u4e0d\u63a8\u8350\u4f7f\u7528\u88ab\u5c01\u5370\u7684\u9a91\u58eb\u5361\u7247","\u786e\u5b9a",null,null,null)});this.isSelected=!0,this.mask.active=!0,this.mask.opacity=200,l.pzaGameState.cardIsMove=!0;var e=this.node.convertToWorldSpaceAR(cc.v2());this.clickCall&&this.clickCall(this.curPlantType,e),h.pzaSoundManager.playSFX(),this.selected.active=this.isSelected,this.selected.active&&(this.mask.active=!0,this.mask.opacity=185)}}},a.prototype.refreshRecommend=function(e){if(null!=this.plantConfigData){if(u.pzaGameManager.getCurrentGame(),this.plantConfigData.isNight&&e?this.curPlantType==p.pzaPlantEnum.SEA_SHROOM&&3!=l.pzaGameState.curChapter?this.isNoRecommend=c.pzaGameConfig.isNoRecommendPlant(this.curPlantType,l.pzaGameState.curChapter):this.isNoRecommend=!1:this.isNoRecommend=c.pzaGameConfig.isNoRecommendPlant(this.curPlantType,l.pzaGameState.curChapter),this.isSelected?(this.mask.active=!0,this.mask.opacity=200):this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1,this.weekTwoLock)return this.lockNode.active=!0,this.selected.active=!1,this.mask.active=!0,void(this.mask.opacity=150);this.selected.active=this.isSelected,this.selected.active&&(this.mask.active=!0,this.mask.opacity=185)}},a.prototype.setRelateState=function(e){if(this.weekTwoLock)return this.lockNode.active=!0,this.selected.active=!1,this.mask.active=!0,void(this.mask.opacity=150);this.lockNode.active=e,this.lockNode.active?(this.mask.active=!0,this.mask.opacity=200):this.isSelected?(this.mask.active=!0,this.mask.opacity=200):this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1},a.prototype.isEnablePlant=function(){return(this.curPlantType==p.pzaPlantEnum.LaserBean||this.curPlantType==p.pzaPlantEnum.FireBlover)&&((l.pzaGameState.gameMode==l.pzaGameMode.NORMAL||l.pzaGameState.gameMode==l.pzaGameMode.SURVIVAL||l.pzaGameState.gameMode==l.pzaGameMode.SUR_ENDLESS||l.pzaGameState.gameMode==l.pzaGameMode.MINIGAME)&&l.pzaGameState.curChapter>=5||l.pzaGameState.gameMode==l.pzaGameMode.NORMAL_WEEKTWO&&l.pzaGameState.curChapter>=10)&&(this.isNoRecommend=!0,this.mask.active=!0,this.mask.opacity=200,!0)},a.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},a.prototype.clickVideoUnlockBtn=function(){var e=this;g.pzaChannel.instance().showVideo({sucCall:function(){e.videoTrial.getComponent(cc.Button).enabled=!1,e.videoIcon.active=!1},failCall:function(){},endCall:function(){},posName:"\u9009\u5361\u8bd5\u7528\u690d\u7269"})},a.prototype.setFilterByPro=function(e){var a=c.pzaGameConfig.getPlantConfig(this.curPlantType);a&&(this.node.active=a.filterPlantByPro(e))},a.prototype.onClickBlockBtn=function(){var e,a,t,o;if(this.weekTwoLock)z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.curPlantType);else{var n=c.pzaGameConfig.getPlantConfig(this.curPlantType).relationTypeArr;if(n){var i="";try{for(var s=r(n),u=s.next();!u.done;u=s.next()){var d=u.value;if(d!=this.curPlantType){var h=b.pzaPlantSelectView.instance.cardSelectList.selectPlants;try{for(var m=(t=void 0,r(h)),g=m.next();!g.done;g=m.next()){var P=g.value;if(P==p.pzaPlantEnum.IMITATER&&(P=l.pzaGameState.curImitaterPlant),d==P){var C=c.pzaGameConfig.getPlantConfig(P),E="\u4e0d\u80fd\u4e0e"+C.name+"\u540c\u65f6\u51fa\u6218!";C&&null===i.match(E)&&(i+=E+"\n")}}}catch(S){t={error:S}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}}}}catch(_){e={error:_}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(e)throw e.error}}f.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(v.pzaWarningView);a&&a.show(i,"\u786e\u5b9a",null,null,null,"\u8b66\u544a")})}}},a.prototype.showCheckTag=function(){this.checkFrame&&(this.checkFrame.active=!0)},a.prototype.hideCheckTag=function(){this.checkFrame&&(this.checkFrame.active=!1)},i([E({displayName:"\u7a7a\u5361\u7247\u6846",type:cc.Node})],a.prototype,"voidBoard",void 0),i([E({displayName:"\u8bd5\u73a9\u8282\u70b9",type:cc.Node})],a.prototype,"swIcon",void 0),i([E({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([E({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([E({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],a.prototype,"priceLabel",void 0),i([E({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([E({displayName:"\u5df2\u7ecf\u9009\u4e2d",type:cc.Node})],a.prototype,"selected",void 0),i([E({displayName:"\u4e0d\u80fd\u9009\u62e9\u6846",type:cc.Node})],a.prototype,"unselectTag",void 0),i([E({displayName:"\u89c6\u9891\u8bd5\u7528",type:cc.Node})],a.prototype,"videoTrial",void 0),i([E({displayName:"\u89c6\u9891\u56fe\u6807",type:cc.Node})],a.prototype,"videoIcon",void 0),i([E({type:cc.Sprite})],a.prototype,"professorSP",void 0),i([E({type:cc.Node})],a.prototype,"priceSP",void 0),i([E({type:cc.Node})],a.prototype,"lockNode",void 0),i([E({type:cc.Node})],a.prototype,"checkFrame",void 0),i([E({type:cc.Node})],a.prototype,"redPoint",void 0),i([C],a)}(cc.Component);t.pzaBagPlantCard=S,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaWarningView":"pzaWarningView","./pzaPlantSelectView":"pzaPlantSelectView"}],pzaBalloonZombie:[function(e,a,t){"use strict";cc._RF.push(a,"9caderigZRMC6ujgVCOQMwS","pzaBalloonZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBalloonZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaWorldEventManager"),s=e("../Data/pzaBuffData"),c=e("../Plant/pzaAttackType"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaBaseZombie"),m=e("./pzaZombieSlot"),f=e("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ballNode=null,a.hasBeenBlow=!1,a.falling=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,38.03,1.35,-90.6))]])},a.prototype.onEnable=function(){e.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BLOW_WIND,this.onBlowWind,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BLOW_WIND,this.onBlowWind,this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.hasBeenBlow=!1,this.falling=!1,a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FLY,-1)),a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_ICE,-1)),p.pzaSoundManager.playAudio("ball_enter")},a.prototype.logicUpdate=function(a){this.falling||e.prototype.logicUpdate.call(this,a)},a.prototype.findTarget=function(){return null!=this.baseData&&this.hasEquip?null:e.prototype.findTarget.call(this)},a.prototype.updateMove=function(a){if(this.hasBeenBlow)return this.baseData.logicPos.x+=1300*a,void(this.baseData.logicPos.x>=640&&(this.baseData.zombieDie(),this.death(!1)));e.prototype.updateMove.call(this,a)},a.prototype.equipDeath=function(){var a=this;e.prototype.equipDeath.call(this,!1),this.falling=!0,p.pzaSoundManager.playAudio("ball_fall"),this.baseData.buffData.removeBuff(s.pzaBuffType.FLY),this.animation.playAnimation("bao",!1,function(){a.falling=!1;var e=r.pzaGameConfig.getZombieSpecialSpeed(a.baseData.zombieData.zombieType);a.baseData.zombieData.initMSpd=a.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e,a.baseData.buffData.removeBuff(s.pzaBuffType.IMM_ICE),a.playMoveAnimation(),a.hasInWater&&(a.waterMask.enabled=!0,a.curWaterWaveEff&&a.curWaterWaveEff.showWaterWave())})},a.prototype.zombieGoHome=function(){if(d.pzaGameState.isZombieMode()&&window.pzaplantManager.hasBrain(this.baseData.yIndex)){if(!this.hasEquip)return;return this.equipDeath(),void(this.body.curTarget=null)}e.prototype.zombieGoHome.call(this)},a.prototype.flaserDeath=function(){if(this.hasEquip)return this.death(!1,c.pzaAttackType.CLEAN_CAR),void(window.pzaMapManager.isInWaterWay(this.baseData.yIndex)||u.pzaEffectManager.createSmokeEffect("blow1",cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+100)));e.prototype.flaserDeath.call(this)},a.prototype.playMoveAnimation=function(){var e=this.hasEquip?"idle":"move2";this.animation.spineAnimation.animation!=e&&(this.zombieState=f.pzaZombieState.MOVE,this.animation.playAnimation(e,!0))},a.prototype.onBlowWind=function(){null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.zombieData&&this.hasEquip&&(this.hasBeenBlow||(this.hasBeenBlow=!0))},a.prototype.zombieScream=function(){},a.prototype.getZombieHeadWps=function(){return this.hasEquip?this.ballNode&&this.ballNode.parent?this.ballNode.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0):e.prototype.getZombieHeadWps.call(this)},a.prototype.ashesDeath=function(){if(this.baseData.zombieDie(),this.death(!1),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var e=this.baseData.zombieData.zombieType,a="blow2";this.hasEquip||(a="blow"),u.pzaEffectManager.createAshesEffect(e,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,a)}},a.prototype.onWaterEnter=function(){this.zombieState==f.pzaZombieState.MOVE&&this.playMoveAnimation(),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!0,this.curWaterWaveEff&&!this.hasEquip&&this.curWaterWaveEff.showWaterWave())},a.prototype.onWaterExit=function(){this.zombieState==f.pzaZombieState.MOVE&&this.playMoveAnimation(),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!1,this.curWaterWaveEff&&!this.hasEquip&&this.curWaterWaveEff.hideWaterWave())},i([g({displayName:"\u6c14\u7403\u8282\u70b9",type:cc.Node})],a.prototype,"ballNode",void 0),i([y],a)}(h.pzaBaseZombie);t.pzaBalloonZombie=v,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBaseBody:[function(e,a,t){"use strict";cc._RF.push(a,"4f0e6uxYcdOJIcW1JqOuhwC","pzaBaseBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseBody=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.body=null,a.circleBody=null,a.baseData=null,a.curTarget=null,a}return n(a,e),a.prototype.onEnable=function(){null!=this.body&&(this.body.enabled=!1),null!=this.circleBody&&(this.circleBody.enabled=!1)},a.prototype.bindData=function(e){this.baseData=e,this.curTarget=null,null!=this.body&&(this.body.enabled=!0),null!=this.circleBody&&(this.circleBody.enabled=!0)},a.prototype.changeBody=function(e,a){null!=this.body&&(null!=e&&(this.body.offset=e),null!=a&&(this.body.size.width=a))},i([l({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.BoxCollider})],a.prototype,"body",void 0),i([l({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.CircleCollider})],a.prototype,"circleBody",void 0),i([p],a)}(cc.Component);t.pzaBaseBody=s,cc._RF.pop()},{}],pzaBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"25e84qr2r5CfK0bp6CEXb0Q","pzaBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseBullet=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaNodeManager"),u=e("../../Common/pzaSoundManager"),d=e("../../Common/pzaUtil"),h=e("../../Common/pzaWorldEventManager"),m=e("../../Load/pzaBundleObjectPool"),f=e("../../Load/pzaPreLoadManager"),z=e("../Data/pzaBuffData"),y=e("../Data/pzaZombieEnum"),g=e("../Effect/pzaBaseEffect"),v=e("../Effect/pzaShadowEffect"),b=e("../Plant/pzaAttackType"),P=e("../Zombie/pzaZombieBody"),C=e("../pzaGameState"),E=cc._decorator,S=E.ccclass,_=E.property,D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.speed=400,a.ySpeed=300,a.maxLifeTime=3,a.rotateSpeed=0,a.needShadow=!0,a.hitPrefab=null,a.isCanfrost=!1,a.isMine=!1,a.poolPrefab=null,a.lifeTime=0,a.atk=0,a.realYSpeed=0,a.yTargetPos=null,a.direction=cc.v2(1,0),a.bulletYIndex=-1,a.isInAir=!1,a.maxPosX=null,a.curShadow=null,a.originSpeed=400,a.penetrate=!1,a.penetrateCnt=0,a.yMove=!1,a.ignoreDive=!1,a.isPeaBallType=!1,a.collider=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.originSpeed=this.speed,h.pzaWorldEventManager.addListener(h.pzaWorldEventType.CLEAR_SCREEN,this.close,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.CLEAR_BULLET,this.close,this),this.maxLifeTime=3.5,this.isPeaBallType=!1},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.CLEAR_SCREEN,this.close,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.CLEAR_BULLET,this.close,this)},a.prototype.setPeaBallType=function(){this.isPeaBallType=!0},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.init=function(e,a,t,o,n){void 0===t&&(t=0),void 0===o&&(o=null),void 0===n&&(n=cc.v2(1,0)),0==t&&(this.isPeaBallType=!0),this.bulletYIndex=e,this.bulletYIndex<0?p.pzaCollisionManager.getInstance.addBulletOther(this):p.pzaCollisionManager.getInstance.addBulletByRow(this.bulletYIndex,this),this.atk=a,this.lifeTime=0,this.yTargetPos=o,this.realYSpeed=this.ySpeed,this.direction=n,this.isInAir=!1,this.maxPosX=null,this.node.scale=1,this.createShadow(),this.speed=this.originSpeed,this.ignoreDive=!1},a.prototype.logicUpdate=function(e){this.lifeTime+=e,this.lifeTime>=this.maxLifeTime?this.close():this.updateMove(e)},a.prototype.yUpdateMove=function(e){this.node.y-=this.speed*e*.5},a.prototype.updateMove=function(e){if(this.yMove)return this.yUpdateMove(e),void this.shadowMove();if(this.node.x+=this.direction.x*this.speed*e,this.node.y+=this.direction.y*this.speed*e,this.shadowMove(),null!=this.maxPosX&&this.node.x>=this.maxPosX)return this.playHitEffect(),void this.close();if(this.yTargetPos&&this.node.y!=this.yTargetPos){if(this.realYSpeed=Math.max(0,this.realYSpeed-400*e),this.node.y>this.yTargetPos){var a=this.node.y-this.ySpeed*e;this.node.y=Math.max(this.yTargetPos,a)}this.node.y<this.yTargetPos&&(a=this.node.y+this.ySpeed*e,this.node.y=Math.min(this.yTargetPos,a))}},a.prototype.createShadow=function(){var e=this;if(this.needShadow){var a=c.pzaNodeManager.getDownEffectNode();m.pzaBundleObjectPool.requestInstantByUrl2(f.pzaResourceUrl.SHADOW,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(v.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),e.curShadow=n,e.shadowMove()}else console.error(t)})}else this.curShadow=null},a.prototype.shadowMove=function(){if(null!=this.curShadow){var e=cc.v2(this.node.x,0);if(this.bulletYIndex<0)e.y=this.node.y-60;else{var a=.2*C.pzaGameState.map.getYInterval(this.bulletYIndex);C.pzaGameState.map.fixMapYOffset(this.bulletYIndex,e,a),null!=this.yTargetPos&&this.node.y!=this.yTargetPos&&(e.y-=this.yTargetPos-this.node.y)}this.curShadow.followMove(e)}},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.onCollision=function(e){if(e&&e.node.group==s.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(P.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){if(e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==y.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&!(!this.ignoreDive&&e.buffData.hasBuff(z.pzaBuffType.DIVE)||e.buffData.hasBuff(z.pzaBuffType.UNABLE_SELECT))&&(this.isInAir||!e.buffData.hasBuff(z.pzaBuffType.FLY))&&(!this.isInAir||e.buffData.hasBuff(z.pzaBuffType.FLY))&&!(e.buffData.hasBuff(z.pzaBuffType.INVINCIBLE)||e.zombieData&&e.zombieData.hypnosis)){var a=window.pzazombieManager.getZombie(e);null!=a&&(this.isCanfrost?this.frostColliderZombie(e):(this.isMine?this.rangeAtk(e):a.hurt(this.atk),this.penetrate||this.close(),this.playHitEffect(e)))}},a.prototype.close=function(){this.bulletYIndex<0?p.pzaCollisionManager.getInstance.delBulletOther(this):p.pzaCollisionManager.getInstance.delBulletByRow(this.bulletYIndex,this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},a.prototype.playHitEffect=function(e){if(this.hitPrefab){var a=5,t=cc.v2(this.node.x,this.node.y);e&&(a=10*-e.yIndex+5,t=cc.v2(e.logicPos.x,e.logicPos.y+70));var o=c.pzaNodeManager.getPlantZombieNode();if(o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=a,this.isMine&&(t=cc.v2(e.logicPos.x,e.logicPos.y),n.scale=.6),n.setPosition(t);var i=n.getComponent(g.pzaBaseEffect);i&&i.showEffect(null,null)}}},a.prototype.frostColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&(a.hurt(this.atk),this.close(),this.playHitEffect(e),a.baseData.buffData.hasBuff(z.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(z.pzaBuffType.HARD_BODY)||a.baseData.buffData.hasBuff(z.pzaBuffType.IMM_ICE_PEA)||(e.buffData.hasBuff(z.pzaBuffType.FROST)||this.playFrozenSound(),e.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.FROST,10,.5))))},a.prototype.playFrozenSound=function(){var e="frozen_"+d.pzaUtil.getRandomNum(1,2);u.pzaSoundManager.playAudio(e)},a.prototype.rangeAtk=function(e){var a=this,t=new Set;window.pzazombieManager.zombieDatas[e.yIndex].forEach(function(a){e&&null!=a&&a.xIndex==e.xIndex&&t.add(a)}),t.forEach(function(t){if(e&&null!=t&&!t.isDead&&!t.buffData.hasBuff(z.pzaBuffType.FLY)&&(t.zombieData.zombieType==y.pzaZombieEnum.DIGGER_ZOMBIE||!t.buffData.hasBuff(z.pzaBuffType.INVINCIBLE)&&!t.buffData.hasBuff(z.pzaBuffType.UNABLE_SELECT))){var o=window.pzazombieManager.getZombie(t);o&&o.hurt(a.atk,e,b.pzaAttackType.NORMAL_BOOM)}})},a.prototype.setRotation=function(){},i([_({displayName:"\u5b50\u5f39\u98de\u884c\u901f\u5ea6"})],a.prototype,"speed",void 0),i([_({displayName:"\u5b50\u5f39Y\u8f74\u98de\u884c\u901f\u5ea6"})],a.prototype,"ySpeed",void 0),i([_({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],a.prototype,"maxLifeTime",void 0),i([_({displayName:"\u5b50\u5f39\u81ea\u8f6c\u901f\u5ea6"})],a.prototype,"rotateSpeed",void 0),i([_({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],a.prototype,"needShadow",void 0),i([_({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],a.prototype,"hitPrefab",void 0),i([_({displayName:"\u662f\u5426\u6709\u51b0\u51bb\u6548\u679c"})],a.prototype,"isCanfrost",void 0),i([_({displayName:"\u5b50\u5f39\u7c7b\u578b\u662f\u5426\u4e3a\u5730\u96f7"})],a.prototype,"isMine",void 0),i([_(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([S],a)}(r.pzaBaseComponent);t.pzaBaseBullet=D,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Effect/pzaShadowEffect":"pzaShadowEffect","../Plant/pzaAttackType":"pzaAttackType","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState"}],pzaBaseComponentManager:[function(e,a,t){"use strict";cc._RF.push(a,"b7ad4gBX3lB+5eukOsCPnhM","pzaBaseComponentManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseComponentManager=void 0;var r=e("../Battle/pzaGameState"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.baseCmpSet=new Set,a}return n(a,e),a.prototype.onLoad=function(){window.pzabaseCmpManager=this},a.prototype.onEnable=function(){this.baseCmpSet.clear()},a.prototype.update=function(e){r.pzaGameState.guideBattle?this.baseCmpSet.forEach(function(a){null!=a&&a.logicUpdate(e)}):r.pzaGameState.gamePause||r.pzaGameState.starModeGameOver||(this.baseCmpSet.forEach(function(a){null!=a&&a.logicUpdate(e)}),window.pzaplantManager.logicUpdate(e),window.pzazombieManager.logicUpdate(e))},a.prototype.lateUpdate=function(e){r.pzaGameState.guideBattle?this.baseCmpSet.forEach(function(a){null!=a&&a.logicLateUpdate(e)}):r.pzaGameState.gamePause||this.baseCmpSet.size<=0||this.baseCmpSet.forEach(function(a){null!=a&&a.logicLateUpdate(e)})},a.prototype.addBaseCmp=function(e){this.baseCmpSet.add(e)},a.prototype.deleteBaseCmp=function(e){this.baseCmpSet.delete(e)},i([l],a)}(cc.Component));t.pzaBaseComponentManager=s,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState"}],pzaBaseComponent:[function(e,a,t){"use strict";cc._RF.push(a,"450c507UNlIE55+Gb7BO0ny","pzaBaseComponent");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseComponent=void 0;var r=e("../Battle/pzaGameState"),p=e("./pzaGameCommonPool"),l=e("./pzaWorldEventManager"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lastBePasueControled=!1,a.baseData=null,a}return n(a,e),a.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},a.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},a.prototype.bindData=function(e){this.baseData=e},a.prototype.logicUpdate=function(){},a.prototype.logicLateUpdate=function(){},a.prototype.bePauseControl=function(){this.lastBePasueControled=!0},a.prototype.pauseSelf=function(){},a.prototype.resumeSelf=function(){},a.prototype.hurt=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a]},a.prototype.steal=function(){},a.prototype.letPlantSleep=function(){},a.prototype.getZombieHeadWps=function(){return null},a.prototype.updateRoleBuff=function(e){null==this.baseData||this.baseData.isDead||null==this.baseData.buffData||this.baseData.hp<0||this.baseData.buffData.refreshBuff(e,this)},a.prototype.fadeInAni=function(){var e=this;this.node.opacity=0,this.node.runAction(cc.sequence(cc.fadeTo(.5/r.pzaGameState.gameSpeed,255),cc.callFunc(function(){e.baseData&&(e.baseData.creating=!1)},this))).clone()},a.prototype.fadeOutAni=function(){this.node.runAction(cc.fadeTo(.5/r.pzaGameState.gameSpeed,0)).clone()},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([c],a)}(cc.Component));t.pzaBaseComponent=u,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaGameCommonPool":"pzaGameCommonPool","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaBaseData:[function(e,a,t){"use strict";cc._RF.push(a,"74bddgAawJMj7VtGs65WMFT","pzaBaseData"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDanceData=t.pzaZombieData=t.pzaPlantData=t.pzaBaseData=void 0;var o=e("./pzaBuffData"),n=e("./pzaPlantEnum"),i=e("./pzaZombieEnum"),r=function(){function e(e,a,t){void 0===t&&(t=!1),this.plantData=null,this.maxHp=0,this.hp=0,this.atk=0,this.logicPos=null,this.floatY=0,this.offsetY=0,this.xIndex=-1,this.yIndex=-1,this.secondXIndex=-1,this.secondYIndex=-1,this.isDead=!1,this.isBrain=!1,this.zombieData=null,this.buffData=new o.pzaBuffData,this.groundEffect=null,this.testValue={},this.fromInit=!1,this.portaled=!1,this.creating=!1,this.sleepEffect=null,this.inWater=!1,this.waterYOffset=-35,this.canJump=!1,null!=e&&(this.plantData=new p(e)),null!=a&&(this.zombieData=new l(a)),this.isBrain=t}return e.clonePlantData=function(a){var t=new e(a.plantData.plantType,null);return t.maxHp=a.maxHp,t.hp=a.hp,t.atk=a.atk,t.logicPos=cc.v2(a.logicPos.x,a.logicPos.y),t.floatY=a.floatY,t.xIndex=a.xIndex,t.yIndex=a.yIndex,t.secondXIndex=a.secondXIndex,t.secondYIndex=a.secondYIndex,t.plantData.readyTime=a.plantData.readyTime,t.plantData.atkInterval=a.plantData.atkInterval,t.plantData.sleeping=a.plantData.sleeping,t.plantData.hasBreakGround=a.plantData.hasBreakGround,t.plantData.cobLoadFinish=a.plantData.cobLoadFinish,t.plantData.eatTime=a.plantData.eatTime,t.plantData.growTime=a.plantData.growTime,t.plantData.growStep=a.plantData.growStep,t.plantData.growStep=a.plantData.growStep,t.plantData.atkInterval2=a.plantData.atkInterval2,t.plantData.atkArr=a.plantData.atkArr,t.plantData.atk2Arr=a.plantData.atk2Arr,a.plantData.isGrow&&(t.plantData.isGrow=a.plantData.isGrow),t},e.prototype.hurtPlanet=function(e){this.hp-=e,this.hp<=0&&(this.isDead=!0)},e.prototype.destroyIronEquip=function(){if(null!=this.zombieData){this.zombieData.equipType==i.pzaEquipType.IRON_EQUIP?(this.zombieData.equipHp=0,this.zombieData.equipType=i.pzaEquipType.NO_EQUIP):this.zombieData.equipType2==i.pzaEquipType.IRON_EQUIP?(this.zombieData.equipHp2=0,this.zombieData.equipType2=i.pzaEquipType.NO_EQUIP):this.zombieData.toolType==i.pzaEquipType.IRON_EQUIP&&(this.zombieData.toolType=i.pzaEquipType.NO_EQUIP),this.zombieData.needRefreshEquip=!0;var e=window.pzazombieManager.getZombie(this);e&&e.refreshHurtState(!1)}},e.prototype.destroyIronEquipInZj=function(e){null!=this.zombieData&&(this.zombieData.equipType==i.pzaEquipType.IRON_EQUIP&&1==e?(this.zombieData.equipHp=0,this.zombieData.equipType=i.pzaEquipType.NO_EQUIP):this.zombieData.equipType2==i.pzaEquipType.IRON_EQUIP&&2==e?(this.zombieData.equipHp2=0,this.zombieData.equipType2=i.pzaEquipType.NO_EQUIP):this.zombieData.toolType==i.pzaEquipType.IRON_EQUIP&&(this.zombieData.toolType=i.pzaEquipType.NO_EQUIP),this.zombieData.needRefreshEquip=!0)},e.prototype.clearAllEquip=function(){null!=this.zombieData&&(this.zombieData.equipHp=0,this.zombieData.equipHp2=0,this.zombieData.equipType=i.pzaEquipType.NO_EQUIP,this.zombieData.equipType2=i.pzaEquipType.NORMAL_EQUIP,this.zombieData.toolType=i.pzaEquipType.NO_EQUIP,this.zombieData.needRefreshEquip=!0)},e.prototype.hurtZombie=function(e){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate===i.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=e);if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=e)}else{if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=e);if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=e)}e<0||(this.hp-=e,this.hp<=0&&(this.isDead=!0))}},e.prototype.hurtZombie2=function(e){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate==i.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=e)}else if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=e);e<0||(this.hp-=e,this.hp<=0&&(this.isDead=!0))}},e.prototype.hurtZombieWithEquip=function(e){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.equipHp>0){if(!(this.zombieData.equipHp<=e))return void(this.zombieData.equipHp-=e);e-=this.zombieData.equipHp,this.zombieData.equipHp=0}if(this.zombieData.equipHp2>0){if(!(this.zombieData.equipHp2<=e))return void(this.zombieData.equipHp2-=e);e-=this.zombieData.equipHp2,this.zombieData.equipHp2=0}e<0||(this.hp-=e,this.hp<=0&&(this.isDead=!0))}},e.prototype.hurtZombieBody=function(e){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate===i.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp>0){var a=this.zombieData.equipHp;this.zombieData.equipHp-=e,e-=a}}else this.zombieData.equipHp2>0&&(a=this.zombieData.equipHp2,this.zombieData.equipHp2-=e,e-=a);e<0||(this.hp-=e,this.hp<=0&&(this.isDead=!0))}},e.prototype.zombieDie=function(){this.hp<=0||(this.hp=0,this.zombieData.equipHp=0,this.isDead=!0)},e.prototype.isBePauseControlled=function(){return!(this.isDead||!this.buffData.hasBuff(o.pzaBuffType.FROZEN)&&!this.buffData.hasBuff(o.pzaBuffType.IMMOBILIZE)&&!this.buffData.hasBuff(o.pzaBuffType.FLASER))},e.prototype.isBeControlled=function(){return!(this.isDead||!this.buffData.hasBuff(o.pzaBuffType.FROZEN)&&!this.buffData.hasBuff(o.pzaBuffType.IMMOBILIZE)&&!this.buffData.hasBuff(o.pzaBuffType.DIZZ)&&!this.buffData.hasBuff(o.pzaBuffType.GARLIC)&&!this.buffData.hasBuff(o.pzaBuffType.HARD_BODY))},e}();t.pzaBaseData=r;var p=function(){function e(e){this.plantType=n.pzaPlantEnum.PEA_SHOOTER,this.readyTime=0,this.atkInterval=0,this.sleeping=!1,this.isNight=!1,this.hasBreakGround=!1,this._cobLoadFinish=!1,this.adClearPlant=!1,this.eatTime=0,this.growTime=0,this.growStep=0,this.atkArr=null,this.atk2Arr=null,this.atkInterval2=0,this.isChangeLine=!1,this.cate=n.pzaPlantCate.Null,this.isGrow=!1,this.canBeShoot=!0,this.defJumpTarget=!1,this.isProtectPlant=!1,this.isPrototypePlant=!1,this.plantType=e}return Object.defineProperty(e.prototype,"cobLoadFinish",{get:function(){return this._cobLoadFinish},set:function(e){this._cobLoadFinish=e},enumerable:!1,configurable:!0}),e}();t.pzaPlantData=p;var l=function(e){this.zombieType=i.pzaZombieEnum.ZOMBIE,this.equipType=0,this.toolType=0,this.equipHp=0,this.maxEquipHp=0,this.direction=-1,this.initMSpd=0,this.moveSpd=0,this.atkInterval=0,this.hypnosis=!1,this.needRefreshEquip=!1,this.typeId=[],this.showWeight=[],this.equipType2=0,this.equipHp2=0,this.maxEquipHp2=0,this.atkArr=null,this.atkInterval2=0,this.danceData=null,this.zomBossFinger=null,this.cate=i.pzaZombieCate.Null,this.hurtCate=i.pzaZombieHurtCate.Null,this.isHoleCreate=!1,this.waveAllZombieData=null,this.canAtkZombie=!1,this.frozen=!1,this.zombieType=e};t.pzaZombieData=l;var s=function(){function e(e){this.mainData=null,this.upData=null,this.downData=null,this.leftData=null,this.rightData=null,this.walkStep=0,this.hypnosis=!1,this.mainData=e,this.hypnosis=e.zombieData.hypnosis}return e.prototype.removeOtherData=function(e){this.upData==e&&(this.upData=null),this.downData==e&&(this.downData=null),this.leftData==e&&(this.leftData=null),this.rightData==e&&(this.rightData=null)},e.prototype.getMainData=function(){return null==this.mainData||this.mainData.isDead||this.mainData.zombieData.hypnosis!=this.hypnosis?null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis?null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis?null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis?null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis?void 0:this.rightData:this.leftData:this.downData:this.upData:this.mainData},e.prototype.getOtherDatas=function(){var e=[],a=this.getMainData();return a==this.upData||null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis||e.push(this.upData),a==this.downData||null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis||e.push(this.downData),a==this.leftData||null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis||e.push(this.leftData),a==this.rightData||null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis||e.push(this.rightData),e},e.prototype.hasUpData=function(){return null!=this.upData&&!this.upData.isDead&&this.upData.zombieData.hypnosis==this.hypnosis||(this.upData=null,!1)},e.prototype.hasDownData=function(){return null!=this.downData&&!this.downData.isDead&&this.downData.zombieData.hypnosis==this.hypnosis||(this.downData=null,!1)},e.prototype.hasLeftData=function(){return null!=this.leftData&&!this.leftData.isDead&&this.leftData.zombieData.hypnosis==this.hypnosis||(this.leftData=null,!1)},e.prototype.hasRightData=function(){return null!=this.rightData&&!this.rightData.isDead&&this.rightData.zombieData.hypnosis==this.hypnosis||(this.rightData=null,!1)},e.prototype.getSpeedBuff=function(){var e;return(null==this.mainData||this.mainData.isDead||this.mainData.zombieData.hypnosis!=this.hypnosis||null==(e=this.mainData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis||null==(e=this.upData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis||null==(e=this.downData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis||null==(e=this.leftData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis||null==(e=this.rightData.buffData.releaseBuff(o.pzaBuffType.FROST)))?0:-e.buffValue},e}();t.pzaDanceData=s,cc._RF.pop()},{"./pzaBuffData":"pzaBuffData","./pzaPlantEnum":"pzaPlantEnum","./pzaZombieEnum":"pzaZombieEnum"}],pzaBaseEffect:[function(e,a,t){"use strict";cc._RF.push(a,"b2afbvP8rxKZpOCQLPbuZGR","pzaBaseEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a.aniName="",a.starPlantSpine=null,a.starAniName="",a.baseSpineMaterial=null,a.ccAni=null,a.poolPrefab=null,a.endCall=null,a}return n(a,e),a.prototype.showEffect=function(e,a){var t=this;if(this.spine&&(this.spine.node.active=!0),this.starPlantSpine&&(this.starPlantSpine.node.active=!1),this.endCall=a,null==e&&(e=this.aniName),this.ccAni)return this.ccAni.play().wrapMode=cc.WrapMode.Normal,this.ccAni.off("finished",this.aniDone,this),void this.ccAni.on("finished",function(){t.aniDone()},this);this.spine.playAnimation(e,!1,this.aniDone.bind(this))},a.prototype.showStarEffect=function(){this.spine&&(this.spine.node.active=!1),this.starPlantSpine&&(this.starPlantSpine.node.active=!0,this.starPlantSpine.playAnimation(this.starAniName,!1,this.close.bind(this),null,2))},a.prototype.aniDone=function(){this.endCall&&this.endCall(),this.close()},a.prototype.pauseSelf=function(){this.ccAni?this.ccAni.pause():this.spine.pauseAnimation()},a.prototype.resumeSelf=function(){this.ccAni?this.ccAni.resume():this.spine.resumeAnimation()},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"spine",void 0),i([u({displayName:"\u52a8\u753b\u540d\u79f0"})],a.prototype,"aniName",void 0),i([u({displayName:"\u661f\u661f\u679c\u5b9e\u79cd\u4e0b\u7279\u6548",type:l.pzaSpineController})],a.prototype,"starPlantSpine",void 0),i([u({displayName:"\u661f\u661f\u679c\u5b9e\u52a8\u753b\u540d\u79f0"})],a.prototype,"starAniName",void 0),i([u(cc.Material)],a.prototype,"baseSpineMaterial",void 0),i([u(cc.Animation)],a.prototype,"ccAni",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaBaseEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaBasePlant:[function(e,a,t){"use strict";cc._RF.push(a,"4a9690vgsxE/qlh9aEzanvc","pzaBasePlant");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBasePlant=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaBeltEquipConfig"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaNodeManager"),d=e("../../Common/pzaOperationMgr"),h=e("../../Common/pzaSoundManager"),m=e("../../Common/pzaSpineController"),f=e("../../Common/pzaTipManager"),z=e("../../Common/pzaWorldEventManager"),y=e("../../Load/pzaBundleObjectPool"),g=e("../../Load/pzaPreLoadManager"),v=e("../../utils/pzaChannel"),b=e("../Bullet/pzaBulletAnimator"),P=e("../Data/pzaBuffData"),C=e("../Data/pzaPlantEnum"),E=e("../Data/pzaZombieEnum"),S=e("../Effect/pzaShadowEffect"),_=e("../pzaEffectManager"),D=e("../pzaGameState"),M=e("./pzaAttackType"),w=e("./pzaPlantBody"),T=cc._decorator,A=T.ccclass,B=T.property,G=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.animation=null,a.body=null,a.needShadow=!0,a.shadowOffset=cc.v2(),a.shadowScale=1,a.uiIdleName="idle",a.plantSleepAni=null,a.bodyBindData=!1,a.atkInterval=0,a.hurtState=null,a.passiveSleepTime=0,a.inUI=!1,a.frozenTime=0,a.color_frozen=cc.Color.fromHEX(cc.color(),"#3B95FF"),a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.node.scale=1,this.inUI=!1,this.node.stopAllActions();var a=this.getBulletAni();a&&(a.node.active=!1)},a.prototype.uiShow=function(){this.plantIntact(),this.animation.playAnimation(this.uiIdleName,!0),this.inUI=!0,this.animation.spineAnimation.node.setPosition(0,0),this.animation.spineAnimation.node.scale=1},a.prototype.uiShowSkin=function(e){this.animation.setAnimationSkin(e)},a.prototype.bindData=function(a){if(e.prototype.bindData.call(this,a),this.passiveSleepTime=0,this.bodyBindData=!1,this.hurtState=null,this.refreshHurtState(!0),this.setZIndex(a),null!=a&&null!=a.plantData){var t=l.pzaGameConfig.getPlantConfig(a.plantData.plantType);null!=t&&(this.atkInterval=t.atkInterval,this.baseData.plantData.canBeShoot=0==t.avoidshoot,t.float&&(this.node.zIndex+=5))}this.createShadow(),this.setPos();var o=l.pzaGameConfig.getPlantConfig(a.plantData.plantType),n=o.createCD;if(null!=o&&o.createCD>0){var i=0;c.pzaLocalData.data.beltEquipData.slotList.includes(p.pzaBeltEquipEnum.TianDi)&&(i=p.pzaBeltEquipConfig.getGrowthValue(p.pzaBeltEquipEnum.TianDi)),(n-=i)<0&&(n=0)}v.pzaChannel.isConfRemote&&o.isShowValue&&(_.pzaEffectManager.createTestValuePre(this.baseData,this.node,0,"atk",this.baseData.atk),_.pzaEffectManager.createTestValuePre(this.baseData,this.node,1,"hp",this.baseData.hp),_.pzaEffectManager.createTestValuePre(this.baseData,this.node,2,"cd",n))},a.prototype.hasAwakePlant=function(e,a,t){var o=""+e+a,n=window.pzaplantManager.notTargetMap.get(o);return!(!n||!l.pzaPlantConfigData.isCoffeePlant(n.plantData.plantType)||(t.plantData.sleeping=!1,0))},a.prototype.setZIndex=function(e){if(null!=e&&null!=e.yIndex){var a=10*-this.baseData.yIndex;this.node.zIndex=a,e&&e.plantData&&(e.plantData.plantType==C.pzaPlantEnum.SPIKEWEED||e.plantData.plantType==C.pzaPlantEnum.SPIKEROCK)&&this.node.zIndex--}},a.prototype.update=function(e){this.animation&&this.animation.flashUpdate(e)},a.prototype.logicUpdate=function(e){this.passiveSleepTime>0&&(this.passiveSleepTime-=e,this.passiveSleepTime<=0&&(this.resumeSelf(),this.wakeUp())),this.frozenTime>0&&(this.frozenTime-=e,this.frozenTime<=0&&this.unFrozen())},a.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),this.setPos()},a.prototype.setPos=function(){null==this.baseData||this.baseData.isDead||0==this.baseData.floatY||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},a.prototype.pauseSelf=function(){this.animation.pauseAnimation(),this.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||(this.animation.resumeAnimation(),this.node.resumeAllActions())},a.prototype.findAttackTarget=function(){return null},a.prototype.attack=function(){},a.prototype.createShadow=function(){var e=this;this.needShadow&&y.pzaBundleObjectPool.requestInstantByUrl2(g.pzaResourceUrl.SHADOW,function(a,t){if(null==a&&null!=t){var o=u.pzaNodeManager.getDownEffectNode();if(null!=o){t.setParent(o);var n=t.getComponent(S.pzaShadowEffect);n&&n.init(e.baseData,cc.v2(e.shadowOffset.x,e.shadowOffset.y),e.shadowScale)}}else console.error(a)})},a.prototype.preventBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0},a.prototype.hurt=function(e,a,t){if(void 0===t&&(t=null),this.baseData&&!this.baseData.isDead){if(t==M.pzaAttackType.ROLLING||t==M.pzaAttackType.BOOM||t==M.pzaAttackType.BANG){if(this.baseData.isDead=!0,this.baseData.hp=0,window.pzaplantManager.removePlant(this.baseData),this.death(a),t==M.pzaAttackType.BOOM&&a&&a.plantData&&a.plantData.plantType==C.pzaPlantEnum.DOOM_SHROOM)return;return D.pzaGameState.partStar>0&&D.pzaGameState.lossPlantCount==D.pzaGameState.lossStarCount&&(f.pzaTipManager.showLossStarTip(!1,!0),D.pzaGameState.partStar--),void D.pzaGameState.lossPlantCount++}if(this.baseData.hurtPlanet(e),this.refreshHurtState(!1),this.animation.flash(),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(a),D.pzaGameState.partStar>0&&D.pzaGameState.lossPlantCount==D.pzaGameState.lossStarCount&&(f.pzaTipManager.showLossStarTip(!1,!0),D.pzaGameState.partStar--),D.pzaGameState.lossPlantCount++,t!=M.pzaAttackType.DEATH&&h.pzaSoundManager.playAudio("gulp")),t==M.pzaAttackType.THROW_ATK&&this.baseData.hp>0){var o="zombieHurt"+(Math.floor(2*Math.random())+1);h.pzaSoundManager.playAudio(o)}this.baseData&&this.baseData.testValue.hp&&this.baseData.testValue.hp.refreshView(this.baseData.hp)}},a.prototype.flaserDeath=function(){h.pzaSoundManager.playAudio("chomp_plant2"),this.death()},a.prototype.refreshHurtState=function(e){if(e)this.plantIntact();else if(null!=this.baseData&&null!=this.baseData.plantData){var a=this.baseData.hp/this.baseData.maxHp;this.baseData.plantData.plantType==C.pzaPlantEnum.BOOM_NUT?a<=.3?this.hurtState!=E.pzaHurtStateEnum.DYING&&this.plantDying():a<=.5?this.hurtState!=E.pzaHurtStateEnum.HURT&&this.plantHurt2():a<=.75?this.hurtState!=E.pzaHurtStateEnum.HURT&&this.plantHurt():this.hurtState!=E.pzaHurtStateEnum.INTACT&&this.plantIntact():a<=1/3?this.hurtState!=E.pzaHurtStateEnum.DYING&&this.plantDying():a<=2/3?this.hurtState!=E.pzaHurtStateEnum.HURT&&this.plantHurt():this.hurtState!=E.pzaHurtStateEnum.INTACT&&this.plantIntact()}},a.prototype.plantDying=function(){this.hurtState=E.pzaHurtStateEnum.DYING},a.prototype.plantHurt=function(){this.hurtState=E.pzaHurtStateEnum.HURT},a.prototype.plantHurt2=function(){this.hurtState=E.pzaHurtStateEnum.HURT},a.prototype.plantIntact=function(){this.hurtState=E.pzaHurtStateEnum.INTACT},a.prototype.death=function(e,a,t,o,n){if(void 0===e&&(e=null),void 0===a&&(a=null),void 0===t&&(t=!0),void 0===o&&(o=null),void 0===n&&(n=null),this.baseData.isDead=!0,this.baseData&&this.baseData.plantData&&this.baseData.plantData.isProtectPlant)return s.pzaGameManager.specialFail("\u8bf7\u6ce8\u610f\uff0c\u9700\u8981\u4fdd\u62a4\u9762\u4e34\u5371\u9669\u7684\u9a91\u58eb",!0),void this.close();t&&_.pzaEffectManager.plantDeathEffect(!l.pzaGameConfig.isShowBuleValueEffect(this.baseData.plantData.plantType),this.animation,null!=o?o:this.uiIdleName,this.baseData.logicPos,this.node.zIndex,n),this.close()},a.prototype.steal=function(){if(this.baseData&&this.baseData.plantData&&this.baseData.plantData.isProtectPlant)return s.pzaGameManager.specialFail("\u8bf7\u6ce8\u610f\uff0c\u9700\u8981\u4fdd\u62a4\u9762\u4e34\u5371\u9669\u7684\u9a91\u58eb",!0),void this.close()},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0),this.passiveSleepTime=20)},a.prototype.close=function(){this.deletePlant(),e.prototype.close.call(this)},a.prototype.deletePlant=function(){this.baseData&&D.pzaGameState.deletPlant(this.baseData.plantData.plantType)&&z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.UPDATE_PLANT_PRICE,this.baseData.plantData.plantType)},a.prototype.getBulletAni=function(){var e=this.node.getChildByName("BulletAnimator");return e?e.getComponent(b.pzaBulletAnimator):null},a.prototype.onRowChanged=function(){},a.prototype.sleep=function(){this.animation&&(this.animation.spineAnimation.node.color=new cc.Color(102,102,102)),_.pzaEffectManager.createSleepEffect(this.baseData)},a.prototype.wakeUp=function(){this.animation&&(this.animation.spineAnimation.node.color=new cc.Color(255,255,255)),this.passiveSleepTime=0,this.baseData.plantData.sleeping=!1},a.prototype.onFrozen=function(e){this.baseData.buffData.hasBuff(P.pzaBuffType.IMM_CONTROL)||this.baseData.buffData.hasBuff(P.pzaBuffType.IMM_ICE)||!0===this.baseData.creating||(this.pauseSelf(),_.pzaEffectManager.createFrozenEffect(this.baseData),this.baseData.buffData.addBuff(new P.pzaBuffInfo(P.pzaBuffType.FROZEN,this.frozenTime)),this.frozenTime=e,this.animation&&(this.animation.spineAnimation.node.color=cc.color(55,149,255)))},a.prototype.unFrozen=function(){this.baseData.buffData.removeBuff(P.pzaBuffType.FROZEN),this.resumeSelf(),this.animation&&(this.animation.spineAnimation.node.color=this.baseData.plantData.sleeping&&this.baseData.plantData.isNight?cc.Color.GRAY:cc.Color.WHITE)},a.prototype.createTipsBubble=function(e){d.pzaOperationMgr.showBubbleTips(this.node,e)},i([B({displayName:"\u52a8\u753b",type:m.pzaSpineController})],a.prototype,"animation",void 0),i([B({displayName:"\u78b0\u649e\u8eab\u4f53",type:w.pzaPlantBody})],a.prototype,"body",void 0),i([B({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],a.prototype,"needShadow",void 0),i([B({displayName:"\u5f71\u5b50\u7f29\u653e"})],a.prototype,"shadowScale",void 0),i([B({displayName:"ui\u5f85\u673a\u52a8\u753b"})],a.prototype,"uiIdleName",void 0),i([B({displayName:"\u690d\u7269\u7761\u89c9\u52a8\u753b",type:m.pzaSpineController})],a.prototype,"plantSleepAni",void 0),i([A],a)}(r.pzaBaseComponent);t.pzaBasePlant=G,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../Bullet/pzaBulletAnimator":"pzaBulletAnimator","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaPlantBody":"pzaPlantBody"}],pzaBaseShooter:[function(e,a,t){"use strict";cc._RF.push(a,"3e293jO+iZDf4Qky7WYJqZ+","pzaBaseShooter");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseShooter=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletPrefab1=null,a.poolPrefab=null,a}return n(a,e),a.prototype.showShooter=function(){},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab1",void 0),i([c(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaBaseShooter=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaBaseZombie:[function(e,a,t){"use strict";cc._RF.push(a,"fabae/AhBdCuZz/pzZ7aC9g","pzaBaseZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBaseZombie=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaMapManager"),d=e("../../Common/pzaNodeManager"),h=e("../../Common/pzaSoundManager"),m=e("../../Common/pzaSpineController"),f=e("../../Common/pzaUIManager"),z=e("../../Common/pzaUtil"),y=e("../../Common/pzaWorldEventManager"),g=e("../../Load/pzaBundleObjectPool"),v=e("../../Load/pzaPreLoadManager"),b=e("../../utils/pzaChannel"),P=e("../../View/Battle/pzaNewZombieView"),C=e("../../View/Battle/pzaReviveView"),E=e("../Data/pzaBuffData"),S=e("../Data/pzaPlantEnum"),_=e("../Data/pzaZombieEnum"),D=e("../Effect/pzaShadowEffect"),M=e("../Effect/pzaWaterWaveEffect"),w=e("../Plant/pzaAttackType"),T=e("../pzaEffectManager"),A=e("../pzaGameState"),B=e("../pzaSpineTool"),G=e("./pzaZombieBody"),I=e("./pzaZombieSlot"),O=e("./pzaZombieState"),N=cc._decorator,L=N.ccclass,R=N.property,k=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.animation=null,a.body=null,a.idleAniName=["idle"],a.moveAniName=["move"],a.deathAniName=["death"],a.attackAniName=["attack"],a.srMoveInWaterAni=["move"],a.srAttackInWaterAni=["attack_duck2"],a.srDeathInWaterAni=["death"],a.blowDeathAni="blow",a.srBlowDeathInWaterAni="blow_duck2",a.skinName=[],a.needShadow=!0,a.shadowOffset=cc.v2(),a.needWaterWave=!1,a.waterWaveOffset=cc.v2(0,25),a.waterWaveScale=.2,a.mask=null,a.uiIdleName="idle",a.waterMask=null,a.curShadow=null,a.curWaterWaveEff=null,a.curSkinName=null,a.zombieState=O.pzaZombieState.STAY,a.zombieHurtState=null,a.equipHurtState=null,a.equipHurtState2=null,a.showFrost=!1,a.showFire=!1,a.showSpeedUp=!1,a.hypnosisState=!1,a.bodyBindData=!1,a.hasEquip=!1,a.hasEquip2=!1,a.hasTool=!1,a.changeTargetRow=-1,a.zombieWin=!1,a.directThrowHurt=!1,a.breakDirtTime=0,a.breakDirtHeight=140,a.animationYOffset=0,a.ladderY=0,a.pushBackTime=0,a.breakCall=null,a.zombieScale=1,a.inUI=!1,a.slotMap=null,a.isInButterState=!1,a.isInGarlicState=!1,a.garlicSkinName=null,a.equip1Slot=null,a.equip2Slot=null,a.butterSlot=I.pzaZombieSlotType.butter,a.hasInWater=!1,a.hasUseSrAni=!1,a.garlicChangeR=!0,a.garlicNoChangeTime=0,a.defBowlingDamge=0,a.bodyWidth=15,a.joinWaterAct=!1,a.isPlayEquipDeath=!1,a.hurtMap=new Map([[w.pzaAttackType.TALL_BOWLING,function(e){return a.baseData.hurtZombieWithEquip(e),a.baseData.isDead||a.baseData.hp<=0?(a.baseData.zombieDie(),a.death(!0),h.pzaSoundManager.playAudio("bowlingHitNormal",.5),p.pzaCollisionManager.getInstance.delZombieByRow(a.baseData.yIndex,a.body),!0):(a.zombieHurtSound(w.pzaAttackType.BOWLING),a.refreshHurtState(!1),a.animation&&a.animation.flash(),!0)}],[w.pzaAttackType.CLEAN_CAR,function(){return a.baseData.zombieDie(),a.flaserDeath(),!0}],[w.pzaAttackType.BANG,function(e){return a.baseData.hurtZombieWithEquip(e),a.baseData.isDead||a.baseData.hp<=0?(a.baseData.zombieDie(),a.death(!1),!0):(a.zombieHurtSound(w.pzaAttackType.BANG),a.refreshHurtState(!1),a.animation&&a.animation.flash(),!0)}],[w.pzaAttackType.EAT,function(){return a.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&a.baseData.zombieData.zombieType!==_.pzaZombieEnum.DR_ZOMBOSS&&(a.baseData.zombieDie(),a.death(!1),!0)}],[w.pzaAttackType.HIT_FLY,function(){return a.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&a.baseData.zombieData.zombieType!==_.pzaZombieEnum.DR_ZOMBOSS&&(a.hitflyDeath(),!0)}],[w.pzaAttackType.TWINE,function(){return a.twineDeath(),!0}],[w.pzaAttackType.BOOM,function(e){return a.baseData.hurtZombieBody(e),a.baseData.isDead||a.baseData.hp<=0?(a.ashesDeath(e,w.pzaAttackType.BOOM),!0):(a.zombieHurtSound(w.pzaAttackType.BOOM),a.refreshHurtState(!1),a.animation&&a.animation.flash(),!0)}],[w.pzaAttackType.NORMAL_BOOM,function(e){return a.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&a.baseData.zombieData.zombieType!==_.pzaZombieEnum.DR_ZOMBOSS&&(a.ashesDeath(e),!0)}],[w.pzaAttackType.PENETRATE,function(e){return a.baseData.zombieData.hurtCate==_.pzaZombieHurtCate.PENETRATE_HURT&&(a.zombieHurtSound(w.pzaAttackType.PENETRATE),a.penetrateHurt(e),a.refreshHurtState(!1),a.animation&&a.animation.flash(),!(a.baseData.isDead||a.baseData.hp<=0)||(a.death(!0),!0))}],[w.pzaAttackType.THROW_ATK,function(e){return!!a.directThrowHurt&&(a.zombieHurtSound(w.pzaAttackType.THROW_ATK),a.baseData.zombieData.hurtCate==_.pzaZombieHurtCate.PENETRATE_HURT?a.baseData.hurtZombieBody(e):a.baseData.hurtZombie2(e),a.baseData.isDead||a.baseData.hp<=0?(a.death(!0),!0):(a.refreshHurtState(!1),a.animation&&a.animation.flash(),!0))}],[w.pzaAttackType.SPIKE,function(e){return a.baseData.zombieData.hurtCate==_.pzaZombieHurtCate.PENETRATE_HURT&&(a.baseData.hurtZombieBody(e),(a.baseData.isDead||a.baseData.hp<=0)&&a.death(!0),a.refreshHurtState(!1),a.animation&&a.animation.flash(),!0)}],[w.pzaAttackType.BOWLING,function(e){return a.baseData.zombieData.zombieType==_.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&(e/=4),a.baseData.zombieData.zombieType==_.pzaZombieEnum.BUCKET_HEAD_ZOMBIE&&(e/=2),(e-=a.defBowlingDamge)<0&&(e=0),a.zombieHurtSound(w.pzaAttackType.BOWLING),a.baseData.hurtZombie(e),a.baseData.isDead||a.baseData.hp<=0?(a.death(!0),p.pzaCollisionManager.getInstance.delZombieByRow(a.baseData.yIndex,a.body),!0):(a.refreshHurtState(!1),a.animation&&a.animation.flash(),!0)}],[w.pzaAttackType.DEATH_ANI,function(e){return a.penetrateHurt(e),a.refreshHurtState(!1),a.animation&&a.animation.flash(),!(a.baseData.isDead||a.baseData.hp<=0)||(a.death(!0),!0)}]]),a.garlicTopJudge=!0,a.color_frozen=cc.Color.fromHEX(cc.color(),"#3B95FF"),a.color_fire=cc.Color.fromHEX(cc.color(),"#FF4242"),a.color_speedUp=cc.Color.fromHEX(cc.color(),"#FFB0B0"),a}return n(a,e),a.prototype.initEquips=function(){},a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.inUI=!1,this.ladderY=0,y.pzaWorldEventManager.addListener(y.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.initEquips()},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},a.prototype.preventBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0},a.prototype.resumeBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.baseData.hp>0&&(this.baseData.isDead=!1)},a.prototype.uiShow=function(){this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.refreshFrostState(!0),this.animation.playAnimation(this.uiIdleName,!0,null,null,.5),this.refreshHurtState(!0),this.randomZombieSkin(),this.animation.spineAnimation.node.setPosition(0,0),"mask"==this.animation.spineAnimation.node.parent.name&&this.animation.spineAnimation.node.parent.setPosition(0,0)},a.prototype.preview=function(a,t,o){void 0===o&&(o=1),e.prototype.bindData.call(this,a),this.slotMap||this.initEquips(),this.hasEquip=!0,this.hasEquip2=!0,this.hasTool=!0,this.zombieWin=!1,this.setZombieScale(o),this.node.scaleX=o,this.createShadow(t),this.randomZombieSkin(),this.refreshFrostState(!0),this.refreshHurtState(!0),Math.random()>.5&&(this.hasUseSrAni=!0),this.playStayAnimation()},a.prototype.setZombieScale=function(e){this.zombieScale=e,this.node.scale=e,1==e||(this.waterWaveOffset.y+=this.waterWaveOffset.y*(1-e))},a.prototype.bindData=function(a,t){if(void 0===t&&(t=!1),e.prototype.bindData.call(this,a),null!=a&&null!=a.yIndex){var o=10*-this.baseData.yIndex+5;this.node.zIndex=o}this.createShadow(),this.createWaterWave(),this.hasEquip=a.zombieData.equipType!=_.pzaEquipType.NO_EQUIP,this.hasEquip2=a.zombieData.equipType2!=_.pzaEquipType.NO_EQUIP,this.hasTool=a.zombieData.toolType!=_.pzaEquipType.NO_EQUIP,this.zombieHurtState=null,this.equipHurtState=null,this.equipHurtState2=null,this.bodyBindData=!1,this.hypnosisState=!1,this.zombieWin=!1,this.pushBackTime=0,null!=this.mask&&(this.mask.enabled=!1),this.breakDirtTime=0,this.changeTargetRow=-1,this.isPlayEquipDeath=!1,this.hasInWater=!1,this.hasUseSrAni=!1,this.garlicChangeR=!0,this.garlicNoChangeTime=0,this.garlicTopJudge=!0,this.baseData.portaled=!1,window.pzaMapManager.isInWaterWay(this.baseData.yIndex)&&(this.hasUseSrAni=!0),this.randomZombieSkin(),this.slotMap||this.initEquips(),this.refreshOrientation(),this.playStayAnimation(),this.refreshFrostState(!0),this.refreshHurtState(!0),this.baseData.zombieData.hypnosis&&this.beHypnosis(!1);var n=l.pzaGameConfig.getZombieConfig(this.baseData.zombieData.zombieType);b.pzaChannel.isConfRemote&&n.isShowValue&&(T.pzaEffectManager.createTestValuePre(this.baseData,this.node,0,"atk",this.baseData.atk),T.pzaEffectManager.createTestValuePre(this.baseData,this.node,1,"hp",this.baseData.hp)),this.garlicSkinName=null},a.prototype.updateEquipState=function(e,a){if(e){this.slotMap||this.initEquips();var t=this.slotMap.get(e);t?t.updateState(a):this.baseData&&this.baseData.zombieData&&console.log("updateEquipState\u672a\u5b9a\u4f4d\u5230slot",this.baseData.zombieData.zombieType,e)}},a.prototype.breakDirt=function(e){void 0===e&&(e=null),this.breakCall=e,this.animation.node.opacity=0,this.animationYOffset=0,this.breakCall&&this.breakCall(),this.animation.node.runAction(cc.fadeTo(.5,255))},a.prototype.breakWater=function(e){void 0===e&&(e=null),this.breakCall=e,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.3,this.breakDirtHeight=160*this.zombieScale,this.animation.node.y=-this.breakDirtHeight,this.animationYOffset=0*this.zombieScale,this.curShadow&&this.curShadow.hideShadow()},a.prototype.logicUpdate=function(e){if(this.baseData&&this.baseData.zombieData&&this.baseData.zombieData.frozen&&(this.baseData.zombieData.frozen=!1,T.pzaEffectManager.createFrozenEffect(this.baseData)),this.breakDirtTime>0){this.breakDirtTime-=e;var a=-Math.max(0,this.breakDirtTime/.3)*this.breakDirtHeight+this.animationYOffset;return this.animation.node.y=a*this.zombieScale,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.curShadow&&this.curShadow.showShadow(),this.breakCall&&this.breakCall(),this.setWaterState(this.baseData.xIndex,this.baseData.yIndex)))}if(null!=this.baseData&&null!=this.baseData.zombieData&&(!this.isPlayEquipDeath||this.baseData.buffData.hasBuff(E.pzaBuffType.FROZEN))&&!this.baseData.isDead){if(A.pzaGameState.allZombieInvisible?this.node.opacity=0:this.node.opacity=255,this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(e);else{var t=this.findTarget();(3==A.pzaGameState.curChapter||4==A.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(t=null),t&&!t.isDead?this.attack(e,t):this.updateMove(e)}else this.changeRowMove(e)}},a.prototype.createShadow=function(e){var a=this;void 0===e&&(e=null),this.needShadow?(null==e&&(e=d.pzaNodeManager.getDownEffectNode()),g.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.SHADOW,function(t,o){if(null==t&&null!=o){o.setParent(e);var n=o.getComponent(D.pzaShadowEffect);n&&n.init(a.baseData,cc.v2(a.shadowOffset.x,0),a.zombieScale),a.breakDirtTime>0&&n&&n.hideShadow(),a.curShadow=n}else console.error(t)})):this.curShadow=null},a.prototype.createWaterWave=function(e){var a=this;void 0===e&&(e=null),this.needWaterWave?(null==e&&(e=d.pzaNodeManager.getDownEffectNode()),g.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.WATERWAVEEFFECT,function(t,o){if(null==t&&null!=o){o.setParent(e);var n=o.getComponent(M.pzaWaterWaveEffect);n&&n.init(a.baseData,cc.v2(a.waterWaveOffset.x,a.waterMask.node.height/2),a.waterWaveScale,a.node),a.curWaterWaveEff=n,a.curWaterWaveEff.hideWaterWave()}else console.error(t)})):this.curWaterWaveEff=null},a.prototype.pushBack=function(e){this.pushBackTime=e},a.prototype.pushBackMove=function(e){this.baseData.zombieData.hypnosis||this.baseData.isDead||this.baseData.buffData.hasBuff(E.pzaBuffType.IMM_CONTROL)?this.pushBackTime=0:(this.pushBackTime-=e,this.baseData.logicPos.x+=200*e,this.baseData.logicPos.x>=700&&(this.baseData.logicPos.x=700))},a.prototype.updateMove=function(e){if(!(e>.7||this.isInButterState||A.pzaGameState.guideZombiePause)){this.zombieState!=O.pzaZombieState.MOVE&&this.playMoveAnimation();var a=this.baseData.zombieData.moveSpd,t=1,o=this.baseData.buffData.releaseBuff(E.pzaBuffType.FROST);null!=o&&(t-=o.buffValue);var n=this.baseData.buffData.releaseBuff(E.pzaBuffType.SPEED_UP);if(null!=n&&(t+=n.buffValue),a*=t,this.animation.changeAnimationTimeScale(t),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=e*a:this.baseData.logicPos.x-=e*a,(this.baseData.zombieData.hypnosis||this.baseData.zombieData.zombieType==_.pzaZombieEnum.YETI_ZOMBIE&&1==this.baseData.zombieData.direction)&&this.baseData.logicPos.x>=640&&!this.isInGarlicState)return this.baseData.zombieDie(),void this.death(!1);this.baseData.logicPos.x<(A.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome(),!A.pzaGameState.isGameEnd&&A.pzaGameState.warnCol&&this.baseData&&this.baseData.xIndex>0&&this.baseData.logicPos.x<A.pzaGameState.warnCol.x-30&&s.pzaGameManager.specialFail("\u602a\u4eba\u901a\u8fc7\u4e86\u8b66\u6212\u7ebf",!0),this.baseData.xIndex;var i=this.hypnosisState?this.bodyWidth:-this.bodyWidth,r=A.pzaGameState.map.getMapXIndex(this.baseData.logicPos,null,i),p=A.pzaGameState.map.getMapYIndex(this.baseData.logicPos,null);if(-1==r||-1==p||this.baseData.xIndex==r&&this.baseData.yIndex==p||this.onChangeIndex(r,p),this.baseData.xIndex=r,-1==this.changeTargetRow&&0==this.joinWaterAct){var l=A.pzaGameState.map.getYInterval(this.baseData.yIndex)/3;A.pzaGameState.isRoofMode()&&(l=A.pzaGameState.map.getYInterval(this.baseData.yIndex)/6),A.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,l)}if(this.baseData.xIndex>0&&this.baseData.xIndex<=8&&A.pzaGameState.newZombie==this.baseData.zombieData.zombieType)if(this.baseData.zombieData.zombieType==_.pzaZombieEnum.BUNGEE_ZOMBIE)A.pzaGameState.showUnlockZombie();else{A.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null);var c=this.node.convertToWorldSpaceAR(cc.v2());f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(e){var a=e&&e.getComponent(P.pzaNewZombieView);a&&a.showNewZombie(A.pzaGameState.newZombie,c),A.pzaGameState.showUnlockZombie()})}}},a.prototype.onChangeIndex=function(e,a){this.setWaterState(e,a),this.playMoveAnimation()},a.prototype.setWaterState=function(e,a){if(this.hasUseSrAni&&!this.zombieWin){var t=""+e+a,o=window.pzaMapManager.BlockTypeMap.get(t);if(!this.hasInWater)switch(o){case u.pzaBlockType.POND:this.baseData.inWater=!0,this.hasInWater=!0,this.curShadow&&this.curShadow.hideShadow(),this.onWaterEnter(),this.playJoinWaterAct()}if(this.hasInWater)switch(o){case u.pzaBlockType.POND:break;default:this.baseData.inWater=!1,this.hasInWater=!1,this.curShadow&&this.curShadow.showShadow(),this.onWaterExit(),this.playExitWaterAct()}}},a.prototype.playJoinWaterAct=function(){var e=this;this.breakDirtTime>0||(this.joinWaterAct=!0,this.node.runAction(cc.sequence(cc.moveBy(.6,cc.v2(0,this.baseData.waterYOffset)),cc.callFunc(function(){e.joinWaterAct=!1}).clone())))},a.prototype.playExitWaterAct=function(){var e=this;this.breakDirtTime>0||(this.joinWaterAct=!0,this.node.runAction(cc.sequence(cc.moveBy(.6,cc.v2(0,-this.baseData.waterYOffset)),cc.callFunc(function(){e.joinWaterAct=!1}).clone())))},a.prototype.onWaterEnter=function(){this.zombieState==O.pzaZombieState.MOVE&&this.playMoveAnimation(),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave())},a.prototype.onWaterExit=function(){this.zombieState==O.pzaZombieState.MOVE&&this.playMoveAnimation(),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!1,this.curWaterWaveEff&&this.curWaterWaveEff.hideWaterWave())},a.prototype.changeRowMove=function(e){this.updateMove(e),this.baseData.logicPos.y+=150*e*(this.baseData.yIndex<this.changeTargetRow?1:-1);var a=.1*A.pzaGameState.map.getYInterval(this.changeTargetRow),t=A.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,a);(this.baseData.yIndex<this.changeTargetRow&&t.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&t.y>=this.baseData.logicPos.y)&&(this.baseData.logicPos.y=t.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1,this.isInGarlicState&&(this.isInGarlicState=!1,this.changeSkin(this.curSkinName)),this.baseData.zombieData.hypnosis&&(window.pzazombieManager.zombieHypnosis(this.baseData),this.baseData.buffData.hasBuff(E.pzaBuffType.INVINCIBLE)&&this.baseData.buffData.removeBuff(E.pzaBuffType.INVINCIBLE)))},a.prototype.zombieWinMove=function(e){var a=this;if(!A.pzaGameState.zombieWinShowUI){if(A.pzaGameState.isRoofMode()){if(!A.pzaGameState.zombieWinShowMap)return window.pzaMapManager.failShowInfactMap(function(){a.node.setPosition(cc.v2(-650,180))}),A.pzaGameState.zombieWinShowMap=!0,this.baseData.logicPos=cc.v2(-650,180),this.node.setPosition(cc.v2(1e4,1e4)),void this.pauseSelf();if(!A.pzaGameState.finishShowWinShowMap)return;return this.baseData.logicPos.y-=250*e,this.baseData.logicPos.y<=-60&&(A.pzaGameState.zombieWinShowUI=!0,s.pzaGameManager.showGameFail()),void this.node.setPosition(this.baseData.logicPos)}this.baseData.logicPos.x-=40*e;var t=-720;if(2!=A.pzaGameState.mapId&&4!=A.pzaGameState.mapId&&10!=A.pzaGameState.mapId||(t=-750),this.baseData.logicPos.x<=t)return A.pzaGameState.zombieWinShowUI=!0,s.pzaGameManager.showGameFail(),void this.node.setPosition(this.baseData.logicPos);if(A.pzaGameState.zombieWinShowMap)this.node.setPosition(this.baseData.logicPos);else{var o=-130,n=-570,i=300*e,r=300*e,p=!1,l=!1;7==A.pzaGameState.mapId||17==A.pzaGameState.mapId?(o=-10,n=-620):16!=A.pzaGameState.mapId&&18!=A.pzaGameState.mapId||(o=-50),this.baseData.logicPos.y>o?(this.baseData.logicPos.y-=i,this.baseData.logicPos.y<=o&&(this.baseData.logicPos.y=o,l=!0)):this.baseData.logicPos.y<o?(this.baseData.logicPos.y+=i,this.baseData.logicPos.y>=o&&(this.baseData.logicPos.y=o,l=!0)):l=!0,2==A.pzaGameState.curChapter&&this.baseData.logicPos.x>n?(this.baseData.logicPos.x-=r,this.baseData.logicPos.x<=n&&(this.baseData.logicPos.x=n,p=!0)):p=!0,this.node.setPosition(this.baseData.logicPos),p&&l&&(window.pzaMapManager.failShowInfactMap(),A.pzaGameState.zombieWinShowMap=!0)}}},a.prototype.isCanClimbLabby=function(){return this.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!==_.pzaZombieCate.IceCar},a.prototype.logicLateUpdate=function(a){if(!(a>.7)&&(e.prototype.logicLateUpdate.call(this,a),this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData),this.baseData&&A.pzaGameState.map&&this.baseData.xIndex&&-1!=this.baseData.xIndex&&this.baseData.yIndex&&-1!=this.baseData.yIndex&&this.onChangeIndex(this.baseData.xIndex,this.baseData.yIndex)),null!=this.baseData&&null!=this.baseData.logicPos)){var t=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaMapManager.LadderMap.get(t);if(null!=o&&-1==this.baseData.zombieData.direction&&this.isCanClimbLabby()){var n=o.logicPos.x-this.baseData.logicPos.x;if(n>0&&n<=80){var i=3.3*n,r=1.6*n;return this.ladderY=r,o.openDoor(),this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y)),this.node.opacity-=i,void(this.baseData.buffData.hasBuff(E.pzaBuffType.SPEED_UP)||this.baseData.buffData.addBuff(new E.pzaBuffInfo(E.pzaBuffType.SPEED_UP,-1,1.5)))}}if(this.ladderY>0)return this.baseData.buffData.hasBuff(E.pzaBuffType.SPEED_UP)&&this.baseData.buffData.removeBuff(E.pzaBuffType.SPEED_UP),void(this.ladderY-=300*a);this.joinWaterAct?this.node.x=this.baseData.logicPos.x:this.baseData.inWater?(this.node.setPosition(this.baseData.logicPos),this.node.y+=this.baseData.waterYOffset):this.node.setPosition(this.baseData.logicPos)}},a.prototype.bePauseControl=function(){null==this.baseData||this.baseData.isDead||(e.prototype.bePauseControl.call(this),this.pauseSelf())},a.prototype.pauseSelf=function(){this.zombieWin||this.animation.pauseAnimation()},a.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||this.animation&&this.animation.resumeAnimation()},a.prototype.hurt=function(e,a,t){if(void 0===t&&(t=w.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(A.pzaGameState.critValue>0&&Math.random()<A.pzaGameState.critValue&&(e=Math.round(1.5*e)),t==w.pzaAttackType.DEATH)return this.baseData.zombieDie(),void this.death(!1,t);if(!this.baseData.buffData.hasBuff(E.pzaBuffType.HARD_BODY)||t==w.pzaAttackType.BOOM||t==w.pzaAttackType.EAT||t==w.pzaAttackType.HIT_FLY){var o=this.hurtMap.get(t);if(!o||!o.call(this,e,a)){if(this.zombieHurtSound(t),this.baseData.hurtZombie(e),this.baseData.isDead||this.baseData.hp<=0)return t==w.pzaAttackType.KNOCK?void this.death(!1):t==w.pzaAttackType.FLOOR_ASHES_ATK?void this.ashesDeath():void this.death(!0);this.refreshHurtState(!1),this.animation.flash(),this.baseData&&this.baseData.testValue.hp&&this.baseData.testValue.hp.refreshView(this.baseData.hp)}}}},a.prototype.penetrateHurt=function(e){this.baseData.hurtZombieBody(e)},a.prototype.twineDeath=function(){this.baseData.zombieDie(),this.death(!1)},a.prototype.death=function(e,a,t){var o=this;void 0===a&&(a=null),void 0===t&&(t=!0),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.ONZOMBIEKILLED,null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,a),e?(t&&this.preventBreak(),this.playDeathAnimation(function(){o.close()})):this.close()},a.prototype.flaserDeath=function(){var e=this;window.pzaMapManager.isInWaterWay(this.baseData.yIndex)?this.death(!1,w.pzaAttackType.CLEAN_CAR):(this.preventBreak(),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,w.pzaAttackType.CLEAN_CAR),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.rotateTo(.15,90),cc.scaleTo(.15,.5*this.zombieScale,1*this.zombieScale),cc.delayTime(.1),cc.callFunc(function(){e.node.rotation=0,e.close()}))))},a.prototype.attack=function(e,a){if(null!=a&&null!=a.plantData&&a.plantData.plantType==S.pzaPlantEnum.GARLIC)return this.baseData.zombieData.atkInterval=0,this.changeMapRow(),h.pzaSoundManager.playAudio("Garlic"),void this.damage(a);this.zombieState!=O.pzaZombieState.EAT_ATK&&(this.baseData.zombieData.atkInterval=0,this.playAttakAnimation());var t=this.baseData.buffData.releaseBuff(E.pzaBuffType.FROST);null!=t&&(e*=t.buffValue),this.baseData.zombieData.atkInterval+=e,this.baseData.zombieData.atkInterval>=1&&(this.baseData.zombieData.atkInterval=0,this.damage(a))},a.prototype.damage=function(e){if(null!=e&&null!=this.baseData&&null!=this.baseData.zombieData)if(e.isBrain){var a=window.pzaplantManager.brainMap.get(e);a&&a.hurt(this.baseData.atk,this.baseData)}else if(null!=e.zombieData){var t;this.baseData.zombieData.hypnosis?(t=window.pzazombieManager.getZombie(e))&&t.hurt(this.baseData.atk):(t=window.pzazombieManager.getHypnoZombie(e))&&t.hurt(this.baseData.atk),this.zombieEatSound(e)}else{this.zombieEatSound(e);var o=window.pzaplantManager.getCanAttackPlant(e.xIndex,e.yIndex);o&&o.hurt(this.baseData.atk,this.baseData)}},a.prototype.beHypnosis=function(e){void 0===e&&(e=!0),this.hypnosisState=!0,this.body&&this.body.hypnosischangeGroup(),this.refreshOrientation(),this.baseData&&!l.pzaGameConfig.isNoChangeColorBeHypnosis(this.baseData.zombieData.zombieType)&&(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#60FF83"),e&&T.pzaEffectManager.createHypnoEffect(this.baseData.logicPos,this.node.zIndex),this.baseData.portaled=!1)},a.prototype.findTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isBrain)return this.body.curTarget;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(null!=this.body.curTarget.zombieData&&!this.body.curTarget.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)&&!this.body.curTarget.buffData.hasBuff(E.pzaBuffType.DIVE))return this.body.curTarget;if(null==this.body.curTarget.plantData)return null;var e=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(null!=window.pzaMapManager.LadderMap.get(e)&&this.isCanClimbLabby())return null;if(null==this.body.curTarget||!this.body.curTarget.buffData.hasBuff(E.pzaBuffType.FROZEN)){if(this.body.curTarget.plantData.plantType==S.pzaPlantEnum.PUMPKIN)return this.body.curTarget;if(this.body.curTarget.plantData.plantType==S.pzaPlantEnum.TALL_NUT){var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex,t=window.pzaplantManager.pumpkinDataMap.get(a);return null==t||t.isDead?this.body.curTarget:t}if(this.body.curTarget.plantData.cate===S.pzaPlantCate.Spike)return this.baseData.zombieData.cate===_.pzaZombieCate.Gargantuar?this.body.curTarget:null;if(l.pzaPlantConfigData.isEnvPlant(this.body.curTarget.plantData.plantType)){var o=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex,n=window.pzaplantManager.plantDataMap.get(o);return null==n||n.isDead?this.body.curTarget:n}return this.body.curTarget}},a.prototype.changeMapRow=function(){var e=this;if(this.attackAniName[0]){this.zombieState=O.pzaZombieState.EAT_ATK,this.baseData.buffData.addBuff(new E.pzaBuffInfo(E.pzaBuffType.GARLIC,-1));var a=this.attackAniName[0];this.animation.playAnimation(a,!1,null,function(){if(e.garlicSkinName&&!e.hasInWater&&(e.isInGarlicState=!0,e.changeSkin(e.garlicSkinName)),e.baseData.buffData.removeBuff(E.pzaBuffType.GARLIC),Math.random()>.5){var a=e.changeToUpRow();e.changeTargetRow=a?e.baseData.yIndex+1:e.baseData.yIndex-1}else a=e.changeToDownRow(),e.changeTargetRow=a?e.baseData.yIndex-1:e.baseData.yIndex+1;var t=10*-e.changeTargetRow+5;e.node.zIndex=t})}else{if(Math.random()>.5){var t=this.changeToUpRow();this.changeTargetRow=t?this.baseData.yIndex+1:this.baseData.yIndex-1}else t=this.changeToDownRow(),this.changeTargetRow=t?this.baseData.yIndex-1:this.baseData.yIndex+1;var o=10*-this.changeTargetRow+5;this.node.zIndex=o}},a.prototype.changeToUpRow=function(){var e=this.baseData.yIndex+1;if(e>=A.pzaGameState.map.getMapRow())return!1;var a=window.pzaMapManager.isInWaterWay(e);return l.pzaGameConfig.isWaterZombie(this.baseData.zombieData.zombieType)==a},a.prototype.changeToDownRow=function(){var e=this.baseData.yIndex-1;if(e<0)return!1;var a=window.pzaMapManager.isInWaterWay(e);return l.pzaGameConfig.isWaterZombie(this.baseData.zombieData.zombieType)==a},a.prototype.refreshHurtState=function(e){if(e)return this.equipIntact(),this.equipIntact2(),void this.zombieIntact();if(this.baseData&&this.baseData.zombieData){var a;this.hasEquip&&(this.baseData.zombieData.equipType==_.pzaEquipType.NO_EQUIP?this.equipDeath(!1):(a=this.baseData.zombieData.equipHp/this.baseData.zombieData.maxEquipHp)<=0?this.equipHurtState!=_.pzaHurtStateEnum.DEAD&&this.equipDeath(!0):a<=1/3?this.equipHurtState!=_.pzaHurtStateEnum.DYING&&this.equipDying():a<=2/3?this.equipHurtState!=_.pzaHurtStateEnum.HURT&&this.equipHurt():this.equipHurtState!=_.pzaHurtStateEnum.INTACT&&this.equipIntact()),this.hasEquip2&&(this.baseData.zombieData.equipType2==_.pzaEquipType.NO_EQUIP?this.equipDeath2(!1):(a=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2)<=0?this.equipHurtState2!=_.pzaHurtStateEnum.DEAD&&this.equipDeath2(!0):a<=1/3?this.equipHurtState2!=_.pzaHurtStateEnum.DYING&&this.equipDying2():a<=2/3?this.equipHurtState2!=_.pzaHurtStateEnum.HURT&&this.equipHurt2():this.equipHurtState2!=_.pzaHurtStateEnum.INTACT&&this.equipIntact2()),this.baseData.zombieData.cate==_.pzaZombieCate.Gargantuar&&this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2<=0&&this.baseData.buffData.removeBuff(E.pzaBuffType.IMM_ICE_PEA),this.hasTool&&this.baseData.zombieData.toolType==_.pzaEquipType.NO_EQUIP&&this.toolDeath();var t=this.baseData.hp/this.baseData.maxHp;t<=1/3?this.zombieHurtState!=_.pzaHurtStateEnum.DYING&&this.zombieDying():t<=2/3?this.zombieHurtState!=_.pzaHurtStateEnum.HURT&&this.zombieHurt():this.zombieHurtState!=_.pzaHurtStateEnum.INTACT&&this.zombieIntact()}},a.prototype.refreshOrientation=function(){null!=this.baseData&&null!=this.baseData.zombieData&&(this.node.scaleX=-this.baseData.zombieData.direction*this.zombieScale)},a.prototype.changeSkin=function(e){this.animation.setAnimationSkin(e),e!==this.garlicSkinName&&(this.curSkinName=e),this.slotMap&&this.slotMap.forEach(function(e){e.state&&e.updateState(e.state,!0)})},a.prototype.randomZombieSkin=function(){null!=this.skinName&&(this.skinName.length<=1?null!=this.skinName[0]&&this.changeSkin(this.skinName[0]):(this.curSkinName=Math.random()>.7?this.skinName[1]:this.skinName[0],this.changeSkin(this.curSkinName)))},a.prototype.getStayAniName=function(){return z.pzaUtil.getRandomValueFromArray(this.idleAniName)},a.prototype.getStayAniNoSr=function(){return z.pzaUtil.getRandomValueFromArray(this.idleAniName)},a.prototype.playStayAnimation=function(){this.zombieState=O.pzaZombieState.STAY,this.animation.playAnimation(this.getStayAniNoSr(),!0)},a.prototype.getMoveAniName=function(){return z.pzaUtil.getRandomValueFromArray(this.moveAniName)},a.prototype.getMoveAniNameArray=function(){return this.moveAniName},a.prototype.playMoveAnimation=function(e){if(void 0===e&&(e=!1),this.zombieState=O.pzaZombieState.MOVE,this.animation){for(var a=this.getMoveAniNameArray(),t=0;t<a.length;t++)if(a[t]==this.animation.spineAnimation.animation)return;this.animation.playAnimation(this.getMoveAniName(),!0,null,null,1)}},a.prototype.setSwimState=function(e){void 0===e&&(e=!1),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave())},a.prototype.getAttackAniName=function(){return z.pzaUtil.getRandomValueFromArray(this.attackAniName)},a.prototype.playAttakAnimation=function(){var e=this;this.zombieState=O.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var a=e.findTarget();null!=a&&e.attackHypnoShroom(a)})},a.prototype.getDeathAniName=function(){return this.hasInWater&&this.srDeathInWaterAni.length>0?"death2":z.pzaUtil.getRandomValueFromArray(this.deathAniName)},a.prototype.playDeathAnimation=function(e){this.zombieState=O.pzaZombieState.DEAD,this.zombieHurtState=_.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.playAnimation(this.getDeathAniName(),!1,e),this.zombieFallSound(),this.hasEquip&&this.updateEquipState(this.equip1Slot,0),this.hasEquip2&&this.updateEquipState(this.equip2Slot,0)},a.prototype.equipDeath=function(){this.equipHurtState=_.pzaHurtStateEnum.DEAD,this.hasEquip=!1,this.equip1Slot!=I.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip1Slot,0)},a.prototype.equipDeath2=function(){this.equipHurtState=_.pzaHurtStateEnum.DEAD,this.hasEquip2=!1,this.equip2Slot!=I.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip2Slot,0)},a.prototype.toolDeath=function(){this.hasTool=!1},a.prototype.zombieDying=function(){this.zombieHurtState=_.pzaHurtStateEnum.DYING},a.prototype.zombieHurt=function(){this.zombieHurtState=_.pzaHurtStateEnum.HURT},a.prototype.zombieCharmHurt=function(){this.zombieHurtState=_.pzaHurtStateEnum.HURTCHARM},a.prototype.zombieIntact=function(){this.zombieHurtState=_.pzaHurtStateEnum.INTACT},a.prototype.equipDying=function(){this.equipHurtState=_.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip1Slot,3)},a.prototype.equipHurt=function(){this.equipHurtState=_.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip1Slot,2)},a.prototype.equipIntact=function(){this.equipHurtState=_.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip1Slot,1)},a.prototype.equipDying2=function(){this.equipHurtState2=_.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip2Slot,3)},a.prototype.equipHurt2=function(){this.equipHurtState2=_.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip2Slot,2)},a.prototype.equipIntact2=function(){this.equipHurtState2=_.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip2Slot,1)},a.prototype.refreshFrostState=function(e){if(e)return this.showFrost=!1,this.showFire=!1,this.showSpeedUp=!1,void(this.animation.node.color=cc.Color.WHITE);if(!(null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis))if(this.baseData.buffData.hasBuff(E.pzaBuffType.FROST)){if(!this.baseData.isDead&&!this.showFrost)return this.showFrost=!0,void(this.animation.node.color=this.color_frozen)}else if(this.baseData.buffData.hasBuff(E.pzaBuffType.FIRE)){if(!this.baseData.isDead&&!this.showFire)return this.showFire=!0,void(this.animation.node.color=this.color_fire)}else if(this.baseData.buffData.hasBuff(E.pzaBuffType.SPEED_UP)){if(!this.baseData.isDead&&!this.showSpeedUp)return void(this.showSpeedUp=!0)}else(this.showFrost||this.showFire)&&(this.showFire=!1,this.showFrost=!1,this.showSpeedUp=!1,this.animation.node.color=cc.Color.WHITE)},a.prototype.previewClose=function(){this.baseData&&(this.baseData.isDead=!0,this.baseData.hp=0),this.close()},a.prototype.updateRoleBuff=function(a){e.prototype.updateRoleBuff.call(this,a),this.slotMap&&this.slotMap.get(this.butterSlot)&&(this.baseData.buffData.hasBuff(E.pzaBuffType.IMMOBILIZE)?this.isInButterState=!0:this.isInButterState&&(this.isInButterState=!1))},a.prototype.zombieGoHome=function(){var e=this;if(A.pzaGameState.isZombieMode())return this.baseData.zombieDie(),void this.death(!1);if(!window.pzaMapManager.hasCleanCar(this.baseData.yIndex)&&!A.pzaGameState.isGameEnd&&!c.pzaLocalData.isPopReviveView){var a=function(){e.curWaterWaveEff&&e.curWaterWaveEff.hideWaterWave(),e.waterMask&&(e.waterMask.enabled=!1),A.pzaGameState.isGameEnd=!0,e.zombieWin=!0,e.resumeSelf(),e.node.zIndex=100,s.pzaGameManager.getCurrentGame().partFail()};A.pzaGameState.hadRevived||0!=A.pzaGameState.isTryMode(A.pzaGameState.curChapter,A.pzaGameState.curPart)?a():(A.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null),c.pzaLocalData.isPopReviveView=!0,f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.GAME_REVIVE_VIEW,function(t){var o=t&&t.getComponent(C.pzaReviveView);o&&o.init(function(){e.baseData&&(e.baseData.zombieDie(),e.death(!1))},a,!1)}))}},a.prototype.getZombieHeadWps=function(){return this.baseData||!this.butterSlot||this.baseData&&this.baseData.zombieData.zombieType==_.pzaZombieEnum.LADDER_ZOMBIE?this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0):B.pzaSpineTool.findBonePos(this.animation.spineAnimation,this.butterSlot,this.node)},a.prototype.hitflyDeath=function(){this.baseData.zombieDie(),this.death(!1);var e=this.baseData.zombieData.zombieType;T.pzaEffectManager.createHitFlyEffect(e,this.baseData.logicPos,this.baseData.zombieData.direction,this.zombieScale,this.animation.spineAnimation.node,this.getStayAniName())},a.prototype.ashesDeath=function(e,a,t){if(void 0===e&&(e=0),void 0===a&&(a=w.pzaAttackType.FLOOR_ATK),void 0===t&&(t="blow"),this.baseData.zombieDie(),this.death(!1),!this.hasInWater){t=this.blowDeathAni?this.blowDeathAni:"blow";var o=this.baseData.zombieData.zombieType;T.pzaEffectManager.createAshesEffect(o,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,t)}},a.prototype.zombieScream=function(){h.pzaSoundManager.playAudio("groan1",1)},a.prototype.zombieFallSound=function(){var e="zombie_falling_"+z.pzaUtil.getRandomNum(1,2);h.pzaSoundManager.playAudio(e)},a.prototype.zombieEatSound=function(e){if(null!=e.zombieData){var a="chomp_plant3";h.pzaSoundManager.playAudio(a)}else null!=e.plantData&&(e.plantData.plantType==S.pzaPlantEnum.WALL_NUT||e.plantData.plantType==S.pzaPlantEnum.TALL_NUT?(a="chomp_plant3",h.pzaSoundManager.playAudio(a)):(a="chomp_plant1",h.pzaSoundManager.playAudio(a)))},a.prototype.zombieHurtSound=function(e){if(e==w.pzaAttackType.KNOCK)h.pzaSoundManager.playAudio("bangzombie");else{var a="zombieHurt"+z.pzaUtil.getRandomNum(1,2);h.pzaSoundManager.playAudio(a)}},a.prototype.handBookPreview=function(){},a.prototype.attackHypnoShroom=function(e){if(!e.isDead&&null!=e.plantData&&e.plantData.plantType==S.pzaPlantEnum.HYPNO_SHROOM&&!e.plantData.sleeping){h.pzaSoundManager.playAudio("floop"),h.pzaSoundManager.playAudio("mindcontrolled");var a=window.pzaplantManager.getPlantByData(e);a&&a.attack(this.baseData)}},a.prototype.close=function(){this.baseData&&(this.baseData.zombieData.hypnosis?p.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.body):p.pzaCollisionManager.getInstance.delZombieByRow(this.baseData.yIndex,this.body)),e.prototype.close.call(this)},a.prototype.update=function(e){!this.inUI&&this.zombieWin&&null!=this.baseData&&this.zombieWinMove(e)},i([R({displayName:"\u52a8\u753b",type:m.pzaSpineController})],a.prototype,"animation",void 0),i([R({displayName:"\u78b0\u649e\u8eab\u4f53",type:G.pzaZombieBody})],a.prototype,"body",void 0),i([R({displayName:"\u5f85\u673a\u52a8\u753b\u540d\u79f0",type:[cc.String]})],a.prototype,"idleAniName",void 0),i([R({displayName:"\u79fb\u52a8\u52a8\u753b\u540d\u79f0",type:[cc.String]})],a.prototype,"moveAniName",void 0),i([R({displayName:"\u6b7b\u4ea1\u52a8\u753b\u540d\u79f0",type:[cc.String]})],a.prototype,"deathAniName",void 0),i([R({displayName:"\u653b\u51fb\u52a8\u753b\u540d\u79f0",type:[cc.String]})],a.prototype,"attackAniName",void 0),i([R({displayName:"\u6cf3\u5708\u79fb\u52a8\u52a8\u753b\u5728\u6c34\u9762",type:[cc.String]})],a.prototype,"srMoveInWaterAni",void 0),i([R({displayName:"\u6cf3\u5708\u653b\u51fb\u52a8\u753b\u5728\u6c34\u9762",type:[cc.String]})],a.prototype,"srAttackInWaterAni",void 0),i([R({displayName:"\u6cf3\u5708\u6b7b\u4ea1\u52a8\u753b\u5728\u6c34\u9762",type:[cc.String]})],a.prototype,"srDeathInWaterAni",void 0),i([R({displayName:"\u7206\u70b8\u6b7b\u4ea1\u52a8\u753b"})],a.prototype,"blowDeathAni",void 0),i([R({displayName:"\u6cf3\u5708\u7206\u70b8\u6b7b\u4ea1\u52a8\u753b\u5728\u6c34\u4e2d"})],a.prototype,"srBlowDeathInWaterAni",void 0),i([R({displayName:"\u50f5\u5c38\u76ae\u80a4\u540d\u79f0",type:[cc.String]})],a.prototype,"skinName",void 0),i([R({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],a.prototype,"needShadow",void 0),i([R({displayName:"\u5f71\u5b50\u504f\u79fb"})],a.prototype,"shadowOffset",void 0),i([R({displayName:"\u662f\u5426\u9700\u8981\u6c34\u6ce2"})],a.prototype,"needWaterWave",void 0),i([R({displayName:"\u6c34\u6ce2\u504f\u79fb"})],a.prototype,"waterWaveOffset",void 0),i([R({displayName:"\u6c34\u6ce2\u7f29\u653e"})],a.prototype,"waterWaveScale",void 0),i([R({displayName:"mask",type:cc.Mask})],a.prototype,"mask",void 0),i([R({displayName:"ui\u5f85\u673a\u52a8\u753b"})],a.prototype,"uiIdleName",void 0),i([R({type:cc.Mask})],a.prototype,"waterMask",void 0),i([L],a)}(r.pzaBaseComponent);t.pzaBaseZombie=k,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaMapManager":"pzaMapManager","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../../View/Battle/pzaReviveView":"pzaReviveView","../../utils/pzaChannel":"pzaChannel","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../Effect/pzaWaterWaveEffect":"pzaWaterWaveEffect","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaZombieBody":"pzaZombieBody","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBattleData:[function(e,a,t){"use strict";cc._RF.push(a,"3f945218QVK2JRe0zeKr3TM","pzaBattleData"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattleData=void 0;var o=e("../../Common/pzaGameManager"),n=e("../../Common/pzaLocalData"),i=e("../pzaGameState"),r=function(){function e(){this.gameMode=6,this.chapter=1,this.part=1,this.sunLightCount=0,this.selectPlants=null,this.curImitaterPlant=null,this.hasRevive=!1,this.advancePlant=[],this.cdReduceValue=0,this.sunReduceValue=0,this.critValue=0,this.cleanCarState=[],this.TombMap=[],this.DoomHoleMap=[],this.GoldHoleMap=[],this.ZombieHoleMap=[],this.LadderMap=[],this.plantData=[],this.plantEnvData=[],this.pumpkinData=[],this.noTargetData=[],this.zombieEndlessPart=1,this.zombiePlantList=null,this.state=0,this.inGameTime=0,this.adPlantTimes=0,this.toolButtonLeftArr=null,this.tryPlantCountArrayEndLess=[0,0,0,0,0,0,0,0],this.watchADTryPlantCountEndLess=0}return e.saveData=function(a,t){void 0===t&&(t=null);var r=new e;r.gameMode=i.pzaGameState.gameMode,r.chapter=i.pzaGameState.curChapter,r.part=i.pzaGameState.curPart,r.sunLightCount=i.pzaGameState.sunLightCount,r.selectPlants=window.pzaplantManager.curSelectPlants,r.curImitaterPlant=i.pzaGameState.curImitaterPlant,r.hasRevive=i.pzaGameState.hadRevived,i.pzaGameState.advancePlantMap.forEach(function(e,a){r.advancePlant.push({plant:a,count:e})}),r.cdReduceValue=i.pzaGameState.cdReduceValue,r.sunReduceValue=i.pzaGameState.sunReduceValue,r.critValue=i.pzaGameState.critValue,r.cleanCarState=window.pzaMapManager.getCleanCarState(),r.zombieEndlessPart=i.pzaGameState.zombieEndlessPart,r.zombiePlantList=t,r.state=a;var p=o.pzaGameManager.getCurrentGame();return r.adPlantTimes=p.adPlantTimes,r.toolButtonLeftArr=p.toolButtonLeftArr,window.pzaMapManager.TombMap.forEach(function(e){r.TombMap.push({xIndex:e.xIndex,yIndex:e.yIndex})}),window.pzaMapManager.LadderMap.forEach(function(e){r.LadderMap.push({xIndex:e.xIndex,yIndex:e.yIndex})}),window.pzaMapManager.DoomHoleSet.forEach(function(e){r.DoomHoleMap.push({xIndex:e.mapXIndex,yIndex:e.mapYIndex,time:e.holeTime,step:e.holeStep})}),window.pzaMapManager.GoldHoleSet.forEach(function(e){r.GoldHoleMap.push({xIndex:e.mapXIndex,yIndex:e.mapYIndex,time:e.holeTime,step:e.holeStep})}),window.pzaMapManager.ZombieHoleSet.forEach(function(e){r.ZombieHoleMap.push({xIndex:e.mapXIndex,yIndex:e.mapYIndex,time:e.holeTime,step:e.holeStep})}),window.pzaplantManager.plantDataMap.forEach(function(e){r.plantData.push(e)}),window.pzaplantManager.plantEnvDataMap.forEach(function(e){r.plantEnvData.push(e)}),window.pzaplantManager.pumpkinDataMap.forEach(function(e){r.pumpkinData.push(e)}),window.pzaplantManager.notTargetMap.forEach(function(e){r.noTargetData.push(e)}),r.tryPlantCountArrayEndLess=n.pzaLocalData.data.tryPlantCountArrayEndLess,r.watchADTryPlantCountEndLess=n.pzaLocalData.data.watchADTryPlantCountEndLess,n.pzaLocalData.addDirty("tryPlantCountArrayEndLess","watchADTryPlantCountEndLess"),r},e.readData=function(e){if(null==e)return i.pzaGameState.inGameTime=0,i.pzaGameState.hasReportAliveOnly=!1,n.pzaLocalData.data.tryPlantCountArrayEndLess=[0,0,0,0,0,0,0,0],void(n.pzaLocalData.data.watchADTryPlantCountEndLess=0);i.pzaGameState.gameMode=e.gameMode,i.pzaGameState.curChapter=e.chapter,i.pzaGameState.curPart=e.part,i.pzaGameState.sunLightCount=e.sunLightCount,i.pzaGameState.curImitaterPlant=e.curImitaterPlant,i.pzaGameState.hadRevived=e.hasRevive,i.pzaGameState.cdReduceValue=e.cdReduceValue,i.pzaGameState.sunReduceValue=e.sunReduceValue,i.pzaGameState.critValue=e.critValue,i.pzaGameState.zombieEndlessPart=e.zombieEndlessPart,null!=e.advancePlant&&e.advancePlant.forEach(function(e){i.pzaGameState.advancePlantMap.set(e.plant,e.count)}),i.pzaGameState.inGameTime=0,i.pzaGameState.hasReportAliveOnly=!1,n.pzaLocalData.data.tryPlantCountArrayEndLess=e.tryPlantCountArrayEndLess,n.pzaLocalData.data.watchADTryPlantCountEndLess=e.watchADTryPlantCountEndLess},e}();t.pzaBattleData=r,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../pzaGameState":"pzaGameState"}],pzaBattleDownView:[function(e,a,t){"use strict";cc._RF.push(a,"980c1Mp5PZGYaDiC5mPrVDT","pzaBattleDownView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattleDownView=void 0;var r=e("../../Battle/Data/pzaGuideType"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaNodeManager"),d=e("../../Common/pzaOperationMgr"),h=e("../../Common/pzaSoundManager"),m=e("../../Common/pzaStatisticsMgr"),f=e("../../Common/pzaUIManager"),z=e("../../Common/pzaUtil"),y=e("../../Common/pzaWorldEventManager"),g=e("../../Load/pzaPreLoadManager"),v=e("../../utils/pzaChannel"),b=e("../../utils/pzakc"),P=e("../pzaBubbleItem"),C=e("../pzaCommonMask"),E=e("../pzaWarningView"),S=e("./pzaBattlePropView"),_=e("./pzaMenuView"),D=e("./pzaOptionView"),M=cc._decorator,w=M.ccclass,T=M.property,A=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.sunUIShowNode=null,a.sunCountLabel=null,a.sunUINode=null,a.shovelShowNode=null,a.shovel=null,a.blackShovel=null,a.guideArrow=null,a.pauseBtn=null,a.speedBtn=null,a.speedAdTag=null,a.speedCount=null,a.gameProp=null,a.freePlantNode=null,a.skipPartBtn=null,a.testNextWaveBtn=null,a.curSunCount=0,a.skipCutDown=0,a}var t;return n(a,e),t=a,Object.defineProperty(a,"getInstance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),a.prototype.onLoad=function(){t.instance=this;var e=this.sunUINode.convertToWorldSpaceAR(cc.v2()),a=u.pzaNodeManager.getUpEffectNode();if(null!=a){var o=a.convertToNodeSpaceAR(e);p.pzaGameState.sunMoveUIPos=cc.v2(o.x,o.y)}},a.prototype.onEnable=function(){var e=this;this.curSunCount=p.pzaGameState.sunLightCount,this.sunCountLabel.string=""+this.curSunCount,this.refreshSkipPartBtn(),setTimeout(function(){e.refreshSkipPartBtn()},500),this.testNextWaveBtn.active=c.pzaLocalData.testMode,v.pzaChannel.isConfRemote||(this.testNextWaveBtn.active=!1),d.pzaOperationMgr.isShowedChangeSpeedTips=!1,d.pzaOperationMgr.startTipsDetect(),this.shovel.on(cc.Node.EventType.TOUCH_START,this.clickShovel,this),this.shovel._touchListener.setSwallowTouches(!1),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.SELECT_CARD,this.selectCard,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.LACK_SUN,this.blinkSunLabel,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GUIDE_REFRESH_PROP,this.guideRefreshProp,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GUIDE_SHOW_SPEED,this.guideShowSpeed,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GUIDE_USE_SPEED,this.guideUseSpeed,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.SHOW_BUBBLE_TIPS,this.showBubbleTips,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GUIDE_CLICKSHOVEL,this.showClickShovelTips,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.REFRESH_FREE_PLANT,this.showFreePlant,this),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PROP_1_2?(this.freePlantNode.active=!1,this.gameProp.hideAllProp()):(m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"3"},{name:"adname",value:"\u5c40\u5185\u6a31\u6843\u70b8\u5f39"}),m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"4"},{name:"adname",value:"\u5c40\u5185\u81ea\u52a8\u62fe\u53d6"}),m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"5"},{name:"adname",value:"\u5c40\u5185\u989d\u5916\u9633\u5149"})),this.refreshGameSpeed(),s.pzaGameManager.getCurrentGame().showBattleDown(this),v.pzaChannel.instance().closeBanner()},a.prototype.onDisable=function(){this.shovel.off(cc.Node.EventType.TOUCH_START,this.clickShovel,this),this.blackShovel.stopAllActions(),this.blackShovel.opacity=0,d.pzaOperationMgr.stopTipsDetect(),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.SELECT_CARD,this.selectCard,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.LACK_SUN,this.blinkSunLabel,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GUIDE_REFRESH_PROP,this.guideRefreshProp,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GUIDE_SHOW_SPEED,this.guideShowSpeed,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GUIDE_USE_SPEED,this.guideUseSpeed,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.SHOW_BUBBLE_TIPS,this.showBubbleTips,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GUIDE_CLICKSHOVEL,this.showClickShovelTips,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.REFRESH_FREE_PLANT,this.showFreePlant,this)},a.prototype.showFreePlant=function(){this.freePlantNode.active=!0},a.prototype.showPauseBtn=function(){this.pauseBtn.active=!0,this.speedBtn.active=!0,m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"18"},{name:"adname",value:"\u89e3\u9501\u52a0\u901f\u529f\u80fd"})},a.prototype.hidePauseBtn=function(){this.pauseBtn.active=!1},a.prototype.showSunUI=function(){this.sunUIShowNode.active=!0,this.shovelShowNode.active=!0},a.prototype.hideSunUI=function(){this.sunUIShowNode.active=!1,this.shovelShowNode.active=!1},a.prototype.update=function(e){this.curSunCount!=p.pzaGameState.sunLightCount&&(p.pzaGameState.sunLightCount=p.pzaGameState.sunLightCount>=99999?99999:p.pzaGameState.sunLightCount,this.curSunCount=p.pzaGameState.sunLightCount,this.sunCountLabel.string=""+this.curSunCount),p.pzaGameState.gamePause||this.skipCutDown>0&&(this.skipCutDown-=e,this.skipCutDown<=0&&(this.skipPartBtn.active=!1))},a.prototype.refreshSkipPartBtn=function(){p.pzaGameState.isSurvival()||p.pzaGameState.isZombieMode()||p.pzaGameState.isVaseMode()||p.pzaGameState.isMiniMode()?this.skipPartBtn.active=!1:p.pzaGameState.curChapter<c.pzaLocalData.data.curChapter||p.pzaGameState.curChapter==c.pzaLocalData.data.curChapter&&p.pzaGameState.curPart<c.pzaLocalData.data.curPart?this.skipPartBtn.active=!1:null==window.pzaGuideManager.guideType?window.pzaGuideManager.guideType!=r.pzaGuideType.GUIDE_SHOVEL_1_5||1!=p.pzaGameState.curChapter||5!=p.pzaGameState.curPart?p.pzaGameState.isTryMode(p.pzaGameState.curChapter,p.pzaGameState.curPart)?this.skipPartBtn.active=!1:(this.skipPartBtn.active=!0,this.skipCutDown=10,m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"7"},{name:"adname",value:"\u5c40\u5185\u8df3\u5173"})):this.skipPartBtn.active=!1:[r.pzaGuideType.GUIDE_PLANT_1_1,r.pzaGuideType.GUIDE_SHOVEL_1_5,r.pzaGuideType.GUIDE_PROP_1_2,r.pzaGuideType.GUIDE_BELT_MODE,r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5,r.pzaGuideType.GUIDE_NINGHT_4_10,r.pzaGuideType.GUIDE_BANG_JAR_4_5,r.pzaGuideType.GUIDE_5_5,r.pzaGuideType.GUIDE_6_5].includes(window.pzaGuideManager.guideType)&&p.pzaGameState.curChapter==c.pzaLocalData.data.curChapter&&p.pzaGameState.curPart==c.pzaLocalData.data.curPart&&(this.skipPartBtn.active=!0,this.skipCutDown=10,m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"7"},{name:"adname",value:"\u5c40\u5185\u8df3\u5173"}),window.pzaGuideManager.guideType!=r.pzaGuideType.GUIDE_PLANT_1_1&&window.pzaGuideManager.guideType!=r.pzaGuideType.GUIDE_PROP_1_2||(this.skipCutDown=20,p.pzaGameState.skipGuidePartAble=!0))},a.prototype.hideSkipPartBtn=function(){this.skipPartBtn.active=!1,this.skipCutDown=0},a.prototype.clickShovel=function(){if(p.pzaGameState.selectCard==p.pzaSelectCardType.SHOVE_CARD)return p.pzaGameState.selectCard=null,void this.refreshShovel();p.pzaGameState.selectCard=p.pzaSelectCardType.SHOVE_CARD,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,this.refreshShovel(),h.pzaSoundManager.playAudio("clickShovel"),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SELECT_CARD,null),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&1==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext()},a.prototype.clickPause=function(){if(!c.pzaLocalData.isPopReviveView){p.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null),h.pzaSoundManager.pausePlayMusic(),C.pzaCommonMask.showMask(!0);var e=function(){p.pzaGameState.gamePause=!1,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_RESUME,null),h.pzaSoundManager.resumeMusic()};10*c.pzaLocalData.data.curChapter+c.pzaLocalData.data.curPart>12||p.pzaGameState.gameMode!=p.pzaGameMode.NORMAL?f.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.GAME_MENU_VIEW,function(a){C.pzaCommonMask.hideMask();var t=a&&a.getComponent(_.pzaMenuView);t&&t.init(e,!0)}):f.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.GAME_OPTION_VIEW,function(a){C.pzaCommonMask.hideMask();var t=a&&a.getComponent(D.pzaOptionView);t&&t.init(!0,e)})}},a.prototype.clickGameSpeed=function(){var e=this,a=function(){p.pzaGameState.gameWin&&p.pzaGameState.gameMode!=p.pzaGameMode.VASE_ENDLESS||(p.pzaGameState.gameSpeed<3?(p.pzaGameState.gameSpeed++,window.pzaMapManager.blink(0),h.pzaSoundManager.playAudio("faston")):(p.pzaGameState.isMiniMode()&&11==p.pzaGameState.curPart?p.pzaGameState.gameSpeed=2:p.pzaGameState.gameSpeed=1,window.pzaMapManager.blink(1),h.pzaSoundManager.playAudio("fastoff")),e.refreshGameSpeed(),z.pzaUtil.changeGameSpeed(p.pzaGameState.gameSpeed),p.pzaGameState.gameSpeed,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:P.pzaBubbleType.speed,setTime:1}))};this.speedAdTag.active?("hw"!=v.pzaChannel.instance().channel&&(p.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null),h.pzaSoundManager.pausePlayMusic()),v.pzaChannel.instance().showVideo({sucCall:function(){c.pzaLocalData.data.unlockSpeed=!0,c.pzaLocalData.addDirty("unlockSpeed"),a()},failCall:function(){},endCall:function(){p.pzaGameState.gamePause=!1,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_RESUME,null),h.pzaSoundManager.resumeMusic()},posName:"\u89e3\u9501\u52a0\u901f\u529f\u80fd",adsid:"18"})):a()},a.prototype.clickRestartBt=function(){p.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null),h.pzaSoundManager.pausePlayMusic(),f.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(E.pzaWarningView);a&&a.show("\u6ce8\uff1a\u5012\u8ba1\u65f6\u7ed3\u675f\u524d\u91cd\u65b0\u5f00\u59cb\u4e0d\u6d88\u8017\u6311\u6218\u6b21\u6570","\u91cd\u65b0\u5f00\u59cb","\u8fd4\u56de\u6e38\u620f",function(){s.pzaGameManager.getCurrentGame().gameRestart()},function(){p.pzaGameState.gamePause=!1,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_RESUME,null),h.pzaSoundManager.resumeMusic()},"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1)})},a.prototype.clickSkipPartBtn=function(){var e=function(){h.pzaSoundManager.resumeMusic(),window.pzazombieManager.skipPassPart();var e=5*(p.pzaGameState.curChapter-1)+p.pzaGameState.curPart;b.default.eventReport(e+"\u5173\u5361\u6210\u529f(\u5c40\u5185\u8df3\u8fc7)"),h.pzaSoundManager.stopLoopAudio(),h.pzaSoundManager.stopLongAudio(),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_WIN,null)},a=function(){p.pzaGameState.gamePause=!1,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_RESUME,null),h.pzaSoundManager.resumeMusic()};p.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null),h.pzaSoundManager.pausePlayMusic(),f.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(t){var o=t&&t.getComponent(E.pzaWarningView),n=0==l.pzaGameConfig.AllPartStar[p.pzaGameState.curChapter-1][p.pzaGameState.curPart-1]?"\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u672c\u5173\uff1f":"\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u672c\u5173\uff1f\n\u6ce8\uff1a\u5feb\u901f\u8df3\u5173\u4ec5\u53ef\u83b7\u5f97\u4e00\u661f\u8bc4\u4ef7";p.pzaGameState.skipGuidePartAble?o&&o.show("\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u5f53\u524d\u6559\u7a0b\u5173\u5361\uff1f","\u8df3\u8fc7\u5173\u5361","\u8fd4\u56de\u6e38\u620f",function(){e()},function(){a()},"\u63d0\u793a"):o&&o.show(n,"\u8df3\u8fc7\u5173\u5361","\u8fd4\u56de\u6e38\u620f",function(){v.pzaChannel.instance().showVideo({sucCall:function(){e()},failCall:function(){a()},endCall:function(){},posName:"\u5c40\u5185\u8df3\u5173",adsid:"7"})},function(){a()},"\u63d0\u793a",!0)})},a.prototype.clickTestNextWave=function(){window.pzazombieManager.nextWaveTime=0,window.pzazombieManager.curWaveTime=46},a.prototype.selectCard=function(){p.pzaGameState.selectCard!=p.pzaSelectCardType.SHOVE_CARD&&(this.blackShovel.active=!1,window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GUIDE_TIPS_OPACITY,255))},a.prototype.refreshShovel=function(){if(p.pzaGameState.selectCard==p.pzaSelectCardType.SHOVE_CARD)return this.blackShovel.stopAllActions(),this.blackShovel.active=!0,this.blackShovel.opacity=0,this.blackShovel.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4)))),void(window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GUIDE_TIPS_OPACITY,0));this.blackShovel.active=!1,window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GUIDE_TIPS_OPACITY,255)},a.prototype.blinkSunLabel=function(){var e=this;this.sunCountLabel.node.stopAllActions(),this.sunCountLabel.node.runAction(cc.repeat(cc.sequence(cc.callFunc(function(){e.sunCountLabel.node.color=cc.Color.fromHEX(cc.color(),"#FF0000")}),cc.delayTime(.1),cc.callFunc(function(){e.sunCountLabel.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF")}),cc.delayTime(.1)),4))},a.prototype.guideRefreshProp=function(){window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PROP_1_2&&(0==window.pzaGuideManager.guideStep?this.freePlantNode.active=!0:1==window.pzaGuideManager.guideStep?this.gameProp.showFreeSun():2==window.pzaGuideManager.guideStep?this.gameProp.showAutoPick():3==window.pzaGuideManager.guideStep&&this.gameProp.showCherryBomb())},a.prototype.refreshGameSpeed=function(){this.speedAdTag.active=!c.pzaLocalData.data.unlockSpeed,p.pzaGameState.gameMode==p.pzaGameMode.NORMAL&&1==p.pzaGameState.curChapter&&p.pzaGameState.curPart<=3&&(this.speedAdTag.active=!1),this.speedCount.string="X"+p.pzaGameState.gameSpeed},a.prototype.guideShowSpeed=function(){this.speedBtn.active=!0,this.speedAdTag.active=!1,this.speedCount.string="X"+p.pzaGameState.gameSpeed},a.prototype.guideUseSpeed=function(){p.pzaGameState.gameSpeed=2,z.pzaUtil.changeGameSpeed(p.pzaGameState.gameSpeed),this.speedCount.string="X"+p.pzaGameState.gameSpeed,window.pzaMapManager.blink(0),h.pzaSoundManager.playAudio("faston")},a.prototype.showBubbleTips=function(e){void 0===e&&(e=!1),e&&(this.speedBtn.active=!0),d.pzaOperationMgr.showChangeTipsBubble(this.speedBtn,"\u4e0d\u60f3\u7b49\uff1f\u8bd5\u8bd5\u52a0\u901f",10,function(e){e.tipTxtHideTime=3},e)},a.prototype.showClickShovelTips=function(e){void 0===e&&(e=!1),d.pzaOperationMgr.showTips(this.shovelShowNode,-50,-50,"\u8bf7\u70b9\u51fb\u7a7a\u767d\u5361\u7247",P.pzaBubbleType.tips,999)},a.instance=null,i([T({displayName:"\u9633\u5149\u663e\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"sunUIShowNode",void 0),i([T({displayName:"\u9633\u5149\u6570\u91cf",type:cc.Label})],a.prototype,"sunCountLabel",void 0),i([T({displayName:"\u9633\u5149UI\u4f4d\u7f6e",type:cc.Node})],a.prototype,"sunUINode",void 0),i([T({displayName:"\u94f2\u5b50\u663e\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"shovelShowNode",void 0),i([T({displayName:"\u94f2\u5b50",type:cc.Node})],a.prototype,"shovel",void 0),i([T({displayName:"\u94f2\u5b50-\u9ed1",type:cc.Node})],a.prototype,"blackShovel",void 0),i([T({displayName:"\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],a.prototype,"guideArrow",void 0),i([T({displayName:"\u83dc\u5355\u6309\u94ae",type:cc.Node})],a.prototype,"pauseBtn",void 0),i([T({displayName:"\u52a0\u901f\u6309\u94ae",type:cc.Node})],a.prototype,"speedBtn",void 0),i([T({displayName:"\u52a0\u901f\u5e7f\u544a\u56fe\u6807",type:cc.Node})],a.prototype,"speedAdTag",void 0),i([T({displayName:"\u901f\u5ea6",type:cc.Label})],a.prototype,"speedCount",void 0),i([T({displayName:"\u6e38\u620f\u5185\u9053\u5177\u8282\u70b9",type:S.pzaBattlePropView})],a.prototype,"gameProp",void 0),i([T({displayName:"\u514d\u8d39\u690d\u7269\u8282\u70b9",type:cc.Node})],a.prototype,"freePlantNode",void 0),i([T({displayName:"\u8df3\u5173\u6309\u94ae",type:cc.Node})],a.prototype,"skipPartBtn",void 0),i([T({displayName:"\u6d4b\u8bd5\u4e0b\u4e00\u6ce2\u6309\u94ae",type:cc.Node})],a.prototype,"testNextWaveBtn",void 0),t=i([w],a)}(cc.Component);t.pzaBattleDownView=A,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaBubbleItem":"pzaBubbleItem","../pzaCommonMask":"pzaCommonMask","../pzaWarningView":"pzaWarningView","./pzaBattlePropView":"pzaBattlePropView","./pzaMenuView":"pzaMenuView","./pzaOptionView":"pzaOptionView"}],pzaBattleFrameAnim:[function(e,a,t){"use strict";cc._RF.push(a,"7c9ef+mNP5N/ZWOKV0x/u2L","pzaBattleFrameAnim");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattleFrameAnim=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../utils/pzaFrameAnim"),l=e("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a.poolPrefab=null,a}return n(a,e),a.prototype.showAnim=function(e){var a=this;this.ani.setEndFn(function(){e&&e(),a.close()}),this.ani.reset(),this.ani.play()},a.prototype.logicUpdate=function(e){this.ani.updateFrame(e)},a.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"\u52a8\u753b",type:p.default})],a.prototype,"ani",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaBattleFrameAnim=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../utils/pzaFrameAnim":"pzaFrameAnim"}],pzaBattleFreePlant:[function(e,a,t){"use strict";cc._RF.push(a,"34f5dc2/LZLcqUzgVcb9ZdO","pzaBattleFreePlant");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattleFreePlant=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameConfig"),l=e("../../Common/pzaGameManager"),s=e("../../Common/pzaLocalData"),c=e("../../Common/pzaOperationMgr"),u=e("../../Common/pzaSpriteFrameManager"),d=e("../../Common/pzaUIManager"),h=e("../../Common/pzaWorldEventManager"),m=e("../../Load/pzaPreLoadManager"),f=e("../pzaBubbleItem"),z=e("./pzaTrySelectView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.freePlantBtn=null,a.freePlantCard=null,a.cardIcon=null,a.selectTag=null,a.professSp=null,a.professorFrames=[],a}return n(a,e),a.prototype.onEnable=function(){if(null==r.pzaGameState.adFreePlant)this.freePlantBtn.active=!0,this.freePlantCard.active=!1,this.freePlantBtn.opacity=255;else{this.freePlantBtn.active=!1,this.freePlantCard.active=!0,this.selectTag.active=!1,u.pzaSpriteFrameManager.loadPlantCard(r.pzaGameState.adFreePlant,this.cardIcon);var e=p.pzaGameConfig.getPlantConfig(r.pzaGameState.adFreePlant);e&&u.pzaSpriteFrameManager.loadPlantProfess(e.profession,this.professSp)}this.freePlantCard.on(cc.Node.EventType.TOUCH_START,this.clickFreePlantCard,this),this.freePlantCard._touchListener.setSwallowTouches(!1),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.SELECT_CARD,this.selectCard,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.DISSELECT_CARD,this.disSelectCard,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.PLANT_AD_PLANT,this.plantAdPlant,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.PLANTNUT_AD_PLANT,this.plantAdPlant,this)},a.prototype.onDisable=function(){this.freePlantCard.off(cc.Node.EventType.TOUCH_START,this.clickFreePlantCard,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.SELECT_CARD,this.selectCard,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.DISSELECT_CARD,this.disSelectCard,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.PLANT_AD_PLANT,this.plantAdPlant,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.PLANTNUT_AD_PLANT,this.plantAdPlant,this)},a.prototype.showWeakGuide=function(e){var a=p.pzaGameConfig.getPlantConfig(e),t="";a&&(t="\u8bf7\u5c1d\u8bd5\u53ec\u5524\u201c"+a.name+"\u201d"),s.pzaLocalData.data.tryPlantCountArrayNormal[s.pzaLocalData.data.tryPlantCountArrayNormal.length-1]++,c.pzaOperationMgr.showTips(this.freePlantBtn,0,0,t,f.pzaBubbleType.tips),e&&(r.pzaGameState.extraAdPlantArr.push(e),this.setUsePlant(e,!1))},a.prototype.closeWeakGuide=function(){},a.prototype.clickFreePlant=function(){var e=this;0!=this.selectTag.active?(r.pzaGameState.gamePause=!0,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_PAUSE,null),d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.TRY_SELECT_VIEW,function(a){var t=a&&a.getComponent(z.pzaTrySelectView);t&&t.init(e.setUsePlant.bind(e))})):this.selectTag.active=!0},a.prototype.setUsePlant=function(e,a){if(void 0===a&&(a=!0),r.pzaGameState.adFreePlant=e,this.freePlantBtn.opacity=0,this.freePlantCard.active=!0,this.selectTag.active=a,u.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),e){var t=p.pzaGameConfig.getPlantConfig(e);if(t){var o=this.freePlantCard.getComponent(cc.Sprite);u.pzaSpriteFrameManager.loadPlantCardSlotFrame(o,e),u.pzaSpriteFrameManager.loadPlantProfess(t.profession,this.professSp)}}!1!==a&&(r.pzaGameState.selectCard=r.pzaSelectCardType.AD_CARD,r.pzaGameState.selectPlant=e,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SELECT_CARD,null))},a.prototype.clickFreePlantCard=function(){r.pzaGameState.selectCard!=r.pzaSelectCardType.AD_CARD&&(r.pzaGameState.selectCard=r.pzaSelectCardType.AD_CARD,r.pzaGameState.selectPlant=r.pzaGameState.adFreePlant,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SELECT_CARD,!0))},a.prototype.selectCard=function(){null!=r.pzaGameState.adFreePlant&&r.pzaGameState.selectCard!=r.pzaSelectCardType.AD_CARD&&(this.selectTag.active=!1)},a.prototype.disSelectCard=function(){window.pzaGuideManager.guideType&&"string"==typeof window.pzaGuideManager.guideType&&window.pzaGuideManager.guideType.match("WEAK_GUIDE")&&window.pzaGuideManager.guideStepTo(-1),this.freePlantBtn.active=!0,this.freePlantCard.active=!1,r.pzaGameState.adFreePlant=null,this.freePlantBtn.opacity=255},a.prototype.plantAdPlant=function(){window.pzaGuideManager.guideType&&"string"==typeof window.pzaGuideManager.guideType&&window.pzaGuideManager.guideType.match("WEAK_GUIDE")&&window.pzaGuideManager.guideStepTo(-1),this.freePlantBtn.active=!0,this.freePlantCard.active=!1,r.pzaGameState.adFreePlant=null,this.freePlantBtn.opacity=255;var e=l.pzaGameManager.getCurrentGame();e.adPlantTimes>0&&(e.adPlantTimes--,e.adPlantTimes<=0&&(this.node.active=!1))},i([v({displayName:"\u514d\u8d39\u690d\u7269\u6309\u94ae",type:cc.Node})],a.prototype,"freePlantBtn",void 0),i([v({displayName:"\u514d\u8d39\u690d\u7269\u5361\u7247",type:cc.Node})],a.prototype,"freePlantCard",void 0),i([v({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([v({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"selectTag",void 0),i([v({type:cc.Sprite})],a.prototype,"professSp",void 0),i([v({type:cc.SpriteFrame})],a.prototype,"professorFrames",void 0),i([g],a)}(cc.Component);t.pzaBattleFreePlant=b,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../pzaBubbleItem":"pzaBubbleItem","./pzaTrySelectView":"pzaTrySelectView"}],pzaBattlePassConf:[function(e,a,t){"use strict";cc._RF.push(a,"0d59cFPYSRF9qVO/8kdkSOY","pzaBattlePassConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattlePassConf=void 0;var o=e("../Common/pzaGamePropConfig");t.pzaBattlePassConf=function(e){this.id=0,this.name="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex="",this.id=e.iD,this.name=e.name||"",this.rewardType=e.rewardType,this.rewardCount=parseInt(e.rewardValue),this.recFun=e.aDClaim,this.iconIndex=e.icon},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaBattlePassItem:[function(e,a,t){"use strict";cc._RF.push(a,"ac3dbPphmdBgazpi/cAFgYb","pzaBattlePassItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGamePropConfig"),p=e("../Common/pzaItemTips"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSpriteFrameManager"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaWorldEventManager"),d=e("./pzaBattlePassMgr"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.node_normal=null,a.node_high=null,a.img_propIcon=null,a.img_highPropIcon=null,a.lab_propName=null,a.lab_highPropName=null,a.lab_propAmount=null,a.lab_highPropAmount=null,a.img_block=null,a.img_highBlock=null,a.img_hasGet=null,a.img_highHasGet=null,a.lab_expLv=null,a.node_lvBg1=null,a.node_lvBg2=null,a.node_ad=null,a.normalRewardType=0,a.normalRewardCount=0,a.highRewardType=0,a.highRewardCount=0,a.idx=0,a.contentWidth=0,a.allItems=0,a.battlePassView=null,a.highGetsNeedsAds=30,a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.node_normal.on(cc.Node.EventType.TOUCH_END,function(){e.clickGetReward(!1)},this),this.node_high.on(cc.Node.EventType.TOUCH_END,function(){e.clickGetReward(!0)},this)},a.prototype.bindData=function(e,a,t,o,n){this.battlePassView=e,this.call=n,this.node_lvBg1.active=!1,this.node_lvBg2.active=!1,this.img_propIcon.node.active=!1,this.img_block.node.active=!1,this.img_hasGet.node.active=!1,this.img_highPropIcon.node.active=!1,this.img_highBlock.node.active=!1,this.img_highHasGet.node.active=!1,this.idx=a+1,this.contentWidth=t,this.allItems=o,this.lab_expLv.string=this.idx+"";var i=d.default.instance().normalRewardMap.get(this.idx);this.lab_propName.string=i.name,this.lab_propAmount.string="X"+i.rewardCount;var l=d.default.instance().highRewardMap.get(this.idx);this.lab_highPropName.string=l.name,this.lab_highPropAmount.string="X"+l.rewardCount,this.normalRewardType=i.rewardType,this.normalRewardCount=i.rewardCount,i.rewardType==r.pzaGamePropEnum.PROP_PLANTE&&(this.lab_propAmount.node.active=!1),this.highRewardType=l.rewardType,this.highRewardCount=l.rewardCount,l.rewardType==r.pzaGamePropEnum.PROP_PLANTE?this.lab_highPropAmount.node.active=!1:l.rewardType==r.pzaGamePropEnum.EQUIP_BELT&&(this.lab_highPropAmount.node.active=!1),this.img_block.addComponent(p.default).bindData(this.normalRewardType,this.normalRewardCount),this.img_highBlock.addComponent(p.default).bindData(this.highRewardType,this.highRewardCount),this.refreshUI()},a.prototype.refreshUI=function(){this.refreshItem(),this.refreshLockState(),this.refreshLvBgLen(this.idx),this.refreshItemState()},a.prototype.refreshItem=function(){this.img_propIcon.node.active=!1,this.img_highPropIcon.node.active=!1,this.img_propIcon.node.scale=.8,this.img_highPropIcon.node.scale=.8;var e=d.default.instance().normalRewardMap.get(this.idx);switch(e.rewardType){case r.pzaGamePropEnum.PROP_COIN:case r.pzaGamePropEnum.PROP_POWER:case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_FREE_SUN:case r.pzaGamePropEnum.PROP_AUTO_PICK:this.img_propIcon.node.active=!0;var a=e.iconIndex+"";s.pzaSpriteFrameManager.loadCommonImg(a,this.img_propIcon)}var t=d.default.instance().highRewardMap.get(this.idx);switch(t.rewardType){case r.pzaGamePropEnum.PROP_COIN:case r.pzaGamePropEnum.PROP_POWER:case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_FREE_SUN:case r.pzaGamePropEnum.PROP_AUTO_PICK:this.img_highPropIcon.node.active=!0,a=t.iconIndex+"",s.pzaSpriteFrameManager.loadCommonImg(""+a,this.img_highPropIcon);break;case r.pzaGamePropEnum.PROP_PLANTE:this.img_highPropIcon.node.active=!0,s.pzaSpriteFrameManager.loadPlantWholeCard(this.highRewardCount+"",this.img_highPropIcon);break;case r.pzaGamePropEnum.EQUIP_BELT:this.img_highPropIcon.node.active=!0,this.img_highPropIcon.node.scale=.8,s.pzaSpriteFrameManager.loadBeltCard("belt_"+this.highRewardCount,this.img_highPropIcon)}},a.prototype.refreshItemState=function(){2==l.pzaLocalData.data.bpNormalRewards[this.idx+""]&&(this.img_block.node.active=!0,this.img_hasGet.node.active=!0),2==l.pzaLocalData.data.bpHighRewards[this.idx+""]&&(this.img_highBlock.node.active=!0,this.img_highHasGet.node.active=!0),this.node_ad.active=!1,(0==l.pzaLocalData.data.bpHighRewards[this.idx+""]||1==l.pzaLocalData.data.bpHighRewards[this.idx+""])&&this.idx<=30&&this.idx==l.pzaLocalData.data.bpHighAdsCnt+1&&(this.node_ad.active=!0)},a.prototype.refreshLockState=function(){this.idx-1<l.pzaLocalData.data.battlePassLv?(this.img_block.node.active=!1,this.img_highBlock.node.active=!1,l.pzaLocalData.data.bpNormalRewards[this.idx+""]||(l.pzaLocalData.data.bpNormalRewards[this.idx+""]=1,l.pzaLocalData.addDirty("bpNormalRewards")),l.pzaLocalData.data.bpHighRewards[this.idx+""]||(l.pzaLocalData.data.bpHighRewards[this.idx+""]=1,l.pzaLocalData.addDirty("bpHighRewards"))):(this.img_block.node.active=!0,this.img_highBlock.node.active=!0,this.node_ad.active=!1)},a.prototype.refreshLvBgLen=function(e){if(1==e)if(this.node_lvBg1.active=!0,this.node_lvBg2.active=!0,this.node_lvBg1.width=this.contentWidth,this.node_lvBg2.width=this.contentWidth,0==l.pzaLocalData.data.battlePassLv)this.node_lvBg2.active=!0,this.node_lvBg2.x=-64;else if(l.pzaLocalData.data.battlePassLv>=60)this.node_lvBg2.active=!1,this.node_lvBg2.x=-64;else{var a=130*l.pzaLocalData.data.battlePassLv+8*(l.pzaLocalData.data.battlePassLv-1)-64,t=130*(this.allItems-l.pzaLocalData.data.battlePassLv)+8*(this.allItems-1)+10;this.node_lvBg2.width=t,this.node_lvBg2.x=a}},a.prototype.clickGetReward=function(e){e?this.node_ad.active?u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLE_PASS_HIGHRWD):c.pzaTipManager.showHomeTip("\u8bf7\u6309\u987a\u5e8f\u9886\u53d6\u9ad8\u6863\u5956\u52b1",null,3):(this.refreshUI(),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLE_PASS_NORMALRWD))},a.prototype.clickAllReward=function(e){e?(l.pzaLocalData.data.bpHighRewards[this.idx+""]=2,l.pzaLocalData.addDirty("bpHighRewards"),this.refreshUI()):(l.pzaLocalData.data.bpNormalRewards[this.idx+""]=2,l.pzaLocalData.addDirty("bpNormalRewards"),this.refreshUI())},i([f({displayName:"\u6b63\u5e38\u5956\u52b1\u8282\u70b9",type:cc.Node})],a.prototype,"node_normal",void 0),i([f({displayName:"\u9ad8\u7ea7\u5956\u52b1\u8282\u70b9",type:cc.Node})],a.prototype,"node_high",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_propIcon",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_highPropIcon",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u540d\u79f0",type:cc.Label})],a.prototype,"lab_propName",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u540d\u79f0",type:cc.Label})],a.prototype,"lab_highPropName",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"lab_propAmount",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"lab_highPropAmount",void 0),i([f({displayName:"\u666e\u901a\u906e\u6321\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_block",void 0),i([f({displayName:"\u9ad8\u7ea7\u906e\u6321\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_highBlock",void 0),i([f({displayName:"\u666e\u901a\u5df2\u9886\u53d6\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_hasGet",void 0),i([f({displayName:"\u9ad8\u7ea7\u5df2\u9886\u53d6\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_highHasGet",void 0),i([f({displayName:"\u6218\u4ee4\u7ecf\u9a8c\u7b49\u7ea7",type:cc.Label})],a.prototype,"lab_expLv",void 0),i([f({displayName:"\u7b49\u7ea7\u80cc\u666f1",type:cc.Node})],a.prototype,"node_lvBg1",void 0),i([f({displayName:"\u7b49\u7ea7\u80cc\u666f2",type:cc.Node})],a.prototype,"node_lvBg2",void 0),i([f({displayName:"\u89c6\u9891\u6807\u8bc6",type:cc.Node})],a.prototype,"node_ad",void 0),i([m],a)}(cc.Component);t.default=z,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaBattlePassMgr":"pzaBattlePassMgr"}],pzaBattlePassMgr:[function(e,a,t){"use strict";cc._RF.push(a,"42562owEDFNUoaU16vWF7w2","pzaBattlePassMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../Common/pzaLocalData"),i=e("./pzaBattlePassConf"),r=cc._decorator,p=r.ccclass,l=(r.property,function(){function e(){this.normalRewardMap=new Map,this.highRewardMap=new Map}var a;return a=e,e.instance=function(){return a._me||(a._me=new a),a._me},e.prototype.normalRewardInit=function(e){if(!n.pzaLocalData.disablePostFn){this.normalRewardMap.clear();for(var a=0;a<e.length;a++){var t=new i.pzaBattlePassConf(e[a]);this.normalRewardMap.set(t.id,t)}}},e.prototype.highRewardInit=function(e){if(!n.pzaLocalData.disablePostFn){this.highRewardMap.clear();for(var a=0;a<e.length;a++){var t=new i.pzaBattlePassConf(e[a]);this.highRewardMap.set(t.id,t)}}},e._me=null,a=o([p],e)}());t.default=l,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaBattlePassConf":"pzaBattlePassConf"}],pzaBattlePassTaskConf:[function(e,a,t){"use strict";cc._RF.push(a,"c815emsgelKqK1qj/a4n9oM","pzaBattlePassTaskConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattlePassTaskConf=void 0;t.pzaBattlePassTaskConf=function(e){this.id=0,this.taskname="",this.condNum=0,this.taskname=e.taskname||"",this.condNum=e.condNum||0},cc._RF.pop()},{}],pzaBattlePassTaskItem:[function(e,a,t){"use strict";cc._RF.push(a,"ccdbciyjS9MiI7dw4ovhuJx","pzaBattlePassTaskItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaTipManager"),s=e("../Common/pzaWorldEventManager"),c=e("./pzaBattlePassTaskMgr"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_taskName=null,a.pro_task=null,a.lab_task=null,a.btn_get=null,a.node_hasGet=null,a.lab_exp=null,a.mask=null,a.idx=0,a.type=0,a}return n(a,e),a.prototype.onEnable=function(){this.btn_get.on(cc.Node.EventType.TOUCH_END,this.clickGetReward,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BATTLEPASS_GETALL,this.refreshTaskState,this)},a.prototype.bindData=function(e,a,t){this.call=t,this.idx=e+1,this.type=a,this.node_hasGet.active=!1,this.mask.active=!1;var o=null;1==a?(o=c.default.instance().BpDayTaskMap.get(this.idx),this.refreshDayTaskState(o.condNum)):2==a&&(o=c.default.instance().BpWeekTaskMap.get(this.idx),this.refreshWeekTaskState(o.condNum)),this.lab_taskName.string=o.taskname,this.lab_exp.string=1==a?"X20":"X100"},a.prototype.refreshDayTaskState=function(e){this.btn_get.active=!1,this.mask.active=!1,this.node_hasGet.active=!1,2==r.pzaLocalData.data.bpDayTaskStates[this.idx+""]?(this.node_hasGet.active=!0,this.mask.active=!0,this.btn_get.active=!1,this.node.zIndex=2e3*(this.idx+1)):1==r.pzaLocalData.data.bpDayTaskStates[this.idx+""]?(this.btn_get.active=!0,this.node.zIndex=this.idx):this.node.zIndex=100*(this.idx+1),1==this.idx?(this.lab_task.string="(1/1)",this.pro_task.progress=1):2==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpDayPassPartCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpDayPassPartCnt/e):3==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpDayPlantCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpDayPlantCnt/e):5==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpDayWatchAdCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpDayWatchAdCnt/e):4==this.idx&&(this.lab_task.string="("+r.pzaLocalData.data.bpDayCostPowerCnt+" / "+e+")",this.pro_task.progress=r.pzaLocalData.data.bpDayCostPowerCnt/e)},a.prototype.refreshWeekTaskState=function(e){this.btn_get.active=!1,this.node_hasGet.active=!1,2==r.pzaLocalData.data.bpWeekTaskStates[this.idx+""]?(this.node_hasGet.active=!0,this.btn_get.active=!1,this.node.zIndex=2e3*(this.idx+1)):1==r.pzaLocalData.data.bpWeekTaskStates[this.idx+""]?(this.btn_get.active=!0,this.node.zIndex=this.idx):this.node.zIndex=100*(this.idx+1),1==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekLoginCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekLoginCnt/e):2==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekCostPowerCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekCostPowerCnt/e):3==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekUsePropCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekUsePropCnt/e):4==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekWatchAdCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekWatchAdCnt/e):5==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekPassPartCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekPassPartCnt/e):6==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekPlantCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekPlantCnt/e):7==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekZombieDeathCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekZombieDeathCnt/e):8==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekGetGoldCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekGetGoldCnt/e):9==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekSunCnt+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekSunCnt/e):10==this.idx&&(this.lab_task.string="("+r.pzaLocalData.data.bpWeekEndlessPass+"/"+e+")",this.pro_task.progress=r.pzaLocalData.data.bpWeekEndlessPass/e)},a.prototype.clickGetReward=function(){p.pzaSoundManager.playSFX();var e=0;1==this.type?(r.pzaLocalData.data.bpDayTaskStates[this.idx+""]=2,r.pzaLocalData.data.battlePassExp+=20,e+=20):2==this.type&&(r.pzaLocalData.data.bpWeekTaskStates[this.idx+""]=2,r.pzaLocalData.data.battlePassExp+=100,e+=100),r.pzaLocalData.data.battlePassExp>=100&&(r.pzaLocalData.data.battlePassExp-=100,r.pzaLocalData.data.battlePassLv++),r.pzaLocalData.addDirty("bpDayTaskStates","bpWeekTaskStates","battlePassExp","battlePassLv"),this.refreshTaskState(),l.pzaTipManager.showHomeTip("\u7ecf\u9a8cX"+e,null,1),this.call&&this.call()},a.prototype.refreshTaskState=function(){var e=null;1==this.type?(e=c.default.instance().BpDayTaskMap.get(this.idx),this.refreshDayTaskState(e.condNum)):(e=c.default.instance().BpWeekTaskMap.get(this.idx),this.refreshWeekTaskState(e.condNum))},a.prototype.onDisable=function(){this.btn_get.off(cc.Node.EventType.TOUCH_END,this.clickGetReward,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BATTLEPASS_GETALL,this.refreshTaskState,this)},i([h({displayName:"\u4efb\u52a1\u540d\u79f0",type:cc.Label})],a.prototype,"lab_taskName",void 0),i([h({displayName:"\u4efb\u52a1\u8fdb\u5ea6",type:cc.ProgressBar})],a.prototype,"pro_task",void 0),i([h({displayName:"\u4efb\u52a1\u8fdb\u5ea6lab",type:cc.Label})],a.prototype,"lab_task",void 0),i([h({displayName:"\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"btn_get",void 0),i([h({displayName:"\u5df2\u9886\u53d6",type:cc.Node})],a.prototype,"node_hasGet",void 0),i([h({displayName:"\u7ecf\u9a8c\u503c",type:cc.Label})],a.prototype,"lab_exp",void 0),i([h({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([d],a)}(cc.Component);t.default=m,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr"}],pzaBattlePassTaskMgr:[function(e,a,t){"use strict";cc._RF.push(a,"5c1c4aOrFBNDai5fyJ/Y1yw","pzaBattlePassTaskMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../Common/pzaLocalData"),i=e("./pzaBattlePassTaskConf"),r=cc._decorator,p=r.ccclass,l=(r.property,function(){function e(){this.BpDayTaskMap=new Map,this.BpWeekTaskMap=new Map}var a;return a=e,e.instance=function(){return a._me||(a._me=new a),a._me},e.prototype.init=function(e){if(!n.pzaLocalData.disablePostFn)for(var a=0;a<e.length;a++){var t=e[a].iD.split("_"),o=new i.pzaBattlePassTaskConf(e[a]);1==parseInt(t[0])?(o.id=parseInt(t[1]),this.BpDayTaskMap.set(o.id,o)):2==parseInt(t[0])&&(o.id=parseInt(t[1]),this.BpWeekTaskMap.set(o.id,o))}},e.prototype.checkDayTask=function(e,a){if(!n.pzaLocalData.disablePostFn&&2!=n.pzaLocalData.data.bpDayTaskStates[e+""]){var t=this.BpDayTaskMap.get(e);t&&a>=t.condNum&&!n.pzaLocalData.data.bpDayTaskStates[e+""]&&(n.pzaLocalData.data.bpDayTaskStates[e+""]=1,n.pzaLocalData.addDirty("bpDayTaskStates"))}},e.prototype.checkWeekTask=function(e,a){n.pzaLocalData.disablePostFn||2!=n.pzaLocalData.data.bpWeekTaskStates[e+""]&&a>=this.BpWeekTaskMap.get(e).condNum&&!n.pzaLocalData.data.bpWeekTaskStates[e+""]&&(n.pzaLocalData.data.bpWeekTaskStates[e+""]=1,n.pzaLocalData.addDirty("bpWeekTaskStates"))},e._me=null,a=o([p],e)}());t.default=l,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaBattlePassTaskConf":"pzaBattlePassTaskConf"}],pzaBattlePassTaskView:[function(e,a,t){"use strict";cc._RF.push(a,"3cfd5EPYD9JjZH2gXkiWYyX","pzaBattlePassTaskView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaWorldEventManager"),d=e("../utils/pzaChannel"),h=e("../utils/pzakc"),m=e("./pzaBattlePassTaskItem"),f=e("./pzaBattlePassTaskMgr"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.btn_getAll=null,a.btn_addExp=null,a.btn_close=null,a.btn_day=null,a.btn_week=null,a.lab_countDown=null,a.node_content=null,a.pre_item=null,a.nodes_select=[],a.nodes_unselect=[],a.nodes_RedTip=[],a.node_scrollView=null,a.type=1,a.checkTimes=0,a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.btn_getAll.on(cc.Node.EventType.TOUCH_END,this.getAll,this),this.btn_addExp.on(cc.Node.EventType.TOUCH_END,this.addExp,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_day.on(cc.Node.EventType.TOUCH_END,function(){e.clickSelectBtn(1)},this),this.btn_week.on(cc.Node.EventType.TOUCH_END,function(){e.clickSelectBtn(2)},this),this.clickSelectBtn(1),this.init(),this.schedule(function(){e.countDown()},1,cc.macro.REPEAT_FOREVER),d.pzaChannel.isConfRemote?this.btn_addExp.active=!0:this.btn_addExp.active=!1,this.checkTimes=1,this.nodes_RedTip.forEach(function(e){e.active=!1});for(var a=0;a<this.nodes_RedTip.length;a++)cc.tween(this.nodes_RedTip[a]).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start();this.checkRedShow()},a.prototype.bindData=function(e){this.call=e},a.prototype.init=function(){},a.prototype.clickSelectBtn=function(e){switch(s.pzaSoundManager.playSFX(),e){case 1:this.nodes_select[0].active=!0,this.nodes_select[1].active=!1,this.nodes_unselect[0].active=!1,this.nodes_unselect[1].active=!0,this.showTask(1),this.node_scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.node_scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(0,0));break;case 2:this.nodes_select[0].active=!1,this.nodes_select[1].active=!0,this.nodes_unselect[0].active=!0,this.nodes_unselect[1].active=!1,this.showTask(2),this.node_scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.node_scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(0,0))}},a.prototype.showTask=function(e){var a,t,o,n,i=this;if(this.node_content.removeAllChildren(),1==e){this.node_content.height=110*f.default.instance().BpDayTaskMap.size+15*(f.default.instance().BpDayTaskMap.size-1);for(var p=function(e){s.scheduleOnce(function(){var a=cc.instantiate(i.pre_item);a.setParent(i.node_content),a.getComponent(m.default).bindData(e,1,function(){i.checkGetAllBtnState()})},.01*e)},s=this,c=0;c<f.default.instance().BpDayTaskMap.size;c++)p(c);this.type=1;var u=!1;try{for(var d=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),h=d.next();!h.done;h=d.next()){var z=h.value;1==l.pzaLocalData.data.bpDayTaskStates[z]&&(u=!0)}}catch(P){a={error:P}}finally{try{h&&!h.done&&(t=d.return)&&t.call(d)}finally{if(a)throw a.error}}this.btn_getAll.active=u}else if(2==e){this.node_content.height=110*f.default.instance().BpWeekTaskMap.size+15*(f.default.instance().BpWeekTaskMap.size-1);var y=function(e){g.scheduleOnce(function(){var a=cc.instantiate(i.pre_item);a.setParent(i.node_content),a.getComponent(m.default).bindData(e,2,function(){i.checkGetAllBtnState()})},.01*e)},g=this;for(c=0;c<f.default.instance().BpWeekTaskMap.size;c++)y(c);this.type=2,u=!1;try{for(var v=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),b=v.next();!b.done;b=v.next())z=b.value,1==l.pzaLocalData.data.bpWeekTaskStates[z]&&(u=!0)}catch(C){o={error:C}}finally{try{b&&!b.done&&(n=v.return)&&n.call(v)}finally{if(o)throw o.error}}this.btn_getAll.active=u}},a.prototype.checkGetAllBtnState=function(){var e,a,t,o;if(1==this.type){var n=!1;try{for(var i=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),p=i.next();!p.done;p=i.next()){var s=p.value;1==l.pzaLocalData.data.bpDayTaskStates[s]&&(n=!0)}}catch(d){e={error:d}}finally{try{p&&!p.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}this.btn_getAll.active=n}else if(2==this.type){n=!1;try{for(var c=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),u=c.next();!u.done;u=c.next())s=u.value,1==l.pzaLocalData.data.bpWeekTaskStates[s]&&(n=!0)}catch(h){t={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}this.btn_getAll.active=n}},a.prototype.getAll=function(){var e,a,t,o;s.pzaSoundManager.playSFX();var n=0;if(1==this.type){var i=!1;try{for(var p=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),d=p.next();!d.done;d=p.next()){var h=d.value;1==l.pzaLocalData.data.bpDayTaskStates[h]&&(l.pzaLocalData.data.bpDayTaskStates[h]=2,l.pzaLocalData.data.battlePassExp+=20,n+=20,i=!0,l.pzaLocalData.data.battlePassExp>=100&&(l.pzaLocalData.data.battlePassExp-=100,l.pzaLocalData.data.battlePassLv++))}}catch(z){e={error:z}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(e)throw e.error}}i&&(l.pzaLocalData.addDirty("bpDayTaskStates","battlePassExp","battlePassExp","battlePassLv"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLEPASS_GETALL,null))}else{i=!1;try{for(var m=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),f=m.next();!f.done;f=m.next())h=f.value,1==l.pzaLocalData.data.bpWeekTaskStates[h]&&(l.pzaLocalData.data.bpWeekTaskStates[h]=2,l.pzaLocalData.data.battlePassExp+=100,n+=100,i=!0,l.pzaLocalData.data.battlePassExp>=100&&(l.pzaLocalData.data.battlePassExp-=100,l.pzaLocalData.data.battlePassLv++))}catch(y){t={error:y}}finally{try{f&&!f.done&&(o=m.return)&&o.call(m)}finally{if(t)throw t.error}}i&&(l.pzaLocalData.addDirty("bpWeekTaskStates","battlePassExp","battlePassExp","battlePassLv"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLEPASS_GETALL,null))}c.pzaTipManager.showHomeTip("\u7ecf\u9a8cX"+n,null,1),this.btn_getAll.active=!1},a.prototype.countDown=function(){(new Date).getDay();var e=h.default.getRemainingSeconds();if(e>0){var a=h.default.format(e);1==this.type?this.lab_countDown.string=a+"":2==this.type&&(this.lab_countDown.string=h.default.getNextMonday())}},a.prototype.addExp=function(){l.pzaLocalData.data.battlePassExp+=100,l.pzaLocalData.data.battlePassExp>=100&&(l.pzaLocalData.data.battlePassExp-=100,l.pzaLocalData.data.battlePassLv++,u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLE_PASS_UPDATE_SCROLL))},a.prototype.update=function(e){this.checkTimes>0&&(this.checkTimes-=e,this.checkTimes<=0&&(this.checkTimes=2,this.checkRedShow()))},a.prototype.checkRedShow=function(){var e,a,t,o,n=!1;try{for(var i=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),p=i.next();!p.done;p=i.next()){var s=p.value;1==l.pzaLocalData.data.bpDayTaskStates[s]&&(n=!0)}}catch(h){e={error:h}}finally{try{p&&!p.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}this.nodes_RedTip[0].active=!!n,2==this.type||this.type;var c=!1;try{for(var u=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),d=u.next();!d.done;d=u.next())s=d.value,1==l.pzaLocalData.data.bpWeekTaskStates[s]&&(c=!0)}catch(m){t={error:m}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(t)throw t.error}}this.nodes_RedTip[1].active=!!c},a.prototype.onDisable=function(){var e=this;this.btn_getAll.off(cc.Node.EventType.TOUCH_END,this.getAll,this),this.btn_addExp.off(cc.Node.EventType.TOUCH_END,this.addExp,this),this.btn_close.off(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_day.off(cc.Node.EventType.TOUCH_END,function(){e.clickSelectBtn(1)},this),this.btn_week.off(cc.Node.EventType.TOUCH_END,function(){e.clickSelectBtn(2)},this)},a.prototype.close=function(){s.pzaSoundManager.playSFX(),this.call&&this.call(),p.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"btn_getAll",void 0),i([g({displayName:"\u6dfb\u52a0\u7ecf\u9a8c\u6309\u94ae",type:cc.Node})],a.prototype,"btn_addExp",void 0),i([g({displayName:"\u5173\u95ed\u6309\u94ae",type:cc.Node})],a.prototype,"btn_close",void 0),i([g({displayName:"\u6bcf\u65e5\u6309\u94ae",type:cc.Node})],a.prototype,"btn_day",void 0),i([g({displayName:"\u6bcf\u5468\u6309\u94ae",type:cc.Node})],a.prototype,"btn_week",void 0),i([g({displayName:"\u9886\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],a.prototype,"lab_countDown",void 0),i([g({displayName:"\u5bb9\u5668",type:cc.Node})],a.prototype,"node_content",void 0),i([g({displayName:"item",type:cc.Prefab})],a.prototype,"pre_item",void 0),i([g({displayName:"\u9009\u4e2d\u8282\u70b9",type:[cc.Node]})],a.prototype,"nodes_select",void 0),i([g({displayName:"\u672a\u9009\u4e2d\u8282\u70b9",type:[cc.Node]})],a.prototype,"nodes_unselect",void 0),i([g({displayName:"\u7ea2\u70b9\u7ec4",type:[cc.Node]})],a.prototype,"nodes_RedTip",void 0),i([g({displayName:"\u6eda\u52a8\u8282\u70b9",type:cc.Node})],a.prototype,"node_scrollView",void 0),i([y],a)}(cc.Component);t.default=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBattlePassTaskItem":"pzaBattlePassTaskItem","./pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr"}],pzaBattlePassView:[function(e,a,t){"use strict";cc._RF.push(a,"aa78cEKLz5Bo5R17o6BWHDQ","pzaBattlePassView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Battle/Data/pzaDropType"),l=e("../Battle/pzaGameState"),s=e("../Common/pzaBeltEquipConfig"),c=e("../Common/pzaGameCommonPool"),u=e("../Common/pzaGamePropConfig"),d=e("../Common/pzaLocalData"),h=e("../Common/pzaRewardManager"),m=e("../Common/pzaSoundManager"),f=e("../Common/pzaStatisticsMgr"),z=e("../Common/pzaTipManager"),y=e("../Common/pzaUIManager"),g=e("../Common/pzaUtil"),v=e("../Common/pzaWorldEventManager"),b=e("../Load/pzaPreLoadManager"),P=e("../utils/pzaChannel"),C=e("../utils/pzakc"),E=e("../View/Battle/pzaNewPlantView"),S=e("../View/pzaCommonMask"),_=e("./pzaBattlePassItem"),D=e("./pzaBattlePassMgr"),M=e("./pzaBattlePassTaskView"),w=cc._decorator,T=w.ccclass,A=w.property,B=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.btn_close=null,a.btn_getExp=null,a.btn_getAll=null,a.lab_lv=null,a.lab_exp=null,a.pro_expPro=null,a.node_content=null,a.pre_item=null,a.lab_highReward=null,a.lab_resetTime=null,a.node_ad=null,a.lab_getAll=null,a.node_rewardTip=null,a.node_highRewardTip=null,a.scrollView=null,a.allItems=[],a.allRewards=[],a.getAllBtnState=0,a.highGetsNeedsAds=30,a}return n(a,e),a.prototype.onEnable=function(){var e=this;S.pzaCommonMask.hideMask(),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.BATTLE_PASS_NORMALRWD,this.getNormalReward,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.BATTLE_PASS_HIGHRWD,this.getHighReward,this),this.node_rewardTip.active=!1,this.node_highRewardTip.active=!0,this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_getExp.on(cc.Node.EventType.TOUCH_END,this.clickGetExp,this),this.btn_getAll.on(cc.Node.EventType.TOUCH_END,this.clickGetAll,this),this.init(),this.schedule(function(){e.countDown()},1,cc.macro.REPEAT_FOREVER),cc.tween(this.btn_getAll).to(1,{scale:.8},{easing:"sineInOut"}).to(1,{scale:1},{easing:"sineInOut"}).union().repeatForever().start(),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:6})},a.prototype.init=function(){var e=this,a=D.default.instance().normalRewardMap.size;this.node_content.width=130*a+8*(a-1)+10;for(var t=0;t<a;t++){var o=cc.instantiate(this.pre_item);o.setParent(this.node_content);var n=o.getComponent(_.default);n.bindData(this,t,this.node_content.width,a,function(a,t){e.getItemRewardCall(a,t)}),this.allItems.push(n)}this.refreshUI(),this.refreshGetAllState(),this.refreshScrollView()},a.prototype.refreshUI=function(){this.lab_lv.string=""+d.pzaLocalData.data.battlePassLv,this.lab_exp.string=d.pzaLocalData.data.battlePassExp+"/100",this.pro_expPro.progress=d.pzaLocalData.data.battlePassExp>=100?1:d.pzaLocalData.data.battlePassExp/100,this.highGetsNeedsAds-d.pzaLocalData.data.bpHighAdsCnt>0?this.lab_highReward.string="\u518d\u89c2\u770b"+(this.highGetsNeedsAds-d.pzaLocalData.data.bpHighAdsCnt)+"\u6b21\u5e7f\u544a\u53ef\u4e00\u952e\u83b7\u53d6\u9ad8\u7ea7\u5956\u52b1":this.lab_highReward.string="\u70b9\u51fb\u4e00\u952e\u83b7\u53d6\u53ef\u83b7\u5f97\u9ad8\u7ea7\u5956\u52b1",d.pzaLocalData.data.battlePassLv>=60&&(this.lab_exp.string="100/100",g.pzaUtil.switchGraySprite(this.btn_getExp.getComponent(cc.Sprite),!0))},a.prototype.refreshScrollView=function(){var e;D.default.instance().normalRewardMap.size,e=(d.pzaLocalData.data.battlePassLv-3)/60,this.scrollView.content.x=-this.scrollView.content.width*e,this.scrollView.content.x<-7582&&(this.scrollView.content.x=-7582)},a.prototype.hideAllAdFlag=function(){this.allItems.forEach(function(e){e.node_ad.active=!1})},a.prototype.refreshGetAllState=function(){var e,a,t,o;this.btn_getAll.active=!0;var n=!1;try{for(var i=r(Object.keys(d.pzaLocalData.data.bpNormalRewards)),p=i.next();!p.done;p=i.next()){var l=p.value;1==d.pzaLocalData.data.bpNormalRewards[l]&&(n=!0,this.getAllBtnState=1)}}catch(h){e={error:h}}finally{try{p&&!p.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}if(n)return this.node_ad.active=!1,void(this.lab_getAll.string="\u4e00\u952e\u9886\u53d6");var s=!1;try{for(var c=r(Object.keys(d.pzaLocalData.data.bpHighRewards)),u=c.next();!u.done;u=c.next())l=u.value,1==d.pzaLocalData.data.bpHighRewards[l]&&(s=!0)}catch(m){t={error:m}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}s?d.pzaLocalData.data.bpHighAdsCnt>=this.highGetsNeedsAds?(this.node_ad.active=!1,this.lab_getAll.string="\u4e00\u952e\u9886\u53d6",this.getAllBtnState=3):(this.node_ad.active=!0,this.lab_getAll.string="\u70b9\u51fb\u9886\u53d6",this.getAllBtnState=2):(this.getAllBtnState=0,this.btn_getAll.active=!1)},a.prototype.getItemRewardCall=function(e,a){var t=this,o=null,n=null,i=null;e==u.pzaGamePropEnum.EQUIP_BELT?(i=new u.pzaRewardPropData(e,null,a),o=a):e==u.pzaGamePropEnum.PROP_PLANTE?(n=a,i=new u.pzaRewardPropData(e,a)):i=new u.pzaRewardPropData(e,a),n||o?(h.pzaRewardManager.recieveRewards([i],function(){t.refreshGetAllState()},!1,null,!1),n&&this.showNewPlantView(n),o&&this.showNewBelt(o)):h.pzaRewardManager.recieveRewards([i],function(){t.refreshGetAllState()})},a.prototype.clickGetExp=function(){var e=this;m.pzaSoundManager.playSFX(),d.pzaLocalData.data.battlePassLv>=60?z.pzaTipManager.showHomeTip("\u6218\u4ee4\u7b49\u7ea7\u5df2\u6ee1",null,1):y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.BATTLEPASSTASK_VIEW,function(a){a&&a.getComponent(M.default).bindData(function(){e.refreshUI(),e.allItems.forEach(function(e){e.refreshUI()}),e.refreshGetAllState()})})},a.prototype.clickGetAll=function(){var e=this;this.allRewards=[],1==this.getAllBtnState?(this.allItems.forEach(function(a){if(1==d.pzaLocalData.data.bpNormalRewards[""+a.idx]){a.clickAllReward(!1);var t;t=a.normalRewardType==u.pzaGamePropEnum.EQUIP_BELT?new u.pzaRewardPropData(a.normalRewardType,null,a.normalRewardCount):new u.pzaRewardPropData(a.normalRewardType,a.normalRewardCount),e.allRewards.push(t)}}),this.getRewards(),this.refreshGetAllState()):2==this.getAllBtnState?this.getHighReward():3==this.getAllBtnState&&(this.allItems.forEach(function(a){if(1==d.pzaLocalData.data.bpHighRewards[""+a.idx]){a.clickAllReward(!0);var t;t=a.highRewardType==u.pzaGamePropEnum.EQUIP_BELT?new u.pzaRewardPropData(a.highRewardType,null,a.highRewardCount):new u.pzaRewardPropData(a.highRewardType,a.highRewardCount),e.allRewards.push(t)}}),this.getRewards(),this.refreshGetAllState())},a.prototype.getNormalReward=function(){var e=this;f.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:3}),this.allItems.forEach(function(a){if(1==d.pzaLocalData.data.bpNormalRewards[""+a.idx]){a.clickAllReward(!1);var t;t=a.normalRewardType==u.pzaGamePropEnum.EQUIP_BELT?new u.pzaRewardPropData(a.normalRewardType,null,a.normalRewardCount):new u.pzaRewardPropData(a.normalRewardType,a.normalRewardCount),e.allRewards.push(t)}}),this.getRewards(),this.refreshGetAllState(),this.allItems.forEach(function(e){e.refreshUI()})},a.prototype.getHighReward=function(){var e=this;f.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:4}),P.pzaChannel.instance().showVideo({sucCall:function(){var a,t;d.pzaLocalData.data.bpHighAdsCnt++,d.pzaLocalData.addDirty("bpHighAdsCnt"),e.refreshUI(),d.pzaLocalData.data.bpHighAdsCnt>=e.highGetsNeedsAds&&e.hideAllAdFlag();try{for(var o=r(e.allItems),n=o.next();!n.done;n=o.next()){var i=n.value;if(1==d.pzaLocalData.data.bpHighRewards[""+i.idx]){i.clickAllReward(!0);var p;p=i.highRewardType==u.pzaGamePropEnum.EQUIP_BELT?new u.pzaRewardPropData(i.highRewardType,null,i.highRewardCount):new u.pzaRewardPropData(i.highRewardType,i.highRewardCount),e.allRewards.push(p);break}}}catch(l){a={error:l}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}e.getRewards(),e.refreshGetAllState(),e.allItems.forEach(function(e){e.refreshUI()})},failCall:function(){},endCall:function(){},posName:"\u6218\u4ee4\u70b9\u51fb\u4e00\u952e\u9886\u53d6"})},a.prototype.getRewards=function(){var e=this;if(this.allRewards.length>0){var a=this.allRewards.splice(0,18),t=null,o=null;a.forEach(function(e){e.propType==u.pzaGamePropEnum.PROP_PLANTE&&(t=e.propCount),e.propType==u.pzaGamePropEnum.EQUIP_BELT&&(o=e.targetID)}),h.pzaRewardManager.recieveRewards(a,function(){t&&e.showNewPlantView(t),o&&e.showNewBelt(o),e.getRewards()})}},a.prototype.showNewPlantView=function(e){y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(E.pzaNewPlantView)).showView(p.pzaDropType.PLANT_CARD,e,!1)})},a.prototype.showNewBelt=function(){s.pzaBeltEquipConfig.getBeltEquip(s.pzaBeltEquipEnum.DianWang),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.REFRESH_BELTVIEW,null)},a.prototype.countDown=function(){(new Date).getDay();var e=C.default.getRemainingSeconds();if(e>0){var a=C.default.format(e);this.lab_resetTime.string="\u6218\u4ee4\u91cd\u7f6e\u65f6\u95f4:"+l.pzaGameState.bpResetLeftDay+"\u5929"+a}},a.prototype.onDisable=function(){v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.BATTLE_PASS_HIGHRWD,this.getHighReward,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.BATTLE_PASS_NORMALRWD,this.getNormalReward,this),this.btn_close.off(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_getExp.off(cc.Node.EventType.TOUCH_END,this.clickGetExp,this),this.btn_getAll.off(cc.Node.EventType.TOUCH_END,this.clickGetAll,this)},a.prototype.close=function(){c.pzaGameCommonPool.returnInstant(this.node)},i([A({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],a.prototype,"btn_close",void 0),i([A({displayName:"\u83b7\u53d6\u7ecf\u9a8c\u6309\u94ae",type:cc.Node})],a.prototype,"btn_getExp",void 0),i([A({displayName:"\u4e00\u952e\u9886\u53d6",type:cc.Node})],a.prototype,"btn_getAll",void 0),i([A({displayName:"\u7b49\u7ea7lab",type:cc.Label})],a.prototype,"lab_lv",void 0),i([A({displayName:"\u5f53\u524d\u7ecf\u9a8c\u503c",type:cc.Label})],a.prototype,"lab_exp",void 0),i([A({displayName:"\u8fdb\u5ea6\u6761",type:cc.ProgressBar})],a.prototype,"pro_expPro",void 0),i([A({displayName:"item\u5bb9\u5668",type:cc.Node})],a.prototype,"node_content",void 0),i([A({displayName:"item",type:cc.Prefab})],a.prototype,"pre_item",void 0),i([A({displayName:"\u5e7f\u544a\u83b7\u53d6\u9ad8\u7ea7\u5956\u52b1",type:cc.Label})],a.prototype,"lab_highReward",void 0),i([A({displayName:"\u6218\u4ee4\u91cd\u7f6e\u65f6\u95f4",type:cc.Label})],a.prototype,"lab_resetTime",void 0),i([A({displayName:"\u5e7f\u544a\u6807\u8bc6",type:cc.Node})],a.prototype,"node_ad",void 0),i([A({displayName:"\u4e00\u952e\u9886\u53d6lab",type:cc.Label})],a.prototype,"lab_getAll",void 0),i([A({displayName:"\u5956\u52b1\u63d0\u793a\u56fe",type:cc.Node})],a.prototype,"node_rewardTip",void 0),i([A({displayName:"55\u7ea7\u5956\u52b1\u63d0\u793a\u56fe",type:cc.Node})],a.prototype,"node_highRewardTip",void 0),i([A(cc.ScrollView)],a.prototype,"scrollView",void 0),i([T],a)}(cc.Component);t.default=B,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/pzaGameState":"pzaGameState","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBattlePassItem":"pzaBattlePassItem","./pzaBattlePassMgr":"pzaBattlePassMgr","./pzaBattlePassTaskView":"pzaBattlePassTaskView"}],pzaBattlePropView:[function(e,a,t){"use strict";cc._RF.push(a,"7119a5Olx9MbpF1Iusq6ePQ","pzaBattlePropView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattlePropView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameManager"),l=e("../../Common/pzaGamePropConfig"),s=e("../../Common/pzaLocalData"),c=e("../../Common/pzaOperationMgr"),u=e("../../Common/pzaSoundManager"),d=e("../../Common/pzaSpineController"),h=e("../../Common/pzaStatisticsMgr"),m=e("../../Common/pzaWorldEventManager"),f=e("../../utils/pzaChannel"),z=e("../pzaBubbleItem"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.freeSunNode=null,a.autoPickNode=null,a.clearCDNode=null,a.cherryBombNode=null,a.propCount=[],a.adIcon=[],a.cutDown=null,a.ani=[],a.autoPickAdIcon=null,a.adShareBtnFrames=[],a.refreshInterval=0,a.aniChangeInterval=0,a.isForceAd=!1,a.bombAni_1="3ui_1",a.bombAni_2="3ui_idle3",a}return n(a,e),a.prototype.onEnable=function(){this.showAllProp(),this.cutDown.node.active=!1,this.refreshInterval=0,this.aniChangeInterval=0,this.isForceAd=p.pzaGameManager.getCurrentGame().toolButtonUseTimes>0,this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),f.pzaChannel.isConfRemote&&(this.clearCDNode.active=!0,this.clearCDNode.y=-150),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.USE_GAME_PROP,this.useGameProp,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.SHOW_BUBBLE_ARROW,this.useCherryTips,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.LACK_SUN,this.useSunTips,this)},a.prototype.onDisable=function(){m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.USE_GAME_PROP,this.useGameProp,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.SHOW_BUBBLE_ARROW,this.useCherryTips,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.LACK_SUN,this.useSunTips,this)},a.prototype.useSunTips=function(){c.pzaOperationMgr.showSunTipsBubble(this.freeSunNode,"\u80fd\u91cf\u4e0d\u8db3\uff0c\u7528\u5b83\u8bd5\u8bd5")},a.prototype.useCherryTips=function(){c.pzaOperationMgr.showTips(this.cherryBombNode,0,0,"\u5371\u9669\uff01\u5feb\u7528\u8fd9\u4e2a\uff01",z.pzaBubbleType.cherry)},a.prototype.refreshProp=function(e){if(this.isForceAd)return this.propCount[e-1].node.active=!1,void(this.adIcon[e-1].active=!0);if(e==l.pzaGamePropEnum.PROP_AUTO_PICK&&r.pzaGameState.autoPickLeft>0)return this.adIcon[e-1].active=!1,this.propCount[e-1].node.active=!1,this.cutDown.node.active=!0,void this.refreshCutDown();var a=s.pzaLocalData.getPropCount(e);a>0?(this.propCount[e-1].node.active=!0,this.propCount[e-1].string=""+a,this.adIcon[e-1].active=!1):(this.propCount[e-1].node.active=!1,this.adIcon[e-1].active=!0,e==l.pzaGamePropEnum.PROP_AUTO_PICK&&(s.pzaLocalData.maxShareRwdCount>0&&s.pzaLocalData.data.autoPickShareCount<s.pzaLocalData.maxShareRwdCount?this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[1]:this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[0]))},a.prototype.update=function(e){if(!(r.pzaGameState.gamePause||(this.aniChangeInterval+=e,this.aniChangeInterval>=10&&this.aniChange(),r.pzaGameState.autoPickLeft<=0))){if(this.refreshInterval+=e,!r.pzaGameState.autoPickLock&&(r.pzaGameState.autoPickLeft-=e,r.pzaGameState.autoPickLeft<=0))return this.cutDown.node.active=!1,this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),s.pzaLocalData.data.autoPickLeft=0,void s.pzaLocalData.addDirty("autoPickLeft");this.refreshInterval>=.5&&(this.refreshInterval=0,this.refreshCutDown())}},a.prototype.clickClearCD=function(){var e=this,a=p.pzaGameManager.getCurrentGame();f.pzaChannel.instance().showVideo({sucCall:function(){window.pzaplantManager.clearAllCD(),s.pzaLocalData.bpUseProp(),a.toolButtonUseTimes<=0||(a.toolButtonLeftArr[2]--,a.toolButtonLeftArr[2]<=0&&(e.clearCDNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){},endCall:function(){e.resumeGame()},posName:"\u6e05cd"})},a.prototype.clickFreeSun=function(){var e=this,a=p.pzaGameManager.getCurrentGame();if(s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_FREE_SUN)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_FREE_SUN),window.pzaplantManager.adCreateSun(),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),s.pzaLocalData.hasUseProp=!0,m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:z.pzaBubbleType.sun,setTime:1}),a.toolButtonUseTimes>0&&(a.toolButtonLeftArr[0]--,a.toolButtonLeftArr[0]<=0&&(this.freeSunNode.active=!1)),s.pzaLocalData.bpUseProp();else{this.pauseGame();var t=function(){m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:z.pzaBubbleType.sun,setTime:5})};f.pzaChannel.instance().showVideo({sucCall:function(){u.pzaSoundManager.playAudio("getSun"),window.pzaplantManager.adCreateSun(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:z.pzaBubbleType.sun,setTime:1}),s.pzaLocalData.bpUseProp(),a.toolButtonUseTimes<=0||(a.toolButtonLeftArr[0]--,a.toolButtonLeftArr[0]<=0&&(e.freeSunNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){return t},endCall:function(){e.resumeGame()},posName:"\u5c40\u5185\u989d\u5916\u80fd\u91cf",adsid:"5"})}},a.prototype.clickAutoPick=function(){var e=this;if(console.log("pzaGameState.autoPickLeft ",r.pzaGameState.autoPickLeft),!(r.pzaGameState.autoPickLeft>0)){var a=p.pzaGameManager.getCurrentGame();if(s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_AUTO_PICK)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_AUTO_PICK),r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),s.pzaLocalData.bpUseProp(),setTimeout(function(){m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.AUTO_PICK,null)},500),s.pzaLocalData.hasUseProp=!0,a.toolButtonUseTimes>0&&(a.toolButtonLeftArr[1]--,a.toolButtonLeftArr[1]<=0&&(this.autoPickNode.active=!1));else{var t=function(){r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),e.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),s.pzaLocalData.bpUseProp(),setTimeout(function(){m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.AUTO_PICK,null)},500),a.toolButtonUseTimes<=0||(a.toolButtonLeftArr[1]--,a.toolButtonLeftArr[1]<=0&&(e.autoPickNode.active=!1),s.pzaLocalData.hasUseProp=!0)};if("ks"!=f.pzaChannel.instance().channel&&s.pzaLocalData.maxShareRwdCount>0&&s.pzaLocalData.data.autoPickShareCount<s.pzaLocalData.maxShareRwdCount)return void f.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"4"},function(){e.resumeGame(),s.pzaLocalData.data.autoPickShareCount++,s.pzaLocalData.addDirty("autoPickShareCount"),t(),h.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:4},{name:"ShareR",value:1})},function(){h.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:4},{name:"ShareR",value:0})});this.pauseGame(),f.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){e.resumeGame()},posName:"\u81ea\u52a8\u62fe\u53d6",adsid:"4"})}}},a.prototype.clickCherryBomb=function(){var e=this,a=p.pzaGameManager.getCurrentGame();if(s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_CHERRY_BOMB)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),a.createAdBomb(),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),s.pzaLocalData.hasUseProp=!0,a.toolButtonUseTimes>0&&(a.toolButtonLeftArr[3]--,a.toolButtonLeftArr[3]<=0&&(this.cherryBombNode.active=!1)),s.pzaLocalData.bpUseProp();else{this.pauseGame();var t=function(){m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:z.pzaBubbleType.cherry,setTime:5})};f.pzaChannel.instance().showVideo({sucCall:function(){a.createAdBomb(),s.pzaLocalData.bpUseProp(),a.toolButtonUseTimes<=0||(a.toolButtonLeftArr[3]--,a.toolButtonLeftArr[3]<=0&&(e.cherryBombNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){return t},endCall:function(){e.resumeGame()},posName:"\u5c40\u5185\u65e0\u53cc\u9f99",adsid:"3"})}},a.prototype.aniChange=function(){this.aniChangeInterval=0},a.prototype.useGameProp=function(e){e==l.pzaGamePropEnum.PROP_AUTO_PICK?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_AUTO_PICK),r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.AUTO_PICK,null)):e==l.pzaGamePropEnum.PROP_FREE_SUN?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_FREE_SUN),window.pzaplantManager.adCreateSun(),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:z.pzaBubbleType.sun,setTime:1})):e==l.pzaGamePropEnum.PROP_CHERRY_BOMB&&(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),window.pzaplantManager.createAdCherry(),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:z.pzaBubbleType.cherry,setTime:1}))},a.prototype.pauseSelf=function(){},a.prototype.resumeSelf=function(){this.refreshPropCnt()},a.prototype.refreshCutDown=function(){this.cutDown.string=this.getTimeCutDownString(r.pzaGameState.autoPickLeft)},a.prototype.getTimeCutDownString=function(e){if(null==e||e<=0)return"00 : 00";var a=Math.floor(e/60),t=Math.floor(e-60*a);return(a>=10?a+"":"0"+a)+" : "+(t>=10?t+"":"0"+t)},a.prototype.hideAllProp=function(){this.freeSunNode.active=!1,this.cherryBombNode.active=!1,this.autoPickNode.active=!1,this.clearCDNode.active=!1},a.prototype.showAllProp=function(){p.pzaGameManager.getCurrentGame().showBattlePropButtons(this)},a.prototype.showFreeSun=function(){this.freeSunNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN)},a.prototype.showCherryBomb=function(){this.cherryBombNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB)},a.prototype.showAutoPick=function(){this.autoPickNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},a.prototype.refreshPropCnt=function(){this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},a.prototype.pauseGame=function(){"hw"!=f.pzaChannel.instance().channel&&(r.pzaGameState.gamePause=!0,m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_PAUSE,null))},a.prototype.resumeGame=function(){r.pzaGameState.gamePause=!1,m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_RESUME,null)},i([v({displayName:"\u514d\u8d39\u9633\u5149",type:cc.Node})],a.prototype,"freeSunNode",void 0),i([v({displayName:"\u81ea\u52a8\u62fe\u53d6",type:cc.Node})],a.prototype,"autoPickNode",void 0),i([v({displayName:"\u6e05CD",type:cc.Node})],a.prototype,"clearCDNode",void 0),i([v({displayName:"\u6a31\u6843\u6e05\u5c4f",type:cc.Node})],a.prototype,"cherryBombNode",void 0),i([v({displayName:"\u9053\u5177\u6570\u91cf",type:[cc.Label]})],a.prototype,"propCount",void 0),i([v({displayName:"\u5e7f\u544a\u56fe\u6807",type:[cc.Node]})],a.prototype,"adIcon",void 0),i([v({displayName:"\u81ea\u52a8\u62fe\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],a.prototype,"cutDown",void 0),i([v({displayName:"\u52a8\u753b",type:[d.pzaSpineController]})],a.prototype,"ani",void 0),i([v({displayName:"\u81ea\u52a8\u62fe\u53d6\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],a.prototype,"autoPickAdIcon",void 0),i([v({displayName:"\u5e7f\u544a\u5206\u4eab\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],a.prototype,"adShareBtnFrames",void 0),i([g],a)}(cc.Component);t.pzaBattlePropView=b,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel","../pzaBubbleItem":"pzaBubbleItem"}],pzaBattleUpView:[function(e,a,t){"use strict";cc._RF.push(a,"62cb1l/69BGA7XnrfIYDdqK","pzaBattleUpView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBattleUpView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameManager"),l=e("../../Common/pzaLocalData"),s=e("../../Common/pzaNodeManager"),c=e("../../Common/pzaUtil"),u=e("../../Common/pzaWorldEventManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.coinShowNode=null,a.coinUINode=null,a.coinLabel=null,a.partLabel=null,a.partProNode=null,a.partProgress=null,a.zombieHeadNode=null,a.gameStartBtn=null,a.partFlags=[],a.proLabel=null,a.flagCountLb=null,a.partDataView=null,a.gameTimeTxt=null,a.gamingTimer=null,a.maxWave=0,a.coinShowTime=0,a.lastShowCoinCount=null,a}var t;return n(a,e),t=a,Object.defineProperty(a,"getInstance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),a.prototype.onLoad=function(){t.instance=this;var e=this.coinUINode.convertToWorldSpaceAR(cc.v2()),a=s.pzaNodeManager.getUpEffectNode();if(null!=a){var o=a.convertToNodeSpaceAR(e);r.pzaGameState.coinMoveUIPos=cc.v2(o.x,o.y)}},a.prototype.onEnable=function(){this.gameStartBtn.y=-450,this.gameStartBtn.active=!1,p.pzaGameManager.getCurrentGame().initPartProcess(this),this.showCoinNode(),this.lastShowCoinCount=null,this.refrshCoinCount(),this.partDataView.opacity=0,this.partDataView.active=!0,u.pzaWorldEventManager.addListener(u.pzaWorldEventType.UPDATE_PART_PRO,this.updatePartPro,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.SELECT_CARD,this.gameStartBtnAni,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.DISSELECT_CARD,this.gameStartBtnUPAni,this)},a.prototype.onDisable=function(){u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.UPDATE_PART_PRO,this.updatePartPro,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.SELECT_CARD,this.gameStartBtnAni,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.DISSELECT_CARD,this.gameStartBtnUPAni,this),this.gamingTimer&&(this.gameTimeTxt.string=""),clearInterval(this.gamingTimer)},a.prototype.update=function(e){this.coinShowTime+=e,this.coinShowTime>=3&&(this.coinShowNode.active=!1),this.refrshCoinCount(),r.pzaGameState.gamePause||this.refreshBossPartPro()},a.prototype.showCoinNode=function(){var e=this.coinUINode.convertToWorldSpaceAR(cc.v2()),a=s.pzaNodeManager.getUpEffectNode();if(null!=a){var t=a.convertToNodeSpaceAR(e);r.pzaGameState.coinMoveUIPos=cc.v2(t.x,t.y)}this.coinShowNode.active=!0,this.coinShowTime=0},a.prototype.refrshCoinCount=function(){this.lastShowCoinCount!=l.pzaLocalData.data.coin&&(this.lastShowCoinCount=l.pzaLocalData.data.coin,this.coinLabel.string=c.pzaUtil.getCurrencyStr(this.lastShowCoinCount))},a.prototype.refreshBossPartPro=function(){if(r.pzaGameState.gameMode==r.pzaGameMode.ZOM_BOSS||r.pzaGameState.isMiniMode()&&(3==r.pzaGameState.curPart||4==r.pzaGameState.curPart)){this.partProNode.active=!0,this.zombieHeadNode.active=!1;var e=window.pzazombieManager.drZomBoss;if(null!=e&&null!=e.baseData){var a=1-e.baseData.hp/e.baseData.maxHp;this.partProgress.fillRange=-a}}},a.prototype.updatePartPro=function(){p.pzaGameManager.getCurrentGame().updatePartProcess(this)},a.prototype.gameStartBtnUPAni=function(){this.gameStartBtn.active&&(this.gameStartBtn.stopAllActions(),this.gameStartBtn.runAction(cc.moveTo(.5,0,-300).easing(cc.easeBackInOut())))},a.prototype.gameStartBtnAni=function(){if(this.gameStartBtn.active){var e;e=null==r.pzaGameState.selectCard?-300:-450,this.gameStartBtn.stopAllActions(),this.gameStartBtn.runAction(cc.moveTo(.5,0,e).easing(cc.easeBackInOut()))}},a.prototype.clickGameStart=function(){this.gameStartBtn.active=!1},a.instance=null,i([m({displayName:"\u91d1\u5e01\u663e\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"coinShowNode",void 0),i([m({displayName:"\u91d1\u5e01UI\u4f4d\u7f6e",type:cc.Node})],a.prototype,"coinUINode",void 0),i([m({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],a.prototype,"coinLabel",void 0),i([m({displayName:"\u5173\u5361\u663e\u793a",type:cc.Label})],a.prototype,"partLabel",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],a.prototype,"partProNode",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u6761",type:cc.Sprite})],a.prototype,"partProgress",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u50f5\u5c38\u5934",type:cc.Node})],a.prototype,"zombieHeadNode",void 0),i([m({displayName:"\u70b9\u51fb\u5f00\u59cb\u6309\u94ae",type:cc.Node})],a.prototype,"gameStartBtn",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u65d7\u5e1c",type:[cc.Node]})],a.prototype,"partFlags",void 0),i([m({displayName:"\u8fdb\u5ea6\u6587\u5b57",type:cc.Label})],a.prototype,"proLabel",void 0),i([m({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],a.prototype,"flagCountLb",void 0),i([m({type:cc.Node})],a.prototype,"partDataView",void 0),t=i([h],a)}(cc.Component);t.pzaBattleUpView=f,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBeltBianShenView:[function(e,a,t){"use strict";cc._RF.push(a,"c52ebfJTElAWJ3cUSyTONwJ","pzaBeltBianShenView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltBianShenView=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spinesControll=[],a}return n(a,e),a.prototype.bindData=function(e,a){var t=this;switch(this.endCall=a,r.pzaSoundManager.stopBgm(),e){case 1:r.pzaSoundManager.playAudio("beltdianwangbgm");break;case 2:r.pzaSoundManager.playAudio("beltwuqibgm");break;case 3:r.pzaSoundManager.playAudio("beltshuangqibgm")}e<=this.spinesControll.length?(this.spinesControll[e-1].node.active=!0,console.error("\u52a8\u753b\u65f6\u957f: ",this.spinesControll[e-1].getAnimationDuration("bianshen"),e-1),this.spinesControll[e-1].playAnimation("bianshen",!1,function(){t.endCall&&t.endCall(),t.close()})):(this.endCall&&this.endCall(),this.close())},a.prototype.close=function(){r.pzaSoundManager.playBgm(r.pzaBGMName.LOADING),this.node.destroy()},i([c({displayName:"\u8170\u5e26\u53d8\u8eab\u52a8\u753b\u7ec4",type:[p.pzaSpineController]})],a.prototype,"spinesControll",void 0),i([s],a)}(cc.Component);t.pzaBeltBianShenView=u,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController"}],pzaBeltCard:[function(e,a,t){"use strict";cc._RF.push(a,"8cfbd1YdzlOzJ7ggalAXv4I","pzaBeltCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltCard=void 0;var r=e("../../Battle/Data/pzaPlantEnum"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameConfig"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaSpriteFrameManager"),d=e("../../Common/pzaWorldEventManager"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.selectTag=null,a.icon=null,a.professorSP=null,a.cardBoard=null,a.plantType=null,a.clickCall=null,a.hasSelect=!1,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this)},a.prototype.bindData=function(e,a){this.plantType=e,this.clickCall=a,this.selectTag.active=!1,this.hasSelect=!1,this.setPlantCardSP(e)},a.prototype.setPlantCardSP=function(e){if(e==r.pzaPlantEnum.WALL_NUT_BOWLING||e==r.pzaPlantEnum.BOOM_NUT_BOWLING||e==r.pzaPlantEnum.TALL_NUT_BOWLING)return u.pzaSpriteFrameManager.loadPlantCard(e,this.icon),void(this.professorSP.node.active=!1);var a=s.pzaGameConfig.getPlantConfig(e);if(!a)return this.professorSP.node.active=!1,void console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",e);this.professorSP.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(e,this.icon),u.pzaSpriteFrameManager.loadPlantProfess(a.profession,this.professorSP),u.pzaSpriteFrameManager.loadPlantCardSlotFrame(this.cardBoard,e,e==r.pzaPlantEnum.IMITATER)},a.prototype.clickCard=function(){var e=this.hasSelect;this.clickCall&&this.clickCall(),e?(p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null):this.select()},a.prototype.select=function(){p.pzaGameState.selectCard=p.pzaSelectCardType.BELT_CARD,p.pzaGameState.selectPlant=this.plantType,p.pzaGameState.cobCannon=null,this.hasSelect=!0,this.selectTag.active=!0,c.pzaSoundManager.playAudio("selectPlant"),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.SELECT_CARD,null)},a.prototype.diselect=function(){this.hasSelect&&(this.hasSelect=!1,this.selectTag.active=!1)},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"selectTag",void 0),i([f({displayName:"icon",type:cc.Sprite})],a.prototype,"icon",void 0),i([f({type:cc.Sprite})],a.prototype,"professorSP",void 0),i([f({type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([m],a)}(cc.Component);t.pzaBeltCard=z,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBeltConfig:[function(e,a,t){"use strict";cc._RF.push(a,"c1564gSGttOob7xInXAhlOo","pzaBeltConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltConfig=void 0;var o=e("../Battle/Data/pzaPlantEnum"),n=e("../Battle/pzaGameState"),i=e("./pzaGameManager"),r=e("./pzaGameMiniGame"),p=function(){function e(){}return e.initMiniPlants=function(e){this.miniPlantCards=[];var a=i.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,r.pzaGameMiniGame);this.miniPlantCards=a.getBeltPlantArr(e),this.miniPlantWeights=[],this.miniPlantWeights=a.getBeltPlantWeightArr(e),this.miniInter=[3,3],5!=n.pzaGameState.curPart&&6!=n.pzaGameState.curPart||(this.miniInter=[])},e.initMiniSmallPlants=function(){this.miniInitCards=[],this.miniPlantCards=[],this.miniPlantWeights=[],this.miniPlantCards=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB],this.miniPlantWeights=[25,15,25,35],this.miniInter=[]},e.getBeltPlants=function(e,a){if(n.pzaGameState.isMiniMode())return Array.from(this.miniPlantCards);if(1==e||6==e){if(5==a)return Array.from(this.BeltPlant15);if(10==a)return Array.from(this.BeltPlant110)}if((2==e||7==e)&&10==a)return Array.from(this.BeltPlant210);if(3==e||8==e){if(5==a)return Array.from(this.BeltPlant35);if(10==a)return Array.from(this.BeltPlant310)}if((4==e||9==e)&&10==a)return Array.from(this.BeltPlant410);if(5==e||10==e){if(5==a)return Array.from(this.BeltPlant55);if(10==a)return Array.from(this.BeltPlant510)}return 100==e&&1==a?Array.from(this.BeltPlant100):null},e.getBeltPlantsWeight=function(e,a){if(n.pzaGameState.isMiniMode())return Array.from(this.miniPlantWeights);if(1==e||6==e){if(5==a)return Array.from(this.BeltPlantWeight15);if(10==a)return Array.from(this.BeltPlantWeight110)}if((2==e||7==e)&&10==a)return Array.from(this.BeltPlantWeight210);if(3==e||8==e){if(5==a)return Array.from(this.BeltPlantWeight35);if(10==a)return Array.from(this.BeltPlantWeight310)}if((4==e||9==e)&&10==a)return Array.from(this.BeltPlantWeight410);if(5==e||10==e){if(5==a)return Array.from(this.BeltPlantWeight55);if(10==a)return Array.from(this.BeltPlantWeight510)}return 100==e&&1==a?Array.from(this.BeltPlantWeight100):null},e.firstGraveBusterWeight=function(e,a,t){return a>=t?0:e},e.firstLilypadWeight=function(e,a){var t=3==n.pzaGameState.mapId?36:18;return Math.max(1,Math.floor((1-e)*a/t+e+.5))},e.firstPotWeight=function(e,a){return Math.max(1,Math.floor((1-e)*a/35+e+.5))},e.firstCabbageMelonWeight=function(e,a){return a>5?e:a>=3?3:2},e.firstKernelWeight=function(e,a){return a>5?e:1},e.sencondWeight=function(e,a,t,o){return 0==e||a<=2?e:t>=4?1:3==t?5:o?e/2:e},e.getInitCard=function(e,a,t){var o;return 5!=a&&10!=a||10!=t?n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode==n.pzaGameMode.MINIGAME_SMALL?null:(o=i.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,r.pzaGameMiniGame).getInitPlantArr(t))[e]?o[e]:null:null:(o=[33,21,33,15])[e]},e.getFirstCardInterval=function(e,a){if(1==e||6==e){if(5==a)return.01;if(10==a)return 2}if((2==e||7==e)&&10==a)return 2;if(3==e||8==e){if(5==a)return 2;if(10==a)return 2}if((4==e||9==e)&&10==a)return 2;if(5==e||10==e){if(5==a)return 2;if(10==a)return 10}return 2},e.getNextCardInterval=function(e,a,t){if(n.pzaGameState.isMiniMode()&&this.miniInter.length>0)return this.miniInter.shift();var o=1;5!=e&&10!=e||10!=a||(o=.875),n.pzaGameState.isMiniMode()&&(o=!n.pzaGameState.isMiniMode()||5!=n.pzaGameState.curPart&&6!=n.pzaGameState.curPart?.875:1,n.pzaGameState.gameMode==n.pzaGameMode.MINIGAME_SMALL&&(o=1));var i=4;return t<=4?(i=4,5!=e&&10!=e||10!=a||(i=3.5),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=3.5:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=4:9==n.pzaGameState.curPart?(o=1,i=4):o=3.5)):t<=6?(i=4.25,5!=e&&10!=e||10!=a||(i=3.71),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=3.71:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=4.25:o=9==n.pzaGameState.curPart?4.25:3.71)):t<=8?(i=5,5!=e&&10!=e||10!=a||(i=4.37),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=4.37:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=5:9==n.pzaGameState.curPart?i=5:o=4.37)):(i=10,5!=e&&10!=e||10!=a||(i=8.75),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=8.75:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=10:9==n.pzaGameState.curPart?i=10:o=8.75)),o*i},e.BeltPlant15=[o.pzaPlantEnum.WALL_NUT_BOWLING,o.pzaPlantEnum.BOOM_NUT_BOWLING],e.BeltPlantWeight15=[85,15],e.BeltPlant110=[o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.REPEATER,o.pzaPlantEnum.SNOW_PEA,o.pzaPlantEnum.CHOMPER,o.pzaPlantEnum.POTATO_MINE],e.BeltPlantWeight110=[20,20,15,10,10,5,20],e.BeltPlant210=[o.pzaPlantEnum.GRAVE_BUSTER,o.pzaPlantEnum.ICE_SHROOM,o.pzaPlantEnum.DOOM_SHROOM,o.pzaPlantEnum.HYPNO_SHROOM,o.pzaPlantEnum.SCAREDY_SHROOM,o.pzaPlantEnum.FUME_SHROOM,o.pzaPlantEnum.PUFF_SHROOM],e.BeltPlantWeight210=[20,15,15,10,15,15,10],e.BeltPlant35=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB],e.BeltPlantWeight35=[25,15,25,35],e.BeltPlant310=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.SQUASH,o.pzaPlantEnum.THREE_PEATER,o.pzaPlantEnum.TANGLE_KELP,o.pzaPlantEnum.JALAPENO,o.pzaPlantEnum.SPIKEWEED,o.pzaPlantEnum.TORCHWOOD,o.pzaPlantEnum.TALL_NUT],e.BeltPlantWeight310=[25,5,25,5,10,10,10,10],e.BeltPlant410=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.SEA_SHROOM,o.pzaPlantEnum.MAGNET_SHROOM,o.pzaPlantEnum.BLOVER,o.pzaPlantEnum.CACTUS,o.pzaPlantEnum.STAR_FRUIT,o.pzaPlantEnum.SPLIT_PEA,o.pzaPlantEnum.PUMPKIN],e.BeltPlantWeight410=[25,10,5,5,15,25,5,10],e.BeltPlant55=[o.pzaPlantEnum.FLOWER_POT,o.pzaPlantEnum.CHOMPER,o.pzaPlantEnum.PUMPKIN,o.pzaPlantEnum.CHERRY_BOMB],e.BeltPlantWeight55=[50,25,15,10],e.BeltPlant510=[o.pzaPlantEnum.FLOWER_POT,o.pzaPlantEnum.MELON_PULT,o.pzaPlantEnum.JALAPENO,o.pzaPlantEnum.CABBAGE_PULT,o.pzaPlantEnum.KERNEL_PULT,o.pzaPlantEnum.ICE_SHROOM],e.BeltPlantWeight510=[55,10,12,10,5,8],e.BeltPlant100=[o.pzaPlantEnum.Gene_SnowPea],e.BeltPlantWeight100=[0],e.miniInitCards=[],e.miniPlantCards=[],e.miniPlantWeights=[],e.InitCardInterval=1.6,e.miniInter=[3,5],e}();t.pzaBeltConfig=p,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame"}],pzaBeltEquipConfig:[function(e,a,t){"use strict";cc._RF.push(a,"465d7/DoJlGMLRfxXDRdStN","pzaBeltEquipConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltEquipConfig=t.pzaBeltGetType=t.pzaBeltEquipState=t.pzaBeltEquipEnum=void 0;var o,n,i,r=e("../Battle/pzaGameState"),p=e("../Load/pzaPreLoadManager"),l=e("../View/Battle/pzaNewBeltView"),s=e("./pzaGamePropConfig"),c=e("./pzaLocalData"),u=e("./pzaRewardManager"),d=e("./pzaUIManager");(function(e){e[e.null=0]="null",e[e.DianWang=1]="DianWang",e[e.WuQi=2]="WuQi",e[e.ShuangQi=3]="ShuangQi",e[e.HeiQi=4]="HeiQi",e[e.TianDi=5]="TianDi"})(o=t.pzaBeltEquipEnum||(t.pzaBeltEquipEnum={})),function(e){e[e.lock=0]="lock",e[e.waiting=1]="waiting",e[e.not_equiped=2]="not_equiped",e[e.equiped=3]="equiped"}(n=t.pzaBeltEquipState||(t.pzaBeltEquipState={})),function(e){e[e.shop=0]="shop",e[e.battlePass=1]="battlePass",e[e.activity=2]="activity"}(i=t.pzaBeltGetType||(t.pzaBeltGetType={}));var h=function(){function e(e,a,t,o,n,r,p){this.getType=i.shop,this.id=e,this.name=a,this.growth=t,this.desc=r,this.getType=o,this.getTips=n,this.price=p}return e.initConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a&&0!=a.id){var o=new e(a.id,a.name,a.growth,a.getType,a.getTip,a.desc,a.price);t.configMap.set(a.id,o)}})},e.getConfig=function(){return this.configMap},e.getBeltEquip=function(e,a,t){if(void 0===a&&(a=!0),void 0===t&&(t=!0),c.pzaLocalData.data.beltEquipData.hasEquipList[e]&&c.pzaLocalData.data.beltEquipData.hasEquipList[e]!=n.lock){var o=this.getConfig().get(e);u.pzaRewardManager.recieveRewards([new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_COIN,o.price)],function(){})}else c.pzaLocalData.data.beltEquipData.hasEquipList[e]=n.not_equiped,c.pzaLocalData.addDirty("beltEquipData"),a&&u.pzaRewardManager.recieveRewards([new s.pzaRewardPropData(s.pzaGamePropEnum.EQUIP_BELT,null,e)],function(){},!1,null,!1),t&&d.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.NEW_BELT_VIEW,function(a){(a&&a.getComponent(l.pzaNewBeltView)).bindData(e,function(){})})},e.hasBeltEquip=function(e){return!(!c.pzaLocalData.data.beltEquipData.hasEquipList[e]||c.pzaLocalData.data.beltEquipData.hasEquipList[e]==n.lock)},e.getGrowthValue=function(e){return this.getConfig().get(e).growth},e.addBeltEffect=function(e){e==o.ShuangQi&&(r.pzaGameState.pirceReduce=this.getGrowthValue(e))},e.delBeltEffect=function(e){e==o.ShuangQi&&(r.pzaGameState.pirceReduce=0)},e.checkBeltBuff=function(){var e=c.pzaLocalData.data.beltEquipData.hasEquipList;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var t=e[a];a&&t==n.equiped&&this.addBeltEffect(parseInt(a))}},e.configMap=new Map,e}();t.pzaBeltEquipConfig=h,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewBeltView":"pzaNewBeltView","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaRewardManager":"pzaRewardManager","./pzaUIManager":"pzaUIManager"}],pzaBeltEquipItem:[function(e,a,t){"use strict";cc._RF.push(a,"34a5eKP2FxIi7lwIF74fLxG","pzaBeltEquipItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltEquipItem=void 0;var r=e("../../Common/pzaBeltEquipConfig"),p=e("../../Common/pzaLocalData"),l=e("../../Common/pzaSpriteFrameManager"),s=e("../../Common/pzaUtil"),c=e("../../utils/pzaChannel"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.unlockBtn=null,a.getBtn=null,a.equipBtn=null,a.nameLB=null,a.descLB=null,a.getTipsLB=null,a.iconSP=null,a.id=null,a.view=null,a.idx=0,a.tips="",a.beltName="",a.beltDesc="",a}return n(a,e),a.prototype.init=function(e,a,t,o,n,i){this.view=e,this.id=a,this.nameLB.string=t,this.getTipsLB.string=o,this.descLB.string=n,this.getBtn.active=c.pzaChannel.isConfRemote,this.idx=i,this.tips=o,this.beltName=t,this.beltDesc=n,this.nameLB.string="",this.getTipsLB.string="",this.descLB.string="",this.getBtn.active=!1,this.setView(),l.pzaSpriteFrameManager.loadBeltCard("beltbig_"+this.id,this.iconSP)},a.prototype.unEquipped=function(){p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.not_equiped,this.setView()},a.prototype.getCurState=function(){return p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]},a.prototype.changeIconGray=function(e){s.pzaUtil.switchGraySprite(this.iconSP,e)},a.prototype.getIdx=function(){return this.idx},a.prototype.setView=function(){this.node.active=!0,this.equipBtn.active=!1,this.unlockBtn.active=!1,this.getTipsLB.node.active=!1,this.descLB.node.active=!1,p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]?p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]==r.pzaBeltEquipState.waiting?this.changeIconGray(!1):p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]==r.pzaBeltEquipState.not_equiped?this.changeIconGray(!1):p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]==r.pzaBeltEquipState.equiped&&this.changeIconGray(!1):(p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.lock,this.changeIconGray(!0))},a.prototype.clickInstallBtn=function(){this.view.installEquip(this)&&(p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.equiped,r.pzaBeltEquipConfig.addBeltEffect(this.id)),this.setView()},a.prototype.clickUnlockBtn=function(){p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.not_equiped,this.setView()},a.prototype.clickGetBtn=function(){r.pzaBeltEquipConfig.getBeltEquip(this.id),this.view.refreshView()},i([h(cc.Node)],a.prototype,"unlockBtn",void 0),i([h(cc.Node)],a.prototype,"getBtn",void 0),i([h(cc.Node)],a.prototype,"equipBtn",void 0),i([h(cc.Label)],a.prototype,"nameLB",void 0),i([h(cc.Label)],a.prototype,"descLB",void 0),i([h(cc.Label)],a.prototype,"getTipsLB",void 0),i([h(cc.Sprite)],a.prototype,"iconSP",void 0),i([d],a)}(cc.Component);t.pzaBeltEquipItem=m,cc._RF.pop()},{"../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUtil":"pzaUtil","../../utils/pzaChannel":"pzaChannel"}],pzaBeltEquipView:[function(e,a,t){"use strict";cc._RF.push(a,"92755lsKU5L85Nkcyog26bU","pzaBeltEquipView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},p=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltEquipView=void 0;var l=e("../../Battle/Data/pzaGuideType"),s=e("../../Common/pzaBeltEquipConfig"),c=e("../../Common/pzaBeltSlotConfig"),u=e("../../Common/pzaGlobalMask"),d=e("../../Common/pzaLocalData"),h=e("../../Common/pzaOperationMgr"),m=e("../../Common/pzaSoundManager"),f=e("../../Common/pzaStatisticsMgr"),z=e("../../Common/pzaTipManager"),y=e("../../Common/pzaUIManager"),g=e("../../Common/pzaUtil"),v=e("../../Common/pzaWorldEventManager"),b=e("../../Load/pzaPreLoadManager"),P=e("../../Shop/pzaShopConfig"),C=e("../../utils/pzaChannel"),E=e("../../utils/pzakc"),S=e("../pzaBubbleItem"),_=e("../pzaBuyConfirmView"),D=(e("../pzaShopView"),e("../pzaWarningView")),M=e("./pzaBeltBianShenView"),w=e("./pzaBeltEquipItem"),T=e("./pzaBeltSlotItem"),A=cc._decorator,B=A.ccclass,G=A.property,I=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equipItemPre=null,a.slotItemPre=null,a.overViewPre=null,a.slotList_Parent=null,a.equipList_Parent=null,a.btn_next=null,a.btn_pre=null,a.scrollView=null,a.pre_belt=null,a.btn_active=null,a.lab_btnBottom=null,a.lab_getDesc=null,a.node_hasEquip=null,a.btn_equip=null,a.btn_bianshen=null,a.lab_equipName=null,a.lab_equipDesc=null,a.node_rightRed=null,a.node_leftRed=null,a.btn_goto=null,a.spris_goto=null,a.btnState=0,a.movePos=[cc.v2(20,0),cc.v2(380,0),cc.v2(740,0),cc.v2(1090,0),cc.v2(1470,0)],a.idx=0,a.selectEquipItem=null,a.slotMap=new Map,a.equipMap=new Map,a.gap=0,a.beltSlotCnt=3,a.unlockSlotCnt=0,a}return n(a,e),a.prototype.onEnable=function(){v.pzaWorldEventManager.addListener(v.pzaWorldEventType.REFRESH_BELTVIEW,this.refreshView,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.BELTEQUIP_GUIDE_START,this.guideStart,this),this.btn_next.on(cc.Node.EventType.TOUCH_END,this.clickNext,this),this.btn_pre.on(cc.Node.EventType.TOUCH_END,this.clickPre,this),this.btn_active.on(cc.Node.EventType.TOUCH_END,this.clickActive,this),this.btn_equip.on(cc.Node.EventType.TOUCH_END,this.clickEquip,this),this.btn_bianshen.on(cc.Node.EventType.TOUCH_END,this.clickBianShen,this),this.btn_goto.on(cc.Node.EventType.TOUCH_END,this.clickGoTo,this),this.refreshSlotState(),this.init(),this.scrollView.scrollToOffset(cc.v2(20,0),0),m.pzaSoundManager.loadAudio("beltdianwangbgm"),m.pzaSoundManager.loadAudio("beltwuqibgm"),m.pzaSoundManager.loadAudio("beltshuangqibgm"),this.initArrowState(),this.checkGuide(),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:4})},a.prototype.onDisable=function(){v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.REFRESH_BELTVIEW,this.refreshView,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.BELTEQUIP_GUIDE_START,this.guideStart,this),this.btn_next.off(cc.Node.EventType.TOUCH_END,this.clickNext,this),this.btn_pre.off(cc.Node.EventType.TOUCH_END,this.clickPre,this),this.btn_active.off(cc.Node.EventType.TOUCH_END,this.clickActive,this),this.btn_equip.off(cc.Node.EventType.TOUCH_END,this.clickEquip,this),this.btn_bianshen.off(cc.Node.EventType.TOUCH_END,this.clickBianShen,this),this.btn_goto.off(cc.Node.EventType.TOUCH_END,this.clickGoTo,this)},a.prototype.guideStart=function(){this.btn_equip.opacity=255,this.node.getChildByName("equipDesc").opacity=255,u.pzaGlobalMask.showOperaArea(this.btn_equip,0,0)},a.prototype.checkGuide=function(){d.pzaLocalData.data.curGuideType==l.pzaGuideType.RIDER_BELTEQUIP_GUIDE&&(window.pzaGuideManager.guideType=d.pzaLocalData.data.curGuideType,window.pzaGuideManager.guideShow(),this.btn_equip.opacity=0,this.node.getChildByName("equipDesc").opacity=0)},a.prototype.clickNext=function(){this.idx++,this.idx>=this.equipMap.size-1&&(this.idx=this.equipMap.size-1),this.scrollView.scrollToOffset(this.movePos[this.idx],.2),this.refreshEquipItem(),this.refreshArrowState()},a.prototype.clickPre=function(){this.idx--,this.idx<=0&&(this.idx=0),this.scrollView.scrollToOffset(this.movePos[this.idx],.2),this.refreshEquipItem(),this.refreshArrowState()},a.prototype.initArrowState=function(){g.pzaUtil.switchGraySprite(this.btn_next.getComponent(cc.Sprite),!1),g.pzaUtil.switchGraySprite(this.btn_pre.getComponent(cc.Sprite),!0)},a.prototype.refreshArrowState=function(){this.idx>=this.equipMap.size-1?(g.pzaUtil.switchGraySprite(this.btn_next.getComponent(cc.Sprite),!0),g.pzaUtil.switchGraySprite(this.btn_pre.getComponent(cc.Sprite),!1)):this.idx<=0?(g.pzaUtil.switchGraySprite(this.btn_next.getComponent(cc.Sprite),!1),g.pzaUtil.switchGraySprite(this.btn_pre.getComponent(cc.Sprite),!0)):(g.pzaUtil.switchGraySprite(this.btn_next.getComponent(cc.Sprite),!1),g.pzaUtil.switchGraySprite(this.btn_pre.getComponent(cc.Sprite),!1))},a.prototype.clickActive=function(){this.btnState==s.pzaBeltEquipState.waiting&&(this.selectEquipItem.clickUnlockBtn(),this.refreshEquipItem())},a.prototype.clickEquip=function(){var e=this;window.pzaGuideManager.guideType==l.pzaGuideType.RIDER_BELTEQUIP_GUIDE&&u.pzaGlobalMask.hideMask(),this.btnState==s.pzaBeltEquipState.not_equiped&&y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.Belt_BianShen_View,function(a){var t=a&&a.getComponent(M.pzaBeltBianShenView);t&&t.bindData(e.selectEquipItem.id,function(){if(e.selectEquipItem.clickInstallBtn(),e.refreshEquipItem(),window.pzaGuideManager.guideType==l.pzaGuideType.RIDER_BELTEQUIP_GUIDE){window.pzaGuideManager.guideStepNext();var a=e.node.getChildByName("btn_close");h.pzaOperationMgr.showTips(a,60,0,null,S.pzaBubbleType.tips,3e4,null,3e4)}})})},a.prototype.clickBianShen=function(){var e=this;y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.Belt_BianShen_View,function(a){var t=a&&a.getComponent(M.pzaBeltBianShenView);t&&t.bindData(e.selectEquipItem.id)})},a.prototype.clickGoTo=function(){if(!d.pzaLocalData.disablePostFn)switch(s.pzaBeltEquipConfig.getConfig().get(this.selectEquipItem.id).getType){case s.pzaBeltGetType.shop:this.showShopView(!1);break;case s.pzaBeltGetType.battlePass:h.pzaOperationMgr.showBattlePass();break;case s.pzaBeltGetType.activity:this.clickLoginReward()}},a.prototype.refreshSlotState=function(e){var a,t;void 0===e&&(e=!1),this.unlockSlotCnt=0,this.slotList_Parent.getComponent(cc.Layout).spacingX=230;try{for(var o=r(Object.keys(d.pzaLocalData.data.beltSlotData.slotStateList)),n=o.next();!n.done;n=o.next()){var i=n.value;d.pzaLocalData.data.beltSlotData.slotStateList[i]>=1&&this.unlockSlotCnt++}}catch(p){a={error:p}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}this.unlockSlotCnt=this.unlockSlotCnt<=0?1:this.unlockSlotCnt,1==this.unlockSlotCnt||2==this.unlockSlotCnt||this.unlockSlotCnt,e&&this.slotMap.get(this.unlockSlotCnt)&&this.slotMap.get(this.unlockSlotCnt).setNodeActive(!0)},a.prototype.init=function(){for(var e=this,a=0;a<this.beltSlotCnt;a++){var t=cc.instantiate(this.slotItemPre);t.setParent(this.slotList_Parent);var o=t.getComponent(T.pzaBeltSlotItem);o.init(this,a),this.slotMap.set(a,o),a<=this.unlockSlotCnt?o.setNodeActive(!0):o.setNodeActive(!1)}cc.instantiate(this.pre_belt).setParent(this.equipList_Parent);var n=s.pzaBeltEquipConfig.getConfig(),i=0;n.forEach(function(a,t){var o=cc.instantiate(e.equipItemPre);o.setParent(e.equipList_Parent);var n=o.getComponent(w.pzaBeltEquipItem);n.init(e,a.id,a.name,a.getTips,a.desc,i),i++,e.equipMap.set(t,n)}),cc.instantiate(this.pre_belt).setParent(this.equipList_Parent),this.equipListSort(),this.slotListSort(),this.refreshEquipItem()},a.prototype.refreshEquipItem=function(){var e,a,t=!1,o=!1;try{for(var n=r(this.equipMap),i=n.next();!i.done;i=n.next()){var l=p(i.value,2),c=(l[0],l[1]);if(c.getIdx()==this.idx){this.selectEquipItem=c;var u=c.getCurState();this.btnState=u,this.changeByEquipState(u,c)}c.getIdx()<this.idx&&0==t&&(u=c.getCurState())==s.pzaBeltEquipState.waiting&&(t=!0),c.getIdx()>this.idx&&0==o&&(u=c.getCurState())==s.pzaBeltEquipState.waiting&&(o=!0)}}catch(d){e={error:d}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}this.node_leftRed.active=t,this.node_rightRed.active=o},a.prototype.changeByEquipState=function(e,a){this.lab_getDesc.node.active=!1,this.btn_goto.active=!1,this.lab_equipName.string=a.beltName,this.lab_equipDesc.string=a.beltDesc,this.btn_active.active=!1,this.node_hasEquip.active=!1,this.btn_bianshen.active=!1,this.btn_equip.active=!1,e==s.pzaBeltEquipState.lock?(this.btn_active.active=!1,this.lab_getDesc.node.active=!0,this.btn_goto.active=!0,this.lab_getDesc.string=a.tips+"  ",3==a.id&&-1==d.pzaLocalData.beltPieceType?this.btn_goto.getComponent(cc.Sprite).spriteFrame=null:this.btn_goto.getComponent(cc.Sprite).spriteFrame=this.spris_goto):e==s.pzaBeltEquipState.waiting?this.btn_active.active=!0:e==s.pzaBeltEquipState.equiped?this.node_hasEquip.active=!0:e==s.pzaBeltEquipState.not_equiped&&(this.btn_equip.active=!0)},a.prototype.equipListSort=function(){},a.prototype.refreshView=function(){var e,a,t,o;try{for(var n=r(this.slotMap),i=n.next();!i.done;i=n.next()){var l=p(i.value,2);l[0],l[1].setView()}}catch(d){e={error:d}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}try{for(var s=r(this.equipMap),c=s.next();!c.done;c=s.next()){var u=p(c.value,2);u[0],u[1].setView()}}catch(h){t={error:h}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}this.equipListSort(),this.slotListSort(),this.refreshEquipItem()},a.prototype.slotListSort=function(){var e,a;try{for(var t=r(this.slotMap),o=t.next();!o.done;o=t.next()){var n=p(o.value,2),i=n[0],l=n[1],s=c.pzaBeltSlotConfig.slotIsUnlock(i);l.node.zIndex=s?l.hasEquipBelt()?0+i:1e3+i:2e3+i}}catch(u){e={error:u}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.checkUnlockSlot=function(){var e,a;try{for(var t=r(this.slotMap),o=t.next();!o.done;o=t.next()){var n=p(o.value,2),i=(n[0],n[1]);if(i.isAbleUnlock()){i.clickUnlockBtn();break}}}catch(l){e={error:l}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}z.pzaTipManager.showHomeTip("\u88c5\u5907\u69fd\u4f4d\u5df2\u6ee1",null,2)},a.prototype.installEquip=function(e){var a,t;try{for(var o=r(this.slotMap),n=o.next();!n.done;n=o.next()){var i=p(n.value,2);if(i[0],i[1].isAbleInstall(e.id))return this.equipListSort(),!0}}catch(l){a={error:l}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return this.checkUnlockSlot(),this.equipListSort(),!1},a.prototype.removeEquip=function(e){this.equipMap.get(e).unEquipped(),this.equipListSort()},a.prototype.showShopView=function(e){var a=this;if(void 0===e&&(e=!0),d.pzaLocalData.data.unlockShop)if(e){var t=P.pzaShopItemType.BELT_SLOT1;1==d.pzaLocalData.data.beltSlotData.slotStateList[1]&&(t=P.pzaShopItemType.BELT_SLOT2),y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.BUY_CONFIRM_VIEW,function(e){var o=e&&e.getComponent(_.pzaBuyConfirmView);o&&o.bindData(t,null,function(){a.refreshSlotState(!0)})})}else{var o=P.pzaShopItemType.WITCH_KNIGHT_BELT;y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.BUY_CONFIRM_VIEW,function(e){var t=e&&e.getComponent(_.pzaBuyConfirmView);t&&t.bindData(o,null,function(){a.refreshEquipItem()})})}else y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(D.pzaWarningView);a&&a.show("\u5192\u9669\u6a21\u5f0f\u901a\u51733-4\u89e3\u9501\u5546\u5e97\u540e\u53ef\u8d2d\u4e70\u8170\u5e26\u4ee5\u53ca\u69fd\u4f4d","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},a.prototype.showVideoView=function(e){var a=this,t=function(){var o=c.pzaBeltSlotConfig.getConfig().get(e),n=c.pzaBeltSlotConfig.getSlotRequstProgress(e),i=o.compete;y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(o){var r=o&&o.getComponent(D.pzaWarningView);r&&r.show("\u76ee\u524d\u8fdb\u5ea6"+n+"/"+i,"\u786e\u5b9a","\u53d6\u6d88",function(){C.pzaChannel.instance().showVideo({sucCall:function(){c.pzaBeltSlotConfig.setSlotRequstProgress(e,n+1),n+1>=i?(c.pzaBeltSlotConfig.slotUnlock(e),a.slotListSort()):t(),a.slotMap.get(e).setView()},failCall:function(){},endCall:function(){},posName:"\u89e3\u9501\u8170\u5e26\u88c5\u5907\u69fd"})},null,"\u89c2\u770b\u89c6\u9891\u89e3\u9501\u8170\u5e26\u88c5\u5907\u69fd",!0)})};t()},a.prototype.clickLoginReward=function(){d.pzaLocalData.disablePostFn||-1!=d.pzaLocalData.beltPieceType&&999!=d.pzaLocalData.beltPieceType&&h.pzaOperationMgr.showLoginActivity()},a.prototype.clickOverViewBtn=function(){cc.instantiate(this.overViewPre).setParent(this.node)},a.prototype.clickCloseBtn=function(){window.pzaGuideManager.guideType==l.pzaGuideType.RIDER_BELTEQUIP_GUIDE&&(window.pzaGuideManager.guideStep=0,window.pzaGuideManager.guideType=null,d.pzaLocalData.data.curGuideType=null,d.pzaLocalData.addDirty("curGuideType"),h.pzaOperationMgr.hideTips(),y.pzaUIManager.baseShowBoardUI(b.pzaResourceUrl.HOME_SELECT_VIEW,null),z.pzaTipManager.hideHomeTip(),E.default.newPlayerJudgeDay()),d.pzaLocalData.addDirty("beltEquipData","beltSlotData"),this.node.destroy()},i([G({type:cc.Prefab})],a.prototype,"equipItemPre",void 0),i([G({type:cc.Prefab})],a.prototype,"slotItemPre",void 0),i([G({type:cc.Prefab})],a.prototype,"overViewPre",void 0),i([G({type:cc.Node})],a.prototype,"slotList_Parent",void 0),i([G({type:cc.Node})],a.prototype,"equipList_Parent",void 0),i([G({displayName:"\u4e0b\u4e00\u4e2a\u6309\u94ae",type:cc.Node})],a.prototype,"btn_next",void 0),i([G({displayName:"\u4e0a\u4e00\u4e2a\u6309\u94ae",type:cc.Node})],a.prototype,"btn_pre",void 0),i([G({displayName:"\u6eda\u52a8\u5bb9\u5668",type:cc.ScrollView})],a.prototype,"scrollView",void 0),i([G({displayName:"\u8170\u5e26\u5360\u4f4d\u9884\u8bbe",type:cc.Prefab})],a.prototype,"pre_belt",void 0),i([G({displayName:"\u6fc0\u6d3b\u6309\u94ae",type:cc.Node})],a.prototype,"btn_active",void 0),i([G({displayName:"\u5e95\u90e8\u6309\u94ae\u6587\u5b57",type:cc.Label})],a.prototype,"lab_btnBottom",void 0),i([G({displayName:"\u88c5\u5907\u83b7\u53d6\u63cf\u8ff0",type:cc.Label})],a.prototype,"lab_getDesc",void 0),i([G({displayName:"\u5df2\u7ecf\u88c5\u5907\u6309\u94ae",type:cc.Node})],a.prototype,"node_hasEquip",void 0),i([G({displayName:"\u88c5\u5907\u6309\u94ae",type:cc.Node})],a.prototype,"btn_equip",void 0),i([G({displayName:"\u53d8\u8eab\u6309\u94ae",type:cc.Node})],a.prototype,"btn_bianshen",void 0),i([G({displayName:"\u88c5\u5907\u540d\u5b57",type:cc.Label})],a.prototype,"lab_equipName",void 0),i([G({displayName:"\u88c5\u5907\u4ecb\u7ecd",type:cc.Label})],a.prototype,"lab_equipDesc",void 0),i([G({displayName:"\u53f3\u4fa7\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"node_rightRed",void 0),i([G({displayName:"\u5de6\u4fa7\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"node_leftRed",void 0),i([G({displayName:"\u8df3\u8f6c\u5230\u83b7\u53d6\u754c\u9762ui",type:cc.Node})],a.prototype,"btn_goto",void 0),i([G({displayName:"\u8df3\u8f6c\u6309\u94ae\u7cbe\u7075\u56fe",type:cc.SpriteFrame})],a.prototype,"spris_goto",void 0),i([B],a)}(cc.Component);t.pzaBeltEquipView=I,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaBeltSlotConfig":"pzaBeltSlotConfig","../../Common/pzaGlobalMask":"pzaGlobalMask","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../Shop/pzaShopConfig":"pzaShopConfig","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaBubbleItem":"pzaBubbleItem","../pzaBuyConfirmView":"pzaBuyConfirmView","../pzaShopView":"pzaShopView","../pzaWarningView":"pzaWarningView","./pzaBeltBianShenView":"pzaBeltBianShenView","./pzaBeltEquipItem":"pzaBeltEquipItem","./pzaBeltSlotItem":"pzaBeltSlotItem"}],pzaBeltHeroActivityMgr:[function(e,a,t){"use strict";cc._RF.push(a,"dc7dezKyTFFH4xIYi+tjdCJ","pzaBeltHeroActivityMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.activityRewardConf=t.allRewardConf=void 0;var n=e("../Common/pzaLocalData"),i=cc._decorator,r=i.ccclass,p=(i.property,function(){function e(){this.allRewardMap=new Map,this.activityRewardMap=new Map}var a;return a=e,e.instance=function(){return a._me||(a._me=new a),a._me},e.prototype.initAllReward=function(e){if(!n.pzaLocalData.disablePostFn)for(var a=0;a<e.length;a++){var t=new l(e[a]);this.allRewardMap.set(t.id,t)}},e.prototype.initActivityReward=function(e){if(!n.pzaLocalData.disablePostFn)for(var a=0;a<e.length;a++){var t=new s(e[a]);this.activityRewardMap.set(t.id,t)}},e._me=null,a=o([r],e)}());t.default=p;var l=function(e){this.id=0,this.name="",this.activityRewardId=0,this.id=e.id,this.name=e.name,this.activityRewardId=e.activityRewardId||0};t.allRewardConf=l;var s=function(e){this.id=0,this.plantid=0,this.type=0,this.name="",this.name2="",this.id=e.id,this.plantid=e.plantid,this.type=e.type,this.name=e.name||"",this.name2=e.name2||""};t.activityRewardConf=s,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData"}],pzaBeltOverView:[function(e,a,t){"use strict";cc._RF.push(a,"03c3euE4/pMIbliQ6UPOp4+","pzaBeltOverView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltOverView=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaBeltEquipConfig"),l=e("../../Common/pzaLocalData"),s=e("../../Common/pzaSpriteFrameManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.content=null,a.ovItemPre=null,a}return n(a,e),a.prototype.onEnable=function(){this.init()},a.prototype.init=function(){var e=this;l.pzaLocalData.data.beltEquipData.slotList.forEach(function(a){e.setItem(a)})},a.prototype.setItem=function(e){if(e!=p.pzaBeltEquipEnum.null){var a=cc.instantiate(this.ovItemPre);a.setParent(this.content);var t=p.pzaBeltEquipConfig.getConfig().get(e),o=a.getChildByName("name").getComponent(cc.Label),n=a.getChildByName("desc").getComponent(cc.Label),i=a.getChildByName("icon").getComponent(cc.Sprite);s.pzaSpriteFrameManager.loadBeltCard("belt_"+e,i),o.string=t.name,n.string=t.desc}},a.prototype.clickCloseBtn=function(){this.close()},i([d({type:cc.Node})],a.prototype,"content",void 0),i([d(cc.Node)],a.prototype,"ovItemPre",void 0),i([u],a)}(r.pzaBaseComponent);t.pzaBeltOverView=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaBeltSlotConfig:[function(e,a,t){"use strict";cc._RF.push(a,"72fca8QuvpMyJ6iAc8l2//k","pzaBeltSlotConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltSlotConfig=t.pzaBeltSlot_RequestType=void 0;var o,n=e("./pzaLocalData");(function(e){e[e.default=-1]="default",e[e.shop=0]="shop",e[e.video=1]="video",e[e.unable=2]="unable"})(o=t.pzaBeltSlot_RequestType||(t.pzaBeltSlot_RequestType={}));var i=function(){function e(e,a,t,o){this.id=e,this.unlockType=a,this.compete=t,this.unlockTips=o}return e.initConfig=function(a){var t=this;null!=a&&(a.forEach(function(a){if(null!=a){var o=new e(a.id,a.unlockType,a.compete,a.unlockTips);t.configMap.set(a.id,o)}}),n.pzaLocalData.beltSlotCount=this.configMap.size)},e.getConfig=function(){return this.configMap},e.getSlotRequstProgress=function(e){return n.pzaLocalData.data.beltSlotData.slotProgressList[e]||0},e.setSlotRequstProgress=function(e,a){n.pzaLocalData.data.beltSlotData.slotProgressList[e]=a,n.pzaLocalData.addDirty("beltSlotData")},e.slotIsUnlock=function(e){return 1==n.pzaLocalData.data.beltSlotData.slotStateList[e]},e.slotUnlock=function(e){n.pzaLocalData.data.beltSlotData.slotStateList[e]=1,n.pzaLocalData.addDirty("slotStateList")},e.getSlotRequstType=function(e){return this.getConfig().get(e).unlockType},e.isAbleSlotUnlock=function(e){var a=this.getConfig().get(e),t=this.getSlotRequstProgress(e),n=a.compete;switch(a.unlockType){case o.video:case o.shop:return t>=n;case o.unable:return!1;case o.default:default:return!0}},e.configMap=new Map,e}();t.pzaBeltSlotConfig=i,cc._RF.pop()},{"./pzaLocalData":"pzaLocalData"}],pzaBeltSlotItem:[function(e,a,t){"use strict";cc._RF.push(a,"b0210tmhi9Jm7nSxVX7kHiS","pzaBeltSlotItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBeltSlotItem=void 0;var r=e("../../Common/pzaBeltEquipConfig"),p=e("../../Common/pzaBeltSlotConfig"),l=e("../../Common/pzaLocalData"),s=e("../../Common/pzaSpriteFrameManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.iconSP=null,a.nameLB=null,a.descLB=null,a.unlockTipsLB=null,a.removeBtn=null,a.lock=null,a.node_mask=null,a.slotID=null,a.curEquipID=r.pzaBeltEquipEnum.null,a.view=null,a}return n(a,e),a.prototype.init=function(e,a){if(this.view=e,this.slotID=a,null==l.pzaLocalData.data.beltEquipData.slotList[this.slotID]&&(l.pzaLocalData.data.beltEquipData.slotList[this.slotID]=r.pzaBeltEquipEnum.null),this.curEquipID=l.pzaLocalData.data.beltEquipData.slotList[this.slotID],!l.pzaLocalData.data.beltSlotData.slotStateList[this.slotID]){var t=p.pzaBeltSlotConfig.isAbleSlotUnlock(this.slotID)?1:0;l.pzaLocalData.data.beltSlotData.slotStateList[this.slotID]=t}this.setView()},a.prototype.isAbleInstall=function(e){return 1==l.pzaLocalData.data.beltSlotData.slotStateList[this.slotID]&&this.curEquipID==r.pzaBeltEquipEnum.null&&(this.setNewEquip(e),!0)},a.prototype.isAbleUnlock=function(){var e=p.pzaBeltSlotConfig.getConfig().get(this.slotID);return 0==l.pzaLocalData.data.beltSlotData.slotStateList[this.slotID]&&e.unlockType!=p.pzaBeltSlot_RequestType.default&&e.unlockType!=p.pzaBeltSlot_RequestType.unable},a.prototype.setNewEquip=function(e){this.curEquipID=e,l.pzaLocalData.data.beltEquipData.slotList[this.slotID]=e,console.log("slotList :",l.pzaLocalData.data.beltEquipData.slotList),this.setView()},a.prototype.setNodeActive=function(e){this.unlockTipsLB.node.parent.active=e},a.prototype.setView=function(){if(this.nameLB.node.active=!1,this.descLB.node.active=!1,this.removeBtn.active=!1,this.lock.active=!1,this.iconSP.spriteFrame=null,this.hasEquipBelt())r.pzaBeltEquipConfig.getConfig().get(this.curEquipID),s.pzaSpriteFrameManager.loadBeltCard("belt_"+this.curEquipID,this.iconSP),this.removeBtn.active=!0,this.node_mask.active=!1;else{if(0==l.pzaLocalData.data.beltSlotData.slotStateList[this.slotID]){var e=p.pzaBeltSlotConfig.getConfig().get(this.slotID);this.lock.active=!0;var a=p.pzaBeltSlotConfig.getSlotRequstProgress(this.slotID),t=e.compete,o=p.pzaBeltSlotConfig.getSlotRequstType(this.slotID)==p.pzaBeltSlot_RequestType.video?"("+a+"/"+t+")":"";this.unlockTipsLB.string=e.unlockTips+o}this.node_mask.active=!0}},a.prototype.hasEquipBelt=function(){return this.curEquipID!=r.pzaBeltEquipEnum.null},a.prototype.clickRemoveBtn=function(){this.view.removeEquip(this.curEquipID),this.curEquipID=r.pzaBeltEquipEnum.null,l.pzaLocalData.data.beltEquipData.slotList[this.slotID]=r.pzaBeltEquipEnum.null,this.view.refreshView()},a.prototype.clickUnlockBtn=function(){var e=p.pzaBeltSlotConfig.getSlotRequstType(this.slotID);e==p.pzaBeltSlot_RequestType.shop?this.view.showShopView():e==p.pzaBeltSlot_RequestType.video&&this.view.showVideoView(this.slotID)},i([d(cc.Sprite)],a.prototype,"iconSP",void 0),i([d(cc.Label)],a.prototype,"nameLB",void 0),i([d(cc.Label)],a.prototype,"descLB",void 0),i([d(cc.Label)],a.prototype,"unlockTipsLB",void 0),i([d(cc.Node)],a.prototype,"removeBtn",void 0),i([d(cc.Node)],a.prototype,"lock",void 0),i([d({displayName:"\u8170\u5e26\u526a\u5f71",type:cc.Node})],a.prototype,"node_mask",void 0),i([u],a)}(cc.Component);t.pzaBeltSlotItem=h,cc._RF.pop()},{"../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaBeltSlotConfig":"pzaBeltSlotConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaBlover:[function(e,a,t){"use strict";cc._RF.push(a,"220957hlOBIzLEXNVfa0prp","pzaBlover");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBlover=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaWorldEventManager"),l=e("../pzaGameState"),s=e("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lifeTime=0,a.trigger=!1,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),this.lifeTime=0,this.trigger=!1,r.pzaSoundManager.playAudio("Blover"),this.animation.playAnimation("attack",!1,function(){t.animation.playAnimation("attack2",!1,function(){window.pzaplantManager.removePlant(t.baseData),t.death()})}),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1,l.pzaGameState.usePlanternBlover=!0},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.trigger||(this.lifeTime+=a,this.lifeTime>=.5&&this.attack())},a.prototype.hurt=function(a,t,o){this.trigger||this.attack(),e.prototype.hurt.call(this,a,t,o)},a.prototype.attack=function(){this.trigger=!0,window.pzaMapManager.blowFog(),p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.BLOW_WIND,null)},i([u],a)}(s.pzaBasePlant));t.pzaBlover=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaBoomFireEffect:[function(e,a,t){"use strict";cc._RF.push(a,"c78e8ZsdD9NwaSx7lFo8EFm","pzaBoomFireEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBoomFireEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a.poolPrefab=null,a.delayTime=0,a.endCall=null,a.disappering=!1,a.ani1="fire1",a.ani2="fire2",a}return n(a,e),a.prototype.showEffect=function(e,a){var t=this;this.delayTime=e,this.endCall=a,this.ani1="fire1",this.ani2="fire2",e<=0?(this.spine.node.scale=.4,this.disappering=!0,this.spine.playAnimation(this.ani2,!1,function(){t.close(),t.endCall&&t.endCall()})):(this.spine.node.scale=1,this.disappering=!1,this.spine.playAnimation(this.ani1,!0))},a.prototype.logicUpdate=function(e){var a=this;this.disappering||(this.delayTime-=e,this.delayTime<=0&&(this.disappering=!0,this.spine.playAnimation(this.ani2,!1,function(){a.close(),a.endCall&&a.endCall()})))},a.prototype.pauseSelf=function(){this.spine.pauseAnimation()},a.prototype.resumeSelf=function(){this.spine.resumeAnimation()},a.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"spine",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaBoomFireEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaBoomNut:[function(e,a,t){"use strict";cc._RF.push(a,"d4bd0hwIfBFnrY9MO37nsbS","pzaBoomNut");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBoomNut=void 0;var r=e("../../Common/pzaUtil"),p=e("../../Load/pzaPreLoadManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaPlantEnum"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=e("./pzaAttackType"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.blinkTime=8,a.originState="hurt1",a.nutStateMap=new Map([["hurt1",["idle2","idle3_body1"]],["hurt2",["idle2","idle4_body2"]],["hurt3",["idle2"]],["hurt4",["blow_body4"]]]),a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),a.plantData.cate=s.pzaPlantCate.Nut,this.originState="hurt1",this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){if(t.blinkTime>0)t.animation.playAnimation("hurt4"==t.originState?"blow_body4":"idle1",!1,o);else{t.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var e=t.nutStateMap.get(t.originState),a=r.pzaUtil.getRandomValueFromArray(e);t.animation.playAnimation(a,!1,o)}};this.animation.playAnimation("idle1",!1,o),u.pzaGameState.onlyShroomCofee=!1},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.blinkTime-=a},a.prototype.plantDying=function(){e.prototype.plantDying.call(this),this.originState="hurt4",this.animation.setAnimationSkin("body_4")},a.prototype.plantHurt2=function(){e.prototype.plantHurt2.call(this),this.originState="hurt3",this.animation.setAnimationSkin("body_3")},a.prototype.plantHurt=function(){e.prototype.plantHurt.call(this),this.originState="hurt2",this.animation.setAnimationSkin("body_2")},a.prototype.plantIntact=function(){e.prototype.plantIntact.call(this),this.originState="hurt1",this.animation.setAnimationSkin("body_1")},a.prototype.death=function(a,t){this.attack(),e.prototype.death.call(this,a,t)},a.prototype.flaserDeath=function(){this.attack(),e.prototype.death.call(this)},a.prototype.attack=function(){var e=this;c.pzaEffectManager.createFrameEffect(p.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),window.pzaMapManager.shakeMap();var a=1.5*u.pzaGameState.map.getBlockWidth(),t=null;null==(t=8==this.baseData.xIndex?window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,a):window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex))&&(t=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss),t.forEach(function(a){var t=a&&a.baseData;null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||(a&&a.hurt(e.baseData.atk,e.baseData,d.pzaAttackType.BOOM),a.baseData.isDead)}),window.pzaMapManager.LadderMap.forEach(function(t,o){r.pzaUtil.getDistance(e.baseData.logicPos,t.logicPos)>a||(t.close(),window.pzaMapManager.LadderMap.delete(o))})},i([f],a)}(h.pzaBasePlant));t.pzaBoomNut=z,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaBowlingBody:[function(e,a,t){"use strict";cc._RF.push(a,"c203by+yGpE+aE56seGo1fX","pzaBowlingBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBowlingBody=void 0;var r=e("../../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.circleBody=null,a.baseData=null,a.onCollisionCall=null,a.onCollisionExitCall=null,a}return n(a,e),a.prototype.onEnable=function(){null!=this.circleBody&&(this.circleBody.enabled=!1)},a.prototype.onDisable=function(){r.pzaCollisionManager.getInstance.delBulletOther(this)},a.prototype.bindData=function(e,a,t){this.baseData=e,this.onCollisionCall=a,this.onCollisionExitCall=t,null!=this.circleBody&&(this.circleBody.enabled=!0,r.pzaCollisionManager.getInstance.addBulletOther(this))},a.prototype.onCollisionEnter=function(e,a){this.onCollisionCall&&this.onCollisionCall(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollisionCall&&this.onCollisionCall(e,a)},a.prototype.getCollider=function(){var e=this;return this.node&&this.node.isValid?(this.circleBody.poSource=function(){return{x:e.node.parent.parent.x,y:e.node.parent.parent.y+60}},this.circleBody):null},a.prototype.onCollisionExit=function(e,a){this.onCollisionExitCall&&this.onCollisionExitCall(e,a)},i([s({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.CircleCollider})],a.prototype,"circleBody",void 0),i([l],a)}(cc.Component);t.pzaBowlingBody=c,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaBowlingNut:[function(e,a,t){"use strict";cc._RF.push(a,"7d18elgHKdBmKcYojTvpfSZ","pzaBowlingNut");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBowlingNut=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaBaseComponent"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaSpineController"),d=e("../../Load/pzaPreLoadManager"),h=e("../Data/pzaBuffData"),m=e("../Data/pzaZombieEnum"),f=e("../Zombie/pzaZombieBody"),z=e("../pzaEffectManager"),y=e("../pzaGameState"),g=e("./pzaAttackType"),v=e("./pzaBowlingBody"),b=cc._decorator,P=b.ccclass,C=b.property,E=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.colliderBody=null,a.rotateNode=null,a.isBoom=!1,a.bodyBindData=!1,a.rotateSpeed=360,a.speedX=250,a.yDirection=0,a.colliderInterval=0,a.killCount=0,a.animation=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.rotateNode.angle=0,this.yDirection=0,this.bodyBindData=!1,this.colliderInterval=0,this.killCount=0,this.baseData.plantData.isChangeLine=!1;var t=10*-this.baseData.yIndex+6;this.node.zIndex=t,c.pzaSoundManager.playAudio("plantplant"),c.pzaSoundManager.playAudio("throwBowling"),!this.isBoom&&this.animation.playAnimation("ping",!0)},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.animation.pauseAnimation()},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.animation.resumeAnimation()},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.logicPos){this.colliderInterval-=e,this.baseData.logicPos.x+=this.speedX*e,this.baseData.logicPos.y+=this.speedX*e*this.yDirection;var a=y.pzaGameState.map.getMapYIndex(this.baseData.logicPos),t=y.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.yIndex!=a){this.baseData.yIndex=a;var o=10*-this.baseData.yIndex+5+this.yDirection;this.node.zIndex=o,this.baseData.plantData.isChangeLine=!0}this.baseData.xIndex!=t&&(this.baseData.xIndex=t),this.baseData.logicPos.x>=640&&this.close()}},a.prototype.logicLateUpdate=function(a){e.prototype.logicLateUpdate.call(this,a),this.bodyBindData||null==this.colliderBody||(this.bodyBindData=!0,this.colliderBody.bindData(this.baseData,this.onCollision.bind(this),this.onCollisionExit.bind(this))),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos)},a.prototype.onCollision=function(e){var a=this;if(e.node.group==s.pzaGroupEnum.WALL)return this.yDirection=e.tag-2,void this.animation.playAnimation(1==this.yDirection?"shang":"xia",!0);if(e.node.group==s.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var t=e.node.getComponent(f.pzaZombieBody);if(null==t||null==t.baseData)return;if(this.baseData.yIndex!=t.baseData.yIndex)return;if(t.baseData.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT))return;if(this.isBoom||c.pzaSoundManager.playAudio("bowlingHitNormal"),this.isBoom){c.pzaSoundManager.playAudio("bowlingHit"),c.pzaSoundManager.playAudio("cherrybomb"),z.pzaEffectManager.createEffect(d.pzaResourceUrl.NUT_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),"idle");var o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,1.5*y.pzaGameState.map.getBlockWidth());if(null==o)return;return o.forEach(function(e){e&&e.hurt(1800,a.baseData,g.pzaAttackType.BOOM)}),6==y.pzaGameState.curChapter&&5==y.pzaGameState.curPart&&window.pzaplantManager.plantMap.delete(this.baseData),void this.close()}0==t.baseData.yIndex?this.yDirection=1:4==t.baseData.yIndex?this.yDirection=-1:0==this.yDirection?this.yDirection=Math.random()>.5?1:-1:this.yDirection=-this.yDirection,this.animation.playAnimation(1==this.yDirection?"shang":"xia",!0);var n=window.pzazombieManager.getZombie(t.baseData);t.baseData.zombieData.zombieType==m.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&this.baseData.plantData.isChangeLine?n&&n.hurt(1e4,null,g.pzaAttackType.TALL_BOWLING):n&&n.hurt(1800,null,g.pzaAttackType.BOWLING),t.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=.5;var i=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=i}},a.prototype.onCollisionExit=function(){},a.prototype.close=function(){window.pzaplantManager.plantMap.delete(this.baseData),e.prototype.close.call(this)},i([C({displayName:"\u78b0\u649e\u8eab\u4f53",type:v.pzaBowlingBody})],a.prototype,"colliderBody",void 0),i([C({displayName:"\u65cb\u8f6c\u8282\u70b9",type:cc.Node})],a.prototype,"rotateNode",void 0),i([C({displayName:"\u7206\u70b8\u575a\u679c"})],a.prototype,"isBoom",void 0),i([C({type:u.pzaSpineController})],a.prototype,"animation",void 0),i([P],a)}(l.pzaBaseComponent);t.pzaBowlingNut=E,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingBody":"pzaBowlingBody"}],pzaBowlingWallBody:[function(e,a,t){"use strict";cc._RF.push(a,"75e08Ld5bJOToQucGoQZGx8","pzaBowlingWallBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBowlingBodyWall=void 0;var r=e("../../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.collider=null,a}return n(a,e),a.prototype.onDisable=function(){r.pzaCollisionManager.getInstance.delZombieOther(this)},a.prototype.onCollisionEnter=function(){},a.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.collider.poSource=this.node,this.collider):null},i([s(cc.BoxCollider)],a.prototype,"collider",void 0),i([l],a)}(cc.Component);t.pzaBowlingBodyWall=c,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaBrain:[function(e,a,t){"use strict";cc._RF.push(a,"c6d3100LY1IzLjVhS/o4FIJ","pzaBrain");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBrain=void 0;var r=e("../Common/pzaBaseComponent"),p=e("../Common/pzaCollisionManager"),l=e("../Common/pzaGameManager"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaWorldEventManager"),u=e("./Data/pzaDropType"),d=e("./Plant/pzaAttackType"),h=e("./pzaBaseBody"),m=e("./pzaEffectManager"),f=e("./pzaGameState"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.brain=null,a.body=null,a.blinkTime=0,a.blinkTween=null,a.collider=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.body.bindData(this.baseData),this.node.stopAllActions(),this.node.scale=1,this.blinkTime=0;var t=f.pzaGameState.map.getMapOriPos();if(null!=t){var o=cc.v2(t.x-26,t.y+f.pzaGameState.map.getYPos(a.yIndex)+55);this.node.setPosition(o);var n=10*-a.yIndex+1;this.node.zIndex=n,p.pzaCollisionManager.getInstance.addBrain(a.yIndex,this)}},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.logicUpdate=function(e){this.blinkTime>0&&(this.blinkTime-=e,this.blinkTime<=0&&this.blink(!0))},a.prototype.blink=function(e){var a=this;if(e)this.blinkTween&&this.blinkTween.stop(),this.brain.node.color=cc.Color.WHITE;else{if(this.blinkTime=5,null==this.blinkTween){var t=function(e,t,o,n){var i=e+(t-e)*n,r=new cc.Color(i,i,i);return a.brain&&a.brain.node?(a.brain.node.color=r,i):(a.blinkTween.stop(),i)};this.blinkTween=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:t}).to(.5,{c:255},{progress:t}))}this.blinkTween.start()}},a.prototype.hurt=function(e,a,t){if(void 0===t&&(t=null),!(this.baseData.hp<=0)&&this.baseData){if(t==d.pzaAttackType.ROLLING||t==d.pzaAttackType.BOOM||t==d.pzaAttackType.BANG)return this.baseData.hp=0,this.baseData.isDead=!0,window.pzaplantManager.brainMap.delete(this.baseData),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_PART_PRO,null),this.death(),void(t==d.pzaAttackType.BOOM?this.close():this.flaserDeath());this.baseData.hp-=e,this.baseData.hp<=0&&(this.baseData.isDead=!0,window.pzaplantManager.brainMap.delete(this.baseData),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_PART_PRO,null),this.close(),this.death())}},a.prototype.flaserDeath=function(){var e=this;s.pzaSoundManager.playAudio("chomp_plant3"),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){e.node.scale=1,e.close()})))},a.prototype.close=function(){this.blinkTween&&this.blinkTween.stop(),e.prototype.close.call(this)},a.prototype.death=function(){Math.random()<=.1?m.pzaEffectManager.createDropCoin(u.pzaDropType.GOLD_COIN,cc.v2(this.node.x,this.node.y)):m.pzaEffectManager.createDropCoin(u.pzaDropType.SILVER_COIN,cc.v2(this.node.x,this.node.y)),window.pzaplantManager.brainMap.size<=0&&l.pzaGameManager.passPart(cc.v2(0,-300))},i([g({displayName:"\u5927\u8111\u56fe",type:cc.Sprite})],a.prototype,"brain",void 0),i([g({displayName:"\u8eab\u4f53\u78b0\u649e",type:h.pzaBaseBody})],a.prototype,"body",void 0),i([y],a)}(r.pzaBaseComponent);t.pzaBrain=v,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameManager":"pzaGameManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./Data/pzaDropType":"pzaDropType","./Plant/pzaAttackType":"pzaAttackType","./pzaBaseBody":"pzaBaseBody","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaBubbleItem:[function(e,a,t){"use strict";cc._RF.push(a,"09a73NlOl5G9445DaD59hJJ","pzaBubbleItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBubbleItem=t.pzaBubbleType=void 0;var r,p=e("../Common/pzaBaseComponent"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGamePropConfig"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaOperationMgr"),d=e("../Common/pzaRewardManager"),h=e("../Common/pzaSpineController"),m=e("../Common/pzaWorldEventManager"),f=cc._decorator,z=f.ccclass,y=f.property;(function(e){e[e.speed=4]="speed",e[e.cherry=1]="cherry",e[e.sun=2]="sun",e[e.share=3]="share",e[e.tips=5]="tips"})(r=t.pzaBubbleType||(t.pzaBubbleType={}));var g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.rewardNode=null,a.tipsNode=null,a.arrowNode=null,a.rewardText=null,a.tipsText=null,a.handSpine=null,a.closeTimer=null,a.hideTime=5e3,a.propType=s.pzaGamePropEnum.PROP_COIN,a.value=500,a.type=null,a.tipTxtHideTime=99,a}return n(a,e),a.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.BACK_HOME,this.close,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GAME_OVER,this.close,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,this.setCloseTime,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GUIDE_TIPS_OPACITY,this.setOpacity,this)},a.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.BACK_HOME,this.close,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GAME_OVER,this.close,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,this.setCloseTime,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GUIDE_TIPS_OPACITY,this.setOpacity,this),this.close()},a.prototype.pauseSelf=function(){this.handSpine.pauseAnimation()},a.prototype.resumeSelf=function(){this.handSpine.resumeAnimation()},a.prototype.setOpacity=function(e){null!=e&&(this.node.opacity=e)},a.prototype.showReward=function(){this.type=r.share,this.rewardNode.active=!0,this.propType=s.pzaGamePropEnum.PROP_COIN,this.rewardText.string="+"+this.value},a.prototype.showFingerAni=function(){},a.prototype.showTips=function(){this.arrowNode.active=!0,this.tipsNode.active=!0,this.showFingerAni()},a.prototype.setCloseTime=function(e){var a=e.type,t=e.setTime,o=void 0===t?5e3:t;a&&a==this.type&&(this.hideTime=o)},a.prototype.getReward=function(){var e=new s.pzaRewardPropData(this.propType,this.value);d.pzaRewardManager.recieveRewards([e]),c.pzaLocalData.data.everyDayShareRwdCurrent++,c.pzaLocalData.addDirty("everyDayShareRwdCurrent"),this.close()},a.prototype.setTipText=function(e){e?this.tipsText.string=e:this.tipsNode.active=!1},a.prototype.close=function(){u.pzaOperationMgr.BubbleNode=null,l.pzaGameCommonPool.returnInstant(this.node)},a.prototype.logicUpdate=function(e){this&&this.type!=r.share&&this.node&&(this.hideTime-=e/cc.gameSpeed,this.hideTime<=0&&this.close(),this.tipTxtHideTime-=e/cc.gameSpeed,this.tipTxtHideTime<=0&&(this.tipsText.node.parent.active=!1))},i([y(cc.Node)],a.prototype,"rewardNode",void 0),i([y(cc.Node)],a.prototype,"tipsNode",void 0),i([y(cc.Node)],a.prototype,"arrowNode",void 0),i([y({displayName:"\u5956\u52b1\u6587\u672c",type:cc.Label})],a.prototype,"rewardText",void 0),i([y({displayName:"\u63d0\u793a\u6587\u672c",type:cc.Label})],a.prototype,"tipsText",void 0),i([y({type:h.pzaSpineController})],a.prototype,"handSpine",void 0),i([z],a)}(p.pzaBaseComponent);t.pzaBubbleItem=g,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBubbleTips:[function(e,a,t){"use strict";cc._RF.push(a,"280faUR88BP/pp4b38c4prE","pzaBubbleTips");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBubbleTips=void 0;var r=e("../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tipsText=null,a}return n(a,e),a.prototype.showTips=function(e,a){void 0===a&&(a=3),this.tipsText.string=e,this.actingTime=a},a.prototype.logicUpdate=function(e){this.actingTime>0&&(this.actingTime-=e,this.actingTime<=0&&this.close())},i([s({displayName:"\u63d0\u793a\u6587\u672c",type:cc.Label})],a.prototype,"tipsText",void 0),i([l],a)}(r.pzaBaseComponent);t.pzaBubbleTips=c,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaBucketHeadZombie:[function(e,a,t){"use strict";cc._RF.push(a,"8b2c291wzNAyKkk9KnBsDCS","pzaBucketHeadZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBucketHeadZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaZombieEnum"),s=e("./pzaNormalZombie"),c=e("./pzaZombieSlot"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=c.pzaZombieSlotType.hat_iron,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[c.pzaZombieSlotType.butter,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.butter).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[c.pzaZombieSlotType.hat_iron,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.hat_iron).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.hat_iron+"1",58.26,-31.36,-90.67)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.hat_iron+"2",58.26,-31.36,-90.67)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.hat_iron+"3",52.96,-14.3,-90.67))]])},a.prototype.zombieHurtSound=function(a){if(this.hasEquip){var t="shieldhit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(t)}else e.prototype.zombieHurtSound.call(this,a)},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([d],a)}(s.pzaNormalZombie));t.pzaBucketHeadZombie=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBuffData:[function(e,a,t){"use strict";var o;cc._RF.push(a,"7aee3sm3VRPvZxOhsmVvDxI","pzaBuffData"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBuffInfo=t.pzaBuffData=t.pzaBuffType=void 0,function(e){e[e.FROST=1]="FROST",e[e.FROZEN=2]="FROZEN",e[e.DIVE=3]="DIVE",e[e.IMM_ICE=4]="IMM_ICE",e[e.IMM_SPATTER=5]="IMM_SPATTER",e[e.HARD_BODY=6]="HARD_BODY",e[e.FLY=7]="FLY",e[e.DIZZ=8]="DIZZ",e[e.UNABLE_SELECT=9]="UNABLE_SELECT",e[e.IMMOBILIZE=10]="IMMOBILIZE",e[e.GARLIC=11]="GARLIC",e[e.SPEED_UP=12]="SPEED_UP",e[e.IMM_CONTROL=13]="IMM_CONTROL",e[e.RICOCHET=14]="RICOCHET",e[e.IMM_HYPNOSIS=15]="IMM_HYPNOSIS",e[e.INVINCIBLE=16]="INVINCIBLE",e[e.IMM_IMMOBILIZE=17]="IMM_IMMOBILIZE",e[e.FLASER=18]="FLASER",e[e.IMM_ICE_PEA=19]="IMM_ICE_PEA",e[e.FIRE=20]="FIRE",e[e.IMM_GARLIC=21]="IMM_GARLIC"}(o=t.pzaBuffType||(t.pzaBuffType={}));var n=function(){function e(){this.buffs=new Map}return e.prototype.refreshBuff=function(e){var a=this;this.buffs.forEach(function(t,o){t?null!=t.buffTime&&-1!=t.buffTime&&(t.buffTime-=e,t.buffTime<=0&&a.buffs.delete(o)):a.buffs.delete(o)})},e.prototype.addBuff=function(e,a,t,n){if(null!=e&&null!=e.buffType&&(!this.hasBuff(o.IMM_ICE)||e.buffType!=o.FROST&&e.buffType!=o.FROZEN)){var i=this.buffs.get(e.buffType);null!=i&&(a||n||t)?(a?i.addTime(e.buffTime):i.buffTime=e.buffTime,t?i.addValue(e.buffValue):i.buffValue=e.buffValue,n?i.addChane(e.buffChance):i.buffChance=e.buffChance,i.buffExcuted=!1):this.buffs.set(e.buffType,e)}},e.prototype.removeBuff=function(e){null!=e&&this.buffs.delete(e)},e.prototype.reduceBuffValue=function(e,a){if(null!=e){var t=this.buffs.get(e);if(null!=t){var o=t.buffValue;null!=o&&(0==(o-=a)?this.removeBuff(e):(t.buffValue=o,this.buffs.set(e,t)))}}},e.prototype.releaseBuff=function(e){if(null==e)return null;var a=this.buffs.get(e);return null==a?null:null!=a.buffChance?Math.random()<=a.buffChance?a:null:a},e.prototype.hasBuff=function(e){return null!=e&&null!=this.buffs.get(e)},e.prototype.getBuffChance=function(e){if(null==e)return 0;var a=this.buffs.get(e);return null==a?0:a.buffChance},e.prototype.getAllForever=function(){if(this.buffs.size<=0)return[];var e=[];return this.buffs.forEach(function(a){-1==a.buffTime&&e.push(a)}),e},e.prototype.getAllBuffs=function(){return Array.from(this.buffs.values())},e.prototype.clone=function(){var a=new e;return null!=this.buffs&&this.buffs.size>0&&this.buffs.forEach(function(e){var t=e.clone();a.addBuff(t)}),a},e.prototype.clear=function(){this.buffs.clear()},e}();t.pzaBuffData=n;var i=function(){function e(e,a,t,o,n,i){this.buffType=null,this.buffTime=null,this.buffValue=null,this.buffChance=null,this.intervalTimer=0,this.buffInterval=null,this.buffMessage=null,this.buffExcuted=!1,this.buffType=e,this.buffTime=a,this.buffValue=t,this.buffChance=o,this.buffInterval=n,this.buffMessage=i,this.buffExcuted=!1}return e.prototype.clone=function(){return new e(this.buffType,this.buffTime,this.buffValue,this.buffChance)},e.prototype.addTime=function(e){null!=e&&(null!=this.buffTime?-1!=this.buffTime&&-1!=e?this.buffTime+=e:this.buffTime=-1:this.buffTime=e)},e.prototype.addChane=function(e){null!=e&&(null!=this.buffChance?this.buffChance+=e:this.buffChance=e)},e.prototype.addValue=function(e){null!=e&&(null!=this.buffValue?this.buffValue+=e:this.buffValue=e)},e}();t.pzaBuffInfo=i,cc._RF.pop()},{}],pzaBulletAnimator:[function(e,a,t){"use strict";cc._RF.push(a,"ccfa3CpmtBPR7pZcrfJTUlj","pzaBulletAnimator");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBulletAnimator=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaNodeManager"),s=e("../Data/pzaZombieEnum"),c=e("../Effect/pzaBaseEffect"),u=e("./pzaPeaBullet"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.normalHitPre=null,a.iceHitPre=null,a.fireHitPre=null,a.normalSP=null,a.iceSP=null,a.fireSP=null,a.iceEffNode=null,a.rotateSpeed=0,a.playingBullet=null,a.ableChangeState=!0,a.state=u.pzaBulletState.normal,a}return n(a,e),a.prototype.init=function(e,a,t){void 0===a&&(a=u.pzaBulletState.normal),this.node.active=!0,t&&(this.rotateSpeed=t),this.ableChangeState=e,this.setBulletState(a)},a.prototype.setBulletState=function(e){this.ableChangeState?(this.normalSP.node.active=!1,this.iceSP.node.active=!1,this.iceEffNode.active=!1,this.fireSP.node.active=!1,e==u.pzaBulletState.normal?this.playingBullet=this.normalSP.node:e==u.pzaBulletState.ice?(this.iceEffNode.active=!0,this.playingBullet=this.iceSP.node):e==u.pzaBulletState.fire&&(this.playingBullet=this.fireSP.node),this.state=e,this.playingBullet.active=!0):this.playingBullet=this.normalSP.node},a.prototype.setBulletSpf=function(e,a,t){e&&(this.normalSP.spriteFrame=e),a&&(this.iceSP.spriteFrame=a),t&&(this.fireSP.spriteFrame=t)},a.prototype.getPlayingSP=function(){return this.playingBullet.getComponent(cc.Sprite)},a.prototype.logicUpdate=function(e){0!=this.rotateSpeed&&this.playingBullet&&(this.playingBullet.angle-=this.rotateSpeed*e)},a.prototype.showPeaHitEffect=function(e){var a=5,t=cc.v2(this.node.x,this.node.y);null!=e?(a=10*-e.yIndex+5,t=cc.v2(e.logicPos.x,e.logicPos.y+70)):t=this.node.parent.getPosition();var o=l.pzaNodeManager.getPlantZombieNode();if(null!=o){var n;if(this.state==u.pzaBulletState.normal?n=this.normalHitPre:this.state==u.pzaBulletState.ice?n=this.iceHitPre:this.state==u.pzaBulletState.fire&&(n=this.fireHitPre),null==n)return console.warn("\u7f3a\u5c11\u5bf9\u5e94\u5b50\u5f39\u9884\u5236");var i=p.pzaGameCommonPool.requestInstant2(n);i.setParent(o),i.zIndex=a,i.setPosition(t);var r=i.getComponent(c.pzaBaseEffect);r&&r.showEffect(null,null)}},a.prototype.showThrowHitEffect=function(e,a){if(null!=this.normalHitPre){var t=10*-a+5,o=cc.v2(this.node.x,this.node.y);null!=e?null==e.zombieData||e.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(t=10*-e.yIndex+5,o=cc.v2(e.logicPos.x,e.logicPos.y+70)):(t=5,o=this.node.parent.getPosition()):o=this.node.parent.getPosition();var n=l.pzaNodeManager.getPlantZombieNode();if(null!=n){var i=p.pzaGameCommonPool.requestInstant2(this.normalHitPre);i.setParent(n),i.zIndex=t,i.setPosition(o);var r=i.getComponent(c.pzaBaseEffect);r&&r.showEffect(null,null)}}},a.prototype.showShroomHitEffect=function(e,a){if(this.normalHitPre){var t=5,o=cc.v2(this.node.x,this.node.y);e?(t=10*-e.yIndex+5,o=cc.v2(e.logicPos.x,e.logicPos.y+70)):o=this.node.parent.getPosition();var n=l.pzaNodeManager.getPlantZombieNode();if(n){var i=p.pzaGameCommonPool.requestInstant2(this.normalHitPre);i.setParent(n),i.zIndex=t,a&&(o=cc.v2(e.logicPos.x,e.logicPos.y),i.scale=.6),i.setPosition(o);var r=i.getComponent(c.pzaBaseEffect);r&&r.showEffect(null,null)}}},i([m(cc.Prefab)],a.prototype,"normalHitPre",void 0),i([m(cc.Prefab)],a.prototype,"iceHitPre",void 0),i([m(cc.Prefab)],a.prototype,"fireHitPre",void 0),i([m(cc.Sprite)],a.prototype,"normalSP",void 0),i([m(cc.Sprite)],a.prototype,"iceSP",void 0),i([m(cc.Sprite)],a.prototype,"fireSP",void 0),i([m(cc.Node)],a.prototype,"iceEffNode",void 0),i([m({displayName:"\u5b50\u5f39\u81ea\u8f6c\u901f\u5ea6"})],a.prototype,"rotateSpeed",void 0),i([h],a)}(r.pzaBaseComponent);t.pzaBulletAnimator=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","./pzaPeaBullet":"pzaPeaBullet"}],pzaBulletPool:[function(e,a,t){"use strict";cc._RF.push(a,"08129opfb5H1Z0jUbb2VvxA","pzaBulletPool"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./pzakc"),n=function(){function e(){this.unuseMap=new Map,this.inuseMap=new Map,this.outPosX=2*o.default.view_x+100*o.default.randomInt(0,20),this.outPosY=-5e3,this.outPosDist=100}return e.prototype.put=function(e){return e.opacity=0,e.x=this.outPosX,this.outPosY+=this.outPosDist,e.y=this.outPosY,this.unuseMap.set(e.uuid,e),this},e.prototype.back=function(e){return e.opacity=0,this.outPosY+=this.outPosDist,this.outPosY>5e3&&(this.outPosY=-5e3),this.inuseMap.delete(e.uuid),this.unuseMap.set(e.uuid,e),this},e.prototype.del=function(e){this.inuseMap.delete(e.uuid),this.unuseMap.delete(e.uuid)},e.prototype.get=function(){var e=this.unuseMap.keys().next();if(e.done)return null;var a=this.unuseMap.get(e.value);return this.unuseMap.delete(e.value),this.inuseMap.set(e.value,a),a},e.prototype.destroy=function(){this.unuseMap.forEach(function(e){e.destroy()}),this.inuseMap.forEach(function(e){e.destroy()}),this.unuseMap.clear(),this.inuseMap.clear()},e}();t.default=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaBundleObjectPool:[function(e,a,t){"use strict";cc._RF.push(a,"35ecbUbHqVFoJLa6dyXuLAh","pzaBundleObjectPool");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBundleObjectPool=void 0;var i=e("../../start/pzaBundleController"),r=e("../Common/pzaGameCommonPool"),p=e("./pzaPreLoadManager"),l=function(){function e(){}return e.preLoadSubResource=function(e,a,t){var o=this;if(void 0===t&&(t=null),null==e||e.length<=0)a&&a(!0);else{var n=e.length,i=0;e.forEach(function(e){o.preLoadResource(e,null,function(){i++,t&&t(i/n),i>=n&&a&&a(!0)})})}},e.preLoadResource=function(e,a,t){switch(e.resourceType){case p.pzaResourceType.Prefab:this.preLoadPrefab(e,a,t);break;case p.pzaResourceType.PrefabDir:this.preLoadPrefabDir(e,a,t);break;case p.pzaResourceType.SpriteFrameDir:this.preLoadSpriteFrameDir(e,a,t);break;case p.pzaResourceType.Scene:this.preLoadScene(e,a,t);break;default:t&&t(!0)}},e.preLoadPrefab=function(e,a,t){var o=this;r.pzaGameCommonPool.urlToPrefab.has(e.url)?t&&t(!0):i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(n){null!=n?n.load(e.url,cc.Prefab,function(e,t){a&&a(e,t)},function(n,i){if(null!=n||null==i)return console.error("preLoadPrefab error===>",n),void o.preLoadPrefab(e,a,t);r.pzaGameCommonPool.addUrlToPrefab(e.url,i),t&&t(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},e.preLoadPrefabDir=function(e,a,t){var n=this;this.LoadedResource.has(e)?t&&t(!0):i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(i){null!=i?i.loadDir(e.url,cc.Prefab,function(e,t){a&&a(e,t)},function(i,p){var l,s;if(null!=i||null==p)return console.error("preLoadPrefabDir error===>",i),void n.preLoadPrefabDir(e,a,t);try{for(var c=o(p),u=c.next();!u.done;u=c.next()){var d=u.value,h=e.url+"/"+(d.data&&d.data._name);r.pzaGameCommonPool.urlToPrefab.has(h)||r.pzaGameCommonPool.addUrlToPrefab(h,d)}}catch(m){l={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(l)throw l.error}}n.LoadedResource.add(e),t&&t(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},e.preLoadSpriteFrameDir=function(e,a,t){var o=this;this.LoadedResource.has(e)?t&&t(!0):i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(n){null!=n?n.loadDir(e.url,cc.SpriteFrame,function(e,t){a&&a(e,t)},function(n,i){if(null!=n||null==i)return console.error("preLoadSpriteFrameDir error===>",n),void o.preLoadSpriteFrameDir(e,a,t);i.forEach(function(a){r.pzaGameCommonPool.urlToSpriteFame.set(e.url+"/"+a.name,a)}),o.LoadedResource.add(e),t&&t(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},e.clearCachePool=function(){var e,a,t,i,p=function(e){var a,t;try{for(var n=o(["resources/Prefab/Effect/NormalAshesEffect"]),i=n.next();!i.done;i=n.next()){var r=i.value;if(e.match(r))return!0}}catch(p){a={error:p}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return!1};r.pzaGameCommonPool.clear();var l=function(e,a,t){var n,i;try{for(var r=o(["resources/Prefab/Plant/","resources/Prefab/Zombie/","resources/Prefab/Effect/","Plant/BK/"]),p=r.next();!p.done;p=r.next()){var l=p.value;e.match(l)&&(t.delete(e),cc.assetManager.releaseAsset(a))}}catch(s){n={error:s}}finally{try{p&&!p.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}};try{for(var s=o(r.pzaGameCommonPool.urlToPrefab),c=s.next();!c.done;c=s.next()){var u=n(c.value,2),d=u[0],h=u[1];!0!==p(d)&&l(d,h,r.pzaGameCommonPool.urlToPrefab)}}catch(y){e={error:y}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(e)throw e.error}}try{for(var m=o(r.pzaGameCommonPool.urlToSkeletonData),f=m.next();!f.done;f=m.next()){var z=n(f.value,2);d=z[0],h=z[1],!0!==p(d)&&l(d,h,r.pzaGameCommonPool.urlToSkeletonData)}}catch(g){t={error:g}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(t)throw t.error}}r.pzaGameCommonPool.urlToSkeletonData.clear(),r.pzaGameCommonPool.urlToSpriteFame.clear()},e.preLoadScene=function(e,a,t){var o=this;cc.director.preloadScene(e.url,function(e,t){a&&a(e,t)},function(n){null!=n&&(console.error("preLoadScene error===>",n),o.preLoadScene(e,a,t)),t&&t(!0)})},e.requestInstantByUrl2=function(e,a){if(e){var t=r.pzaGameCommonPool.urlToPrefab.get(e);if(t){var o=r.pzaGameCommonPool.requestInstant2(t);a&&a(null,o)}else i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(t){null!=t?t.load(e,cc.Prefab,function(t,o){if(t)return console.error("\u52a0\u8f7dPrefab\u5f02\u5e38",e),void a(t);r.pzaGameCommonPool.addUrlToPrefab(e,o);var n=r.pzaGameCommonPool.requestInstant2(o);a&&a(t,n)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else a&&a("null url")},e.requestInstantByUrl=function(e,a,t){var o=this;if(e){var n=r.pzaGameCommonPool.urlToPrefab.get(e);if(n){var p=r.pzaGameCommonPool.requestInstant(n,a);t&&t(null,p)}else i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(n){null!=n?n.load(e,cc.Prefab,function(n,i){if(n)return console.error(n),void o.requestInstantByUrl(e,a,t);r.pzaGameCommonPool.addUrlToPrefab(e,i);var p=r.pzaGameCommonPool.requestInstant(i,a);t&&t(n,p)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else t&&t("null url")},e.requestSpriteFrameByUrl=function(e,a){if(null!=e)if(r.pzaGameCommonPool.urlToSpriteFame.has(e)){var t=r.pzaGameCommonPool.urlToSpriteFame.get(e);a&&a(null,t)}else i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(t){null!=t?t.load(e,cc.SpriteFrame,function(t,o){null==t&&null!=o&&r.pzaGameCommonPool.urlToSpriteFame.set(e,o),a&&a(t,o)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")});else a&&a("null url")},e.requestSpriteFrameByAtlas=function(e,a,t){if(null!=e&&null!=a){var o=e+"/"+a;if(r.pzaGameCommonPool.urlToSpriteFame.has(o)){var n=r.pzaGameCommonPool.urlToSpriteFame.get(o);t&&t(null,n)}else i.pzaBundleController.loadBundle(i.pzaBundleType.Game,function(a){null!=a?a.loadDir(e,cc.SpriteAtlas,null,function(a,n){if(a)console.error(a);else{for(var i=0;i<n.length;i++)for(var p=n[i].getSpriteFrames(),l=0;l<p.length;l++){var s=p[l],c=e+"/"+s.name;r.pzaGameCommonPool.urlToSpriteFame.set(c,s)}var u=r.pzaGameCommonPool.urlToSpriteFame.get(o);t&&t(null,u)}}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else t&&t("null url")},e.LoadedResource=new Set,e}();t.pzaBundleObjectPool=l,cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaPreLoadManager":"pzaPreLoadManager"}],pzaBungeeTarget:[function(e,a,t){"use strict";cc._RF.push(a,"8242bUT/KJOJoQL6XKXRfTg","pzaBungeeTarget");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBungeeTarget=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(e,a){void 0===a&&(a=!1),this.baseData=e;var t=10*-this.baseData.yIndex+6;this.node.zIndex=t,this.node.stopAllActions();var o=cc.v2(e.logicPos.x,400-e.logicPos.y),n=e.logicPos.y-40;this.node.setPosition(o),this.node.runAction(cc.sequence(cc.moveTo((400-e.logicPos.y)/720,cc.v2(e.logicPos.x,n)),cc.callFunc(function(){a&&p.pzaSoundManager.playAudio("bungeetarget")})))},a.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},a.prototype.pauseSelf=function(){this.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([s],a)}(r.pzaBaseComponent));t.pzaBungeeTarget=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager"}],pzaBungeeZombieEffect:[function(e,a,t){"use strict";cc._RF.push(a,"6de90umtgVMJZ1sORcEGDup","pzaBungeeZombieEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBungeeZombieEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaWorldEventManager"),s=e("../Data/pzaPlantEnum"),c=e("../Data/pzaZombieEnum"),u=e("../pzaGameState"),d=e("../pzaSpineTool"),h=e("../Zombie/pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cordNode=null,a.cordPutNode=null,a.bungeeZombie=null,a.normalZombie=null,a.ladderZombie=null,a.gargantuarZombie=null,a.zombieHeight=0,a.putZombieData=null,a.countDown=0,a.fallTime=0,a.riseTime=0,a.hasFall=!1,a}return n(a,e),a.prototype.init=function(e){if(u.pzaGameState.gameWin)this.close();else if(null!=e){this.putZombieData=e,this.gargantuarZombie.active=!1,e.zombieData.zombieType==c.pzaZombieEnum.ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,null,0,0)):e.zombieData.zombieType==c.pzaZombieEnum.CONE_HEAD_ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,h.pzaZombieSlotType.hat+"1",-5.4,81.02)):e.zombieData.zombieType==c.pzaZombieEnum.BUCKET_HEAD_ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,h.pzaZombieSlotType.hat_iron+"1",-44.8,-9.46)):e.zombieData.zombieType==c.pzaZombieEnum.LADDER_ZOMBIE?(this.normalZombie.node.active=!1,this.ladderZombie.node.active=!0,this.ladderZombie.paused=!0,d.pzaSpineTool.instance().setSlotAtt(this.ladderZombie,h.pzaZombieSlotType.ladder,h.pzaZombieSlotType.ladder+"1",221.34,-20,-119.57)):e.zombieData.zombieType==c.pzaZombieEnum.GARGANTUAR||e.zombieData.zombieType==c.pzaZombieEnum.RED_GARGANTUAR?(this.normalZombie.node.active=!1,this.ladderZombie.node.active=!1,this.gargantuarZombie.active=!0):(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,null,0,0));var a=e.xIndex,t=e.yIndex;this.node.zIndex=10*-t+5;var o=u.pzaGameState.map.getXInterval(a)/2,n=.1*u.pzaGameState.map.getYInterval(t)+33,i=u.pzaGameState.map.getBlockLogicPos(a,t,o,n);this.node.setPosition(i),this.zombieHeight=400-i.y,this.bungeeZombie.y=this.zombieHeight,this.countDown=1,this.fallTime=0,this.riseTime=0,this.hasFall=!1,this.updateCord(),this.cordNode.height=1e3,window.pzazombieManager.zombieDatas[this.putZombieData.yIndex].add(this.putZombieData)}},a.prototype.logicUpdate=function(e){return this.fallTime>0?(this.fallTime-=e,this.zombieHeight-=720*e,this.zombieHeight=Math.max(0,this.zombieHeight),this.bungeeZombie.y=this.zombieHeight,void(this.fallTime<=0&&this.putZombie())):this.riseTime>0?(this.riseTime-=e,this.zombieHeight+=800*e,this.bungeeZombie.y=this.zombieHeight,void(this.riseTime<=0&&this.close())):(this.countDown-=e,this.countDown>0?void 0:this.hasFall?void 0:(this.hasFall=!0,this.fallTime=this.zombieHeight/720,void p.pzaSoundManager.playAudio("Bungee_fall")))},a.prototype.update=function(){this.updateCord()},a.prototype.updateCord=function(){this.cordNode.setPosition(cc.v2(this.bungeeZombie.position.x,this.bungeeZombie.position.y+60))},a.prototype.putZombie=function(){if(u.pzaGameState.gameWin)this.close();else{for(var e=this.putZombieData.xIndex,a=this.putZombieData.yIndex,t=e-1;t<=e+1;t++)for(var o=a-1;o<=a+1;o++){var n=""+t+o,i=window.pzaplantManager.plantDataMap.get(n);if(null!=i&&!i.isDead&&i.plantData.plantType==s.pzaPlantEnum.UMBRELLA_LEAF)return l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.RICOCHET_ZOMBIE,i),void this.beRicochet()}this.riseTime=1,this.normalZombie.node.active=!1,this.ladderZombie.node.active=!1,window.pzazombieManager.createZombie(this.putZombieData,!1,!1,!1,null,!1)}},a.prototype.beRicochet=function(){this.riseTime=1},i([z({displayName:"\u7ef3\u5b50\u8282\u70b9",type:cc.Node})],a.prototype,"cordNode",void 0),i([z({displayName:"\u7ef3\u5b50\u6302\u70b9",type:cc.Node})],a.prototype,"cordPutNode",void 0),i([z({displayName:"\u8e66\u6781\u50f5\u5c38\u8282\u70b9",type:cc.Node})],a.prototype,"bungeeZombie",void 0),i([z({displayName:"\u666e\u50f5\u8282\u70b9",type:sp.Skeleton})],a.prototype,"normalZombie",void 0),i([z({displayName:"\u68af\u5b50\u50f5\u5c38\u8282\u70b9",type:sp.Skeleton})],a.prototype,"ladderZombie",void 0),i([z({displayName:"\u5de8\u4eba\u50f5\u5c38\u8282\u70b9",type:cc.Node})],a.prototype,"gargantuarZombie",void 0),i([f],a)}(r.pzaBaseComponent);t.pzaBungeeZombieEffect=y,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieSlot":"pzaZombieSlot","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool"}],pzaBungeeZombie:[function(e,a,t){"use strict";cc._RF.push(a,"840be7Xt5hAxIWKZBLLxR4S","pzaBungeeZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBungeeZombie=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../Effect/pzaBungeeTarget"),u=e("./pzaBaseZombie"),d=e("./pzaZombieSlot"),h=e("./pzaZombieState"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cordNode=null,a.targetPrefab=null,a.carryNode=null,a.zombieHeight=0,a.countDown=0,a.fallTime=0,a.riseTime=0,a.fallCheckTime=0,a.hasFall=!1,a.bungeeTarget=null,a.stealPlantIns=null,a.ashesShowTime=0,a.hasRise=!1,a.hasRicoChet=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[d.pzaZombieSlotType.butter,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.butter).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.butter,48.86,6.63,-87.65))]])},a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.animation.node.active=!0,this.ashesShowTime=0},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.countDown=2,this.fallTime=0,this.riseTime=0,this.fallCheckTime=0,this.hasFall=!1;var t=10*-this.baseData.yIndex-2;this.node.zIndex=t,a&&a.logicPos&&(this.zombieHeight=400-a.logicPos.y,this.animation.node.y=this.zombieHeight,this.animation.playAnimation("attack",!0),a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.UNABLE_SELECT,-1)),a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1)),null==this.baseData.zombieData.zomBossFinger?this.createTarget():this.countDown=.6,this.updateCord(),this.hasRise=!1,this.hasRicoChet=!1,this.cordNode.height=1e3)},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData&&(this.ashesShowTime>0&&(this.ashesShowTime-=e,this.ashesShowTime<=0&&this.death(!1)),!this.baseData.isDead&&(this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled()))){if(this.cordNode.setPosition(cc.v2(this.animation.node.position.x,this.animation.node.position.y+60)),this.baseData.buffData.hasBuff(l.pzaBuffType.RICOCHET)){this.hasRicoChet=!0,this.riseTime=1,this.fallTime=0,this.baseData.buffData.removeBuff(l.pzaBuffType.RICOCHET),this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1));var a=10*-this.baseData.yIndex+5;this.node.zIndex=a}if(this.fallTime>0)return this.fallTime-=e,this.zombieHeight-=720*e,this.zombieHeight=Math.max(0,this.zombieHeight),this.animation.node.y=this.zombieHeight-50,this.fallCheckTime>0&&(this.fallCheckTime-=e,this.fallCheckTime<=0&&(this.baseData.buffData.removeBuff(l.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL))),void(this.fallTime<=0&&(this.animation.playAnimation("move",!0),this.countDown=4));if(this.riseTime>0){if(null!=this.baseData.zombieData.zomBossFinger)return;return this.riseTime-=e,this.zombieHeight+=800*e,this.animation.node.y=this.zombieHeight-50,this.hasRise||this.hasRicoChet||(this.hasRise=!0,this.removePlant()),void(this.riseTime<=0&&this.disappear())}this.countDown-=e,this.countDown>0||(this.hasFall?this.stealPlant():(this.hasFall=!0,this.fallTime=this.zombieHeight/720,this.fallCheckTime=.9*this.fallTime,p.pzaSoundManager.playAudio("Bungee_fall")))}},a.prototype.update=function(){this.updateCord()},a.prototype.updateCord=function(){var e=this.node.convertToWorldSpaceAR(this.animation.node.position),a=this.node.convertToNodeSpaceAR(e);this.cordNode.setPosition(a.add(cc.v3(0,60)))},a.prototype.createTarget=function(){var e=r.pzaGameCommonPool.requestInstant(this.targetPrefab);e.setParent(this.node.parent),this.bungeeTarget=e&&e.getComponent(c.pzaBungeeTarget),this.bungeeTarget&&this.bungeeTarget.bindData(this.baseData)},a.prototype.stealPlant=function(){var e=this;null!=this.baseData.zombieData.zomBossFinger&&this.baseData.isBeControlled()?this.disappear():(this.countDown=2,p.pzaSoundManager.playAudio("Bungee_steal"),this.animation.playAnimation("attack",!1,function(){e.riseTime=1,e.animation.playAnimation("move",!0)}),null==this.baseData.zombieData.zomBossFinger&&(this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1))))},a.prototype.removePlant=function(){var e=window.pzaplantManager.getCanAttackPlantData(this.baseData.xIndex,this.baseData.yIndex,!0),a=window.pzaplantManager.getPlantByData(e);if(null!=e&&null!=a){a.steal(),e.isDead=!0,window.pzaplantManager.removePlant(e);var t=a.node.convertToWorldSpaceAR(cc.v2());a.node.setParent(this.carryNode),a.node.setPosition(this.carryNode.convertToNodeSpaceAR(t)),this.stealPlantIns=a;var o=10*-this.baseData.yIndex+6;this.node.zIndex=o}},a.prototype.close=function(){null!=this.stealPlantIns&&(this.stealPlantIns.close(),this.stealPlantIns=null),e.prototype.close.call(this)},a.prototype.disappear=function(){this.baseData.isDead=!0,this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!1),this.close()},a.prototype.playDeathAnimation=function(e){this.zombieState=h.pzaZombieState.DEAD,this.zombieHurtState=s.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),e&&e()},a.prototype.ashesDeath=function(){e.prototype.ashesDeath.call(this)},a.prototype.logicLateUpdate=function(e){e>.5?console.log("\u8fc7\u9ad8dt====>",e):(this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos))},a.prototype.refreshFrostState=function(e){if(e)return this.showFrost=!1,this.showFire=!1,this.showSpeedUp=!1,void(this.animation.node.color=cc.Color.WHITE);if(!(null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis))if(this.baseData.buffData.hasBuff(l.pzaBuffType.FROST)){if(!this.baseData.isDead&&!this.showFrost)return this.showFrost=!0,void(this.animation.node.color=this.color_frozen)}else if(this.baseData.buffData.hasBuff(l.pzaBuffType.FIRE)){if(!this.baseData.isDead&&!this.showFire)return this.showFire=!0,void(this.animation.node.color=this.color_fire)}else if(this.baseData.buffData.hasBuff(l.pzaBuffType.SPEED_UP)){if(!this.baseData.isDead&&!this.showSpeedUp)return void(this.showSpeedUp=!0)}else(this.showFrost||this.showFire)&&(this.showFire=!1,this.showFrost=!1,this.showSpeedUp=!1,this.animation.node.color=cc.Color.WHITE)},i([z({displayName:"\u7ef3\u5b50\u8282\u70b9",type:cc.Node})],a.prototype,"cordNode",void 0),i([z({displayName:"\u9776\u5b50\u9884\u8bbe",type:cc.Prefab})],a.prototype,"targetPrefab",void 0),i([z({displayName:"\u5b58\u653e\u690d\u7269\u8282\u70b9",type:cc.Node})],a.prototype,"carryNode",void 0),i([f],a)}(u.pzaBaseZombie);t.pzaBungeeZombie=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBungeeTarget":"pzaBungeeTarget","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaButterBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"0a0c1vHdGJAqYAKBcVznChF","pzaButterBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaButterBaseBullet=void 0;var r=e("../Data/pzaBuffData"),p=e("../Data/pzaZombieEnum"),l=e("../Plant/pzaAttackType"),s=e("../pzaEffectManager"),c=e("./pzaBaseBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.colliderZombie=function(e){if(e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&!(e.zombieData&&e.zombieData.hypnosis||e.buffData.hasBuff(r.pzaBuffType.DIVE)||e.buffData.hasBuff(r.pzaBuffType.FLY)||e.buffData.hasBuff(r.pzaBuffType.INVINCIBLE))){var a=window.pzazombieManager.getZombie(e);if(a){if(a.hurt(this.atk,null,l.pzaAttackType.FLOOR_ATK),!e.buffData.hasBuff(r.pzaBuffType.IMM_CONTROL)&&!e.buffData.hasBuff(r.pzaBuffType.IMM_IMMOBILIZE)){var t=e.buffData.releaseBuff(r.pzaBuffType.IMMOBILIZE);null!=t?t.buffTime=5:(t=new r.pzaBuffInfo(r.pzaBuffType.IMMOBILIZE,5),e.buffData.addBuff(t),a.bePauseControl(),s.pzaEffectManager.createButterEffect(e,cc.v2(e.logicPos.x,e.logicPos.y+130),a.node.zIndex))}this.close(),this.playHitEffect(e)}}},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a)},i([d],a)}(c.pzaBaseBullet));t.pzaButterBaseBullet=h,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","./pzaBaseBullet":"pzaBaseBullet"}],pzaButterEffect:[function(e,a,t){"use strict";cc._RF.push(a,"32ccbWnqjdDuLH77GoS4EXI","pzaButterEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaButterEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../Data/pzaBuffData"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.poolPrefab=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a)},a.prototype.logicUpdate=function(){null!=this.baseData&&!this.baseData.isDead&&this.baseData.buffData.hasBuff(l.pzaBuffType.IMMOBILIZE)||this.close()},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaButterEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../Data/pzaBuffData":"pzaBuffData"}],pzaBuyConfirmView:[function(e,a,t){"use strict";cc._RF.push(a,"11edfsimUdBF7p40xxx3Rtx","pzaBuyConfirmView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBuyConfirmView=void 0;var r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaDropType"),l=e("../Battle/Data/pzaPlantEnum"),s=e("../Common/pzaBeltEquipConfig"),c=e("../Common/pzaBeltSlotConfig"),u=e("../Common/pzaCommonPopView"),d=e("../Common/pzaGameCommonPool"),h=e("../Common/pzaGamePropConfig"),m=e("../Common/pzaGlobalMask"),f=e("../Common/pzaLocalData"),z=e("../Common/pzaSoundManager"),y=e("../Common/pzaSpriteFrameManager"),g=e("../Common/pzaStatisticsMgr"),v=e("../Common/pzaUIManager"),b=e("../Common/pzaUtil"),P=e("../Common/pzaWorldEventManager"),C=e("../Garden/pzaGardenMgr"),E=e("../Load/pzaPreLoadManager"),S=e("../Shop/pzaShopConfig"),_=e("../utils/pzaChannel"),D=e("./Battle/pzaNewPlantView"),M=e("./pzaGotRewardView"),w=e("./pzaWarningView"),T=cc._decorator,A=T.ccclass,B=T.property,G=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.price=null,a.priceNode=null,a.itemIcon=null,a.plantIcon=null,a.plantCardBoardFrames=[],a.tittle=null,a.desc=null,a.coin=null,a.confirmTxt=null,a.confirmBtn=null,a.cancelBtn=null,a.adIcon=null,a.itemCount=null,a.adShareBtnFrames=[],a.rewardItem=null,a.itemType=null,a.shopPos=null,a.newPrice=null,a}var t;return n(a,e),t=a,a.prototype.onEnable=function(){e.prototype.onEnable.call(this),P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.HIDE_DAVE_DIALOG,null)},a.prototype.onDisable=function(){P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.SHOW_DAVE_DIALOG,null)},a.prototype.setCloseCall=function(e){this.closeCall=e},a.prototype.bindData=function(e,a,t,o){var n=this;if(null!=o&&(this.newPrice=o),this.itemType=e,this.shopPos=a,this.buyCall=t,this.confirmBtn.active=!0,this.cancelBtn.active=!0,this.coin.node.active=!0,this.coin.string=b.pzaUtil.getCurrencyStr(f.pzaLocalData.data.coin),this.itemCount.node.active=!1,e==S.pzaShopItemType.DAVE_COIN)return g.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"8"},{name:"adname",value:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01"}),this.tittle.string="\u9a91\u58eb\u7684\u79d8\u5bc6\u8d27\u7269",this.desc.string="\u5e7f\u544a\u4ee5\u83b7\u5f971000\u9a91\u58eb\u5e01",this.adIcon.enabled=!f.pzaLocalData.data.isShowVideoIcon,this.adIcon.node.active=!f.pzaLocalData.data.isShowVideoIcon,this.confirmTxt.string="\u7acb\u5373\u9886\u53d6",this.confirmTxt.node.x=31,y.pzaSpriteFrameManager.loadShopItemIcon(e,this.itemIcon),this.priceNode.active=!1,this.itemIcon.node.active=!0,this.plantIcon.node.active=!1,void(this.adIcon.spriteFrame=this.adShareBtnFrames[0]);e==S.pzaShopItemType.GATLING_PEA&&g.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"17"},{name:"adname",value:"\u5e7f\u544a\u83b7\u53d6\u6781\u72d0\u2168"}),e==S.pzaShopItemType.AQUARIUM||e==S.pzaShopItemType.SHROOM_GARDEN?this.itemIcon.node.scale=1.5:this.itemIcon.node.scale=1,setTimeout(function(){f.pzaLocalData.gardenGuiding&&m.pzaGlobalMask.showOperaArea(n.confirmBtn)},500),this.tittle.string="\u8d2d\u4e70\u8fd9\u4e00\u7269\u54c1\uff1f",this.adIcon.node.active=!1,this.confirmTxt.string="\u786e\u5b9a",this.confirmTxt.node.x=-3,this.priceNode.active=!0;var i,r=S.pzaShopConfig.SHOP_CONFIG.get(e);null!=r&&(this.desc.string=r.desc,null!=this.newPrice?i=this.newPrice:null!=r&&(i=r.price),this.price.string=b.pzaUtil.getCurrencyStr(i),e>=S.pzaShopItemType.CARD_SLOT_7&&e<=S.pzaShopItemType.CARD_SLOT_9?(this.itemIcon.node.active=!0,this.plantIcon.node.active=!1,y.pzaSpriteFrameManager.loadShopItemIcon(e,this.itemIcon)):e>=S.pzaShopItemType.BELT_SLOT1&&e<=S.pzaShopItemType.BELT_SLOT4?(this.itemIcon.node.active=!0,this.plantIcon.node.active=!1,this.itemIcon.node.scale=1.3,y.pzaSpriteFrameManager.loadShopItemIcon(S.pzaShopItemType.BELT_SLOT1,this.itemIcon)):e<S.pzaShopItemType.GATLING_PEA||e>S.pzaShopItemType.IMITATER?(this.itemIcon.node.active=!0,this.plantIcon.node.active=!1,y.pzaSpriteFrameManager.loadShopItemIcon(e,this.itemIcon),e==S.pzaShopItemType.PESTICIDE&&(this.itemCount.node.active=!0)):(this.itemIcon.node.active=!1,this.plantIcon.node.active=!0,y.pzaSpriteFrameManager.loadPlantWholeCard(S.pzaShopConfig.getPlantTypeByItem(e)+"",this.plantIcon)),e==S.pzaShopItemType.GATLING_PEA&&(this.priceNode.active=!1,this.coin.node.active=!1,this.tittle.string="\u606d\u559c\u83b7\u5f97\u673a\u67aa\u5c04\u624b\uff01",this.confirmBtn.active=!0,this.cancelBtn.active=!1,this.buyItem(this.itemType,this.shopPos)))},a.prototype.tasksBindData=function(e){this.tittle.node.active=!1,this.priceNode.active=!1,this.coin.node.active=!1,this.confirmBtn.active=!1;var a="";switch(e){case h.pzaGamePropEnum.PROP_SECRET_FLOWER:a="\u795e\u79d8\u7684\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u597d\u597d\u517b\u5b83\uff0c\u6211\u4fdd\u8bc1\u4f60\u4f1a\u6709\u5f88\u5927\u6536\u83b7\uff01",y.pzaSpriteFrameManager.loadGoldPlant(30,this.itemIcon);break;case h.pzaGamePropEnum.PROP_BRONZE_FLOWE:a="\u795e\u79d8\u7684\u9752\u94dc\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u670925%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",y.pzaSpriteFrameManager.loadGoldPlant(31,this.itemIcon);break;case h.pzaGamePropEnum.PROP_SILVER_FLOWE:a="\u795e\u79d8\u7684\u767d\u94f6\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u670950%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",y.pzaSpriteFrameManager.loadGoldPlant(32,this.itemIcon);break;case h.pzaGamePropEnum.PROP_GOLD_FLOWER:a="\u795e\u79d8\u7684\u9ec4\u91d1\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u6709100%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",y.pzaSpriteFrameManager.loadGoldPlant(33,this.itemIcon)}this.desc.string=a,this.itemCount.string=""},a.prototype.clickConfirm=function(){var e=this;if(this.confirmTxt.string.match("\u786e\u5b9a")){if(this.itemType==S.pzaShopItemType.DAVE_COIN)return void this.close();if(this.itemType==S.pzaShopItemType.GATLING_PEA)return this.close(),this.buyCall&&this.buyCall(),void this.showNewPlantView(l.pzaPlantEnum.GATLING_PEA);var a,o=S.pzaShopConfig.SHOP_CONFIG.get(this.itemType);if(null==o&&null==this.newPrice)return void this.close();if(null!=this.newPrice?a=this.newPrice:null!=o&&(a=o.price),f.pzaLocalData.data.coin>=a){f.pzaLocalData.costCoin(a);var n=this.buyItem(this.itemType,this.shopPos),i=function(){e.close(),e.buyCall&&e.buyCall(),e.itemType>=S.pzaShopItemType.CARD_SLOT_7&&e.itemType<=S.pzaShopItemType.CARD_SLOT_9&&v.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(w.pzaWarningView);a&&a.show("\u73b0\u5728\u4f60\u53ef\u4ee5\u5728\u6bcf\u4e2a\u5173\u5361\n\u9009\u62e9"+f.pzaLocalData.data.plantSlotCount+"\u4e2a\u9a91\u58eb\u5361\u7247\u4e86\uff01","\u786e\u5b9a",null,null,null,"\u66f4\u591a\u5361\u724c\u69fd\uff01")}),a>5e3&&e.scheduleOnce(function(){var e=_.pzaChannel.instance().getChannel();_.pzaChannel.saveToRemote(e.channelUserId,f.pzaLocalData.data)},1)};return void(n?this.showRewardUI(this.itemType,function(){i()}):i())}v.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.BUY_CONFIRM_VIEW,function(e){var a=e&&e.getComponent(t);a&&a.bindData(S.pzaShopItemType.DAVE_COIN,null,null)})}else{z.pzaSoundManager.playSFX();var r=function(){e.itemType==S.pzaShopItemType.DAVE_COIN&&(f.pzaLocalData.data.coin+=1e3,f.pzaLocalData.addDirty("coin"),f.pzaLocalData.bpGetGold(1e3),e.closeCall&&e.closeCall()),e.close()};this.itemType==S.pzaShopItemType.DAVE_COIN?_.pzaChannel.instance().showVideo({sucCall:r,failCall:function(){},endCall:function(){},posName:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01",adsid:"8"}):this.itemType==S.pzaShopItemType.GATLING_PEA?_.pzaChannel.instance().showVideo({sucCall:r,failCall:function(){},endCall:function(){},posName:"\u5e7f\u544a\u83b7\u53d6\u6781\u72d0\u2168",adsid:"17"}):this.close()}},a.prototype.buyItem=function(e,a){switch(e){case S.pzaShopItemType.CARD_SLOT_7:f.pzaLocalData.data.plantSlotCount=7,f.pzaLocalData.addDirty("plantSlotCount"),f.pzaLocalData.obtainGoods(e,1);break;case S.pzaShopItemType.CARD_SLOT_8:f.pzaLocalData.data.plantSlotCount=8,f.pzaLocalData.addDirty("plantSlotCount"),f.pzaLocalData.obtainGoods(e,1);break;case S.pzaShopItemType.CARD_SLOT_9:f.pzaLocalData.data.plantSlotCount=9,f.pzaLocalData.addDirty("plantSlotCount"),f.pzaLocalData.obtainGoods(e,1);break;case S.pzaShopItemType.POOL_CLEAN_CAR:case S.pzaShopItemType.ROOF_CART:case S.pzaShopItemType.NUT_HEALING:f.pzaLocalData.obtainGoods(e,1);break;case S.pzaShopItemType.PITCHFORK:f.pzaLocalData.obtainGoods(e,3);break;case S.pzaShopItemType.SHROOM_GARDEN:C.default.instance().addGardenEnv(C.pzaGardenEnv.water);break;case S.pzaShopItemType.AQUARIUM:C.default.instance().addGardenEnv(C.pzaGardenEnv.night);break;case S.pzaShopItemType.SNAIL:C.default.instance().addGardenTool(C.pzaGardenToolType.snail,1);break;case S.pzaShopItemType.WHEELBARROW:C.default.instance().addGardenTool(C.pzaGardenToolType.cart,1);break;case S.pzaShopItemType.JUKEBOX:C.default.instance().addGardenTool(C.pzaGardenToolType.phonograph,1);break;case S.pzaShopItemType.GLOVE:C.default.instance().addGardenTool(C.pzaGardenToolType.glove,1);break;case S.pzaShopItemType.GOLD_KETTLE:C.default.instance().addGardenTool(C.pzaGardenToolType.goldWaterPot,1);break;case S.pzaShopItemType.GATLING_PEA:f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.GATLING_PEA),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case S.pzaShopItemType.TWIN_SUNFLOWER:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.TWIN_SUNFLOWER),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.TWIN_SUNFLOWER),!1;case S.pzaShopItemType.GLOOM_SHROOM:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.GLOOM_SHROOM),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.GLOOM_SHROOM),!1;case S.pzaShopItemType.CATTAIL:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.CATTAIL),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.CATTAIL),!1;case S.pzaShopItemType.SPIKEROCK:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.SPIKEROCK),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.SPIKEROCK),!1;case S.pzaShopItemType.GOLD_MAGNET:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.GOLD_MAGNET),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.GOLD_MAGNET),!1;case S.pzaShopItemType.WINTER_MELON:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.WINTER_MELON),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.WINTER_MELON),!1;case S.pzaShopItemType.COB_CANNON:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.COB_CANNON),f.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),this.showNewPlantView(l.pzaPlantEnum.COB_CANNON),!1;case S.pzaShopItemType.IMITATER:return f.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.IMITATER),f.pzaLocalData.addDirty("ownPlants"),void this.showNewPlantView(l.pzaPlantEnum.IMITATER);case S.pzaShopItemType.FERTILIZER:C.default.instance().addGardenTool(C.pzaGardenToolType.manure,5);break;case S.pzaShopItemType.PESTICIDE:C.default.instance().addGardenTool(C.pzaGardenToolType.pesticide,5);break;case S.pzaShopItemType.MARIGOLD_FLOWERPOT:C.default.instance().addGardenPlant(l.pzaPlantEnum.MARIGOLD),f.pzaLocalData.data.purchasedPos.push(a),f.pzaLocalData.addDirty("purchasedPos");break;case S.pzaShopItemType.FLOWER_SEED:var t=C.default.instance().randomGardenPlant(0);C.default.instance().addGardenPlant(t),f.pzaLocalData.data.purchasedPos.push(a),f.pzaLocalData.addDirty("purchasedPos");break;case S.pzaShopItemType.BRONZE_FLOWER_SEED:var o=C.default.instance().randomGardenPlant(.25);C.default.instance().addGardenPlant(o),f.pzaLocalData.data.purchasedPos.push(a),f.pzaLocalData.addDirty("purchasedPos");break;case S.pzaShopItemType.SILVER_FLOWER_SEED:var n=C.default.instance().randomGardenPlant(.5);C.default.instance().addGardenPlant(n),f.pzaLocalData.data.purchasedPos.push(a),f.pzaLocalData.addDirty("purchasedPos");break;case S.pzaShopItemType.GOLD_FLOWER_SEED:var i=C.default.instance().randomGardenPlant(1);C.default.instance().addGardenPlant(i),f.pzaLocalData.data.purchasedPos.push(a),f.pzaLocalData.addDirty("purchasedPos");break;case S.pzaShopItemType.WITCH_KNIGHT_BELT:s.pzaBeltEquipConfig.getBeltEquip(s.pzaBeltEquipEnum.WuQi),P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.REFRESH_BELTVIEW,null);break;case S.pzaShopItemType.BELT_SLOT1:case S.pzaShopItemType.BELT_SLOT2:case S.pzaShopItemType.BELT_SLOT3:var p=void 0;this.itemType==S.pzaShopItemType.BELT_SLOT1?p=1:this.itemType==S.pzaShopItemType.BELT_SLOT2?p=2:this.itemType==S.pzaShopItemType.BELT_SLOT3&&(p=3),c.pzaBeltSlotConfig.slotUnlock(p),P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.REFRESH_BELTVIEW,null)}return P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.UPDATE_VIEW,"newPlayerTask"),g.pzaStatisticsMgr.sendEvent("System",{name:"store",value:e}),!0},a.prototype.showRewardUI=function(e,a){var t,o=this,n=S.pzaShopConfig.SHOP_CONFIG.get(e);null!=n&&(t=n.desc,v.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.GOTREWARDVIEW,function(e){var n=e&&e.getComponent(M.pzaGotRewardView);n&&n.bindData(o.rewardItem,t,a)}))},a.prototype.showNewPlantView=function(e){v.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(D.pzaNewPlantView)).showView(p.pzaDropType.PLANT_CARD,e,!1)})},a.prototype.clickCancel=function(){z.pzaSoundManager.playSFX(),this.close()},a.prototype.close=function(){_.pzaChannel.instance().closeBanner(),d.pzaGameCommonPool.returnInstant(this.node)},i([B({displayName:"\u4ef7\u683c",type:cc.Label})],a.prototype,"price",void 0),i([B({displayName:"\u4ef7\u683c\u8282\u70b9",type:cc.Node})],a.prototype,"priceNode",void 0),i([B({displayName:"\u7269\u54c1\u56fe\u6807",type:cc.Sprite})],a.prototype,"itemIcon",void 0),i([B({displayName:"\u690d\u7269\u56fe\u7247",type:cc.Sprite})],a.prototype,"plantIcon",void 0),i([B({displayName:"\u690d\u7269\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],a.prototype,"plantCardBoardFrames",void 0),i([B({displayName:"\u6807\u9898",type:cc.Label})],a.prototype,"tittle",void 0),i([B({displayName:"\u63cf\u8ff0",type:cc.Label})],a.prototype,"desc",void 0),i([B({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],a.prototype,"coin",void 0),i([B({displayName:"\u786e\u8ba4\u6587\u6848",type:cc.Label})],a.prototype,"confirmTxt",void 0),i([B({displayName:"\u786e\u8ba4\u6309\u94ae",type:cc.Node})],a.prototype,"confirmBtn",void 0),i([B({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],a.prototype,"cancelBtn",void 0),i([B({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],a.prototype,"adIcon",void 0),i([B({displayName:"\u5546\u54c1\u6570\u91cf",type:cc.Label})],a.prototype,"itemCount",void 0),i([B({displayName:"\u5e7f\u544a\u5206\u4eab\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],a.prototype,"adShareBtnFrames",void 0),i([B(cc.Node)],a.prototype,"rewardItem",void 0),t=i([A],a)}(u.default);t.pzaBuyConfirmView=G,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaBeltSlotConfig":"pzaBeltSlotConfig","../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaGlobalMask":"pzaGlobalMask","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzaChannel":"pzaChannel","./Battle/pzaNewPlantView":"pzaNewPlantView","./pzaGotRewardView":"pzaGotRewardView","./pzaWarningView":"pzaWarningView"}],pzaCGPaperView:[function(e,a,t){"use strict";cc._RF.push(a,"5ab46dVn0lIiL0A+HFwDcq9","pzaCGPaperView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCGPaperView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaGameManager"),s=e("../../Common/pzaSoundManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.paperLB=null,a.paperTextList=["\u656c\u544a\u611a\u8822\u7684\u4eba\u7c7b\uff1a\n\n\u6211\u4eec\u4fee\u5361\u5373\u5c06\u5bf9\u4f60\u4eec\u7684\u57ce\u5e02\u53d1\u52a8\u603b\u653b\uff01\n\u53cd\u6297\u662f\u5f92\u52b3\u7684\uff0c\u63a5\u53d7\u6539\u9020\u6210\u4e3a\u6211\u4eec\u7684\u6218\u58eb\u5427\uff01\n\n\n                                            \u2014\u2014\u4fee\u5361\u5e72\u90e8",'\u4eb2\u7231\u7684\u53cd\u6297\u8005\uff1a\n\n\u6211\u4eec\u5c06\u5728\u6708\u9ed1\u98ce\u9ad8\u65f6\u8fdb\u884c"\u7279\u522b\u62dc\u8bbf"\u3002\n\u51c6\u5907\u597d\u63a5\u53d7\u6539\u9020\u624b\u672f\u4e86\u5417\uff1f\n\u4fee\u5361\u7684\u624b\u672f\u5200\u53ef\u662f\u5f88\u950b\u5229\u7684\u54e6~\n\n                                            \u2014\u2014\u4fee\u5361\u6218\u6597\u5458\u90e8\u961f',"\u65f6\u7a7a\u65c5\u884c\u901a\u77e5\uff1a\n\n\u68c0\u6d4b\u5230\u60a8\u7684\u65f6\u95f4\u7ebf\u4e0a\u6709\u6b22\u4e50\u80fd\u91cf\u6ce2\u52a8~\n\u8fd9\u4e48\u70ed\u95f9\u7684\u6d3e\u5bf9\u600e\u4e48\u80fd\u5c11\u4e86\u6211\u4eec\uff1f\n\u51c6\u5907\u8fce\u63a5\u6765\u81ea\u8fc7\u53bb\u4e0e\u672a\u6765\u7684\u4e0d\u901f\u4e4b\u5ba2\u5427\uff01\n\u8f66\u7968\uff1f\u6211\u4eec\u4e0d\u9700\u8981\u90a3\u79cd\u4e1c\u897f~\n\n                                            \u2014\u2014\u7231\u51d1\u70ed\u95f9\u7684\u5f02\u9b54\u795e\u4eec",'\u65f6\u7a7a\u5feb\u9012\uff1a\n\n\u60a8\u7684\u65f6\u95f4\u7ebf\u88ab\u9009\u4e2d\u7b7e\u8ba2\u5951\u7ea6\uff01\n\u826f\u592a\u90ce\u524d\u8f88\u8bf4\u8fd9\u91cc\u6709\u7f8e\u5473\u7684"\u65f6\u95f4\u7096\u8089"~\n\u5feb\u6765\u65f6\u95f4\u5217\u8f66\u98df\u5802\u5427\uff01\n\u51fa\u95e8\u524d\u8bb0\u5f97\u68c0\u67e5\u60a8\u7684\u5b9e\u9a8c\u5ba4\u6e05\u7a7a\u9053\u8def\uff01\n\n                                            \u2014\u2014\u60a8\u7684\u65f6\u95f4\u4f19\u4f34 - \u5f02\u9b54\u795e\n                                            \u2014\u2014(\u7edd\u5bf9\u4e0d\u662f\u60f3\u8981\u5077\u8d70\u4f60\u7684\u65f6\u95f4)','\u611a\u6627\u7684\u62b5\u6297\u8005\uff1a\n\n\u4f60\u5df2\u591a\u6b21\u62d2\u7edd\u4fee\u5361\u7684\u4ec1\u6148\u6539\u9020\u9080\u8bf7\u3002\n\u8fd9\u662f\u6700\u540e\u7684\u8b66\u544a\uff01\u4ea4\u51fa\u4f60\u7684\u8eab\u4f53\u548c\u610f\u5fd7\uff0c\n\u5426\u5219\u6211\u4eec\u5c06\u542f\u52a8"\u5730\u72f1\u5927\u4f7f\u7279\u522b\u6e05\u9664\u8ba1\u5212"\u3002\n\u4fee\u5361\u7684\u6539\u9020\u624b\u672f\u53f0\u5df2\u4e3a\u4f60\u9884\u70ed...\n\n                                                  \u6b64\u81f4\n                                                  \u4fee\u5361\u5927\u5e72\u90e8\n               \uff08\u9644\uff1a\u6211\u4eec\u6bd4\u4f60\u66f4\u4e86\u89e3\u4ec0\u4e48\u5bf9\u4f60\u6709\u5229\uff09',"\u656c\u542f\uff1a\n\n\u6211\u4eec\u4fee\u5361\u6218\u6597\u5458\u8ba4\u8f93\u4e86\uff01\n\u60a8\u7684\u6218\u6597\u59ff\u52bf\u5b9e\u5728\u592a\u5e05\u4e86...\n\u4e0d\u5982\u6765\u5f53\u6211\u4eec\u65b0\u5ba3\u4f20\u7247\u7684\u7279\u7ea6\u4e3b\u6f14\uff1f\n\n                                            \u7247\u916c\uff1a\u4e0d\u88ab\u8e22\u98de\u7684\u7279\u6743\n                                            \u2014\u2014\u4fee\u5361\u5ba3\u4f20\u90e8\u4e34\u65f6\u5de5"],a}return n(a,e),a.prototype.onEnable=function(){if((5==r.pzaGameState.curChapter||10==r.pzaGameState.curChapter)&&10==r.pzaGameState.curPart)return this.paperLB.lineHeight=42,this.paperLB.string=this.paperTextList[5],void s.pzaSoundManager.playAudio("paper");var e=r.pzaGameState.curChapter>5?r.pzaGameState.curChapter-5:r.pzaGameState.curChapter;this.paperLB.string=this.paperTextList[e-1],s.pzaSoundManager.playAudio("cg"),5==e?this.paperLB.lineHeight=35:4==e?this.paperLB.lineHeight=48:3==e?this.paperLB.lineHeight=48:2==e?this.paperLB.lineHeight=48:1==e&&(this.paperLB.lineHeight=48)},a.prototype.clickNext=function(){this.close(),l.pzaGameManager.getCurrentGame().partWin()},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u7eb8\u6761",type:cc.Label})],a.prototype,"paperLB",void 0),i([u],a)}(cc.Component);t.pzaCGPaperView=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager"}],pzaCabbagePult:[function(e,a,t){"use strict";cc._RF.push(a,"e04dbXPTkRA2IEuUkS7pTRI","pzaCabbagePult");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCabbagePult=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaThrowBullet"),c=e("../Data/pzaBuffData"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.node.zIndex=10*-this.baseData.yIndex-1,this.playNormalAni(),u.pzaGameState.useThrowPlant=!0,u.pzaGameState.onlyBoomPlant=!1,u.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=e.findAttackTarget();if(null!=t)return l.pzaSoundManager.playAudio("CabbagePult"),void e.animation.playAnimation("attack",!1,a,function(){e.attack(t)});e.animation.playAnimation("idle",!1,a)};a()},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<e.baseData.logicPos.x)&&!o.buffData.hasBuff(c.pzaBuffType.FLY)&&!o.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-e.baseData.logicPos.x;(-1==t||n<t)&&(a=o,t=n)}}),null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.attack=function(e){if(null!=e&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=window.pzazombieManager.getZombie(e);if(null!=t){var o=t.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=a.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(a);var c=cc.v2(l.x+this.baseData.logicPos.x+14,l.y+this.baseData.logicPos.y+42);i.setPosition(c);var u=i.getComponent(s.pzaThrowBullet);null!=u&&(u.init(this.getBulletAni(),!1,this.baseData.yIndex,this.baseData.atk,e,n),u.updateBulletAngel(90))}}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([m],a)}(d.pzaBasePlant);t.pzaCabbagePult=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCactus:[function(e,a,t){"use strict";cc._RF.push(a,"a5050dcEfVDkIX49vL7JqiK","pzaCactus");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCactus=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../Data/pzaBuffData"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.shootHNode=null,a.bulletPrefab=null,a.rise=!1,a.atk1AniTime=1.4,a.atk2AniTime=1.4,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.rise=!1,this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack"),this.atk2AniTime=this.animation.getAnimationDuration("attack2"),u.pzaGameState.onlyBoomPlant=!1,u.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=e.findAttackTarget();return null!=t?t.buffData.hasBuff(c.pzaBuffType.FLY)?void(e.rise?(l.pzaSoundManager.playAudio("CactusAtk"),e.animation.playAnimation("attack2",!1,a,function(){e.shoot(!0)},e.atk2AniTime/e.atkInterval)):(l.pzaSoundManager.playAudio("Cactus"),e.rise=!0,a())):void(e.rise?(e.rise=!1,a()):(l.pzaSoundManager.playAudio("CactusAtk"),e.animation.playAnimation("attack",!1,a,function(){e.shoot(!1)},e.atk1AniTime/e.atkInterval))):e.rise?(e.rise=!1,void a()):void e.animation.playAnimation("idle",!1,a)};a()},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<e.baseData.logicPos.x||o.buffData.hasBuff(c.pzaBuffType.DIVE)||o.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||(o.buffData.hasBuff(c.pzaBuffType.FLY)?t=o:a=o)}),null!=t?t:null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.shoot=function(e){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var o=e?this.shootHNode.convertToWorldSpaceAR(cc.v2()):this.shootNode.convertToWorldSpaceAR(cc.v2()),n=a.convertToNodeSpaceAR(o);t.setPosition(n);var i=t.getComponent(s.pzaBaseBullet);if(null!=i){i.init(this.baseData.yIndex,this.baseData.atk,1,null,cc.v2(1,0),this.getBulletAni()),i.isInAir=e;var l=u.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([f({displayName:"\u53d1\u5c04\u70b9-\u9ad8",type:cc.Node})],a.prototype,"shootHNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([m],a)}(d.pzaBasePlant);t.pzaCactus=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCaiWen:[function(e,a,t){"use strict";cc._RF.push(a,"edfbbLjbIZOIr62ij85brjr","pzaCaiWen");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCaiWen=void 0;var r=e("../../Common/pzaUtil"),p=e("../Data/pzaBuffData"),l=e("../pzaGameState"),s=e("./pzaAttackType"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.specialAttackCD=0,a}return n(a,e),a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playNormalAni()},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.specialAttackCD-=a)},a.prototype.playNormalAni=function(){var e=this,a=function(){e.attackTarget(a)||(e.animation.node.scaleX=1,e.animation.playAnimation("idle",!1,a))};this.attackTarget(a)||this.animation.playAnimation("idle",!1,a)},a.prototype.attackTarget=function(e){var a=this,t=this.findFixRangeZombies(this.baseData.logicPos,1.5*l.pzaGameState.map.getBlockWidth());return this.specialAttackCD<=0&&t&&t.length>0?(this.specialAttackCD=5,this.animation.node.scaleX=1,this.animation.playAnimation("attack2",!1,e,function(){if(null==a.baseData||a.baseData.isDead)return!0;a.hurtZombies(t,60)}),!0):(t=window.pzazombieManager.getCanAttackZombies(this.baseData,2.5))&&t.length>0?(this.animation.node.scaleX=1,this.animation.playAnimation("attack1",!1,e,function(){if(null==a.baseData||a.baseData.isDead)return!0;a.hurtZombies(t)},1.5),!0):(t=window.pzazombieManager.getCanAttackBackZombies(this.baseData,1.5))&&t.length>0?(this.animation.node.scaleX=-1,this.animation.playAnimation("attack1",!1,e,function(){if(null==a.baseData||a.baseData.isDead)return!0;a.hurtZombies(t)},1.5),!0):void 0},a.prototype.hurtZombies=function(e,a){var t=this;void 0===a&&(a=this.baseData.atk),null!=e&&e.forEach(function(e){if(null!=t.baseData){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(a,t.baseData,s.pzaAttackType.FLOOR_ATK)}})},a.prototype.findFixRangeZombies=function(e,a){if(null==e)return null;var t=[];return window.pzazombieManager.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(p.pzaBuffType.DIVE)||n.buffData.hasBuff(p.pzaBuffType.FLY)||n.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)||r.pzaUtil.getDistance(e,n.logicPos)<=a&&t.push(o.baseData)}),t},i([d],a)}(c.pzaBasePlant));t.pzaCaiWen=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCatSunBullet:[function(e,a,t){"use strict";cc._RF.push(a,"ea889YFEPhI5p1BWwddmlka","pzaCatSunBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCatSunBullet=void 0;var r=e("../../Common/pzaWorldEventManager"),p=e("./pzaTrackBullet"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.close=function(){r.pzaWorldEventManager.removeListener(r.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.hasColl=!0,null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),window.pzaplantManager.plantCreateSun2(this.node.getPosition(),.5,15),e.prototype.close.call(this)},i([s],a)}(p.pzaTrackBullet));t.pzaCatSunBullet=c,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaTrackBullet":"pzaTrackBullet"}],pzaCatapultZombie:[function(e,a,t){"use strict";cc._RF.push(a,"b8c45xHmH5BNaHGZppu8KLF","pzaCatapultZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCatapultZombie=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../../Common/pzaUtil"),c=e("../Bullet/pzaThrowBullet"),u=e("../Data/pzaBuffData"),d=e("../Data/pzaZombieEnum"),h=e("../Plant/pzaAttackType"),m=e("../pzaGameState"),f=e("./pzaBaseZombie"),z=e("./pzaZombieSlot"),y=e("./pzaZombieState"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletPrefab=null,a.shootNode=null,a.firstStopXPos=-1,a.canAttack=!1,a.leftBullet=999,a.attacking=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[z.pzaZombieSlotType.butter,new z.pzaZombieSlot(this.animation.spineAnimation,z.pzaZombieSlotType.butter).addState(new z.pzaZombieSlotAtt(1,z.pzaZombieSlotType.butter,69.04,2.04,-90.39))]])},a.prototype.preview=function(a,t,o){e.prototype.preview.call(this,a,t,o)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.leftBullet=999,this.canAttack=!1,this.attacking=!1;var t=m.pzaGameState.map.getMapColumn(),o=m.pzaGameState.map.getBlockLogicPos(t-1,a.yIndex,0,0);this.firstStopXPos=o.x},a.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled()&&(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),!this.attacking)))if(this.pushBackTime>0)this.pushBackMove(a);else{var t=this.findTarget();if((3==m.pzaGameState.curChapter||4==m.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(t=null),!t||t.isDead){if(!this.canAttack&&null!=this.baseData.logicPos&&this.baseData.logicPos.x<=this.firstStopXPos&&(this.canAttack=!0),this.canAttack&&this.leftBullet>0){var o=this.findCapTarget();if(null!=o)return this.baseData.zombieData.atkInterval-=a,void(this.baseData.zombieData.atkInterval<=0?this.attack(a,o):this.zombieState!=y.pzaZombieState.STAY&&this.playStayAnimation())}this.updateMove(a)}else e.prototype.attack.call(this,a,t)}},a.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var e=this.findTarget();if(null!=e){var a=""+e.xIndex+e.yIndex,t=window.pzaplantManager.plantDataMap.get(a);if(null!=t){var o=window.pzaplantManager.getPlantByData(t);o&&o.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.ROLLING)}}}},a.prototype.death=function(a){e.prototype.death.call(this,a,null,!1),l.pzaSoundManager.playAudio("explosion")},a.prototype.findCapTarget=function(){for(var e=0;e<this.baseData.xIndex;e++){var a=window.pzaplantManager.getCanAttackPlantData(e,this.baseData.yIndex,!0);if(null!=a&&!1===a.buffData.hasBuff(u.pzaBuffType.FROZEN))return a}return null},a.prototype.attack=function(e,a){var t=this;this.zombieState=y.pzaZombieState.EAT_ATK,this.attacking=!0,l.pzaSoundManager.playAudio("CatapultAtk");var o=s.pzaUtil.getRandomFloatNum(0,1);this.animation.playAnimation(o>.5?"attack":"attack2",!1,function(){t.baseData&&(t.refreshQiu(t.leftBullet-1),t.leftBullet--,t.attacking=!1,t.baseData.zombieData.atkInterval=2)},function(){t.shoot(a)})},a.prototype.zombieDying=function(){this.zombieHurtState=d.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.zombieIntact=function(){e.prototype.zombieIntact.call(this)},a.prototype.refreshQiu=function(){},a.prototype.shoot=function(e){if(null!=e&&null!=e.logicPos&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=a.convertToNodeSpaceAR(o);t.setParent(a),t.setPosition(n);var i=t.getComponent(c.pzaThrowBullet);null!=i&&i.init(null,!0,this.baseData.yIndex,this.baseData.atk,e,e.logicPos,e.xIndex)}}}},i([b({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([b({type:cc.Node})],a.prototype,"shootNode",void 0),i([v],a)}(f.pzaBaseZombie);t.pzaCatapultZombie=P,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaCattail:[function(e,a,t){"use strict";cc._RF.push(a,"5f4ddIxVelOYKh2ks0pgTsL","pzaCattail");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCattail=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaUtil"),s=e("../../Common/pzaWorldEventManager"),c=e("../Bullet/pzaTrackBullet"),u=e("../Data/pzaBuffData"),d=e("../pzaGameState"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.atkAniTime=1.4,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.BACK_HOME,this.close,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GAME_OVER,this.close,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BACK_HOME,this.realClose,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.GAME_OVER,this.realClose,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.BACK_HOME,this.realClose,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GAME_OVER,this.realClose,this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.node.zIndex=10*-this.baseData.yIndex-1,this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.onlyShroomCofee=!1},a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=e.findAttackTarget();if(null==t)e.animation.playAnimation("idle",!1,a);else{var o=e.atkAniTime/e.atkInterval*2;e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle2",!1,a)},function(){e.attack(t)},o)},function(){e.attack(t)},o)}};this.animation.playAnimation("idle",!1,a)},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(e.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==t||t>p)&&(t=p,a=r)}}),null!=o?o:a},a.prototype.attack=function(e){if(null!=e&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=a.convertToNodeSpaceAR(o),i=t.getComponent(c.pzaTrackBullet);i&&i.init(this.baseData.atk,e,n,this.baseData.yIndex)}}}},a.prototype.close=function(){e.prototype.close.call(this),this.inUI},a.prototype.realClose=function(){e.prototype.close.call(this)},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([f],a)}(h.pzaBasePlant);t.pzaCattail=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaChallengeView:[function(e,a,t){"use strict";cc._RF.push(a,"43a32l0qUZOI43uvM8WYhjJ","pzaChallengeView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChallengeView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaUIManager"),c=e("../Common/pzaWorldEventManager"),u=e("../Load/pzaPreLoadManager"),d=e("../utils/pzaChannel"),h=e("./pzaCommonMask"),m=e("./pzaPreOpenView"),f=e("./pzaWarningView"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.light=null,a.survivalBtn=null,a.VaseBtn=null,a.enemyBtn=null,a.miniBtn=null,a.trophyCount=null,a.jar_redPoint=null,a.zombieEnemy_redPoint=null,a.endless_redPoint=null,a.special_redPoint=null,a.isTouching=!1,a}return n(a,e),a.prototype.jumpView=function(e){"challenge"==e&&this.close()},a.prototype.onEnable=function(){c.pzaWorldEventManager.addListener(c.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),this.node.x=0,this.light.active=!1,this.survivalBtn.on(cc.Node.EventType.TOUCH_START,this.touchSurvivalBtn,this),this.survivalBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickSurvivalBtn,this),this.survivalBtn.on(cc.Node.EventType.TOUCH_END,this.clickSurvivalBtn,this),this.VaseBtn.on(cc.Node.EventType.TOUCH_START,this.touchVaseBtn,this),this.VaseBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickVaseBtn,this),this.VaseBtn.on(cc.Node.EventType.TOUCH_END,this.clickVaseBtn,this),this.enemyBtn.on(cc.Node.EventType.TOUCH_START,this.touchEnemyBtn,this),this.enemyBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickEnemyBtn,this),this.enemyBtn.on(cc.Node.EventType.TOUCH_END,this.clickEnemyBtn,this),this.miniBtn.on(cc.Node.EventType.TOUCH_START,this.touchMiniBtn,this),this.miniBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickMiniBtn,this),this.miniBtn.on(cc.Node.EventType.TOUCH_END,this.clickMiniBtn,this),this.trophyCount.string=p.pzaLocalData.getTrophy()+"/"+p.pzaLocalData.getMaxTrophy(),d.pzaChannel.instance().showBanner(),this.showRedPoint()},a.prototype.onDisable=function(){c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),this.survivalBtn.off(cc.Node.EventType.TOUCH_START,this.touchSurvivalBtn,this),this.survivalBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickSurvivalBtn,this),this.survivalBtn.off(cc.Node.EventType.TOUCH_END,this.clickSurvivalBtn,this),this.VaseBtn.off(cc.Node.EventType.TOUCH_START,this.touchVaseBtn,this),this.VaseBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickVaseBtn,this),this.VaseBtn.off(cc.Node.EventType.TOUCH_END,this.clickVaseBtn,this),this.enemyBtn.off(cc.Node.EventType.TOUCH_START,this.touchEnemyBtn,this),this.enemyBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickEnemyBtn,this),this.enemyBtn.off(cc.Node.EventType.TOUCH_END,this.clickEnemyBtn,this),this.miniBtn.off(cc.Node.EventType.TOUCH_START,this.touchMiniBtn,this),this.miniBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickMiniBtn,this),this.miniBtn.off(cc.Node.EventType.TOUCH_END,this.clickMiniBtn,this)},a.prototype.showRedPoint=function(){this.jar_redPoint.active=p.pzaLocalData.data.showJarRedPoint,this.zombieEnemy_redPoint.active=p.pzaLocalData.data.showZombieEnemyRedPoint,this.endless_redPoint.active=p.pzaLocalData.data.showEndLessRedPoint,this.special_redPoint.active=p.pzaLocalData.data.showSpecialRedPoint},a.prototype.touchEnemyBtn=function(){this.isTouching||(this.isTouching=!0,this.enemyBtn.active=!0,this.light.active=!0,this.light.setPosition(this.enemyBtn.position))},a.prototype.clickEnemyBtn=function(){var e=this;l.pzaSoundManager.playAudio("gravebutton"),s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){e.isTouching=!1;var t=a&&a.getComponent(f.pzaWarningView);t&&t.show("\u5f53\u524d\u7248\u672c\u6682\u672a\u5f00\u653e","\u786e\u5b9a",null,null,null,"\u6682\u672a\u5f00\u653e")})},a.prototype.touchVaseBtn=function(){this.isTouching||(this.isTouching=!0,this.VaseBtn.active=!0,this.light.active=!0,this.light.setPosition(this.VaseBtn.position))},a.prototype.checkVaseUnlock=function(){return 10*p.pzaLocalData.data.curChapter+p.pzaLocalData.data.curPart>15||p.pzaLocalData.data.preUnlockJar},a.prototype.clickVaseBtn=function(){var e=this;d.pzaChannel.instance().closeBanner(),l.pzaSoundManager.playAudio("gravebutton");var a=function(){p.pzaLocalData.challengPage=1,s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){e.isTouching=!1,h.pzaCommonMask.showMask(),e.node.parent.stopAllActions(),e.node.parent.x=1680,e.node.x=-1680,e.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){h.pzaCommonMask.hideMask(),e.close()})))})};!1!==this.checkVaseUnlock()?(a(),p.pzaLocalData.data.showJarRedPoint=!1):s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(e){var t=e&&e.getComponent(f.pzaWarningView);t&&t.show("\u901a\u5173\u5192\u9669\u6a21\u5f0f1-5\u540e\u89e3\u9501","\u8fd4\u56de","\u63d0\u524d\u89e3\u9501",function(){},function(){d.pzaChannel.instance().showVideo({sucCall:function(){a(),p.pzaLocalData.data.preUnlockJar=!0,p.pzaLocalData.addDirty("preUnlockJar")},failCall:function(){},endCall:function(){},posName:"\u661f\u8fb0\u8bd5\u70bc\u63d0\u524d\u89e3\u9501"})},"\u672a\u89e3\u9501",!1,!1,1)})},a.prototype.touchMiniBtn=function(){this.isTouching||(this.isTouching=!0,this.VaseBtn.active=!0,this.light.active=!0,this.light.setPosition(this.miniBtn.position))},a.prototype.clickMiniBtn=function(){var e=this;s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){e.isTouching=!1;var t=a&&a.getComponent(f.pzaWarningView);t&&t.show("\u5f53\u524d\u7248\u672c\u6682\u672a\u5f00\u653e","\u786e\u5b9a",null,null,null,"\u6682\u672a\u5f00\u653e")})},a.prototype.touchSurvivalBtn=function(){this.isTouching||(this.isTouching=!0,this.survivalBtn.active=!0,this.light.active=!0,this.light.setPosition(this.survivalBtn.position))},a.prototype.clickSurvivalBtn=function(){var e=this;l.pzaSoundManager.playAudio("gravebutton"),p.pzaLocalData.data.showEndLessRedPoint=!1,d.pzaChannel.instance().closeBanner();var a=function(){s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.SURVIVAL_VIEW,function(){h.pzaCommonMask.showMask(),e.node.parent.stopAllActions(),e.node.parent.x=1680,e.node.x=-1680,e.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){h.pzaCommonMask.hideMask(),e.close()}))),e.isTouching=!1})};p.pzaLocalData.data.passLastPart?(p.pzaLocalData.data.preOpenSurvival&&(p.pzaLocalData.data.preOpenSurvival=!1,p.pzaLocalData.addDirty("preOpenSurvival")),a()):s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PRE_OPEN_VIEW,function(t){var o=t&&t.getComponent(m.pzaPreOpenView);o&&o.show(function(){d.pzaChannel.instance().showVideo({sucCall:function(){p.pzaLocalData.data.preOpenSurvival=!0,p.pzaLocalData.addDirty("preOpenSurvival"),a()},failCall:function(){e.isTouching=!1},endCall:function(){},posName:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"})})})},a.prototype.clickBack=function(){var e=this;d.pzaChannel.instance().closeBanner(),this.isTouching=!1,l.pzaSoundManager.playSFX(),s.pzaUIManager.aniHidePopUI(function(){e.close(),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_RECORD_STATE,null),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.BACK_HOMEVIEW,null)})},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([g(cc.Node)],a.prototype,"light",void 0),i([g({displayName:"\u751f\u5b58\u6309\u94ae\u8282\u70b9",type:cc.Node})],a.prototype,"survivalBtn",void 0),i([g({displayName:"\u7838\u7f50\u5b50\u6309\u94ae\u8282\u70b9",type:cc.Node})],a.prototype,"VaseBtn",void 0),i([g({displayName:"\u602a\u4eba\u516c\u654c\u6309\u94ae\u8282\u70b9",type:cc.Node})],a.prototype,"enemyBtn",void 0),i([g({displayName:"\u8ff7\u4f60\u6e38\u620f\u56fe\u8282\u70b9",type:cc.Node})],a.prototype,"miniBtn",void 0),i([g({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],a.prototype,"trophyCount",void 0),i([g(cc.Node)],a.prototype,"jar_redPoint",void 0),i([g(cc.Node)],a.prototype,"zombieEnemy_redPoint",void 0),i([g(cc.Node)],a.prototype,"endless_redPoint",void 0),i([g(cc.Node)],a.prototype,"special_redPoint",void 0),i([y],a)}(cc.Component);t.pzaChallengeView=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaPreOpenView":"pzaPreOpenView","./pzaWarningView":"pzaWarningView"}],pzaChannelBiLi:[function(e,a,t){"use strict";cc._RF.push(a,"38c62XJLX1EzL0VQD7ad4bI","pzaChannelBiLi");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelBiLi=void 0;var i=e("../Common/pzaLocalData"),r=e("../Common/pzaSoundManager"),p=e("../Common/pzaStatisticsMgr"),l=e("../Common/pzaWorldEventManager"),s=e("../View/pzaCommonMask"),c=e("./pzaChannelWeb"),u=e("./pzakc"),d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="bl",a.channelId=6,a.paraMap=new Map([["appId","biligame6b65c7dd5e4a917b"],["vedioAd","bili-211735109062822394"],["ctrlId","676cbd1dac07a817fa283c1e"],["gid",""]]),a.sharePicsArr=[],a.shareTitle="",a.shareImgId="",a.channelObj=window.bl,a.sid=null,a.ruanzhu="\u8457\u4f5c\u6743\u4eba: \u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8\n\u767b\u8bb0\u53f7:2024SA0021151",a.onShowCall=null,a.authorizationButton=null,a.shareIndex=0,a.startTime=0,a}return n(a,e),a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.hasPrivacy=function(){return!0},a.prototype.exit=function(){this.channelObj.exitMiniProgram({isFullExit:!0})},a.prototype.init=function(a){var t=this;console.log("bl init"),e.prototype.init.call(this,a);var o=this.channelObj;o.onShow(function(e){cc.game.resume(),r.pzaSoundManager.resumeMusic(),t.onShowCall&&t.onShowCall(),t.onShowCall=null,console.log("onshow res:",e);var a=u.default.getData("sidebar",{today:"",canGet:"0"});"021036"==e.scene&&(a.canGet="1"),u.default.saveData("sidebar",a),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,null)}),o.onHide(function(){cc.game.pause(),t.isShare&&(t.shareTime=(new Date).getTime())});var n=u.default.getData("sid",null);n||(n=this.channelObj.getLaunchOptionsSync().scene,u.default.saveData("sid",n));var p={id:this.getPara("ctrlId"),sid:n},s=this;u.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",p,function(e,o){e?u.default.err(e):""+o.code=="0"?(t.ctrl=o.data,u.default.log("b\u7ad9\u8fd4\u56de",t.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(s.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(s.ctrl.p3),i.pzaLocalData.data.showBeginViewMax=parseInt(s.ctrl.p5),i.pzaLocalData.data.showDaveViewMax=parseInt(s.ctrl.p5),i.pzaLocalData.data.showGardenViewMax=parseInt(s.ctrl.p5),i.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(s.ctrl.p6),t.blLogin(function(){a&&a()})):u.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))});var c=u.default.getData("sidebar",null),d={today:"",canGet:""};c&&(d=c),o.checkScene?o.checkScene({scene:"sidebar",success:function(e){console.log("check scene success: ",e.isExist),d.canGet="0","021036"==t.channelObj.getLaunchOptionsSync().scene&&(d.canGet="1"),u.default.saveData("sidebar",d),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,null)},fail:function(e){console.log("check scene fail:",e),d.canGet="-1",u.default.saveData("sidebar",d)}}):console.log("\u6ca1\u6709checkScene"),o.setKeepScreenOn({keepScreenOn:!0})},a.prototype.initSharePic=function(e){null==e||e.length<=0||(this.sharePicsArr=[])},a.prototype.onLoginSuc=function(){var e=this.channelObj.getLaunchOptionsSync().query;e&&e.act&&e.sid&&(this.sid=e.sid,this.shareFrom(),this.getUserInfo(null))},a.prototype.shareFrom=function(){this.sid&&this.channelUserId},a.prototype.getUserInfoToWeb=function(){},a.prototype.getShareResult=function(e,a){if(!this.channelUserId)return a([]);var t={appId:this.getPara("appId"),openId:this.channelUserId,act:e};u.default.jpost("https://ga.gamejym.com/fcm/zijie/getShareResult",t,function(e,t){if(e)return u.default.err(e),void a([]);u.default.log("getShareResult\u8fd4\u56de",t),t&&0===t.code?a(t.data):a([])})},a.prototype.blLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=window.bl,t=this;a.login({force:!0,success:function(o){console.log("login \u8c03\u7528\u6210\u529f",o.code),a.getLaunchOptionsSync(),u.default.jpost("https://ga.gamejym.com/fcm/bili/getOpenId",{appId:t.getPara("appId"),code:o.code},function(a,o){return a?(u.default.err(a),void e(a)):(u.default.log("\u83b7\u53d6openId",o),o.openid?(t.channelUserId=o.openid||"",void e(null)):(u.default.err("\u83b7\u53d6openId\u5931\u8d25",o),void e(o)))})},fail:function(a){e(a.errMsg),console.log("login\u8c03\u7528\u5931\u8d25")}})},a.prototype.getShareObj=function(){var e=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[e]},a.prototype.sendUserInfo=function(e){if(null!=e)if(this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};u.default.jpost("https://ga.gamejym.com/fcm/zijie/sendUserInfo",a,function(e,a){e?u.default.err(e):u.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(e,a,t){void 0===t&&(t=!0);var o=this.channelObj,n=this;o.getUserInfo({success:function(e){console.log("getUserInfo\u8c03\u7528\u6210\u529f: ",e.userInfo),n.sendUserInfo({nickName:e.userInfo.nickName,avatarUrl:e.userInfo.avatarUrl})},fail:function(e){console.log("getUserInfo\u8c03\u7528\u5931\u8d25: ",e.errMsg)}})},a.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(e){this.authorizationButton=null,console.error(e)}},a.prototype.canShare=function(){return!0},a.prototype.showBanner=function(e,a){var t=this,o=this.getPara("bannerAd");if(o){u.default.log("showBanner isShow",o);var n=this.channelObj,i={adUnitId:o};this.bannerAd=n.createBannerAd(i),this.bannerAd.onResize(function(e){console.log("banner onResize===",e.height,e.width);var o=a?a(e):{top:t.getSysInfo().windowHeight-e.height,left:(t.getSysInfo().windowWidth-e.width)/2};t.bannerAd.style.top=o.top,t.bannerAd.style.left=o.left}),this.bannerAd.onLoad(function(){t.bannerAd.show().then(function(){u.default.log("banner\u52a0\u8f7d\u6210\u529f")}).catch(function(e){t.bannerAd=null,u.default.log("showBanner err:"+JSON.stringify(e))})})}},a.prototype.closeBanner=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},a.prototype.showBannerByTime=function(e){void 0===e&&(e=!1)},a.prototype.closeBannerByTime=function(){this.closeBanner()},a.prototype.copyToClip=function(e,a){this.channelObj.setClipboardData({data:e,success:function(){a(null)},fail:function(e){a(e)}})},a.prototype.showVideo=function(e){var a=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:e.adsid},{name:"adname",value:e.posName});var t=this.getPara("vedioAd");if(t){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},this.startTime=Date.now(),o.videoFns.onError=function(t){u.default.err("onError",t),cc.game.resume(),s.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),e.failCall(),e.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:-1},{name:"adname",value:e.posName}),a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){if(cc.game.resume(),s.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),t&&t.isEnded){if(i.pzaLocalData.bpWatchAd(),e.sucCall(),e.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:0},{name:"adname",value:e.posName}),u.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+e.posName),!u.default.getData("ttAdReport",0)||!o.channelUserId)return void console.log("\u9700\u8981\u5148\u6fc0\u6d3b\u624d\u80fd\u56de\u4f20\u5173\u952e\u884c\u4e3a");var n=a.channelObj.getLaunchOptionsSync().query.clickid;if(!n)return void console.log("\u65e0clickid");u.default.jpost("https://ga.gamejym.com/fcm/ttAdReport/report",{appId:o.getPara("appId"),type:"game_addiction",openId:o.channelUserId,clickid:n},function(e,a){e?u.default.err(e):u.default.log("\u56de\u4f20\u5173\u952e\u884c\u4e3a\u8fd4\u56de",a)})}else e.failCall(),e.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:1},{name:"adname",value:e.posName})},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return u.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),s.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),s.pzaCommonMask.hideMask()})})}},a.prototype.showInter=function(e){var a=this.getPara("insertAd");if(a){var t=this.channelObj;this.ctrl&&this.ctrl.p1&&parseInt(this.ctrl.p1)||e?(u.default.log("showInter isShow",a),this.interstitialAd=t.createInterstitialAd({adUnitId:a}),this.interstitialAd.show().then(function(){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})):u.default.log("\u63d2\u5c4f\u4e0d\u5c55\u793a")}},a.prototype.closeInter=function(){this.interstitialAd&&this.interstitialAd.close&&this.interstitialAd.close()},a.prototype.showDesktop=function(){},a.prototype.checkShortcut=function(e){window.bl.checkShortcut({success:function(a){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f",a.status),a.status&&0==a.status.exist?e.sucCall():e.failCall()},fail:function(a){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",a.errMsg),e.failCall()}})},a.prototype.addShortcut=function(e){this.channelObj.addShortcut({success:function(){u.default.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),e.sucCall()},fail:function(a){u.default.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25:"+a.errMsg),e.failCall()}})},a.prototype.shareAppMessage=function(e,a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),this.canShare()){var o=this.getShareObj(),n="";if(e&&e.act&&(n=e.act),n){var i=this;i.shareFailBack=null,i.shareSucBack=null,i.isShare=!1,"recruit_share"==e.act&&(i.isShare=!0,i.shareFailBack=t,i.shareSucBack=a);var r={appId:this.getPara("appId"),openId:this.channelUserId,act:n};u.default.jpost("https://ga.gamejym.com/fcm/zijie/shareTo",r,function(e,a){if(e)u.default.err(e);else{u.default.log("shareTo\u8fd4\u56de",a);var t={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};a&&0===a.code&&(t.query="sid="+a.data.sid+"&act="+n,u.default.log("shareQuery",t.query)),i.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:t.query,success:function(){console.log("act share succ"),i.shareSucBack&&i.shareSucBack()},fail:function(){console.log("act share fail"),i.shareFailBack&&i.shareFailBack()}})}})}else{this.shareFailBack=t,this.shareSucBack=a,this.isShare=!0;var p=this;this.channelObj.shareAppMessage({success:function(){console.log("11share succ"),p.shareSucBack&&p.shareSucBack()},fail:function(){console.log("22share fail"),p.shareFailBack&&p.shareFailBack()}})}}},a.prototype.isShowSideView=function(e){var a=u.default.getData("sidebar",{today:"",canGet:"-1"});window.bl.navigateToScene({scene:"sidebar",success:function(t){console.log("navigate to scene success",t),"021036"==t.scene&&(a.canGet="1"),u.default.saveData("sidebar",a),e&&e(!0)},fail:function(a){console.log("navigate to scene fail: ",a),e&&e(!1)}})},a.prototype.reportScene=function(){this.channelObj.reportScene({sceneId:7,success:function(e){console.log(e)},fail:function(e){console.log(e)}})},a.unionid=null,a}(c.pzaChannelWeb);t.pzaChannelBiLi=d,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelHw:[function(e,a,t){"use strict";cc._RF.push(a,"10b6dtUpnBJZ7ZqMj0lHM74","pzaChannelHw");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelHw=void 0;var i,r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaUIManager"),s=e("../Common/pzaUtil"),c=e("../Common/pzaWorldEventManager"),u=e("../Load/pzaBundleObjectPool"),d=e("../Load/pzaPreLoadManager"),h=e("./pzaChannel"),m=e("./pzaChannelWeb"),f=e("./pzakc"),z=e("./pzaNativeInterAd");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={}));var y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="hw",a.paraMap=new Map([["appId","113525781"],["bannerAd","testw6vs28auh3"],["nativeInsertAd","testu7m3hc4gvm"],["videoAd","testx9dtjwj8hp"],["ctrlId","67e4f93fc8946b1700d96065"]]),a.channelObj=window.qg,a.bannerState=i.Hide,a.privacyStr=['\u66f4\u65b0\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b> \u751f\u6548\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b>\n\n<b>\u5357\u4eac\u6854\u67da\u6aac\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u6854\u67da\u6aac\u201d\u6216\u201c\u6211\u4eec\u201d\uff09</b>\u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n<color=#009EFF">\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f</color>\n\n\u7535\u5b50\u90ae\u4ef6: <b>lpx@gamejym.com</b>\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5e02\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885718\u53f71\u680b\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n<color=#009EFF">\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a</color>\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n<color=#009EFF">\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5</color>\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n<b>\u8bbe\u5907\u6743\u9650</b>\t<b>\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684</b>\t<b>\u662f\u5426\u8be2\u95ee</b>\t<b>\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650</b>\n<b>\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef</b>\n<b>\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef</b>\n<b>\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef</b>\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n<color=#009EFF">1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a     \n\n<color=#009EFF">1.1 \u6ce8\u518c\u3001\u767b\u5f55</color>\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n<color=#009EFF">1.2 \u8ba4\u8bc1</color>\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002                                 \n\n<color=#009EFF">1.3 \u4fe1\u606f\u53d1\u5e03</color>\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n<color=#009EFF">1.4 \u5b89\u5168\u8fd0\u884c</color>\n\n<color=#009EFF">1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd</color>\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n<color=#009EFF">1.4.2 \u65e5\u5fd7\u4fe1\u606f</color>\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n<color=#009EFF">1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4</color>\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n<color=#009EFF">1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n<color=#009EFF">2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528</color>\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n<color=#009EFF">3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">3.1\u5171\u4eab</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n<color=#009EFF">3.2 \u8f6c\u8ba9</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n<color=#009EFF">3.3 \u62ab\u9732</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n<color=#009EFF">3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n<color=#009EFF">4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">4.1 \u5b58\u50a8\u5730\u70b9</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002                       \n\n<color=#009EFF">4.2 \u5b58\u50a8\u671f\u9650</color>\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168</color>\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n<color=#009EFF">6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n<color=#009EFF">6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f</color>\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n<color=#009EFF">6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9</color>\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n<color=#009EFF">6.2 \u6ce8\u9500\u5e10\u53f7</color>\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 <b>lpx@gamejym.com</b>\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">6.3 \u6295\u8bc9\u4e3e\u62a5</color>\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 <b>lpx@gamejym.com</b> \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n<color=#009EFF">6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56</color>\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n<color=#009EFF">6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5</color>\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n<color=#009EFF">7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e</color>\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n<color=#009EFF">8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5</color>\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002'],a.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8  \u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2024SA0026397\n",a.videoReady=!0,a.videoAdClickDelay=null,a.videoParas=null,a.showBannerCDOver=!0,a.bannerTimeId=-1,a.showInterCDOver=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!0},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.exit=function(){this.channelObj.exitApplication()},a.prototype.qgLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=this;console.log("Sign-in",this.getPara("appId")),this.channelObj.gameLoginWithReal({forceLogin:1,appid:this.getPara("appId"),success:function(t){console.log(" game login with real success:"+JSON.stringify(t)),a.channelUserId=t.playerId,e&&e("login succ")},fail:function(a,t){console.log("game login with real fail:"+a+", code:"+t),7004!=t&&2012!=t||(console.log("\u73a9\u5bb6\u53d6\u6d88\u767b\u5f55\uff0c\u8fd4\u56de\u6e38\u620f\u754c\u9762\u8ba9\u73a9\u5bb6\u91cd\u65b0\u767b\u5f55\u3002"),e&&e("login fail")),7021==t&&(console.log("The player has canceled identity verification. Forbid the player from entering the game."),e&&e("login fail"))}})},a.prototype.sendUserInfo=function(e){if(null!=e)if(r.pzaLocalData.data.playerNick=e.nickName,r.pzaLocalData.data.playerAvatar=e.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",a,function(e,a){e?f.default.err(e):f.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(){},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this,n=this.getPara("ctrlId");if(n){var i={id:n};f.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,n){e?f.default.err(e):""+n.code=="0"?(t.ctrl=n.data,f.default.log("\u8fd4\u56de",t.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),t.qgLogin(function(){a&&a()}),t.reLoadVideo()):f.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0")}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u91cd\u65b0\u8fd4\u56de\u6e38\u620f"),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.REPORT_AD_SHOW,null)})},a.prototype.reLoadVideo=function(){var e=this;this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:this.getPara("videoAd"),success:function(){console.log("loadAndShowVideoAd createRewardedVideoAd success")},fail:function(e,a){console.log("loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+a)},complete:function(){console.log("loadAndShowVideoAd createRewardedVideoAd complete")}}),this.rewardedVideoAd.onLoad(function(){console.log("videoAd loaded.")}),this.rewardedVideoAd.onError(function(a){console.error("load ad error:"+JSON.stringify(a)),cc.game.resume(),p.pzaSoundManager.resumeMusic(),e.videoParas.endCall&&e.videoParas.endCall(),e.videoParas.failCall&&e.videoParas.failCall(),e.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})}),this.rewardedVideoAd.onClose(function(a){f.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",a),a&&a.isEnded||void 0===a?(r.pzaLocalData.bpWatchAd(),console.log("\u64ad\u653e\u6fc0\u52b1\u89c6\u9891\u7ed3\u675f\uff0c\u7ed9\u4e88\u5956\u52b1"),e.videoParas.sucCall&&e.videoParas.sucCall(),f.default.eventReport("showVideo\u5b8c\u6210-"+e.videoParas.posName)):(console.log("\u64ad\u653e\u6ca1\u7ed3\u675f\uff0c\u4e0d\u7ed9\u4e88\u5956\u52b1"),e.videoParas.failCall()&&e.videoParas.failCall()),cc.game.resume(),p.pzaSoundManager.resumeMusic(),e.videoParas.endCall&&e.videoParas.endCall()}),this.rewardedVideoAd.load()},a.prototype.showVideo=function(e){var a=this;if(!this.videoReady)return cc.game.resume(),p.pzaSoundManager.resumeMusic(),this.videoParas.failCall&&this.videoParas.failCall(),this.videoParas.endCall&&this.videoParas.endCall(),void this.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"});this.videoReady=!1,setTimeout(function(){a.videoReady=!0},3e3),this.videoParas=e,this.rewardedVideoAd.show(),this.rewardedVideoAd.load()},a.prototype.showBanner=function(){var e=this;if(this.showBannerCDOver){var a=this.getPara("bannerAd");if(a)if(this.bannerState!=i.Show){this.bannerState=i.Show,f.default.log("showBanner",a);var t=this.channelObj.getSystemInfoSync().safeArea.height;this.bannerAd=this.channelObj.createBannerAd({adUnitId:a,adIntervals:30,style:{top:t-57,left:0,height:57,width:360}}),this.bannerAd.onLoad(function(){console.log("bannerAd  onload success"),e.bannerState==i.Hide&&e.closeBanner(),e.bannerState==i.Show&&(e.showBannerCDOver=!1,setTimeout(function(){e.showBannerCDOver=!0},3e4))}),this.bannerAd.onError(function(e){f.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.bannerAd.show()}else f.default.log("\u5df2\u7ecf\u663e\u793abanner")}},a.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},a.prototype.showBannerByTime=function(e){var a=this;void 0===e&&(e=!1);var t=30;this.getCtrl("p4")<1?f.default.log("banner\u4e0d\u5c55\u793a"):(this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<30&&(t=30),this.showBanner(e,null,"battle"),this.bannerTimeId=setInterval(function(){a.showBanner(e,null,"battle")},1e3*t))},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.showInter=function(e){var a=s.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",h.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",a),(e||h.pzaChannel.instance().getCtrl("p10")>=a)&&this.createNativeInterAd()},a.prototype.createNativeInterAd=function(){var e=this.getPara("nativeInsertAd");if(e)if(this.showInterCDOver){if(0!=this.getCtrl("p21")){var a=this,t=h.pzaChannel.instance().getCtrl("p11");console.log("p11",t),this.nativeInterAd=this.channelObj.createNativeAd({adUnitId:e,success:function(){console.log("loadNativeAd loadNativeAd : success"),a.showInterCDOver=!1,setTimeout(function(){a.showInterCDOver=!0},1e3*t)},fail:function(e,a){console.log("loadNativeAd loadNativeAd fail: "+e+","+a)},complete:function(){console.log("loadNativeAd loadNativeAd : complete")}}),this.nativeInterAd.offLoad(),this.nativeInterAd.onLoad(function(e){var t=h.pzaChannel.instance().getCtrl("p12");console.log("p12",t);var o=this.getCtrl("p26"),n=s.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",h.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",n);var i=0;.01*o>=n&&(i=1e3),setTimeout(function(){var t=e.adList[0];a.createInterAdNode(t.adId,t.imgUrlList,t.title,t.source,t.clickBtnTxt)},t*i)}),this.nativeInterAd.offError(),this.nativeInterAd.onError(function(e){console.log("ad demo : loadNativeAd onError enter"+e.errCode),console.log("ad demo : loadNativeAd onError enter"+e.errMsg)}),this.nativeInterAd.load()}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},a.prototype.createInterAdNode=function(e,a,t,o,n){console.log("createInterAd adid="+e),u.pzaBundleObjectPool.requestInstantByUrl(d.pzaResourceUrl.NATIVE_INTER_AD,!1,function(i,r){null==i&&null!=r?l.pzaUIManager.instance&&l.pzaUIManager.instance.node&&(r.setParent(l.pzaUIManager.instance.node),r.zIndex=999,r&&r.getComponent(z.pzaNativeInterAd).init(e,a,t,o,n)):console.error(i)})},a.prototype.reportAdShow=function(e){console.log("reportAdShow:",e),this.nativeInterAd.reportAdShow({adId:e})},a.prototype.reportAdClick=function(e){console.log("reportAdClick:",e),this.nativeInterAd.reportAdClick({adId:e})},a.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),this.channelObj.systemShare({type:"text/plain",data:"this is a message from quick game.",success:function(){console.info("share text success")},fail:function(e,a){console.info("share text fail --- "+a+":"+e)},cancel:function(){console.info("share cancel ")},complete:function(){console.info("share complete ")}})},a.prototype.addShortcut=function(e){console.log("click hw addShortcut"),this.channelObj.installShortcut({message:"\u6dfb\u52a0\u6e38\u620f\u56fe\u6807\u5230\u4f60\u7684\u684c\u9762",success:function(){console.log("handling install success"),console.log("\u521b\u5efa\u6210\u529f"),e.sucCall&&e.sucCall()},fail:function(e,a){console.log("handling install fail: "+e+", errocode: "+a)},complete:function(){console.log("handling install  complete")}})},a.prototype.checkShortcut=function(e){this.channelObj.hasShortcutInstalled({success:function(a){console.log("hasInstalledsuccess\uff1a "+a),0==a?e.sucCall&&e.sucCall():e.failCall&&e.failCall()},fail:function(e){console.log("hasInstalled fail: "+e)},complete:function(){console.log("hasInstalled complete")}})},a}(m.pzaChannelWeb);t.pzaChannelHw=y,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaNativeInterAd":"pzaNativeInterAd","./pzakc":"pzakc"}],pzaChannelIOS:[function(e,a,t){"use strict";cc._RF.push(a,"2c6c7wq3+9Eqq7w7Hv7emWW","pzaChannelIOS");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelIOS=void 0;var i=e("./pzaChannelWeb"),r=e("./pzaKDefine"),p=e("./pzakc"),l=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="ios",a}return n(a,e),a.prototype.init=function(a){e.prototype.init.call(this,a),window.showComm=this.showComm,window.exitGame=this.exit,window.showAlert=this.showAlert},a.prototype.copyToClip=function(e){jsb.reflection.callStaticMethod("AppController","copy2Clip:",e)},a.prototype.hasPrivacy=function(){return!!p.default.getData("isAgree",0)},a.prototype.exit=function(){p.default.log("\u9000\u51fa\u6e38\u620f"),jsb.reflection.callStaticMethod("AppController","onExit:",""),cc.game.end()},a.prototype.showVideo=function(e){window.videoSuc=e.sucCall,window.videoFail=e.failCall;var a=e.endCall;e.endCall=function(){cc.game.resume(),a()},cc.game.pause(),window.videoEnd=e.endCall,jsb.reflection.callStaticMethod("AppController","showVideo:","")},a.prototype.showComm=function(){p.default.log("showComm-ios"),jsb.reflection.callStaticMethod("AppController","showComm:","")},a.prototype.showAlert=function(){p.default.log("showAlert-ios"),p.default.sendMsg(r.Msg.showIosAlert)},a}(i.pzaChannelWeb);t.pzaChannelIOS=l,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaChannelKs:[function(e,a,t){"use strict";cc._RF.push(a,"e9fa8VLpddPsooqAc+gUSe7","pzaChannelKs");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelKs=void 0;var i=e("../Common/pzaLocalData"),r=e("../Common/pzaSoundManager"),p=e("../Common/pzaStatisticsMgr"),l=e("../Common/pzaUtil"),s=e("../Common/pzaWorldEventManager"),c=e("../View/pzaCommonMask"),u=e("./ks_analytics"),d=e("./pzaChannel"),h=e("./pzaChannelWeb"),m=e("./pzakc"),f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="ks",a.channelId=3,a.reportChannel="ks",a.paraMap=new Map([["appId","ks681732394039713600"],["vedioAd","2300006644_01"],["insertAd","2300006644_02"],["ctrlId","6653eceda331ce3adb822a39"],["gid","6625cc6ea331ce3adb8228f6"]]),a.sharePicsArr=[{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",id:"Xf4UCePgQ6Owe0gO7nnOkw=="},{title:"\u5927\u54e5\uff0c\u6765\u548c\u59b9\u59b9\u4e00\u8d77\u73a9\u597d\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/I1v75NcAhVDGbaKAWabMVB4HY5iaW8HfrWOqvibxcq1ic32xLibRswZuVj6txBSykbHl/0",id:"7Ic8CnJeSN+yLEi8xpRO5w=="}],a.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2024SA0026397",a.channelObj=window.ks,a.sid=null,a.authorizationButton=null,a.onShowCall=null,a.cachedBannerSize=null,a.bannerTimeId=-1,a.shareIndex=0,a.showInterCDOver=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!0},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this.channelObj;o.onShow(function(e){cc.game.resume(),r.pzaSoundManager.resumeMusic();var a=o.getLaunchOptionsSync();console.log("onshow result:",a),console.log("onshow res:",e);var n=m.default.getData("sidebar",{today:"",canGet:"0"});a&&a.from&&(a.from.sidebar_new||"sidebar_new"==a.from)&&(n.canGet="1"),m.default.saveData("sidebar",n),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,null),t.onShowCall&&t.onShowCall()}),o.onHide(function(){cc.game.pause(),t.isShare&&(t.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),p=this;if(n){var l=m.default.getData("sid",null);l||(l=p.channelObj.getLaunchOptionsSync().from,m.default.saveData("sid",l));var c={id:n,sid:l};m.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",c,function(e,o){if(e)m.default.err(e);else if(""+o.code=="0"){p.ctrl=o.data,m.default.log("\u5feb\u624b\u8fd4\u56de",p.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(p.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(p.ctrl.p3),i.pzaLocalData.data.showBeginViewMax=parseInt(p.ctrl.p5),i.pzaLocalData.data.showDaveViewMax=parseInt(p.ctrl.p5),i.pzaLocalData.data.showGardenViewMax=parseInt(p.ctrl.p5),i.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(p.ctrl.p6),t.ksLogin(function(){a&&a()}),console.log("me.channelObj.getLaunchOptionsSync()",p.channelObj.getLaunchOptionsSync());var n=p.channelObj.getLaunchOptionsSync().from;if(n){var r=m.default.getData("game_center",null);r||(r="game_center"==n,m.default.saveData("game_center",r));var l=m.default.getData("search",null);l||(l="search"==n,m.default.saveData("search",l)),console.log("search ",l),console.log("game_center ",r),(r||l)&&(p.ctrl.p31="0"),console.log("me.ctrl.p31 ",p.ctrl.p31)}}else m.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}var u=m.default.getData("sidebar",{today:"",canGet:"0"}),h=new Date,f=h.getUTCFullYear()+"-"+h.getUTCMonth()+"-"+h.getUTCDay();u.today!=f&&(u.canGet="0");var z=this.channelObj.getLaunchOptionsSync().sidebar_new;console.log("sidebar_new :",z),z&&(u.canGet="1"),m.default.saveData("sidebar",u),d.pzaChannel.getSharePics("zwdzjs",function(e){t.initSharePic(e)})},a.prototype.onLoginSuc=function(){var e=this.channelObj.getLaunchOptionsSync().query;e&&e.act&&e.sid&&(this.sid=e.sid,this.shareFrom(),null!=i.pzaLocalData.data.playerNick&&null!=i.pzaLocalData.data.playerAvatar||this.getUserInfo(null))},a.prototype.initSharePic=function(e){var a=this;null==e||e.length<=0||(this.sharePicsArr=[],e.forEach(function(e){var t={title:e.txt,url:e.picUrl,id:e.picId};a.sharePicsArr.push(t)}))},a.prototype.ksLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=window.ks,t=this;a.login({success:function(a){if(!a.code)return console.log("\u767b\u5f55\u5931\u8d25\uff01"+a.errMsg),void e(a.errMsg);var o=window.ks.getLaunchOptionsSync().query,n=t.getPara("appId");u.default.init(n,a.code,o,function(a){console.log("ks_ana\u521d\u59cb\u5316\u6210\u529f",a),t.channelUserId=a.result.open_id,e(null),console.log("ks-openId:",t.channelUserId)},function(){e("\u83b7\u53d6openid\u5931\u8d25"),console.log("\u521d\u59cb\u5316\u5931\u8d25")}),m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/getOpenId",{appId:t.getPara("appId"),code:a.code},function(e,a){e||m.default.log("get serverTime",a)})},fail:function(){e(null)}})},a.prototype.cacheBanner=function(){var e=this;if(this.getPara("bannerAd")&&(!this.bannerAd||!this.cachedBannerSize)){m.default.log("cacheBanner\u5f00\u59cb,size:",this.cachedBannerSize,"ad:",this.bannerAd);var a=this.channelObj,t={adUnitId:this.getPara("bannerAd"),adIntervals:30,style:{left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1}};this.bannerAd=a.createBannerAd(t),this.bannerAd.onError(function(a){m.default.log("cachedBanner\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),e.bannerAd=null,e.cachedBannerSize=null}),this.bannerAd.onResize(function(a){console.log("cachedBanner onResize===",a.height,a.width),e.cachedBannerSize=a}),this.bannerAd.show().then(function(){m.default.log("cachedBanner\u6210\u529f")}).catch(function(a){m.default.log("cachedBanner err:"+JSON.stringify(a)),e.bannerAd=null,e.cachedBannerSize=null})}},a.prototype.showBanner=function(e,a,t){var o=this,n=this.getPara("bannerAd");if(n&&0!=this.getCtrl("p21")){console.log("getSystemInfo.version",this.getSysInfo().version),m.default.log("showBanner isShow",n,t);var i=this.channelObj,r={adUnitId:n,adIntervals:30,style:{left:0,top:0,width:320,height:100}};this.bannerAd=i.createBannerAd(r),this.bannerAd.onError(function(e){m.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e)),o.bannerAd=null,o.cachedBannerSize=null}),this.bannerAd.onResize(function(e){console.log("banner onResize===",e.height,e.width),m.default.log("bannerAd style:",o.bannerAd.style.top,o.bannerAd.style.left)}),this.bannerAd.show().then(function(){m.default.log("banner\u663e\u793a\u6210\u529f"),m.default.log(o.bannerAd)}).catch(function(e){m.default.log("banner\u663e\u793a\u9519\u8bef"),o.bannerAd=null,o.cachedBannerSize=null,m.default.log("showBanner err:"+JSON.stringify(e))})}},a.prototype.closeBanner=function(){if(this.bannerAd)if(this.cachedBannerSize){var e={left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1};this.bannerAd.style.left=e.left,this.bannerAd.style.top=e.top}else this.bannerAd.destroy()},a.prototype.showBannerByTime=function(e){var a=this;if(void 0===e&&(e=!1),this.getPara("bannerAd")){var t=30;this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<30&&(t=30),this.showBanner(e,null,"battle"),this.bannerTimeId=setInterval(function(){a.showBanner(e,null,"battle")},1e3*t)}},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.canShare=function(){return!0},a.prototype.getShareObj=function(){var e=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[e]},a.prototype.sendUserInfo=function(e){if(null!=e)if(i.pzaLocalData.data.playerNick=e.nickName,i.pzaLocalData.data.playerAvatar=e.avatarUrl,i.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/sendUserInfo",a,function(e,a){e?m.default.err(e):m.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(e,a,t){void 0===t&&(t=!0);var o=this.channelObj,n=this;o.authorize({scope:"scope.userInfo",success:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),o.getUserInfo({success:function(a){console.log("userInfo",a.userInfo),n.sendUserInfo(a.userInfo),e&&e()}})},fail:function(e){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(e))},complete:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5b8c\u6210")}})},a.prototype.shareAppMessage=function(e,a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),this.canShare()){var o=this.getShareObj(),n="";if(e&&e.act&&(n=e.act),n){var r=this;r.shareFailBack=null,r.shareSucBack=null,r.isShare=!1,"recruit_share"==e.act&&(r.isShare=!0,r.shareFailBack=t,r.shareSucBack=a);var p={appId:this.getPara("appId"),openId:this.channelUserId,act:n};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/shareTo",p,function(e,a){if(e)m.default.err(e);else{m.default.log("shareTo\u8fd4\u56de",a);var t={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};a&&0===a.code&&(t.query="sid="+a.data.sid+"&act="+n,m.default.log("shareQuery",t.query)),r.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:t.query,success:function(){i.pzaLocalData.shareGetCoin(),r.shareSucBack&&r.shareSucBack()},fail:function(){console.log("act share fail"),r.shareFailBack&&r.shareFailBack()}})}})}else{this.shareFailBack=t,this.shareSucBack=a,this.isShare=!0;var l=this;this.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,success:function(){l.shareSucBack&&l.shareSucBack(),i.pzaLocalData.shareGetCoin()},fail:function(){l.shareFailBack&&l.shareFailBack()}})}}},a.prototype.shareByScreenShot=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null);var o=this,n=16*canvas.height/9;try{canvas.toTempFilePath({x:.3234375*n+(canvas.width-n)/2,y:0,width:.5078125*n,height:.85*canvas.height,destWidth:500,destHeight:400,success:function(n){o.channelObj.shareAppMessage({title:e,imageUrl:n.tempFilePath}),o.shareFailBack=t,o.shareSucBack=a,o.isShare=!0},fail:function(e){console.log("shareByScreenShot",e)}})}catch(i){console.log("shareByScreenShot",i)}},a.prototype.shareFrom=function(){if(this.sid&&this.channelUserId){m.default.log("shareFrom join");var e={sid:this.sid,openId:this.channelUserId,star:i.pzaLocalData.getAllStar()};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/shareFrom",e,function(e,a){e?m.default.err(e):m.default.log("shareFrom\u8fd4\u56de",a)})}else m.default.log("sid null channelUserId null")},a.prototype.getShareResult=function(e,a){if(!this.channelUserId)return a([]);var t={appId:this.getPara("appId"),openId:this.channelUserId,act:e};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/getShareResult",t,function(e,t){if(e)return m.default.err(e),void a([]);m.default.log("getShareResult\u8fd4\u56de",t),t&&0===t.code?a(t.data):a([])})},a.prototype.copyToClip=function(e,a){this.channelObj.setClipboardData({data:e,success:function(){a()},fail:function(e){console.error("res: ",e),a("\u590d\u5236\u5931\u8d25: ")}})},a.prototype.showVideo=function(e){var a=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:e.adsid},{name:"adname",value:e.posName});var t=this.getPara("vedioAd");if(t){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){m.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(t){m.default.err(t),e.failCall(),e.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:-1},{name:"adname",value:e.posName}),cc.game.resume(),r.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask(),i.pzaLocalData.maxAdShareCount>0&&i.pzaLocalData.data.adShareCount<i.pzaLocalData.maxAdShareCount?a.shareAppMessage({title:null,act:null,adsid:e.adsid},function(){i.pzaLocalData.data.adShareCount++,i.pzaLocalData.addDirty("adShareCount"),e.sucCall&&e.sucCall()}):a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(a){c.pzaCommonMask.hideMask(),cc.game.resume(),r.pzaSoundManager.resumeMusic(),a&&a.isEnded?(i.pzaLocalData.bpWatchAd(),e.sucCall(),o.channelUserId&&u.default.ad_complete(o.channelUserId),m.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+e.posName),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:0},{name:"adname",value:e.posName})):(e.failCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:1},{name:"adname",value:e.posName})),e.endCall()},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){o.channelUserId&&u.default.ad_exposure(o.channelUserId),m.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return m.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask()})})}},a.prototype.showInter=function(e){var a=this,t=l.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10: ",d.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),e||.01*d.pzaChannel.instance().getCtrl("p10")>=t){if(!this.showInterCDOver)return void console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d");var o=this.getPara("insertAd");if(!o)return;var n=this,i=d.pzaChannel.instance().getCtrl("p11");console.log("p11",i);var r=this.channelObj;m.default.log("showInter isShow",o),this.interstitialAd=r.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.interstitialAd.offClose(),this.interstitialAd.onClose(function(){var e=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",d.pzaChannel.instance().getCtrl("p18")),.1*d.pzaChannel.instance().getCtrl("p18")>=e&&setTimeout(function(){a.showCustomAd(!1)},3e3),a.interstitialAd.destroy(),a.interstitialAd=null});var p=this.getCtrl("p12");console.log("p12",p);var s=this.getCtrl("p26"),c=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",d.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",c);var u=0;.01*s>=c&&(u=1e3),setTimeout(function(){a.interstitialAd.show().then(function(){m.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),n.showInterCDOver=!1,setTimeout(function(){n.showInterCDOver=!0},1e3*i)}).catch(function(e){m.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},p*u)}},a.prototype.showDesktop=function(){},a.prototype.jumpTo=function(e,a,t,o){m.default.log("jumpTo:"+e),this.channelObj.navigateToMiniProgram({appId:e,success:a,fail:t,complete:o})},a.prototype.registerOnshow=function(e){this.onShowCall=e},a.prototype.checkShortcut=function(e){window.ks.checkShortcut({success:function(a){console.log("\u662f\u5426\u5df2\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",a.installed),e.sucCall&&e.sucCall()},fail:function(a){-10005===a.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",a.msg),e.failCall&&e.failCall()}})},a.prototype.addShortcut=function(e){this.channelObj.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),e.sucCall&&e.sucCall()},fail:function(a){-10005===a.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",a.msg),e.failCall&&e.failCall()}})},a.prototype.isShowSideView=function(e){this.channelObj.checkSliderBarIsAvailable({success:function(a){e&&e(a),console.log("checkSliderBarIsAvailable succ result:",a)},fail:function(a){e&&e(a),console.log("checkSliderBarIsAvailable fail result:",a)}})},a.unionid=null,a}(h.pzaChannelWeb);t.pzaChannelKs=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./ks_analytics":"ks_analytics","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMg:[function(e,a,t){"use strict";cc._RF.push(a,"ab34fxlx4JPIpbkAiH90oPs","pzaChannelMg");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelMg=void 0;var i=e("../Common/pzaLocalData"),r=e("../Common/pzaSoundManager"),p=e("../View/pzaCommonMask"),l=e("./pzaChannelWeb"),s=e("./pzakc"),c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="mg",a.channelObj=window.mgtv,a.paraMap=new Map([["appId","mg1v46pzizo5npghd"],["videoId","3i6rctuuner1kz6l"],["ctrlId","67d93fd5c8946b1700d95f40"]]),a.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2020SR0911781",a.loginCall=null,a.videoReady=!0,a.videoAdClickDelay=null,a.videoParas=null,a}return n(a,e),a.prototype.hasPrivacy=function(){return!0},a.prototype.init=function(e){this.loginCall=e;var a=this,t=this.getPara("ctrlId");if(console.log("ctrlId :",t),t){var o={id:t};s.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",o,function(e,t){e?s.default.err(e):""+t.code=="0"?(a.ctrl=t.data,s.default.log("\u8fd4\u56de",a.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(a.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(a.ctrl.p3),i.pzaLocalData.data.showBeginViewMax=parseInt(a.ctrl.p5),i.pzaLocalData.data.showDaveViewMax=parseInt(a.ctrl.p5),i.pzaLocalData.data.showGardenViewMax=parseInt(a.ctrl.p5),i.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(a.ctrl.p6),a.mgLogin(a.loginCall)):s.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))})}},a.prototype.mgLogin=function(e){this.loginCall=e;var a=this;this.channelUserId||this.channelObj.login({success:function(){console.log("login succ"),a.channelObj.getUserProfile({success:function(e){console.log(e.data),e&&e.data&&e.data.uuid&&(a.channelUserId=e.data.uuid,console.log("me.channelUserId ",a.channelUserId),a.loginCall())},fail:function(e){var t=this;console.log(e.errMsg),setTimeout(function(){a.mgLogin(t.loginCall)},2e3)},complete:function(){console.log("complete")}})},fail:function(e){var t=this;console.log(e.errMsg),setTimeout(function(){a.mgLogin(t.loginCall)},2e3)},complete:function(){console.log("complete")}})},a.prototype.showVideo=function(e){var a=this,t=this.getPara("videoId");t&&this.channelObj&&(this.rewardedVideoAd||(console.log("\u521b\u5efa\u89c6\u9891"),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t})),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.videoFns.onLoad=function(){console.log("video onload will show"),a.rewardedVideoAd.show()},this.videoFns.onError=function(t){s.default.err(t),e.failCall&&e.failCall(),e.endCall&&e.endCall(),cc.game.resume(),p.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(a){a&&a.isEnded?(i.pzaLocalData.bpWatchAd(),e.sucCall(),s.default.eventReport("showVideo\u5b8c\u6210-"+e.posName)):e.failCall&&e.failCall(),cc.game.resume(),p.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),e.endCall&&e.endCall()},this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onLoad(this.videoFns.onLoad),console.log("video load start"),this.rewardedVideoAd.load())},a.prototype.shareAppMessage=function(){},a}(l.pzaChannelWeb);t.pzaChannelMg=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMi:[function(e,a,t){"use strict";cc._RF.push(a,"a6fcacWTxBAQJFTpi1j2M8H","pzaChannelMi");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelMi=void 0;var i,r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaUtil"),s=e("../View/pzaCommonMask"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={}));var h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="mi",a.paraMap=new Map([["appId","2882303761520396089"],["bannerAd","505c909b6c7b7460a1f7c68cc5653a37"],["customInsertAd","e66fcf638dd68334888010ba1af7e608"],["videoId","393cba61edfaf681bf06347ea993419c"],["ctrlId","67d27a9cc8946b1700d95eca"]]),a.bannerState=i.Hide,a.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002"],a.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",a.channelObj=window.qg,a.autoShowBannerTimer=30,a.bannerTimeId=-1,a.customAdMap={},a.showInterCDOver=!0,a.firstShowAdClose=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.exit=function(){this.channelObj.exitApplication({data:0})},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,n){e?d.default.err(e):""+n.code=="0"?(t.ctrl=n.data,d.default.log("\u8fd4\u56de",t.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),t.qgLogin(function(){a&&a(),t.getDeviceID()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},a.prototype.getDeviceID=function(){this.channelObj.getDeviceId({success:function(e){console.log("handling success: "+e.deviceId)},fail:function(e,a){console.log("handling fail, code = "+a)}})},a.prototype.qgLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=this;this.channelObj.login({success:function(t){var o=JSON.stringify(t.data);console.log(o),a.channelUserId=t.data.appAccountId,console.log("me.channelUserId",a.channelUserId),e&&e("login succ")},fail:function(e){console.log(JSON.stringify(e))}})},a.prototype.sendUserInfo=function(e){if(null!=e)if(r.pzaLocalData.data.playerNick=e.nickName,r.pzaLocalData.data.playerAvatar=e.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/mi/sendUserInfo",a,function(e,a){e?d.default.err(e):d.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(){},a.prototype.showVideo=function(e){var a=this,t=this.getPara("videoId");if(t){d.default.log("showVideo",t,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(e){d.default.err(e)})},this.videoFns.onError=function(t){d.default.err(t),e.failCall&&e.failCall(),e.endCall&&e.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(a){a&&a.isEnded?(r.pzaLocalData.bpWatchAd(),e.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+e.posName)):e.failCall&&e.failCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),e.endCall&&e.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},a.prototype.showBanner=function(){var e=this,a=this.getPara("bannerAd");if(a&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",a);var t={adUnitId:a,style:{top:this.getSysInfo().windowHeight-80,left:this.getSysInfo().windowWidth/2-180,width:800}};this.bannerAd=this.channelObj.createBannerAd(t),console.log("this.bannerad.sclae",this.bannerAd.scale),this.bannerAd.onError(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e.bannerState==i.Hide&&e.closeBanner()}).catch(function(e){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})}},a.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},a.prototype.showBannerByTime=function(e){var a=this;void 0===e&&(e=!1);var t=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<40&&(t=40),this.showBanner(e),this.bannerTimeId=setInterval(function(){a.showBanner(e)},1e3*t)},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.showInter=function(e,a){void 0===a&&(a=!0);var t=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),(e||.01*c.pzaChannel.instance().getCtrl("p10")>=t)&&this.showCustomAd(!1,a)},a.prototype.closeInter=function(){this.closeCustomAd(!1)},a.prototype.showCustomAd=function(e,a){var t=this;void 0===a&&(a=!0);var o=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(o)if(this.showInterCDOver){var n=e?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,i={adUnitId:o,style:{left:245,top:10,width:400}};a&&(i.style.top=50),d.default.log("showCustomAd",o,e,n),this.customAdMap[o]||(d.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",o),this.customAdMap[o]=this.channelObj.createCustomAd(i),this.customAdMap[o].offClose(),this.customAdMap[o].onClose(function(){var e=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=e&&setTimeout(function(){t.showCustomAd(!1)},3e3),t.customAdMap[o].destroy(),t.customAdMap[o]=null}),this.customAdMap[o].offError(),this.customAdMap[o].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[o].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[o].offLoad(),this.customAdMap[o].onLoad(function(){console.log("customAd\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}));var r=this;if(e)this.customAdMap[o].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))});else{var p=this.getCtrl("p12"),s=c.pzaChannel.instance().getCtrl("p11");console.log("p11",s),console.log("p12",p);var u=this.getCtrl("p26"),h=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",h);var m=0;.01*u>=h&&(m=1e3),setTimeout(function(){t.customAdMap[o].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),r.showInterCDOver=!1,setTimeout(function(){r.showInterCDOver=!0},1e3*s)}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},p*m)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},a.prototype.closeCustomAd=function(e){void 0===e&&(e=!1);var a=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");a&&this.customAdMap[a]&&this.customAdMap[a].hide()},a.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),t&&t()},a.prototype.addShortcut=function(e){console.log("click oppo addShortcut");var a=this;this.channelObj.hasShortcutInstalled({success:function(t){console.log("hasShortcutInstalled res",t),0==t?a.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),e.sucCall&&e.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},a.prototype.checkShortcut=function(e){this.channelObj.hasShortcutInstalled({success:function(a){0==a?e.sucCall&&e.sucCall():e.failCall&&e.failCall()},fail:function(){},complete:function(){}})},a.prototype.copyToClip=function(e,a){this.channelObj.setClipboardData({data:e,success:function(){a&&a()},fail:function(){a&&a()},complete:function(){}})},a}(u.pzaChannelWeb);t.pzaChannelMi=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMy1:[function(e,a,t){"use strict";cc._RF.push(a,"8dc7dTee0dIpLDB9323Q9L5","pzaChannelMy1");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelMy1=void 0;var i=e("./pzaChannelMy"),r=e("./pzakc"),p=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channelId=4,a.channel="my1",a.paraMap=new Map([["appId","2021004144657858"],["bannerAd","ad_tiny_2021004144657858_202407252200174794"],["insertAd","ad_tiny_2021004144657858_202408122200182253"],["vedioAd","ad_tiny_2021004144657858_202405162200097610"],["ctrlId","66f8c4cbc5b6582182fb7bbe"],["gid","66f8c4cbc5b6582182fb7bbe"]]),a.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2021SR1183949\n",a.actsubmit2CD=1e5,a.actsubmit2CDOver=!0,a}return n(a,e),a.prototype.actSubmit=function(){},a.prototype.actSubmit2=function(){var e=this,a=this;if(a.channelUserId&&this.actsubmit2CDOver){this.actsubmit2CDOver=!1,setTimeout(function(){e.actsubmit2CDOver=!0},this.actsubmit2CD),console.log("channelID 4 actsubmit=");var t=a.channelObj.getLaunchOptionsSync().query?a.channelObj.getLaunchOptionsSync().query.channel:"other";null!=t&&null!=t||(t="other"),console.log("channel",t),console.log("me.channelUserId",a.channelUserId),a.jpost("https://ga.gamejym.com/fcm/alipay/gameActionSubmit",{appId:a.getPara("appId"),act:"zwdzjs1_game_shengcun_every_2",channel:t,openId:a.channelUserId},function(e,a){e?r.default.err(e):r.default.log("\u652f\u4ed8\u5b9dactSubmit",a)})}},a}(i.pzaChannelMy);t.pzaChannelMy1=p,cc._RF.pop()},{"./pzaChannelMy":"pzaChannelMy","./pzakc":"pzakc"}],pzaChannelMy:[function(e,a,t){"use strict";cc._RF.push(a,"1e6ecuLuNtLBbRAkcaU1AOA","pzaChannelMy");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var a,t=1,o=arguments.length;t<o;t++)for(var n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e}).apply(this,arguments)},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},p=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelMy=t.reportAct=void 0;var l,s=e("../Common/pzaLocalData"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaStatisticsMgr"),d=e("../View/pzaCommonMask"),h=e("./pzaChannel"),m=e("./pzaChannelWeb"),f=e("./pzakc"),z=e("../Common/pzaUtil");(function(e){e.reportLoadingCompleted="reportLoadingCompleted",e.reportAuthorized="reportAuthorized",e.reportGameCharacterCreated="reportGameCharacterCreated",e.reportGamePlay="reportGamePlay"})(l=t.reportAct||(t.reportAct={}));var y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channelId=2,a.channel="my",a.paraMap=new Map([["appId","2021004149683348"],["bannerAd","ad_tiny_2021004149683348_202407262200175313"],["insertAd","ad_tiny_2021004149683348_202408122200182162"],["vedioAd","ad_tiny_2021004149683348_202406122200105736"],["ctrlId","6645caaaa331ce3adb822a25"],["gid","663db8e6a331ce3adb8229fb"]]),a.channelObj=window.my,a.sid=null,a.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2016SR153979",a.onShowCall=null,a.nextInterTime=0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!0},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this.channelObj;o.onShow(function(e){cc.game.resume(),c.pzaSoundManager.resumeMusic(),t.isShare&&(t.isShareSuc()?(t.shareSucBack&&t.shareSucBack(),o.showToast({content:"\u5206\u4eab\u6210\u529f!"}),s.pzaLocalData.shareGetCoin()):(o.showToast({content:"\u5206\u4eab\u5931\u8d25"}),t.shareFailBack&&t.shareFailBack()),t.isShare=!1);var a=JSON.stringify(e);console.log("onshow "+a),t.onShowCall&&t.onShowCall(),t.onShowCall=null}),o.onHide(function(){cc.game.pause(),t.isShare&&(t.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),i=this;if(n){var r=f.default.getData("sid",null);r||(r=i.channelObj.getLaunchOptionsSync().scene,f.default.saveData("sid",r));var p={id:n,sid:r};i.jpost("https://ga.gametdd.com/adCtrl/agd/conf",p,function(e,o){e?f.default.err(e):""+o.code=="0"?(i.ctrl=o.data,f.default.log("\u8fd4\u56de",i.ctrl),s.pzaLocalData.maxAdShareCount=parseInt(i.ctrl.p2),s.pzaLocalData.maxShareRwdCount=parseInt(i.ctrl.p3),s.pzaLocalData.data.showBeginViewMax=parseInt(i.ctrl.p5),s.pzaLocalData.data.showDaveViewMax=parseInt(i.ctrl.p5),s.pzaLocalData.data.showGardenViewMax=parseInt(i.ctrl.p5),s.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(i.ctrl.p6),s.pzaLocalData.data.isShowVideoIcon=1==parseInt(i.ctrl.p7),s.pzaLocalData.data.isSignDouble=1==parseInt(i.ctrl.p8),t.myLogin(function(){a&&a()})):f.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}this.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01"}},o.onShow(function(e){console.log("onshow "+JSON.stringify(e))}),this.loadRewardVideoAD(),this.loadBannerAD()},a.prototype.loadRewardVideoAD=function(){var e=this.getPara("vedioAd");e&&(this.rewardedVideoAd=this.channelObj.createRewardedAd({adUnitId:e}))},a.prototype.loadBannerAD=function(){var e=this.channelObj;this.bannerAd=e.createBannerAd({adUnitId:this.paraMap.get("bannerAd"),style:{left:this.getSysInfo().windowWidth/2-150,top:this.getSysInfo().windowHeight-100,width:300}}),console.log("bannerAd ",this.bannerAd),this.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.bannerAd.onError(function(e){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef err: "),console.log(e)})},a.prototype.showBanner=function(){0!=this.getCtrl("p21")&&this.bannerAd.show().then(function(){return console.log("banner \u5e7f\u544a\u663e\u793a")}).catch(function(e){f.default.log("custom\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},a.prototype.closeBanner=function(){this.bannerAd&&this.bannerAd.hide()},a.prototype.onLoginSuc=function(){},a.prototype.sendUserInfoToWeb=function(e){null==s.pzaLocalData.data.playerNick||null==s.pzaLocalData.data.playerAvatar?this.getUserInfo(e):e&&e(!0)},a.prototype.actSubmit=function(){var e=this;if(e.channelUserId){console.log("channelID 1 actsubmit="),console.log("query====>",e.channelObj.getLaunchOptionsSync().query);var a=e.channelObj.getLaunchOptionsSync().query?e.channelObj.getLaunchOptionsSync().query.channel:"other";e.jpost("https://ga.gamejym.com/fcm/alipay/gameActionSubmit",{appId:e.getPara("appId"),act:"zwdzjs_game_pass_every_1",channel:a,openId:e.channelUserId},function(e,a){e?f.default.err(e):f.default.log("\u652f\u4ed8\u5b9dactSubmit",a)})}},a.SOPReport=function(e){if("my"==h.pzaChannel.instance().channel||"my1"==h.pzaChannel.instance().channel){console.log("SOPReport=");var a=window.my;if(!a||!a.gameBiz||!a.gameBiz[e])return;if(console.log("act =>",e),e===l.reportGameCharacterCreated){var t=!!cc.sys.localStorage.getItem("isSOPcreated");a.gameBiz.reportGameCharacterCreated(t),t||cc.sys.localStorage.setItem("isSOPcreated",1)}else e===l.reportAuthorized?(t=!!cc.sys.localStorage.getItem("isSOPAuthed"))||(cc.sys.localStorage.setItem("isSOPAuthed",1),a.gameBiz.reportAuthorized()):a.gameBiz[e]()}},a.prototype.myLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var t=window.my,o=this;t.getAuthCode({scopes:"auth_base",success:function(t){if(console.log("getAuthCode\u6210\u529f",t),!t.authCode)return console.log("\u767b\u5f55\u5931\u8d25\uff01"+t),void e(t);o.jpost("https://ga.gamejym.com/fcm/alipay/getOpenId",{appId:o.getPara("appId"),code:t.authCode},function(t,n){return t?(f.default.err(t),void e(t)):(f.default.log("\u83b7\u53d6openId my",n),n.openid?(o.channelUserId=n.openid||"",a.unionid=n.unionid||"",void e(null)):(f.default.err("\u83b7\u53d6openId\u5931\u8d25",n),void e("\u83b7\u53d6openId\u5931\u8d25")))}),a.SOPReport(l.reportAuthorized)},fail:function(a){e(null),console.log("my.getAuthCode \u8c03\u7528\u5931\u8d25",a)}})},a.prototype.canShare=function(){return!0},a.prototype.shareFrom=function(){if(f.default.log("shareFrom: ",this.sid,this.channelUserId),this.sid&&this.channelUserId){var e={sid:this.sid,openId:this.channelUserId,star:s.pzaLocalData.getAllStar()};this.jpost("https://ga.gamejym.com/fcm/alipay/shareFrom",e,function(e,a){e?f.default.err(e):f.default.log("shareFrom\u8fd4\u56de",a)})}},a.prototype.sendUserInfo=function(e){if(null!=e)if(s.pzaLocalData.data.playerNick=e.nickName,s.pzaLocalData.data.playerAvatar=e.avatarUrl,s.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/alipay/sendUserInfo",a,function(e,a){e?f.default.err(e):f.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(e){var a=this.channelObj,t=this;a.getAuthCode({scopes:"auth_user",success:function(){a.getAuthUserInfo({success:function(a){t.sendUserInfo({nickName:a.nickName,avatarUrl:a.avatar}),e&&e(!0)},fail:function(a){console.log("getOpenUserInfo fail",a),e&&e(!1)}})},fail:function(e){console.log("auth_user fail",e)}})},a.prototype.shareAppMessage=function(e,a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),this.canShare()){var o="";if(e&&e.act&&(o=e.act),!o)return this.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01"}},this.shareFailBack=t,this.shareSucBack=a,this.isShare=!0,void this.channelObj.showSharePanel({});var n=this;n.shareFailBack=null,n.shareSucBack=null,n.isShare=!1,"recruit_share"==e.act&&(n.isShare=!0,n.shareFailBack=t,n.shareSucBack=a);var i={appId:this.getPara("appId"),openId:this.channelUserId,act:o};this.jpost("https://ga.gamejym.com/fcm/alipay/shareTo",i,function(e,a){if(e)f.default.err(e);else{f.default.log("shareTo\u8fd4\u56de",a);var t=null;a&&0===a.code&&(t="sid="+a.data.sid+"&act="+o,f.default.log("shareQuery",t)),n.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01",query:t,success:function(e){console.log(e)},fail:function(e){console.log(e)},complete:function(e){console.log(e)}}},n.channelObj.showSharePanel({})}})}},a.prototype.getShareResult=function(e,a){if(f.default.log("getshareResult start"),!this.channelUserId)return a([]);console.log("getshareResult join");var t={appId:this.getPara("appId"),openId:this.channelUserId,act:e};this.jpost("https://ga.gamejym.com/fcm/alipay/getShareResult",t,function(e,t){if(e)return f.default.err(e),void a([]);f.default.log("getShareResult\u8fd4\u56de",t),t&&0===t.code?a(t.data):a([])})},a.prototype.copyToClip=function(e,a){this.channelObj.setClipboard({text:e,success:function(){a()},fail:function(){a("\u590d\u5236\u5931\u8d25")}})},a.prototype.showInter=function(e){var a=this,t=z.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10 ",h.pzaChannel.instance().getCtrl("p10")),e||.01*h.pzaChannel.instance().getCtrl("p10")>=t){if(this.nextInterTime>Date.now())return void f.default.log("\u63d2\u5c4f\u65f6\u95f4\u95f4\u9694\u672a\u5230");var o=this.getPara("insertAd");if(!o)return;var n=this,i=this.channelObj;f.default.log("showInter isShow",o),this.interstitialAd=i.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.interstitialAd.onClose(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u5173\u95ed"+JSON.stringify(e));var a=z.pzaUtil.getRandomFloatNum(0,1),t=.1*h.pzaChannel.instance().getCtrl("p18");console.log("\u5173\u95ed\u540e\u6982\u7387: ",a,t),t>=a&&setTimeout(function(){n.showInter()},3e3)});var r=this.getCtrl("p12"),p=h.pzaChannel.instance().getCtrl("p11");console.log("p12",r),console.log("p11",p),setTimeout(function(){a.interstitialAd.show().then(function(){f.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){f.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))}),a.nextInterTime=Date.now()+1e3*p},1e3*r)}},a.prototype.showVideo=function(e,a){var t=this;void 0===a&&(a=!1),u.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:e.adsid},{name:"adname",value:e.posName});var o=this.getPara("vedioAd");if(o){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedAd({adUnitId:o});var n=this;n.videoFns.onLoad=function(){f.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},n.videoFns.onError=function(a){f.default.err(a),cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask(),e.failCall(),e.endCall(),u.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:-1},{name:"adname",value:e.posName}),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},n.videoFns.onClose=function(a){cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask(),a&&a.isEnded?(s.pzaLocalData.bpWatchAd(),e.sucCall(),f.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+e.posName),u.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:0},{name:"adname",value:e.posName})):(e.failCall(),u.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:1},{name:"adname",value:e.posName})),e.endCall()},n.rewardedVideoAd.onLoad(n.videoFns.onLoad),n.rewardedVideoAd.onError(n.videoFns.onError),n.rewardedVideoAd.onClose(n.videoFns.onClose),n.rewardedVideoAd.show().then(function(){f.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a"),f.default.eventReport("\u5e7f\u544a\u663e\u793a-"+e.posName)}).catch(function(){n.rewardedVideoAd.load().then(function(){return f.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),n.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask()})})}},a.prototype.registerOnshow=function(e){this.onShowCall=e},a.prototype.jpost=function(e,a,t){t||(t=function(e){if(e)return f.default.err(e)}),this.channelObj.request({url:e,data:a,method:"POST",headers:{"content-type":"application/json",charset:"utf-8"},success:function(e){t&&t(null,e&&e.data)},fail:function(e){return console.error(e),t(null,{code:""+e.error})}})},a.prototype.schemaToParams=function(e){var a,t;if(!e.startsWith("alipays:"))return{message:"! \u975e alipays: \u5f00\u5934"};var o={};try{for(var n=r(e.replace(/^.*?\?/,"").split("&").map(function(e){var a=e.includes("=")?e.indexOf("="):e.length;return[e.slice(0,a),e.slice(a+1)].map(decodeURIComponent)})),i=n.next();!i.done;i=n.next()){var l=p(i.value,2),s=l[0],c=l[1];if("appId"==s){if(16!=c.length)return{message:"! \u975e 16 \u4f4d appId '"+c+"'"}}else if("chInfo"===s){var u=o.startParam||{};u[s]=c,o.startParam=u;continue}o[s]=c}}catch(d){a={error:d}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return{params:o}},a.prototype.navigateToMiniProgramBySchema=function(e,a){var t="alipays://platformapi/startapp?appId=2021003125685383&url=https%3A%2F%2Frender.alipay.com%2Fp%2Fyuyan%2F180020010001206617%2Findex.html%3FcaprMode%3Dsync&chInfo=gamesetlattice&sms=YES&appClearTop=false",o=this.schemaToParams(t),n=o.params,r=o.message;n?this.channelObj.navigateToMiniProgram(i(i({},n),{success:e,fail:a})):a&&a({error:-1,errorMessage:"\u65e0\u6548\u7684\u5c0f\u7a0b\u5e8f schema "+t+": "+r})},a.prototype.isAddAliDesk=function(e){this.jpost("https://ga.gamejym.com/fcm/alipay/getAddHomeResult",{appId:this.getPara("appId"),openId:this.channelUserId},function(a,t){if(a)f.default.err(a);else{f.default.log("\u652f\u4ed8\u5b9dactSubmit",t);var o;o="Y"==t.data?1:0,e&&e(o)}})},a.unionid=null,a}(m.pzaChannelWeb);t.pzaChannelMy=y,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelNoAD:[function(e,a,t){"use strict";cc._RF.push(a,"751940+7/9O/ZFp9R4PTCQt","pzaChannelNoAD");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelNoAD=void 0;var i=e("../Common/pzaLocalData"),r=e("../View/pzaCommonMask"),p=e("../Common/pzaUIManager"),l=e("../Load/pzaBundleObjectPool"),s=e("../Load/pzaPreLoadManager"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc"),h=e("./pzaNativeInterAd"),m=e("../Common/pzaShareGiftConfig"),f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channelId=0,a.channel="noAD",a.paraMap=new Map([]),a.isReadRemoteUserData=!1,a.isWhite=!1,a}return n(a,e),a.prototype.init=function(e){var a=this;if(this.ctrl={},this.ctrl.p3="1",this.ctrl.p4="1",this.ctrl.p24=1,this.ctrl.p23=1,this.ctrl.p14="1",this.ctrl.p15="1",this.ctrl.p16="1",this.ctrl.p17="1",this.getShareResult(m.pzaShareGiftConfig.act,function(e){for(var a=0,t=!1,o=0;o<5;o++)null==i.pzaLocalData.data.shareGiftRecIndex[o]?t=!0:a++;if(0!=t){var n=e?e.length:0;i.pzaLocalData.data.showBangJar=n>a}else i.pzaLocalData.data.showBangJar=!1}),c.pzaChannel.isConfRemote)return this.channelUserId="test"+(new Date).getTime(),this.isWhite=!0,void(e&&e());d.default.jpost("https://ga.gamejym.com/fcm/gameApi/noAdLogin",{uid:i.pzaLocalData.data.noADPlayerUid,gameId:c.pzaChannel.gameName},function(e,t){console.log("login resp: ",t),!e&&t?(t.data&&t.data.uid&&(i.pzaLocalData.data.noADPlayerUid||(i.pzaLocalData.data.noADPlayerUid=t.data.uid,i.pzaLocalData.localSaveData(),console.log("pzaLocalData.data.noADPlayerUid 2,",i.pzaLocalData.data.noADPlayerUid)),a.channelUserId=i.pzaLocalData.data.noADPlayerUid),t.data&&t.data.isWhite&&(a.isWhite=t.data.isWhite)):d.default.err(e)}),e&&e()},a.prototype.showBanner=function(e){void 0===e&&(e=!1)},a.prototype.closeBanner=function(e){void 0===e&&(e=!1)},a.prototype.showInter=function(e){void 0===e&&(e=!1)},a.prototype.closeInter=function(){},a.prototype.showVideo=function(e,a,t){void 0===a&&(a=!1),void 0===t&&(t=!0),this.isWhite||c.pzaChannel.isConfRemote?(i.pzaLocalData.bpWatchAd(),e.sucCall(),e.endCall(),r.pzaCommonMask.hideMask()):(e.failCall(),e.endCall())},a.prototype.copyToClip=function(e,a){e=i.pzaLocalData.data.noADPlayerUid;var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var o,n=getSelection();n.rangeCount>0&&(o=n.getRangeAt(0)),document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;try{document.execCommand("copy"),a()}catch(r){d.default.err(r),a("\u590d\u5236\u5931\u8d25!")}document.body.removeChild(t),o&&(n.removeAllRanges(),n.addRange(o))},a.prototype.createInterAdNode=function(){l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.NATIVE_INTER_AD,!1,function(e,a){null==e&&null!=a?(a.setParent(p.pzaUIManager.instance.node),a.zIndex=999,a&&a.getComponent(h.pzaNativeInterAd).init("","https://contentcenter-drcn.dbankcdn.cn/img/pub_1/PPS_realtimeimage_100_1/24/v3/4SllXmP1Sdej4e1YWPS29A/a9CXcpLzRLazKkHo6_siHg.jpg/__source__.jpg","9\u67083\u65e5\u7537\u751f\u5357\u4eac","\u9cb8\u9e3f\u52a8\u80fd","\u7acb\u5373\u6253\u5f00")):console.error(e)})},a}(u.pzaChannelWeb);t.pzaChannelNoAD=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaUIManager":"pzaUIManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaNativeInterAd":"pzaNativeInterAd","./pzakc":"pzakc"}],pzaChannelOppo:[function(e,a,t){"use strict";cc._RF.push(a,"0c79d6z+f9ChZUETpE5tBRV","pzaChannelOppo");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelOppo=void 0;var i,r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaUtil"),s=e("../View/pzaCommonMask"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={}));var h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="oppo",a.paraMap=new Map([["appId","32035923"],["bannerAd","1705916"],["customBannerAd","1705916"],["customInsertAd","1705922"],["videoId","1705927"],["ctrlId","66cc411dc5b6582182fb7ace"]]),a.bannerState=i.Hide,a.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n\u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n\nSDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\noppo\u6e38\u620f\u4e2d\u5fc3SDK\toppo\toppo\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\thttps://open.oppomobile.com/wiki/doc#id=11007\noppo\u5e7f\u544aSDK\toppo\t\u7528\u4e8e\u63d0\u4f9b\u5e7f\u544a\u670d\u52a1\t\u8054\u7f51\u53ca\u7f51\u7edc\u72b6\u6001\u53d8\u5316,\u83b7\u53d6\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49);\u83b7\u53d6IMEI\u3001IMSI\u3001\u8bbe\u5907 MAC \u5730\u5740\u7b49\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f;(\u7c97\u7565\u6216\u7cbe\u786e\u7684)\u4f4d\u7f6e\u4fe1\u606f;\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8;\thttps://open.oppomobile.com/wiki/doc#id=11007\n\u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK\toppo\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://open.oppomobile.com/wiki/doc#id=11007\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002"],a.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",a.channelObj=window.qg,a.autoShowBannerTimer=30,a.bannerTimeId=-1,a.customAdMap={},a.showInterCDOver=!0,a.firstShowAdClose=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.exit=function(){this.channelObj.exitApplication({data:0})},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(console.log("ctrlId :",n),n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,n){e?d.default.err(e):""+n.code=="0"?(t.ctrl=n.data,d.default.log("\u8fd4\u56de",t.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),t.qgLogin(function(){a&&a(),t.getDeviceID()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},a.prototype.getDeviceID=function(){this.channelObj.getDeviceId({success:function(e){console.log("handling success: "+e.deviceId)},fail:function(e,a){console.log("handling fail, code = "+a)}})},a.prototype.qgLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=this;this.channelObj.login({success:function(t){var o=JSON.stringify(t.data);console.log(o),a.channelUserId=t.uid,console.log("me.channelUserId",a.channelUserId),e&&e("login succ")},fail:function(e){console.log(JSON.stringify(e))}})},a.prototype.sendUserInfo=function(e){if(null!=e)if(r.pzaLocalData.data.playerNick=e.nickName,r.pzaLocalData.data.playerAvatar=e.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",a,function(e,a){e?d.default.err(e):d.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(){},a.prototype.showVideo=function(e){var a=this,t=this.getPara("videoId");if(t){d.default.log("showVideo",t,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(e){d.default.err(e)})},this.videoFns.onError=function(t){d.default.err(t),e.failCall&&e.failCall(),e.endCall&&e.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(a){a&&a.isEnded?(r.pzaLocalData.bpWatchAd(),e.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+e.posName)):e.failCall&&e.failCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),e.endCall&&e.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},a.prototype.showBanner=function(){var e=this,a=this.getPara("bannerAd");if(a&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",a);var t={adUnitId:a};this.bannerAd=this.channelObj.createBannerAd(t),this.bannerAd.onError(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e.bannerState==i.Hide&&e.closeBanner()}).catch(function(e){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})}},a.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},a.prototype.showBannerByTime=function(e){var a=this;void 0===e&&(e=!1);var t=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<40&&(t=40),this.showBanner(e),this.bannerTimeId=setInterval(function(){a.showBanner(e)},1e3*t)},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.showInter=function(e){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",a),(e||.01*c.pzaChannel.instance().getCtrl("p10")>=a)&&this.showCustomAd(!1)},a.prototype.closeInter=function(){this.closeCustomAd(!1)},a.prototype.showCustomAd=function(e,a,t){var o=this,n=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(this.showInterCDOver){var i=e?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,r={adUnitId:n,style:{top:i}};t&&(r.style=t),d.default.log("showCustomAd",n,e,i),this.customAdMap[n]||(d.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",n),this.customAdMap[n]=this.channelObj.createCustomAd(r),this.customAdMap[n].offHide(),this.customAdMap[n].onHide(function(){var e=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=e&&setTimeout(function(){o.showCustomAd(!1)},3e3),o.customAdMap[n].destroy(),o.customAdMap[n]=null}),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[n].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[n].offLoad(),this.customAdMap[n].onLoad(function(){console.log("customAd\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}));var p=this;if(e)this.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))});else{var s=this.getCtrl("p12"),u=c.pzaChannel.instance().getCtrl("p11");console.log("p11",u),console.log("p12",s);var h=this.getCtrl("p26"),m=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",m);var f=0;.01*h>=m&&(f=1e3),setTimeout(function(){o.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),p.showInterCDOver=!1,setTimeout(function(){p.showInterCDOver=!0},1e3*u)}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},s*f)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},a.prototype.closeCustomAd=function(e){void 0===e&&(e=!1);var a=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");a&&this.customAdMap[a]&&this.customAdMap[a].hide()},a.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),t&&t()},a.prototype.addShortcut=function(e){console.log("click oppo addShortcut");var a=this;this.channelObj.hasShortcutInstalled({success:function(t){console.log("hasShortcutInstalled res",t),0==t?a.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),e.sucCall&&e.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},a.prototype.checkShortcut=function(e){this.channelObj.hasShortcutInstalled({success:function(a){0==a?e.sucCall&&e.sucCall():e.failCall&&e.failCall()},fail:function(){},complete:function(){}})},a.prototype.copyToClip=function(e,a){this.channelObj.setClipboardData({data:e,success:function(){a&&a()},fail:function(){a&&a()},complete:function(){}})},a}(u.pzaChannelWeb);t.pzaChannelOppo=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelQQ:[function(e,a,t){"use strict";cc._RF.push(a,"705ce8WFiFFgqGx5GpkB/Qg","pzaChannelQQ");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelQQ=void 0;var i,r,p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaUtil"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={})),function(e){e[e.Play=0]="Play",e[e.Ready=1]="Ready",e[e.UnReady=2]="UnReady"}(r||(r={}));var h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="qq",a.paraMap=new Map([["appId","1112393766"],["bannerAd","fdfc2bce2f2796eb7eb6dafa60f5e065"],["videoId","cd487f2224b1f5915dec2a111372bbb9"],["customInsertAd","b28e0a5c19e8843cd90c52f38628289a"],["ctrlId","66cc3c27c5b6582182fb7ac2"],["gid","66cc3c27c5b6582182fb7ac2"]]),a.bannerState=i.Hide,a.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8  \u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",a.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002","\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u6b22\u8fce\u60a8\u4f7f\u7528\u7531\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u63d0\u4f9b\u7684\u670d\u52a1\u3002\n\n\u672c\u300a\u7528\u6237\u670d\u52a1\u534f\u8bae\u300b\uff08\u4ee5\u4e0b\u79f0\u201c\u672c\u534f\u8bae\u201d\uff09\u662f\u7528\u6237\uff08\u4ee5\u4e0b\u79f0\u201c\u60a8\u201d\uff09\u63a5\u53d7\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u4e3a\u201c\u672c\u516c\u53f8\u201d\uff09\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u6240\u4f7f\u7528\u7684\u6cd5\u5f8b\u670d\u52a1\u6761\u6b3e\u3002 \u672c\u516c\u53f8\u5728\u6b64\u7279\u522b\u63d0\u9192\u60a8\u8ba4\u771f\u9605\u8bfb\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\uff0c\u7279\u522b\u662f\u5176\u4e2d\u514d\u9664\u6216\u8005\u9650\u5236\u672c\u516c\u53f8\u8d23\u4efb\u7684\u514d\u8d23\u58f0\u660e\u6761\u6b3e\u4ee5\u53ca\u7528\u6237\u987b\u9075\u5b88\u7684\u6761\u6b3e\u548c\u5176\u5b83\u9650\u5236\u7528\u6237\u6743\u5229\u7684\u6761\u6b3e\uff0c\u8fd9\u4e9b\u6761\u6b3e\u5e94\u5728\u4e2d\u56fd\u6cd5\u5f8b\u6240\u5141\u8bb8\u7684\u8303\u56f4\u5185\u6700\u5927\u7a0b\u5ea6\u5730\u9002\u7528\u3002\u9664\u975e\u7528\u6237 \u63a5\u53d7\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\uff0c\u5426\u5219\u65e0\u6743\u5b89\u88c5\u8fd0\u884c\u5ba2\u6237\u7aef\u8f6f\u4ef6\u6216\u4ee5\u5176\u5b83\u65b9\u5f0f\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u4efb\u4f55\u670d\u52a1\u5185\u5bb9\u3002\n\n\u5f53\u60a8\u5728\u7ebf\u70b9\u51fb\u201c\u540c\u610f\u201d\u6216\u201c\u63a5\u53d7\u201d\u540e\uff0c\u5219\u89c6\u4e3a\u60a8\u5df2\u8be6\u7ec6\u9605\u8bfb\u5e76\u540c\u610f\u672c\u534f\u8bae\u7684\u5168\u90e8\u5185\u5bb9\uff0c\u5e76\u540c\u610f\u9075\u5b88\u672c\u534f\u8bae\u7684\u89c4\u5b9a\u3002\n\n\u5982\u679c\u60a8\u672a\u6ee118\u5468\u5c81\uff0c\u8bf7\u5728\u6cd5\u5b9a\u76d1\u62a4\u4eba\u7684\u966a\u540c\u4e0b\u9605\u8bfb\u672c\u534f\u8bae\u3002\n\n\u4e00\u3001\u7279\u522b\u63d0\u793a\n\n\u672c\u516c\u53f8\u540c\u610f\u6309\u7167\u672c\u534f\u8bae\u7684\u89c4\u5b9a\u53ca\u5176\u4e0d\u65f6\u53d1\u5e03\u7684\u64cd\u4f5c\u89c4\u5219\u63d0\u4f9b\u57fa\u4e8e\u4e92\u8054\u7f51\u7684\u76f8\u5173 \u670d\u52a1(\u4ee5\u4e0b\u79f0\u201c\u7f51\u7edc\u670d\u52a1\u201d)\uff0c\u4e3a\u83b7\u5f97\u7f51\u7edc\u670d\u52a1\uff0c\u60a8\u540c\u610f\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\u5e76\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u5b8c\u6210\u5168\u90e8\u7a0b\u5e8f\u3002\u60a8\u5728\u8fdb\u884c\u7a0b\u5e8f\u8fc7\u7a0b\u4e2d\u70b9\u51fb\u201c\u540c\u610f\u201d\u6309\u94ae\u5373\u8868\u793a\u7528\u6237\u5b8c\u5168\u63a5\u53d7\u672c\u534f\u8bae\u9879\u4e0b\u7684\u5168\u90e8\u6761\u6b3e\u3002\u8fd9\u4e9b\u6761\u6b3e\u53ef\u7531\u672c\u516c\u53f8\u968f\u65f6\u66f4\u65b0\uff0c\u534f\u8bae\u6761\u6b3e\u4e00\u65e6\u53d1\u751f\u53d8\u52a8\uff0c\u672c\u516c\u53f8\u5c06\u4f1a\u5728\u76f8\u5173\u7684\u9875\u9762\u4e0a\u63d0\u793a\u53d8\u66f4\u5185\u5bb9\u3002\u4fee\u6539\u540e\u7684\u534f\u8bae\u4e00\u65e6\u5728\u9875\u9762\u4e0a\u516c\u5e03\u5373\u6709\u6548\u4ee3\u66ff\u539f\u6765\u7684\u534f\u8bae\u3002\u60a8\u5728\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u8f6f\u4ef6\u4ea7\u54c1\u4e4b\u524d\uff0c\u5e94\u4ed4\u7ec6\u9605\u8bfb\u672c\u534f\u8bae\uff0c\u5982\u4e0d\u540c\u610f\u672c\u670d\u52a1\u534f\u8bae\u53ca\u6216\u968f\u65f6\u5bf9\u5176\u7684\u4fee\u6539\uff0c\u8bf7\u505c\u6b62\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\u3002\n\u7279\u522b\u7533\u660e\uff0c\u672a\u6210\u5e74\u4eba\u5e94\u5728\u6cd5\u5b9a\u76d1\u62a4\u4eba\u7684\u966a\u540c\u4e0b\u5ba1\u9605\u548c\u63a5\u53d7\u672c\u534f\u8bae\u3002\u672a\u6210\u5e74\u4eba\u5728\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\u524d\uff0c\u5e94\u4e8b\u5148\u53d6\u5f97\u7236\u6bcd\uff08\u76d1\u62a4\u4eba\uff09\u7684\u540c\u610f\u3002\u82e5\u7236\u6bcd\uff08\u76d1\u62a4\u4eba\uff09\u5e0c\u671b\u672a\u6210\u5e74\u4eba\uff08\u5c24\u5176\u662f\u5341\u5c81\u4ee5\u4e0b\u5b50\u5973\uff09\u5f97\u4ee5\u4f7f\u7528\u672c\u670d\u52a1\uff0c\u5fc5\u987b\u4ee5\u6cd5\u5b9a\u76d1\u62a4\u4eba\u8eab\u4efd\u52a0\u4ee5\u5224\u65ad\u672c\u670d\u52a1\u662f\u5426\u7b26\u5408\u4e8e\u672a\u6210\u5e74\u4eba\u3002\u672a\u6210\u5e74\u4eba\u7528\u6237\u5e94\u5f53\u5728\u5408\u7406\u7a0b\u5ea6\u5185\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\uff0c\u4e0d\u5f97\u56e0\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\u800c\u5f71\u54cd\u4e86\u65e5\u5e38\u7684\u5b66\u4e60\u751f\u6d3b\u3002\u7528\u6237\u7406\u89e3\u672c\u516c\u53f8\u65e0\u4e49\u52a1\u5bf9\u672c\u6b3e\u524d\u8ff0\u4e8b\u9879\u8fdb\u884c\u4efb\u4f55\u5f62\u5f0f\u7684\u5ba1\u67e5\u548c\u786e\u8ba4\u3002\n\u4e8c\u3001\u6743\u5c5e\u58f0\u660e\n\n\u672c\u516c\u53f8\u53d1\u5e03\u7684\u6240\u6709\u8f6f\u4ef6\u5747\u53d7\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u7248\u6743\u6cd5\u4fdd\u62a4\uff0c\u7528\u6237\u53ef\u4ee5\u514d\u8d39\u4e0b\u8f7d\u5e76\u4f7f\u7528\uff0c\u4f46\u672a\u7ecf\u672c\u516c\u53f8\u8bb8\u53ef\uff0c\u7528\u6237\u4e0d\u5f97\u4fee\u6539\u672c\u516c\u53f8\u6e38\u620f\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\uff1b\u4e0d\u5f97\u5236\u4f5c\u3001\u4f20\u64ad\u6216\u4f7f\u7528\u6270 \u4e71\u6b63\u5e38\u6e38\u620f\u79e9\u5e8f\u6216\u6709\u635f\u672c\u516c\u53f8\u5229\u76ca\u7684\u4efb\u4f55\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u3002\n\u672c\u516c\u53f8\u6e38\u620f\u670d\u52a1\u7684\u7ecf\u8425\u6743\u5c5e\u4e8e\u672c\u516c\u53f8\u6240\u6709\uff0c\u9664\u975e\u4e0e\u672c\u516c\u53f8\u53e6\u7b7e\u534f\u8bae\uff0c\u7528\u6237\u540c\u610f\u672c\u670d\u52a1\u4ec5\u4f9b\u4e2a\u4eba\u4e14\u4ec5\u4e8e\u672c\u670d\u52a1\u5e73\u53f0\u8303\u56f4\u5185\u975e\u5546\u4e1a\u6027\u8d28\u7684\u4f7f\u7528\u3002\u7528\u6237\u540c\u65f6\u627f\u8bfa\u4e0d\u7ecf\u672c\u516c\u53f8\u4e66\u9762\u540c\u610f\uff0c\u4e0d\u5f97\u5229\u7528\u672c\u670d\u52a1\u8fdb\u884c\u5e7f\u544a\u3001\u9500\u552e\u3001\u5546\u4e1a\u5c55\u793a\u7b49\u5546\u4e1a\u6027\u7528\u9014\u3002\n\u7528\u6237\u53d1\u8868\u4e8e\u672c\u516c\u53f8\u6e38\u620f\u53ca\u914d\u5957\u7f51\u7ad9\u7684\u6240\u6709\u5185\u5bb9\u4ec5\u4ee3\u8868\u7528\u6237\u81ea\u5df1\u7684\u7acb\u573a\u548c\u89c2\u70b9\uff0c\u4e0e\u672c\u516c\u53f8\u65e0\u5173\uff0c\u7531\u7528\u6237\u672c\u4eba\u627f\u62c5\u4e00\u5207\u6cd5\u5f8b\u8d23\u4efb\u3002\n\u4e09\u3001\u7528\u6237\u9690\u79c1\u5236\u5ea6\n\n\u672c\u516c\u53f8\u7edd\u5bf9\u4e0d\u4f1a\u4fee\u6539\u7528\u6237\u7684\u4e2a\u4eba\u8d44\u6599\uff0c\u6216\u7f16\u8f91\u6216\u900f\u9732\u7528\u6237\u5728\u6ce8\u518c\u8d44\u6599\u4e2d\u7684\u5bc6\u7801\u3001\u59d3\u540d\u3001\u5730\u5740\u3001\u7535\u8bdd\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u53ca\u4fdd\u5b58\u5728\u672c\u516c\u53f8\u4e2d\u7684\u975e\u516c\u5f00\u5185\u5bb9\uff0c\u9664\u975e\u6709\u6cd5\u5f8b\u8bb8\u53ef\u8981\u6c42\u6216\u672c\u516c\u53f8\u5728\u8bda\u4fe1\u7684\u57fa\u7840\u4e0a\u8ba4\u4e3a\u900f\u9732\u8fd9\u4e9b\u4fe1\u606f\u5728\u4ee5\u4e0b\u56db\u79cd\u60c5\u51b5\u662f\u5fc5\u8981\u7684\uff1a\n\n\u9075\u5b88\u6709\u5173\u6cd5\u5f8b\u89c4\u5b9a\uff0c\u9075\u4ece\u5408\u6cd5\u670d\u52a1\u7a0b\u5e8f\u3002\n\u7ef4\u62a4\u672c\u516c\u53f8\u7684\u5546\u6807\u6240\u6709\u6743\u3002\n\u5728\u7d27\u6025\u60c5\u51b5\u4e0b\u7aed\u529b\u7ef4\u62a4\u7528\u6237\u4e2a\u4eba\u548c\u793e\u4f1a\u5927\u4f17\u7684\u9690\u79c1\u5b89\u5168\u3002\n\u7b26\u5408\u5176\u4ed6\u76f8\u5173\u7684\u8981\u6c42\u3002\n\u56db\u3001\u6e38\u620f\u6570\u636e\u7684\u7279\u522b\u89c4\u5b9a\n\n\u672c\u516c\u53f8\u4e25\u7981\u4ee5\u4e0b\u884c\u4e3a\uff1a\n\n\u53d1\u5e03\u8fdd\u6cd5\u4fe1\u606f\u3001\u4e25\u91cd\u8fdd\u80cc\u793e\u4f1a\u516c\u5fb7\u3001\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u6cd5\u5f8b\u7981\u6b62\u6027\u89c4\u5b9a\u7684\u884c\u4e3a\uff1b\n\u5229\u7528\u6e38\u620f\u4f5c\u5f0a\u5de5\u5177\u6216\u8005\u5916\u6302\u3001\u6e38\u620fBUG\u83b7\u53d6\u975e\u6cd5\u5229\u76ca\uff0c\u4e25\u91cd\u4fb5\u72af\u672c\u516c\u53f8\u5229\u76ca\u7684\u884c\u4e3a\uff1b\n\u8bba\u575b\u3001\u6e38\u620f\u4e2d\u4f20\u64ad\u975e\u6cd5\u8baf\u606f\u3001\u6728\u9a6c\u75c5\u6bd2\u3001\u5916\u6302\u8f6f\u4ef6\u7b49\u7684\u884c\u4e3a\uff1b\n\u56e0\u6e38\u620f\u4e2d\u4e3e\u529e\u7684\u6d3b\u52a8\u7ed3\u675f\uff0c\u76f8\u5173\u9053\u5177\u88ab\u5220\u9664\u6216\u5151\u6362\uff0c\u7528\u6237\u4e0d\u5f97\u63d0\u51fa\u7d22\u8d54\u7b49\u8981\u6c42\uff0c\u672c\u516c\u53f8\u5bf9\u4e8e\u6d3b\u52a8\u6709\u6700\u7ec8\u7684\u89e3\u91ca\u6743\u3002\n\u4e94\u3001\u670d\u52a1\u7684\u505c\u6b62\u548c\u66f4\u6539\n\n\u53d1\u751f\u4e0b\u5217\u60c5\u5f62\u4e4b\u4e00\u65f6\uff0c\u672c\u516c\u53f8\u6709\u6743\u505c\u6b62\u6216\u4e2d\u65ad\u5411\u7528\u6237\u63d0\u4f9b\u7684\u670d\u52a1\uff1a\n\u7528\u6237\u6709\u53d1\u5e03\u8fdd\u6cd5\u4fe1\u606f\u3001\u4e25\u91cd\u8fdd\u80cc\u793e\u4f1a\u516c\u5fb7\u3001\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u6cd5\u5f8b\u7981\u6b62\u6027\u89c4\u5b9a\u7684\u884c\u4e3a\uff1b\n\u53d1\u5e03\u4e0d\u9053\u5fb7\u4fe1\u606f\u3001\u5e7f\u544a\u3001\u8a00\u8bba\u3001\u8fb1\u9a82\u9a9a\u6270\u4ed6\u4eba\uff0c\u6270\u4e71\u6b63\u5e38\u7684\u7f51\u7edc\u79e9\u5e8f\u548c\u6e38\u620f\u79e9\u5e8f\u7684\u884c\u4e3a\uff0c\u4ee5\u53ca\u5b9e\u65bd\u8fdd\u53cd\u672c\u534f\u8bae\u548c\u76f8\u5173\u89c4\u5b9a\u3001\u7ba1\u7406\u529e\u6cd5\u3001\u516c\u544a\u3001\u91cd\u8981\u63d0\u793a\uff0c\u5bf9\u672c\u516c\u53f8\u548c\u5176\u4ed6\u7528\u6237\u5229\u76ca\u9020\u6210\u635f\u5bb3\u7684\u5176\u4ed6\u884c\u4e3a\uff1b\n\u7531\u4e8e\u76f8\u5173\u653f\u5e9c\u673a\u6784\u7684\u8981\u6c42\u3002\n\u5728\u672c\u670d\u52a1\u6761\u6b3e\u7ea6\u5b9a\u7684\u60c5\u5f62\u4e0b\uff0c\u672c\u516c\u53f8\u5c31\u505c\u6b62\u6216\u66f4\u6539\u6216\u7ec8\u6b62\u5411\u7528\u6237\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u800c\u53ef\u80fd\u4ea7\u751f\u7684\u4e0d\u4fbf\u6216\u635f\u5bb3\uff0c\u672c\u516c\u53f8\u5bf9\u7528\u6237\u672c\u4eba\u6216\u4efb\u4f55\u7b2c\u4e09\u4eba\u5747\u4e0d\u8d1f\u4efb\u4f55\u635f\u5bb3\u8d54\u507f\u8d23\u4efb\u3002\n\u672c\u516c\u53f8\u6709\u6743\u4ec5\u6839\u636e\u5176\u5224\u65ad\uff0c\u5355\u65b9\u51b3\u5b9a\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u6682\u505c\u6216\u7ec8\u6b62\u5176\u6240\u63d0\u4f9b\u7684\u5168\u90e8\u6216\u90e8\u5206\u670d\u52a1\uff08\u5305\u62ec\u4e14\u4e0d\u9650\u4e8e\u589e\u52a0\u3001\u6682\u505c\u6216\u7ec8\u6b62\u67d0\u4e2a\u6e38\u620f\u7684\u8fd0\u8425\uff09\uff0c\u4e14\u65e0\u9700\u53e6\u884c\u4e2a\u522b\u901a\u77e5\u7528\u6237\uff0c\u7528\u6237\u4e0d\u5f97\u56e0\u6b64\u8981\u6c42\u4efb\u4f55\u8865\u507f\u6216\u8d54\u507f\u3002\n\u672c\u516c\u53f8\u5bf9\u5176\u670d\u52a1\u4e0d\u4fdd\u8bc1\u4e0d\u51fa\u73b0\u4efb\u4f55\u7a0b\u5e8fBUG\uff0c\u5e76\u5bf9\u7531\u6b64\u53ef\u80fd\u4ea7\u751f\u7684\u95ee\u9898\u4e0d\u627f\u62c5\u4efb\u4f55\u8d54\u507f\u8d23\u4efb\u3002\n\u516d\u3001\u670d\u52a1\u6761\u6b3e\u7684\u4fee\u6539\n\n\u672c\u516c\u53f8\u4fdd\u7559\u968f\u65f6\u4fee\u6539\u672c\u670d\u52a1\u6761\u6b3e\u7684\u6743\u5229\uff0c\u4fee\u6539\u672c\u670d\u52a1\u6761\u6b3e\u65f6\uff0c\u672c\u516c\u53f8\u5c06\u4e8e\u76f8\u5173\u7f51\u7ad9\u516c\u544a\u4fee\u6539\u7684\u4e8b\u5b9e\uff0c\u800c\u4e0d\u53e6\u5bf9\u7528\u6237\u8fdb\u884c\u4e2a\u522b\u901a\u77e5\u3002\u82e5\u7528\u6237\u4e0d\u540c\u610f\u4fee\u6539\u7684\u5185\u5bb9\uff0c\u53ef\u505c\u6b62\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\u3002\u82e5\u7528\u6237\u7ee7\u7eed\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\uff0c\u5373\u89c6\u4e3a\u7528\u6237\u5df2\u63a5\u53d7\u672c\u516c\u53f8\u6240\u4fee\u8ba2\u7684\u5185\u5bb9\u3002\n\n\u4e03\u3001\u6cd5\u5f8b\u9002\u7528\u548c\u4e89\u8bae\u89e3\u51b3\n\n\u672c\u534f\u8bae\u7684\u8ba2\u7acb\u3001\u6267\u884c\u548c\u89e3\u91ca\u53ca\u4e89\u8bae\u7684\u89e3\u51b3\u5747\u5e94\u9002\u7528\u4e2d\u56fd\u6cd5\u5f8b\u3002\n\u672c\u534f\u8bae\u6784\u6210\u53cc\u65b9\u5bf9\u672c\u534f\u8bae\u4e4b\u7ea6\u5b9a\u4e8b\u9879\u53ca\u5176\u4ed6\u6709\u5173\u4e8b\u5b9c\u7684\u5b8c\u6574\u534f\u8bae\uff0c\u9664\u672c\u534f\u8bae\u89c4\u5b9a\u7684\u4e4b\u5916\uff0c\u672a\u8d4b\u4e88\u672c\u534f\u8bae\u5404\u65b9\u5176\u4ed6\u6743\u5229\u3002\n\u5982\u672c\u534f\u8bae\u4e2d\u7684\u4efb\u4f55\u6761\u6b3e\u65e0\u8bba\u56e0\u4f55\u79cd\u539f\u56e0\u5b8c\u5168\u6216\u90e8\u5206\u65e0\u6548\u6216\u4e0d\u5177\u6709\u6267\u884c\u529b\uff0c\u672c\u534f\u8bae\u7684\u5176\u4f59\u6761\u6b3e\u4ecd\u5e94\u6709\u6548\u5e76\u4e14\u6709\u7ea6\u675f\u529b\u3002\n\u672c\u534f\u8bae\u4e2d\u7684\u6807\u9898\u4ec5\u4e3a\u65b9\u4fbf\u800c\u8bbe\uff0c\u4e0d\u5177\u6cd5\u5f8b\u6216\u5951\u7ea6\u6548\u679c\u3002\n\u5982\u53cc\u65b9\u5c31\u672c\u534f\u8bae\u5185\u5bb9\u6216\u5176\u6267\u884c\u53d1\u751f\u4efb\u4f55\u4e89\u8bae\uff0c\u53cc\u65b9\u5e94\u5c3d\u91cf\u53cb\u597d\u534f\u5546\u89e3\u51b3\uff1b\u534f\u5546\u4e0d\u6210\u65f6\uff0c\u4efb\u4f55\u4e00\u65b9\u5747\u53ef\u5411\u672c\u516c\u53f8\u6240\u5728\u5730\u7684\u4eba\u6c11\u6cd5\u9662\u63d0\u8d77\u8bc9\u8bbc\u3002\n\u5728\u9002\u7528\u6cd5\u5f8b\u5141\u8bb8\u7684\u6700\u5927\u8303\u56f4\u5185\uff0c\u672c\u516c\u53f8\u4fdd\u7559\u5bf9\u672c\u534f\u8bae\u7684\u6700\u7ec8\u89e3\u91ca\u6743\u3002\u7528\u6237\u5982\u5bf9\u672c\u534f\u8bae\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u8bf7\u8054\u7cfblpx@gamejym.com\u3002"],a.channelObj=window.qq,a.authorizationButton=null,a.videoState=r.UnReady,a.videoAdClickDelay=null,a.videoParas=null,a.autoShowBannerTimer=30,a.bannerTimeId=-1,a.showInterCDOver=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.exit=function(){this.channelObj.exitMiniProgram({})},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this;l.pzaSoundManager.initQQPlayAudio(),this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),l.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,n){e?d.default.err(e):""+n.code=="0"?(t.ctrl=n.data,d.default.log("\u8fd4\u56de",t.ctrl),p.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),p.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),p.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),p.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),p.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),p.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),t.qqLogin(function(){a&&a()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}this.channelObj.showShareMenu({}),this.initVideoAd(),this.initInterstitialAd()},a.prototype.qqLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=this;this.channelObj.login({success:function(t){if(t.code){console.log("qqLogin code:",t.code);var o={appId:a.getPara("appId"),code:t.code};d.default.jpost("https://ga.gamejym.com/fcm/qq/getOpenId",o,function(t,o){console.log("resp==>",o),t?d.default.err(t):""+o.errcode=="0"?(o.openid&&(a.channelUserId=o.openid,console.log("me.channelUserId",a.channelUserId),e&&e("login succ")),null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar||a.getUserInfo(null)):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}else console.log("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg)}})},a.prototype.sendUserInfo=function(e){if(null!=e)if(p.pzaLocalData.data.playerNick=e.nickName,p.pzaLocalData.data.playerAvatar=e.avatarUrl,p.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};d.default.jpost("https://ga.gamejym.com/fcm/qq/sendUserInfo",a,function(e,a){e?d.default.err(e):d.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(e,a,t){void 0===t&&(t=!0),console.log("run getUserInfo!!");var o=this.channelObj,n=this;o.getSetting({success:function(a){a.authSetting["scope.userInfo"]?o.getUserInfo({success:function(a){console.log("userInfo",a.userInfo),n.sendUserInfo(a.userInfo),e&&e()}}):o.authorize({scope:"scope.userInfo",success:function(){o.startRecord(),console.log("userInfo",a.userInfo),n.sendUserInfo(a.userInfo),e&&e()}})}})},a.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(e){this.authorizationButton=null,console.error(e)}},a.prototype.qqCheckPrivacySetting=function(e,a){var t=window.qq;"function"==typeof t.getPrivacySetting?t.getPrivacySetting({success:function(a){console.log(a),e&&e(a&&a.needAuthorization)},fail:function(){a&&a()},complete:function(){}}):a&&a()},a.prototype.qqPrivacyAuthorize=function(e,a){var t=window.qq;"function"==typeof t.requirePrivacyAuthorize?t.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),e&&e()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),a&&a()},complete:function(){}}):a&&a()},a.prototype.initVideoAd=function(){var e=this;this.getPara("videoId")&&(this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:this.getPara("videoId"),success:function(){console.log("loadAndShowVideoAd createRewardedVideoAd success")},fail:function(e,a){console.log("loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+a)},complete:function(){console.log("loadAndShowVideoAd createRewardedVideoAd complete")}}),this.rewardedVideoAd.onLoad(function(){console.log("videoAd loaded.")}),this.rewardedVideoAd.onError(function(a){console.error("load ad error:"+JSON.stringify(a)),cc.game.resume(),l.pzaSoundManager.resumeMusic(),e.videoParas.endCall&&e.videoParas.endCall(),e.videoParas.failCall&&e.videoParas.failCall(),e.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})}),this.rewardedVideoAd.onClose(function(a){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",a),a&&a.isEnded||void 0===a?(p.pzaLocalData.bpWatchAd(),console.log("\u64ad\u653e\u6fc0\u52b1\u89c6\u9891\u7ed3\u675f\uff0c\u7ed9\u4e88\u5956\u52b1"),e.videoParas.sucCall&&e.videoParas.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+e.videoParas.posName)):(console.log("\u64ad\u653e\u6ca1\u7ed3\u675f\uff0c\u4e0d\u7ed9\u4e88\u5956\u52b1"),e.videoParas.failCall()&&e.videoParas.failCall()),e.loadVideo(),cc.game.resume(),l.pzaSoundManager.resumeMusic(),e.videoParas.endCall&&e.videoParas.endCall()}),this.loadVideo())},a.prototype.showVideo=function(e){return console.log("pzaVideoState ",this.videoState),this.videoState==r.Play?(cc.game.resume(),l.pzaSoundManager.resumeMusic(),this.videoParas.failCall&&this.videoParas.failCall(),this.videoParas.endCall&&this.videoParas.endCall(),console.log("\u6b63\u5728\u64ad\u653e\u6fc0\u52b1\u89c6\u9891")):this.videoState==r.UnReady?(cc.game.resume(),l.pzaSoundManager.resumeMusic(),this.videoParas.failCall&&this.videoParas.failCall(),this.videoParas.endCall&&this.videoParas.endCall(),void this.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})):(this.videoParas=e,this.videoState=r.Play,void this.rewardedVideoAd.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}))},a.prototype.loadVideo=function(){var e=this;e.rewardedVideoAd.load().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),setTimeout(function(){e.videoState=r.Ready},3e3)}).catch(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),e.videoState=r.UnReady,setTimeout(function(){e.loadVideo()},2e3)})},a.prototype.showBanner=function(){var e=this.getPara("bannerAd");if(e&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer);var a=this.channelObj.getSystemInfoSync(),t=a.windowWidth,o=a.windowHeight;this.bannerState=i.Show,d.default.log("showBanner",e);var n={adUnitId:e,style:{top:0,left:0,width:320}},r=this;this.bannerAd=this.channelObj.createBannerAd(n),this.bannerAd.onResize(function(e){r.bannerAd.style.top=o-e.height,r.bannerAd.style.left=(t-e.width)/2,r.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),r.bannerState==i.Hide&&r.closeBanner()}).catch(function(e){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})}),this.bannerAd.onError(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))})}},a.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.destroy()},a.prototype.showBannerByTime=function(e){var a=this;void 0===e&&(e=!1);var t=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<40&&(t=40),this.showBanner(e),this.bannerTimeId=setInterval(function(){a.showBanner(e)},1e3*t)},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.showInter=function(e){var a=s.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",a),(e||c.pzaChannel.instance().getCtrl("p10")>=a)&&this.showInterstitialAd()},a.prototype.closeInter=function(){this.closeInterstitialAd()},a.prototype.initInterstitialAd=function(){var e=this,a=this.getPara("customInsertAd");if(a){var t=this.getSysInfo().windowHeight/2-260,o={adUnitId:a};d.default.log("showCustomAd",a,t),this.interstitialAd=this.channelObj.createInterstitialAd(o),this.interstitialAd.onClose(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25");var a=s.pzaUtil.getRandomFloatNum(0,1),t=.1*c.pzaChannel.instance().getCtrl("p18");console.log("\u5173\u95ed\u540e\u6982\u7387: ",a,t),t>=a&&setTimeout(function(){e.showInter()},3e3)}),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.interstitialAd.load()}},a.prototype.showInterstitialAd=function(){if(this.getPara("customInsertAd"))if(this.showInterCDOver){var e=this,a=this.getCtrl("p12"),t=c.pzaChannel.instance().getCtrl("p11");console.log("p11",t),console.log("p12",a);var o=this.getCtrl("p26"),n=s.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",n);var i=0;.01*o>=n&&(i=1e3),setTimeout(function(){e.interstitialAd.show().then(function(){d.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e.showInterCDOver=!1,e.interstitialAd.load(),setTimeout(function(){e.showInterCDOver=!0},1e3*t)}).catch(function(a){d.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a)),e.interstitialAd.load()})},a*i)}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},a.prototype.closeInterstitialAd=function(){this.getPara("customInsertAd")&&this.interstitialAd&&this.interstitialAd.hide()},a.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),console.log("qq shareAppMessage"),this.channelObj.shareAppMessage({title:"\u53eb\u4f60\u7684\u670b\u53cb\u4e00\u8d77\u6765\u73a9\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b!"}),a&&a()},a.prototype.addShortcut=function(e){console.log("click oppo addShortcut");var a=this;this.channelObj.hasShortcutInstalled({success:function(t){console.log("hasShortcutInstalled res",t),0==t?a.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),e.sucCall&&e.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},a.prototype.checkShortcut=function(e){this.channelObj.hasShortcutInstalled({success:function(a){0==a?e.sucCall&&e.sucCall():e.failCall&&e.failCall()},fail:function(){},complete:function(){}})},a}(u.pzaChannelWeb);t.pzaChannelQQ=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelRY:[function(e,a,t){"use strict";cc._RF.push(a,"674d0i2X6NLzZQde3I2A/+a","pzaChannelRY");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelRY=void 0;var i,r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaUtil"),s=e("../View/pzaCommonMask"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={}));var h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="ry",a.paraMap=new Map([["appId","32035923"],["bannerAd","1705916"],["customBannerAd","1705916"],["customInsertAd","1705922"],["videoId","1705927"],["ctrlId","66cc411dc5b6582182fb7ace"]]),a.bannerState=i.Hide,a.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n\u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n\nSDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\noppo\u6e38\u620f\u4e2d\u5fc3SDK\toppo\toppo\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\thttps://open.oppomobile.com/wiki/doc#id=11007\noppo\u5e7f\u544aSDK\toppo\t\u7528\u4e8e\u63d0\u4f9b\u5e7f\u544a\u670d\u52a1\t\u8054\u7f51\u53ca\u7f51\u7edc\u72b6\u6001\u53d8\u5316,\u83b7\u53d6\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49);\u83b7\u53d6IMEI\u3001IMSI\u3001\u8bbe\u5907 MAC \u5730\u5740\u7b49\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f;(\u7c97\u7565\u6216\u7cbe\u786e\u7684)\u4f4d\u7f6e\u4fe1\u606f;\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8;\thttps://open.oppomobile.com/wiki/doc#id=11007\n\u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK\toppo\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://open.oppomobile.com/wiki/doc#id=11007\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002"],a.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",a.channelObj=window.qg,a.autoShowBannerTimer=30,a.bannerTimeId=-1,a.customAdMap={},a.showInterCDOver=!0,a.firstShowAdClose=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.exit=function(){this.channelObj.exitApplication({data:0})},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(console.log("ctrlId :",n),n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,n){e?d.default.err(e):""+n.code=="0"?(t.ctrl=n.data,d.default.log("\u8fd4\u56de",t.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),t.qgLogin(function(){a&&a(),t.getDeviceID()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},a.prototype.getDeviceID=function(){this.channelObj.getDeviceId({success:function(e){console.log("handling success: "+e.deviceId)},fail:function(e,a){console.log("handling fail, code = "+a)}})},a.prototype.qgLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=this;this.channelObj.login({success:function(t){var o=JSON.stringify(t.data);console.log(o),a.channelUserId=t.uid,console.log("me.channelUserId",a.channelUserId),e&&e("login succ")},fail:function(e){console.log(JSON.stringify(e))}})},a.prototype.sendUserInfo=function(e){if(null!=e)if(r.pzaLocalData.data.playerNick=e.nickName,r.pzaLocalData.data.playerAvatar=e.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",a,function(e,a){e?d.default.err(e):d.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(){},a.prototype.showVideo=function(e){var a=this,t=this.getPara("videoId");if(t){d.default.log("showVideo",t,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(e){d.default.err(e)})},this.videoFns.onError=function(t){d.default.err(t),e.failCall&&e.failCall(),e.endCall&&e.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(a){console.log("video onClose===>",a),a&&a.isEnded?(r.pzaLocalData.bpWatchAd(),e.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+e.posName)):e.failCall&&e.failCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),e.endCall&&e.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},a.prototype.showBanner=function(){var e=this,a=this.getPara("bannerAd");if(a&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",a);var t={adUnitId:a,style:{left:0,top:0,width:500,gravity:"bottom"}};this.bannerAd=this.channelObj.createBannerAd(t),this.bannerAd.onError&&this.bannerAd.onError(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.bannerAd.load().then(function(){e.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e.bannerState==i.Hide&&e.closeBanner()}).catch(function(e){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})}).catch(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))})}},a.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&(this.bannerAd.destory(),this.bannerAd=null)},a.prototype.showBannerByTime=function(e){var a=this;void 0===e&&(e=!1);var t=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<40&&(t=40),this.showBanner(e),this.bannerTimeId=setInterval(function(){a.showBanner(e)},1e3*t)},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.showInter=function(e){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",a),(e||.01*c.pzaChannel.instance().getCtrl("p10")>=a)&&this.showCustomAd(!1)},a.prototype.closeInter=function(){this.closeCustomAd(!1)},a.prototype.showCustomAd=function(e,a,t){var o=this,n=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(this.showInterCDOver){var i=e?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,r={adUnitId:n,style:{top:i}};t&&(r.style=t),d.default.log("showCustomAd",n,e,i),this.customAdMap[n]||(d.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",n),this.customAdMap[n]=this.channelObj.createNativeAd(r),this.customAdMap[n].offHide(),this.customAdMap[n].onHide(function(){var e=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=e&&setTimeout(function(){o.showCustomAd(!1)},3e3),o.customAdMap[n].destroy(),o.customAdMap[n]=null}),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[n].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[n].offLoad(),this.customAdMap[n].onLoad(function(){console.log("customAd\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}));var p=this;if(e)this.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))});else{var s=this.getCtrl("p12"),u=c.pzaChannel.instance().getCtrl("p11");console.log("p11",u),console.log("p12",s);var h=this.getCtrl("p26"),m=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",m);var f=0;.01*h>=m&&(f=1e3),setTimeout(function(){o.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),p.showInterCDOver=!1,setTimeout(function(){p.showInterCDOver=!0},1e3*u)}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},s*f)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},a.prototype.closeCustomAd=function(e){void 0===e&&(e=!1);var a=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");a&&this.customAdMap[a]&&this.customAdMap[a].hide()},a.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),t&&t()},a.prototype.addShortcut=function(e){console.log("click oppo addShortcut");var a=this;this.channelObj.hasShortcutInstalled({success:function(t){console.log("hasShortcutInstalled res",t),0==t?a.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),e.sucCall&&e.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},a.prototype.checkShortcut=function(e){this.channelObj.hasShortcutInstalled({success:function(a){0==a?e.sucCall&&e.sucCall():e.failCall&&e.failCall()},fail:function(){},complete:function(){}})},a.prototype.copyToClip=function(e,a){this.channelObj.setClipboardData({data:e,success:function(){a&&a()},fail:function(){a&&a()},complete:function(){}})},a}(u.pzaChannelWeb);t.pzaChannelRY=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelTT:[function(e,a,t){"use strict";cc._RF.push(a,"c18b6INM5FCMLS581mPF2C7","pzaChannelTT");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelTT=void 0;var i,r,p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaStatisticsMgr"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaUtil"),d=e("../Common/pzaWorldEventManager"),h=e("../View/pzaCommonMask"),m=e("./pzaChannel"),f=e("./pzaChannelWeb"),z=e("./pzakc"),y=e("./pzaKDefine");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={})),function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"}(r||(r={}));var g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="tt",a.channelId=1,a.paraMap=new Map([["appId","tta6ded06339d3b35002"],["insertAd","fjamc9ee3cdj38d60j"],["vedioAd","18662ah5a29e461lo9"],["ctrlId","6930ecad088d094169eb9172"],["gid","6930ecad088d094169eb9172"]]),a.sharePicsArr=[{title:"\u9080\u8bf7\u4f60\u4e00\u8d77\u6765\u73a9",url:"https://mmocgame.qpic.cn/wechatgame/WbKJukjJiaQzo1cicUPZhUBjeL6ia4fnE1KzxUhgS63teOKgibfxj2Osib2TVnNQ1ormS/0",id:"TqeKD7N+Tc6BgFQw+tqj1w=="}],a.shareTitle="\u690d\u7269\u6d88\u9664\u50f5\u5c38",a.shareImgId="3grhfxi84lo43cmn9m",a.channelObj=window.tt,a.sid=null,a.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u4e2d\u6b4c\u8a89\u4fe1(\u4e0a\u6d77)\u6587\u5316\u53d1\u5c55\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2023SR1121601",a.onShowCall=null,a.authorizationButton=null,a.sdkData=null,a.shareIndex=0,a.bannerState=r.Hide,a.showInterCDOver=!0,a.startRecorderTime=0,a.endRecorderTime=0,a.video_path=null,a.videoTopics=["\u5047\u9762\u9a91\u58eb\uff1a\u82f1\u96c4\u96c6\u7ed3"],a.title="\u5047\u9762\u9a91\u58eb\uff1a\u82f1\u96c4\u96c6\u7ed3",a.recordeFlag=0,a.iconState=i.Hide,a.iconAd=null,a}return n(a,e),a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.hasPrivacy=function(){return!0},a.prototype.exit=function(){this.channelObj.exitMiniProgram({isFullExit:!0})},a.prototype.init=function(a){var t=this;console.log("byte init"),e.prototype.init.call(this,a);var o=this.channelObj;o.onShow(function(e){console.log("ttOnShow: ",e),cc.game.resume(),l.pzaSoundManager.resumeMusic(),e&&e.scene&&e.scene&&(p.pzaLocalData.canGetSideRwd=!0,d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.UPDATE_SIDEVIEW_STATE)),t.onShowCall&&t.onShowCall(),t.onShowCall=null}),o.onHide(function(){cc.game.pause(),t.isShare&&(t.shareTime=(new Date).getTime())});var n=this,i={id:this.getPara("ctrlId")};z.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,o){e?z.default.err(e):""+o.code=="0"?(t.ctrl=o.data,p.pzaLocalData.maxAdShareCount=parseInt(n.ctrl.p1),p.pzaLocalData.maxShareRwdCount=parseInt(n.ctrl.p2),z.default.log("\u5b57\u8282\u8fd4\u56de",t.ctrl),t.ttLogin(function(){a&&a()})):z.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))}),this.channelObj.showShareMenu({}),this.checkGetSideRwd();var r=z.default.getData("shareData",{today:"",shareCount:"0"}),s=new Date,c=s.getUTCFullYear()+"-"+s.getUTCMonth()+"-"+s.getUTCDay();r.today!=c&&(r.today=c,r.shareCount=0,z.default.saveData("shareData",r))},a.prototype.checkGetSideRwd=function(){var e=new Date,a=e.getUTCFullYear()+"-"+e.getUTCMonth()+"-"+e.getUTCDay(),t=this.channelObj,o=z.default.getData("sidebar",{today:"",canGet:""});o&&o.today==a||(t.checkScene?t.checkScene({scene:"sidebar",success:function(e){console.log("check scene success: ",e.isExist),o.canGet="0",z.default.saveData("sidebar",o),p.pzaLocalData.canGetSideRwd=!0},fail:function(e){console.log("check scene fail:",e),o.canGet="-1",z.default.saveData("sidebar",o)}}):console.log("\u6ca1\u6709checkScene"))},a.prototype.initSharePic=function(e){var a=this;null==e||e.length<=0||(this.sharePicsArr=[],e.forEach(function(e){var t={title:e.txt,url:e.picUrl,id:e.picId};a.sharePicsArr.push(t)}))},a.prototype.onLoginSuc=function(){var e=this.channelObj.getLaunchOptionsSync().query;e&&e.act&&e.sid&&(this.sid=e.sid,this.shareFrom())},a.prototype.getUserInfoToWeb=function(){null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar||this.getUserInfo(null)},a.prototype.shareFrom=function(){if(this.sid&&this.channelUserId){var e={sid:this.sid,openId:this.channelUserId,star:p.pzaLocalData.getAllStar()};z.default.jpost("https://ga.gamejym.com/fcm/zijie/shareFrom",e,function(e,a){e?z.default.err(e):z.default.log("shareFrom\u8fd4\u56de",a)})}},a.prototype.getShareResult=function(e,a){if(!this.channelUserId)return a([]);var t={appId:this.getPara("appId"),openId:this.channelUserId,act:e};z.default.jpost("https://ga.gamejym.com/fcm/zijie/getShareResult",t,function(e,t){if(e)return z.default.err(e),void a([]);z.default.log("getShareResult\u8fd4\u56de",t),t&&0===t.code?a(t.data):a([])})},a.prototype.wxCheckPrivacySetting=function(e,a){var t=window.tt;"function"==typeof t.getPrivacySetting?t.getPrivacySetting({success:function(a){console.log(a),e&&e(a&&a.needAuthorization)},fail:function(){a&&a()},complete:function(){}}):a&&a()},a.prototype.wxPrivacyAuthorize=function(e,a){var t=window.tt;"function"==typeof t.requirePrivacyAuthorize?t.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),e&&e()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),a&&a()},complete:function(){}}):a&&a()},a.prototype.ttLogin=function(e){void 0===e&&(e=function(e){e&&console.error(e)});var a=window.tt,t=this;a.login({force:!0,success:function(o){if(!o.code)return console.error("\u672a\u83b7\u53d6\u5230code"),void e("\u672a\u83b7\u53d6\u5230code");console.log("login \u8c03\u7528\u6210\u529f",o.code);var n=a.getLaunchOptionsSync(),i=n.query,r={clickid:i.clickid||"",promotionid:i.promotionid||"",requestid:i.requestid||""};z.default.jpost("https://ga.gamejym.com/fcm/ttAdReport/init",{appId:t.getPara("appId"),code:o.code,scene:n.scene,query:r},function(a,o){return a?(z.default.err(a),void e(a)):0===o.code&&o.data&&o.data.openid?(console.log("init resp===>",o),t.channelUserId=o.data.openid,z.default.saveData("ttAdReport",1),void e("login succ")):(z.default.err("\u83b7\u53d6openId\u5931\u8d25",o),void e(a))})},fail:function(a){e(a.errMsg),console.log("login\u8c03\u7528\u5931\u8d25")}}),a.onShareAppMessage(function(){var e=t.getShareObj();return null!=e?{title:e.title,imageUrl:e.url,imageUrlId:e.id,success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25",e)}}:{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",imageUrl:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",imageUrlId:"Xf4UCePgQ6Owe0gO7nnOkw==",success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25",e)}}})},a.prototype.getShareObj=function(){var e=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[e]},a.prototype.registerOnshow=function(e){this.onShowCall=e},a.prototype.sendUserInfo=function(e){if(!(null==e||p.pzaLocalData.data.playerNick&&p.pzaLocalData.data.playerAvatar))if(p.pzaLocalData.data.playerNick=e.nickName,p.pzaLocalData.data.playerAvatar=e.avatarUrl,p.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};z.default.jpost("https://ga.gamejym.com/fcm/zijie/sendUserInfo",a,function(e,a){e?z.default.err(e):z.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(e){if(null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar)return e&&e(),void console.log("\u5df2\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u540e\u4e0d\u518d\u9700\u8981\u6388\u6743");var a=this.channelObj,t=this;a.getUserInfo({success:function(a){console.log("getUserInfo\u8c03\u7528\u6210\u529f: ",a.userInfo),t.sendUserInfo({nickName:a.userInfo.nickName,avatarUrl:a.userInfo.avatarUrl}),e&&e()},fail:function(o){console.log("getUserInfo\u8c03\u7528\u5931\u8d25: ",o.errMsg),a.openSetting({success:function(e){console.log("\u6253\u5f00\u8bbe\u7f6e\u9875\u9762\u6210\u529f: ",e),a.getUserInfo({success:function(e){console.log("getUserInfo\u8c03\u7528\u6210\u529f: ",e.userInfo),t.sendUserInfo({nickName:e.userInfo.nickName,avatarUrl:e.userInfo.avatarUrl})},fail:function(){}})},fail:function(e){console.log("\u6253\u5f00\u8bbe\u7f6e\u9875\u9762\u5931\u8d25: ",e.errMsg)},complete:function(e){console.log("\u63a5\u53e3\u5df2\u8c03\u7528: ",e.errMsg)}}),e&&e()}})},a.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(e){this.authorizationButton=null,console.error(e)}},a.prototype.canShare=function(){return!0},a.prototype.showBanner=function(){var e=this,a=this.getPara("bannerAd");if(a&&0!=this.getCtrl("p21"))if(this.bannerState!=r.Show){z.default.log("showBanner isShow",a);var t=this.channelObj,o={adUnitId:a,adIntervals:30,style:{width:200,top:50,left:50}};this.bannerState=r.Show,this.bannerAd=t.createBannerAd(o),console.log("this.bannerAd ",this.bannerAd),this.bannerAd.resize&&this.bannerAd.resize(),this.bannerAd.onResize(function(a){console.log("banner onResize===",a.height,a.width),e.bannerAd.style.top=50,e.bannerAd.style.left=50,console.log("this.bannerAd ",e.bannerAd)}),this.bannerAd.onLoad(function(){e.bannerAd.show().then(function(){z.default.log("banner\u52a0\u8f7d\u6210\u529f"),e.bannerState==r.Hide&&(z.default.log("banner\u663e\u793a\u5173\u95ed"),e.closeBanner())}).catch(function(a){e.bannerAd=null,z.default.log("showBanner err:"+JSON.stringify(a))})})}else z.default.log("\u5df2\u7ecf\u663e\u793abanner")},a.prototype.closeBanner=function(){this.bannerState=r.Hide,this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},a.prototype.showBannerByTime=function(e){void 0===e&&(e=!1)},a.prototype.closeBannerByTime=function(){this.closeBanner()},a.prototype.copyToClip=function(e,a){var t=this;this.channelObj.setClipboardData({data:e,success:function(){t.channelObj.showToast({title:"\u5185\u5bb9\u5df2\u590d\u5236"}),a(null)},fail:function(e){a(e)}})},a.prototype.showVideo=function(e){var a=this;s.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:e.adsid},{name:"adname",value:e.posName});var t=this.getPara("vedioAd");if(console.log("vedioAd===>",t),t){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:t}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){z.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(t){z.default.err("onError",t),cc.game.resume(),l.pzaSoundManager.resumeMusic(),e.failCall(),e.endCall(),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:-1},{name:"adname",value:e.posName}),h.pzaCommonMask.hideMask(),p.pzaLocalData.maxAdShareCount>0&&p.pzaLocalData.data.adShareCount<p.pzaLocalData.maxAdShareCount?a.shareAppMessage({title:null,act:null,adsid:""},function(){p.pzaLocalData.data.adShareCount++,p.pzaLocalData.addDirty("adShareCount"),e.sucCall&&e.sucCall()}):a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"}),a.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){if(h.pzaCommonMask.hideMask(),cc.game.resume(),l.pzaSoundManager.resumeMusic(),t&&t.isEnded){p.pzaLocalData.bpWatchAd(),e.sucCall(),e.endCall();var n=function(){z.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+e.posName),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:0},{name:"adname",value:e.posName})};if(!z.default.getData("ttAdReport",0)||!o.channelUserId)return console.log("\u9700\u8981\u5148\u6fc0\u6d3b\u624d\u80fd\u56de\u4f20\u5173\u952e\u884c\u4e3a"),void n();var i=a.channelObj.getLaunchOptionsSync().query.clickid;if(!i)return console.log("\u65e0clickid"),void n();console.log("clickid ===>",i),z.default.jpost("https://ga.gamejym.com/fcm/ttAdReport/report",{appId:o.getPara("appId"),type:"game_addiction",openId:o.channelUserId,clickid:i},function(e,a){if(e)return z.default.err(e),void n();n(),z.default.log("\u56de\u4f20\u5173\u952e\u884c\u4e3a\u8fd4\u56de",a)})}else e.failCall(),e.endCall(),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:e.adsid},{name:"playret",value:1},{name:"adname",value:e.posName});console.log("==========>\u6062\u590d")},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){z.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return z.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),h.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),h.pzaCommonMask.hideMask()})})}},a.prototype.showInter=function(e){var a=this,t=u.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10: ",m.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),e||.01*m.pzaChannel.instance().getCtrl("p10")>=t){if(!this.showInterCDOver)return void console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d");var o=this.getPara("insertAd");if(!o)return;var n=this,i=m.pzaChannel.instance().getCtrl("p11");console.log("p11",i);var r=this.channelObj;z.default.log("showInter isShow",o),this.interstitialAd=r.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))});var p=this.getCtrl("p12");console.log("p12",p);var l=this.getCtrl("p26"),s=u.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",m.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",s);var c=0;.01*l>=s&&(c=1e3),setTimeout(function(){a.interstitialAd.show().then(function(){z.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),n.showInterCDOver=!1,setTimeout(function(){n.showInterCDOver=!0},1e3*i)}).catch(function(e){z.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},p*c)}},a.prototype.closeInter=function(){this.interstitialAd&&this.interstitialAd.close&&this.interstitialAd.close()},a.prototype.showDesktop=function(){},a.prototype.checkShortcut=function(e){window.tt.checkShortcut({success:function(a){1==a.status?e.sucCall():e.failCall()},fail:function(){e.failCall()}})},a.prototype.addShortcut=function(e){this.channelObj.addShortcut({success:function(){z.default.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),e.sucCall()},fail:function(a){z.default.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25:"+a.errMsg),e.failCall()}})},a.prototype.recorderStart=function(){z.default.log("\u5f55\u5c4f====start"),a.recordTime=0,a.rState="recording";var e=this;try{e.channelObj.getGameRecorderManager().onStart(function(){e.startRecorderTime=Date.now(),z.default.log("\u5f55\u5c4f\u5f00\u59cb",e.startRecorderTime)}),e.channelObj.getGameRecorderManager().start({duration:300}),z.default.sendMsg(y.Msg.recorderStart),e.recordeFlag=setInterval(function(){"recording"===a.rState&&(a.recordTime++,a.recordTime>300&&(e.recorderStop(),z.default.sendMsg(y.Msg.recorderStop)))},1e3)}catch(t){}},a.prototype.recorderStop=function(){var e=this;if(e.endRecorderTime=Date.now(),a.rState="recordEnd",clearInterval(e.recordeFlag),z.default.log("\u5f55\u5c4fStop",e.endRecorderTime),z.default.log("\u505c\u6b62\u5f55\u5c4f"),e.channelObj.getGameRecorderManager().stop(),z.default.sendMsg(y.Msg.recorderStop),e.endRecorderTime-e.startRecorderTime<3e3)return c.pzaTipManager.showHomeTip("\u5f55\u5c4f\u5931\u8d25:\u65f6\u957f\u5c11\u4e8e3\u79d2",null,2),e.video_path=null,e.endRecorderTime=0,e.startRecorderTime=0,a.rState="idle",a.recordTime=0,z.default.sendMsg(y.Msg.recorderFail),void e.channelObj.getGameRecorderManager().onStop(function(){});e.channelObj.getGameRecorderManager().onStop(function(a){e.video_path=a.videoPath,e.endRecorderTime=Date.now()})},a.prototype.getRecordTime=function(){return this.endRecorderTime-this.startRecorderTime},a.prototype.shareAppMessage=function(e,a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),this.canShare()){var o=this.getShareObj(),n="";if(e&&e.act&&(n=e.act),n){var i=this;i.shareFailBack=null,i.shareSucBack=null,i.isShare=!1,"recruit_share"==e.act&&(i.isShare=!0,i.shareFailBack=t,i.shareSucBack=a);var r={appId:this.getPara("appId"),openId:this.channelUserId,act:n};z.default.jpost("https://ga.gamejym.com/fcm/zijie/shareTo",r,function(e,a){if(e)z.default.err(e);else{z.default.log("shareTo\u8fd4\u56de",a);var t={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};a&&0===a.code&&(t.query="sid="+a.data.sid+"&act="+n,z.default.log("shareQuery",t.query)),console.log("actShare===>",o),i.channelObj.shareAppMessage({templateId:"96d55k3ghj9974g858",title:o.title,query:t.query,success:function(){p.pzaLocalData.shareGetCoin(),i.shareSucBack&&i.shareSucBack()},fail:function(){i.shareFailBack&&i.shareFailBack()}})}})}else{this.shareFailBack=t,this.shareSucBack=a,this.isShare=!0,console.log("!actShare===>",o);var l=this;this.channelObj.shareAppMessage({templateId:"96d55k3ghj9974g858",title:o.title,success:function(){p.pzaLocalData.shareGetCoin(),l.shareSucBack&&l.shareSucBack()},fail:function(){l.shareFailBack&&l.shareFailBack()}})}}},a.prototype.shareVideo=function(e){if(void 0===e&&(e=null),!this.video_path)return z.default.err("\u65e0\u5f55\u5236\u89c6\u9891"),this.video_path=null,this.endRecorderTime=0,this.startRecorderTime=0,a.rState="idle",a.recordTime=0,z.default.sendMsg(y.Msg.recorderFail),void this.channelObj.showToast({title:"\u89c6\u9891\u672a\u5f55\u5236\u8db3\u591f\u65f6\u95f4"});var t=this;this.channelObj.shareAppMessage({templateId:"96d55k3ghj9974g858",channel:"video",title:t.title,query:"",extra:{videoPath:t.video_path,videoTopics:t.videoTopics},success:function(){e&&e(),t.channelObj.showToast({title:"\u5206\u4eab\u6210\u529f"}),t.endRecorderTime=0,t.startRecorderTime=0,a.rState="idle",a.recordTime=0,z.default.sendMsg(y.Msg.recorderDone)},fail:function(e){t.channelObj.showToast({title:"\u5206\u4eab\u89c6\u9891\u5931\u8d25"}),z.default.err(e),t.endRecorderTime=0,t.startRecorderTime=0,t.video_path=null,a.rState="idle",a.recordTime=0,z.default.sendMsg(y.Msg.recorderFail)}})},a.prototype.showSidebar=function(e){var a=z.default.getData("sidebar",{today:"",canGet:"-1"});window.tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success"),a.canGet="1",z.default.saveData("sidebar",a),e&&e(!0)},fail:function(t){console.log("navigate to scene fail: ",t),a.canGet="0",z.default.saveData("sidebar",a),e&&e(!1)}})},a.prototype.showIconAd=function(e,a,t){var o=this,n=m.pzaChannel.instance().getPara("appId"),r=this.getSysInfo().windowHeight-100,p=this.getSysInfo().windowWidth/2+90;console.log("this.getSysInfo().windowWidth",this.getSysInfo().windowWidth),console.log("this.getSysInfo().windowHeight",this.getSysInfo().windowHeight);var l={gridCount:"one",size:"large",position:{top:r,left:p},query:{tt210457b9be35faff07:"from_kunpo_appid=x8xDF4cn&from_app_account="+m.pzaChannel.instance().getChannel().channelUserId+"&to_kunpo_appid=yC0pRoqd&channel_id=4",ttb058c6e52f6c148702:"fromAppId="+n+"&fromUserId="+a}};this.iconState=i.Show,this.iconAd=this.channelObj.createGridGamePanel(l),this.iconAd&&this.iconAd.show().then(function(){console.error("\u5c55\u793a\u6e38\u620f\u63a8\u8350\u7ec4\u4ef6\u6210\u529f"),o.iconState!=i.Hide?t&&t():o.hideIconAd()}).catch(function(e){console.error("\u5c55\u793a\u6e38\u620f\u63a8\u8350\u7ec4\u4ef6\u5931\u8d25",e),o.iconState=i.Hide}),this.iconAd&&this.iconAd.onStateChange(function(t){if(console.log("onClickIconAd data:",t),t&&"click"===t.state){console.log("\u70b9\u51fb\u5c0f\u6e38\u620f\u8df3\u8f6c!");var o=m.pzaChannel.instance().getPara("appId");z.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:o,cid:e,openId:a})}})},a.prototype.hideIconAd=function(){this.iconState=i.Hide,this.iconAd&&this.iconAd.destroy()},a.unionid=null,a.API_EventType={active:"active",active_register:"active_register",game_addiction:"game_addiction"},a.recordTime=0,a.rState="idle",a.shareMaxTimes=5,a}(f.pzaChannelWeb);t.pzaChannelTT=g,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaChannelTap:[function(e,a,t){"use strict";cc._RF.push(a,"bdf3bDXHLdCIJ9KdMaNOJlp","pzaChannelTap");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelTap=void 0;var i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="taptap",a.isVideoStarted=!1,a}return n(a,e),a.prototype.copyToClip=function(e){window.AJProxy.copyToClip(e)},a.prototype.hasPrivacy=function(){return!0},a.prototype.showVideo=function(e){var a=this;if(!this.isVideoStarted){this.isVideoStarted=!0;var t=e.endCall;e.endCall=function(){a.isVideoStarted=!1,t()},window.regAndroidCall("videoReward",e.sucCall),window.regAndroidCall("videoClose",e.endCall),window.regAndroidCall("videoFail",e.failCall),window.AJProxy.showVideo("b63ff12ab86fdb")}},a}(e("./pzaChannelWeb").pzaChannelWeb);t.pzaChannelTap=i,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb"}],pzaChannelVivo2:[function(e,a,t){"use strict";cc._RF.push(a,"b96b61vaR1LSonl8s3hfTzI","pzaChannelVivo2");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelVivo2=void 0;var i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="vivo",a.paraMap=new Map([["appId","com.njtd.zwxcjs.mini"],["bannerAd","edab15f951bb45e1a219c8c0cdd51bd9"],["customInsertAd","2dc3b7723aa6446fb99a0bb7345653be"],["videoAd","0d1d5873f725468fa0cac57ca4e7ff42"],["ctrlId","678f1655c8946b1700d95a1c"]]),a.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2020SR0911781",a.privacyStr=['\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n        \u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n        \n        \u4ea7\u54c1\u540d\u79f0:\n        \n        \u300a\u690d\u7269\u6d88\u9664\u50f5\u5c38\u300b\n        \n        \u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n        \n        \u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n        \n        \u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n        \n        \u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n        \n        \u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n        \n        \u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n        \u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n        \u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n        \u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n        \u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n        \u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n        \n        \u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n        \n        \u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n        \u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n        \u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n        \u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n        \u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n        \u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n        \u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n        \n        \u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n        \n        SDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u8bbe\u5907\u4fe1\u606f\uff1a\u8bbe\u5907\u5236\u9020\u5546\uff0c\u8bbe\u5907\u578b\u53f7\uff0c\u7cfb\u7edf\u7248\u672c\uff0c\u4f20\u611f\u5668\u4fe1\u606f\uff08\u5982\u52a0\u901f\u5ea6\u3001\u91cd\u529b\u3001\u9640\u87ba\u4eea\u4f20\u611f\u5668\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u7f51\u7edc\u4fe1\u606f\uff1aIP\u5730\u5740\uff0c\u8054\u7f51\u65b9\u5f0f\uff0c\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\uff0c SSID\uff0cBSSID\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u5e7f\u544a\u76d1\u6d4b\uff0c\u53cd\u4f5c\u5f0a\t\u6807\u8bc6\u7b26\u4fe1\u606f\uff1aIMEI\uff08\u4ec5\u9650\u5b89\u53539\u53ca\u4ee5\u524d\u7248\u672c\uff09\uff0cIMSI\uff0cOAID\uff0cVAID\uff0cMAC\u5730\u5740\uff0cAndroid_ID\uff0cICCID\uff0cSN\u53f7\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u53cd\u4f5c\u5f0a\t\u5e94\u7528\u4fe1\u606f\uff1a\u5e94\u7528\u540d\u79f0\uff0c\u5e94\u7528\u5305\u540d\uff0c\u5e94\u7528\u7248\u672c\u53f7\uff0c\u8f6f\u4ef6\u5b89\u88c5\u5217\u8868\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u4e2a\u4eba\u4f4d\u7f6e\u4fe1\u606f\uff1a\u7c97\u7565\u5b9a\u4f4d\u4fe1\u606f\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\t\u5e94\u7528\u4f7f\u7528\u4fe1\u606f\uff1a\u5e7f\u544a\u4ea4\u4e92\u884c\u4e3a\uff08\u5e7f\u544a\u4e92\u52a8\u8bb0\u5f55\uff0c\u5982\u66dd\u5149\u3001\u70b9\u51fb\u3001\u8f6c\u5316\u7b49\u4fe1\u606f\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u51cf\u5c11App\u5d29\u6e83\uff0c\u63d0\u9ad8\u7a33\u5b9a\u6027\u548c\u6027\u80fd\t\u8bca\u65ad\u6570\u636e\uff1a\u5d29\u6e83\u6570\u636e\u3001\u6027\u80fd\u6570\u636e\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u8054\u8fd0SDK\tVIVO\tVIVO\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u4fe1\u606f\uff1a\u624b\u673aimei\uff08Android10\u4ee5\u4e0b\uff09\uff0c\u624b\u673aemmcid\u3001usfid\u3001\u7248\u672c\u53f7\u3001\u7248\u672c\u540d\u79f0 Android10\u552f\u4e00\u6807\u8bc6\u7b26(oaid\u3001vaid\u3001aaid)\uff0c\u5176\u4e2d\uff0cAndroid 10\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5f00\u53d1\u8005\u6807\u8bc6\u4ec5\u9002\u7528\u4e8e\u5b89\u535310\u4ee5\u540e\u7248\u672c;\u7f51\u7edc\u4fe1\u606f\uff1a\u8054\u7f51\u65b9\u5f0f;\u624b\u673a\u5236\u9020\u5546\u4fe1\u606f;\u5e94\u7528\u4fe1\u606f\uff1a\u5f00\u53d1\u8005\u5e94\u7528\u540d\uff0c\u5e94\u7528\u5305\u540d\uff0c\u7248\u672c\u53f7; \u8eab\u4efd\u8bc1\u4fe1\u606f\uff1a\u7528\u4e8e\u5b9e\u540d\u8ba4\u8bc1\thttps://dev.vivo.com.cn/documentCenter/doc/548\n        \u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK(\u5982"\u5feb\u624b"\u7b49)\tVIVO\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://adnet.vivo.com.cn/home/agreement/18\n        1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n        \n        \u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n        \n        1.1 \u6ce8\u518c\u3001\u767b\u5f55\n        \n        \u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n        \u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n        1.2 \u8ba4\u8bc1\n        \n        \u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n        \n        1.3 \u4fe1\u606f\u53d1\u5e03\n        \n        \u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n        \n        1.4 \u5b89\u5168\u8fd0\u884c\n        \n        1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n        \n        \u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n        \n        1.4.2 \u65e5\u5fd7\u4fe1\u606f\n        \n        \u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n        \n        1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n        \n        \u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n        \n        1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n        \n        \u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n        \u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n        \u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n        \u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n        \u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n        \u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n        \u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n        \u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n        2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n        \n        \u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n        \u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n        \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n        3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n        \n        3.1\u5171\u4eab\n        \n        \u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n        \n        3.2 \u8f6c\u8ba9\n        \n        \u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n        \u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n        3.3 \u62ab\u9732\n        \n        \u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n        \u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n        \u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n        3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n        \n        \u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n        \u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n        \u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n        4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n        \n        4.1 \u5b58\u50a8\u5730\u70b9\n        \n        \u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n        \n        4.2 \u5b58\u50a8\u671f\u9650\n        \n        \u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n        \n        5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n        \n        \u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n        \u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n        \u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n        \u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n        6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n        \n        6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n        \n        \u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n        \n        6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n        \n        \u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n        \u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n        6.2 \u6ce8\u9500\u5e10\u53f7\n        \n        \u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n        \n        6.3 \u6295\u8bc9\u4e3e\u62a5\n        \n        \u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n        \n        6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n        \n        \u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n        \n        6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n        \n        \u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n        \n        7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n        \n        \u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n        \u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n        \u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n        8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n        \n        \u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n        \u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002'],a}return n(a,e),a}(e("./pzaChannelVivo").pzaChannelVivo);t.pzaChannelVivo2=i,cc._RF.pop()},{"./pzaChannelVivo":"pzaChannelVivo"}],pzaChannelVivo:[function(e,a,t){"use strict";cc._RF.push(a,"822a5eHpGtJnLCyYDZgotAk","pzaChannelVivo");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelVivo=void 0;var i,r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaUtil"),s=e("../View/pzaCommonMask"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={}));var h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="vivo",a.paraMap=new Map([["appId","com.td.zwdazjs.nearme.vivominigame"],["bannerAd","0b3a98a0262d402f8770d8d1f20362f2"],["insertAd","b84bbc07afcd4bfa8b5f010cacd4fc71"],["customInsertAd","b5229754dca84e8e893cebe08211ed05"],["videoAd","4cfe3898b0fe4ca6a5a6808e0c8feb25"],["ctrlId","673aaf5ac5b6582182fb7dbf"]]),a.channelObj=window.qg,a.bannerState=i.Hide,a.privacyStr=['\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n\u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n\nSDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u8bbe\u5907\u4fe1\u606f\uff1a\u8bbe\u5907\u5236\u9020\u5546\uff0c\u8bbe\u5907\u578b\u53f7\uff0c\u7cfb\u7edf\u7248\u672c\uff0c\u4f20\u611f\u5668\u4fe1\u606f\uff08\u5982\u52a0\u901f\u5ea6\u3001\u91cd\u529b\u3001\u9640\u87ba\u4eea\u4f20\u611f\u5668\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u7f51\u7edc\u4fe1\u606f\uff1aIP\u5730\u5740\uff0c\u8054\u7f51\u65b9\u5f0f\uff0c\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\uff0c SSID\uff0cBSSID\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u5e7f\u544a\u76d1\u6d4b\uff0c\u53cd\u4f5c\u5f0a\t\u6807\u8bc6\u7b26\u4fe1\u606f\uff1aIMEI\uff08\u4ec5\u9650\u5b89\u53539\u53ca\u4ee5\u524d\u7248\u672c\uff09\uff0cIMSI\uff0cOAID\uff0cVAID\uff0cMAC\u5730\u5740\uff0cAndroid_ID\uff0cICCID\uff0cSN\u53f7\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u53cd\u4f5c\u5f0a\t\u5e94\u7528\u4fe1\u606f\uff1a\u5e94\u7528\u540d\u79f0\uff0c\u5e94\u7528\u5305\u540d\uff0c\u5e94\u7528\u7248\u672c\u53f7\uff0c\u8f6f\u4ef6\u5b89\u88c5\u5217\u8868\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u4e2a\u4eba\u4f4d\u7f6e\u4fe1\u606f\uff1a\u7c97\u7565\u5b9a\u4f4d\u4fe1\u606f\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\t\u5e94\u7528\u4f7f\u7528\u4fe1\u606f\uff1a\u5e7f\u544a\u4ea4\u4e92\u884c\u4e3a\uff08\u5e7f\u544a\u4e92\u52a8\u8bb0\u5f55\uff0c\u5982\u66dd\u5149\u3001\u70b9\u51fb\u3001\u8f6c\u5316\u7b49\u4fe1\u606f\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u51cf\u5c11App\u5d29\u6e83\uff0c\u63d0\u9ad8\u7a33\u5b9a\u6027\u548c\u6027\u80fd\t\u8bca\u65ad\u6570\u636e\uff1a\u5d29\u6e83\u6570\u636e\u3001\u6027\u80fd\u6570\u636e\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u8054\u8fd0SDK\tVIVO\tVIVO\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u4fe1\u606f\uff1a\u624b\u673aimei\uff08Android10\u4ee5\u4e0b\uff09\uff0c\u624b\u673aemmcid\u3001usfid\u3001\u7248\u672c\u53f7\u3001\u7248\u672c\u540d\u79f0 Android10\u552f\u4e00\u6807\u8bc6\u7b26(oaid\u3001vaid\u3001aaid)\uff0c\u5176\u4e2d\uff0cAndroid 10\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5f00\u53d1\u8005\u6807\u8bc6\u4ec5\u9002\u7528\u4e8e\u5b89\u535310\u4ee5\u540e\u7248\u672c;\u7f51\u7edc\u4fe1\u606f\uff1a\u8054\u7f51\u65b9\u5f0f;\u624b\u673a\u5236\u9020\u5546\u4fe1\u606f;\u5e94\u7528\u4fe1\u606f\uff1a\u5f00\u53d1\u8005\u5e94\u7528\u540d\uff0c\u5e94\u7528\u5305\u540d\uff0c\u7248\u672c\u53f7; \u8eab\u4efd\u8bc1\u4fe1\u606f\uff1a\u7528\u4e8e\u5b9e\u540d\u8ba4\u8bc1\thttps://dev.vivo.com.cn/documentCenter/doc/548\n\u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK(\u5982"\u5feb\u624b"\u7b49)\tVIVO\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://adnet.vivo.com.cn/home/agreement/18\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002'],a.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",a.autoShowBannerTimer=30,a.bannerTimeId=-1,a.lastCustomShowTime=0,a.customGapSec=5e3,a.customAdMap={},a.showInterCDOver=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.exit=function(){this.channelObj.exitApplication()},a.prototype.qgLogin=function(e){var a=this;void 0===e&&(e=function(e){e&&console.error(e)});var t=this;this.channelObj.getSystemInfoSync().platformVersionCode>=1063&&this.channelObj.login().then(function(o){if(o.data.token){var n={appId:a.getPara("appId"),token:o.data.token};console.log("reqObj",n),d.default.jpost("https://ga.gamejym.com/fcm/vivo/getOpenId",n,function(a,o){a?d.default.err(a):""+o.code=="0"?(console.log("resp",o),t.channelUserId=o.data.openId,e&&e("login succ")):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}},function(e){console.log("\u767b\u5f55\u5931\u8d25"+JSON.stringify(e))})},a.prototype.sendUserInfo=function(e){if(null!=e)if(r.pzaLocalData.data.playerNick=e.nickName,r.pzaLocalData.data.playerAvatar=e.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",a,function(e,a){e?d.default.err(e):d.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(){},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(console.log("ctrlId :",n),n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(e,n){e?d.default.err(e):""+n.code=="0"?(t.ctrl=n.data,d.default.log("\u8fd4\u56de",t.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),t.qgLogin(function(){a&&a()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},a.prototype.showVideo=function(e){var a=this,t=this.getPara("videoAd");t&&(d.default.log("showVideo",t),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({posId:t}),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose(),this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),a.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(e){d.default.err(e),a.rewardedVideoAd.load().then(function(){d.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")}).catch(function(){cc.game.resume(),p.pzaSoundManager.resumeMusic(),s.pzaCommonMask.hideMask()})})},this.videoFns.onError=function(t){d.default.err(t),e.failCall&&e.failCall(),e.endCall&&e.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(a){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",a),a&&a.isEnded?(r.pzaLocalData.bpWatchAd(),e.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+e.posName)):(console.log("failCall"),e.failCall&&e.failCall()),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),e.endCall&&e.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose))},a.prototype.showBanner=function(){var e=this,a=this.getPara("bannerAd");if(a&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",a);var t={adUnitId:a};this.bannerAd=this.channelObj.createBannerAd(t),this.bannerAd.onError(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e.bannerState==i.Hide&&e.closeBanner()}).catch(function(e){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})}},a.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},a.prototype.showBannerByTime=function(e){var a=this;void 0===e&&(e=!1);var t=30;this.getCtrl("p4")<1?d.default.log("banner\u4e0d\u5c55\u793a"):(this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<30&&(t=30),this.showBanner(e,null,"battle"),this.bannerTimeId=setInterval(function(){a.showBanner(e,null,"battle")},1e3*t))},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.showInter=function(e){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",a),(e||c.pzaChannel.instance().getCtrl("p10")>=a)&&this.showCustomAd(!1)},a.prototype.closeInter=function(){this.closeCustomAd(!1)},a.prototype.showCustomAd=function(e,a,t){var o=this,n=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(this.showInterCDOver){this.lastCustomShowTime=Date.now();var i=e?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-300,r=e?this.getSysInfo().windowWidth-300:this.getSysInfo().windowWidth/2-400;d.default.log("showCustomAd",n,e,i,r);var p={posId:n,style:{top:i,left:r}};if(t&&(p.style=t),d.default.log("\u539f\u751f\u6a21\u677f\u5c06\u521b\u5efa",n),this.customAdMap[n]=this.channelObj.createCustomAd(p),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.customAdMap[n].offClose(function(){}),this.customAdMap[n].onClose(function(){console.log("onHide==");var e=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=e&&setTimeout(function(){o.showCustomAd(!1)},3e3),o.customAdMap[n].destroy(),o.customAdMap[n]=null}),e)this.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))});else{var s=this,u=c.pzaChannel.instance().getCtrl("p11"),h=c.pzaChannel.instance().getCtrl("p12");console.log("p11",u),console.log("p12",h);var m=this.getCtrl("p26"),f=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",f);var z=0;.01*m>=f&&(z=1e3),setTimeout(function(){o.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),s.showInterCDOver=!1,setTimeout(function(){s.showInterCDOver=!0},1e3*u)}).catch(function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},h*z)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},a.prototype.closeCustomAd=function(e){var a=e?this.getPara("customBannerAd"):this.getPara("customInsertAd");a&&this.customAdMap[a]&&this.customAdMap[a].hide()},a.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null);var o={success:function(){console.log("share success"),a&&a()},fail:function(e){e&&console.log("share fail msg:",e.message),t&&t()}};this.channelObj.share(o)},a.prototype.copyToClip=function(e){this.channelObj.setClipboardData({text:e,success:function(){console.log("handling success")}})},a}(u.pzaChannelWeb);t.pzaChannelVivo=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelWeb:[function(e,a,t){"use strict";cc._RF.push(a,"35b06SD/kFLbqmUbKV8Ncm5","pzaChannelWeb"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelWeb=void 0;var o=e("../Load/pzaBundleObjectPool"),n=e("../Load/pzaPreLoadManager"),i=e("../View/pzaCommonMask"),r=e("./pzaChannel"),p=e("./pzakc"),l=e("./pzaPrivacyWin"),s=function(){function e(){this.channel="web",this.channelGameName="\u5047\u9762\u9a91\u58eb",this.paraMap=new Map([]),this.ruanzhu="\n\u51fa\u7248\u5355\u4f4d\u540d\u79f0:\u9ed1\u9f99\u6c5f\u9f99\u534e\u6570\u5b57\u51fa\u7248\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u8fd0\u8425\u5355\u4f4d\u540d\u79f0:\u9ed1\u9f99\u6c5f\u9f99\u534e\u6570\u5b57\u51fa\u7248\u80a1\u4efd\u6709\u9650\u516c\u53f8\n\u5ba1\u6279\u6587\u53f7:\u65b0\u5e7f\u51fa\u5ba1[201712112\u53f7 ISBN 978-7-7979-5524-9\n\u8457\u4f5c\u6743\u4eba:\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7:2020SR0911781",this.isReadRemoteUserData=!0,this.channelId=0,this.channelObj=window,this.ctrl=null,this.gameName="\u5047\u9762\u9a91\u58eb",this.reportChannel="web",this.interstitialAd=null,this.bannerAd=null,this.rewardedVideoAd=null,this.customAd1=null,this.customAd2=null,this.nativeInterAd=null,this.boxPortalAd=null,this.channelUserId=null,this.sysInfo=null,this.privacyStr=['\u66f4\u65b0\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b> \u751f\u6548\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b>\n\n<b>\u5357\u4eac\u6854\u67da\u6aac\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u6854\u67da\u6aac\u201d\u6216\u201c\u6211\u4eec\u201d\uff09</b>\u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n<color=#009EFF">\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f</color>\n\n\u7535\u5b50\u90ae\u4ef6: <b>lpx@gamejym.com</b>\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5e02\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885718\u53f71\u680b\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n<color=#009EFF">\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a</color>\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n<color=#009EFF">\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5</color>\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n<b>\u8bbe\u5907\u6743\u9650</b>\t<b>\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684</b>\t<b>\u662f\u5426\u8be2\u95ee</b>\t<b>\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650</b>\n<b>\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef</b>\n<b>\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef</b>\n<b>\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef</b>\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n<color=#009EFF">1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a     \n\n<color=#009EFF">1.1 \u6ce8\u518c\u3001\u767b\u5f55</color>\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n<color=#009EFF">1.2 \u8ba4\u8bc1</color>\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002                                 \n\n<color=#009EFF">1.3 \u4fe1\u606f\u53d1\u5e03</color>\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n<color=#009EFF">1.4 \u5b89\u5168\u8fd0\u884c</color>\n\n<color=#009EFF">1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd</color>\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n<color=#009EFF">1.4.2 \u65e5\u5fd7\u4fe1\u606f</color>\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n<color=#009EFF">1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4</color>\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n<color=#009EFF">1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n<color=#009EFF">2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528</color>\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002                         \n<color=#009EFF">3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">3.1\u5171\u4eab</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n<color=#009EFF">3.2 \u8f6c\u8ba9</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n<color=#009EFF">3.3 \u62ab\u9732</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n<color=#009EFF">3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002                                                                  \n<color=#009EFF">4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">4.1 \u5b58\u50a8\u5730\u70b9</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002                       \n\n<color=#009EFF">4.2 \u5b58\u50a8\u671f\u9650</color>\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168</color>\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n<color=#009EFF">6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n<color=#009EFF">6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f</color>\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n<color=#009EFF">6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9</color>\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n<color=#009EFF">6.2 \u6ce8\u9500\u5e10\u53f7</color>\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 <b>lpx@gamejym.com</b>\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">6.3 \u6295\u8bc9\u4e3e\u62a5</color>\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 <b>lpx@gamejym.com</b> \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n<color=#009EFF">6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56</color>\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n<color=#009EFF">6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5</color>\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n<color=#009EFF">7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e</color>\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n<color=#009EFF">8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5</color>\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002',""],this.privacyPage=0,this.privacyPageTxtCount=400,this.privacyPageSum=[Math.ceil(this.privacyStr[0].length/this.privacyPageTxtCount),Math.ceil(this.privacyStr[1].length/this.privacyPageTxtCount)],this.isShare=!1,this.shareTime=0,this.shareFailBack=null,this.shareSucBack=null,this.videoFns={},this.nativeAds={},this.nativeAdListMap={},this.nativeAdCallMap={},this.nativeNodeMap={}}return e.prototype.setParaMap=function(e){this.paraMap=e},e.prototype.getPara=function(e){return this.paraMap.get(e)},e.prototype.getRuanZhu=function(){return this.ruanzhu},e.prototype.exit=function(){},e.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo={windowHeight:cc.view.getVisibleSize().height,windowWidth:cc.view.getVisibleSize().width}),this.sysInfo},e.prototype.hasPrivacy=function(){return!0},e.prototype.privacyAgree=function(){return p.default.getData("isAgree",0)||p.default.saveData("isAgree",1),1},e.prototype.privacyReject=function(){return p.default.saveData("isAgree",0),0},e.prototype.privacyNextPage=function(e){this.privacyPage+1<this.privacyPageSum[e]&&this.privacyPage++;var a=this.privacyPage*this.privacyPageTxtCount;return this.privacyStr[e].substring(a,a+this.privacyPageTxtCount)},e.prototype.privacyPrePage=function(e){this.privacyPage-1>=0&&this.privacyPage--;var a=this.privacyPage*this.privacyPageTxtCount;return this.privacyStr[e].substring(a,a+this.privacyPageTxtCount)},e.prototype.privacyPage1=function(e){return this.privacyPage=0,this.privacyStr[e].substring(0,this.privacyPageTxtCount)},e.prototype.getCtrl=function(e){return this.ctrl&&this.ctrl[e]?parseFloat(this.ctrl[e]):0},e.prototype.getPrivacyShort=function(){return""},e.prototype.getPrivacy=function(){return""},e.prototype.init=function(){p.default.log("init1\u76ee\u6807===>"+this.channel+",R:"+r.pzaChannel.isConfRemote+",gid:"+this.getPara("gid"))},e.prototype.isShareSuc=function(){return!((new Date).getTime()-this.shareTime<3e3||(this.shareTime=(new Date).getTime(),0))},e.prototype.canShare=function(){return!1},e.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),a&&a()},e.prototype.copyToClip=function(e,a){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var o,n=getSelection();n.rangeCount>0&&(o=n.getRangeAt(0)),document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;try{document.execCommand("copy"),a()}catch(i){p.default.err(i),a("\u590d\u5236\u5931\u8d25!")}document.body.removeChild(t),o&&(n.removeAllRanges(),n.addRange(o))},e.prototype.showVideo=function(e,a,t){void 0===a&&(a=!1),void 0===t&&(t=!0),e.sucCall(),e.endCall(),i.pzaCommonMask.hideMask()},e.prototype.addGird9Icon=function(){},e.prototype.gird9IconClick=function(){},e.prototype.showGird9=function(){},e.prototype.canAutoGird9=function(){return!1},e.prototype.closeGird9=function(){},e.prototype.showBanner=function(e,a,t){void 0===e&&(e=!1),void 0===a&&(a=null),void 0===t&&(t=null)},e.prototype.closeBanner=function(){},e.prototype.showBannerByTime=function(e){void 0===e&&(e=!1)},e.prototype.closeBannerByTime=function(){},e.prototype.checkNativeInsert=function(){return!1},e.prototype.showNative=function(e,a,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=null)},e.prototype.loadAndShowNative=function(){},e.prototype.loadNative=function(){},e.prototype.findAndReport=function(){},e.prototype.reportAdShow=function(){},e.prototype.reportAdClick=function(){},e.prototype.closeNative=function(){},e.prototype.getNativeData=function(){},e.prototype.showCustomAd=function(e,a,t){void 0===a&&(a=!1),void 0===t&&(t=null)},e.prototype.closeCustomAd=function(e){void 0===e&&(e=!1)},e.prototype.showInter=function(e){void 0===e&&(e=!1),console.log("\u5c55\u793a\u63d2\u5c4f===")},e.prototype.closeInter=function(){},e.prototype.showDesktop=function(){},e.prototype.addShortcut=function(){},e.prototype.checkShortcut=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.getRecordTime=function(){return 0},e.prototype.shareVideo=function(e){void 0===e&&(e=null)},e.prototype.jumpTo=function(e,a,t,o){void 0===a&&(a=function(){}),void 0===t&&(t=function(){}),void 0===o&&(o=function(){})},e.prototype.canMoreGame=function(){return!1},e.prototype.showMoreGameBox=function(){},e.prototype.showSidebar=function(e){e&&e()},e.prototype.jpost=function(e,a,t){p.default.jpost(e,a,t)},e.prototype.showCustomService=function(){},e.prototype.showPrivacy=function(e,a,t){void 0===t&&(t=!1),o.pzaBundleObjectPool.requestInstantByUrl(n.pzaResourceUrl.PRIVACY_Win,!1,function(o,n){null==o&&null!=n?(n.setParent(e),n&&n.getComponent(l.default).setCallBack(a),t&&n&&n.getComponent(l.default).showContent()):console.error(o)})},e.prototype.showIconAd=function(){},e.prototype.hideIconAd=function(){},e.prototype.isShowSideView=function(){},e.prototype.getShareResult=function(e,a){return a([{nickName:"User1",avatar:""},{nickName:"User2",avatar:""},{nickName:"User3",avatar:""},{nickName:"User4",avatar:""},{nickName:"User5",avatar:""}])},e}();t.pzaChannelWeb=s,cc._RF.pop()},{"../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaPrivacyWin":"pzaPrivacyWin","./pzakc":"pzakc"}],pzaChannelWx1:[function(e,a,t){"use strict";cc._RF.push(a,"647a5kYA3lKsouIwp/koyBL","pzaChannelWx1");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelWx1=void 0;var i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="wx1",a.paraMap=new Map([["appId","wx000000000"],["vedioAd","adunit-8326ea3dc016f65f"]]),a.ruanzhu="",a.sharePicsArr=[{title:"{\u6709\u4eba@\u6211}\u5feb\u6765\u6311\u9009\u4f60\u7684\u5fc3\u52a8\u4e3b\u64ad",url:"https://mmocgame.qpic.cn/wechatgame/xQIymonI7UDQNaBQ6DEqwibh5guA7Gf0YyibM8lcVK5WOBOa7aFasHIAz1BJdmaicIz/0",id:"QCLyA+TbRv2sj5Odvg7p6A=="}],a}return n(a,e),a}(e("./pzaChannelWx").pzaChannelWx);t.pzaChannelWx1=i,cc._RF.pop()},{"./pzaChannelWx":"pzaChannelWx"}],pzaChannelWx:[function(e,a,t){"use strict";cc._RF.push(a,"d3233Z4pp5G1ohhvieWKzhz","pzaChannelWx");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannelWx=void 0;var i,r=e("../Common/pzaLocalData"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaStatisticsMgr"),s=e("../View/pzaCommonMask"),c=e("./pzaChannel"),u=e("./pzaChannelWeb"),d=e("./pzakc"),h=e("../Common/pzaUtil");(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(i||(i={}));var m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.channel="wx",a.channelGameName="\u5047\u9762\u9a91\u58eb\u82f1\u96c4\u96c6\u7ed3",a.channelId=0,a.reportChannel="wx",a.paraMap=new Map([["appId","wxee09c00ae546ccd2"],["ctrlId","68d63fa4088d094169eb8469"],["gid","68d63fa4088d094169eb8469"],["sharePicId","zwdzjs"]]),a.ruanzhu="\u8457\u4f5c\u6743\u4eba:\u4e2d\u6b4c\u8a89\u4fe1(\u4e0a\u6d77)\u6587\u5316\u53d1\u5c55\u6709\u9650\u516c\u53f8\n\u767b\u8bb0\u53f7:2023SR1121601",a.sharePicsArr=[{title:"[\u6709\u4eba@\u4f60]\u5feb\u6765\u548c\u6211\u4e00\u8d77\u4f53\u9a8c\u5427",url:"https://mmocgame.qpic.cn/wechatgame/WbKJukjJiaQzo1cicUPZhUBjeL6ia4fnE1KzxUhgS63teOKgibfxj2Osib2TVnNQ1ormS/0",id:"TqeKD7N+Tc6BgFQw+tqj1w=="},{title:"[\u6709\u4eba@\u4f60]\u5feb\u6765\u548c\u6211\u4e00\u8d77\u4f53\u9a8c\u5427",url:"https://mmocgame.qpic.cn/wechatgame/jYUgGEIZdEW4wyacBMgqanYnZ1j3xD54q40yibBBwfj1QuymWj1KPH8xA95VQg8fK/0",id:"V+ZpMwQ3RAeZ0U+76VxnOw=="}],a.channelObj=window.wx,a.sid=null,a.authorizationButton=null,a.onShowCall=null,a.cachedBannerSize=null,a.autoShowBannerTimer=30,a.bannerState=i.Hide,a.bannerTimeId=-1,a.shareIndex=0,a.showInterCDOver=!0,a}return n(a,e),a.prototype.hasPrivacy=function(){return!0},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},a.prototype.init=function(a){var t=this;e.prototype.init.call(this,a);var o=this.channelObj;o.onShow(function(){cc.game.resume(),p.pzaSoundManager.resumeMusic(),t.isShare&&(t.isShareSuc()?(t.shareSucBack&&t.shareSucBack(),o.showToast({title:"\u5206\u4eab\u6210\u529f!"}),r.pzaLocalData.shareGetCoin()):(o.showToast({title:"\u5206\u4eab\u5931\u8d25"}),t.shareFailBack&&t.shareFailBack()),t.isShare=!1),t.onShowCall&&t.onShowCall(),t.onShowCall=null}),o.onHide(function(){cc.game.pause(),t.isShare&&(t.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),i=this;if(n){var l=d.default.getData("sid",null);l||(l=i.channelObj.getLaunchOptionsSync().scene,d.default.saveData("sid",l));var s={id:n,sid:l};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",s,function(e,o){e?d.default.err(e):""+o.code=="0"?(i.ctrl=o.data,d.default.log("\u8fd4\u56de",i.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(i.ctrl.p1),r.pzaLocalData.maxShareRwdCount=parseInt(i.ctrl.p2),t.wxLogin(function(){a&&a()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}o.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},a.prototype.onLoginSuc=function(){var e=this.channelObj.getLaunchOptionsSync().query;e&&(console.log("query query: ",e,e.act),e.wxPicId&&e.wxPicId.length>6&&c.pzaChannel.picShareFrom(this.getPara("sharePicId"),e.wxPicId),e.act&&e.sid&&(this.sid=e.sid,this.shareFrom(),null==r.pzaLocalData.data.playerNick||r.pzaLocalData.data.playerAvatar))},a.prototype.wxCheckPrivacySetting=function(e,a){var t=window.wx;"function"==typeof t.getPrivacySetting?t.getPrivacySetting({success:function(a){console.log(a),e&&e(a&&a.needAuthorization)},fail:function(){a&&a()},complete:function(){}}):a&&a()},a.prototype.wxPrivacyAuthorize=function(e,a){var t=window.wx;"function"==typeof t.requirePrivacyAuthorize?(console.log("requirePrivacyAuthorize==="),t.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),e&&e()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),a&&a()},complete:function(){}})):a&&a()},a.prototype.wxLogin=function(e){var t=this;void 0===e&&(e=function(){}),console.log("wxLogin Start");var o=window.wx,n=this;o.login({success:function(t){if(!t.code)return console.error("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),void e();console.log("wxLogin",t.code),d.default.jpost("https://ga.gamejym.com/fcm/wx/getOpenId",{appId:n.getPara("appId"),code:t.code},function(t,o){return t?(d.default.err(t),void e()):(d.default.log("\u83b7\u53d6openId",o),o.openid?(n.channelUserId=o.openid||"",a.unionid=o.unionid||"",e(),void n.onLoginSuc()):(d.default.err("\u83b7\u53d6openId\u5931\u8d25",o),void e()))})},fail:function(){e()}}),o.onShareAppMessage(function(){var e=n.getShareObj();return null!=e?{title:e.title,imageUrl:e.url,imageUrlId:e.id}:{title:t.sharePicsArr[0].title,imageUrl:t.sharePicsArr[0].url,imageUrlId:t.sharePicsArr[0].id}})},a.prototype.cacheBanner=function(){var e=this;if(this.getPara("bannerAd")&&(!this.bannerAd||!this.cachedBannerSize)){d.default.log("cacheBanner\u5f00\u59cb,size:",this.cachedBannerSize,"ad:",this.bannerAd);var a=this.channelObj,t={adUnitId:this.getPara("bannerAd"),adIntervals:30,style:{left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1}};this.bannerAd=a.createBannerAd(t),this.bannerAd.onError(function(a){d.default.log("cachedBanner\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),e.bannerAd=null,e.cachedBannerSize=null}),this.bannerAd.onResize(function(a){console.log("cachedBanner onResize===",a.height,a.width),e.cachedBannerSize=a}),this.bannerAd.show().then(function(){d.default.log("cachedBanner\u6210\u529f")}).catch(function(a){d.default.log("cachedBanner err:"+JSON.stringify(a)),e.bannerAd=null,e.cachedBannerSize=null})}},a.prototype.showBanner=function(e,a,t){var o=this,n=this.getPara("bannerAd");if(n&&0!=this.getCtrl("p21"))if(this.bannerState!=i.Show){if(d.default.log("showBanner isShow",n,t),this.bannerAd&&this.cachedBannerSize){var r=a?a(this.cachedBannerSize):{top:this.getSysInfo().windowHeight-this.cachedBannerSize.height,left:(this.getSysInfo().windowWidth-this.cachedBannerSize.width)/2};return this.bannerAd.style.top=r.top,this.bannerAd.style.left=r.left,r.height&&(this.bannerAd.style.height=r.height),void d.default.log("cachedBanner style:",this.bannerAd.style.top,this.bannerAd.style.left,this.bannerAd.style.height)}var p=this.channelObj,l={adUnitId:n,adIntervals:30,style:{left:0,top:this.getSysInfo().windowHeight-1}};this.bannerState=i.Show,this.bannerAd=p.createBannerAd(l),this.bannerAd.onError(function(e){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e)),o.bannerAd=null,o.cachedBannerSize=null});var s=this;this.bannerAd.onResize(function(){s.bannerAd.style.top=o.getSysInfo().windowHeight-100,s.bannerAd.style.left=o.getSysInfo().windowWidth/2-150}),this.bannerAd.show().then(function(){d.default.log("banner\u663e\u793a\u6210\u529f"),o.bannerState==i.Hide&&(d.default.log("banner\u663e\u793a\u5173\u95ed"),o.closeBanner())}).catch(function(e){o.bannerAd=null,o.cachedBannerSize=null,d.default.log("showBanner err:"+JSON.stringify(e))})}else d.default.log("\u5df2\u7ecf\u663e\u793abanner")},a.prototype.closeBanner=function(){if(this.bannerState=i.Hide,this.bannerAd)if(this.cachedBannerSize){var e={left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1};this.bannerAd.style.left=e.left,this.bannerAd.style.top=e.top}else this.bannerAd.hide()},a.prototype.showBannerByTime=function(e){var a=this;if(void 0===e&&(e=!1),this.getPara("bannerAd")){var t=30;this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),t<30&&(t=30),this.showBanner(e,null,"battle"),this.bannerTimeId=setInterval(function(){a.showBanner(e,null,"battle")},1e3*t)}},a.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},a.prototype.canShare=function(){return!0},a.prototype.getShareObj=function(){var e=this.shareIndex;return this.shareIndex++,this.shareIndex>=this.sharePicsArr.length&&(this.shareIndex=0),this.sharePicsArr[e]},a.prototype.sendUserInfo=function(e){if(null!=e)if(r.pzaLocalData.data.playerNick=e.nickName,r.pzaLocalData.data.playerAvatar=e.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var a={appId:this.getPara("appId"),openId:this.channelUserId,nickName:e.nickName||"",avatar:e.avatarUrl||""};d.default.jpost("https://ga.gamejym.com/fcm/wx/sendUserInfo",a,function(e,a){e?d.default.err(e):d.default.log("sendUserInfo\u8fd4\u56de",a)})}else console.error("sendUserInfo\u65e0openId")},a.prototype.getUserInfo=function(e,a,t){void 0===t&&(t=!0);var o=this.channelObj,n=this;o.getSetting({success:function(i){if(i.authSetting["scope.userInfo"])o.getUserInfo({success:function(a){console.log("userInfo",a.userInfo),n.sendUserInfo(a.userInfo),e&&e()}});else{n.destroyAuthorizationButton();var r=n.getSysInfo().screenWidth,p=n.getSysInfo().screenHeight;if(n.authorizationButton=o.createUserInfoButton({type:"image",image:"img/startGameButton.png",style:a||{left:0,top:0,width:r,height:p}}),!n.authorizationButton)return;n.authorizationButton.onTap(function(a){t&&n.destroyAuthorizationButton(),console.log("userInfo2",a),n.sendUserInfo(a.userInfo),e&&e()})}}})},a.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(e){this.authorizationButton=null,console.error(e)}},a.prototype.shareAppMessage=function(e,a,t){var o=this;if(void 0===a&&(a=null),void 0===t&&(t=null),this.canShare()){var n=this.getShareObj(),i="";if(e&&e.act&&(i=e.act),!i){var r={title:n.title,imageUrl:n.url,imageUrlId:n.id,query:null};return r.query="wxPicId="+n.id,this.channelObj.shareAppMessage(r),this.shareFailBack=t,this.shareSucBack=a,this.isShare=!0,void l.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:parseInt(e.adsid)},{name:"ShareR",value:1})}if(!this.channelUserId)return console.error("\u8bf7\u5148\u767b\u5f55"),this.wxLogin(),void this.channelObj.showToast({title:"\u8bf7\u5148\u767b\u5f55"});var p=this;p.shareFailBack=null,p.shareSucBack=null,p.isShare=!1,"recruit_share"==e.act&&(p.isShare=!0,p.shareFailBack=t,p.shareSucBack=a);var s={appId:this.getPara("appId"),openId:this.channelUserId,act:i};d.default.jpost("https://ga.gamejym.com/fcm/wx/shareTo",s,function(e,a){if(e)d.default.err(e);else{d.default.log("shareTo\u8fd4\u56de",a);var t={title:n.title,imageUrl:n.url,imageUrlId:n.id,query:null};a&&0===a.code&&(t.query="sid="+a.data.sid+"&act="+i+"&wxPicId="+n.id,d.default.log("shareQuery",t.query)),p.channelObj.shareAppMessage(t),c.pzaChannel.picShareTo(o.getPara("sharePicId"),n.id)}})}else l.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:parseInt(e.adsid)},{name:"ShareR",value:0})},a.prototype.shareByScreenShot=function(e,a,t,o,n){void 0===a&&(a=null),void 0===t&&(t=null),void 0===o&&(o=2),void 0===n&&(n=0);var i=this,r=16*canvas.height/9;console.log("shot x ",.3234375*r+(canvas.width-r)/o),console.log("offset x",n);try{canvas.toTempFilePath({x:.3234375*r+(canvas.width-r)/o+n,y:0,width:.5078125*r,height:.85*canvas.height,destWidth:500,destHeight:400,success:function(o){i.channelObj.shareAppMessage({title:e,imageUrl:o.tempFilePath}),i.shareFailBack=t,i.shareSucBack=a,i.isShare=!0},fail:function(e){console.error("shareByScreenShot",e)}})}catch(p){console.error("shareByScreenShot",p)}},a.prototype.shareFrom=function(){if(d.default.log("sharefrom in"),this.sid&&this.channelUserId){console.log("sharefrom star: ",r.pzaLocalData.getAllStar());var e={sid:this.sid,openId:this.channelUserId,star:r.pzaLocalData.getAllStar()};d.default.jpost("https://ga.gamejym.com/fcm/wx/shareFrom",e,function(e,a){e?d.default.err("sharefrom Error: "+e):d.default.log("shareFrom\u8fd4\u56de",a)})}},a.prototype.getShareResult=function(e,a){if(!this.channelUserId)return a([]);d.default.log("getshareResult in");var t={appId:this.getPara("appId"),openId:this.channelUserId,act:e};d.default.jpost("https://ga.gamejym.com/fcm/wx/getShareResult",t,function(e,t){if(e)return d.default.err("getshareResult: ",e),void a([]);d.default.log("getShareResult\u8fd4\u56de",t),t&&0===t.code?a(t.data):a([])})},a.prototype.copyToClip=function(e,a){var t=this;this.channelObj.setClipboardData({data:e,success:function(){t.channelObj.getClipboardData({success:function(e){console.log(e.data),a()}})},fail:function(e){console.error("res: ",e),a("\u590d\u5236\u5931\u8d25: ")}})},a.prototype.showVideo=function(e){r.pzaLocalData.bpWatchAd(),s.pzaCommonMask.hideMask(),this.shareAppMessage({title:null,act:null,adsid:e.adsid},function(){e.sucCall&&e.sucCall()})},a.prototype.showGird9=function(){var e=this.getPara("gird9");if(e){var a=this.ctrl&&this.ctrl.p3?parseInt(this.ctrl.p3):1;if(d.default.log("showCustomAd-wx","p3",a),a){var t=this.channelObj,o={adUnitId:e,adIntervals:30,style:{top:this.getSysInfo().windowHeight/2-280,left:0}};this.boxPortalAd=t.createCustomAd(o),this.boxPortalAd.offError(),this.boxPortalAd.onError(function(e){d.default.log("custom\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.boxPortalAd.show().then(function(){d.default.log("custom\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(e){d.default.log("custom\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})}}},a.prototype.closeGird9=function(){this.boxPortalAd&&this.boxPortalAd.hide()},a.prototype.canAutoGird9=function(){return!0},a.prototype.showNative=function(e,a,t){var o=this,n=this.getPara(t);if(n){d.default.log("showCustomAd-wx",t);var i=this.channelObj;if(this.nativeAds[t]&&this.nativeAds[t].isShow())d.default.log("icon\u6b63\u5728\u663e\u793a\u4e2d\uff0c\u4e0d\u518d\u91cd\u590d\u663e\u793a");else{var r=this.getSysInfo().windowHeight;d.default.log("showCustomAd-wx",t,n,r,this.getSysInfo().windowWidth);var p={adUnitId:n,adIntervals:30,style:{top:r/2-100,left:t.indexOf("2")<0?0:this.getSysInfo().windowWidth-70}};this.nativeAds[t]=i.createCustomAd(p),this.nativeAdCallMap.onError&&this.nativeAds[t].offError(this.nativeAdCallMap.onError),this.nativeAds[t].offError(),this.nativeAdCallMap.onError=function(e){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e)),o.nativeNodeMap[t]=0},this.nativeAds[t].onError(this.nativeAdCallMap.onError),this.nativeAdCallMap.onHide&&this.nativeAds[t].offHide(this.nativeAdCallMap.onHide),this.nativeAds[t].offHide(),this.nativeAdCallMap.onHide=function(){o.nativeNodeMap[t]=0,d.default.log("\u539f\u751ficon\u5173\u95ed")},this.nativeAds[t].onHide(this.nativeAdCallMap.onHide),this.nativeAds[t].show().then(function(){d.default.log("\u539f\u751ficon\u5c55\u793a\u5b8c\u6210"),o.nativeNodeMap[t]=1}).catch(function(e){d.default.log("\u539f\u751ficon\u5c55\u793a\u5931\u8d25"+JSON.stringify(e)),o.nativeNodeMap[t]=0})}}},a.prototype.checkNativeInsert=function(e){if(e.indexOf("Insert")>0&&this.nativeNodeMap[e]&&this.nativeNodeMap[e].active){if(this.nativeNodeMap.nativeInsertAd&&this.nativeNodeMap.nativeInsertAd.active)return d.default.log("\u539f\u751f\u63d2\u5c4f\u53ea\u80fd\u51fa\u4e00\u4e2a"),!1;if(this.nativeNodeMap.nativeInsertAd2&&this.nativeNodeMap.nativeInsertAd2.active)return d.default.log("\u539f\u751f\u63d2\u5c4f\u53ea\u80fd\u51fa\u4e00\u4e2a2"),!1}return!0},a.prototype.closeNative=function(e){this.nativeAds[e]&&this.nativeAds[e].hide()},a.prototype.showInter=function(e){var a=this,t=h.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),e||.01*c.pzaChannel.instance().getCtrl("p10")>=t){if(!this.showInterCDOver)return void console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d");var o=this.getPara("insertAd");if(!o)return;var n=this,i=c.pzaChannel.instance().getCtrl("p11");console.log("p11",i);var r=this.channelObj;d.default.log("showInter isShow",o),this.interstitialAd=r.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(e))}),this.interstitialAd.offClose(),this.interstitialAd.onClose(function(){var e=h.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=e&&setTimeout(function(){a.showCustomAd(!1)},3e3),a.interstitialAd.destroy(),a.interstitialAd=null});var p=this.getCtrl("p12");console.log("p12",p);var l=this.getCtrl("p26"),s=h.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",s);var u=0;.01*l>=s&&(u=1e3),setTimeout(function(){a.interstitialAd.show().then(function(){d.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),n.showInterCDOver=!1,setTimeout(function(){n.showInterCDOver=!0},1e3*i)}).catch(function(e){d.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(e))})},p*u)}},a.prototype.showDesktop=function(){},a.prototype.jumpTo=function(e,a,t,o){d.default.log("jumpTo:"+e),this.channelObj.navigateToMiniProgram({appId:e,success:a,fail:t,complete:o})},a.prototype.requestSubscribeMessage=function(e,a){var t=this.channelObj;if("function"==typeof t.requestSubscribeMessage){console.log("\u89e6\u53d1\u5fae\u4fe1\u8ba2\u9605",e);try{t.requestSubscribeMessage({tmplIds:e,success:function(t){console.log(t,t[e[0]]),"accept"==t[e[0]]&&a&&a()},fail:function(e){console.log(e)}})}catch(o){console.error(o)}}},a.prototype.createGameClubButton=function(e,a,t,o){var n=this.channelObj;if(null!=n.createGameClubButton&&"function"==typeof n.createGameClubButton){var i=this.getSysInfo();if(null!=i){var r=i.screenHeight/720,p={type:"image",image:"img/game_club.png",style:{left:e*r,top:a*r,width:t*r,height:o*r}};return n.createGameClubButton(p)}}},a.prototype.getGameClubData=function(e){var a=this.channelObj;if("function"==typeof a.getGameClubData){var t=function(){a.login({success:function(t){console.log("wxLogin succ  loginRes.code is : "+t.code),a.getGameClubData({dataTypeList:[{type:1},{type:4},{type:5}],success:function(a){console.log(a);var o=a&&a.encryptedData,n=a&&a.signature,i=a&&a.iv;e&&e({authCode:t.code,encryptedData:o,iv:i,signature:n})},fail:function(a){console.error(a),e&&e(null)}})},fail:function(a){console.log("wxlogin fail"),console.error(a),e&&e(null)}})};a.getSetting({success:function(o){null==o||null==o.authSetting||1!=o.authSetting["scope.gameClubData"]?(console.log("autoorize pop"),a.authorize({scope:"scope.gameClubData",success:function(){t()},fail:function(){e&&e(null)}})):t()}})}else e&&e(null)},a.prototype.getAbTest=function(e){var a=this.channelObj;if(null!=a.getExptInfoSync&&"function"==typeof a.getExptInfoSync){var t=a.getExptInfoSync(["expt_1720752823"]);return console.log("getAbTest",t),null==t?null:t[e]}console.log("wx not getExptInfoSync")},a.prototype.getPowerGiftAbTest=function(e){var a=this.channelObj;if(null!=a.getExptInfoSync&&"function"==typeof a.getExptInfoSync){var t=a.getExptInfoSync(["expt_1723794382"]);return console.log("getAbTest",t),null==t?null:("0"==t.expt_1723794382?(r.pzaLocalData.isShowPowerGift=!0,r.pzaLocalData.isShowGift=!0):"1"==t.expt_1723794382&&(r.pzaLocalData.isShowPowerGift=!1,r.pzaLocalData.isShowGift=!1),t[e])}console.log("wx not getExptInfoSync")},a.prototype.registerOnshow=function(e){this.onShowCall=e},a.prototype.showCustomService=function(){console.log("wx showCustomService!"),this.channelObj.openCustomerServiceConversation({success:function(){console.log("wxCustomService success!")},fail:function(e){console.log("wxCustomService fail!",e)}})},a.unionid=null,a}(u.pzaChannelWeb);t.pzaChannelWx=m,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannel:[function(e,a,t){"use strict";cc._RF.push(a,"891b1VRbSpD0accy/xnCqYi","pzaChannel"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChannel=void 0;var o=e("../Common/pzaLocalData"),n=e("../Common/pzaTipManager"),i=e("../View/pzaCommonMask"),r=e("./pzaChannelHw"),p=e("./pzaChannelIOS"),l=e("./pzaChannelMy"),s=e("./pzaChannelMy1"),c=e("./pzaChannelNoAD"),u=e("./pzaChannelOppo"),d=e("./pzaChannelQQ"),h=e("./pzaChannelTap"),m=e("./pzaChannelTT"),f=e("./pzaChannelVivo"),z=e("./pzaChannelWeb"),y=e("./pzaChannelWx"),g=e("./pzakc"),v=e("../Common/pzaWorldEventManager"),b=e("./pzaChannelBiLi"),P=e("./pzaChannelMi"),C=e("./pzaChannelMg"),E=e("./pzaChannelKs"),S=e("./pzaChannelRY"),_=function(){function e(){this.channel="wx",this.channelMap=new Map([["web",new z.pzaChannelWeb],["wx",new y.pzaChannelWx],["ios",new p.pzaChannelIOS],["tt",new m.pzaChannelTT],["oppo",new u.pzaChannelOppo],["vivo",new f.pzaChannelVivo],["taptap",new h.pzaChannelTap],["my",new l.pzaChannelMy],["my1",new s.pzaChannelMy1],["ks",new E.pzaChannelKs],["hw",new r.pzaChannelHw],["qq",new d.pzaChannelQQ],["bl",new b.pzaChannelBiLi],["mi",new P.pzaChannelMi],["mg",new C.pzaChannelMg],["ry",new S.pzaChannelRY],["noAD",new c.pzaChannelNoAD]])}return e.instance=function(){return e._me||(e._me=new e),e._me},e.decodeWxData=function(e,a,t,n,i,r){o.pzaLocalData.disablePostFn?r(null):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/decodeWxData",{appId:e,encryptedData:a,iv:t,code:n,signature:i},function(e,a){if(e)return console.error(e),void r(null);0===a.code?r(a.data&&a.data.dataList):r(null)})},e.subMsg=function(e,a,t,n,i){o.pzaLocalData.disablePostFn?i(-1):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/wxOrderSubMsg",{appId:e,openId:a,template_id:t,signDay:n},function(e,a){if(e)return console.error(e),void i(-1);0===a.code?i(0):i(-1)})},e.redeem=function(e,a,t,n){o.pzaLocalData.disablePostFn?n(null):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/redeem",{code:t,gameId:e,userId:a},function(e,a){if(e)return console.error(e),void n(null);if(0===a.code){var t=g.default.strArr(a.data);if(t){for(var o=[],i=0;i<t.length;i++){var r=t[i].split(":");r.length<2?console.error("\u5151\u6362\u7801\u914d\u7f6e\u6709\u8bef",t[i]):o.push({key:r[0],val:r[1]})}n(o)}else n(null)}else n(null)})},e.getSharePics=function(e,a){var t={game:e,query:"aaa",v:"1.2.0",s:"s"};this.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/getSharePic",t,function(e,t){if(e)return g.default.err(e),void a([]);if(!t||0!=t.re||!t.data||t.data.length<=0)return a([]);for(var o=[],n=0;n<t.data.length;n++){var i=t.data[n].split("|");o.push({picId:i[0],txt:i[1],picUrl:i[2]})}a(o)})},e.leaderBoradUpdate=function(e,a,t,n){o.pzaLocalData.disablePostFn?n(null):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradUpdate",{gameId:e,userId:a,score:t},function(e,a){return e?(g.default.err(e),void n(null)):a.code?(g.default.err(a.code),void n(null)):void n(a.data)})},e.leaderBoradRank=function(e,a,t){o.pzaLocalData.disablePostFn?t(-1):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradRank",{gameId:e,userId:a},function(e,a){return e?(g.default.err(e),void t(-1)):a.code?(g.default.err(a.code),void t(-1)):void t(a.data)})},e.getLeaderBorad=function(e,a){o.pzaLocalData.disablePostFn?a([]):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/getLeaderBorad",{gameId:e},function(e,t){return e?(g.default.err(e),void a([])):t.code?(g.default.err(t.code),void a([])):void a(t.data)})},e.reportToRankList=function(e,a,t,n,i,r){o.pzaLocalData.disablePostFn?r&&r():this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/phbUpdate",{userId:a,gameId:e,userName:t,userIcon:n,sortVal:i},function(e){r&&r(),e&&g.default.err(e)})},e.getRankList=function(e,a){o.pzaLocalData.disablePostFn?a([]):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/phbList",{gameId:e},function(e,t){return e?(g.default.err(e),void a([])):t.code?(g.default.err(t.code),void a([])):void a(t.data)})},e.resetBattlePassCircle=function(e,a,t,n,i){void 0===t&&(t="1,2,3"),void 0===n&&(n=30),o.pzaLocalData.disablePostFn?i&&i(-1,"0"):this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradRankCircle",{gameId:e,userId:a,phbId:t,phbDay:n},function(e,a){if(!e)return a.code?(g.default.err(a.code),void(i&&i(-1,"0"))):void i(a.data.phbDay,a.data.phbId);i&&i(-1,"0")})},e.resetRankCircleTest=function(e,a,t,n){void 0===a&&(a="11,12,13"),void 0===t&&(t=14),o.pzaLocalData.disablePostFn||this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/resetCirCle",{gameId:e,phbId:a,phbDay:t,outTime:n},function(e,a){e||a.code&&g.default.err(a.code)})},e.activGet=function(e,a){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/activGet",{gameId:e},function(e,t){if(!e){if(t.code)return g.default.err(t.code),void(a&&a(!1,-1,-1));var n;return(n=o.pzaLocalData.serverTime?o.pzaLocalData.serverTime:Date.now())<t.data.startTime?(console.log("\u6d3b\u52a8\u672a\u5f00\u59cb"),void(a&&a(!1,-1,-1))):n>t.data.endTime?(console.log("\u6d3b\u52a8\u5df2\u7ed3\u675f"),void(a&&a(!1,-1,-1))):void(a&&a(!0,t.data.endTime,t.data.ver))}a&&a(!1,-1,-1)})},e.loadFromRemote=function(a,t){e.isConfRemote?t(null):(g.default.log("\u52a0\u8f7d\u8fdc\u7a0b\u5b58\u6863\u5f00\u59cb....",a,e.instance().getChannel().gameName+e.instance().channel),this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/userSave/getUserData",{game_id:e.instance().getChannel().gameName+e.instance().channel,user_id:a},function(e,a){return e?(g.default.err(e),void t(e)):0===a.code&&a.data?(delete a.data.user_id,delete a.data.game_id,delete a.data._id,g.default.log("\u8fdc\u7a0b\u5b58\u6863\u52a0\u8f7d\u5b8c\u6210"),void t(null,a.data.saveData)):void t(null)}))},e.saveToRemote=function(a,t,o,i){void 0===o&&(o=!1),e.isConfRemote||this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/userSave/saveUserData",{game_id:e.instance().getChannel().gameName+e.instance().channel,user_id:a,saveData:t},function(e,a){e?g.default.err(e):(g.default.log("saveToRemote\u5b8c\u6210:"+JSON.stringify(a)),o&&n.pzaTipManager.showHomeTip("\u6570\u636e\u4e0a\u4f20\u6210\u529f",null,3),i&&i())})},e.picShareTo=function(e,a){var t={game:e,query:"aaa",v:"1.2.0",s:"s",wxPicId:a};this.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/shareTo",t,function(e){e&&g.default.err(e)})},e.picShareFrom=function(e,a){var t={game:e,query:"aaa",v:"1.2.0",s:"s",wxPicId:a};this.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/shareFrom",t,function(e){e&&g.default.err(e)})},e.getRemoteTime=function(a){if(e.isConfRemote){var t=new Date;g.default.setServerTimeToLocal(t.getTime())}else g.default.jpost("https://ga.gamejym.com/fcm/gameApi/serverTime",{},function(e,t){e?console.log("serverTime: ",e):(g.default.log("get serverTime",t),t.ts&&(g.default.setServerTimeToLocal(t.ts),a&&a()))})},e.jumpGame=function(a,t){var o=e.instance().getPara("appId");e.instance().getChannel().channelObj.navigateToMiniProgram({appId:a,success:function(){g.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:o,cid:a,openId:t})},fail:function(){console.error("\u8df3\u8f6c\u5931\u8d25")},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},e.jumpGame2=function(a,t){var o=e.instance().getPara("appId");e.instance().getChannel().channelObj.navigateToMiniProgram({appId:a,path:"?twtraceid=pvzyb",success:function(){g.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:o,cid:a,openId:t})},fail:function(){console.error("\u8df3\u8f6c\u5931\u8d25")},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},e.prototype.getPara=function(e){return this.getChannel().getPara(e)},e.prototype.getChannel=function(){return this.channelMap.get(this.channel)},e.prototype.getRuanZhu=function(){return this.getChannel().getRuanZhu()},e.prototype.exit=function(){this.getChannel().exit()},e.prototype.getSysInfo=function(){return this.getChannel().getSysInfo()},e.prototype.hasPrivacy=function(){return this.getChannel().hasPrivacy()},e.prototype.privacyReject=function(){return this.getChannel().privacyReject()},e.prototype.privacyAgree=function(){return this.getChannel().privacyAgree()},e.prototype.privacyNextPage=function(e){return this.getChannel().privacyNextPage(e)},e.prototype.privacyPrePage=function(e){return this.getChannel().privacyPrePage(e)},e.prototype.privacyPage1=function(e){return this.getChannel().privacyPage1(e)},e.prototype.getCtrl=function(e){return this.getChannel().getCtrl(e)},e.prototype.getPrivacyShort=function(){return this.getChannel().getPrivacyShort()},e.prototype.getPrivacy=function(){return this.getChannel().getPrivacy()},e.prototype.init=function(e){this.getChannel().init(e)},e.prototype.canShare=function(){return this.getChannel().canShare()},e.prototype.shareAppMessage=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),this.getChannel().shareAppMessage(e,a,t)},e.prototype.copyToClip=function(e,a){this.getChannel().copyToClip(e,a)},e.prototype.showVideo=function(e){if(o.pzaLocalData.data.adTicket>0)return o.pzaLocalData.data.adTicket--,o.pzaLocalData.addDirty("adTicket"),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.UPDATE_ADTICKET,null),e.sucCall&&e.sucCall(),e.endCall&&e.endCall(),void cc.game.resume();i.pzaCommonMask.showMask(!0,!0),this.getChannel().showVideo(e)},e.prototype.addGird9Icon=function(e,a){this.getChannel().addGird9Icon(e,a)},e.prototype.gird9IconClick=function(){this.getChannel().gird9IconClick()},e.prototype.showGird9=function(){this.getChannel().showGird9()},e.prototype.canAutoGird9=function(){return this.getChannel().canAutoGird9()},e.prototype.closeGird9=function(){this.getChannel().closeGird9()},e.prototype.showBanner=function(e,a,t){void 0===e&&(e=!1),void 0===a&&(a=null),void 0===t&&(t=null),this.getChannel().showBanner(e,a,t)},e.prototype.closeBanner=function(){this.getChannel().closeBanner()},e.prototype.showBannerByTime=function(e){void 0===e&&(e=!1),this.getChannel().showBannerByTime(e)},e.prototype.closeBannerByTime=function(){this.getChannel().closeBannerByTime()},e.prototype.checkNativeInsert=function(e){return this.getChannel().checkNativeInsert(e)},e.prototype.showNative=function(e,a,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),this.getChannel().showNative(e,a,t,o,n)},e.prototype.loadAndShowNative=function(e,a,t){this.getChannel().loadAndShowNative(e,a,t)},e.prototype.loadNative=function(e,a){this.getChannel().loadNative(e,a)},e.prototype.findAndReport=function(){this.getChannel().findAndReport()},e.prototype.reportAdShow=function(e,a){this.getChannel().reportAdShow(e,a)},e.prototype.reportAdClick=function(e){this.getChannel().reportAdClick(e)},e.prototype.closeNative=function(e){this.getChannel().closeNative(e)},e.prototype.getNativeData=function(e){this.getChannel().getNativeData(e)},e.prototype.showCustomAd=function(e,a,t){void 0===a&&(a=!1),void 0===t&&(t=null),this.getChannel().showCustomAd(e,a,t)},e.prototype.closeCustomAd=function(e){void 0===e&&(e=!1),this.getChannel().closeCustomAd(e)},e.prototype.showInter=function(e){void 0===e&&(e=!1),this.getChannel().showInter(e)},e.prototype.closeInter=function(){this.getChannel().closeInter()},e.prototype.showDesktop=function(e,a){this.getChannel().showDesktop(e,a)},e.prototype.checkShortcut=function(e){this.getChannel().checkShortcut(e)},e.prototype.addShortcut=function(e){this.getChannel().addShortcut(e)},e.prototype.recorderStart=function(){this.getChannel().recorderStart()},e.prototype.recorderStop=function(){this.getChannel().recorderStop()},e.prototype.getRecordTime=function(){return this.getChannel().getRecordTime()},e.prototype.shareVideo=function(e){void 0===e&&(e=null),this.getChannel().shareVideo(e)},e.prototype.jumpTo=function(e,a,t,o){void 0===a&&(a=function(){}),void 0===t&&(t=function(){}),void 0===o&&(o=function(){}),this.getChannel().jumpTo(e,a,t,o)},e.prototype.canMoreGame=function(){return this.getChannel().canMoreGame()},e.prototype.showMoreGameBox=function(e,a,t){this.getChannel().showMoreGameBox(e,a,t)},e.prototype.showComm=function(){"ios"===this.getChannel().channel&&this.getChannel().showComm()},e.onLoadShowPrivacy=function(a,t){e.instance().hasPrivacy()||!e.isConfRemote&&"noAD"!=e.instance().channel&&"oppo"!=e.instance().channel&&"vivo"!=e.instance().channel&&"hw"!=e.instance().channel&&"qq"!=e.instance().channel&&"mi"!=e.instance().channel?t&&t():e.instance().getChannel().showPrivacy(a,t)},e.prototype.showIconAd=function(e,a,t){this.getChannel().showIconAd(e,a,t)},e.prototype.hideIconAd=function(){this.getChannel().hideIconAd()},e.prototype.isShowSideView=function(e){this.getChannel().isShowSideView(e)},e.cfmChannelAppId=function(a){return e.instance().getChannel().getPara("appId")==a},e.channelAppId={},e.acviveGetId=new Map([["noAD",{battlePass:"mdJ3kuIQvVe70r5a",riderFall:"9HJGDppt3biehl8F"}],["tt",{battlePass:"otJNx32AMcHEGZli"}],["wx",{battlePass:"j2bf6w392jZmKKv7"}]]),e.version="1.0.30",e.verMap={maskRider:{key:"TYNOaXvipIvkhDyS",id:"67db7dc8871bed36f2025229"},debug:{key:"ihiKqvgY3kNFwou4",id:"65dbfb5a05db8b4be9b19b21"},majia:{key:"q4L9Px8KjHqwvFWN",id:"66d6cc1c4d0cc96950177eb4"}},e.isConfRemote=!0,e.remoteVerKey="maskRider",e.adDayMax=5,e.gameName="\u5047\u9762\u9a91\u58eb",e}();t.pzaChannel=_,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannelBiLi":"pzaChannelBiLi","./pzaChannelHw":"pzaChannelHw","./pzaChannelIOS":"pzaChannelIOS","./pzaChannelKs":"pzaChannelKs","./pzaChannelMg":"pzaChannelMg","./pzaChannelMi":"pzaChannelMi","./pzaChannelMy":"pzaChannelMy","./pzaChannelMy1":"pzaChannelMy1","./pzaChannelNoAD":"pzaChannelNoAD","./pzaChannelOppo":"pzaChannelOppo","./pzaChannelQQ":"pzaChannelQQ","./pzaChannelRY":"pzaChannelRY","./pzaChannelTT":"pzaChannelTT","./pzaChannelTap":"pzaChannelTap","./pzaChannelVivo":"pzaChannelVivo","./pzaChannelWeb":"pzaChannelWeb","./pzaChannelWx":"pzaChannelWx","./pzakc":"pzakc"}],pzaChapterConfig:[function(e,a,t){"use strict";cc._RF.push(a,"3e462gHxl9CDojzK6SoDnHG","pzaChapterConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChapterConfig=void 0;var o=function(){function e(e,a,t){this.chapter=1,this.chapterName=null,this.partCount=0,this.chapter=e,this.chapterName=a,this.partCount=t}return e.chapterConfigMap=new Map([[1,new e(1,"\u50f5\u5c38\u6765\u88ad",10)],[2,new e(2,"\u9ed1\u5e55\u964d\u4e34",10)],[3,new e(3,"\u540e\u9662\u544a\u6025",10)],[4,new e(4,"\u8ff7\u96fe\u91cd\u91cd",10)],[5,new e(5,"\u5c4b\u9876\u51b3\u6218",10)]]),e}();t.pzaChapterConfig=o,cc._RF.pop()},{}],pzaCherryBomb:[function(e,a,t){"use strict";cc._RF.push(a,"f74c6b9TIpBYZF6od1SUQB5","pzaCherryBomb");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCherryBomb=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaNameConf"),s=e("../../Common/pzaSoundManager"),c=e("../../Common/pzaUtil"),u=e("../Data/pzaBuffData"),d=e("../pzaGameState"),h=e("./pzaAttackType"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.playNormalAni=function(){var e=this,a=!1;null!==this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.adClearPlant&&(a=!0),this.animation.playAnimation(a?l.pzaPlantSkName.CHERRY_BOMB.ad_blow:l.pzaPlantSkName.CHERRY_BOMB.blow,!1,function(){e.close()},function(){s.pzaSoundManager.playAudio("cherrybomb",1),a?e.adBoom():e.attack()})},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),s.pzaSoundManager.playAudio("cherryReady",1),this.preventBreak(),this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1},a.prototype.getBulletAtk=function(){return this.baseData.atk},a.prototype.attack=function(){var e=this;window.pzaMapManager.shakeMap(),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData);var a=0,t=1.5*d.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex);null==o&&(o=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(t){var o=t&&t.baseData;null==o||o.isDead||o.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(t&&t.hurt(e.getBulletAtk(),e.baseData,h.pzaAttackType.BOOM),t.baseData.isDead&&a++)}),window.pzaMapManager.LadderMap.forEach(function(a,o){c.pzaUtil.getDistance(e.baseData.logicPos,a.logicPos)>t||(a.close(),window.pzaMapManager.LadderMap.delete(o))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_3,a)},a.prototype.adBoom=function(){var e=this;window.pzaMapManager.shakeMap(),window.pzazombieManager.zombieMap.forEach(function(a,t){if(null!=t&&!t.isDead)if(t.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)){if(a.baseData.zombieData.hypnosis)return;a&&a.hurt(e.baseData.atk,e.baseData,h.pzaAttackType.DEATH)}else a&&a.hurt(d.pzaGameState.adCherryBoomDmg,e.baseData,h.pzaAttackType.BOOM)}),window.pzaMapManager.LadderMap.forEach(function(e,a){e.close(),window.pzaMapManager.LadderMap.delete(a)})},i([z],a)}(m.pzaBasePlant));t.pzaCherryBomb=y,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaChomper:[function(e,a,t){"use strict";cc._RF.push(a,"a41fdxYsaxBIZPWmsxhOAdl","pzaChomper");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaChomper=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaZombieEnum"),u=e("../pzaGameState"),d=e("./pzaAttackType"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.eating=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.eating=!1,this.animation.playAnimation(a.plantData.eatTime>0?r.pzaPlantSkName.CHOMPER.thin_idle:r.pzaPlantSkName.CHOMPER.strong_idle,!0),u.pzaGameState.onlyBoomPlant=!1,u.pzaGameState.onlyShroomCofee=!1},a.prototype.logicUpdate=function(a){var t=this;if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead&&!this.baseData.isBePauseControlled()){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=a,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation(r.pzaPlantSkName.CHOMPER.big,!1,function(){t.eating=!1,t.animation.playAnimation(r.pzaPlantSkName.CHOMPER.strong_idle,!0)})));if(!this.eating){var o=this.findAttackTarget();null!=o&&this.attack(o)}}},a.prototype.findAttackTarget=function(){var e=this;if(null!=this.baseData&&!this.baseData.isDead){var a=null,t=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(s.pzaBuffType.FROZEN)||o.zombieData.toolType==c.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=c.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=e.baseData.xIndex)){var n=l.pzaUtil.getDistance(o.logicPos,e.baseData.logicPos);if(o.logicPos.x<=e.baseData.logicPos.x)n<=.5*u.pzaGameState.map.getBlockWidth()&&(a=o,t=0);else if(!(n>2*u.pzaGameState.map.getBlockWidth()))return-1==t?(a=o,void(t=n)):void(t<=n||(a=o,t=n))}}),null==a){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&(a=window.pzazombieManager.drZomBoss.baseData)}return a}},a.prototype.attack=function(e){var a=this;this.baseData.plantData.eatTime=40,this.animation.playAnimation(r.pzaPlantSkName.COMMON.attack,!1,function(){a.animation.playAnimation(a.baseData.plantData.eatTime>0?r.pzaPlantSkName.CHOMPER.thin_idle:r.pzaPlantSkName.CHOMPER.strong_idle,!0)},function(){if(null!=a.baseData&&!a.baseData.isDead){var t=window.pzazombieManager.getZombie(e);null==t||null==t.baseData||t.baseData.isDead?a.baseData.plantData.eatTime=0:(t.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.HIT_FLY),null==e.zombieData||e.zombieData.cate!==c.pzaZombieCate.Gargantuar&&e.zombieData.zombieType!=c.pzaZombieEnum.DR_ZOMBOSS?(p.pzaSoundManager.playAudio("ChomperAtk"),e.isDead||(a.baseData.plantData.eatTime=0)):a.baseData.plantData.eatTime=0)}})},a.prototype.death=function(a,t,o){var n;this.baseData&&(n=this.baseData.plantData.eatTime>0?r.pzaPlantSkName.CHOMPER.thin_idle:r.pzaPlantSkName.CHOMPER.strong_idle),e.prototype.death.call(this,a,t,o,n)},i([f],a)}(h.pzaBasePlant));t.pzaChomper=z,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCleanCar:[function(e,a,t){"use strict";cc._RF.push(a,"5a52ePJqmdPd7fMu7FAbLQM","pzaCleanCar");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCleanCar=void 0;var r=e("../Achieve/pzaAchieve"),p=e("../Achieve/pzaAchieveMgr"),l=e("../Common/pzaBaseComponent"),s=e("../Common/pzaCollisionManager"),c=e("../Common/pzaGroupEnum"),u=e("../Common/pzaNodeManager"),d=e("../Common/pzaSoundManager"),h=e("../Common/pzaTipManager"),m=e("../Common/pzaUtil"),f=e("../Common/pzaWorldEventManager"),z=e("../Load/pzaBundleObjectPool"),y=e("../Load/pzaPreLoadManager"),g=e("./Data/pzaBaseData"),v=e("./Data/pzaDropType"),b=e("./Data/pzaZombieEnum"),P=e("./Effect/pzaDrZomBall"),C=e("./Effect/pzaPortalDoor"),E=e("./Effect/pzaShadowEffect"),S=e("./Plant/pzaAttackType"),_=e("./Zombie/pzaZombieBody"),D=e("./pzaEffectManager"),M=e("./pzaGameState"),w=cc._decorator,T=w.ccclass,A=w.property,B=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lawnCar=null,a.poolCar=null,a.roofCar=null,a.hasTrigger=!1,a.carType=1,a.inWater=!1,a.yIndex=0,a.killCount=0,a.isDead=!1,a.shadow=null,a.collider=null,a.portalCD=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLEAR_CLEANCAR,this.clearCar,this),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.ONCLICK_DROPCARD,this.onClickDropCard,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),f.pzaWorldEventManager.removeListener(f.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this),f.pzaWorldEventManager.removeListener(f.pzaWorldEventType.CLEAR_CLEANCAR,this.clearCar,this),f.pzaWorldEventManager.removeListener(f.pzaWorldEventType.ONCLICK_DROPCARD,this.onClickDropCard,this)},a.prototype.onClickDropCard=function(){D.pzaEffectManager.createPartRewardCoin(v.pzaDropType.GOLD_COIN,cc.v2(this.node.position),cc.v2(this.node.position.x+m.pzaUtil.getRandomFloatNum(-100,100),this.node.position.y+m.pzaUtil.getRandomFloatNum(-100,100)))},a.prototype.clearCar=function(e){this.yIndex==e&&this.close()},a.prototype.init=function(e,a){var t=this;this.lawnCar.active=1==e,this.poolCar.active=2==e,this.roofCar.active=3==e,this.carType=e,this.yIndex=a,this.hasTrigger=!1,this.inWater=!1,this.isDead=!1,this.killCount=0,2==e||3==e&&(this.roofCar.scale=1);var o=M.pzaGameState.map.getMapOriPos();if(null!=o){var n=M.pzaGameState.map.getXInterval(0)/2,i=.1*M.pzaGameState.map.getYInterval(a),r=M.pzaGameState.map.getBlockLogicPos(0,a,n,i);r.x=o.x-26,r.y+=25,this.node.stopAllActions(),this.node.setPosition(r.add(cc.v2(-100,0))),this.node.runAction(cc.sequence(cc.moveTo(.05+.02*a,r),cc.callFunc(function(){t.createShadow()})));var p=10*-a+1;this.node.zIndex=p,this.baseData=new g.pzaBaseData(null,null),this.baseData.logicPos=r,this.baseData.hp=1,s.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)}},a.prototype.recover=function(e,a){this.lawnCar.active=1==e,this.poolCar.active=2==e,this.roofCar.active=3==e,this.carType=e,this.yIndex=a,this.hasTrigger=!1,this.inWater=!1,this.isDead=!1,this.killCount=0,2==e||3==e&&(this.roofCar.scale=1);var t=M.pzaGameState.map.getMapOriPos();if(null!=t){var o=cc.v2(t.x-26,t.y+M.pzaGameState.map.getYPos(a)+55);this.node.stopAllActions(),this.node.setPosition(o);var n=10*-a+1;this.node.zIndex=n,this.baseData=new g.pzaBaseData(null,null),this.baseData.logicPos=o,this.baseData.hp=1,this.createShadow(),s.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)}},a.prototype.logicUpdate=function(e){if(this.hasTrigger&&!this.isDead){var a=this.node.x;a+=450*e;var t=cc.v2(a,this.node.y);if(M.pzaGameState.map.fixMapYOffset(this.yIndex,t,55),this.baseData.logicPos=t,2==this.carType?this.node.x=t.x:this.node.setPosition(t),2!=this.carType&&window.pzaMapManager.isInWaterWay(this.yIndex)&&(o=M.pzaGameState.map.getMapOriPos())&&a>=o.x+10)return D.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x,this.node.y-30),null,1),void this.close();if(2==this.carType){var o=M.pzaGameState.map.getMapOriPos(),n=M.pzaGameState.map.getMapWidth();if(!this.inWater&&a>o.x+10&&a<o.x+n)return this.inWater=!0,D.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x+this.poolCar.x,this.node.y+this.poolCar.y),null,1),void this.shadow.hideShadow();if(this.inWater&&a>=o.x+n)return this.inWater=!1,D.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x+this.poolCar.x,this.node.y+this.poolCar.y),null,1),void this.shadow.showShadow()}a>=640&&this.close()}},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.onCollision=function(e){var a=this;if(null!=e&&!this.isDead){if(e.node.group==c.pzaGroupEnum.ZOMBIE){var t=e.node.getComponent(_.pzaZombieBody);this.colliderZombie(t&&t.baseData)}if(e.node.group==c.pzaGroupEnum.ZOMBIE_BULLET&&1==e.tag){var o=e.node.getComponent(P.pzaDrZomBall);if(null==o||o.yIndex!=this.yIndex)return;this.isDead=!0,this.roofCar.stopAllActions(),this.roofCar.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.close()})))}if(e.node.group==c.pzaGroupEnum.PORTALDOOR){var n=e.node.parent.getComponent(C.pzaPortalDoor);n&&n.yIndex==this.yIndex&&(this.portalCD||(this.node.x=n.targetPortalDoor.node.x,this.node.y=n.targetPortalDoor.node.y,s.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this),s.pzaCollisionManager.getInstance.addPlantByRow(n.targetPortalDoor.yIndex,this),this.yIndex=n.targetPortalDoor.yIndex,this.portalCD=!0,setTimeout(function(){a.portalCD=!1},2e3/M.pzaGameState.gameSpeed)))}}},a.prototype.colliderZombie=function(e){if(null!=e&&!e.isDead&&e.yIndex==this.yIndex&&e.zombieData.zombieType!=b.pzaZombieEnum.DR_ZOMBOSS){if(this.hasTrigger)2==this.carType&&this.inWater;else{if(null!=e.zombieData&&e.zombieData.direction>0)return;this.hasTrigger=!0;var a=10*-this.yIndex+6;this.node.zIndex=a,M.pzaGameState.partStar>0&&!M.pzaGameState.lossCar&&(M.pzaGameState.lossCar=!0,M.pzaGameState.partStar--,h.pzaTipManager.showLossStarTip(!0,!1)),1==this.carType&&(D.pzaEffectManager.createSmokeEffect("blow2",cc.v2(this.node.x-54,this.node.y+16)),d.pzaSoundManager.playAudio("CleanCar")),2==this.carType?d.pzaSoundManager.playAudio("pool_cleancar"):3==this.carType&&d.pzaSoundManager.playAudio("CleanCar")}var t=window.pzazombieManager.getZombie(e);t&&t.hurt(1800,null,S.pzaAttackType.CLEAN_CAR),this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_17,this.killCount)}},a.prototype.createShadow=function(){var e=this,a=u.pzaNodeManager.getDownEffectNode();z.pzaBundleObjectPool.requestInstantByUrl2(y.pzaResourceUrl.SHADOW,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(E.pzaShadowEffect);1==e.carType?n&&n.init(e.baseData,cc.v2(0,0)):2==e.carType?n&&n.init(e.baseData,cc.v2(0,-15)):n&&n.init(e.baseData,cc.v2(0,-10)),e.shadow=n}else console.error(t)})},a.prototype.pauseSelf=function(){this.hasTrigger},a.prototype.resumeSelf=function(){this.hasTrigger},a.prototype.clearScreen=function(){this.hasTrigger&&this.close()},a.prototype.close=function(){s.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this),e.prototype.close.call(this),this.baseData.isDead=!0,window.pzaMapManager.CleanCar.delete(this)},i([A({displayName:"\u8349\u5730\u63a8\u8f66",type:cc.Node})],a.prototype,"lawnCar",void 0),i([A({displayName:"\u6c34\u6c60\u63a8\u8f66",type:cc.Node})],a.prototype,"poolCar",void 0),i([A({displayName:"\u5c4b\u9876\u63a8\u8f66",type:cc.Node})],a.prototype,"roofCar",void 0),i([T],a)}(l.pzaBaseComponent);t.pzaCleanCar=B,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGroupEnum":"pzaGroupEnum","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaBaseData":"pzaBaseData","./Data/pzaDropType":"pzaDropType","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaDrZomBall":"pzaDrZomBall","./Effect/pzaPortalDoor":"pzaPortalDoor","./Effect/pzaShadowEffect":"pzaShadowEffect","./Plant/pzaAttackType":"pzaAttackType","./Zombie/pzaZombieBody":"pzaZombieBody","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaClickShowTimer:[function(e,a,t){"use strict";cc._RF.push(a,"f52ef64wOVN6a3TEGtq6X+Z","pzaClickShowTimer");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaClickShowTimer=void 0;var r=e("../utils/pzaChannel"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.time=0,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickScreen,this),this.node._touchListener.setSwallowTouches(!1)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickScreen,this)},a.prototype.update=function(e){"wx"!=r.pzaChannel.instance().channel&&(this.time+=e,this.time>=r.pzaChannel.instance().getCtrl("p16")&&0!=r.pzaChannel.instance().getCtrl("p16")&&(console.log("\u4e3b\u52a8\u5f39\u8d77=="),this.time=0,r.pzaChannel.instance().showInter()))},a.prototype.clickScreen=function(){this.time=0},i([l],a)}(cc.Component));t.pzaClickShowTimer=s,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel"}],pzaCobBullet:[function(e,a,t){"use strict";cc._RF.push(a,"1a3dcDmX6BMdJpCLB7fJQn3","pzaCobBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCobBullet=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Plant/pzaAttackType"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.targetPos=null,a.targetXIndex=-1,a.logicPos=null,a.moveSpeed=800,a.atk=0,a.up=!0,a}return n(a,e),a.prototype.init=function(e,a,t,o){this.atk=e,this.logicPos=a,this.targetPos=t,this.targetXIndex=o,this.node.scaleY=1,this.up=!0,this.node.opacity=0},a.prototype.logicUpdate=function(e){if(this.logicPos.y+=e*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up)return this.node.opacity=0,void(this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1));this.node.opacity=255,this.logicPos.y<=this.targetPos.y&&this.boom()},a.prototype.boom=function(){var e=this;this.close(),p.pzaSoundManager.playAudio("cobBoom"),c.pzaEffectManager.createCobBoomEffect(this.targetPos);var a=2*u.pzaGameState.map.getBlockWidth(),t=window.pzazombieManager.findFixRangeZombies(this.targetPos,a);null==t&&(t=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss),t.forEach(function(a){var t=a&&a.baseData;null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||a&&a.hurt(e.atk,null,s.pzaAttackType.BOOM)})},i([h],a)}(r.pzaBaseComponent));t.pzaCobBullet=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaCobCannon:[function(e,a,t){"use strict";cc._RF.push(a,"c43cb9C3IdBn4h1XVq6oIBG","pzaCobCannon");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCobCannon=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaNodeManager"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaWorldEventManager"),d=e("../Bullet/pzaCobBullet"),h=e("../pzaGameState"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cobPrefab=null,a.loadTime=6.25,a.cobFinishIdle="idle3",a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.loadTime=6.25,this.playNormalAni(),h.pzaGameState.onlyShroomCofee=!1,h.pzaGameState.cobCannonCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_19,h.pzaGameState.cobCannonCount)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.loadTime-=a,h.pzaGameState.cobCannon&&h.pzaGameState.cobCannon.xIndex==this.baseData.xIndex&&h.pzaGameState.cobCannon.yIndex==this.baseData.yIndex?this.cobFinishIdle="idle2":this.cobFinishIdle="idle3"},a.prototype.playNormalAni=function(){var e=this,a=function(){if(!e.baseData.plantData.cobLoadFinish&&e.loadTime<=0)return c.pzaSoundManager.playAudio("shoop"),void e.animation.playAnimation("out",!1,function(){e.baseData.plantData.cobLoadFinish=!0,a()});e.animation.playAnimation(e.baseData.plantData.cobLoadFinish?e.cobFinishIdle:"idle",!1,a)};this.animation.playAnimation(this.baseData.plantData.cobLoadFinish?this.cobFinishIdle:"idle",!1,a)},a.prototype.shoot=function(e,a){var t=this;this.baseData.plantData.cobLoadFinish&&(this.baseData.plantData.cobLoadFinish=!1,this.loadTime=36,h.pzaGameState.cobCannon=null,this.animation.playAnimation("attack",!1,function(){c.pzaSoundManager.playAudio("coblaunch");var o=cc.v2(t.baseData.logicPos.x+5,t.baseData.logicPos.y+400),n=s.pzaNodeManager.getUpEffectNode(),i=l.pzaGameCommonPool.requestInstant(t.cobPrefab,!1);if(null!=n&&null!=i){i.setParent(n),i.setPosition(o),i.scale=t.baseData.logicPos.x>=e.x?-1:1;var r=i.getComponent(d.pzaCobBullet);r&&r.init(t.baseData.atk,o,e,a),t.playNormalAni()}}))},a.prototype.launchCob=function(e){null!=e.data&&e.data==this.baseData&&this.shoot(e.pos,e.xIndex)},a.prototype.close=function(){e.prototype.close.call(this),this.baseData==h.pzaGameState.cobCannon&&(h.pzaGameState.cobCannon=null)},i([y({displayName:"\u7389\u7c73\u9884\u8bbe",type:cc.Prefab})],a.prototype,"cobPrefab",void 0),i([z],a)}(m.pzaBasePlant);t.pzaCobCannon=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaCobBullet":"pzaCobBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCobHoleEffect:[function(e,a,t){"use strict";cc._RF.push(a,"7cbbcdIxOBLtofgWQTsMO3q","pzaCobHoleEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCobHoleEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){var a=this;e.prototype.onEnable.call(this),this.node.stopAllActions(),this.node.opacity=255,this.node.runAction(cc.sequence(cc.delayTime(1),cc.fadeOut(.5),cc.callFunc(function(){a.close()})))},a.prototype.pauseSelf=function(){this.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([l],a)}(r.pzaBaseComponent));t.pzaCobHoleEffect=s,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaCoffeeBean:[function(e,a,t){"use strict";cc._RF.push(a,"9a409nTfSpAAr41TDJZfv8e","pzaCoffeeBean");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCoffeeBean=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Load/pzaPreLoadManager"),l=e("../Data/pzaBuffData"),s=e("../pzaEffectManager"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.wakeTime=0,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.wakeTime=0,this.animation.playAnimation("idle",!0);var t=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(t);o&&o.sleepEffect&&o.sleepEffect.death()},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.awakePlant(a)},a.prototype.awakePlant=function(e){if(!(null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.wakeTime+=e,this.wakeTime<1))){var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);this.attack(t)}},a.prototype.attack=function(e){var a=this;r.pzaSoundManager.playAudio("CoffeeBean"),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.animation.playAnimation("death",!1,function(){a.death(null,null,!1)},function(){s.pzaEffectManager.createEffect(p.pzaResourceUrl.WAKEUP_EFFECT,a.baseData.logicPos);var t=window.pzaplantManager.getPlantByData(e);null!=t&&(r.pzaSoundManager.playAudio("garden_wakeup"),t.wakeUp(),e&&e.buffData.hasBuff(l.pzaBuffType.FROZEN)&&t.onFrozen(99999))})},i([d],a)}(c.pzaBasePlant));t.pzaCoffeeBean=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaColdWind:[function(e,a,t){"use strict";cc._RF.push(a,"103b6Mnf8ZHRJeRfxy2POF6","pzaColdWind");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaColdWind=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaSpineController"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaPlantEnum"),u=e("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a.startCol=0,a.frozenCD=.5,a}return n(a,e),a.prototype.onEnable=function(){var a=this;e.prototype.onEnable.call(this),this.ani=this.node.getChildByName("ani").getComponent(l.pzaSpineController),p.pzaSoundManager.playAudio("coldwind"),this.ani.playAnimation("idle",!1,function(){a.ani.playAnimation("idle2",!1,function(){a.ani.playAnimation("idle3",!1,function(){a.close()})})}),this.startCol=u.pzaGameState.map.getMapColumn()},a.prototype.frozenPlant=function(){if(this.startCol--,!(this.startCol<0)){for(var e=this.startCol,a=u.pzaGameState.map.getMapRow(),t=!1,o=0;o<a;o++){var n,i=e+""+o,r=window.pzaplantManager.plantDataMap.get(i),l=window.pzaplantManager.pumpkinDataMap.get(i),d=window.pzaplantManager.plantEnvDataMap.get(i);if(!d||d.isDead||!d.plantData||d.plantData.plantType!=c.pzaPlantEnum.FLOWER_POT)r&&!r.isDead&&((n=window.pzaplantManager.getPlantByData(r))&&n.onFrozen(99999),n&&n.baseData&&!n.baseData.buffData.hasBuff(s.pzaBuffType.FROZEN)&&(t=!0)),l&&!l.isDead&&((n=window.pzaplantManager.getPlantByData(l))&&n.baseData&&!n.baseData.buffData.hasBuff(s.pzaBuffType.FROZEN)&&(t=!0),n&&n.onFrozen(99999))}t&&p.pzaSoundManager.playAudio("frost")}},a.prototype.logicUpdate=function(e){this.frozenCD-=e,this.frozenCD<=0&&(this.frozenCD=.5,this.frozenPlant())},i([h],a)}(r.pzaBaseComponent));t.pzaColdWind=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState"}],pzaCollisionManager:[function(e,a,t){"use strict";cc._RF.push(a,"f47c5wLAAZL35lEo7ZfwU94","pzaCollisionManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCollisionManager=void 0;var r=e("./pzaWorldEventManager"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.self=null,a.collisionMgr=null,a.bulletRowMap=new Map,a.zombieBulletRowMap=new Map,a.zombieBulletOtherMap=new Map,a.bulletOtherMap=new Map,a.plantRowMap=new Map,a.bulletPlantRowMap=new Map,a.zombieRowMap=new Map,a.zombieOtherMap=new Map,a.jarMap=new Map,a.brainMap=new Map,a.portalRowMap=new Map,a.colliedMap=new Map,a.removeColliedSet=new Set,a.isOn=!1,a.cTime=0,a}var t;return n(a,e),t=a,Object.defineProperty(a,"getInstance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),a.prototype.onLoad=function(){this.self=t.instance=this,this.collisionMgr=cc.director.getCollisionManager(),this.collisionMgr.enabled=!1,this.collisionMgr.enabledDebugDraw=!1;for(var e=-1;e<7;e++)this.bulletRowMap.set(e,new Map),this.zombieBulletRowMap.set(e,new Map),this.plantRowMap.set(e,new Map),this.bulletPlantRowMap.set(e,new Map),this.zombieRowMap.set(e,new Map),this.jarMap.set(e,new Map),this.portalRowMap.set(e,new Map);this.collisionMgr.addCollider=function(){},this.collisionMgr.removeCollider=function(){},r.pzaWorldEventManager.addListener(r.pzaWorldEventType.GAME_OVER,this.setOff,this)},a.prototype.zombieToPlant=function(e,a){this.zombieRowMap.get(e).delete(a.uuid),this.plantRowMap.get(e).set(a.uuid,a)},a.prototype.zombieChangeRow=function(e,a,t){this.zombieRowMap.get(a).delete(e.uuid),this.zombieRowMap.get(t).set(e.uuid,e)},a.prototype.plantChangeRow=function(e,a,t){this.plantRowMap.get(a).delete(e.uuid),this.plantRowMap.get(t).set(e.uuid,e)},a.prototype.addBulletByRow=function(e,a){e<0?this.bulletOtherMap.set(a.uuid,a):this.bulletRowMap.get(e).set(a.uuid,a)},a.prototype.addZombieBulletByRow=function(e,a){e<0?this.zombieBulletOtherMap.set(a.uuid,a):this.zombieBulletRowMap.get(e).set(a.uuid,a)},a.prototype.addPlantByRow=function(e,a){this.plantRowMap.get(e).set(a.uuid,a)},a.prototype.addBulletPlantByRow=function(e,a){this.bulletPlantRowMap.get(e).set(a.uuid,a)},a.prototype.addZombieByRow=function(e,a){e<0?this.zombieOtherMap.set(a.uuid,a):this.zombieRowMap.get(e).set(a.uuid,a)},a.prototype.addJarByRow=function(e,a){this.jarMap.get(e).set(a.uuid,a)},a.prototype.addBulletOther=function(e){this.bulletOtherMap.set(e.uuid,e)},a.prototype.addZombieOther=function(e){this.zombieOtherMap.set(e.uuid,e)},a.prototype.addBrain=function(e,a){this.brainMap.set(e,a)},a.prototype.addPortalByRow=function(e,a){this.portalRowMap.get(e).set(a.uuid,a)},a.prototype.delBrain=function(e){this.brainMap.delete(e)},a.prototype.delJarByRow=function(e,a){this.jarMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.delBulletByRow=function(e,a){e<0?this.bulletOtherMap.delete(a.uuid):this.bulletRowMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.delZombieBulletByRow=function(e,a){e<0?this.zombieBulletOtherMap.delete(a.uuid):this.zombieBulletRowMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.delPlantByRow=function(e,a){this.plantRowMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.delBulletPlantByRow=function(e,a){this.bulletPlantRowMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.delZombieByRow=function(e,a){e<0?this.zombieOtherMap.delete(a.uuid):this.zombieRowMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.delBulletOther=function(e){this.bulletOtherMap.delete(e.uuid),this.removeColliedSet.add(e.getCollider())},a.prototype.delZombieBulletOther=function(e){this.zombieBulletOtherMap.delete(e.uuid),this.removeColliedSet.add(e.getCollider())},a.prototype.delZombieOther=function(e){this.zombieOtherMap.delete(e.uuid),this.removeColliedSet.add(e.getCollider())},a.prototype.delPortalByRow=function(e,a){this.portalRowMap.get(e).delete(a.uuid),this.removeColliedSet.add(a.getCollider())},a.prototype.getCollisionManager=function(){return this.self?this.self.collisionMgr:null},a.prototype.setOn=function(){this.isOn=!0},a.prototype.setOff=function(){this.isOn=!1;for(var e=-1;e<7;e++)this.bulletRowMap.get(e).clear(),this.zombieBulletRowMap.get(e).clear(),this.plantRowMap.get(e).clear(),this.bulletPlantRowMap.get(e).clear(),this.zombieRowMap.get(e).clear(),this.jarMap.get(e).clear(),this.portalRowMap.get(e).clear();this.zombieOtherMap.clear(),this.bulletOtherMap.clear(),this.zombieBulletOtherMap.clear(),this.brainMap.clear(),this.colliedMap.clear(),this.removeColliedSet.clear()},a.prototype.getRectFromCollider=function(e){var a=e.node,t=e.offset,o={x:0,y:0,width:0,height:0},n=e.radius,i=e.poSource;if(i?"function"==typeof i&&(i=i.call(e)):i=a.convertToWorldSpaceAR(cc.v2()),o.x=i.x+t.x,o.y=i.y+t.y,n)o.width=n,o.height=n;else{var r=e.size;o.width=r.width,o.height=r.height}return o},a.prototype.rectRect=function(e,a){var t=e.width/2,o=e.height/2,n=e.x-t,i=e.y-o,r=e.x+t,p=e.y+o,l=a.width/2,s=a.height/2,c=a.x-l,u=a.y-s,d=a.x+l,h=a.y+s;return n<=d&&r>=c&&i<=h&&p>=u},a.prototype.isCollision=function(e,a){return!!this.rectRect(this.getRectFromCollider(e),this.getRectFromCollider(a))},a.prototype.checkColli=function(e,a){var t=this;e.forEach(function(o,n){var i=o.getCollider();if(i){if(i.enabled)for(var r=function(e){var n=a[e];n.forEach(function(e,a){var r=e.getCollider();r?r.enabled&&t.isCollision(i,r)&&(t.colliedMap.has(o.uuid+e.uuid)?o.onCollisionStay&&o.onCollisionStay(r,i):o.onCollisionEnter(r,i),t.colliedMap.set(o.uuid+e.uuid,[t.cTime,o,e]),t.colliedMap.has(e.uuid+o.uuid)?e.onCollisionStay&&e.onCollisionStay(i,r):e.onCollisionEnter(i,r),t.colliedMap.set(e.uuid+o.uuid,[t.cTime,e,o])):n.delete(a)})},p=0;p<a.length;p++)r(p)}else e.delete(n)})},a.prototype.checkColliByOne=function(e,a){var t=this;if(e){var o=e.getCollider();if(o&&o.enabled)for(var n=0;n<a.length;n++)a[n].forEach(function(e){var a=e.getCollider();a&&a.enabled&&t.isCollision(o,a)&&e.onCollisionEnter(o,a)})}},a.prototype.checkCollision=function(){var e=this;this.cTime=Date.now();for(var a=0;a<7;a++){var t=this.bulletRowMap.get(a),o=this.zombieBulletRowMap.get(a),n=this.plantRowMap.get(a),i=this.bulletPlantRowMap.get(a),r=this.zombieRowMap.get(a),p=this.jarMap.get(a),l=this.portalRowMap.get(a);this.checkColli(t,[r,this.zombieOtherMap,i]),this.checkColli(o,[n]),this.checkColli(this.bulletOtherMap,[r,i]),this.checkColli(this.zombieBulletOtherMap,[n]),this.checkColli(p,[r]),this.checkColli(n,[r,this.zombieOtherMap]),this.checkColli(l,[r,t,o,n]),this.checkColliByOne(this.brainMap.get(a),[r,this.zombieOtherMap])}this.checkColli(this.bulletOtherMap,[this.zombieOtherMap]),this.colliedMap.forEach(function(a,t){if(a[0]!==e.cTime)e.colliedMap.delete(t),a[1].onCollisionExit&&a[1].onCollisionExit(a[2].getCollider(),a[1].getCollider());else{var o=a[1].getCollider(),n=a[2].getCollider();(e.removeColliedSet.has(o)||e.removeColliedSet.has(n))&&(e.colliedMap.delete(t),a[1].onCollisionExit&&a[1].onCollisionExit(a[2].getCollider(),a[1].getCollider()))}}),this.removeColliedSet.clear()},a.prototype.update=function(e){this.isOn&&!this.collisionMgr.enabled&&this.checkCollision(e)},a.instance=null,t=i([l],a)}(cc.Component));t.pzaCollisionManager=s,cc._RF.pop()},{"./pzaWorldEventManager":"pzaWorldEventManager"}],pzaComicView:[function(e,a,t){"use strict";cc._RF.push(a,"8408c0etXRDkL8i0RATpXac","pzaComicView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaComicView=void 0;var r=e("../../Common/pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tips=null,a.pages=null,a.pageIndex=0,a.timer=null,a.pageArray=[],a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.clickNext.bind(this,!0))},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickNext.bind(this,!0))},a.prototype.init=function(e){this.closeCall=e,this.tips.active=!1,this.timer=setTimeout(this.clickNext.bind(this),500);for(var a=0;a<this.pages.childrenCount;a++){var t=a+1;console.log("index  ",t);var o=this.pages.getChildByName(""+t);o.active=!1,this.pageArray.push(o)}},a.prototype.clickNext=function(e){if(e){if(this.tips.active)return void this.close();clearTimeout(this.timer)}this.timer=setTimeout(this.clickNext.bind(this),2e3);var a=this.pageArray[this.pageIndex];a&&(a.active=!0),this.pageIndex++,this.pageIndex>this.pages.childrenCount&&(this.tips.active=!0)},a.prototype.clickSkipBtn=function(){this.close()},a.prototype.close=function(){this.closeCall&&this.closeCall(),clearTimeout(this.timer),r.pzaGameCommonPool.returnInstant(this.node)},i([s({type:cc.Node})],a.prototype,"tips",void 0),i([s({type:cc.Node})],a.prototype,"pages",void 0),i([l],a)}(cc.Component);t.pzaComicView=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaCommonMask:[function(e,a,t){"use strict";cc._RF.push(a,"8acf6hM6spH95r2V4yFdaI6","pzaCommonMask");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCommonMask=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.maskNode=null,a.loadSprite=null,a.blackMaskNode=null,a.showLoad=!1,a.loadTime=0,a.loadMaxTime=0,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){this.maskNode.active=!1,this.showLoad=!1,t.instance=this},a.prototype.update=function(e){this.showLoad&&(this.loadMaxTime>0&&(this.loadMaxTime-=e,this.loadMaxTime<=0)?t.hideMask():(this.loadTime+=e,this.loadTime<=1||(this.loadSprite.active=!0,this.loadSprite.angle+=360*e)))},a.showMask=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=!1);var o=t.instance;null!=o&&(o.showLoad=e,o.loadTime=0,o.loadSprite.active=!1,o.maskNode.active=!0,o.blackMaskNode.active=a,a&&(o.loadTime=.5,o.loadMaxTime=7))},a.hideMask=function(){var e=t.instance;null!=e&&(e.showLoad=!1,e.maskNode.active=!1,e.blackMaskNode.active=!1,e.loadMaxTime=-1)},a.instance=null,i([l({displayName:"\u901a\u7528\u906e\u7f69",type:cc.Node})],a.prototype,"maskNode",void 0),i([l({displayName:"\u52a0\u8f7d\u5706\u56fe",type:cc.Node})],a.prototype,"loadSprite",void 0),i([l({displayName:"\u9ed1\u8272\u906e\u7f69",type:cc.Node})],a.prototype,"blackMaskNode",void 0),t=i([p],a)}(cc.Component);t.pzaCommonMask=s,cc._RF.pop()},{}],pzaCommonPopView:[function(e,a,t){"use strict";cc._RF.push(a,"fd24dnLlSZEZbeFZJGpbWz7","pzaCommonPopView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.mainContainer=null,a.isNeedAni=!0,a.duration=.3,a.popScale=.8,a}return n(a,e),a.prototype.onEnable=function(){this.isNeedAni?this.playElasticShowAnim():this.mainContainer.scale=1},a.prototype.aniOver=function(){},a.prototype.playElasticShowAnim=function(){this.mainContainer&&(this.mainContainer.scale=this.popScale,this.mainContainer.runAction(cc.sequence(cc.scaleTo(.2,1).easing(cc.easeBackOut()),cc.callFunc(this.aniOver.bind(this)))))},i([l({displayName:"\u5bb9\u5668\u8282\u70b9",type:cc.Node})],a.prototype,"mainContainer",void 0),i([l],a.prototype,"isNeedAni",void 0),i([p],a)}(cc.Component);t.default=s,cc._RF.pop()},{}],pzaCommonRewardView:[function(e,a,t){"use strict";cc._RF.push(a,"7373fYx08ZDraBGpyJDiu8i","pzaCommonRewardView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCommonRewardView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSpineController"),s=e("../utils/pzaChannel"),c=e("./pzaRewardItem"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.title=null,a.content=null,a.ani_enter=null,a.node_confirm=null,a.coin=null,a.tip=null,a.bg=null,a.closeCall=null,a}return n(a,e),a.prototype.bindData=function(e,a){for(var t=this,o=this.node.getChildByName("board").getChildByName("content"),n=0;n<o.childrenCount;n++)o.children[n].active=!1;this.node_confirm.active=!1,e.length<=6?(this.content.width=120*e.length+25*(e.length-1),this.content.height=96):e.length<=12?(this.content.width=845,this.content.height=209):(this.content.width=857,this.content.height=322);var i=function(){t.title.string="\u4f60\u5df2\u7ecf\u83b7\u5f97";for(var o=t.node.getChildByName("board").getChildByName("content"),n=0;n<e.length;n++){var i=o.children[n].getComponent(c.pzaRewardItem);if(null==i)return;var r=e[n];null==r?i.node.active=!1:(i.node.active=!0,i.init(r),r.trunToCoin&&(t.title.string="\u4e0d\u6ee1\u8db3\u83b7\u53d6\u6761\u4ef6,\u7b49\u4ef7\u8f6c\u5316\u4e3a\u91d1\u5e01"))}t.node_confirm.active=!0,t.tip.string="",t.closeCall=a,t.showAd()};this.ani_enter.playAnimation("ruchang",!1,function(){i()}),this.coin.string=""+p.pzaLocalData.data.coin},a.prototype.setTip=function(e){this.tip.string=e},a.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},a.prototype.close=function(){s.pzaChannel.instance().closeBanner(),r.pzaGameCommonPool.returnInstant(this.node)},a.prototype.showAd=function(){s.pzaChannel.instance().showInter()},i([h({displayName:"\u6807\u9898",type:cc.Label})],a.prototype,"title",void 0),i([h({displayName:"\u5bb9\u5668",type:cc.Node})],a.prototype,"content",void 0),i([h({displayName:"\u5165\u573a\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"ani_enter",void 0),i([h({displayName:"\u786e\u5b9a\u6309\u94ae\u8282\u70b9",type:cc.Node})],a.prototype,"node_confirm",void 0),i([h({displayName:"\u91d1\u5e01label",type:cc.Label})],a.prototype,"coin",void 0),i([h({displayName:"\u63d0\u793a",type:cc.Label})],a.prototype,"tip",void 0),i([h(cc.Node)],a.prototype,"bg",void 0),i([d],a)}(cc.Component);t.pzaCommonRewardView=m,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../utils/pzaChannel":"pzaChannel","./pzaRewardItem":"pzaRewardItem"}],pzaConeHeadZombie:[function(e,a,t){"use strict";cc._RF.push(a,"7840eOssB1PAL8q0Rc3DOeL","pzaConeHeadZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaConeHeadZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaZombieEnum"),s=e("./pzaNormalZombie"),c=e("./pzaZombieSlot"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=c.pzaZombieSlotType.hat,a.hatType=c.pzaZombieSlotType.hat,a.isNut=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):(this.slotMap=new Map([[c.pzaZombieSlotType.butter,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.butter).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]]),this.isNut?this.slotMap.set(c.pzaZombieSlotType.head_nut,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.head_nut).addState(new c.pzaZombieSlotAtt(1,this.hatType+"1",198,2.55,-90)).addState(new c.pzaZombieSlotAtt(2,this.hatType+"2",197.5,2.55,-90)).addState(new c.pzaZombieSlotAtt(3,this.hatType+"3",197.5,2.55,-90))):this.slotMap.set(c.pzaZombieSlotType.hat,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.hat).addState(new c.pzaZombieSlotAtt(1,this.hatType+"1",14.88,7.05,-90.67)).addState(new c.pzaZombieSlotAtt(2,this.hatType+"2",14.88,7.05,-90.67)).addState(new c.pzaZombieSlotAtt(3,this.hatType+"3",14.3,7.05,-90.67))))},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.zombieHurtSound=function(a){if(this.hasEquip){var t="plastichit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(t)}else e.prototype.zombieHurtSound.call(this,a)},i([d],a)}(s.pzaNormalZombie));t.pzaConeHeadZombie=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaCountDown:[function(e,a,t){"use strict";cc._RF.push(a,"d55652D6PdI0aB+iJLbOaP8","pzaCountDown");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.countDownLB=null,a.interval=null,a}return n(a,e),a.prototype.start=function(){var e=this;this.interval=setInterval(function(){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,0,0,0,0).getTime()-a.getTime(),o=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);e.countDownLB.string=o.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")},1e3)},a.prototype.onDestroy=function(){clearInterval(this.interval)},i([l({displayName:"\u5012\u8ba1\u65f6Label",type:cc.Label})],a.prototype,"countDownLB",void 0),i([p],a)}(cc.Component);t.default=s,cc._RF.pop()},{}],pzaCreamPea:[function(e,a,t){"use strict";cc._RF.push(a,"39460vAZAhIW4BcX/0U794U","pzaCreamPea");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCreamPea=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaPeaBullet"),c=e("../Data/pzaPlantEnum"),u=e("../pzaGameState"),d=e("./pzaBaseZombie"),h=e("./pzaZombieState"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.plantBltPre=null,a}return n(a,e),a.prototype.bindData=function(a,t){e.prototype.bindData.call(this,a,t),this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex)},a.prototype.uiShow=function(){this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.refreshFrostState(!0),this.animation.playAnimation("idle",!0,null,null,.5),this.refreshHurtState(!0),this.randomZombieSkin()},a.prototype.playMoveAnimation=function(){var e=this,a=this.getMoveAniName();a!=this.animation.spineAnimation.animation&&(this.zombieState=h.pzaZombieState.MOVE,this.animation.playAnimation(a,!0,null,function(a,t){t&&"attack"==t.data.name&&e.shoot()},1))},a.prototype.playAttakAnimation=function(){var e=this;this.zombieState=h.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var a=e.findTarget();if(null!=a&&!a.isDead&&null!=a.plantData&&a.plantData.plantType==c.pzaPlantEnum.HYPNO_SHROOM&&!a.plantData.sleeping){l.pzaSoundManager.playAudio("floop"),l.pzaSoundManager.playAudio("mindcontrolled"),a.isDead=!0,window.pzazombieManager.zombieHypnosis(e.baseData);var t=window.pzaplantManager.getPlantByData(a);t&&t.close(),window.pzaplantManager.removePlant(a)}})},a.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(e){l.pzaSoundManager.playAudio("PeashooterAtk");var a=null;(a=this.baseData.zombieData.canAtkZombie?r.pzaGameCommonPool.requestInstant2(this.plantBltPre):r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)).setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);o.y-=15,a.setPosition(o);var n=null;(n=a.getComponent(s.pzaPeaBullet)).init(this.baseData.yIndex,20,1,null,cc.v2(1,0),null);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}},i([z(cc.Node)],a.prototype,"shootNode",void 0),i([z(cc.Prefab)],a.prototype,"bulletPrefab",void 0),i([z(cc.Prefab)],a.prototype,"plantBltPre",void 0),i([f],a)}(d.pzaBaseZombie);t.pzaCreamPea=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaPeaBullet":"pzaPeaBullet","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzaCupidBullet:[function(e,a,t){"use strict";cc._RF.push(a,"6a3ceMKp99F1qxlvpvdMxzq","pzaCupidBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaCupidBullet=void 0;var r=e("../../Common/pzaGroupEnum"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../Zombie/pzaZombieBody"),u=e("./pzaBaseBullet"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.init=function(a,t,o,n,i){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),e.prototype.init.call(this,a,t,o,n,i)},a.prototype.onCollision=function(e){if(null!=e&&e.node.group==r.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(c.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&(e.zombieData&&e.zombieData.hypnosis||e.buffData.hasBuff(l.pzaBuffType.DIVE)||e.buffData.hasBuff(l.pzaBuffType.FLY)||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||e.buffData.hasBuff(l.pzaBuffType.IMM_HYPNOSIS)||this.normalColliderZombie(e))},a.prototype.normalColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);if(a.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI)return a&&a.hurt(1800),this.close(),void this.playHitEffect(e);this.isCanHypnosis(e)?(p.pzaSoundManager.playAudio("floop"),p.pzaSoundManager.playAudio("mindcontrolled"),window.pzazombieManager.zombieHypnosis(a.baseData)):a&&a.hurt(1800),this.close(),this.playHitEffect(e)},a.prototype.isCanHypnosis=function(e){var a=!1,t=window.pzazombieManager.getZombie(e);return t.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE||t.baseData.zombieData.zombieType==s.pzaZombieEnum.LADDER_ZOMBIE||t.baseData.zombieData.zombieType==s.pzaZombieEnum.NEWSPAPER_ZOMBIE||t.baseData.zombieData.cate==s.pzaZombieCate.Gargantuar?t.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE||t.baseData.zombieData.zombieType==s.pzaZombieEnum.NEWSPAPER_ZOMBIE||t.baseData.zombieData.zombieType==s.pzaZombieEnum.LADDER_ZOMBIE?a=t.baseData.zombieData.equipHp<=0:t.baseData.zombieData.cate==s.pzaZombieCate.Gargantuar&&(a=t.baseData.zombieData.equipHp2<=0):a=!0,a},i([h],a)}(u.pzaBaseBullet));t.pzaCupidBullet=m,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","./pzaBaseBullet":"pzaBaseBullet"}],pzaDancingZombie:[function(e,a,t){"use strict";cc._RF.push(a,"20bc9UOvSlIXarlMuYUaqFr","pzaDancingZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDancingZombie=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaSoundManager"),c=e("../../Common/pzaUIManager"),u=e("../../Common/pzaWorldEventManager"),d=e("../../Load/pzaPreLoadManager"),h=e("../../View/Battle/pzaNewZombieView"),m=e("../../utils/pzakc"),f=e("../Data/pzaBaseData"),z=e("../Data/pzaBuffData"),y=e("../Data/pzaZombieEnum"),g=e("../pzaGameState"),v=e("./pzaBaseZombie"),b=e("./pzaZombieSlot"),P=e("./pzaZombieState"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.upLight=null,a.upLightFrame=[],a.downLight=null,a.downLightFrame=[],a.garlicSkinName=null,a.backState=!0,a.backTime=3.6,a.dacing=!1,a.summoning=!1,a.showLightState=0,a.lightInterval=0,a.dancingIdx=0,a.isFireType=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[b.pzaZombieSlotType.butter,new b.pzaZombieSlot(this.animation.spineAnimation,b.pzaZombieSlotType.butter).addState(new b.pzaZombieSlotAtt(1,b.pzaZombieSlotType.butter,-1.28,75.68))]])},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.node.scaleX=-1,this.upLight.node.active=!1,this.downLight.node.active=!1},a.prototype.preview=function(a,t,o){e.prototype.preview.call(this,a,t,o),this.node.scaleX=-o,this.upLight.node.active=!1,this.downLight.node.active=!1},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.backState=!0,this.backTime=3.6,this.dacing=!1,this.summoning=!1,null!=this.curShadow&&this.curShadow.changeOffset(cc.v2(-this.shadowOffset.x,this.shadowOffset.y)),this.showLightState=0,this.upLight.node.active=!1,this.downLight.node.active=!1,this.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.IMM_HYPNOSIS,-1)),this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.dancingIdx=++m.default.dancingZomIdx,m.default.dancingZomIdx>10&&(m.default.dancingZomIdx=1),s.pzaSoundManager.playLongAudio("dancer",this.dancingIdx)},a.prototype.logicUpdate=function(a){var t=this.lastBePasueControled?0:1;this.baseData.isDead?this.animation.changeAnimationTimeScale(1):this.animation.changeAnimationTimeScale(t),this.backTime-=a,this.refreshLight(a),e.prototype.logicUpdate.call(this,a)},a.prototype.updateMove=function(e){if(!this.dacing&&!this.isInButterState){this.zombieState!=P.pzaZombieState.MOVE&&this.playMoveAnimation();var a=this.baseData.zombieData.moveSpd,t=1;if(this.backState||(t+=this.baseData.zombieData.danceData.getSpeedBuff()),a*=t,this.hasStopZombie()&&(a=0),this.animation.changeAnimationTimeScale(t),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=e*a:this.baseData.logicPos.x-=e*a,this.baseData.zombieData.hypnosis&&this.baseData.logicPos.x>=640)this.death(!1);else{this.baseData.logicPos.x<(g.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome(),this.baseData.xIndex;var o=this.hypnosisState?this.bodyWidth:-this.bodyWidth,n=g.pzaGameState.map.getMapXIndex(this.baseData.logicPos,null,o),i=g.pzaGameState.map.getMapYIndex(this.baseData.logicPos,null);if(-1==n||-1==i||this.baseData.xIndex==n&&this.baseData.yIndex==i||this.onChangeIndex(n,i),this.baseData.xIndex=n,-1==this.changeTargetRow){var r=.1*g.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;g.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,r)}if(this.backState&&this.backTime<=0&&-1!=n&&this.changeBackState(),g.pzaGameState.newZombie==this.baseData.zombieData.zombieType){g.pzaGameState.gamePause=!0,u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.GAME_PAUSE,null);var p=this.node.convertToWorldSpaceAR(cc.v2());c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(e){var a=e&&e.getComponent(h.pzaNewZombieView);a&&a.showNewZombie(g.pzaGameState.newZombie,p),g.pzaGameState.showUnlockZombie()})}}}},a.prototype.attack=function(a,t){this.backState&&null!=t&&null!=t.plantData?this.changeBackState():this.summoning||(this.dacing&&(this.dacing=!1),e.prototype.attack.call(this,a,t))},a.prototype.changeBackState=function(){this.backState=!1,null!=this.curShadow&&this.curShadow.changeOffset(this.shadowOffset),this.summonZombie();var e=l.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=g.pzaGameState.map.getBlockWidth()/e},a.prototype.breakDirt=function(e){if(this.baseData&&this.node){this.backState=!1;var a=l.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=g.pzaGameState.map.getBlockWidth()/a,e&&e()}},a.prototype.summonZombie=function(){var e=this;this.dacing=!0,this.summoning=!0,this.zombieState=P.pzaZombieState.SPECIAL;var a=g.pzaGameState.map.getMapRow(),t=g.pzaGameState.map.getMapColumn(),o=0,n=function(){return!!e.baseData&&(--o<=0&&!e.baseData.isDead&&(e.dance(function(){e.changeLight(),e.baseData.buffData.removeBuff(z.pzaBuffType.IMM_HYPNOSIS)}),e.summoning=!1),!0)};this.showLight();var i=this.getSummonZombieTypes();this.animation.playAnimation("idle2",!1,function(){e.baseData.yIndex+1<a&&!window.pzaMapManager.isInWaterWay(e.baseData.yIndex+1)&&(o++,e.summonCreateZombie(0,n,i[0])),e.baseData.yIndex>0&&!window.pzaMapManager.isInWaterWay(e.baseData.yIndex-1)&&(o++,e.summonCreateZombie(1,n,i[1])),e.baseData.xIndex>0&&(o++,e.summonCreateZombie(2,n,i[2])),e.baseData.xIndex+1<t&&(o++,e.summonCreateZombie(3,n,i[3]))})},a.prototype.playMoveAnimation=function(){var e=this;this.zombieState=P.pzaZombieState.MOVE,-1==this.changeTargetRow?this.backState?this.animation.playAnimation("idle1",!0):this.baseData.zombieData.danceData.walkStep>=3&&!this.hasStopZombie()?this.dance():this.animation.playAnimation("idle6",!1,function(){e.baseData.zombieData.danceData.walkStep++,e.playMoveAnimation()}):this.animation.playAnimation("idle6",!0)},a.prototype.dance=function(e){var a=this;void 0===e&&(e=null),this.baseData.zombieData.danceData.walkStep=0,this.dacing=!0,this.zombieState=P.pzaZombieState.SPECIAL,this.animation.playAnimation("idle7",!1,function(){a.dacing=!1,a.suppleZombie(),e&&e()},null,.7);var t=this.baseData.zombieData.danceData.getOtherDatas();t&&t.forEach(function(e){var a=e.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(e):window.pzazombieManager.getZombie(e);a&&a.dance()})},a.prototype.getSummonZombieTypes=function(){return[y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER]},a.prototype.suppleZombie=function(){var e=this,a=!1,t=!1,o=!1,n=!1,i=this.baseData.zombieData.danceData,r=g.pzaGameState.map.getMapRow(),p=g.pzaGameState.map.getMapColumn();if(this.baseData.yIndex+1<r&&!window.pzaMapManager.isInWaterWay(this.baseData.yIndex+1)&&(a=!i.hasUpData()),this.baseData.yIndex>0&&!window.pzaMapManager.isInWaterWay(this.baseData.yIndex-1)&&(t=!i.hasDownData()),this.baseData.xIndex>0&&(o=!i.hasLeftData()),this.baseData.xIndex+1<p&&(n=!i.hasRightData()),a||t||o||n){this.summoning=!0,this.dacing=!0,this.zombieState=P.pzaZombieState.SPECIAL;var l=0,s=function(){e.baseData&&--l<=0&&!e.baseData.isDead&&(e.playMoveAnimation(),e.summoning=!1,e.dacing=!1)},c=this.getSummonZombieTypes();this.animation.playAnimation("idle2",!1,function(){a&&(l++,e.summonCreateZombie(0,s,c[0])),t&&(l++,e.summonCreateZombie(1,s,c[1])),o&&(l++,e.summonCreateZombie(2,s,c[2])),n&&(l++,e.summonCreateZombie(3,s,c[3]))})}else this.playMoveAnimation()},a.prototype.hasStopZombie=function(){if(!this.baseData||!this.baseData.zombieData)return!1;if(!this.baseData.zombieData.danceData)return!1;var e=this.baseData.zombieData.danceData.getOtherDatas();if(null==e)return!1;for(var a=0;a<e.length;a++){var t=e[a];if(t!=this.baseData&&t&&!t.isDead){if(t.isBeControlled())return!0;var o=t.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(t):window.pzazombieManager.getZombie(t);if(null==o)continue;var n=o;if(n.zombieState==P.pzaZombieState.EAT_ATK||n.zombieState==P.pzaZombieState.SPECIAL)return!0}}return!1},a.prototype.beHypnosis=function(){e.prototype.beHypnosis.call(this);var a=this.baseData.zombieData.danceData;this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.baseData.zombieData.danceData.walkStep=a.walkStep,a.mainData=null,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_27)},a.prototype.changeMapRow=function(){e.prototype.changeMapRow.call(this);var a=this.baseData.zombieData.danceData;this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.baseData.zombieData.danceData.walkStep=a.walkStep,a.mainData=null,this.dacing=!1},a.prototype.summonCreateZombie=function(e,a,t){var o=g.pzaGameState.map.getBlockWidth(),n=this.baseData.zombieData.danceData,i=null,r=this.baseData.zombieData.hypnosis;0==e?((i=window.pzazombieManager.createFixBlockZombieData(t,this.baseData.xIndex,this.baseData.yIndex+1,r)).logicPos.x=this.baseData.logicPos.x,i.zombieData.danceData=n,n.upData=i):1==e?((i=window.pzazombieManager.createFixBlockZombieData(t,this.baseData.xIndex,this.baseData.yIndex-1,r)).logicPos.x=this.baseData.logicPos.x,i.zombieData.danceData=n,n.downData=i):2==e?((i=window.pzazombieManager.createFixBlockZombieData(t,this.baseData.xIndex-1,this.baseData.yIndex,r)).logicPos.y=this.baseData.logicPos.y,i.logicPos.x=this.baseData.logicPos.x-o,i.zombieData.danceData=n,n.leftData=i):3==e&&((i=window.pzazombieManager.createFixBlockZombieData(t,this.baseData.xIndex+1,this.baseData.yIndex,r)).logicPos.y=this.baseData.logicPos.y,i.logicPos.x=this.baseData.logicPos.x+o,i.zombieData.danceData=n,n.rightData=i),null!=i&&(r?(i.zombieData.direction=1,window.pzazombieManager.createHypnZombie(i,a)):window.pzazombieManager.createZombie(i,!1,!0,!1,a,!1))},a.prototype.refreshLight=function(e){0!=this.showLightState&&(this.lightInterval-=e,this.lightInterval<=0&&this.changeLight())},a.prototype.showLight=function(){this.showLightState=1,this.lightInterval=10,this.upLight.node.active=!0,this.downLight.node.active=!0,this.upLight.spriteFrame=this.upLightFrame[0],this.downLight.spriteFrame=this.downLightFrame[0]},a.prototype.changeLight=function(){0!=this.showLightState&&(this.showLightState++,this.showLightState>=5&&(this.showLightState=1),this.lightInterval=1,this.upLight.spriteFrame=this.upLightFrame[this.showLightState-1],this.downLight.spriteFrame=this.downLightFrame[this.showLightState-1])},a.prototype.zombieScream=function(){},a.prototype.zombieHurt=function(){this.zombieHurtState=y.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.close=function(){e.prototype.close.call(this),s.pzaSoundManager.deleteLongAudio("dancer",this.dancingIdx)},i([S({displayName:"\u4e0a\u706f",type:cc.Sprite})],a.prototype,"upLight",void 0),i([S({displayName:"\u4e0a\u706f\u56fe",type:[cc.SpriteFrame]})],a.prototype,"upLightFrame",void 0),i([S({displayName:"\u4e0b\u706f",type:cc.Sprite})],a.prototype,"downLight",void 0),i([S({displayName:"\u4e0b\u706f\u56fe",type:[cc.SpriteFrame]})],a.prototype,"downLightFrame",void 0),i([E],a)}(v.pzaBaseZombie);t.pzaDancingZombie=_,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../../utils/pzakc":"pzakc","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDaveAdReward:[function(e,a,t){"use strict";cc._RF.push(a,"66b7et7MSpGj6rbaps6XSv5","pzaDaveAdReward");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDaveAdReward=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameManager"),l=e("../../Common/pzaGamePropConfig"),s=e("../../Common/pzaLocalData"),c=e("../../Common/pzaUIManager"),u=e("../../Common/pzaUtil"),d=e("../../Load/pzaPreLoadManager"),h=e("../../utils/pzaChannel"),m=e("../../utils/pzakc"),f=e("../pzaWarningView"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.propName=[],a.propDesc=[],a.adIcon=[],a.recieveIcon=[],a.recieveTxt=[],a.recieveBtn=[],a.skipPartNode=null,a.board=null,a.cherryNode=null,a.getRewardCount=0,a}return n(a,e),a.prototype.onEnable=function(){this.recieveBtn.forEach(function(e){e.interactable=!0}),this.adIcon.forEach(function(e){e.active=!0}),this.recieveTxt.forEach(function(e){e.string="\u9886\u53d6"}),this.recieveIcon.forEach(function(e){u.pzaUtil.switchGraySprite(e,!1)});for(var e=l.pzaGamePropEnum.PROP_CHERRY_BOMB;e<=l.pzaGamePropEnum.PROP_AUTO_PICK;e++){var a=l.pzaGamePropConfig.PorpConfigMap.get(e);null!=a&&(this.propName[e-1].string=a.propName,this.propDesc[e-1].string=a.propDesc)}var t=!1,o=h.pzaChannel.instance().getChannel();if(null!=o.ctrl&&"1"===o.ctrl.p4){if(r.pzaGameState.isMiniMode())return this.skipPartNode.active=!1,this.cherryNode.active=r.pzaGameState.curPart>=10,this.board.height=r.pzaGameState.curPart>=10?330:250,void(4==r.pzaGameState.curPart&&(this.cherryNode.active=!0,this.board.height=330));this.cherryNode.active=!0,t||r.pzaGameState.isSurvival()||r.pzaGameState.curChapter<s.pzaLocalData.data.curChapter||r.pzaGameState.curChapter==s.pzaLocalData.data.curChapter&&r.pzaGameState.curPart<s.pzaLocalData.data.curPart?(this.skipPartNode.active=!1,this.board.height=330):(this.skipPartNode.active=!0,this.board.height=410)}else t=!0},a.prototype.clickCherryBomb=function(){var e=this;h.pzaChannel.instance().showVideo({sucCall:function(){e.obtainProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB)},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u754c\u9762\u83b7\u53d6\u65e0\u53cc\u9f99"})},a.prototype.clickAutoPick=function(){var e=this;h.pzaChannel.instance().showVideo({sucCall:function(){e.obtainProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u754c\u9762\u83b7\u53d6\u81ea\u52a8\u62fe\u53d6"})},a.prototype.clickFreeSun=function(){var e=this;h.pzaChannel.instance().showVideo({sucCall:function(){e.obtainProp(l.pzaGamePropEnum.PROP_FREE_SUN)},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u754c\u9762\u83b7\u53d6\u989d\u5916\u80fd\u91cf"})},a.prototype.clickSkipPart=function(){h.pzaChannel.instance().showVideo({sucCall:function(){p.pzaGameManager.removeBattleUI(),window.pzazombieManager.skipPassPart();var e=5*(r.pzaGameState.curChapter-1)+r.pzaGameState.curPart;m.default.eventReport(e+"\u5173\u5361\u6210\u529f(\u51c6\u5907\u754c\u9762\u8df3\u8fc7)")},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u754c\u9762\u8df3\u5173"})},a.prototype.obtainProp=function(e){var a=this;if(this.recieveBtn[e-1].interactable=!1,this.adIcon[e-1].active=!1,this.recieveTxt[e-1].string="\u5df2\u9886",u.pzaUtil.switchGraySprite(this.recieveIcon[e-1],!0),s.pzaLocalData.obtainProp(e,1),this.getRewardCount++,!(this.getRewardCount>2)){var t=function(){h.pzaChannel.instance().showVideo({sucCall:function(){a.getOtherReward(e)},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u9875\u9762\u5168\u90e8\u83b7\u53d6"})},o="\u60a8\u5df2\u83b7\u5f97"+this.propName[e-1].string+",\u518d\u770b\u4e00\u4e2a\u5e7f\u544a\u989d\u5916\u89e3\u9501\u5176\u4ed6\u4e24\u4e2a\u529f\u80fd\uff0c\u662f\u5426\u7ee7\u7eed\u89c2\u770b\uff1f";c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(f.pzaWarningView);a&&a.show(o,"\u6211\u77e5\u9053\u4e86","\u5168\u90e8\u9886\u53d6",null,t,"\u662f\u5426\u83b7\u5f97\u5176\u4ed6\u5956\u52b1",!1,!1,1)})}},a.prototype.getOtherReward=function(e){for(var a=0;a<this.recieveBtn.length;a++)e-1!=a&&(this.recieveBtn[a].interactable=!1,this.adIcon[a].active=!1,this.recieveTxt[a].string="\u5df2\u9886",u.pzaUtil.switchGraySprite(this.recieveIcon[a],!0),s.pzaLocalData.obtainProp(a+1,1))},a.prototype.clickClose=function(){this.node.active=!1},i([g({displayName:"\u9053\u5177\u540d\u79f0",type:[cc.Label]})],a.prototype,"propName",void 0),i([g({displayName:"\u9053\u5177\u63cf\u8ff0",type:[cc.Label]})],a.prototype,"propDesc",void 0),i([g({displayName:"\u5e7f\u544a\u56fe\u6807",type:[cc.Node]})],a.prototype,"adIcon",void 0),i([g({displayName:"\u9886\u53d6\u6309\u94ae\u56fe",type:[cc.Sprite]})],a.prototype,"recieveIcon",void 0),i([g({displayName:"\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:[cc.Label]})],a.prototype,"recieveTxt",void 0),i([g({displayName:"\u9886\u53d6\u6309\u94ae",type:[cc.Button]})],a.prototype,"recieveBtn",void 0),i([g({displayName:"\u8df3\u5173\u8282\u70b9",type:cc.Node})],a.prototype,"skipPartNode",void 0),i([g({displayName:"\u9762\u677f",type:cc.Node})],a.prototype,"board",void 0),i([g({displayName:"\u6a31\u6843\u70b8\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"cherryNode",void 0),i([y],a)}(cc.Component);t.pzaDaveAdReward=v,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaWarningView":"pzaWarningView"}],pzaDaveTreasureView:[function(e,a,t){"use strict";cc._RF.push(a,"52932bAw+lI3Z1YxI198yHJ","pzaDaveTreasureView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDaveTreasureView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaLocalData"),s=e("../../Common/pzaUtil"),c=e("../../utils/pzaChannel"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.recAllBtn=null,a.recBtn=[],a.cdReduceLevel=null,a.cdReduceLevelFrames=[],a.cdReduceValue=null,a.sunReduceLevel=null,a.sunReduceLevelFrames=[],a.sunReduceValue=null,a.critAddLevel=null,a.critAddLevelFrames=[],a.critAddValue=null,a.cardBoards=[],a.boradFrames=[],a.recNodes=[],a.cdValues=[.15,.25,.35],a.sunValues=[.15,.25,.35],a.critValues=[.15,.25,.35],a.curCdLevel=0,a.curSunLevel=0,a.curCritLevel=0,a.closeCall=null,a}return n(a,e),a.prototype.init=function(e){this.closeCall=e,this.recAllBtn.active=!1,this.recBtn.forEach(function(e){e.active=!0}),this.recNodes.forEach(function(e){e.active=!1}),this.curCdLevel=s.pzaUtil.getRandomNum(0,2),this.curSunLevel=s.pzaUtil.getRandomNum(0,2),this.curCritLevel=s.pzaUtil.getRandomNum(0,2),this.cdReduceLevel.spriteFrame=this.cdReduceLevelFrames[this.curCdLevel],this.cdReduceValue.string="\u51b7\u5374\u65f6\u95f4-"+Math.round(100*this.cdValues[this.curCdLevel])+"%",this.cardBoards[0].spriteFrame=this.boradFrames[this.curCdLevel],this.sunReduceLevel.spriteFrame=this.sunReduceLevelFrames[this.curSunLevel],this.sunReduceValue.string="\u80fd\u91cf\u6d88\u8017-"+Math.round(100*this.sunValues[this.curSunLevel])+"%",this.cardBoards[1].spriteFrame=this.boradFrames[this.curSunLevel],this.critAddLevel.spriteFrame=this.critAddLevelFrames[this.curCritLevel],this.critAddValue.string="\u690d\u7269\u66b4\u51fb+"+Math.round(100*this.critValues[this.curCritLevel])+"%",this.cardBoards[2].spriteFrame=this.boradFrames[this.curCritLevel],r.pzaGameState.ableShowBuyGift=!1,this.refreshVideoIcon()},a.prototype.refreshVideoIcon=function(){this.recBtn.forEach(function(e){e.getChildByName("ad_icon").active=!l.pzaLocalData.data.isFreeDaveTre})},a.prototype.clickRecCdReduce=function(e){var a=this,t=function(){a.refreshVideoIcon(),a.recAllBtn.active=!0,a.recBtn.forEach(function(e){e.active=!1}),a.recNodes[0].active=!0,r.pzaGameState.cdReduceValue=a.cdValues[a.curCdLevel]};e.target.getChildByName("ad_icon").active?c.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u51b7\u5374\u65f6\u95f4\u51cf\u5c11"}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),t())},a.prototype.clickRecSunReduce=function(e){var a=this,t=function(){a.refreshVideoIcon(),a.recAllBtn.active=!0,a.recBtn.forEach(function(e){e.active=!1}),a.recNodes[1].active=!0,r.pzaGameState.sunReduceValue=a.sunValues[a.curSunLevel]};e.target.getChildByName("ad_icon").active?c.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u9633\u5149\u6d88\u8017\u51cf\u5c11"}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),t())},a.prototype.clickCritAdd=function(e){var a=this,t=function(){a.refreshVideoIcon(),a.recAllBtn.active=!0,a.recBtn.forEach(function(e){e.active=!1}),a.recNodes[2].active=!0,r.pzaGameState.critValue=a.critValues[a.curCritLevel]};e.target.getChildByName("ad_icon").active?c.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){}}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),t())},a.prototype.clickRecAll=function(e){var a=this,t=function(){r.pzaGameState.cdReduceValue=a.cdValues[a.curCdLevel],r.pzaGameState.sunReduceValue=a.sunValues[a.curSunLevel],r.pzaGameState.critValue=a.critValues[a.curCritLevel],a.close()};e.target.getChildByName("ad_icon").active?c.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){}}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),t())},a.prototype.clickClose=function(){this.close()},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node),this.closeCall&&this.closeCall()},i([h({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"recAllBtn",void 0),i([h({displayName:"\u9886\u53d6\u6309\u94ae",type:[cc.Node]})],a.prototype,"recBtn",void 0),i([h({displayName:"\u51b7\u5374\u65f6\u95f4\u7b49\u7ea7",type:cc.Sprite})],a.prototype,"cdReduceLevel",void 0),i([h({displayName:"\u51b7\u5374\u65f6\u95f4\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],a.prototype,"cdReduceLevelFrames",void 0),i([h({displayName:"\u51b7\u5374\u65f6\u95f4\u6570\u503c",type:cc.Label})],a.prototype,"cdReduceValue",void 0),i([h({displayName:"\u9633\u5149\u6d88\u8017\u7b49\u7ea7",type:cc.Sprite})],a.prototype,"sunReduceLevel",void 0),i([h({displayName:"\u9633\u5149\u6d88\u8017\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],a.prototype,"sunReduceLevelFrames",void 0),i([h({displayName:"\u9633\u5149\u6d88\u8017\u6570\u503c",type:cc.Label})],a.prototype,"sunReduceValue",void 0),i([h({displayName:"\u690d\u7269\u66b4\u51fb\u7b49\u7ea7",type:cc.Sprite})],a.prototype,"critAddLevel",void 0),i([h({displayName:"\u690d\u7269\u66b4\u51fb\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],a.prototype,"critAddLevelFrames",void 0),i([h({displayName:"\u690d\u7269\u66b4\u51fb\u6570\u503c",type:cc.Label})],a.prototype,"critAddValue",void 0),i([h({displayName:"\u5361\u7247\u6846",type:[cc.Sprite]})],a.prototype,"cardBoards",void 0),i([h({displayName:"\u5361\u7247\u6846\u56fe",type:[cc.SpriteFrame]})],a.prototype,"boradFrames",void 0),i([h({displayName:"\u5df2\u9886\u53d6",type:[cc.Node]})],a.prototype,"recNodes",void 0),i([d],a)}(cc.Component);t.pzaDaveTreasureView=m,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaUtil":"pzaUtil","../../utils/pzaChannel":"pzaChannel"}],pzaDayCd:[function(e,a,t){"use strict";cc._RF.push(a,"184e19j2uNDkpPY8ejG9M53","pzaDayCd");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r,p=e("../Common/pzaLocalData"),l=cc._decorator,s=l.ccclass,c=l.property;(function(e){e[e.null=0]="null",e[e.rideractivity=1]="rideractivity",e[e.beltactivity=2]="beltactivity",e[e.newplayertask=3]="newplayertask",e[e.loginactivity=4]="loginactivity"})(r||(r={}));var u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_daysCd=null,a.type=r.null,a.endTime=0,a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate());switch(e.type){case r.rideractivity:if(p.pzaLocalData.riderFallLeftDay<0)return void(e.lab_daysCd.string="\u6d3b\u52a8\u7ed3\u675f");e.endTime=new Date(t.getTime()+864e5*(p.pzaLocalData.riderFallLeftDay+1)).getTime();break;case r.beltactivity:e.endTime=p.pzaLocalData.data.loginActivity_EndTime;break;case r.newplayertask:e.endTime=p.pzaLocalData.data.newPlayerTask_EndTime;break;case r.loginactivity:e.endTime=p.pzaLocalData.data.loginActivity_EndTime}e.updateCountdown(),e.schedule(e.updateCountdown,30)},3)},a.prototype.updateCountdown=function(){var e;e=Date.now();var a=0;switch(this.type){case r.rideractivity:case r.beltactivity:case r.newplayertask:case r.loginactivity:a=this.endTime-e}if(a<=0||this.endTime<=0)this.lab_daysCd.string="";else{var t=Math.floor(a/6e4)%60,o=Math.floor(a/36e5)%24,n=Math.floor(a/864e5),i=String(o).padStart(2,"0"),p=String(t).padStart(2,"0");this.lab_daysCd.string=n+"\u5929"+i+":"+p}},i([c({displayName:"\u5012\u8ba1\u65f6label",type:cc.Label})],a.prototype,"lab_daysCd",void 0),i([c({type:cc.Enum(r),tooltip:"\u6d3b\u52a8\u7c7b\u578b"})],a.prototype,"type",void 0),i([s],a)}(cc.Component);t.default=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData"}],pzaDaySignConfig:[function(e,a,t){"use strict";cc._RF.push(a,"2062dWUqXhHDaeVfTtiTElm","pzaDaySignConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDaySignConfig=void 0;var o=e("./pzaGamePropConfig"),n=function(){function e(e,a,t,n,i){this.day=1,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex="",this.day=e,this.rewardType=a,this.rewardCount=t,this.recFun=n,this.iconIndex=i}return e.initPropConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var o=parseInt(a.iD),n=new e(o,parseInt(a.rewardType),parseInt(a.rewardValue),parseInt(a.aDClaim),a.icon);t.SignConfigMap.set(o,n)}})},e.SignConfigMap=new Map,e}();t.pzaDaySignConfig=n,cc._RF.pop()},{"./pzaGamePropConfig":"pzaGamePropConfig"}],pzaDaySignItem:[function(e,a,t){"use strict";cc._RF.push(a,"07009t8FXVPd5/j6Z3klToj","pzaDaySignItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDaySignItem=void 0;var r=e("../Common/pzaDaySignConfig"),p=e("../Common/pzaGameConfig"),l=e("../Common/pzaGamePropConfig"),s=e("../Common/pzaItemTips"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.recedNode=null,a.coinIcon=null,a.propImg=null,a.plantCardNode=null,a.plantIcon=null,a.propName=null,a.propCount=null,a}return n(a,e),a.prototype.init=function(e){this.recedNode.active=c.pzaLocalData.data.signDays>=e,this.propCount.node.active=!1;var a=r.pzaDaySignConfig.SignConfigMap.get(e);if(null!=a)switch(this.node.addComponent(s.default).bindData(a.rewardType,a.rewardCount),this.node.width=160,this.node.height=180,a.rewardType){case l.pzaGamePropEnum.PROP_COIN:this.propImg&&(this.propImg.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.propCount.node.active=!0,this.propCount.string="x"+a.rewardCount,this.propName.string="\u9a91\u58eb\u5e01",this.coinIcon&&(this.coinIcon.node.active=!0,u.pzaSpriteFrameManager.loadCommonImg(""+a.iconIndex,this.coinIcon));break;case l.pzaGamePropEnum.PROP_CHERRY_BOMB:case l.pzaGamePropEnum.PROP_AUTO_PICK:case l.pzaGamePropEnum.PROP_FREE_SUN:this.coinIcon&&(this.coinIcon.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.propCount.node.active=!0,this.propCount.string="x"+a.rewardCount,this.propImg&&(this.propImg.node.active=!0,u.pzaSpriteFrameManager.loadCommonImg(""+a.iconIndex,this.propImg));var t=l.pzaGamePropConfig.PorpConfigMap.get(a.rewardType);null!=t&&(this.propName.string=""+t.propName);break;case l.pzaGamePropEnum.PROP_PLANTE:this.coinIcon&&(this.coinIcon.node.active=!1),this.propImg&&(this.propImg.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!0);var o=p.pzaGameConfig.getPlantConfig(a.rewardCount);null!=o&&(this.propName.string=""+o.name,u.pzaSpriteFrameManager.loadPlantWholeCard(a.rewardCount+"",this.plantIcon))}},i([m({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],a.prototype,"recedNode",void 0),i([m({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],a.prototype,"coinIcon",void 0),i([m({displayName:"\u9053\u5177\u56fe\u7247",type:cc.Sprite})],a.prototype,"propImg",void 0),i([m({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],a.prototype,"plantCardNode",void 0),i([m({displayName:"\u690d\u7269\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"plantIcon",void 0),i([m({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],a.prototype,"propName",void 0),i([m({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"propCount",void 0),i([h],a)}(cc.Component);t.pzaDaySignItem=f,cc._RF.pop()},{"../Common/pzaDaySignConfig":"pzaDaySignConfig","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaDaySignView:[function(e,a,t){"use strict";cc._RF.push(a,"9f77dOqf6JEWLFQaxF7d/9e","pzaDaySignView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDaySignView=void 0;var r=e("../Battle/Data/pzaDropType"),p=e("../Common/pzaCommonPopView"),l=e("../Common/pzaDaySignConfig"),s=e("../Common/pzaGameCommonPool"),c=e("../Common/pzaGamePropConfig"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaRewardManager"),h=e("../Common/pzaSoundManager"),m=e("../Common/pzaStatisticsMgr"),f=e("../Common/pzaTipManager"),z=e("../Common/pzaUIManager"),y=e("../Load/pzaPreLoadManager"),g=e("../utils/pzaChannel"),v=e("../utils/pzakc"),b=e("./Battle/pzaNewPlantView"),P=e("./pzaDaySignItem"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.adRecBtn=null,a.recBtn=null,a.getAllBtn=null,a.adRecBtnTxt=null,a.items=[],a.testGetBtn=null,a.plantAdGet=!0,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.testGetBtn.active=g.pzaChannel.isConfRemote,this.init()},a.prototype.init=function(){this.getAllBtn.active=!1;for(var e=0;e<7;e++){var a=this.items[e];null!=a&&a.init(e+1)}if(u.pzaLocalData.data.signDays>=7)return this.adRecBtn.active=!1,void(this.recBtn.active=!1);var t;t=6==u.pzaLocalData.data.signDays&&u.pzaLocalData.data.hasSign?u.pzaLocalData.data.signDays:u.pzaLocalData.data.signDays+1;var o=l.pzaDaySignConfig.SignConfigMap.get(t);null!=o&&(0==o.recFun?(0==u.pzaLocalData.data.hasSign?(this.recBtn.active=!0,this.recBtn.x=157.5,this.adRecBtn.active=!1):0==u.pzaLocalData.data.hasDoubleSign?(this.adRecBtn.active=!0,this.adRecBtn.x=157.5,this.recBtn.active=!1,this.adRecBtnTxt.string="\u518d\u9886\u4e00\u6b21"):(this.adRecBtn.active=!1,this.recBtn.active=!1),this.plantAdGet=!1):(this.recBtn.active=!1,this.adRecBtn.active=!0,this.adRecBtn.x=157.5,this.adRecBtnTxt.string="\u7acb\u5373\u9886\u53d6",this.plantAdGet=!0),m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"1"},{name:"adname",value:"\u4e03\u65e5\u7b7e\u5230\u5e7f\u544a\u9886\u53d6"}),"noAD"!=g.pzaChannel.instance().channel||g.pzaChannel.isConfRemote||(this.adRecBtn.active=!1,this.recBtn.active=!1,this.getAllBtn.active=!0),m.pzaStatisticsMgr.sendEvent("System",{name:"system",value:7}))},a.prototype.clickClose=function(){h.pzaSoundManager.playSFX(),this.close()},a.prototype.clickRec=function(){var e=this;h.pzaSoundManager.playSFX();var a=l.pzaDaySignConfig.SignConfigMap.get(u.pzaLocalData.data.signDays+1);if(null!=a){u.pzaLocalData.data.signDays++,u.pzaLocalData.data.hasSign=!0,u.pzaLocalData.addDirty("signDays","hasSign"),u.pzaLocalData.data.signDays>=7&&(u.pzaLocalData.data.canMonthSign=!0,u.pzaLocalData.addDirty("canMonthSign"),v.default.sendMsg("unlockMonth"));var t=[new c.pzaRewardPropData(a.rewardType,a.rewardCount)];a.rewardType==c.pzaGamePropEnum.PROP_PLANTE?(d.pzaRewardManager.recieveRewards(t,function(){e.requestSubscribeMessage(u.pzaLocalData.data.signDays+1)},!1,null,!1),z.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.NEW_PLANT_VIEW,function(e){(e&&e.getComponent(b.pzaNewPlantView)).showView(r.pzaDropType.PLANT_CARD,a.rewardCount,!1)})):d.pzaRewardManager.recieveRewards(t,function(){e.requestSubscribeMessage(u.pzaLocalData.data.signDays+1)}),this.init()}},a.prototype.clickAdRec=function(){var e=this;h.pzaSoundManager.playSFX(),g.pzaChannel.instance().showVideo({sucCall:function(){var a;if(null!=(a=e.plantAdGet?l.pzaDaySignConfig.SignConfigMap.get(u.pzaLocalData.data.signDays+1):l.pzaDaySignConfig.SignConfigMap.get(u.pzaLocalData.data.signDays))){0!=a.recFun?(u.pzaLocalData.data.signDays++,u.pzaLocalData.data.hasSign=!0,u.pzaLocalData.data.hasDoubleSign=!0):u.pzaLocalData.data.hasDoubleSign=!0,u.pzaLocalData.addDirty("signDays","hasSign","hasDoubleSign"),u.pzaLocalData.data.signDays>=7&&(u.pzaLocalData.data.canMonthSign=!0,u.pzaLocalData.addDirty("canMonthSign"),v.default.sendMsg("unlockMonth"));var t=new c.pzaRewardPropData(a.rewardType,a.rewardCount);0==a.recFun&&(t.propCount=a.rewardCount),a.rewardType==c.pzaGamePropEnum.PROP_PLANTE?(d.pzaRewardManager.recieveRewards([t],function(){e.requestSubscribeMessage(u.pzaLocalData.data.signDays+1)},!1,null,!1),z.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.NEW_PLANT_VIEW,function(e){(e&&e.getComponent(b.pzaNewPlantView)).showView(r.pzaDropType.PLANT_CARD,a.rewardCount,!1)})):d.pzaRewardManager.recieveRewards([t],function(){e.requestSubscribeMessage(u.pzaLocalData.data.signDays+1)}),e.init()}},failCall:function(){},endCall:function(){},posName:"\u4e03\u65e5\u7b7e\u5230\u5e7f\u544a\u9886\u53d6",adsid:"1"})},a.prototype.requestSubscribeMessage=function(){},a.prototype.getAll=function(){if("noAD"==g.pzaChannel.instance().channel&&!g.pzaChannel.isConfRemote){for(var e=0;e<7;e++){var a=l.pzaDaySignConfig.SignConfigMap.get(e+1);if(null==a)return;var t=[new c.pzaRewardPropData(a.rewardType,a.rewardCount)];d.pzaRewardManager.recieveRewardData(t)}u.pzaLocalData.data.canMonthSign=!0,u.pzaLocalData.addDirty("canMonthSign"),v.default.sendMsg("unlockMonth"),f.pzaTipManager.showHomeTip("\u7b7e\u5230\u9886\u53d6\u6210\u529f!",null,2),this.close()}},a.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},i([S({displayName:"\u5e7f\u544a\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"adRecBtn",void 0),i([S({displayName:"\u666e\u901a\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"recBtn",void 0),i([S({displayName:"\u4e00\u952e\u7b7e\u5230\u6309\u94ae",type:cc.Node})],a.prototype,"getAllBtn",void 0),i([S({displayName:"\u5e7f\u544a\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:cc.Label})],a.prototype,"adRecBtnTxt",void 0),i([S({displayName:"\u7b7e\u5230items",type:[P.pzaDaySignItem]})],a.prototype,"items",void 0),i([S({type:cc.Node})],a.prototype,"testGetBtn",void 0),i([E],a)}(p.default);t.pzaDaySignView=_,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaDaySignConfig":"pzaDaySignConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./Battle/pzaNewPlantView":"pzaNewPlantView","./pzaDaySignItem":"pzaDaySignItem"}],pzaDemoBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"7cf41o7G2FIhaW9RK2xNwo6","pzaDemoBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDemoCannonBullet=t.pzaDemoTrackBullet=t.pzaDemoStarFruitBullet=t.pzaDemoThrowullet=t.pzaDemoHorBullet=t.pzaDemoBaseBullet=void 0;var p=e("../../Common/pzaSpriteFrameManager"),l=e("../../Common/pzaUtil"),s=e("../../Load/pzaPreLoadManager"),c=e("../Data/pzaPlantEnum"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaDemoBaseComp"),m=e("./pzaDemoConf"),f=e("./pzaDemoMgr"),z=cc._decorator,y=z.ccclass,g=(z.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.checkZombie=!0,a.dirction=cc.v2(1,0),a}return n(a,e),a.prototype.init=function(e,a,t,o){var n=this;void 0===a&&(a=cc.v2()),void 0===t&&(t=cc.v2()),this.dirction=o||cc.v2(1,0),this.node.parent=d.pzaGameState.demoScene,this.node.setPosition(a),this.targetPos=t,this.plantType=e;var i=this.node.getChildByName("sp");i?(this.bulletSP=i.getComponent(cc.Sprite),this.bulletSP.node.scale=1,p.pzaSpriteFrameManager.loadSpriteFrame(m.pzaDemoConf.getBulletSpfPath(e),function(e){n.bulletSP.spriteFrame=e,e&&"catapult_bullet"==e.name&&(n.bulletSP.node.scale=.6),n.onLoadFin()})):this.onLoadFin()},a.prototype.isCheckZombie=function(e){this.checkZombie=e},a.prototype.findTargetZombie=function(){var e,a;try{for(var t=r(f.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;if(n)return n}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.onLoadFin=function(){},a.prototype.playAction=function(){},a.prototype.attack=function(){},a.prototype.showHitEffect=function(){var e=m.pzaDemoConf.getBulletHitPrefabPath(this.plantType);e&&u.pzaEffectManager.createDemoEffect(e,this.node.getPosition())},i([y],a)}(h.pzaDemoBaseComp));t.pzaDemoBaseBullet=g;var v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.yForce=0,a}return n(a,e),a.prototype.setYForce=function(e){this.yForce=e},a.prototype.attack=function(){var e,a;if(f.pzaDemoMgr.zombieArr)try{for(var t=r(f.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;n.dirctionX<0&&this.checkRectContains(n.node)&&(n.hurt(),this.showHitEffect(),this.close(),this.plantType!=c.pzaPlantEnum.SNOW_PEA&&this.plantType!=c.pzaPlantEnum.Gene_SnowPea||n.onFrostState())}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.checkRectContains=function(e){var a=new cc.Rect(this.node.x,this.node.y,this.node.width,this.node.height);return new cc.Rect(e.x,e.y,e.width,e.height).intersects(a)},a.prototype.demoUpdate=function(e){this.yForce>0?(this.node.y+=250*e,this.yForce-=250*e,this.yForce<=10&&(this.yForce=0)):this.yForce<0&&(this.node.y-=250*e,this.yForce+=250*e,this.yForce>=10&&(this.yForce=0)),this.node.x+=350*e*this.dirction.x,this.attack(),this.node.x>=1200&&this.close()},a}(g);t.pzaDemoHorBullet=v;var b=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onLoadFin=function(){this.playAction()},a.prototype.attack=function(){var e,a,t,o;if(this.plantType!=c.pzaPlantEnum.WALL_NUT&&this.plantType!=c.pzaPlantEnum.TALL_NUT&&this.plantType!=c.pzaPlantEnum.PUMPKIN&&this.plantType!=c.pzaPlantEnum.UMBRELLA_LEAF){if(f.pzaDemoMgr.zombieArr)try{for(var n=r(f.pzaDemoMgr.zombieArr),i=n.next();!i.done;i=n.next()){var p=i.value;p.hurt(),this.plantType==c.pzaPlantEnum.WINTER_MELON&&p.onFrostState()}}catch(d){t={error:d}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}}else if(f.pzaDemoMgr.plantArr)try{for(var l=r(f.pzaDemoMgr.plantArr),s=l.next();!s.done;s=l.next()){var u=s.value;u&&u.hurt(this.node)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(e)throw e.error}}},a.prototype.playAction=function(){var e=this,a=this.node.getPosition(),t=this.targetPos,o=a.x+Math.abs(t.x-a.x)/2;this.plantType!=c.pzaPlantEnum.WALL_NUT&&this.plantType!=c.pzaPlantEnum.TALL_NUT&&this.plantType!=c.pzaPlantEnum.PUMPKIN&&this.plantType!=c.pzaPlantEnum.UMBRELLA_LEAF||(o=a.x-Math.abs(t.x-a.x)/2);var n=.7,i=a.y+200,r=0;this.plantType==c.pzaPlantEnum.Phoenix&&(r=140,i+=100,n=.5),this.node.runAction(cc.sequence(cc.spawn(cc.bezierTo(n,[a,cc.v2(o,i),t]),cc.rotateBy(n,r).easing(cc.easeInOut(1))),cc.callFunc(function(){e.attack(),e.close(),e.showHitEffect()})))},a}(g);t.pzaDemoThrowullet=b;var P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.liveTime=5,a.direction=cc.v2(),a}return n(a,e),a.prototype.init=function(a,t,o){e.prototype.init.call(this,a,t,o),this.direction=o},a.prototype.attack=function(){var e,a;if(f.pzaDemoMgr.zombieArr)try{for(var t=r(f.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;this.checkRectContains(n.node)&&(n.hurt(),this.showHitEffect(),this.close())}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.checkRectContains=function(e){var a=new cc.Rect(this.node.x,this.node.y,this.node.width,this.node.height);return new cc.Rect(e.x,e.y,e.width,e.height).intersects(a)},a.prototype.demoUpdate=function(e){this.liveTime-=e,this.liveTime<=0&&this.close(),this.node.x+=350*this.direction.x*e,this.node.y+=350*this.direction.y*e,this.attack()},a}(g);t.pzaDemoStarFruitBullet=P;var C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.moveDirection=cc.v2(1,0),a.angelSpeed=250,a}return n(a,e),a.prototype.attack=function(){var e,a;if(f.pzaDemoMgr.zombieArr)try{for(var t=r(f.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;this.checkRectContains(n.node)&&(n.hurt(),this.showHitEffect(),this.close())}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.checkRectContains=function(e){var a=new cc.Rect(this.node.x,this.node.y,this.node.width,this.node.height);return new cc.Rect(e.x,e.y,e.width,e.height).intersects(a)},a.prototype.directionMove=function(e,a){if(a){var t=a.node.getPosition().add(cc.v2(0,a.node.height/2)).sub(this.node.getPosition()).normalizeSelf(),o=l.pzaUtil.getVectorsRadion(t,this.moveDirection)*(180/Math.PI);if(Math.abs(o)<=1)return this.node.x+=350*e*this.moveDirection.x,void(this.node.y+=350*e*this.moveDirection.y);var n=o>=0?-this.angelSpeed*e:this.angelSpeed*e,i=l.pzaUtil.rotateAngle(this.moveDirection,n);this.moveDirection=i.normalizeSelf(),this.node.angle=l.pzaUtil.getVectorsRadion(this.moveDirection,cc.v2(1,0))*(180/Math.PI),this.node.x+=350*e*this.moveDirection.x,this.node.y+=350*e*this.moveDirection.y}else this.close()},a.prototype.demoUpdate=function(e){var a=this.findTargetZombie();this.directionMove(e,a),this.attack()},a}(g);t.pzaDemoTrackBullet=C;var E=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onLoadFin=function(){var e=this;this.node.y+=500,this.node.runAction(cc.sequence(cc.moveBy(.7,0,-500),cc.callFunc(function(){f.pzaDemoMgr.createBoomBlock(3,0,!1),f.pzaDemoMgr.createBoomBlock(3,1,!1),f.pzaDemoMgr.createBoomBlock(3,2,!1),f.pzaDemoMgr.createBoomBlock(4,0,!1),f.pzaDemoMgr.createBoomBlock(4,1,!1),f.pzaDemoMgr.createBoomBlock(4,2,!1),f.pzaDemoMgr.createBoomBlock(5,0,!1),f.pzaDemoMgr.createBoomBlock(5,1,!1),f.pzaDemoMgr.createBoomBlock(5,2,!1),u.pzaEffectManager.createDemoEffect(s.pzaResourceUrl.COB_BOOM_EFFECT,e.node.getPosition()),e.close()})))},a}(g);t.pzaDemoCannonBullet=E,cc._RF.pop()},{"../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaDemoBaseComp":"pzaDemoBaseComp","./pzaDemoConf":"pzaDemoConf","./pzaDemoMgr":"pzaDemoMgr"}],pzaDemoBaseComp:[function(e,a,t){"use strict";cc._RF.push(a,"eb6abHwMHRITIyk/vRzMzHK","pzaDemoBaseComp");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDemoBaseComp=void 0;var r=cc._decorator,p=r.ccclass,l=(r.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.update=function(e){this.demoUpdate(e)},a.prototype.demoUpdate=function(){},a.prototype.close=function(){this.node.destroy()},i([p],a)}(cc.Component));t.pzaDemoBaseComp=l,cc._RF.pop()},{}],pzaDemoBasePlant:[function(e,a,t){"use strict";cc._RF.push(a,"d8bc4XTV7JJaZkvGKFFVb0t","pzaDemoBasePlant");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDemoCactusLogic=t.pzaDemoAttackLogic=t.pzaDemoIdleLogic=t.pzaDemoDefenseLogic=t.pzaDemoBombLogic=t.pzaDemoSunFlowerLogic=t.pzaDemoPultLogic=t.pzaDemoShooterLogic=t.pzaDemoBasePlant=void 0;var p=e("../../../start/pzaBundleController"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaNameConf"),c=e("../../Common/pzaSpineController"),u=e("../../Load/pzaBundleObjectPool"),d=e("../../Load/pzaPreLoadManager"),h=e("../../utils/pzaResMgr"),m=e("../Data/pzaPlantEnum"),f=e("../Data/pzaZombieEnum"),z=e("../pzaEffectManager"),y=e("../pzaGameState"),g=e("./pzaDemoBaseBullet"),v=e("./pzaDemoBaseComp"),b=e("./pzaDemoBaseZombie"),P=e("./pzaDemoConf"),C=e("./pzaDemoMgr"),E=cc._decorator,S=E.ccclass,_=(E.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.frozenEffect=null,a.isDead=!1,a}return n(a,e),a.prototype.init=function(e){var a=this;C.pzaDemoMgr.addPlant(this),this.plantConf=l.pzaGameConfig.getPlantConfig(e),this.spine=this.node.addComponent(c.pzaSpineController),this.spine.spineAnimation=this.node.addComponent(sp.Skeleton),this.spine.spineAnimation.premultipliedAlpha=!1;var t="Plant/"+(e>=10?"":"0")+e+"_plant";"Plant/30_plant"==t&&(t="Plant/30plant"),h.pzaResMgr.instance().getSpineSync(t,function(e,t){e?console.error(e):a.node&&a.node.isValid&&(a.spine.spineAnimation.skeletonData=t,a.onSpineLoadFin())})},a.prototype.findTargetZombie=function(){var e,a;try{for(var t=r(C.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;if(n)return n}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.createBulletPrefab=function(e){var a=this,t=P.pzaDemoConf.getBulletPrefabPath(this.plantConf.plantType);u.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(t,o){null==t&&null!=o?a.node&&a.node.isValid?(o.addComponent(v.pzaDemoBaseComp),e&&e(o)):o.destroy():console.error(t)})},a.prototype.preloadBulletPrefab=function(){var e=P.pzaDemoConf.getBulletPrefabPath(this.plantConf.plantType);p.pzaBundleController.loadBundle(p.pzaBundleType.Game,function(a){null!=a?a.load(e,cc.Prefab,function(){},function(e,a){null==e&&null!=a||console.error("preLoadPrefab error===>",e)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.prototype.onSpineLoadFin=function(){this.spine.playAnimation(s.pzaPlantSkName.COMMON.idle,!0)},a.prototype.hurt=function(){},a.prototype.onFrozen=function(){var e=this;this.frozenEffect||(C.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoFrozenEffect",function(a){e.node&&e.node.isValid&&(e.frozenEffect=a.getComponent(c.pzaSpineController),e.frozenEffect.node.parent=e.node.parent,e.frozenEffect.node.setPosition(e.node.position),e.frozenEffect.spineAnimation.node.active=!1)}),this.spine&&(this.spine.spineAnimation.node.color=cc.color(55,149,255),this.spine.pauseAnimation()))},a.prototype.unFrozen=function(){var e=this;this.frozenEffect&&(this.frozenEffect.spineAnimation.node.active=!0,this.frozenEffect.playAnimation("blow1",!1,function(){e.frozenEffect.getComponent(v.pzaDemoBaseComp).close(),e.frozenEffect=null}),this.spine&&(this.spine.spineAnimation.node.color=cc.color(255,255,255),this.spine.resumeAnimation()))},a.prototype.death=function(){this.isDead=!0,z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.VALUE_EFFECT,cc.v2(this.node.x,this.node.y),"2"),this.node.runAction(cc.sequence(cc.fadeTo(.5,0),cc.delayTime(3),cc.callFunc(function(){C.pzaDemoMgr.restartScene()}))).clone()},a.prototype.close=function(){e.prototype.close.call(this),C.pzaDemoMgr.deletePlant(this)},i([S],a)}(v.pzaDemoBaseComp));t.pzaDemoBasePlant=_;var D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hiding=!1,a.splitShootIndex=0,a.hp=3,a}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this;this.spiltPeaAniLogic()||(this.plantConf.plantType==m.pzaPlantEnum.CATTAIL&&C.pzaDemoMgr.createPlantSpine(m.pzaPlantEnum.LILY_PAD,function(a){a.playAnimation(s.pzaPlantSkName.LILY_PAD.idle,!0),a.node.parent=e.node.parent,a.node.zIndex--,a.node.setPosition(e.node.x,e.node.y-25)}),this.spine.playAnimation(s.pzaPlantSkName.COMMON.attack,!0,function(){e.splitShootIndex=0},function(){if(!e.isDead)if(e.plantConf.plantType!=m.pzaPlantEnum.FUME_SHROOM)if(e.plantConf.plantType!=m.pzaPlantEnum.GLOOM_SHROOM)if(e.plantConf.plantType!=m.pzaPlantEnum.STAR_FRUIT)if(e.plantConf.plantType!=m.pzaPlantEnum.CATTAIL){if(e.plantConf.plantType==m.pzaPlantEnum.SCAREDY_SHROOM){var a=e.findTargetZombie();a&&a.runMoveLogic()}e.shoot()}else e.cattailShoot();else e.starFruitShoot();else e.showGloomShroomHitEff();else e.showFumeShroomHitEff()}))},a.prototype.spiltPeaAniLogic=function(){var e=this;return this.plantConf.plantType==m.pzaPlantEnum.SPLIT_PEA&&(this.spine.playAnimation(s.pzaPlantSkName.SPLIT_PEA.twoAttack,!0,function(){e.splitShootIndex=0},function(){0==e.splitShootIndex&&e.shoot(1),e.splitShootIndex++,e.shoot(-1,cc.v2(-75,0))}),!0)},a.prototype.demoUpdate=function(){var e=this;if(this.plantConf&&this.plantConf.plantType==m.pzaPlantEnum.SCAREDY_SHROOM&&0==this.hiding){var a=this.findTargetZombie();a&&Math.abs(this.node.x-a.node.x)<=1.5*y.pzaGameState.demo_blockWidth&&(this.hiding=!0,this.spine.playAnimation(s.pzaPlantSkName.SCAREDY_SHROOM.scaredy_start,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.SCAREDY_SHROOM.scaredy_idle,!0,function(){e.node.runAction(cc.sequence(cc.delayTime(4.5),cc.callFunc(function(){C.pzaDemoMgr.restartScene()})))})}))}},a.prototype.showFumeShroomHitEff=function(){var e=this.findTargetZombie();e&&(this.node.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){e.hurt()}))),z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.FUME_SHROOM_EFFECT,this.node.getPosition().add(cc.v2(this.node.width/2,0))))},a.prototype.showGloomShroomHitEff=function(){var e,a;try{for(var t=r(C.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;n&&n.hurt()}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.GLOOM_SHROOM_EFFECT,this.node.getPosition().add(cc.v2(0,this.node.height/3)))},a.prototype.shoot=function(e,a){var t=this;void 0===e&&(e=1),void 0===a&&(a=cc.v2());var o=this.findTargetZombie();o&&(this.createBulletPrefab(function(n){n.addComponent(g.pzaDemoHorBullet).init(t.plantConf.plantType,cc.v2(t.node.x+50+a.x,t.node.y+50+a.y),cc.v2(o.node.x,t.node.y+50),cc.v2(e,0))}),this.plantConf.plantType==m.pzaPlantEnum.THREE_PEATER&&(this.createBulletPrefab(function(n){var i=n.addComponent(g.pzaDemoHorBullet);i.init(t.plantConf.plantType,cc.v2(t.node.x+50+a.x,t.node.y+50+a.y),cc.v2(o.node.x,t.node.y+50),cc.v2(e,0)),i.setYForce(130),i.isCheckZombie(!1)}),this.createBulletPrefab(function(n){var i=n.addComponent(g.pzaDemoHorBullet);i.init(t.plantConf.plantType,cc.v2(t.node.x+50+a.x,t.node.y+50+a.y),cc.v2(o.node.x,t.node.y+50),cc.v2(e,0)),i.setYForce(-130),i.isCheckZombie(!1)})))},a.prototype.cattailShoot=function(){var e=this,a=this.findTargetZombie();a&&this.createBulletPrefab(function(t){t.addComponent(g.pzaDemoTrackBullet).init(e.plantConf.plantType,cc.v2(e.node.x+50,e.node.y+50),cc.v2(a.node.x,e.node.y+50))})},a.prototype.starFruitShoot=function(){var e=this,a=[cc.v2(-1,0),cc.v2(0,1),cc.v2(Math.sqrt(3)/2,.5),cc.v2(Math.sqrt(3)/2,-.5),cc.v2(0,-1)],t=[180,-90,-40,45,90];a.forEach(function(a,o){e.createBulletPrefab(function(n){n.width=50,n.height=50;var i=n.addComponent(g.pzaDemoStarFruitBullet);i.init(e.plantConf.plantType,cc.v2(e.node.x+50,e.node.y+50),a),i.node.setRotation(t[o])})})},a.prototype.hurt=function(){this.node&&this.hp>0&&(this.hp--,this.hp<=0&&this.plantConf.plantType==m.pzaPlantEnum.Gene_SnowPea&&(z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.ICE_BOOM_EFFECT,cc.v2(this.node.x,this.node.y),"blow2"),this.findTargetZombie().onFrozen(),this.death()))},a}(_);t.pzaDemoShooterLogic=D;var M=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.kernelPultIndex=0,a}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this;this.spine.playAnimation(s.pzaPlantSkName.COMMON.attack,!0,function(){},function(){e.plantConf.plantType!=m.pzaPlantEnum.KERNEL_PULT?e.shoot():e.showKernelHitEff()})},a.prototype.showKernelHitEff=function(){var e=this.findTargetZombie();e&&(this.kernelPultIndex>=2&&(e.onButterCtrl(),this.kernelPultIndex=0),e.hurt(),z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.KERNELHIT_EFFECT,e.node.getPosition()),this.kernelPultIndex++)},a.prototype.shoot=function(){var e=this,a=this.findTargetZombie();if(a){var t=cc.v2(50,50);this.plantConf.plantType==m.pzaPlantEnum.CABBAGE_PULT&&(t=cc.v2(60,100)),this.createBulletPrefab(function(o){o.addComponent(g.pzaDemoThrowullet).init(e.plantConf.plantType,cc.v2(e.node.x+t.x,e.node.y+t.y),cc.v2(a.node.x,e.node.y+50))})}},a}(_);t.pzaDemoPultLogic=M;var w=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.aniIndex=0,a}return n(a,e),a.prototype.onSpineLoadFin=function(){this.plantConf.plantType==m.pzaPlantEnum.TWIN_SUNFLOWER&&(this.spine.spineAnimation.premultipliedAlpha=!0),this.playAni()},a.prototype.playAni=function(){var e,a,t=this;if(this.aniIndex%3==0)return e=1,a=s.pzaPlantSkName.SUN_FLOWER.sunLight,t.plantConf.plantType==m.pzaPlantEnum.TWIN_SUNFLOWER?(e=2,a=s.pzaPlantSkName.TWIN_SUNFLOWER.sunLight):t.plantConf.plantType==m.pzaPlantEnum.MARIGOLD&&(a=s.pzaPlantSkName.MARIGOLD.createCoin),t.spine.playAnimation(a,!1,function(){t.playAni()},function(){for(var a=0;a<e;a++)t.plantConf.plantType==m.pzaPlantEnum.MARIGOLD?t.createCoin():t.createSunLight()}),void this.aniIndex++;this.spine.playAnimation(s.pzaPlantSkName.COMMON.idle,!1,this.playAni.bind(this)),this.aniIndex++},a.prototype.createCoin=function(){var e=this,a=cc.v2(this.node.x+100*Math.random()-50,this.node.y+50*Math.random()-25);C.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoCoin",function(t){if(e.node&&e.node.isValid){var o=cc.sequence(cc.jumpTo(.5,a.x,a.y,50,1),cc.delayTime(5),cc.fadeTo(.5,0),cc.callFunc(function(){t.destroy()}));t.setPosition(e.node.getPosition()),t.runAction(o.clone())}})},a.prototype.createSunLight=function(){var e=this,a=cc.v2(this.node.x+100*Math.random()-50,this.node.y+50*Math.random()-25);C.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoSun",function(t){if(e.node&&e.node.isValid){var o=cc.sequence(cc.jumpTo(.5,a.x,a.y,50,1),cc.delayTime(2),cc.fadeTo(.5,0),cc.callFunc(function(){t.destroy()}));t.setPosition(e.node.getPosition()),t.runAction(o.clone())}})},a}(_);t.pzaDemoSunFlowerLogic=w;var T=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.index=0,a}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this,a="blow";if(this.plantConf.plantType==m.pzaPlantEnum.CHERRY_BOMB)a=s.pzaPlantSkName.CHERRY_BOMB.blow;else if(this.plantConf.plantType==m.pzaPlantEnum.DOOM_SHROOM)a=s.pzaPlantSkName.DOOM_SHROOM.blow;else if(this.plantConf.plantType==m.pzaPlantEnum.JALAPENO)a=s.pzaPlantSkName.JALAPENO.blow;else if(this.plantConf.plantType==m.pzaPlantEnum.BLOVER)return a=s.pzaPlantSkName.BLOVER.attack,void this.spine.playAnimation(a,!1,function(){var a,t;e.spine.playAnimation(s.pzaPlantSkName.BLOVER.attack2,!0,function(){e.index++,e.index>3&&(C.pzaDemoMgr.checkRestartScene(),e.close())});try{for(var o=r(C.pzaDemoMgr.zombieArr),n=o.next();!n.done;n=o.next()){var i=n.value.getComponent(b.pzaDemoFlyZombieLogic);i&&i.beenBlowWind()}}catch(p){a={error:p}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}});this.spine.playAnimation(a,!1,function(){e.close()},function(){if(e.plantConf.plantType==m.pzaPlantEnum.CHERRY_BOMB)C.pzaDemoMgr.createBoomBlock(1,0,!1),C.pzaDemoMgr.createBoomBlock(1,1,!1),C.pzaDemoMgr.createBoomBlock(1,2,!1),C.pzaDemoMgr.createBoomBlock(2,0,!1),C.pzaDemoMgr.createBoomBlock(2,1,!1),C.pzaDemoMgr.createBoomBlock(2,2,!1),C.pzaDemoMgr.createBoomBlock(3,0,!1),C.pzaDemoMgr.createBoomBlock(3,1,!1),C.pzaDemoMgr.createBoomBlock(3,2,!1);else if(e.plantConf.plantType==m.pzaPlantEnum.DOOM_SHROOM){for(var a=0;a<5;a++)for(var t=0;t<3;t++)C.pzaDemoMgr.createBoomBlock(a,t,!1);var o=e.node.position;C.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoDoomHoleEffect",function(a){e.node&&e.node.isValid&&a.setPosition(o)})}else if(e.plantConf.plantType==m.pzaPlantEnum.JALAPENO){C.pzaDemoMgr.createBoomBlock(0,1,!1),C.pzaDemoMgr.createBoomBlock(1,1,!1),C.pzaDemoMgr.createBoomBlock(2,1,!1),C.pzaDemoMgr.createBoomBlock(3,1,!1),C.pzaDemoMgr.createBoomBlock(4,1,!1),C.pzaDemoMgr.createBoomBlock(5,1,!1),C.pzaDemoMgr.createBoomBlock(6,1,!1);var n=e.node.position;z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.VALUE_EFFECT,cc.v2(n.x,n.y),"2",function(e){e.zIndex++})}e.boom()})},a.prototype.boom=function(){var e=this.findTargetZombie();e&&e.ashesDeath(),this.plantConf.plantType==m.pzaPlantEnum.DOOM_SHROOM?z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.DOOM_BOOM_EFFECT,this.node.getPosition()):this.plantConf.plantType==m.pzaPlantEnum.JALAPENO&&z.pzaEffectManager.createDemoEffect("resources/Demo/Effect/DemoJalapenoBoomEffect",y.pzaGameState.getDemoLogicPos(0,1))},a}(_);t.pzaDemoBombLogic=T;var A=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=s.pzaPlantSkName.COMMON.idle,a="default";this.plantConf.plantType==m.pzaPlantEnum.WALL_NUT?(e=s.pzaPlantSkName.WALL_NUT.idle,a=s.pzaPlantSkName.WALL_NUT.SKIN.intact):this.plantConf.plantType==m.pzaPlantEnum.TALL_NUT?(e=s.pzaPlantSkName.TALL_NUT.idle,a=s.pzaPlantSkName.TALL_NUT.SKIN.intact):this.plantConf.plantType==m.pzaPlantEnum.PUMPKIN&&(e=s.pzaPlantSkName.PUMPKIN.idle,a=s.pzaPlantSkName.PUMPKIN.SKIN.intact,this.createBackPumpkin()),this.spine.setAnimationSkin(a),this.spine.playAnimation(e,!0)},a.prototype.createBackPumpkin=function(){var e=this;this.node.zIndex++;var a=new cc.Node("backPumpkin");a.zIndex--,this.backPumpkin=a.addComponent(c.pzaSpineController),this.backPumpkin.spineAnimation=a.addComponent(sp.Skeleton),this.backPumpkin.spineAnimation.premultipliedAlpha=!1;var t="Plant/"+(this.plantConf.plantType>=10?"":"0")+this.plantConf.plantType+"_plant";h.pzaResMgr.instance().getSpineSync(t,function(a,t){a?console.error(a):(e.backPumpkin.spineAnimation.skeletonData=t,e.backPumpkin.setAnimationSkin(s.pzaPlantSkName.PUMPKIN.BACK_SKIN.intact),e.backPumpkin.playAnimation(s.pzaPlantSkName.PUMPKIN.idle,!0))}),a.parent=this.node.parent,a.setPosition(this.node.getPosition())},a.prototype.hurt=function(){var e,a,t=this;this.node&&(this.plantConf.plantType==m.pzaPlantEnum.WALL_NUT?(a=s.pzaPlantSkName.WALL_NUT.idle,e=s.pzaPlantSkName.WALL_NUT.hurt,this.spine.playAnimation(e,!1,function(){t.spine.playAnimation(a,!0)})):this.plantConf.plantType==m.pzaPlantEnum.TALL_NUT&&(a=s.pzaPlantSkName.TALL_NUT.idle,e=s.pzaPlantSkName.TALL_NUT.idle,this.spine.playAnimation(e,!1,function(){t.spine.playAnimation(a,!0)})))},a.prototype.close=function(){e.prototype.close.call(this),this.backPumpkin&&this.backPumpkin.node.destroy()},a}(_);t.pzaDemoDefenseLogic=A;var B=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.disableUpdate=!1,a.attackInterval=1,a.readyTime=3,a}return n(a,e),a.prototype.setFlowerPotTarget=function(e){this.flowerPotTarget=e},a.prototype.onSpineLoadFin=function(){var e=this;this.playAni();var a=this.node.position;if(this.plantConf.plantType==m.pzaPlantEnum.POTATO_MINE){this.spine.playAnimation(s.pzaPlantSkName.POTATO_MINE.breakGround,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.POTATO_MINE.ready_idle,!0)});var t=this.findTargetZombie();t&&t.runMoveLogic()}else this.plantConf.plantType==m.pzaPlantEnum.FLOWER_POT?(this.node.opacity=0,this.node.zIndex--,C.pzaDemoMgr.createPortalDoorEffect(cc.v2(a).add(cc.v2(20,-15)),function(){e.node.runAction(cc.sequence(cc.delayTime(.5),cc.fadeTo(.5,255),cc.callFunc(function(){e.flowerPotTarget.unFrozen()}),cc.delayTime(3),cc.callFunc(function(){C.pzaDemoMgr.restartScene()}))).clone()})):this.plantConf.plantType==m.pzaPlantEnum.SPIKEWEED||this.plantConf.plantType==m.pzaPlantEnum.SPIKEROCK?this.node.y-=10:this.plantConf.plantType==m.pzaPlantEnum.COB_CANNON?(this.node.x-=60,this.spine.playAnimation(s.pzaPlantSkName.COB_CANNON.reLoadingIdle,!0),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.spine.playAnimation(s.pzaPlantSkName.COB_CANNON.loadingComplete,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.COB_CANNON.normalIdle,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.COB_CANNON.sendAttack,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.COB_CANNON.reLoadingIdle,!0),e.createBulletPrefab(function(a){var t=y.pzaGameState.getDemoLogicPos(4,1);a.addComponent(g.pzaDemoCannonBullet).init(e.plantConf.plantType,t)})})})})}),cc.delayTime(5),cc.callFunc(function(){C.pzaDemoMgr.restartScene()})))):this.plantConf.plantType==m.pzaPlantEnum.LILY_PAD&&(z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.VALUE_EFFECT,cc.v2(a.x,a.y),"1",function(e){e.zIndex++}),C.pzaDemoMgr.createPortalDoorEffect(cc.v2(a).add(cc.v2(20,0)),function(){C.pzaDemoMgr.createPlantSpine(m.pzaPlantEnum.PEA_SHOOTER,function(a){a.playAnimation(s.pzaPlantSkName.COMMON.idle,!0),a.node.parent=e.node.parent,a.node.setPosition(e.node.x,e.node.y+25),a.node.opacity=0,a.node.runAction(cc.sequence(cc.fadeTo(.5,255),cc.delayTime(3),cc.callFunc(function(){C.pzaDemoMgr.restartScene()}))).clone()})}));if(this.plantConf.plantType==m.pzaPlantEnum.PLANTERN){var o;this.node.opacity=0,this.spine.spineAnimation.premultipliedAlpha=!0;var n=this.node.position;C.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoFogEffect",function(a){e.node&&e.node.isValid&&(o=a,a.setPosition(360,n.y),z.pzaEffectManager.createDemoEffect(d.pzaResourceUrl.VALUE_EFFECT,cc.v2(n.x,n.y),"1",function(e){e.zIndex++}),C.pzaDemoMgr.createPortalDoorEffect(cc.v2(n).add(cc.v2(20,-15)),function(){e.node.runAction(cc.sequence(cc.fadeTo(.5,255),cc.callFunc(function(){o&&o.runAction(cc.sequence(cc.fadeTo(.5,0),cc.delayTime(2),cc.callFunc(function(){C.pzaDemoMgr.restartScene()}))),C.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoPlanternEffect",function(a){e.node&&e.node.isValid&&(a.setPosition(e.node.position),a.zIndex++)})})))}))})}},a.prototype.demoUpdate=function(e){if(!this.disableUpdate)if(this.plantConf.plantType==m.pzaPlantEnum.POTATO_MINE)(a=this.findTargetZombie())&&a.node.x<=this.node.x+this.node.width/2+20&&this.potatoAttack(a);else if(this.plantConf.plantType==m.pzaPlantEnum.SPIKEWEED||this.plantConf.plantType==m.pzaPlantEnum.SPIKEROCK){var a;this.attackInterval-=e,this.attackInterval<=0&&(this.attackInterval=1,(a=this.findTargetZombie())&&this.spikeAttack(a))}},a.prototype.potatoAttack=function(e){var a=this;this.disableUpdate=!0,C.pzaDemoMgr.createBoomBlock(2,1,!1),this.spine.playAnimation(s.pzaPlantSkName.POTATO_MINE.blow,!1,function(){a.close()},function(){e.ashesDeath()})},a.prototype.spikeAttack=function(e){e.hurt()},a.prototype.playAni=function(){this.spine.playAnimation(s.pzaPlantSkName.COMMON.idle,!0)},a.prototype.hurt=function(e){var a=this;if(this.node&&this.plantConf.plantType==m.pzaPlantEnum.UMBRELLA_LEAF){if(!e)return;var t=e.getChildByName("sp");if(t){var o=t.getComponent(cc.Sprite).spriteFrame,n=cc.v2(this.node.x,this.node.y).add(cc.v2(20,50));z.pzaEffectManager.createRicochetBulletEffect(n,o,this.node.parent)}this.spine.playAnimation(s.pzaPlantSkName.UMBRELLA_LEAF.attack,!1,function(){a.spine.playAnimation(s.pzaPlantSkName.UMBRELLA_LEAF.idle,!0)})}},a}(_);t.pzaDemoIdleLogic=B;var G=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gabyIndex=0,a.phoenixIndex=0,a}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this;if(this.plantConf.plantType!=m.pzaPlantEnum.GABY){if(this.plantConf.plantType==m.pzaPlantEnum.Phoenix){this.preloadBulletPrefab(),this.node.zIndex++;var a=function(){0!=e.phoenixIndex&&e.phoenixIndex%3==0?e.spine.playAnimation(s.pzaPlantSkName.Phoenix.speAttack,!1,a,function(){e.phoenixSpeAtk()}):e.spine.playAnimation(s.pzaPlantSkName.COMMON.attack,!1,a,function(){var a=e.findTargetZombie();a&&a.hurt()}),e.phoenixIndex++};a()}}else this.spine.playAnimation(s.pzaPlantSkName.COMMON.idle,!0,function(){e.gabyIndex++,3==e.gabyIndex?C.pzaDemoMgr.createDemoZombie(e.node.parent,cc.v2(e.node.x,e.node.y),function(a){a.addComponent(b.pzaDemoCreamZombieLogic).init(e.plantConf.plantType,f.pzaZombieEnum.Cream_Normal)}):12==e.gabyIndex?C.pzaDemoMgr.createDemoZombie(e.node.parent,cc.v2(e.node.x,e.node.y),function(a){a.addComponent(b.pzaDemoCreamZombieLogic).init(e.plantConf.plantType,f.pzaZombieEnum.Cream_Pea)}):18==e.gabyIndex&&C.pzaDemoMgr.restartScene()})},a.prototype.phoenixSpeAtk=function(){var e=this,a=this.findTargetZombie();if(a){var t=cc.v2(45,80);this.createBulletPrefab(function(o){o.scale=.9,o.zIndex++,o.addComponent(g.pzaDemoThrowullet).init(e.plantConf.plantType,cc.v2(e.node.x+t.x,e.node.y+t.y),cc.v2(a.node.x,e.node.y+50))})}},a}(_);t.pzaDemoAttackLogic=G;var I=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.restartIndex=2,a}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this;this.spine.playAnimation(s.pzaPlantSkName.CACTUS.attack_top,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.CACTUS.idle,!1,function(){e.spine.playAnimation(s.pzaPlantSkName.CACTUS.attack,!0,function(){e.restartIndex--,e.restartIndex<0&&C.pzaDemoMgr.restartScene()},function(){e.shoot()})})},function(){e.shoot(!0)})},a.prototype.shoot=function(e){var a=this;void 0===e&&(e=!1);var t=this.findTargetZombie();if(t){var o=e?75:0;this.createBulletPrefab(function(e){e.addComponent(g.pzaDemoHorBullet).init(a.plantConf.plantType,cc.v2(a.node.x+50,a.node.y+50+o),cc.v2(t.node.x,a.node.y+50))})}},a}(_);t.pzaDemoCactusLogic=I,cc._RF.pop()},{"../../../start/pzaBundleController":void 0,"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaResMgr":"pzaResMgr","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaDemoBaseBullet":"pzaDemoBaseBullet","./pzaDemoBaseComp":"pzaDemoBaseComp","./pzaDemoBaseZombie":"pzaDemoBaseZombie","./pzaDemoConf":"pzaDemoConf","./pzaDemoMgr":"pzaDemoMgr"}],pzaDemoBaseZombie:[function(e,a,t){"use strict";cc._RF.push(a,"25c4dK3jTBOwa+HrHWpOp5o","pzaDemoBaseZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDemoBalloonZombieLogic=t.pzaDemoCreamZombieLogic=t.pzaDemoNormalAtkZombieLogic=t.pzaDemoJumpZombieLogic=t.pzaDemoThrowAtkZombieLogic=t.pzaDemoFlyZombieLogic=t.pzaDemoNormalZombieLogic=t.pzaDemoBaseZombie=void 0;var p,l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaNameConf"),c=e("../../Common/pzaSpineController"),u=e("../../Load/pzaBundleObjectPool"),d=e("../../utils/pzaFrameAnim"),h=e("../../utils/pzaResMgr"),m=e("../Data/pzaPlantEnum"),f=e("../Data/pzaZombieEnum"),z=e("../pzaSpineTool"),y=e("../Zombie/pzaZombieSlot"),g=e("./pzaDemoBaseBullet"),v=e("./pzaDemoBaseComp"),b=e("./pzaDemoConf"),P=e("./pzaDemoMgr"),C=cc._decorator,E=C.ccclass;C.property,function(e){e[e.idle=0]="idle",e[e.move=1]="move",e[e.attacking=2]="attacking"}(p||(p={}));var S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.myState=p.idle,a.dirctionX=-1,a.butterEffect=null,a.butterEffectTime=3,a.frozenEffect=null,a}return n(a,e),a.prototype.init=function(e,a){var t=this;this.myState=p.idle,P.pzaDemoMgr.addZombie(this),this.zombieConf=l.pzaGameConfig.getZombieConfig(a);var o=this.node.getChildByName("water");o&&(this.water=o.getComponent(d.default),this.water.node.active=!1);var n=this.node.getChildByName("mask");n.getComponent(cc.Mask).enabled=!1;var i=new cc.Node("spine");i.parent=n,this.spine=this.node.addComponent(c.pzaSpineController),this.spine.spineAnimation=i.addComponent(sp.Skeleton),window.pzazombieManager&&window.pzazombieManager.baseSpineMaterial&&this.spine.setActiveFlash(window.pzazombieManager.baseSpineMaterial);var r=b.pzaDemoConf.loadZombiePathMap.get(a);if(!r)return console.warn(a+" \u6ca1\u6709\u5bf9\u5e94\u7684\u52a0\u8f7d\u8def\u5f84");h.pzaResMgr.instance().getSpineSync(r,function(a,o){a?console.error(a):(t.spine.spineAnimation.skeletonData=o,t.onSpineLoadFin(e),t.loadSpineSlot())})},a.prototype.loadSpineSlot=function(){this.zombieConf&&this.zombieConf.zombieType==f.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&z.pzaSpineTool.instance().setSlotAtt(this.spine.spineAnimation,y.pzaZombieSlotType.door,y.pzaZombieSlotType.door+"1",.4,-11.81)},a.prototype.runIdleLogic=function(){this.myState=p.idle,this.spine.playAnimation(s.pzaZombieSkName.COMMON.idle,!0)},a.prototype.runMoveLogic=function(){this.myState=p.move,this.spine.playAnimation(s.pzaZombieSkName.COMMON.move,!0)},a.prototype.showWaterEff=function(){this.water&&(this.water.node.active=!0,this.water.play(),this.node.getChildByName("mask").getComponent(cc.Mask).enabled=!0)},a.prototype.onFrostState=function(){this.spine.spineAnimation.node.color=cc.Color.fromHEX(cc.color(),"#3B95FF"),this.spine.spineAnimation.timeScale=.5},a.prototype.demoUpdate=function(e){this.butterEffectTime>0&&this.butterEffect&&(this.butterEffectTime-=e,this.butterEffectTime<=0&&this.unButterCtrl()),this.water&&this.water.updateFrame(e),this.spine&&this.spine.spineAnimation&&this.spine.flashUpdate(e),this.moveUpdate(e)},a.prototype.moveUpdate=function(e){this.myState==p.move&&(this.node.x+=20*e*this.dirctionX)},a.prototype.hurt=function(){this.node&&this.spine&&this.spine.spineAnimation&&this.spine.flash()},a.prototype.normalDeath=function(){var e=this;this.spine.playAnimation(s.pzaZombieSkName.COMMON.death,!1,function(){e.close(),P.pzaDemoMgr.checkRestartScene()})},a.prototype.ashesDeath=function(){var e=this;this.spine.playAnimation(s.pzaZombieSkName.COMMON.blow,!1,function(){e.close(),P.pzaDemoMgr.checkRestartScene()})},a.prototype.flashDeath=function(){this.close(),P.pzaDemoMgr.checkRestartScene()},a.prototype.findTargetPlant=function(){var e,a;try{for(var t=r(P.pzaDemoMgr.plantArr),o=t.next();!o.done;o=t.next()){var n=o.value,i=[m.pzaPlantEnum.POTATO_MINE];if(n&&n.node&&i.indexOf(n.plantConf.plantType)>=0==0)return n}}catch(p){e={error:p}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.findTargetZombie=function(){var e,a;try{for(var t=r(P.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;if(n&&n.node.x!=this.node.x&&n.dirctionX>0)return n}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.createBulletPrefab=function(e,a){var t=this,o=b.pzaDemoConf.getBulletPrefabPath(e);u.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(e,o){null==e&&null!=o?t.node?(o.addComponent(v.pzaDemoBaseComp),a&&a(o)):o.destroy():console.error(e)})},a.prototype.onSpineLoadFin=function(){},a.prototype.onButterCtrl=function(){var e=this;this.butterEffectTime=3,this.butterEffect||(P.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoButterEffect",function(a){e.butterEffect=a.getComponent(c.pzaSpineController),e.butterEffect.node.parent=e.node.parent,e.butterEffect.node.setPosition(e.node.position.add(cc.v3(0,120,0))),e.butterEffect.playAnimation("idle",!0)}),this.spine&&this.spine.pauseAnimation())},a.prototype.unButterCtrl=function(){this.butterEffect&&(this.butterEffect.getComponent(v.pzaDemoBaseComp).close(),this.butterEffect=null),this.spine&&this.spine.resumeAnimation()},a.prototype.onFrozen=function(){var e=this;this.frozenEffect||(P.pzaDemoMgr.createDemoPrefab("resources/Demo/Effect/DemoFrozenEffect",function(a){e.frozenEffect=a.getComponent(c.pzaSpineController),e.frozenEffect.node.parent=e.node.parent,e.frozenEffect.node.setPosition(e.node.position),e.frozenEffect.spineAnimation.node.active=!1}),this.spine&&(this.spine.spineAnimation.node.color=cc.color(55,149,255),this.spine.pauseAnimation()))},a.prototype.unFrozen=function(){var e=this;this.frozenEffect&&(this.frozenEffect.spineAnimation.node.active=!0,this.frozenEffect.playAnimation("blow1",!1,function(){e.frozenEffect.getComponent(v.pzaDemoBaseComp).close(),e.frozenEffect=null}),this.spine&&(this.spine.spineAnimation.node.color=cc.color(255,255,255),this.spine.resumeAnimation()))},a.prototype.close=function(){e.prototype.close.call(this),P.pzaDemoMgr.deleteZombie(this)},i([E],a)}(v.pzaDemoBaseComp);t.pzaDemoBaseZombie=S;var _=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.attacking=!1,a}return n(a,e),a.prototype.onSpineLoadFin=function(e){e==m.pzaPlantEnum.POTATO_MINE?this.node.x+=20:e!=m.pzaPlantEnum.SPIKEWEED&&e!=m.pzaPlantEnum.SPIKEROCK||(this.node.x+=15);var a=[m.pzaPlantEnum.WALL_NUT,m.pzaPlantEnum.TALL_NUT,m.pzaPlantEnum.PUMPKIN];this.spine.setAnimationSkin(s.pzaZombieSkName.COMMON.SKIN.intact),a.indexOf(e)>=0?this.spine.playAnimation(s.pzaZombieSkName.COMMON.attack,!0):[m.pzaPlantEnum.POTATO_MINE,m.pzaPlantEnum.SCAREDY_SHROOM,m.pzaPlantEnum.GABY].indexOf(e)>=0?this.runMoveLogic():this.spine.playAnimation(s.pzaZombieSkName.COMMON.idle,!0)},a.prototype.demoUpdate=function(a){if(e.prototype.demoUpdate.call(this,a),this.myState==p.move){var t=this.findTargetPlant();t&&Math.abs(this.node.x-t.node.x)<=100&&(this.myState=p.attacking,this.attack(t));var o=this.findTargetZombie();o&&Math.abs(this.node.x-o.node.x)<=100&&(this.myState=p.attacking,this.attack(o))}},a.prototype.attack=function(e){this.spine.playAnimation(s.pzaZombieSkName.COMMON.attack,!0,null,function(){e.hurt()})},a}(S);t.pzaDemoNormalZombieLogic=_;var D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.flyState=!0,a.restartTime=7,a.hasBeenBlowWind=!1,a}return n(a,e),a.prototype.onSpineLoadFin=function(){this.spine.setAnimationSkin(s.pzaZombieSkName.COMMON.SKIN.intact),this.spine.playAnimation(s.pzaZombieSkName.BALLOON_ZOMBIE.flyIdle,!0),this.node.height=200},a.prototype.beenBlowWind=function(){var e=this;this.hasBeenBlowWind||(this.hasBeenBlowWind=!0,this.node.runAction(cc.sequence(cc.moveBy(.5,cc.v2(500,0)),cc.callFunc(function(){e.flashDeath()}))))},a.prototype.hurt=function(){var a=this;this.node&&(this.flyState?(this.flyState=!1,this.spine.playAnimation(s.pzaZombieSkName.BALLOON_ZOMBIE.drop,!1,function(){a.restartTime=3,a.runMoveLogic(),a.spine.playAnimation(s.pzaZombieSkName.BALLOON_ZOMBIE.walkMove,!0)})):e.prototype.hurt.call(this))},a.prototype.demoUpdate=function(a){e.prototype.demoUpdate.call(this,a),this.flyState||this.restartTime>0&&(this.restartTime-=a,this.restartTime<=0&&P.pzaDemoMgr.restartScene())},a}(S);t.pzaDemoFlyZombieLogic=D;var M=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onSpineLoadFin=function(e){var a=this;this.plantSceneType=e,this.spine.setAnimationSkin(s.pzaZombieSkName.COMMON.SKIN.intact);var t=function(){a.spine.playAnimation(s.pzaZombieSkName.COMMON.idle,!1,function(){a.spine.playAnimation(s.pzaZombieSkName.COMMON.attack,!1,t,function(){a.shoot()})})};t()},a.prototype.shoot=function(){var e=this,a=this.findTargetPlant();if(a){var t=cc.v2(-50,50);this.createBulletPrefab(this.plantSceneType,function(o){o.addComponent(g.pzaDemoThrowullet).init(e.plantSceneType,cc.v2(e.node.x+t.x,e.node.y+t.y),cc.v2(a.node.x,e.node.y+50))})}},a}(S);t.pzaDemoThrowAtkZombieLogic=M;var w=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.attacking=!1,a.restartTime=3,a}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this;this.spine.setAnimationSkin(s.pzaZombieSkName.COMMON.SKIN.intact),this.spine.playAnimation(s.pzaZombieSkName.POGO_ZOMBIE.jump,!1,function(){e.attacking=!0,e.restartTime=3,e.spine.playAnimation(s.pzaZombieSkName.COMMON.attack,!0)},function(){})},a.prototype.demoUpdate=function(e){this.attacking&&this.restartTime>0&&(this.restartTime-=e,this.restartTime<=0&&P.pzaDemoMgr.restartScene())},a}(S);t.pzaDemoJumpZombieLogic=w;var T=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onSpineLoadFin=function(){var e=this;this.spine.setAnimationSkin(s.pzaZombieSkName.COMMON.SKIN.intact),this.spine.playAnimation(s.pzaZombieSkName.COMMON.attack,!0,null,function(){var a=e.findTargetPlant();a&&a.hurt()})},a}(S);t.pzaDemoNormalAtkZombieLogic=T;var A=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onSpineLoadFin=function(e){var a=this;this.dirctionX=1,this.zombieConf.zombieType==f.pzaZombieEnum.Cream_Normal?(this.runMoveLogic(),this.spine.playAnimation(s.pzaZombieSkName.COMMON.move,!0)):this.zombieConf.zombieType==f.pzaZombieEnum.Cream_Pea&&(this.runMoveLogic(),this.spine.playAnimation(s.pzaZombieSkName.Cream_Pea.moveAtk,!0,function(){},function(){var t,o;try{for(var n=r(P.pzaDemoMgr.zombieArr),i=n.next();!i.done;i=n.next()){var p=i.value;if(p&&p.node){a.shoot(e,p.node);break}}}catch(l){t={error:l}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}}))},a.prototype.findTargetZombie=function(){var e,a;try{for(var t=r(P.pzaDemoMgr.zombieArr),o=t.next();!o.done;o=t.next()){var n=o.value;if(n&&n.node.x!=this.node.x&&n.dirctionX<0)return n}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.shoot=function(e,a){var t=this;this.createBulletPrefab(e,function(o){o.addComponent(g.pzaDemoHorBullet).init(e,cc.v2(t.node.x+50,t.node.y+50),cc.v2(a.x,t.node.y+50))})},a.prototype.demoUpdate=function(a){if(e.prototype.demoUpdate.call(this,a),this.zombieConf.zombieType==f.pzaZombieEnum.Cream_Normal&&this.myState==p.move){var t=this.findTargetZombie();if(!t)return;Math.abs(this.node.x-t.node.x)<=100&&(this.myState=p.attacking,this.attack(t))}},a.prototype.attack=function(e){this.spine.playAnimation(s.pzaZombieSkName.COMMON.attack,!0,null,function(){e.hurt()})},a}(S);t.pzaDemoCreamZombieLogic=A;var B=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.flying=!0,a.droping=!1,a.restartSceneTime=2.5,a}return n(a,e),a.prototype.onSpineLoadFin=function(){this.water&&(this.water.node.active=!1),this.spine.setAnimationSkin(s.pzaZombieSkName.COMMON.SKIN.intact),this.spine.playAnimation(s.pzaZombieSkName.BALLOON_ZOMBIE.flyIdle,!0),this.spine.spineAnimation.useTint=!0,this.node.y-=15},a.prototype.hurt=function(){var a=this;if(this.node&&!this.droping)return this.flying?(this.droping=!0,void this.spine.playAnimation(s.pzaZombieSkName.BALLOON_ZOMBIE.drop,!1,function(){a.droping=!1,a.flying=!1,a.showWaterEff(),a.runMoveLogic(),a.spine.playAnimation(s.pzaZombieSkName.BALLOON_ZOMBIE.walkMove,!0)})):void e.prototype.hurt.call(this)},a.prototype.demoUpdate=function(a){e.prototype.demoUpdate.call(this,a),!1===this.flying&&this.restartSceneTime>0&&(this.restartSceneTime-=a,this.restartSceneTime<=0&&P.pzaDemoMgr.restartScene())},a}(S);t.pzaDemoBalloonZombieLogic=B,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../utils/pzaFrameAnim":"pzaFrameAnim","../../utils/pzaResMgr":"pzaResMgr","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieSlot":"pzaZombieSlot","../pzaSpineTool":"pzaSpineTool","./pzaDemoBaseBullet":"pzaDemoBaseBullet","./pzaDemoBaseComp":"pzaDemoBaseComp","./pzaDemoConf":"pzaDemoConf","./pzaDemoMgr":"pzaDemoMgr"}],pzaDemoConf:[function(e,a,t){"use strict";cc._RF.push(a,"36760CtCk9ASLzYlerSrKb8","pzaDemoConf");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDemoConf=void 0;var n=e("../Data/pzaPlantEnum"),i=e("../Data/pzaZombieEnum"),r=e("./pzaDemoBasePlant"),p=e("./pzaDemoBaseZombie"),l=cc._decorator,s=l.ccclass,c=(l.property,function(){function e(){}return e.addPlantLogicComp=function(e,a){switch(a){case n.pzaPlantEnum.PEA_SHOOTER:case n.pzaPlantEnum.REPEATER:case n.pzaPlantEnum.GATLING_PEA:case n.pzaPlantEnum.THREE_PEATER:case n.pzaPlantEnum.SPLIT_PEA:case n.pzaPlantEnum.SNOW_PEA:case n.pzaPlantEnum.Gene_SnowPea:case n.pzaPlantEnum.SCAREDY_SHROOM:case n.pzaPlantEnum.SEA_SHROOM:case n.pzaPlantEnum.PUFF_SHROOM:case n.pzaPlantEnum.FIGHTKING:case n.pzaPlantEnum.FUME_SHROOM:case n.pzaPlantEnum.GLOOM_SHROOM:case n.pzaPlantEnum.STAR_FRUIT:case n.pzaPlantEnum.CATTAIL:e.addComponent(r.pzaDemoShooterLogic).init(a);break;case n.pzaPlantEnum.CABBAGE_PULT:case n.pzaPlantEnum.KERNEL_PULT:case n.pzaPlantEnum.MELON_PULT:case n.pzaPlantEnum.WINTER_MELON:e.addComponent(r.pzaDemoPultLogic).init(a);break;case n.pzaPlantEnum.SUN_FLOWER:case n.pzaPlantEnum.TWIN_SUNFLOWER:case n.pzaPlantEnum.MARIGOLD:e.addComponent(r.pzaDemoSunFlowerLogic).init(a);break;case n.pzaPlantEnum.CHERRY_BOMB:case n.pzaPlantEnum.DOOM_SHROOM:case n.pzaPlantEnum.JALAPENO:case n.pzaPlantEnum.BLOVER:e.addComponent(r.pzaDemoBombLogic).init(a);break;case n.pzaPlantEnum.WALL_NUT:case n.pzaPlantEnum.TALL_NUT:case n.pzaPlantEnum.PUMPKIN:e.addComponent(r.pzaDemoDefenseLogic).init(a);break;case n.pzaPlantEnum.FLOWER_POT:case n.pzaPlantEnum.LILY_PAD:case n.pzaPlantEnum.POTATO_MINE:case n.pzaPlantEnum.SPIKEROCK:case n.pzaPlantEnum.SPIKEWEED:case n.pzaPlantEnum.COB_CANNON:case n.pzaPlantEnum.UMBRELLA_LEAF:case n.pzaPlantEnum.PLANTERN:e.addComponent(r.pzaDemoIdleLogic).init(a);break;case n.pzaPlantEnum.GABY:case n.pzaPlantEnum.Phoenix:e.addComponent(r.pzaDemoAttackLogic).init(a);break;case n.pzaPlantEnum.CACTUS:e.addComponent(r.pzaDemoCactusLogic).init(a)}},e.addZombieLogicComp=function(e,a){switch(a){case n.pzaPlantEnum.Gene_SnowPea:var t=e.addComponent(p.pzaDemoNormalAtkZombieLogic);return t.init(a,i.pzaZombieEnum.ZOMBIE),t;case n.pzaPlantEnum.CACTUS:var o=e.addComponent(p.pzaDemoFlyZombieLogic);return o.init(a,i.pzaZombieEnum.BALLOON_ZOMBIE),o;case n.pzaPlantEnum.WALL_NUT:case n.pzaPlantEnum.TALL_NUT:case n.pzaPlantEnum.PUMPKIN:case n.pzaPlantEnum.UMBRELLA_LEAF:var r=e.addComponent(p.pzaDemoThrowAtkZombieLogic);return r.init(a,i.pzaZombieEnum.CATAPULT_ZOMBIE),r;case n.pzaPlantEnum.CATTAIL:var l=e.addComponent(p.pzaDemoBalloonZombieLogic);return l.init(a,i.pzaZombieEnum.BALLOON_ZOMBIE),l;default:var s=e.addComponent(p.pzaDemoNormalZombieLogic),c=i.pzaZombieEnum.ZOMBIE;return a==n.pzaPlantEnum.FUME_SHROOM&&(c=i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE),s.init(a,c),s}},e.getBulletSpfPath=function(e){switch(e){case n.pzaPlantEnum.PEA_SHOOTER:case n.pzaPlantEnum.REPEATER:case n.pzaPlantEnum.GATLING_PEA:case n.pzaPlantEnum.THREE_PEATER:case n.pzaPlantEnum.SPLIT_PEA:return"resources/Texture/BulletEffect/pea_bullet";case n.pzaPlantEnum.CABBAGE_PULT:return"resources/Texture/BulletEffect/cabbage_bullet";case n.pzaPlantEnum.MELON_PULT:return"resources/Texture/BulletEffect/melon_bullet";case n.pzaPlantEnum.WINTER_MELON:return"resources/Texture/BulletEffect/iceMelon_bullet";case n.pzaPlantEnum.SNOW_PEA:case n.pzaPlantEnum.Gene_SnowPea:return"resources/Texture/BulletEffect/snow_bullet";case n.pzaPlantEnum.STAR_FRUIT:return"resources/Texture/BulletEffect/star_bullet";case n.pzaPlantEnum.SEA_SHROOM:return"resources/Texture/BulletEffect/sea_bullet";case n.pzaPlantEnum.CACTUS:return"resources/Texture/BulletEffect/cactus_bullet";case n.pzaPlantEnum.SCAREDY_SHROOM:return"resources/Texture/BulletEffect/scaredy_shroom";case n.pzaPlantEnum.CATTAIL:return"resources/Texture/BulletEffect/cattail_bullet";case n.pzaPlantEnum.WALL_NUT:case n.pzaPlantEnum.TALL_NUT:case n.pzaPlantEnum.PUMPKIN:case n.pzaPlantEnum.UMBRELLA_LEAF:return"resources/Texture/BulletEffect/catapult_bullet";default:return"resources/Texture/BulletEffect/pea_bullet"}},e.getBulletHitPrefabPath=function(e){switch(e){case n.pzaPlantEnum.PEA_SHOOTER:case n.pzaPlantEnum.REPEATER:case n.pzaPlantEnum.GATLING_PEA:case n.pzaPlantEnum.THREE_PEATER:case n.pzaPlantEnum.SPLIT_PEA:case n.pzaPlantEnum.FIGHTKING:case n.pzaPlantEnum.GABY:return"resources/Prefab/Effect/HitEffect/PeaHitEffect";case n.pzaPlantEnum.Gene_SnowPea:case n.pzaPlantEnum.SNOW_PEA:return"resources/Prefab/Effect/HitEffect/SnowPeaHitEffect";case n.pzaPlantEnum.PUFF_SHROOM:return"resources/Prefab/Effect/HitEffect/ShroomHitEffect";case n.pzaPlantEnum.SEA_SHROOM:case n.pzaPlantEnum.CACTUS:return"resources/Prefab/Effect/HitEffect/MissileHitEffect";case n.pzaPlantEnum.MELON_PULT:return"resources/Prefab/Effect/HitEffect/MelonHitEffect";case n.pzaPlantEnum.WINTER_MELON:return"resources/Prefab/Effect/HitEffect/WinterMelonHitEffect";case n.pzaPlantEnum.STAR_FRUIT:return"resources/Prefab/Effect/HitEffect/StarHitEffect";case n.pzaPlantEnum.SCAREDY_SHROOM:return"resources/Prefab/Effect/HitEffect/ScarHitEffect";default:return null}},e.getBulletPrefabPath=function(e){switch(e){case n.pzaPlantEnum.CABBAGE_PULT:return"resources/Demo/Bullet/DemoCabbageBullet";case n.pzaPlantEnum.FIGHTKING:return"resources/Demo/Bullet/DemoPeaFireBullet";case n.pzaPlantEnum.PUFF_SHROOM:return"resources/Demo/Bullet/DemoPuffBullet";case n.pzaPlantEnum.MELON_PULT:return"resources/Demo/Bullet/DemoMelonBullet";case n.pzaPlantEnum.COB_CANNON:return"resources/Demo/Bullet/DemoCannonBullet";case n.pzaPlantEnum.Phoenix:return"resources/Demo/Bullet/DemoPhoenixBullet";default:return"resources/Demo/Bullet/DemoBullet"}},e.getInitPlantPos=function(e){var a=cc.v2(1,1);return[n.pzaPlantEnum.CHERRY_BOMB,n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.SPIKEWEED,n.pzaPlantEnum.SPIKEROCK,n.pzaPlantEnum.GLOOM_SHROOM,n.pzaPlantEnum.MARIGOLD,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.TWIN_SUNFLOWER,n.pzaPlantEnum.Gene_SnowPea,n.pzaPlantEnum.Phoenix].indexOf(e)>=0&&(a=cc.v2(2,1)),[n.pzaPlantEnum.PLANTERN].indexOf(e)>=0&&(a=cc.v2(3,1)),a},e.getInitZombiePos=function(e){var a=cc.v2(4,1);return[n.pzaPlantEnum.GABY].indexOf(e)>=0&&(a=cc.v2(5,1)),[n.pzaPlantEnum.CHERRY_BOMB,n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GLOOM_SHROOM,n.pzaPlantEnum.Gene_SnowPea,n.pzaPlantEnum.Phoenix,n.pzaPlantEnum.SCAREDY_SHROOM].indexOf(e)>=0&&(a=cc.v2(3,1)),[n.pzaPlantEnum.SPIKEWEED,n.pzaPlantEnum.SPIKEROCK].indexOf(e)>=0&&(a=cc.v2(2,1)),a},e.loadZombiePathMap=new Map([[i.pzaZombieEnum.ZOMBIE,"Zombie/01_zombie_hybrid"],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"Zombie/04_zombie"],[i.pzaZombieEnum.CATAPULT_ZOMBIE,"Zombie/16_zombie_hybrid"],[i.pzaZombieEnum.BALLOON_ZOMBIE,"Zombie/17_zombie_hybrid"],[i.pzaZombieEnum.POGO_ZOMBIE,"Zombie/Zombie_pogo"],[i.pzaZombieEnum.Cream_Normal,"Zombie/52_plant"],[i.pzaZombieEnum.Cream_Pea,"Zombie/53_plant"]]),o([s],e)}());t.pzaDemoConf=c,cc._RF.pop()},{"../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaDemoBasePlant":"pzaDemoBasePlant","./pzaDemoBaseZombie":"pzaDemoBaseZombie"}],pzaDemoMgr:[function(e,a,t){"use strict";cc._RF.push(a,"c7174gEN/hK1qgzBWPav3uv","pzaDemoMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},n=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDemoMgr=void 0;var i=e("../../Common/pzaSpineController"),r=e("../../Common/pzaWorldEventManager"),p=e("../../Load/pzaBundleObjectPool"),l=e("../../utils/pzaResMgr"),s=e("../pzaGameState"),c=e("./pzaDemoBaseComp"),u=cc._decorator,d=u.ccclass,h=(u.property,function(){function e(){}var a;return a=e,e.addBaseCmp=function(e){this.baseComp.add(e)},e.deleteBaseCmp=function(e){this.baseComp.delete(e)},e.addZombie=function(e){this.zombieArr.add(e)},e.deleteZombie=function(e){this.zombieArr.delete(e)},e.addPlant=function(e){this.plantArr.add(e)},e.deletePlant=function(e){this.plantArr.delete(e)},e.DemoLogicUpdate=function(e){var t,o;try{for(var i=n(a.baseComp),r=i.next();!r.done;r=i.next())r.value.demoUpdate(e)}catch(p){t={error:p}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}},e.checkRestartScene=function(){var e=this;this.checkCD||this.zombieArr.size<=0&&(this.checkCD=!0,this.restartTimer=setTimeout(function(){e.checkCD=!1,r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.PLAY_DEMOSCENE,null)},1e3))},e.restartScene=function(){this.checkCD=!1,r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.PLAY_DEMOSCENE,null)},e.clearRestarTimer=function(){this.checkCD=!1,clearTimeout(this.restartTimer)},e.createPlantSpine=function(e,a){var t=new cc.Node("plant");t.addComponent(c.pzaDemoBaseComp);var o=t.addComponent(i.pzaSpineController);o.spineAnimation=t.addComponent(sp.Skeleton),o.spineAnimation.premultipliedAlpha=!1;var n="Plant/"+(e>=10?"":"0")+e+"_plant";"Plant/30_plant"==n&&(n="Plant/30plant"),l.pzaResMgr.instance().getSpineSync(n,function(e,t){e?console.error(e):(o.spineAnimation.skeletonData=t,a&&a(o))})},e.createDemoZombie=function(e,a,t){p.pzaBundleObjectPool.requestInstantByUrl("resources/Demo/DemoZombie",!1,function(o,n){null==o&&null!=n&&null!=e?(n.setParent(e),n.setPosition(a),t&&t(n)):console.error(o)})},e.createBoomBlock=function(e,a,t){var o=s.pzaGameState.getDemoLogicPos(e,a,cc.v2(-10,20)),n=s.pzaGameState.demoScene;null!=n&&null!=o&&p.pzaBundleObjectPool.requestInstantByUrl("resources/Demo/Effect/DemoBlockEffect",!1,function(e,a){null==e&&null!=a&&null!=n?(a.addComponent(c.pzaDemoBaseComp),a.setParent(n),a.setPosition(o),a.getComponent(i.pzaSpineController).playAnimation("animation",t,null,null,.8)):console.error(e)})},e.createDemoPrefab=function(e,a){p.pzaBundleObjectPool.requestInstantByUrl(e,!1,function(e,t){null==e&&null!=t&&null!=s.pzaGameState.demoScene?(t.addComponent(c.pzaDemoBaseComp),t.parent=s.pzaGameState.demoScene,a&&a(t)):console.error(e)})},e.createPortalDoorEffect=function(e,t){a.createDemoPrefab("resources/Demo/Effect/DemoPlantCreateEffect",function(a){a.setPosition(cc.v2(e.x-30,e.y+30));var o=a.getComponent(i.pzaSpineController);o.playAnimation("1",!1,function(){o.node.destroy()},function(e,a){"1"==a.data.name&&t&&t()})})},e.baseComp=new Set,e.zombieArr=new Set,e.plantArr=new Set,e.checkCD=!1,a=o([d],e)}());t.pzaDemoMgr=h,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../utils/pzaResMgr":"pzaResMgr","../pzaGameState":"pzaGameState","./pzaDemoBaseComp":"pzaDemoBaseComp"}],pzaDiggerZombie:[function(e,a,t){"use strict";cc._RF.push(a,"bbc77EVr1JHka/8NvpYWl2d","pzaDiggerZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDiggerZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../../Load/pzaBundleObjectPool"),c=e("../../Load/pzaPreLoadManager"),u=e("../../utils/pzakc"),d=e("../Data/pzaBuffData"),h=e("../Data/pzaPlantEnum"),m=e("../Effect/pzaShadowEffect"),f=e("../pzaGameState"),z=e("./pzaBaseZombie"),y=e("./pzaZombieSlot"),g=e("./pzaZombieState"),v=cc._decorator,b=v.ccclass,P=(v.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hasBreakGround=!1,a.breakPosX=0,a.isNormalBreak=!0,a.equip1Slot=y.pzaZombieSlotType.gao3,a.gaoSlot=y.pzaZombieSlotType.gao2,a.hatInDig=y.pzaZombieSlotType.gao2,a.diggerIdx=0,a}return n(a,e),a.prototype.preview=function(a,t,o){var n=this;void 0===o&&(o=1),e.prototype.preview.call(this,a,t,o),setTimeout(function(){n.slotMap&&(n.updateEquipState(n.hatInDig,0),n.updateEquipState(n.gaoSlot,0))},2)},a.prototype.initEquips=function(){var e=this;this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[y.pzaZombieSlotType.butter,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.butter).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.butter,58.47,-16.35,-86.38))],[this.equip1Slot,new y.pzaZombieSlot(this.animation.spineAnimation,this.equip1Slot).addState(new y.pzaZombieSlotAtt(1,this.equip1Slot,-3.97,-57.21,-87.32))],[this.hatInDig,new y.pzaZombieSlot(this.animation.spineAnimation,this.hatInDig).addState(new y.pzaZombieSlotAtt(1,this.hatInDig,0,0,0))],[this.gaoSlot,new y.pzaZombieSlot(this.animation.spineAnimation,this.gaoSlot).addState(new y.pzaZombieSlotAtt(1,this.gaoSlot,0,0,0))]]),setTimeout(function(){e.slotMap&&e.updateEquipState(e.hatInDig,1)},1)},a.prototype.bindData=function(a){this.hasBreakGround=!1,e.prototype.bindData.call(this,a),this.body.node.scaleX=.1,a.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.UNABLE_SELECT,-1)),a.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIVE,-1)),f.pzaGameState.map&&(this.breakPosX=f.pzaGameState.map.getMapOriPos().x+50),this.isNormalBreak=!0},a.prototype.uiShow=function(){this.slotMap=null,this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.animation.playAnimation(this.uiIdleName,!0,null,null,.5)},a.prototype.equipIntact=function(){e.prototype.equipIntact.call(this),this.updateEquipState(this.gaoSlot,1)},a.prototype.equipDeath=function(a){e.prototype.equipDeath.call(this,a),this.updateEquipState(this.gaoSlot,0)},a.prototype.findTarget=function(){return this.hasBreakGround?e.prototype.findTarget.call(this):null},a.prototype.updateMove=function(a){e.prototype.updateMove.call(this,a),this.hasBreakGround?this.baseData.logicPos.x>=640&&(this.baseData.zombieDie(),this.death(!1)):this.baseData.logicPos.x<=this.breakPosX&&this.breakGround(this.isNormalBreak)},a.prototype.breakGround=function(e){var a=this;this.body.node.scaleX=1,l.pzaSoundManager.deleteLongAudio("digger_zombie",this.diggerIdx),this.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIZZ,-1)),this.baseData.buffData.removeBuff(d.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(d.pzaBuffType.DIVE),this.hasBreakGround=!0,this.curShadow&&this.curShadow.showShadow(),e&&(this.baseData.zombieData.direction=1,this.refreshOrientation());var t=function(){e?l.pzaSoundManager.playAudio("digger_arise"):l.pzaSoundManager.playAudio("gravestone_rumble");var t=!1,o=e?"arise":"jump";a.updateEquipState(a.hatInDig,0),a.animation.playAnimation(o,!1,function(){a.animation.playAnimation(o+"1",!1,function(){t||(t=!0,a.resumeBreak(),a.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIZZ,3)),a.animation.playAnimation("idle2",!0),a.zombieState=g.pzaZombieState.STAY)})});var n=(a.animation.getAnimationDuration(o)+a.animation.getAnimationDuration(o+"1"))/a.animation.spineAnimation.timeScale+.1;a.scheduleOnce(function(){t||!a.baseData||a.baseData.isDead||(t=!0,a.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIZZ,3)),a.animation.playAnimation("idle2",!0),a.zombieState=g.pzaZombieState.STAY)},n),a.body.node.scaleY=1};e?t():this.animation.playAnimation("dig2",!1,t);var o=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=f.pzaGameState.map.getBlockWidth()/o},a.prototype.toolDeath=function(){this.hasTool=!1,this.updateEquipState(this.gaoSlot,0),this.hasBreakGround||this.breakGround(!1)},a.prototype.getMoveAniName=function(){return"move"},a.prototype.playMoveAnimation=function(){var e=this;if(this.zombieState=g.pzaZombieState.MOVE,this.hasBreakGround)this.animation.playAnimation(this.getMoveAniName(),!0);else{this.updateEquipState(this.hatInDig,1);var a=function(){e.diggerIdx=++u.default.diggerZomIdx,u.default.diggerZomIdx>10&&(u.default.diggerZomIdx=1),l.pzaSoundManager.playLongAudio("digger_zombie",e.diggerIdx),e.animation.playAnimation("dig",!1,a),e.body.node.scaleY=.4};a()}},a.prototype.playAttakAnimation=function(){var e=this;this.zombieState=g.pzaZombieState.EAT_ATK,this.hasBreakGround?this.animation.playAnimation("attack",!0,null,function(){var a=e.findTarget();if(null!=a&&!a.isDead&&null!=a.plantData&&a.plantData.plantType==h.pzaPlantEnum.HYPNO_SHROOM&&!a.plantData.sleeping){l.pzaSoundManager.playAudio("mindcontrolled"),a.isDead=!0,window.pzazombieManager.zombieHypnosis(e.baseData);var t=window.pzaplantManager.getPlantByData(a);t&&t.close(),window.pzaplantManager.removePlant(a)}}):(this.updateEquipState(this.hatInDig,1),this.animation.playAnimation("dig",!0))},a.prototype.createShadow=function(e){var a=this;void 0===e&&(e=null),this.needShadow?(null==e&&(e=p.pzaNodeManager.getDownEffectNode()),s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SHADOW,function(t,o){if(null==t&&null!=o){o.setParent(e);var n=o.getComponent(m.pzaShadowEffect);n&&n.init(a.baseData,a.shadowOffset,a.zombieScale),n&&n.hideShadow(),a.curShadow=n}else console.error(t)})):this.curShadow=null},a.prototype.death=function(a,t,o){console.log("diggerZombie Death"),e.prototype.death.call(this,a,t,o)},a.prototype.ashesDeath=function(){this.baseData.zombieDie(),this.death(!1),this.hasBreakGround&&e.prototype.ashesDeath.call(this)},a.prototype.logicLateUpdate=function(a){a>.7||(this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&(this.hasBreakGround?e.prototype.logicLateUpdate.call(this,a):this.node.setPosition(this.baseData.logicPos)))},a.prototype.close=function(){e.prototype.close.call(this),l.pzaSoundManager.deleteLongAudio("digger_zombie",this.diggerIdx)},i([b],a)}(z.pzaBaseZombie));t.pzaDiggerZombie=P,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDirBullet:[function(e,a,t){"use strict";cc._RF.push(a,"0d455lSmZ5G4ITb0JWm066z","pzaDirBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDirBullet=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaNodeManager"),u=e("../../Common/pzaSoundManager"),d=e("../../Common/pzaWorldEventManager"),h=e("../../Load/pzaBundleObjectPool"),m=e("../../Load/pzaPreLoadManager"),f=e("../Data/pzaBuffData"),z=e("../Effect/pzaBaseEffect"),y=e("../Effect/pzaShadowEffect"),g=e("../Zombie/pzaZombieBody"),v=e("../pzaEffectManager"),b=e("../pzaGameState"),P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletNode=null,a.speed=400,a.maxLifeTime=3,a.rotateSpeed=0,a.needShadow=!1,a.hitPrefab=null,a.poolPrefab=null,a.hitBuff=0,a.bullet_normal=null,a.bullet_fire=null,a.lifeTime=0,a.atk=0,a.curShadow=null,a.direction=cc.v2(1,0),a.isInAir=!1,a.bulletLevel=1,a.collider=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.maxLifeTime=3,this.bulletLevel=1},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.init=function(e,a,t){void 0===t&&(t=1),p.pzaCollisionManager.getInstance.addBulletOther(this),this.atk=a,this.lifeTime=0,this.direction=e,this.isInAir=!1,this.node.scale=1,this.bulletLevel=t,this.createShadow(),this.refreshBulletState()},a.prototype.refreshBulletState=function(){this.bullet_normal&&(this.bullet_normal.active=1==this.bulletLevel),this.bullet_fire&&(this.bullet_fire.active=2==this.bulletLevel)},a.prototype.logicUpdate=function(e){this.lifeTime+=e,this.lifeTime>=this.maxLifeTime?this.close():(0!=this.rotateSpeed&&this.bulletNode&&(this.bulletNode.angle-=this.rotateSpeed*e),0!=this.rotateSpeed&&this.bullet_fire&&(this.bullet_fire.angle-=this.rotateSpeed*e),this.updateMove(e))},a.prototype.updateMove=function(e){this.node.x+=this.direction.x*this.speed*e,this.node.y+=this.direction.y*this.speed*e,this.shadowMove()},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.onCollision=function(e){if(null!=e&&e.node.group==s.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(g.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){e&&!e.isDead&&(e.buffData.hasBuff(f.pzaBuffType.DIVE)||e.buffData.hasBuff(f.pzaBuffType.UNABLE_SELECT)||!this.isInAir&&e.buffData.hasBuff(f.pzaBuffType.FLY)||this.isInAir&&!e.buffData.hasBuff(f.pzaBuffType.FLY)||e.buffData.hasBuff(f.pzaBuffType.INVINCIBLE)||e.zombieData&&e.zombieData.hypnosis||(1==this.bulletLevel?this.normalColliderZombie(e):this.fireColliderZombie(e)))},a.prototype.normalColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);if(a&&(a.hurt(this.atk),this.close(),this.playHitEffect(e),1===this.hitBuff&&!e.buffData.hasBuff(f.pzaBuffType.IMM_CONTROL)&&!e.buffData.hasBuff(f.pzaBuffType.IMM_IMMOBILIZE))){var t=e.buffData.releaseBuff(f.pzaBuffType.IMMOBILIZE);null!=t?t.buffTime=5:(t=new f.pzaBuffInfo(f.pzaBuffType.IMMOBILIZE,5),e.buffData.addBuff(t),a.bePauseControl(),v.pzaEffectManager.createButterEffect(e,cc.v2(e.logicPos.x,e.logicPos.y+130),a.node.zIndex))}},a.prototype.fireColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);if(a&&a.hurt(40),e.buffData.removeBuff(f.pzaBuffType.FROST),e.buffData.removeBuff(f.pzaBuffType.FROZEN),this.close(),this.playHitEffect(e),u.pzaSoundManager.playAudio("firepeaHit",.5),!a.baseData.buffData.hasBuff(f.pzaBuffType.IMM_SPATTER)){var t=window.pzazombieManager.findFixRangeZombies(e.logicPos,.5*b.pzaGameState.map.getBlockWidth());t&&t.forEach(function(a){null!=a&&a.baseData!=e&&(e.buffData.hasBuff(f.pzaBuffType.FLY)||e.buffData.hasBuff(f.pzaBuffType.DIVE)||e.buffData.hasBuff(f.pzaBuffType.INVINCIBLE)||a.hurt(13))})}},a.prototype.createShadow=function(){var e=this;if(this.needShadow){var a=c.pzaNodeManager.getDownEffectNode();h.pzaBundleObjectPool.requestInstantByUrl2(m.pzaResourceUrl.SHADOW,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(y.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),e.curShadow=n,e.shadowMove()}else console.error(t)})}else this.curShadow=null},a.prototype.shadowMove=function(){if(null!=this.curShadow){var e=cc.v2(this.node.x,0);e.y=this.node.y-60,this.curShadow.followMove(e)}},a.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletOther(this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},a.prototype.playHitEffect=function(e){var a=cc.v2(this.node.x,this.node.y);if(2==this.bulletLevel&&v.pzaEffectManager.createBoomFireEffect(0,0,a,null),null!=this.hitPrefab){var t=5;null!=e&&(t=10*-e.yIndex+5,a=cc.v2(e.logicPos.x,e.logicPos.y+70));var o=c.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(a);var i=n.getComponent(z.pzaBaseEffect);i&&i.showEffect(null,null)}}},i([E(cc.Node)],a.prototype,"bulletNode",void 0),i([E({displayName:"\u5b50\u5f39\u98de\u884c\u901f\u5ea6"})],a.prototype,"speed",void 0),i([E({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],a.prototype,"maxLifeTime",void 0),i([E({displayName:"\u5b50\u5f39\u81ea\u8f6c\u901f\u5ea6"})],a.prototype,"rotateSpeed",void 0),i([E({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],a.prototype,"needShadow",void 0),i([E({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],a.prototype,"hitPrefab",void 0),i([E(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([E({displayName:"\u5b50\u5f39\u51fb\u4e2dbuff"})],a.prototype,"hitBuff",void 0),i([E({displayName:"\u666e\u901a\u5b50\u5f39",type:cc.Node})],a.prototype,"bullet_normal",void 0),i([E({displayName:"\u706b\u7130\u5b50\u5f39",type:cc.Node})],a.prototype,"bullet_fire",void 0),i([C],a)}(r.pzaBaseComponent);t.pzaDirBullet=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDolphinRiderZombie:[function(e,a,t){"use strict";cc._RF.push(a,"e72a1SeCnFGirdVMv2VJly8","pzaDolphinRiderZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDolphinRiderZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaPlantEnum"),u=e("../Data/pzaZombieEnum"),d=e("../pzaEffectManager"),h=e("../pzaGameState"),m=e("./pzaBaseZombie"),f=e("./pzaZombieSlot"),z=e("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.srMoveAni=["move"],a.enterWater=!1,a.hasJump=!1,a.jumping=!1,a.jumpMsp=0,a.jumpDuration=1,a.garlicSkinName="biaoqing2",a.yIndexIsWater=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,52.1,-3.44,-89.7))]])},a.prototype.bindData=function(a){if(this.hasJump=!1,this.jumping=!1,this.enterWater=!1,this.jumpMsp=0,this.jumpDuration=this.animation.getAnimationDuration("jump2"),e.prototype.bindData.call(this,a),h.pzaGameState.map){var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/t}this.body.changeBody(cc.v2(-20,65),110)},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData)if(this.baseData.isDead)this.baseData.hp>0&&this.jumpMsp>0&&this.jumpMove(e);else if(this.jumpMsp>0)this.jumpMove(e);else if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(e);else if(!this.jumping&&!this.enterWater)if(this.hasJump||!this.hasInWater){var a=this.findTarget();null==a||a.isDead?this.updateMove(e):this.attack(e,a)}else{var t=this.findJumpTarget();null!=t?this.jump(t):this.updateMove(e)}}else this.changeRowMove(e)},a.prototype.attack=function(a,t){this.enterWater||e.prototype.attack.call(this,a,t)},a.prototype.updateMove=function(a){this.enterWater||e.prototype.updateMove.call(this,a)},a.prototype.findJumpTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(null==this.body.curTarget.zombieData){var e=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData.cate===c.pzaPlantCate.Spike){var a=window.pzaplantManager.pumpkinDataMap.get(e);return null==a||a.isDead?null:a}if(r.pzaPlantConfigData.isTallPlant(this.body.curTarget.plantData.plantType))return this.body.curTarget;if(this.body.curTarget.plantData.plantType==c.pzaPlantEnum.COB_CANNON)return this.body.curTarget;var t=window.pzaplantManager.plantDataMap.get(e);return null==t||t.isDead||!r.pzaPlantConfigData.isTallPlant(t.plantData.plantType)&&t.plantData.plantType!=c.pzaPlantEnum.COB_CANNON?this.body.curTarget:t}},a.prototype.jumpMove=function(e){this.baseData.logicPos.x-=e*this.jumpMsp},a.prototype.jump=function(e){var a=this;if(null!=e){var t=e.xIndex,o=h.pzaGameState.map.getXPos(t)+h.pzaGameState.map.getMapOriPos().x;this.jumpMsp=(this.baseData.logicPos.x-o)/(this.jumpDuration-.26),this.jumping=!0,this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1));var n=!r.pzaPlantConfigData.isTallPlant(e.plantData.plantType);p.pzaSoundManager.playAudio("dolphin_before_jumping");var i=0;this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.animation.playAnimation(n?"jump2":"jump3",!1,function(){a.resumeBreak(),a.jumpMsp=0,n||p.pzaSoundManager.playAudio("bonk"),p.pzaSoundManager.playAudio("jump_entering_water"),a.baseData.zombieData.toolType=u.pzaEquipType.NO_EQUIP,a.toolDeath();var e=r.pzaGameConfig.getZombieSpecialSpeed(a.baseData.zombieData.zombieType);a.baseData.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/e;var t=h.pzaGameState.map.getMapXIndex(a.baseData.logicPos);a.baseData.xIndex=t,a.hasJump=!0,a.srMoveInWaterAni[0]="move4",a.moveAniName[0]="move",a.attackAniName[0]="attack3",a.body.changeBody(cc.v2(10,65),60),a.body.curTarget=null,a.jumping=!1,n?a.playMoveAnimation():a.animation.playAnimation("attack",!0),a.baseData.buffData.removeBuff(s.pzaBuffType.IMM_CONTROL)},function(){if(a.jumpMsp=0,n||1==i){var e=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y);d.pzaEffectManager.createWaterFlowerEffect(a.baseData.yIndex,e,null)}i++})}},a.prototype.getAttackAniName=function(){return this.hasInWater&&this.srAttackInWaterAni.length>0?l.pzaUtil.getRandomValueFromArray(this.srAttackInWaterAni):l.pzaUtil.getRandomValueFromArray(this.attackAniName)},a.prototype.getDeathAniName=function(){return this.hasInWater&&this.srDeathInWaterAni.length>0?l.pzaUtil.getRandomValueFromArray(this.srDeathInWaterAni):l.pzaUtil.getRandomValueFromArray(this.deathAniName)},a.prototype.getMoveAniName=function(){return-1==this.baseData.xIndex||this.hasJump?this.hasUseSrAni&&this.srMoveAni.length>0?this.hasInWater&&this.srMoveInWaterAni.length>0?l.pzaUtil.getRandomValueFromArray(this.srMoveInWaterAni):l.pzaUtil.getRandomValueFromArray(this.srMoveAni):this.hasInWater&&this.srMoveInWaterAni.length>0?l.pzaUtil.getRandomValueFromArray(this.srMoveInWaterAni):l.pzaUtil.getRandomValueFromArray(this.moveAniName):"move3"},a.prototype.getMoveAniNameArray=function(){return this.hasUseSrAni&&this.srMoveAni.length>0?this.hasInWater&&this.srMoveInWaterAni.length>0?this.srMoveInWaterAni:this.srMoveAni:this.hasInWater&&this.srMoveInWaterAni.length>0?this.srMoveInWaterAni:this.moveAniName},a.prototype.playMoveAnimation=function(){var e=this;if(!this.jumping&&!this.enterWater){this.zombieState=z.pzaZombieState.MOVE;for(var a=this.getMoveAniNameArray(),t=0;t<a.length;t++)if(a[t]==this.animation.spineAnimation.animation||"move3"==this.animation.spineAnimation.animation)return;this.animation.playAnimation(this.getMoveAniName(),!0,null,function(a,t){e.moveAniEvent(t)},1)}},a.prototype.moveAniEvent=function(e){e&&"attack"==e.data.name&&this.shoot()},a.prototype.shoot=function(){},a.prototype.zombieGoHome=function(){this.jumping||e.prototype.zombieGoHome.call(this)},a.prototype.zombieWinMove=function(a){if(!this.hasJump){this.hasJump=!0;var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/t}e.prototype.zombieWinMove.call(this,a)},a.prototype.zombieScream=function(){p.pzaSoundManager.playAudio("Dolphin_Enter")},a.prototype.ashesDeath=function(){this.jumping?this.death(!1):e.prototype.ashesDeath.call(this)},a.prototype.onChangeIndex=function(a,t){this.jumping||e.prototype.onChangeIndex.call(this,a,t)},a.prototype.onWaterEnter=function(){var e=this;this.hasJump||(this.animation.node.y+=20,this.enterWater=!0,this.animation.playAnimation("jump1",!1,function(){e.jumping=!1,e.resumeBreak(),e.enterWater=!1,e.body.curTarget=null;var a=e.animation.findBone("zong");null!=a?e.baseData.logicPos.x+=e.baseData.zombieData.direction*(84.15-a.worldX):e.baseData.logicPos.x-=85;var t=r.pzaGameConfig.getZombieSpeed(e.baseData.zombieData.zombieType);e.baseData.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/t,e.playMoveAnimation(),d.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null)},function(){p.pzaSoundManager.playAudio("zombie_entering_water"),d.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,cc.v2(e.baseData.logicPos.x-85,e.baseData.logicPos.y),null)}))},a.prototype.onWaterExit=function(){this.animation.node.y-=20,this.enterWater=!1;var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/e},a.prototype.zombieHurt=function(){this.zombieHurtState=u.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([v({displayName:"\u6cf3\u5708\u79fb\u52a8\u52a8\u753b",type:[cc.String]})],a.prototype,"srMoveAni",void 0),i([g],a)}(m.pzaBaseZombie);t.pzaDolphinRiderZombie=b,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDoomBullet:[function(e,a,t){"use strict";cc._RF.push(a,"7105651O/ZNMaf3HrdseBE8","pzaDoomBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDoomBullet=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../Plant/pzaAttackType"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.targetPos=null,a.targetXIndex=-1,a.targetYIndex=-1,a.logicPos=null,a.moveSpeed=800,a.atk=0,a.up=!0,a}return n(a,e),a.prototype.init=function(e,a,t,o,n){this.atk=e,this.logicPos=a,this.targetPos=t,this.targetXIndex=o,this.targetYIndex=n,this.node.scaleY=1,this.up=!0},a.prototype.logicUpdate=function(e){this.logicPos.y+=e*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.boom()},a.prototype.boom=function(){var e=this;this.close(),p.pzaSoundManager.playAudio("doomshroom"),u.pzaEffectManager.createDoomBoomEffect(this.targetPos);var a=d.pzaGameState.map.getBlockLogicPos(this.targetXIndex,this.targetYIndex,d.pzaGameState.map.getXInterval(this.targetXIndex)/2,50);window.pzaplantManager.holeMap.has(""+this.targetXIndex+this.targetYIndex)||u.pzaEffectManager.createDoomHoleEffect(a,this.targetXIndex,this.targetYIndex);var t=3.5*d.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.targetPos,t);null==o&&(o=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(a){var t=a&&a.baseData;null==t||t.isDead||t.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||a&&a.hurt(e.atk,null,c.pzaAttackType.BOOM)}),window.pzaMapManager.LadderMap.forEach(function(a,o){l.pzaUtil.getDistance(e.targetPos,a.logicPos)>t||(a.close(),window.pzaMapManager.LadderMap.delete(o))})},i([m],a)}(r.pzaBaseComponent));t.pzaDoomBullet=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDoomHoleEffect:[function(e,a,t){"use strict";cc._RF.push(a,"e1c4f49UvxH+oX3UHpxrfA2","pzaDoomHoleEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDoomHoleEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaMapManager"),l=e("../pzaGameState"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hole=null,a.map1_Hole=[],a.map2_Hole=[],a.map3_Hole_Grass=[],a.map3_Hole_Water=[],a.map4_Hole_Grass=[],a.map4_Hole_Water=[],a.map5_Hole=[],a.map6_Hole=[],a.holeTime=0,a.holeStep=1,a.mapXIndex=-1,a.mapYIndex=-1,a}return n(a,e),a.prototype.init=function(e,a){this.mapXIndex=e,this.mapYIndex=a,this.holeTime=0,this.holeStep=1,this.showHole(),this.fixPos(),window.pzaMapManager.addDoomHole(this)},a.prototype.recover=function(e,a,t,o){this.mapXIndex=e,this.mapYIndex=a,this.holeTime=t,this.holeStep=o,this.showHole(),this.fixPos(),window.pzaMapManager.addDoomHole(this)},a.prototype.logicUpdate=function(e){if(this.holeTime+=e,this.holeTime>=180)return this.close(),void window.pzaMapManager.removeDoomHole(this);this.holeTime>=90&&1==this.holeStep&&(this.holeStep=2,this.showHole(),this.fixPos())},a.prototype.clearHole=function(){this.holeTime=0,this.close(),window.pzaMapManager.removeDoomHole(this)},a.prototype.close=function(){e.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},a.prototype.showHole=function(){var e=window.pzaMapManager.getBlockType(this.mapXIndex,this.mapYIndex);if(e==p.pzaBlockType.GRASS||e==p.pzaBlockType.ROOF)switch(l.pzaGameState.mapId){case 1:this.hole.spriteFrame=1==this.holeStep?this.map1_Hole[0]:this.map1_Hole[1];break;case 2:this.hole.spriteFrame=1==this.holeStep?this.map2_Hole[0]:this.map2_Hole[1];break;case 3:this.hole.spriteFrame=1==this.holeStep?this.map3_Hole_Grass[0]:this.map3_Hole_Grass[1];break;case 4:this.hole.spriteFrame=1==this.holeStep?this.map4_Hole_Grass[0]:this.map4_Hole_Grass[1];break;case 5:this.hole.spriteFrame=1==this.holeStep?this.map5_Hole[0]:this.map5_Hole[1]}else if(e==p.pzaBlockType.POND)switch(l.pzaGameState.mapId){case 3:this.hole.spriteFrame=1==this.holeStep?this.map3_Hole_Water[1]:this.map3_Hole_Water[2];break;case 4:this.hole.spriteFrame=1==this.holeStep?this.map4_Hole_Water[1]:this.map4_Hole_Water[2]}window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},a.prototype.fixPos=function(){var e=window.pzaMapManager.getBlockType(this.mapXIndex,this.mapYIndex);if(e==p.pzaBlockType.GRASS)switch(l.pzaGameState.mapId){case 1:this.hole.node.y=0;break;case 2:this.hole.node.y=0,2==this.holeStep&&(this.hole.node.y=15);break;case 3:2==this.mapYIndex&&(this.hole.node.y=-15),3==this.mapYIndex&&(this.hole.node.y=-10);break;case 4:1==this.mapYIndex&&(this.hole.node.y=-10),4==this.mapYIndex&&(this.hole.node.y=-10),5==this.mapYIndex&&(this.hole.node.y=-10);break;case 5:this.hole.node.x=3}else e==p.pzaBlockType.ROOF||e==p.pzaBlockType.POND&&l.pzaGameState.mapId},i([u({displayName:"\u6d1e",type:cc.Sprite})],a.prototype,"hole",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map1_Hole",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map2_Hole",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map3_Hole_Grass",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map3_Hole_Water",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map4_Hole_Grass",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map4_Hole_Water",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map5_Hole",void 0),i([u({type:[cc.SpriteFrame]})],a.prototype,"map6_Hole",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaDoomHoleEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaMapManager":"pzaMapManager","../pzaGameState":"pzaGameState"}],pzaDoomShroom:[function(e,a,t){"use strict";cc._RF.push(a,"36aa8kF/wpAbJVUIU/KcNOn","pzaDoomShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDoomShroom=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../pzaEffectManager"),s=e("../pzaGameState"),c=e("./pzaAttackType"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.animation.node.active=!0,a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):this.attack(),s.pzaGameState.useShroom=!0},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.attack())},a.prototype.attack=function(){var e=this;this.baseData.hp=0,this.baseData.isDead=!0,r.pzaSoundManager.playAudio("JalapenoReady"),this.animation.playAnimation("attack",!1,function(){e.death()},function(){e.boom()})},a.prototype.boom=function(){var e=this;r.pzaSoundManager.playAudio("doomshroom"),window.pzaMapManager.shakeMap(),window.pzaMapManager.blink(2);var a=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y);setTimeout(function(){l.pzaEffectManager.createDoomBoomEffect(cc.v2(a.x,a.y-25))},350/s.pzaGameState.gameSpeed),window.pzaplantManager.removePlant(this.baseData),l.pzaEffectManager.createDoomHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex);var t=3.5*s.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,t);null==o&&(o=[]),this.baseData.xIndex>=5&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(a){a&&a.hurt(e.baseData.atk,e.baseData,c.pzaAttackType.BOOM)});var n=""+this.baseData.xIndex+this.baseData.yIndex,i=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=i){var u=window.pzaplantManager.getPlantByData(i);u&&u.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.BOOM)}var d=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=d){var h=window.pzaplantManager.getPlantByData(d);h&&h.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.BOOM)}window.pzaMapManager.LadderMap.forEach(function(a,o){p.pzaUtil.getDistance(e.baseData.logicPos,a.logicPos)>t||(a.close(),window.pzaMapManager.LadderMap.delete(o))})},i([h],a)}(u.pzaBasePlant));t.pzaDoomShroom=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaDrZomBall:[function(e,a,t){"use strict";cc._RF.push(a,"a211c37MKtCApje1YozAb2U","pzaDrZomBall");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDrZomBall=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGroupEnum"),s=e("../../Common/pzaSpineController"),c=e("../../Common/pzaWorldEventManager"),u=e("../Data/pzaPlantEnum"),d=e("../Plant/pzaPlantBody"),h=e("../pzaEffectManager"),m=e("../pzaGameState"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ballAni=null,a.fireAni=null,a.fireOutNode=null,a.fireAnis=[],a.bodyC=null,a.atk=0,a.yIndex=-1,a.fire=!1,a.xSpeed=60,a.logicPos=null,a.life=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.JALAPENO_BOOM,this.jalapenoBoom,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.iceShroomBoom,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.MISSILE_DEATH,this.death,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.JALAPENO_BOOM,this.jalapenoBoom,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.iceShroomBoom,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.MISSILE_DEATH,this.death,this)},a.prototype.init=function(e,a,t){var o=this;this.ballAni.node.active=!0,this.node.zIndex=7,this.fire=e,this.yIndex=a,this.atk=t,this.life=!1,this.ballAni.playAnimation(this.fire?"1qiu_1":"2qiu_1",!1,function(){o.node.zIndex=10*-o.yIndex+5,o.ballAni.playAnimation(o.fire?"1qiu_2":"2qiu_2",!0,null,null,.3),o.bodyC.enabled=!0,o.life=!0}),this.fireOutNode.active=!1,this.bodyC.enabled=!1;var n=m.pzaGameState.map.getXInterval(6)/2,i=m.pzaGameState.map.getBlockLogicPos(6,a,n,0);this.logicPos=i,this.node.setPosition(i),p.pzaCollisionManager.getInstance.addZombieByRow(this.yIndex,this)},a.prototype.close=function(){p.pzaCollisionManager.getInstance.delZombieByRow(this.yIndex,this),e.prototype.close.call(this)},a.prototype.logicUpdate=function(e){this.life&&(this.logicPos.x-=this.xSpeed*e,m.pzaGameState.map.fixMapYOffset(this.yIndex,this.logicPos,0),m.pzaGameState.map.getMapXIndex(this.logicPos)<0&&this.death())},a.prototype.lateUpdate=function(){null!=this.logicPos&&this.node.setPosition(this.logicPos)},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.bodyC.poSource=this.node,this.bodyC):null},a.prototype.onCollision=function(e){if(null!=e&&e.node.group==l.pzaGroupEnum.PLANT){var a=e.node.getComponent(d.pzaPlantBody);this.colliderPlant(a&&a.baseData)}},a.prototype.colliderPlant=function(e){e&&!e.isDead&&this.yIndex==e.yIndex&&(e&&e.plantData&&e.plantData.plantType==u.pzaPlantEnum.ICE_SHROOM||window.pzaplantManager.bangPlant(e.xIndex,e.yIndex,this.atk,null))},a.prototype.death=function(){var e=this;if(this.life=!1,!this.fire)return h.pzaEffectManager.createIceBoomEffect(this.logicPos),void this.close();this.ballAni.node.active=!1,this.fireOutNode.active=!0,this.fireAnis.forEach(function(a){a.playAnimation("fire2",!1,function(){e.close()})})},a.prototype.pauseSelf=function(){this.ballAni.pauseAnimation(),this.fireOutNode.active&&this.fireAnis.forEach(function(e){e.pauseAnimation()})},a.prototype.resumeSelf=function(){this.ballAni.resumeAnimation(),this.fireOutNode.active&&this.fireAnis.forEach(function(e){e.resumeAnimation()})},a.prototype.jalapenoBoom=function(e){this.fire||null==e||e.yIndex!=this.yIndex||this.death()},a.prototype.iceShroomBoom=function(){this.fire&&this.death()},i([y({displayName:"\u52a8\u753b",type:s.pzaSpineController})],a.prototype,"ballAni",void 0),i([y({displayName:"\u55b7\u706b\u52a8\u753b",type:s.pzaSpineController})],a.prototype,"fireAni",void 0),i([y({displayName:"\u706b\u7130\u6d88\u5931\u8282\u70b9",type:cc.Node})],a.prototype,"fireOutNode",void 0),i([y({displayName:"\u706b\u7130\u6d88\u5931\u52a8\u753b",type:[s.pzaSpineController]})],a.prototype,"fireAnis",void 0),i([y({displayName:"\u78b0\u649e",type:cc.CircleCollider})],a.prototype,"bodyC",void 0),i([z],a)}(r.pzaBaseComponent);t.pzaDrZomBall=g,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaPlantEnum":"pzaPlantEnum","../Plant/pzaPlantBody":"pzaPlantBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDrZomBoss:[function(e,a,t){"use strict";cc._RF.push(a,"ddb00KgyH1AK6EMwr2kkJQE","pzaDrZomBoss");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDrZomBoss=void 0;var r=e("../../Common/pzaGameManager"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaZombieEnum"),u=e("../Plant/pzaAttackType"),d=e("../pzaEffectManager"),h=e("../pzaGameState"),m=e("./pzaBaseZombie"),f=cc._decorator,z=f.ccclass,y=(f.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.standing=!0,a.lifeTime=0,a.atk=5e3,a.normalZombieCd=-1,a.bungeeCd=-1,a.bangCarCd=-1,a.trampleCd=-1,a.extendHeadCd=-1,a.commonCd=-1,a.mustBungee=!1,a.mustBangCar=!1,a.fireBallCd=-1,a.backHeadTime=-1,a.releasing=!1,a.backFingerTime=0,a.fingerIndex=1,a.fingerZombies=new Set,a.fingerPos=[[cc.v2(-1025,690),cc.v2(-910,615),cc.v2(-785,630)],[cc.v2(-910,690),cc.v2(-785,615),cc.v2(-665,630)],[cc.v2(-785,690),cc.v2(-665,615),cc.v2(-545,630)]],a.blinkTime=0,a}return n(a,e),a.prototype.bindData=function(e){this.baseData=e,null!=e&&null!=e.yIndex&&(this.node.zIndex=-50),this.zombieHurtState=null,this.equipHurtState=null,this.bodyBindData=!1,this.hypnosisState=!1,this.zombieWin=!1,this.breakDirtTime=0,this.refreshHurtState(!0),this.refreshOrientation(),this.refreshFrostState(!0),this.standing=!0,this.releasing=!1,this.mustBungee=!1,this.mustBangCar=!1,this.lifeTime=0,this.commonCd=0,this.extendHeadCd=50,this.trampleCd=-1,this.bungeeCd=this.bangCarCd=this.fireBallCd=this.backHeadTime=-1,this.normalZombieCd=5,this.backFingerTime=0,this.fingerIndex=1,this.fingerZombies.clear(),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.INVINCIBLE,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_IMMOBILIZE,-1)),this.node.scale=1},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.node.scale=.3,this.node.setPosition(0,0)},a.prototype.logicUpdate=function(e){var a=this;if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead&&(this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),this.blink(e),!this.baseData.isBeControlled()))if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.lifeTime+=e,this.commonCd=Math.max(0,this.commonCd-e),this.extendHeadCd=Math.max(0,this.extendHeadCd-e),this.normalZombieCd=Math.max(0,this.normalZombieCd-e),-1!=this.trampleCd&&(this.trampleCd=Math.max(0,this.trampleCd-e)),-1!=this.bungeeCd&&(this.bungeeCd=Math.max(0,this.bungeeCd-e)),-1!=this.bangCarCd&&(this.bangCarCd=Math.max(0,this.bangCarCd-e)),-1!=this.fireBallCd&&(this.fireBallCd=Math.max(0,this.fireBallCd-e)),-1!=this.backHeadTime&&(this.backHeadTime=Math.max(0,this.backHeadTime-e)),this.backFingerTime>0&&(this.backFingerTime-=e,this.backFingerTime<=0))this.playBackFingerAni(this.fingerIndex);else if(!(this.releasing||this.commonCd>0)){if(!this.standing)return-1!=this.fireBallCd&&this.fireBallCd<=0?void this.fireBall():void(-1!=this.backHeadTime&&this.backHeadTime<=0&&(this.backHeadTime=-1,this.releasing=!0,this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.INVINCIBLE,-1)),this.playBackHeadAni(function(){a.standing=!0,a.releasing=!1,a.randomExtendHeadCd(),a.randomCommonCd()})));if(this.mustBangCar)return this.mustBangCar=!1,this.mustBungee=!1,void this.bangCar();if(this.mustBungee)return this.mustBungee=!1,void this.putBungeeZombie();if(-1!=this.trampleCd&&this.trampleCd<=0&&this.hasTramplePlant())this.trample();else{if(-1!=this.bungeeCd&&this.bungeeCd<=0){var t=Math.random();return-1==this.bangCarCd||this.bangCarCd>0||t>.5?void this.putBungeeZombie():void this.bangCar()}this.extendHeadCd<=0?this.extendHead():this.normalZombieCd<=0&&this.putNormalZombie()}}},a.prototype.putNormalZombie=function(){var e=this;this.releasing=!0;var a=[1];this.lifeTime>=125?a=[3,4,5,6,7,8,15,18,21,24,25,26]:this.lifeTime>=80?a=[5]:this.lifeTime>=35&&(a=[3]);var t=l.pzaUtil.getRandomNum(0,4),o=l.pzaUtil.getRandomValueFromArray(a);this.node.zIndex=6,this.playHandZombieAni(t,function(){var e=window.pzazombieManager.createFixBlockZombieData(o,7,t);window.pzazombieManager.createZombie(e,!1)},function(){e.node.zIndex=-50,e.animation.playAnimation("idle",!0),e.randomZombieCd(),e.randomCommonCd(),e.releasing=!1})},a.prototype.putBungeeZombie=function(){this.releasing=!0;var e=l.pzaUtil.getRandomNum(1,3);this.node.zIndex=6;for(var a=this.fingerPos[e-1],t=0;t<=2;t++){for(var o=e-1+t,n=[],i=0;i<5;i++)window.pzaplantManager.hasPlant(o,i)&&n.push(i);(null==n||n.length<=0)&&(n=[0,1,2,3,4]);var r=l.pzaUtil.getRandomValueFromArray(n),p=window.pzazombieManager.createFixBlockZombieData(c.pzaZombieEnum.BUNGEE_ZOMBIE,o,r);p.logicPos.x=this.baseData.logicPos.x+a[t].x,p.zombieData.zomBossFinger=a[t].clone(),window.pzazombieManager.createZombie(p),this.fingerZombies.add(p)}this.playHandBungeeAni(e),this.fingerIndex=e,this.backFingerTime=6},a.prototype.bangCar=function(){var e=this;h.pzaGameState.bangCaring=!0,this.releasing=!0;var a=l.pzaUtil.getRandomNum(0,2),t=l.pzaUtil.getRandomNum(1,4);this.node.zIndex=6,p.pzaSoundManager.playAudio("hydraulic_short"),this.playBangCarAni(a,t,function(){for(var o=a;o<=a+2;o++)for(var n=t;n>=t-1;n--)window.pzaplantManager.bangPlant(o,n,e.atk,e.baseData);p.pzaSoundManager.playAudio("RVthrow"),window.pzaMapManager.trampleShakeMap()},function(){e.node.zIndex=-50,e.animation.playAnimation("idle",!0),e.randomBangCarCd(),e.randomCommonCd(),e.bangCarResetCd(),e.releasing=!1,h.pzaGameState.bangCaring=!1})},a.prototype.hasTramplePlant=function(){for(var e=0;e<=4;e++)if(window.pzaplantManager.hasPlant(5,e)||window.pzaplantManager.hasPlant(6,e)||window.pzaplantManager.hasPlant(7,e))return!0;return!1},a.prototype.trample=function(){var e=this;this.releasing=!0;for(var a=[],t=0;t<=4;t++)(window.pzaplantManager.hasPlant(5,t)||window.pzaplantManager.hasPlant(6,t)||window.pzaplantManager.hasPlant(7,t))&&(t>0&&t<=4&&!a.includes(t)&&a.push(t),t+1>0&&t+1<=4&&!a.includes(t+1)&&a.push(t+1));a.length<=0&&(a=[1,2,3,4]);var o=l.pzaUtil.getRandomValueFromArray(a);this.node.zIndex=6,p.pzaSoundManager.playAudio("hydraulic_short"),this.playTrampleAni(o,function(){for(var a=5;a<=7;a++)for(var t=o;t>=o-1;t--)window.pzaplantManager.bangPlant(a,t,e.atk,e.baseData);p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()},function(){e.node.zIndex=-50,e.animation.playAnimation("idle",!0),e.randomTrampleCd(),e.randomCommonCd(),e.releasing=!1})},a.prototype.extendHead=function(){var e=this;this.releasing=!0,this.node.zIndex=6,this.fireBallCd=10,this.playExtendHeadAni(function(){e.standing=!1,e.releasing=!1,e.baseData.buffData.removeBuff(s.pzaBuffType.UNABLE_SELECT),e.baseData.buffData.removeBuff(s.pzaBuffType.INVINCIBLE)})},a.prototype.fireBall=function(){var e=this,a=l.pzaUtil.getRandomNum(0,4),t=Math.random()>.5,o=function(){d.pzaEffectManager.createDrZomBallEffect(t,a,e.atk)};this.releasing=!0,this.fireBallCd=-1;var n=function(){e.animation.playAnimation("attack1_idle",!0),e.backHeadTime=6,e.releasing=!1};p.pzaSoundManager.playAudio("bossboulderattack"),t?this.playSpoutFireBallAni(a,o,n):this.playSpoutIceBallAni(a,o,n)},a.prototype.hurt=function(e,a,t){if(void 0===t&&(t=u.pzaAttackType.FLOOR_ATK),h.pzaGameState.critValue>0&&Math.random()<h.pzaGameState.critValue&&(e=Math.round(1.5*e)),this.baseData&&!this.baseData.isDead){if(this.baseData.hurtZombie(e),this.baseData.isDead||this.baseData.hp<=0)return window.pzazombieManager.clearAllZombie(),void this.playDeathAni(function(){r.pzaGameManager.passPart(cc.v2())});this.refreshHurtState(!1),this.animation.flash();var o="shieldhit"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(o)}},a.prototype.refreshHurtState=function(e){if(e)this.zombieIntact();else if(null!=this.baseData&&null!=this.baseData.zombieData){var a=this.baseData.hp/this.baseData.maxHp;a<=.5?(this.zombieHurtState!=c.pzaHurtStateEnum.DYING&&this.zombieDying(),-1==this.bangCarCd&&(this.bangCarCd=0,this.mustBangCar=!0),-1==this.trampleCd&&this.randomTrampleCd()):a<=.8?(this.zombieHurtState!=c.pzaHurtStateEnum.HURT&&this.zombieHurt(),-1==this.bungeeCd&&(this.bungeeCd=0,this.mustBungee=!0)):this.zombieHurtState!=c.pzaHurtStateEnum.INTACT&&this.zombieIntact()}},a.prototype.refreshOrientation=function(){null!=this.baseData&&null!=this.baseData.zombieData&&(this.node.scaleX=-this.baseData.zombieData.direction)},a.prototype.zombieDying=function(){this.zombieHurtState=c.pzaHurtStateEnum.DYING,this.animation.setAnimationSkin("skin3")},a.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,this.animation.setAnimationSkin("skin2")},a.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT,this.animation.setAnimationSkin("skin1"),this.animation.node.color=new cc.Color(255,255,255,255)},a.prototype.playEnterAni=function(e){var a=this;this.animation.playAnimation("ruchang1",!1,function(){a.animation.playAnimation("idle",!0),e&&e(),p.pzaSoundManager.playBgm(p.pzaBGMName.ZOMBIEBOSS_BGM)},function(){p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()})},a.prototype.playExtendHeadAni=function(e){var a=this;this.animation.playAnimation("attack1_xia",!1,function(){a.animation.playAnimation("attack1_idle",!0),e&&e()},function(){p.pzaSoundManager.playAudio("hydraulic")})},a.prototype.playBackHeadAni=function(e){var a=this;this.animation.playAnimation("attack1_qi_1",!1,function(){a.animation.playAnimation("idle",!0),e&&e()},function(){a.baseData.buffData.removeBuff(s.pzaBuffType.FROST),p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()})},a.prototype.playHandZombieAni=function(e,a,t){var o="put1_"+(e+1);this.animation.playAnimation(o,!1,t,a),p.pzaSoundManager.playAudio("hydraulic_short")},a.prototype.playHandBungeeAni=function(e){var a="put"+(e+1)+"_1";this.animation.playAnimation(a,!1,null)},a.prototype.playBackFingerAni=function(e){var a=this,t=!1;if(this.fingerZombies.forEach(function(e){null!=e&&!e.isDead&&e.isBeControlled()&&(t=!0)}),t)this.backFingerTime=.1;else{this.fingerZombies.forEach(function(e){e.zombieData.zomBossFinger=null}),this.fingerZombies.clear();var o="put"+(e+1)+"_3";this.animation.playAnimation(o,!1,function(){a.releasing=!1,a.randomBungeeCd(),a.randomCommonCd()})}},a.prototype.playSpoutFireBallAni=function(e,a,t){var o="attack2_"+(5-e);this.animation.playAnimation(o,!1,t,a)},a.prototype.playSpoutIceBallAni=function(e,a,t){var o="attack3_"+(5-e);this.animation.playAnimation(o,!1,t,a)},a.prototype.playTrampleAni=function(e,a,t){var o="trample1_"+(5-e);this.animation.playAnimation(o,!1,t,a)},a.prototype.playBangCarAni=function(e,a,t,o){var n="attack4_"+(4*e+5-a);this.animation.playAnimation(n,!1,o,t)},a.prototype.playDeathAni=function(e){var a=this;this.animation.closeFlash(),this.refreshFrostState(!0),this.preventBreak();var t=function(){p.pzaSoundManager.playAudio("gargantudeath"),p.pzaSoundManager.playAudio("bossdie"),a.animation.playAnimation("death",!1,function(){a.animation.playAnimation("death_idle_2",!0),e&&e()},function(){p.pzaSoundManager.playAudio("explosion")})};this.standing?t():this.animation.playAnimation("death_idle_1",!1,function(){t()})},a.prototype.getZombieHeadWps=function(e){if(null==e)return null;var a=h.pzaGameState.map.getXInterval(8)/2,t=h.pzaGameState.map.getYInterval(e)/2,o=h.pzaGameState.map.getBlockLogicPos(8,e,a,t);return this.node&&this.node.parent?this.node.parent.convertToWorldSpaceAR(o):cc.v2(0,0)},a.prototype.pauseSelf=function(){this.animation.pauseAnimation()},a.prototype.randomZombieCd=function(){var e=this.baseData.hp/this.baseData.maxHp;this.normalZombieCd=e>=1?5:e>=.8?l.pzaUtil.getRandomFloatNum(4.5,5.5):e>=.5?l.pzaUtil.getRandomFloatNum(3.5,4.5):l.pzaUtil.getRandomFloatNum(1.5,2.5)},a.prototype.randomBungeeCd=function(){var e=this.baseData.hp/this.baseData.maxHp;this.bungeeCd=e>=.8?-1:l.pzaUtil.getRandomFloatNum(40,50)},a.prototype.randomBangCarCd=function(){var e=this.baseData.hp/this.baseData.maxHp;this.bangCarCd=e>=.8?-1:l.pzaUtil.getRandomFloatNum(40,50)},a.prototype.randomTrampleCd=function(){var e=this.baseData.hp/this.baseData.maxHp;this.trampleCd=e>=.5?-1:l.pzaUtil.getRandomFloatNum(55,65)},a.prototype.randomExtendHeadCd=function(){var e=this.baseData.hp/this.baseData.maxHp;this.extendHeadCd=e>=.8?50:l.pzaUtil.getRandomFloatNum(40,50)},a.prototype.randomCommonCd=function(){this.commonCd=l.pzaUtil.getRandomFloatNum(1,2)},a.prototype.bangCarResetCd=function(){this.extendHeadCd=50,this.trampleCd=40,this.bangCarCd=this.bungeeCd=65,this.normalZombieCd=5},a.prototype.updateRoleBuff=function(a){e.prototype.updateRoleBuff.call(this,a);var t=1,o=this.baseData.buffData.releaseBuff(s.pzaBuffType.FROST);null!=o&&(t-=o.buffValue),this.animation.changeAnimationTimeScale(t)},a.prototype.refreshFrostState=function(e){return e?(this.showFrost=!1,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"))):null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis?void 0:this.baseData.isDead||!this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)||this.showFrost?!this.baseData.isDead&&this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)||!this.showFrost?void 0:(this.showFrost=!1,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"))):(this.showFrost=!0,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#3B95FF")))},a.prototype.blink=function(e){if(!(this.baseData.hp/this.baseData.maxHp>.1))if(this.baseData.isDead||this.baseData.buffData.hasBuff(s.pzaBuffType.FROST))this.blinkTime>0&&(this.blinkTime=0);else{var a;this.blinkTime+=e,this.blinkTime>.6&&(this.blinkTime=0),a=this.blinkTime<=.3?255-this.blinkTime/.3*122:122+(this.blinkTime-.3)/.3*122,this.animation.node.color=new cc.Color(a,a,a,255)}},i([z],a)}(m.pzaBaseZombie));t.pzaDrZomBoss=y,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie"}],pzaDropCard:[function(e,a,t){"use strict";cc._RF.push(a,"94b08Rs2DtFaZTn5L6m+n0u","pzaDropCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDropCard=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameConfig"),l=e("../../Common/pzaGameManager"),s=e("../../Common/pzaOperationMgr"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaSpineController"),d=e("../../Common/pzaSpriteFrameManager"),h=e("../../Common/pzaUIManager"),m=e("../../Common/pzaUtil"),f=e("../../Common/pzaWorldEventManager"),z=e("../../Load/pzaPreLoadManager"),y=e("../../View/Battle/pzaNewPlantView"),g=e("../../View/Battle/pzaPlantCard"),v=e("../../View/pzaAniMask"),b=e("../../View/pzaCommonMask"),P=e("../Data/pzaDropType"),C=e("../Data/pzaPlantEnum"),E=e("../pzaEffectManager"),S=e("../pzaGameState"),_=cc._decorator,D=_.ccclass,M=_.property,w=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.arrow=null,a.node_finger=null,a.cardBoard=null,a.cardIcon=null,a.professorSP=null,a.cardPrice=null,a.propNode=null,a.shovel=null,a.handbook=null,a.baconic=null,a.taco=null,a.sprinkler=null,a.paper=null,a.coinPackage=null,a.trophy=null,a.sliverTrophy=null,a.goldTrophy=null,a.lightAni=null,a.priceSP=null,a.drop_beltEquip=null,a.curDropType=null,a.curPlantType=null,a.canClick=!1,a.clickCall=null,a}return n(a,e),a.prototype.showCard=function(e,a,t,o){void 0===o&&(o=null),s.pzaOperationMgr.hideTips(),this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(t),this.curDropType=e,this.curPlantType=a,this.clickCall=o,this.arrow.active=!1,this.node_finger.active=!1,this.canClick=!1,this.lightAni.node.active=!1,this.curDropType==P.pzaDropType.PLANT_CARD?(this.propNode.active=!1,this.cardBoard.node.active=!0,this.playCardDropAni(t)):(this.propNode.active=!0,this.cardBoard.node.active=!1,this.playPropDropAni(t)),this.setPlantCardSP(a)},a.prototype.setPlantCardSP=function(e){var a=p.pzaGameConfig.getPlantConfig(e);a?(d.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),d.pzaSpriteFrameManager.loadPlantProfess(a.profession,this.professorSP),d.pzaSpriteFrameManager.loadPlantCardSlotFrame(this.cardBoard,e,e==C.pzaPlantEnum.IMITATER),d.pzaSpriteFrameManager.loadPlantCardPriceFrame(this.priceSP.getComponent(cc.Sprite),e,e==C.pzaPlantEnum.IMITATER),g.pzaPlantCard.fixCardStyle(this.priceSP.getComponent(cc.Sprite),this.cardPrice,this.cardIcon.node,this.professorSP.node)):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",e)},a.prototype.playCardDropAni=function(e){var a=this,t=p.pzaGameConfig.getPlantConfig(this.curPlantType);d.pzaSpriteFrameManager.loadPlantCard(this.curPlantType,this.cardIcon),this.setPlantCardSP(t.plantType),this.cardPrice.string=""+t.price,this.cardBoard.node.stopAllActions(),this.cardBoard.node.opacity=255,this.cardBoard.node.setPosition(cc.v2());var o=e.x>500?-350:Math.random()>.5?-50:50,n=e.y>-200?-60:-e.y-200;this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(o,n),60,1),cc.callFunc(function(){a.canClick=!0,a.showArrow(),c.pzaSoundManager.playAudio("poleland")})))},a.prototype.playPropDropAni=function(e){var a=this;this.shovel.active=this.curDropType==P.pzaDropType.SHOVEL,this.paper.active=this.curDropType==P.pzaDropType.CG_PAPER,this.handbook.active=this.curDropType==P.pzaDropType.HAND_BOOK,this.baconic.active=this.curDropType==P.pzaDropType.BACONIC,this.taco.active=this.curDropType==P.pzaDropType.TACO,this.sprinkler.active=this.curDropType==P.pzaDropType.SPRINKLER,this.coinPackage.active=this.curDropType==P.pzaDropType.COIN_PACKAGE;var t=[P.pzaDropType.SURVIVAL_TROPHY,P.pzaDropType.ZOMBIE_TROPHY,P.pzaDropType.VASE_TROPHY,P.pzaDropType.MINIGAME_TROPHY];this.trophy.active=t.includes(this.curDropType),this.sliverTrophy.active=this.curDropType==P.pzaDropType.SLIVER_TROHPY,this.goldTrophy.active=this.curDropType==P.pzaDropType.GOLD_TROHPY,this.drop_beltEquip.active=this.curDropType==P.pzaDropType.BELT_EQUIP,S.pzaGameState.isTryMode(S.pzaGameState.curChapter,S.pzaGameState.curPart)&&(this.trophy.active=!0),this.propNode.stopAllActions(),this.propNode.opacity=255,this.propNode.setPosition(cc.v2());var o=e.x>500?-150:Math.random()>.5?-50:50,n=e.y>-200?-60:-e.y-200;this.propNode.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(o,n),60,1),cc.callFunc(function(){a.canClick=!0,a.showArrow(),a.lightAni.node.position=a.propNode.position})))},a.prototype.clickCard=function(){var e=this;if(this.canClick){c.pzaSoundManager.stopBgm(),5==S.pzaGameState.curChapter&&10==S.pzaGameState.curPart?c.pzaSoundManager.playAudio("finalfanfare"):c.pzaSoundManager.playAudio("winmusic"),b.pzaCommonMask.showMask(),S.pzaGameState.gamePause=!0,this.canClick=!1,this.arrow.active=!1,this.node_finger.active=!1,f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_WIN,null);var a=this.curDropType==P.pzaDropType.PLANT_CARD?this.cardBoard.node:this.propNode;S.pzaGameState.newDropType=this.curDropType,S.pzaGameState.newDropPlant=this.curPlantType;var t=cc.v2(-a.x,-a.y-37),o=function(){if(b.pzaCommonMask.hideMask(),a.runAction(cc.fadeOut(1)),S.pzaGameState.gameMode!=S.pzaGameMode.ZOMBIE_ENDLESS&&S.pzaGameState.gameMode!==S.pzaGameMode.VASE_ENDLESS)if(e.curDropType!=P.pzaDropType.COIN_PACKAGE)if(e.curDropType!=P.pzaDropType.TRY_TROPHY)if(e.curDropType!=P.pzaDropType.SLIVER_TROHPY&&e.curDropType!=P.pzaDropType.GOLD_TROHPY)if(e.curDropType==P.pzaDropType.CG_PAPER)h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.CG_PAPER_VIEW,null);else{var t=function(e){e?h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.NEW_PLANT_VIEW,function(e){(e&&e.getComponent(y.pzaNewPlantView)).showView(S.pzaGameState.newDropType,S.pzaGameState.newDropPlant)}):v.pzaAniMask.showMask(function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.NEW_PLANT_VIEW,function(e){v.pzaAniMask.hideMask(),(e&&e.getComponent(y.pzaNewPlantView)).showView(S.pzaGameState.newDropType,S.pzaGameState.newDropPlant)})})};switch(e.curDropType){case P.pzaDropType.BELT_EQUIP:case P.pzaDropType.HAND_BOOK:case P.pzaDropType.SHOVEL:case P.pzaDropType.BACONIC:case P.pzaDropType.TACO:case P.pzaDropType.SPRINKLER:case P.pzaDropType.SURVIVAL_TROPHY:case P.pzaDropType.ZOMBIE_TROPHY:case P.pzaDropType.VASE_TROPHY:case P.pzaDropType.MINIGAME_TROPHY:t(!1);break;default:t(!0)}}else l.pzaGameManager.getCurrentGame().partWin();else S.pzaGameState.isTryMode(S.pzaGameState.curChapter,S.pzaGameState.curPart)&&(window.pzaGuideManager.guidePlant=null,window.pzaGuideManager.guideType=null,m.pzaUtil.changeGameSpeed(1),h.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),e.clickRiderFall(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.BACK_HOMEVIEW,null),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.removeBattleUI());else l.pzaGameManager.getCurrentGame().partWin()};if(S.pzaGameState.gameMode==S.pzaGameMode.ZOMBIE_ENDLESS||S.pzaGameState.gameMode==S.pzaGameMode.VASE_ENDLESS?this.node.runAction(cc.sequence(cc.delayTime(this.curDropType==P.pzaDropType.COIN_PACKAGE?.6:0),cc.callFunc(o),cc.fadeOut(1),cc.callFunc(function(){e.close()}))):this.node.runAction(cc.sequence(cc.delayTime(this.curDropType==P.pzaDropType.COIN_PACKAGE?.6:0),cc.callFunc(function(){e.lightAni.node.active=!0,e.lightAni.node.setPosition(cc.v2(a.x,a.y+37)),e.curDropType==P.pzaDropType.PLANT_CARD&&(e.lightAni.node.x+=e.cardBoard.node.width/2,e.lightAni.node.y-=e.cardBoard.node.height/2),e.lightAni.playAnimation("idle1",!1,function(){})}),cc.moveTo(3,t),cc.delayTime(1),cc.callFunc(o),cc.fadeOut(1),cc.callFunc(function(){e.close()}))),this.curDropType==P.pzaDropType.COIN_PACKAGE)if(S.pzaGameState.gameMode==S.pzaGameMode.ZOMBIE_ENDLESS)this.createDiamond();else{var n=3;(S.pzaGameState.curChapter>5||S.pzaGameState.gameMode==S.pzaGameMode.SURVIVAL||S.pzaGameState.gameMode==S.pzaGameMode.ZOMBIE_ENERMY||S.pzaGameState.gameMode===S.pzaGameMode.VASE||S.pzaGameState.isMiniMode())&&(n=5),this.createPackageCoin(n)}else this.curDropType==P.pzaDropType.VASE_TROPHY?this.createPackageCoin(5):this.curDropType==P.pzaDropType.SURVIVAL_TROPHY||this.curDropType==P.pzaDropType.ZOMBIE_TROPHY||this.curDropType==P.pzaDropType.MINIGAME_TROPHY?this.createDiamond():this.curDropType==P.pzaDropType.TRY_TROPHY&&S.pzaGameState.isTryMode(S.pzaGameState.curChapter,S.pzaGameState.curPart)&&console.log("\u8bd5\u73a9\u6a21\u5f0f\u4e0d\u9001\u91d1\u5e01");f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.ONCLICK_DROPCARD,null),this.clickCall&&this.clickCall()}},a.prototype.createPackageCoin=function(e){var a=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y),t=cc.v2(this.node.x+this.propNode.x-112,this.node.y+this.propNode.y+132),o=cc.v2(this.node.x+this.propNode.x-65,this.node.y+this.propNode.y+182),n=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y+200),i=cc.v2(this.node.x+this.propNode.x+65,this.node.y+this.propNode.y+182),r=cc.v2(this.node.x+this.propNode.x+112,this.node.y+this.propNode.y+132);E.pzaEffectManager.createPartRewardCoin(P.pzaDropType.GOLD_COIN,a,t),E.pzaEffectManager.createPartRewardCoin(P.pzaDropType.GOLD_COIN,a,n),E.pzaEffectManager.createPartRewardCoin(P.pzaDropType.GOLD_COIN,a,r),5==e&&(E.pzaEffectManager.createPartRewardCoin(P.pzaDropType.GOLD_COIN,a,o),E.pzaEffectManager.createPartRewardCoin(P.pzaDropType.GOLD_COIN,a,i)),window.pzaMapManager.showCoinUI()},a.prototype.createDiamond=function(){var e=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y),a=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y+200);E.pzaEffectManager.createPartRewardCoin(P.pzaDropType.DIAMOND,e,a),window.pzaMapManager.showCoinUI()},a.prototype.clickRiderFall=function(){s.pzaOperationMgr.showRiderFall()},a.prototype.showArrow=function(){var e=this.curDropType==P.pzaDropType.PLANT_CARD?this.cardBoard.node:this.propNode;this.arrow.active=!1,this.arrow.stopAllActions();var a=cc.v2(e.x,e.y+110);this.arrow.setPosition(a),this.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(a.x,a.y+20)),cc.moveTo(.2,cc.v2(a.x,a.y))))),this.node_finger.active=!0;var t=cc.v2(e.x-8,e.y+15);this.curDropType==P.pzaDropType.PLANT_CARD?t.x+=this.cardBoard.node.width/2:this.curDropType==P.pzaDropType.CG_PAPER&&(t.x+=16),this.node_finger.setPosition(t)},a.prototype.pauseSelf=function(){this.arrow.pauseAllActions()},a.prototype.resumeSelf=function(){this.arrow.resumeAllActions()},i([M({displayName:"\u7bad\u5934",type:cc.Node})],a.prototype,"arrow",void 0),i([M({displayName:"\u624b\u6307",type:cc.Node})],a.prototype,"node_finger",void 0),i([M({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([M({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([M({displayName:"\u804c\u4e1a\u89d2\u6807",type:cc.Sprite})],a.prototype,"professorSP",void 0),i([M({displayName:"\u5361\u7247\u4ef7\u683c",type:cc.Label})],a.prototype,"cardPrice",void 0),i([M({displayName:"\u9053\u5177\u8282\u70b9",type:cc.Node})],a.prototype,"propNode",void 0),i([M({displayName:"\u94f2\u5b50",type:cc.Node})],a.prototype,"shovel",void 0),i([M({displayName:"\u56fe\u9274",type:cc.Node})],a.prototype,"handbook",void 0),i([M({displayName:"\u57f9\u6839",type:cc.Node})],a.prototype,"baconic",void 0),i([M({displayName:"\u7389\u7c73\u5377",type:cc.Node})],a.prototype,"taco",void 0),i([M({displayName:"\u6c34\u58f6",type:cc.Node})],a.prototype,"sprinkler",void 0),i([M({displayName:"\u7eb8\u6761",type:cc.Node})],a.prototype,"paper",void 0),i([M({displayName:"\u94b1\u888b",type:cc.Node})],a.prototype,"coinPackage",void 0),i([M({displayName:"\u5956\u676f",type:cc.Node})],a.prototype,"trophy",void 0),i([M({displayName:"\u94f6\u5956\u676f",type:cc.Node})],a.prototype,"sliverTrophy",void 0),i([M({displayName:"\u91d1\u5956\u676f",type:cc.Node})],a.prototype,"goldTrophy",void 0),i([M({displayName:"\u5149\u52a8\u753b",type:u.pzaSpineController})],a.prototype,"lightAni",void 0),i([M({displayName:"\u690d\u7269\u4ef7\u683c\u80cc\u666f",type:cc.Node})],a.prototype,"priceSP",void 0),i([M(cc.Node)],a.prototype,"drop_beltEquip",void 0),i([D],a)}(r.pzaBaseComponent);t.pzaDropCard=w,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewPlantView":"pzaNewPlantView","../../View/Battle/pzaPlantCard":"pzaPlantCard","../../View/pzaAniMask":"pzaAniMask","../../View/pzaCommonMask":"pzaCommonMask","../Data/pzaDropType":"pzaDropType","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDropCoin:[function(e,a,t){"use strict";cc._RF.push(a,"b02987q0AFJKLS8MgxGVLpM","pzaDropCoin");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDropCoin=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaBaseComponent"),s=e("../../Common/pzaGameCommonPool"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaNodeManager"),d=e("../../Common/pzaSoundManager"),h=e("../../Common/pzaSpineController"),m=e("../../Common/pzaTipManager"),f=e("../../Common/pzaUtil"),z=e("../../Common/pzaWorldEventManager"),y=e("../../Garden/pzaGardenMgr"),g=e("../Data/pzaDropType"),v=e("../pzaEffectManager"),b=e("../pzaGameState"),P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.animation=null,a.dropGardenPot=null,a.poolPrefab=null,a.liveTime=0,a.liveTimeMax=5,a.disappearing=!1,a.picked=!1,a.clicked=!1,a.curDropType=null,a.isGameWin=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GAME_WIN,this.winMove,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.AUTO_PICK,this.autoClick,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.PASS_PICK,this.winMove,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GAME_WIN,this.gameWin,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this),this.isGameWin=!1},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GAME_WIN,this.winMove,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.AUTO_PICK,this.autoClick,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.PASS_PICK,this.winMove,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GAME_WIN,this.gameWin,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this)},a.prototype.clearScreen=function(){},a.prototype.gameWin=function(){this.isGameWin=!0},a.prototype.pauseSelf=function(){this.picked||(this.animation.pauseAnimation(),this.node.pauseAllActions())},a.prototype.resumeSelf=function(){this.animation.resumeAnimation(),this.node.resumeAllActions()},a.prototype.init=function(e,a){var t=this;this.clicked=!1,this.animation.node.active=!1,this.dropGardenPot.active=!1,this.curDropType=e,cc.Tween.stopAllByTarget(this.node),e==g.pzaDropType.SILVER_COIN?(d.pzaSoundManager.playAudio("pickSilver"),this.animation.node.active=!0,this.animation.playAnimation("pr3",!0)):e==g.pzaDropType.GOLD_COIN?(this.animation.node.active=!0,d.pzaSoundManager.playAudio("moneyfalls"),this.animation.node.active=!0,this.animation.playAnimation("pr2",!0)):e==g.pzaDropType.GARDEN_PLANT?(this.dropGardenPot.active=!0,this.dropGardenPot.scale=1.3,d.pzaSoundManager.playAudio("chime")):(this.animation.node.active=!0,d.pzaSoundManager.playAudio("chime"),this.animation.playAnimation("pr1_2",!0)),this.liveTime=0,this.disappearing=!1,this.picked=!1,this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(cc.v2(a.x,a.y+50*Math.random()));var o=f.pzaUtil.getRandomFloatNum(-40,40),n=a.x+o;n>500&&(n=500+o),n<-320&&(n=-320+o),n=Math.min(n,cc.winSize.width/2-100),this.node.runAction(cc.sequence(cc.jumpTo(.6,cc.v2(n,a.y+50*Math.random()),80,1),cc.callFunc(function(){b.pzaGameState.autoPickLeft<=0||t.autoClick()}))),window.pzaMapManager.DropCoinSet.add(this)},a.prototype.initPartRewardCoin=function(e,a,t){var o=this;this.curDropType=e,this.clicked=!1,this.animation.node.active=e!=g.pzaDropType.GARDEN_PLANT,this.dropGardenPot.active=e==g.pzaDropType.GARDEN_PLANT,e==g.pzaDropType.SILVER_COIN?(d.pzaSoundManager.playAudio("pickSilver"),this.animation.playAnimation("pr3",!0),this.animation.pauseAnimation()):e==g.pzaDropType.GOLD_COIN?(this.animation.playAnimation("pr2",!0),this.animation.pauseAnimation()):e==g.pzaDropType.GARDEN_PLANT?(this.dropGardenPot.scale=1.3,d.pzaSoundManager.playAudio("chime")):(d.pzaSoundManager.playAudio("pickDiamond"),this.animation.playAnimation("pr1_2",!0),this.animation.pauseAnimation()),this.liveTime=0,this.disappearing=!0,this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(a),this.node.runAction(cc.sequence(cc.moveTo(.5,t).easing(cc.easeQuarticActionOut()),cc.delayTime(.1),cc.callFunc(function(){o.moveToUI()}))),window.pzaMapManager.showCoinUI()},a.prototype.logicUpdate=function(e){this.disappearing||(this.liveTime+=e,this.liveTime>=this.liveTimeMax&&this.disappear())},a.prototype.disappear=function(){var e=this;window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,b.pzaGameState.pickCoinCount=0,b.pzaGameState.pickGoldCnt=0,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.close.bind(e)})))},a.prototype.moveToUI=function(){var e,a=this;if(window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,this.picked=!0,null==(e=b.pzaGameState.coinMoveUIPos))return this.addCoin(),void this.close();var t=u.pzaNodeManager.getBattleUINode();this.node.setParent(t),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,e).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),cc.callFunc(function(){a.addCoin(),a.close()})))},a.prototype.autoClick=function(){this.curDropType&&this.clickCoin()},a.prototype.clickCoin=function(){b.pzaGameState.gamePause||this.disappearing||this.clicked||(this.curDropType==g.pzaDropType.GARDEN_PLANT?(this.dropGardenPot.scale=.8,this.liveTime=2,y.default.instance().dropGardenPlant(),m.pzaTipManager.showGameTip("\u4f60\u627e\u5230\u4e86\u4e00\u4e2a\u624b\u529e\uff0c\u53bb\u6536\u85cf\u5ba4\u770b\u770b\u5427\uff01"),this.clicked=!0,v.pzaEffectManager.createStarFruitEffect(this.node.getPosition(),!1)):this.curDropType==g.pzaDropType.SILVER_COIN?d.pzaSoundManager.playAudio("pickSilver"):this.curDropType==g.pzaDropType.GOLD_COIN?d.pzaSoundManager.playAudio("pickGold"):d.pzaSoundManager.playAudio("pickDiamond"),this.moveToUI(),window.pzaMapManager.showCoinUI(),c.pzaLocalData.data.firstPickCoinTip||(m.pzaTipManager.showGameTip("\u5b58\u94b1\u6765\u4e70\u66f4\u9177\u7684\u9053\u5177\u5427\uff01"),c.pzaLocalData.data.firstPickCoinTip=!0,c.pzaLocalData.addDirty("firstPickCoinTip")),b.pzaGameState.pickGoldCnt++,p.default.instance().canGetAchieve(r.pzaAchieveType.ACH_9,b.pzaGameState.pickGoldCnt)&&b.pzaGameState.achieveArr.push(r.pzaAchieveType.ACH_9))},a.prototype.winMove=function(){this.disappearing||(this.moveToUI(),window.pzaMapManager.showCoinUI())},a.prototype.absorbMove=function(e){var a=this;this.disappearing||this.clicked||(window.pzaMapManager.showCoinUI(),window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.8,e).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.6),cc.fadeOut(.2))),cc.callFunc(function(){a.addCoin(),a.close()}))))},a.prototype.addCoin=function(){var e=10;this.curDropType==g.pzaDropType.GOLD_COIN?e=50:this.curDropType==g.pzaDropType.DIAMOND&&(e=1e3),b.pzaGameState.getCoinByGameOnce+=e,c.pzaLocalData.bpGetGold(e),c.pzaLocalData.data.coin+=e,d.pzaSoundManager.playAudio("pickCoin")},a.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([E({displayName:"\u52a8\u753b",type:h.pzaSpineController})],a.prototype,"animation",void 0),i([E({displayName:"\u6389\u843d\u82b1\u76c6",type:cc.Node})],a.prototype,"dropGardenPot",void 0),i([E(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([C],a)}(l.pzaBaseComponent);t.pzaDropCoin=S,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenMgr":"pzaGardenMgr","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDropPlantCard:[function(e,a,t){"use strict";cc._RF.push(a,"7565dzkeSxE9Z+ln9bhzrSX","pzaDropPlantCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDropPlantCard=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameConfig"),l=e("../../Common/pzaSoundManager"),s=e("../../Common/pzaSpriteFrameManager"),c=e("../../Common/pzaWorldEventManager"),u=e("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardBoard=null,a.cardBoardFrames=[],a.cardIcon=null,a.mask=null,a.curPlantType=null,a.lifeTime=0,a.blink=!1,a.blinkTime=0,a.select=!1,a.canBeClick=!0,a.leftDropDis=0,a.isGuideCard=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.cardIcon.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.cardIcon.node.scaleX=1,c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.cardIcon.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},a.prototype.show=function(e,a,t){this.curPlantType=e,this.lifeTime=0,this.blinkTime=0,this.blink=!1,this.select=!1,this.canBeClick=t;var o=p.pzaGameConfig.getPlantConfig(this.curPlantType);s.pzaSpriteFrameManager.loadPlantCard(this.curPlantType,this.cardIcon),this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.mask.active=!1,this.node.setPosition(a),this.cardBoard.node.setPosition(0,0),this.cardIcon.node.scaleX=1,this.canBeClick||this.onDisable()},a.prototype.init=function(e,a,t){this.show(e,a,!0),this.showDropAni(a,t)},a.prototype.miniInit=function(e,a){this.show(e,a,!0),this.leftDropDis=p.pzaGameConfig.getRandomSunDis()},a.prototype.logicUpdate=function(e){if(this.canBeClick){if(!(this.leftDropDis>0))return this.lifeTime+=e,this.blink?(this.blinkTime+=e,void(this.blinkTime>=3&&!this.select&&this.close())):this.lifeTime>=10?(this.blink=!0,this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150,void this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeTo(.4,150))))):void 0;this.drop(e)}},a.prototype.drop=function(e){if(!(this.leftDropDis<=0)){var a=e*p.pzaGameConfig.autoSunSpeed;a>this.leftDropDis&&(a=this.leftDropDis),this.leftDropDis-=a,this.node.y=this.node.y-a}},a.prototype.showDropAni=function(e,a){this.cardBoard.node.stopAllActions(),this.cardBoard.node.setPosition(cc.v2());var t=e.x>550?-50:Math.random()>.5?-30:30,o=e.y>-290?-20:0;this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(t,o),60,1),cc.callFunc(function(){a&&a()})))},a.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.mask.pauseAllActions(),this.cardBoard.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.mask.resumeAllActions(),this.cardBoard.node.resumeAllActions()},a.prototype.clickCard=function(){var e=this;if(this.isGuideCard)return window.pzaGuideManager.guideStepNext(),void this.close();this.canBeClick&&!u.pzaGameState.gamePause&&(this.select=!this.select,this.select?(u.pzaGameState.selectCard=null,u.pzaGameState.selectPlant=null,this.scheduleOnce(function(){e.select&&(u.pzaGameState.selectCard=u.pzaSelectCardType.DROP_CARD,u.pzaGameState.selectPlant=e.curPlantType,e.select=!0,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null))},.3),u.pzaGameState.cobCannon=null,l.pzaSoundManager.playAudio("selectPlant"),this.blink?(this.mask.stopAllActions(),this.mask.opacity=170,this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,100),cc.fadeTo(.4,170))))):(this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150),window.pzaplantManager.dropPlantCards.forEach(function(a){a!=e&&null!=a&&a.disSelect()})):(u.pzaGameState.selectCard=null,u.pzaGameState.selectPlant=null,u.pzaGameState.cobCannon=null,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0)),this.leftDropDis>0&&(this.leftDropDis=0))},a.prototype.selectCard=function(){u.pzaGameState.selectCard!=u.pzaSelectCardType.DROP_CARD&&this.disSelect()},a.prototype.disSelect=function(){this.select&&(this.select=!1,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0))},a.prototype.plant=function(){return!!this.select&&(this.close(),!0)},a.prototype.close=function(){this.cardIcon&&this.cardIcon.node&&(this.cardIcon.node.scaleX=1),e.prototype.close.call(this),this.select&&(u.pzaGameState.selectCard=null,u.pzaGameState.selectPlant=null)},i([m({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([m({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],a.prototype,"cardBoardFrames",void 0),i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([m({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([h],a)}(r.pzaBaseComponent);t.pzaDropPlantCard=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaDropType:[function(e,a,t){"use strict";cc._RF.push(a,"3c472Cq/v5PIIVOFNjzovjN","pzaDropType"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDropType=void 0,function(e){e[e.PLANT_CARD=1]="PLANT_CARD",e[e.SHOVEL=2]="SHOVEL",e[e.CG_PAPER=3]="CG_PAPER",e[e.HAND_BOOK=4]="HAND_BOOK",e[e.SILVER_COIN=5]="SILVER_COIN",e[e.GOLD_COIN=6]="GOLD_COIN",e[e.DIAMOND=7]="DIAMOND",e[e.BACONIC=8]="BACONIC",e[e.TACO=9]="TACO",e[e.SPRINKLER=10]="SPRINKLER",e[e.COIN_PACKAGE=11]="COIN_PACKAGE",e[e.SURVIVAL_TROPHY=12]="SURVIVAL_TROPHY",e[e.ZOMBIE_TROPHY=13]="ZOMBIE_TROPHY",e[e.VASE_TROPHY=14]="VASE_TROPHY",e[e.MINIGAME_TROPHY=15]="MINIGAME_TROPHY",e[e.TOKEN_COIN=19]="TOKEN_COIN",e[e.GARDEN_PLANT=20]="GARDEN_PLANT",e[e.GARDEN_CHOCOLATE=21]="GARDEN_CHOCOLATE",e[e.DROP_KEY=22]="DROP_KEY",e[e.PLANT_SKIN=23]="PLANT_SKIN",e[e.ACTIVITY_GIFT=24]="ACTIVITY_GIFT",e[e.TRY_TROPHY=25]="TRY_TROPHY",e[e.SLIVER_TROHPY=26]="SLIVER_TROHPY",e[e.GOLD_TROHPY=27]="GOLD_TROHPY",e[e.BELT_EQUIP=28]="BELT_EQUIP"}(t.pzaDropType||(t.pzaDropType={})),cc._RF.pop()},{}],pzaDuckyTubeBucketZombie:[function(e,a,t){"use strict";cc._RF.push(a,"829a66bKDxAAJGwm9LZe+Pp","pzaDuckyTubeBucketZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDuckyTubeBucketZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaZombieEnum"),s=e("../Plant/pzaAttackType"),c=e("./pzaBaseZombie"),u=e("./pzaZombieSlot"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName="zombie_head_1",a.equip1Slot=u.pzaZombieSlotType.hat_iron,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.y=0},a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[u.pzaZombieSlotType.hat_iron,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.hat_iron).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.hat_iron+"1",58.26,-31.36,-90.67)).addState(new u.pzaZombieSlotAtt(2,u.pzaZombieSlotType.hat_iron+"2",58.26,-31.36,-90.67)).addState(new u.pzaZombieSlotAtt(3,u.pzaZombieSlotType.hat_iron+"3",52.96,-14.3,-90.67))]])},a.prototype.zombieHurtSound=function(e){if(e==s.pzaAttackType.KNOCK)r.pzaSoundManager.playAudio("bangzombie");else if(this.hasEquip){var a="shieldhit"+p.pzaUtil.getRandomNum(1,2);this.baseData.zombieData.zombieType==l.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&(a="plastichit"+p.pzaUtil.getRandomNum(1,2)),r.pzaSoundManager.playAudio(a)}else a="zombieHurt"+p.pzaUtil.getRandomNum(1,2),r.pzaSoundManager.playAudio(a)},i([h],a)}(c.pzaBaseZombie));t.pzaDuckyTubeBucketZombie=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDuckyTubeConeZombie:[function(e,a,t){"use strict";cc._RF.push(a,"ec97fCWqtpGvpJ4aPzTm0vt","pzaDuckyTubeConeZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDuckyTubeConeZombie=void 0;var r=e("./pzaDuckyTubeZombie"),p=e("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=p.pzaZombieSlotType.hat,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.hat+"1",14.88,7.05,-90.67)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.hat+"2",14.88,7.05,-90.67)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.hat+"3",14.3,7.05,-90.67))]])},i([s],a)}(r.pzaDuckyTubeZombie));t.pzaDuckyTubeConeZombie=c,cc._RF.pop()},{"./pzaDuckyTubeZombie":"pzaDuckyTubeZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDuckyTubeZombie:[function(e,a,t){"use strict";cc._RF.push(a,"045b3WlsgBOGY909sopESqJ","pzaDuckyTubeZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDuckyTubeZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaZombieEnum"),s=e("../pzaEffectManager"),c=e("./pzaBaseZombie"),u=e("./pzaZombieSlot"),d=e("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.waterGrass=[],a.waterGrassFrame=[],a.garlicSkinName="zombie_head_1",a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.y=0,this.closeWaterGrass()},a.prototype.breakWater=function(a){void 0===a&&(a=null),this.randomWaterGrass(),e.prototype.breakWater.call(this,a)},a.prototype.updateMove=function(a){var t=this,o=this.baseData.xIndex;e.prototype.updateMove.call(this,a),this.baseData.isDead||this.baseData.hp<=0||(o<0&&this.baseData.xIndex>=0?(null!=this.mask&&(this.mask.enabled=!0),this.curShadow&&this.curShadow.hideShadow(),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){t.baseData.isDead||t.baseData.hp<=0||(t.playMoveAnimation(),null!=t.mask&&(t.mask.enabled=!1))})))):this.baseData.xIndex<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),this.playMoveAnimation(),s.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){t.curShadow&&t.curShadow.showShadow(),null!=t.mask&&(t.mask.enabled=!1)})))))},a.prototype.playDeathAnimation=function(a){if(this.closeWaterGrass(),null!=this.baseData&&this.baseData.xIndex>=0)return this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),void this.animation.playAnimation(this.hasInWater?"death2":"death",!1,a);e.prototype.playDeathAnimation.call(this,a)},a.prototype.twineDeath=function(){var e=this;null!=this.mask&&(this.mask.enabled=!0),this.animation.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(0,-100)),cc.callFunc(function(){e.baseData.zombieDie(),e.death(!1)})))},a.prototype.death=function(a){this.animation.node.stopAllActions(),null!=this.mask&&(this.mask.enabled=!1),e.prototype.death.call(this,a)},a.prototype.randomWaterGrass=function(){var e=this;this.waterGrass.forEach(function(a){null!=a&&(Math.random()>=.7||(a.node.active=!0,a.spriteFrame=p.pzaUtil.getRandomValueFromArray(e.waterGrassFrame),a.node.scale=p.pzaUtil.getRandomFloatNum(2,5),a.node.angle=p.pzaUtil.getRandomFloatNum(0,360)))})},a.prototype.closeWaterGrass=function(){this.waterGrass.forEach(function(e){null!=e&&(e.node.active=!1)})},a.prototype.zombieHurtSound=function(a){if(this.hasEquip){var t="plastichit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(t)}else e.prototype.zombieHurtSound.call(this,a)},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([f({displayName:"\u6c34\u8349",type:[cc.Sprite]})],a.prototype,"waterGrass",void 0),i([f({displayName:"\u6c34\u8349\u56fe",type:[cc.SpriteFrame]})],a.prototype,"waterGrassFrame",void 0),i([m],a)}(c.pzaBaseZombie);t.pzaDuckyTubeZombie=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaEffectManager:[function(e,a,t){"use strict";cc._RF.push(a,"3e827N46slE6aAMNV/k29mW","pzaEffectManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaEffectManager=void 0;var o=e("../Common/pzaGameConfig"),n=e("../Common/pzaNameConf"),i=e("../Common/pzaNodeManager"),r=e("../Common/pzaSoundManager"),p=e("../Common/pzaSpineController"),l=e("../Load/pzaBundleObjectPool"),s=e("../Load/pzaPreLoadManager"),c=e("./Data/pzaPlantEnum"),u=e("./Data/pzaZombieEnum"),d=e("./DemoBattle/pzaDemoBaseComp"),h=e("./Effect/JalapenoBoomEffect"),m=e("./Effect/pzaAbsorbIronEquip"),f=e("./Effect/pzaBackPumpkin"),z=e("./Effect/pzaBaseEffect"),y=e("./Effect/pzaBattleFrameAnim"),g=e("./Effect/pzaBoomFireEffect"),v=e("./Effect/pzaBungeeZombieEffect"),b=e("./Effect/pzaButterEffect"),P=e("./Effect/pzaDoomHoleEffect"),C=e("./Effect/pzaDrZomBall"),E=e("./Effect/pzaDropCard"),S=e("./Effect/pzaDropCoin"),_=e("./Effect/pzaDropPlantCard"),D=e("./Effect/pzaFireBallEffect"),M=e("./Effect/pzaFogEffect"),w=e("./Effect/pzaFrozenEffect"),T=e("./Effect/pzaGoldHoleEffect"),A=e("./Effect/pzaHammerEffect"),B=e("./Effect/pzaIceGroundEffect"),G=e("./Effect/pzaPlantCreateEffect"),I=e("./Effect/pzaPlantDeathEffect"),O=e("./Effect/pzaPlanternEffect"),N=e("./Effect/pzaPortalEffect"),L=e("./Effect/pzaRainEffect"),R=e("./Effect/pzaRicochetBulletEffect"),k=e("./Effect/pzaShowGrassEffect"),U=e("./Effect/pzaSleepEffect"),x=e("./Effect/pzaTangleKelpEffect"),F=e("./Effect/pzaTrackBlock"),W=e("./Effect/pzaWaterLightEffect"),Z=e("./Effect/pzaWordEffect"),j=e("./Effect/pzaZombieHoleEffect"),V=e("./Plant/pzaPumpkinLightDef"),H=e("./Zombie/pzaZombieSlot"),q=e("./pzaGameState"),K=e("./pzaSpineTool"),Y=e("./pzaValueTest"),X=function(){function e(){}return e.createReadyWord=function(e){var a=i.pzaNodeManager.getUpBgNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.WORD_EFFECT,!1,function(t,o){if(null!=t||null==o)return console.error(t),void(e&&e());o.setParent(a),o.zIndex=1;var n=o.getComponent(Z.pzaWordEffect);n&&n.playReadyPlant(e)})},e.createLargeWord=function(e,a){var t=i.pzaNodeManager.getUpBgNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.WORD_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(t),n.zIndex=1;var i=n.getComponent(Z.pzaWordEffect);null!=i&&(a?i.playLastWave():i.playLargeWave(e))}else console.error(o)})},e.createIceGround=function(e,a,t,o){void 0===o&&(o=!1);var n=i.pzaNodeManager.getDownEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_GROUND,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(B.pzaIceGroundEffect);p&&p.init(e,a,t,o)}else console.error(i)})},e.createFogEffect=function(e,a){var t=i.pzaNodeManager.getUpBgNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.FOG_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(t);var i=window.pzaplantManager.getAllPlant(c.pzaPlantEnum.PLANTERN),r=n.getComponent(M.pzaFogEffect);r&&r.init(e,a,i),window.pzaMapManager.fog=r}else console.error(o)})},e.createAbsorbIronEquip=function(e,a,t,o){void 0===o&&(o=0);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ABSORB_IRON_EQUIP,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(m.pzaAbsorbIronEquip);p&&p.init(e,a,t,o)}else console.error(i)})},e.createLaddyEff=function(e,a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ABSORB_IRON_EQUIP,function(o,n){if(null==o&&null!=n){n.setParent(t);var i=n.getComponent(m.pzaAbsorbIronEquip);i&&i.labbyInit(e,a);var r=""+a.xIndex+a.yIndex;a.close(),window.pzaMapManager.LadderMap.delete(r)}else console.error(o)})},e.createGroveEffect=function(){var e=i.pzaNodeManager.getUpBgNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.GROVE_EFFECT,!1,function(a,t){null==a&&null!=t?t.setParent(e):console.error(a)})},e.createShowGrassEffect=function(e,a,t){void 0===t&&(t=!0);var o=i.pzaNodeManager.getGrassNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.SHOW_GRASS_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(k.pzaShowGrassEffect);t&&r&&r.showStaticGrass(e),r&&r.showGrass(e,a)}else console.error(n)})},e.createFrameEffect=function(e,a,t,o){void 0===o&&(o=1);var n=i.pzaNodeManager.getUpEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(e,function(e,i){if(null==e&&null!=i){i.setParent(n),i.setPosition(a),i.scale=o;var r=i.getComponent(y.pzaBattleFrameAnim);r&&r.showAnim(t)}else console.error(e)})},e.createPlantEffect=function(e,a,t){var o=s.pzaResourceUrl.PLANT_EFFECT;r.pzaSoundManager.playAudio("plantplant",.1);var n=i.pzaNodeManager.getUpEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(o,function(a,o){if(null==a&&null!=o){o.setParent(n),o.setPosition(e);var i=o.getComponent(z.pzaBaseEffect);i&&i.showEffect(null,t)}else console.error(a)})},e.createStarFruitEffect=function(e,a){void 0===a&&(a=!0);var t=s.pzaResourceUrl.PLANT_EFFECT;a&&r.pzaSoundManager.playAudio("pickDiamond",.1);var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(t,function(a,t){if(null==a&&null!=t){t.setParent(o),t.setPosition(e);var n=t.getComponent(z.pzaBaseEffect);n&&n.showStarEffect()}else console.error(a)})},e.createDropCard=function(e,a,t,o){void 0===o&&(o=null);var n=i.pzaNodeManager.getBattleUINode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DROP_CARD,!1,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(E.pzaDropCard);p&&p.showCard(e,a,t,o)}else console.error(i)})},e.createDirtEffect=function(e,a,t,o){o&&o()},e.createHammerEffect=function(e,a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.HAMMER_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(t),n.setPosition(e);var i=n.getComponent(A.pzaHammerEffect);a?i&&i.onlyShowHammer():i&&i.showEffect()}else console.error(o)})},e.createDropCoin=function(e,a){var t=i.pzaNodeManager.getUpBgNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.DROP_COIN,function(o,n){if(null==o&&null!=n){n.setParent(t);var i=n.getComponent(S.pzaDropCoin);i&&i.init(e,a)}else console.error(o)})},e.createPartRewardCoin=function(e,a,t){if(!q.pzaGameState.isTryMode(q.pzaGameState.curChapter,q.pzaGameState.curPart)){var o=i.pzaNodeManager.getUpBgNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.DROP_COIN,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(S.pzaDropCoin);r&&r.initPartRewardCoin(e,a,t)}else console.error(n)})}},e.createWaterLightEffect=function(e,a){void 0===e&&(e=cc.v2(0,0)),void 0===a&&(a=0);var t=i.pzaNodeManager.getDownEffectNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.WATER_LIGHT_EFFECT,!1,function(o,n){null==o&&null!=n?(n.setParent(t),n.setPosition(e),n.zIndex=-2,a>0&&n.getComponent(W.pzaWaterLightEffect).setMapId(a)):console.error(o)})},e.createWaterFlowerEffect=function(e,a,t,o){void 0===o&&(o=1);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.WATER_FLOWER_EFFECT,function(i,r){if(null==i&&null!=r){r.scale=o,r.zIndex=10*-e+10,r.setParent(n),r.setPosition(a);var p=r.getComponent(z.pzaBaseEffect);p&&p.showEffect(null,t)}else console.error(i)})},e.createBoomFireEffect=function(e,a,t,o,n){void 0===n&&(n=!1);var r=i.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=!1;n&&(p=!0),l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.BOOM_FIRE_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(r),i.setPosition(t),i.zIndex=10*-e+10;var l=i.getComponent(g.pzaBoomFireEffect);l&&l.showEffect(a,o,p)}else console.error(n)})}},e.createFireBallEffect=function(e,a,t){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.BOOM_BALL_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(t),i.zIndex=10*-e+10;var r=i.getComponent(D.pzaFireBallEffect);r&&r.showEffect(a)}else console.error(n)})},e.createTangleKelpEffect=function(e,a,t){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.TANGLEKELP_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(e);var r=i.getComponent(x.pzaTangleKelpEffect);r&&r.showEffect(a,t)}else console.error(n)})},e.createBackPumpkin=function(e,a,t){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(a,!1,function(a,n){if(null==a&&null!=n){n.setParent(o),n.setPosition(e.logicPos);var i=n.getComponent(f.pzaBackPumpkin);i&&i.bindData(e),t&&t(i)}else console.error(a)})},e.createPumpkinLightDef=function(e,a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.PUMPKIN_LIGHT_DEF,!1,function(o,n){if(null==o&&null!=n){n.setParent(t),n.setPosition(e.logicPos);var i=n.getComponent(V.pzaPumpkinLightDef);i&&i.bindData(),a(i||null)}else console.error(o)})},e.createBackPumpkinPurple=function(){},e.createDoomHoleEffect=function(e,a,t,o,n,r){void 0===o&&(o=!1);var p=i.pzaNodeManager.getDownEffectNode();null!=p&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DOOM_HOLE_EFFECT,!1,function(e,i){if(null==e&&null!=i){i.setParent(p);var l=q.pzaGameState.map.getXInterval(a)/2,s=.1*q.pzaGameState.map.getYInterval(t),c=q.pzaGameState.map.getBlockLogicPos(a,t,l,s);i.setPosition(c.x,c.y);var u=i.getComponent(P.pzaDoomHoleEffect);o?u&&u.recover(a,t,n,r):u&&u.init(a,t)}else console.error(e)})},e.createGoldHoleEffect=function(e,a,t,o,n,r){void 0===o&&(o=!1);var p=i.pzaNodeManager.getDownEffectNode();null!=p&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.GOLD_HOLE_EFFECT,!1,function(i,l){if(null==i&&null!=l){l.setParent(p),l.setPosition(e);var s=l.getComponent(T.pzaGoldHoleEffect);o?s&&s.recover(a,t,n,r):s&&s.init(a,t)}else console.error(i)})},e.createZombieHoleEffect=function(e,a,t,o,n,r){void 0===o&&(o=!1);var p=i.pzaNodeManager.getDownEffectNode();null!=p&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.ZOMBIE_HOLE_EFFECT,!1,function(i,l){if(null==i&&null!=l){l.setParent(p),l.setPosition(e);var s=l.getComponent(j.pzaZombieHoleEffect);o?s&&s.recover(a,t,n,r):s&&s.init(a,t)}else console.error(i)})},e.createDoomBoomEffect=function(e){var a=i.pzaNodeManager.getUpEffectNode();null!=a&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DOOM_BOOM_EFFECT,!1,function(t,o){if(null==t&&null!=o){o.setParent(a),o.setPosition(e);var n=o.getComponent(z.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(t)})},e.createCobBoomEffect=function(e){var a=i.pzaNodeManager.getUpEffectNode();null!=a&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.COB_BOOM_EFFECT,!1,function(t,o){if(null==t&&null!=o){o.setParent(a),o.setPosition(e);var n=o.getComponent(z.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(t)})},e.createCobBoomHoleEffect=function(e){var a=i.pzaNodeManager.getDownEffectNode();null!=a&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.COB_BOOM_HOLE,!1,function(t,o){null==t&&null!=o?(o.setParent(a),o.setPosition(e)):console.error(t)})},e.createFumeShroomEffect=function(e,a,t,o){void 0===o&&(o="blow2");var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.FUME_SHROOM_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(a),r.zIndex=10*-e+10;var p=r.getComponent(z.pzaBaseEffect);p&&p.showEffect(o,t)}else console.error(i)})},e.createGloomShroomEffect=function(e,a,t){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.GLOOM_SHROOM_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(a),i.zIndex=10*-e+10;var r=i.getComponent(z.pzaBaseEffect);r&&r.showEffect(null,t)}else console.error(n)})},e.createIceBoomReadyEffect=function(e){var a=i.pzaNodeManager.getUpEffectNode();null!=a&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_BOOMREADY_EFFECT,function(t,o){if(null==t&&null!=o){o.setParent(a),o.setPosition(e);var n=o.getComponent(z.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(t)})},e.createIceBoomEffect=function(e){var a=i.pzaNodeManager.getUpEffectNode();null!=a&&null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_BOOM_EFFECT,function(t,o){if(null==t&&null!=o){o.setParent(a),o.setPosition(e);var n=o.getComponent(z.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(t)})},e.createFrozenEffect=function(e){var a=i.pzaNodeManager.getPlantZombieNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.FROZEN_EFFECT,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(w.pzaFrozenEffect);n&&n.bindData(e)}else console.error(t)})},e.frozenTest=function(){},e.createRainNightEffect=function(){var e=i.pzaNodeManager.getUpBgNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.RAIN_NIGHT_EFFECT,!1,function(a,t){null==a&&null!=t?t.setParent(e):console.error(a)})},e.createRainEffect=function(e,a){var t=i.pzaNodeManager.getDownEffectNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.RAIN_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(t),n.setPosition(e);var i=n.getComponent(L.pzaRainEffect);i&&i.showAnim(a)}else console.error(o)})},e.createDropPlantCard=function(e,a,t){var o=i.pzaNodeManager.getCardsNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DROP_PLANT_CARD,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(_.pzaDropPlantCard);window.pzaplantManager.dropPlantCards.add(r),r&&r.init(e,a,t)}else console.error(n)})},e.createAutoCard=function(e,a){void 0===a&&(a=!1);var t=i.pzaNodeManager.getCardsNode();if(null!=t){var n=o.pzaGameConfig.getRandomSunPos();l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DROP_PLANT_CARD,!1,function(o,i){if(null==o&&null!=i){i.setParent(t);var r=i.getComponent(_.pzaDropPlantCard);window.pzaplantManager.dropPlantCards.add(r),r&&r.miniInit(e,n),r.isGuideCard=a}else console.error(o)})}},e.createButterEffect=function(e,a,t){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.BUTTER_EFFECT,function(n,i){null==n&&null!=i?(i.setParent(o),i.setPosition(a),i.zIndex=t,i.getComponent(b.pzaButterEffect).bindData(e)):console.error(n)})},e.createPlanternEffect=function(e,a,t){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.PLANTERN_EFFECT,!1,function(n,i){null==n&&null!=i?(i.setParent(o),i.setPosition(a),i.getComponent(O.pzaPlanternEffect).bindData(e),t&&t(i)):console.error(n)})},e.createSquashEffect=function(e){var a=i.pzaNodeManager.getDownEffectNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SQUASH_EFFECT,function(t,o){null==t&&null!=o?(o.setParent(a),o.setPosition(e),o.getComponent(z.pzaBaseEffect).showEffect("blow",null)):console.error(t)})},e.createHypnoEffect=function(e,a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.HYPNO_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(t),n.zIndex=a,n.setPosition(e),n.getComponent(z.pzaBaseEffect).showEffect("blow",null)):console.error(o)})},e.createImitaterEffect=function(){},e.createSmokeEffect=function(e,a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SMOKE_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(t),n.setPosition(a),n.getComponent(z.pzaBaseEffect).showEffect(e,null)):console.error(o)})},e.createDrZomBallEffect=function(e,a,t){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DR_ZOM_BALL,!1,function(n,i){null==n&&null!=i?(i.setParent(o),i.getComponent(C.pzaDrZomBall).init(e,a,t)):console.error(n)})},e.createBungeeZombieEffect=function(e){var a=i.pzaNodeManager.getPlantZombieNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BUNGEE_ZOMBIE_EFFECT,!1,function(t,o){null==t&&null!=o?(o.setParent(a),o.getComponent(v.pzaBungeeZombieEffect).init(e)):console.error(t)})},e.createRicochetBulletEffect=function(e,a,t){var o=i.pzaNodeManager.getBulletNode();t&&(o=t),null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.RICOCHET_BULLET_EFFECT,function(t,n){if(null==t&&null!=n){n.setParent(o),n.setPosition(e);var i=n.getComponent(R.pzaRicochetBulletEffect);i&&i.init(a)}else console.error(t)})},e.createHitFlyEffect=function(e,a,t,o,r,c){void 0===c&&(c="idle");var d=i.pzaNodeManager.getUpEffectNode();if(null!=d){var h=s.pzaResourceUrl.HITFLY_EFFECT;l.pzaBundleObjectPool.requestInstantByUrl2(h,function(i,l){if(null==i&&null!=l){l.setParent(d),l.setPosition(a),l.scale=o,l.scaleX=-t*o;var s=cc.instantiate(r);s.setParent(l),s.setPosition(0,0);var h=s.getComponent(sp.Skeleton);h.premultipliedAlpha=!0,e==u.pzaZombieEnum.TALLNUT_ZOMBIE?K.pzaSpineTool.instance().setSlotAtt(h,"Dbody1",H.pzaZombieSlotType.head_tallnut,246.08,-7.02,-90):e==u.pzaZombieEnum.Nut_Zombie?K.pzaSpineTool.instance().setSlotAtt(h,H.pzaZombieSlotType.head_nut,H.pzaZombieSlotType.head_nut+"3",244.29,-2.07,-90.45):e==u.pzaZombieEnum.LADDER_ZOMBIE&&h.setSkin(n.pzaZombieSkName.LADDER_ZOMBIE.SKIN.intact);var m=l.getComponent(p.pzaSpineController);m.spineAnimation&&m.spineAnimation.node.destroy(),m.spineAnimation=h,m.playAnimation(c,!0,null,null,0)}else console.error(i)})}},e.createAshesEffect=function(e,a,t,o,n,r,c,d){void 0===c&&(c="blow"),void 0===d&&(d=null);var h=i.pzaNodeManager.getPlantZombieNode();if(d&&(h=d),null!=h){var m=s.pzaResourceUrl.ASHES_EFFECT;l.pzaBundleObjectPool.requestInstantByUrl2(m,function(i,l){if(null==i&&null!=l){l.setParent(h),l.setPosition(a),l.scale=n,l.zIndex=o,l.scaleX=-t*n;var s=cc.instantiate(r);s.setParent(l),s.setPosition(0,0);var d=s.getComponent(sp.Skeleton);d.premultipliedAlpha=!0,e==u.pzaZombieEnum.TALLNUT_ZOMBIE?K.pzaSpineTool.instance().setSlotAtt(d,"Dbody1",H.pzaZombieSlotType.head_tallnut,246.08,-7.02,-90):e==u.pzaZombieEnum.Nut_Zombie&&K.pzaSpineTool.instance().setSlotAtt(d,H.pzaZombieSlotType.head_nut,H.pzaZombieSlotType.head_nut+"3",244.29,-2.07,-90.45);var m=l.getComponent(p.pzaSpineController);m.spineAnimation&&m.spineAnimation.node.destroy(),m.spineAnimation=d;var f=l.getComponent(z.pzaBaseEffect);f.showEffect(c,null),d.setMaterial(0,f.baseSpineMaterial)}else console.error(i)})}},e.createIceGroundStart=function(e,a,t,o){var n=i.pzaNodeManager.getDownEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_GROUND,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(B.pzaIceGroundEffect);p&&p.miniInit(e,a,t,o)}else console.error(i)})},e.createTestValuePre=function(e,a,t,o,n){l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.valueTest,function(i,r){if(null==i&&null!=r){r.setParent(a);var p=r.getComponent(Y.pzaValueTest);p&&p.setView(e,a,t,o,n)}else console.error(i)})},e.createWarnLineEff=function(e){l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.WARNLINE,function(a,t){if(null==a&&null!=t){var o=i.pzaNodeManager.getDownEffectNode();t.setParent(o);var n=q.pzaGameState.map.getXInterval(e)/2,r=.1*q.pzaGameState.map.getYInterval(0),p=q.pzaGameState.map.getBlockLogicPos(e,0,n,r);p.x-=q.pzaGameState.map.getBlockWidth()/2,t.setPosition(p)}else console.error(a)})},e.createTrackBlock=function(e,a,t,o,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.Track,function(p,l){if(null==p&&null!=l){var s=i.pzaNodeManager.getDownEffectNode();l.setParent(s);var c=q.pzaGameState.map.getXInterval(e)/2,u=.1*q.pzaGameState.map.getYInterval(0),d=q.pzaGameState.map.getBlockLogicPos(e,a,c,u);d.x-=q.pzaGameState.map.getBlockWidth()/2,l.setPosition(d),l.zIndex=-1,l.getComponent(F.pzaTrackBlock).init(e,a,t,o,n,r)}else console.error(p)})},e.createHoleBlock=function(e,a){l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.HoleBlock,function(t,o){if(null==t&&null!=o){var n=i.pzaNodeManager.getDownEffectNode();o.setParent(n);var r=q.pzaGameState.map.getXInterval(e)/2,p=.1*q.pzaGameState.map.getYInterval(0),l=q.pzaGameState.map.getBlockLogicPos(e,a,r,p);l.x-=q.pzaGameState.map.getBlockWidth()/2,o.setPosition(l),o.zIndex=-1}else console.error(t)})},e.createEffect=function(e,a,t){void 0===t&&(t=null);var o=i.pzaNodeManager.getUpEffectNode();null!=o&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(e,!1,function(e,n){if(null==e&&null!=n){n.setParent(o),n.setPosition(a);var i=n.getComponent(z.pzaBaseEffect);i&&i.showEffect(t,null)}else console.error(e)})},e.createPortalEffect=function(e,a,t,o){void 0===o&&(o=!0);var n=i.pzaNodeManager.getUpEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.PORTAL_EFFECT,!1,function(i,r){if(null==i&&null!=r){var p=q.pzaGameState.map.getXInterval(e)/2,l=.1*q.pzaGameState.map.getYInterval(0),s=q.pzaGameState.map.getBlockLogicPos(e,a,p,l);r.setParent(n),r.setPosition(s);var c=r.getComponent(N.pzaPortalEffect);c&&c.init(t,o)}else console.error(i)})},e.createPlantPortalEffect=function(e,a,t,o){var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.PLANTCREATE_EFFECT,!1,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(t),r.zIndex=o;var p=r.getComponent(G.pzaPlantCreateEffect);p&&p.showEffect(e,a)}else console.error(i)})},e.plantDeathEffect=function(e,a,t,o,n,r){void 0===t&&(t="idle");var p=i.pzaNodeManager.getPlantZombieNode();if(null!=p){var c=cc.instantiate(a.spineAnimation.node);l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.PLANTDEATH_EFFECT,!1,function(a,i){if(null==a&&null!=i){i.setParent(p),i.setPosition(o),i.zIndex=n;var l=i.getComponent(I.pzaPlantDeathEffect);l&&l.showEffect(e,c,t,r)}else console.error(a)})}},e.createSleepEffect=function(e){var a=i.pzaNodeManager.getUpEffectNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.SLEEPEFFECT,!1,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(U.pzaSleepEffect);n&&n.bindData(e)}else console.error(t)})},e.createJalapenoBoomEffect=function(e){var a=i.pzaNodeManager.getUpEffectNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.JALAPENOBOOM_EFFECT,!1,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(h.pzaJalapenoBoomEffect);n&&n.bindData(e)}else console.error(t)})},e.createProtectBlock=function(e){var a=i.pzaNodeManager.getDownEffectNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.ProtectBlock,!1,function(t,o){null==t&&null!=o?(o.setParent(a),o.setPosition(e)):console.error(t)})},e.createDemoEffect=function(e,a,t,o){void 0===t&&(t=null);var n=q.pzaGameState.demoScene;null!=n&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(e,!1,function(e,i){if(null==e&&null!=i&&null!=n){i.addComponent(d.pzaDemoBaseComp),i.setParent(n),i.setPosition(a);var r=i.getComponent(z.pzaBaseEffect);r&&r.showEffect(t,null),o&&o(i)}else console.error(e)})},e}();t.pzaEffectManager=X,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaNameConf":"pzaNameConf","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaPlantEnum":"pzaPlantEnum","./Data/pzaZombieEnum":"pzaZombieEnum","./DemoBattle/pzaDemoBaseComp":"pzaDemoBaseComp","./Effect/JalapenoBoomEffect":"JalapenoBoomEffect","./Effect/pzaAbsorbIronEquip":"pzaAbsorbIronEquip","./Effect/pzaBackPumpkin":"pzaBackPumpkin","./Effect/pzaBaseEffect":"pzaBaseEffect","./Effect/pzaBattleFrameAnim":"pzaBattleFrameAnim","./Effect/pzaBoomFireEffect":"pzaBoomFireEffect","./Effect/pzaBungeeZombieEffect":"pzaBungeeZombieEffect","./Effect/pzaButterEffect":"pzaButterEffect","./Effect/pzaDoomHoleEffect":"pzaDoomHoleEffect","./Effect/pzaDrZomBall":"pzaDrZomBall","./Effect/pzaDropCard":"pzaDropCard","./Effect/pzaDropCoin":"pzaDropCoin","./Effect/pzaDropPlantCard":"pzaDropPlantCard","./Effect/pzaFireBallEffect":"pzaFireBallEffect","./Effect/pzaFogEffect":"pzaFogEffect","./Effect/pzaFrozenEffect":"pzaFrozenEffect","./Effect/pzaGoldHoleEffect":"pzaGoldHoleEffect","./Effect/pzaHammerEffect":"pzaHammerEffect","./Effect/pzaIceGroundEffect":"pzaIceGroundEffect","./Effect/pzaPlantCreateEffect":"pzaPlantCreateEffect","./Effect/pzaPlantDeathEffect":"pzaPlantDeathEffect","./Effect/pzaPlanternEffect":"pzaPlanternEffect","./Effect/pzaPortalEffect":"pzaPortalEffect","./Effect/pzaRainEffect":"pzaRainEffect","./Effect/pzaRicochetBulletEffect":"pzaRicochetBulletEffect","./Effect/pzaShowGrassEffect":"pzaShowGrassEffect","./Effect/pzaSleepEffect":"pzaSleepEffect","./Effect/pzaTangleKelpEffect":"pzaTangleKelpEffect","./Effect/pzaTrackBlock":"pzaTrackBlock","./Effect/pzaWaterLightEffect":"pzaWaterLightEffect","./Effect/pzaWordEffect":"pzaWordEffect","./Effect/pzaZombieHoleEffect":"pzaZombieHoleEffect","./Plant/pzaPumpkinLightDef":"pzaPumpkinLightDef","./Zombie/pzaZombieSlot":"pzaZombieSlot","./pzaGameState":"pzaGameState","./pzaSpineTool":"pzaSpineTool","./pzaValueTest":"pzaValueTest"}],pzaEggAniView:[function(e,a,t){"use strict";cc._RF.push(a,"e0a2aSlpWtLiIimYCjUWVZ5","pzaEggAniView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaEggAniView=void 0;var r=e("../Common/pzaBaseComponent"),p=e("../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a}return n(a,e),a.prototype.setView=function(e,a){var t=this,o=10==e?"10chou":"1chou";this.spine.playAnimation(o,!1,function(){a&&a(),t.close()})},i([c({type:p.pzaSpineController})],a.prototype,"spine",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaEggAniView=u,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaSpineController":"pzaSpineController"}],pzaExchangeView:[function(e,a,t){"use strict";cc._RF.push(a,"d7bb7SZS/ZF1JyIzVH/wXkZ","pzaExchangeView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaCommonPopView"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGamePropConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaRewardManager"),u=e("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.node_minus=null,a.node_plus=null,a.slider_node=null,a.lab_exchange=null,a.node_confirm=null,a.lab_pieceAmount=null,a.node_proWidth=null,a.img_rider=null,a.totalPieces=0,a.selectedCount=0,a.coinPerPiece=100,a.activityType=0,a}return n(a,e),a.prototype.onLoad=function(){this.slider_node.node.on("slide",this.onSliderSlide,this),this.node_plus.on(cc.Node.EventType.TOUCH_END,this.onPlusClick,this),this.node_minus.on(cc.Node.EventType.TOUCH_END,this.onMinusClick,this),this.node_confirm.on(cc.Node.EventType.TOUCH_END,this.onConfirmClick,this)},a.prototype.bindData=function(e){this.activityType=e,this.updatePieces(),this.initUI(),this.refreshPieceImg()},a.prototype.refreshPieceImg=function(){2==this.activityType?(this.img_rider.node.scale=.8,this.img_rider.node.x=-30,u.pzaSpriteFrameManager.loadPlantCard(s.pzaLocalData.riderPieceType,this.img_rider)):1==this.activityType&&(this.img_rider.node.scale=.45,this.img_rider.node.x=-35,u.pzaSpriteFrameManager.loadBeltCard("belt_"+s.pzaLocalData.beltPieceType,this.img_rider))},a.prototype.setCloseCall=function(e){this.closeCall=e},a.prototype.updatePieces=function(){1==this.activityType?this.totalPieces=s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]:2==this.activityType&&(this.totalPieces=s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]),this.lab_pieceAmount.string=this.totalPieces+""},a.prototype.initUI=function(){this.totalPieces<=0?this.slider_node.progress=0:this.slider_node.progress=this.selectedCount/this.totalPieces,this.node_proWidth.width=this.selectedCount/this.totalPieces*300,this.lab_exchange.string=this.selectedCount.toString(),this.totalPieces<=0?this.node_confirm.active=!1:this.node_confirm.active=!0},a.prototype.onMinusClick=function(){this.selectedCount>0&&(this.selectedCount--,this.updateUIFromCount())},a.prototype.onPlusClick=function(){this.selectedCount<this.totalPieces&&(this.selectedCount++,this.updateUIFromCount())},a.prototype.onSliderSlide=function(){this.selectedCount=Math.round(this.slider_node.progress*this.totalPieces),this.updateUIFromCount(!1)},a.prototype.updateUIFromCount=function(e){void 0===e&&(e=!0),this.lab_exchange.string=this.selectedCount.toString(),e&&(this.slider_node.progress=this.selectedCount/this.totalPieces),this.node_proWidth.width=300*this.slider_node.progress},a.prototype.onConfirmClick=function(){var e=this.selectedCount*this.coinPerPiece,a=[];if(e>0){var t=new l.pzaRewardPropData(l.pzaGamePropEnum.PROP_COIN,e);a.push(t),c.pzaRewardManager.recieveRewards(a);var o=0;if(1==this.activityType){o=s.pzaLocalData.beltPieceType;var n=s.pzaLocalData.data.beltPieceAmounts[""+o];s.pzaLocalData.data.beltPieceAmounts[""+o]=n-this.selectedCount,s.pzaLocalData.addDirty("beltPieceAmounts")}else 2==this.activityType&&(o=s.pzaLocalData.riderPieceType,n=s.pzaLocalData.data.riderPieceAmounts[""+o],s.pzaLocalData.data.riderPieceAmounts[""+o]=n-this.selectedCount,s.pzaLocalData.addDirty("riderPieceAmounts"));this.selectedCount=0,this.updatePieces(),this.initUI()}},a.prototype.close=function(){this.closeCall&&this.closeCall(),p.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u51cf\u53f7",type:cc.Node})],a.prototype,"node_minus",void 0),i([m({displayName:"\u52a0\u53f7",type:cc.Node})],a.prototype,"node_plus",void 0),i([m({displayName:"\u6ed1\u52a8\u6761",type:cc.Slider})],a.prototype,"slider_node",void 0),i([m({displayName:"\u5f53\u524d\u9009\u62e9\u788e\u7247lab",type:cc.Label})],a.prototype,"lab_exchange",void 0),i([m({displayName:"\u786e\u8ba4\u6309\u94ae",type:cc.Node})],a.prototype,"node_confirm",void 0),i([m({displayName:"\u788e\u7247\u6570\u91cfLab",type:cc.Label})],a.prototype,"lab_pieceAmount",void 0),i([m({displayName:"\u8fdb\u5ea6\u6761\u957f\u5ea6",type:cc.Node})],a.prototype,"node_proWidth",void 0),i([m({displayName:"\u9a91\u58eb\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_rider",void 0),i([h],a)}(r.default);t.default=f,cc._RF.pop()},{"../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaFightKing:[function(e,a,t){"use strict";cc._RF.push(a,"c72b12byx1JDaGFhkDpXEwE","pzaFightKing");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFightKing=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../Data/pzaBuffData"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a}return n(a,e),a.prototype.playIdleAni=function(){var e=this,a=function(){window.pzazombieManager.hasCanAttackZombie(e.baseData)||e.findAttackTarget()?e.animation.playAnimation("attack",!1,a,function(){console.log("fightking attack e"),l.pzaSoundManager.playAudio("PeashooterAtk"),e.shoot()}):e.animation.playAnimation("idle",!1,a)};a()},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playIdleAni(),u.pzaGameState.usePeaPlant=!0,u.pzaGameState.onlyBoomPlant=!1,u.pzaGameState.onlyShroomCofee=!1},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,2);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},a.prototype.findAttackTarget=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:e.baseData},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([m],a)}(d.pzaBasePlant);t.pzaFightKing=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaFireBallEffect:[function(e,a,t){"use strict";cc._RF.push(a,"0899ebRMVBGG6e/r2A7TOlc","pzaFireBallEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFireBallEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a.poolPrefab=null,a}return n(a,e),a.prototype.showEffect=function(e){var a=this;0==e?this.spine.playAnimation("attack",!1,function(){a.close()}):1==e?(this.node.scaleY=1,this.spine.playAnimation("attack2",!1,function(){a.close()})):2==e&&(this.node.scaleY=-1,this.spine.playAnimation("attack2",!1,function(){a.close()}))},a.prototype.pauseSelf=function(){this.spine.pauseAnimation()},a.prototype.resumeSelf=function(){this.spine.resumeAnimation()},a.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"spine",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaFireBallEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaFireBlover:[function(e,a,t){"use strict";cc._RF.push(a,"61b7060u2lBZ6SvjcBC0R3A","pzaFireBlover");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFireBlover=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaBuffData"),s=e("../pzaEffectManager"),c=e("../pzaGameState"),u=e("./pzaAttackType"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.attackCD=0,a}return n(a,e),a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.baseData.plantData.atkInterval=2.9,this.playNormalAni()},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.attackCD-=a)},a.prototype.playNormalAni=function(){var e=this,a=function(){e.attackTarget(a)||(e.animation.node.scaleX=1,e.animation.playAnimation("idle",!1,a,null,1.6))};this.attackTarget(a)||this.animation.playAnimation("idle",!1,a,null,1.6)},a.prototype.attackTarget=function(e){var a=this;if(this.attackCD>0)return!1;var t=this,o=this.getCanSpeAttackZombies(this.baseData,0,3.5),n=this.getCanAttackZombies(this.baseData,0,3.5),i=p.pzaUtil.getRandomFloatNum(0,1);if(.2>i&&o&&o.length>0)return this.animation.playAnimation("attack2",!1,e,function(){if(null==t.baseData||t.baseData.isDead)return!0;r.pzaSoundManager.playAudio("firebloverSpecial"),t.speFireEffect(),o.forEach(function(e){n.push(e)}),setTimeout(function(){t.hurtZombies(n,2*a.baseData.atk,a.node.x)},800/p.pzaUtil.getGameSpeed()),t.attackCD=2*t.baseData.plantData.atkInterval},1.8),!0;if(n&&n.length>0){var l=.2>i?2*this.baseData.atk:this.baseData.atk,s=.2>i?"attack2":"attack",c=.2>i?1.8:1;return this.animation.playAnimation(s,!1,e,function(){if(null==t.baseData||t.baseData.isDead)return!0;"attack"==s?(r.pzaSoundManager.playAudio("firebloverNormal"),t.normalFireEffect(),t&&t.hurtZombies(n,l,t.node.x,!0),t.attackCD=t.baseData.plantData.atkInterval):(r.pzaSoundManager.playAudio("firebloverSpecial"),t.speFireEffect(),o.forEach(function(e){n.push(e)}),setTimeout(function(){t&&t.hurtZombies(n,l,a.node.x)},800/p.pzaUtil.getGameSpeed()),t.attackCD=2*t.baseData.plantData.atkInterval)},c),!0}},a.prototype.hurtZombies=function(e,a,t,o){var n=this;void 0===a&&(a=this.baseData.atk),void 0===o&&(o=!1),null!=e&&e.forEach(function(e){if(null!=n.baseData){var i=window.pzazombieManager.getZombie(e);if(i){var r=Math.abs(t-i.node.x);o||(r=0),setTimeout(function(){i&&i.hurt(a,n.baseData,u.pzaAttackType.FLOOR_ASHES_ATK)},2*r/p.pzaUtil.getGameSpeed())}}})},a.prototype.getCanAttackZombies=function(e,a,t){if(null==e||null==e.logicPos)return null;var o=[];return window.pzazombieManager.zombieDatas[e.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(n)}),o},a.prototype.getCanSpeAttackZombies=function(e,a,t){if(null==e||null==e.logicPos)return null;var o=[],n=window.pzazombieManager.zombieDatas[e.yIndex+1],i=window.pzazombieManager.zombieDatas[e.yIndex-1];return n&&n.forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(n)}),i&&i.forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(n)}),o},a.prototype.normalFireEffect=function(){var e=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,0,0);e.x+=50,e.y+=50,s.pzaEffectManager.createFireBallEffect(this.baseData.yIndex,0,e)},a.prototype.speFireEffect=function(){var e=this;setTimeout(function(){for(var a=0;a<4;a++)e.createBoomFireEffect(e.baseData.xIndex+1+a,e.baseData.yIndex,.1)},800/p.pzaUtil.getGameSpeed());var a=c.pzaGameState.map.getMapRow(),t=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,0,0);t.x+=50,t.y+=60,this.baseData.yIndex-1>=0&&(s.pzaEffectManager.createFireBallEffect(this.baseData.yIndex,1,t),setTimeout(function(){for(var a=0;a<4;a++)e.createBoomFireEffect(e.baseData.xIndex+1+a,e.baseData.yIndex-1,.1)},800/p.pzaUtil.getGameSpeed())),this.baseData.yIndex+1<=a&&(s.pzaEffectManager.createFireBallEffect(this.baseData.yIndex,1,t),setTimeout(function(){for(var a=0;a<4;a++)e.createBoomFireEffect(e.baseData.xIndex+1+a,e.baseData.yIndex+1,.1)},800/p.pzaUtil.getGameSpeed()))},a.prototype.createBoomFireEffect=function(e,a,t){e>c.pzaGameState.map.getMapColumn()||setTimeout(function(){var o=c.pzaGameState.map.getBlockLogicPos(e,a,0,0);c.pzaGameState.map.fixMapYOffset(a,o,0),s.pzaEffectManager.createBoomFireEffect(a,t,o,null)},500*t/p.pzaUtil.getGameSpeed())},i([m],a)}(d.pzaBasePlant));t.pzaFireBlover=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaFireEffect:[function(e,a,t){"use strict";cc._RF.push(a,"18e573ExS5MQq+lMH3vrgTB","pzaFireEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFireEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.fireAnis=[],a.poolPrefab=null,a.yIndex=-1,a.xIndex=-1,a}return n(a,e),a.prototype.init=function(){var e=this;this.fireAnis.forEach(function(a){a.playAnimation("fire2",!1,function(){e.close()})})},a.prototype.pauseSelf=function(){this.fireAnis.forEach(function(e){e.pauseAnimation()})},a.prototype.resumeSelf=function(){this.fireAnis.forEach(function(e){e.resumeAnimation()})},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"\u706b\u7130\u6d88\u5931\u52a8\u753b",type:[l.pzaSpineController]})],a.prototype,"fireAnis",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaFireEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaFitIPhoneX:[function(e,a,t){"use strict";cc._RF.push(a,"42313kvA4BFtrzlzDcwp0vx","pzaFitIPhoneX");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFitIPhoneX=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.widget=null,a.topOffset=0,a.bottomOffset=0,a.leftOffset=0,a.rightOffset=0,a}return n(a,e),a.prototype.onLoad=function(){this.widget&&cc.winSize.width/cc.winSize.height>2&&(this.widget.top+=this.topOffset,this.widget.bottom+=this.bottomOffset,this.widget.left+=this.leftOffset,this.widget.right+=this.rightOffset)},i([l(cc.Widget)],a.prototype,"widget",void 0),i([l(cc.Float)],a.prototype,"topOffset",void 0),i([l(cc.Float)],a.prototype,"bottomOffset",void 0),i([l(cc.Float)],a.prototype,"leftOffset",void 0),i([l(cc.Float)],a.prototype,"rightOffset",void 0),i([p],a)}(cc.Component);t.pzaFitIPhoneX=s,cc._RF.pop()},{}],pzaFlagZombie:[function(e,a,t){"use strict";cc._RF.push(a,"4ea6aBnvahK862jVHmtItra","pzaFlagZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFlagZombie=void 0;var r=e("../Data/pzaZombieEnum"),p=e("./pzaNormalZombie"),l=e("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[l.pzaZombieSlotType.flag,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.flag).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.flag+"1",157.57,-72.8,-103.75)).addState(new l.pzaZombieSlotAtt(2,l.pzaZombieSlotType.flag+"2",157.34,-73.82,-103.75)).addState(new l.pzaZombieSlotAtt(3,l.pzaZombieSlotType.flag+"3",159.47,-65.08,-103.75))]])},a.prototype.updateFlagState=function(e){this.slotMap||this.initEquips(),this.slotMap.get(l.pzaZombieSlotType.flag).updateState(e)},a.prototype.playDeathAnimation=function(a){this.updateFlagState(3),e.prototype.playDeathAnimation.call(this,a)},a.prototype.zombieDying=function(){this.zombieHurtState=r.pzaHurtStateEnum.DYING,this.updateFlagState(2)},a.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),"zombie_2"==this.curSkinName&&(this.curSkinName="zombie_2_2"),this.updateFlagState(2)},a.prototype.zombieIntact=function(){this.zombieHurtState=r.pzaHurtStateEnum.INTACT,this.updateFlagState(1)},i([c],a)}(p.pzaNormalZombie));t.pzaFlagZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFlowerPotShadow:[function(e,a,t){"use strict";cc._RF.push(a,"3cb5e7sHptMHLEqHP+gP7Z+","pzaFlowerPotShadow");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFlowerPotShadow=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this),this.node.zIndex=-300},a.prototype.showNode=function(){this.node.opacity=120},a.prototype.hideNode=function(){this.node.opacity=0},a.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this)},a.prototype.closeNode=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],a)}(cc.Component));t.pzaFlowerPotShadow=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaFlowerPot:[function(e,a,t){"use strict";cc._RF.push(a,"844b3i3LINC/YeQXQ5ZJ4Rg","pzaFlowerPot");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFlowerPot=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaWorldEventManager"),l=e("../Data/pzaBuffData"),s=e("../pzaGameState"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hasPlant=!1,a.changeTime=1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.animation.node.y=0,p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GUIDE_TIPS,this.guideLogic,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GUIDE_TIPS,this.guideLogic,this)},a.prototype.guideLogic=function(e,a){void 0===a&&(a=!1),this.baseData&&e==this.baseData.plantData.plantType&&(a?this.animation.playAnimation(r.pzaPlantSkName.FLOWER_POT.idle_light,!0):this.animation.playAnimation(r.pzaPlantSkName.FLOWER_POT.idle,!0))},a.prototype.bindData=function(a){if(e.prototype.bindData.call(this,a),this.node.zIndex=10*-this.baseData.yIndex-2,this.hasPlant=!1,this.changeTime=.5,s.pzaGameState.gamePause?this.animation.playAnimation(r.pzaPlantSkName.FLOWER_POT.idle,!0):this.animation.playAnimation(r.pzaPlantSkName.FLOWER_POT.idle5,!0),a.fromInit);else{var t,o=""+a.xIndex+a.yIndex,n=window.pzaplantManager.plantDataMap.get(o),i=window.pzaplantManager.plantEnvDataMap.get(o),p=window.pzaplantManager.pumpkinDataMap.get(o);n&&!n.isDead&&n.buffData.hasBuff(l.pzaBuffType.FROZEN)&&(t=window.pzaplantManager.getPlantByData(n))&&t.unFrozen(),i&&!i.isDead&&i.buffData.hasBuff(l.pzaBuffType.FROZEN)&&(t=window.pzaplantManager.getPlantByData(i))&&t.unFrozen(),p&&!p.isDead&&p.buffData.hasBuff(l.pzaBuffType.FROZEN)&&(t=window.pzaplantManager.getPlantByData(p))&&t.unFrozen()}this.animation.resumeAnimation(),s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1,a.plantData.canBeShoot=!1},a.prototype.logicUpdate=function(a){if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&!this.baseData.isDead){this.changeTime>0&&(this.changeTime-=a,this.changeTime<=0&&this.animation.playAnimation(r.pzaPlantSkName.FLOWER_POT.idle,!0));var t=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(t),n=window.pzaplantManager.pumpkinDataMap.get(t);null==o&&null==n&&this.hasPlant?this.hasPlant=!1:null==o&&null==n||this.hasPlant||(this.hasPlant=!0)}},a.prototype.death=function(a,t){e.prototype.death.call(this,a,t,!1)},a.prototype.close=function(){e.prototype.close.call(this)},i([d],a)}(c.pzaBasePlant));t.pzaFlowerPot=h,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaFogEffect:[function(e,a,t){"use strict";cc._RF.push(a,"89d9aoAzfxKuobLHg49NVFI","pzaFogEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFogEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaWorldEventManager"),l=e("../pzaGameState"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.column5Cloud=[],a.column6Cloud=[],a.column7Cloud=[],a.column8Cloud=[],a.column9Cloud=[],a.planternDatas=new Set,a.allScatterNode=null,a.hasBeBlow=!1,a.beBlowTime=0,a.backing=!1,a.fogOffsetX=0,a.minFogColumn=0,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.node.zIndex=-10,p.pzaWorldEventManager.addListener(p.pzaWorldEventType.SET_GROVEOPACITY,this.setGroveEffect,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this)},a.prototype.setGroveEffect=function(e){this.column9Cloud[0].opacity=e,this.column9Cloud[1].opacity=e},a.prototype.init=function(e,a,t){var o=this;this.planternDatas.clear(),this.allScatterNode=null,this.hasBeBlow=!1,this.backing=!1,this.beBlowTime=0,this.fogOffsetX=0,this.minFogColumn=e,this.initFog(),this.node.stopAllActions();var n=cc.winSize;this.node.setPosition(cc.v2(n.width/2,35)),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2(0,0)).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){a&&a()}))),null!=t&&t.length>0&&(t.forEach(function(e){o.planternDatas.add(e)}),this.getAllScatterFogNode(),this.allScatterNode.forEach(function(e){null!=e&&(e.stopAllActions(),e.opacity=255,e.runAction(cc.fadeOut(.3)))}))},a.prototype.initFog=function(){var e=this;this.column5Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.active=e.minFogColumn<=5,a.opacity=255)}),this.column6Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.active=e.minFogColumn<=6,a.opacity=255)}),this.column7Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.active=e.minFogColumn<=7,a.opacity=255)}),this.column8Cloud.forEach(function(e){null!=e&&(e.stopAllActions(),e.opacity=255)}),this.column9Cloud.forEach(function(e){null!=e&&(e.stopAllActions(),e.opacity=255)})},a.prototype.logicUpdate=function(e){this.backing?this.backFog(e):this.hasBeBlow&&(this.beBlowTime+=e,this.beBlowTime<24||(this.hasBeBlow=!1,this.backing=!0,this.initFog(),this.fogOffsetX=Math.floor(cc.winSize.width/2/l.pzaGameState.map.getBlockWidth()),this.allScatterNode=null))},a.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.column5Cloud.forEach(function(e){e&&e.pauseAllActions()}),this.column6Cloud.forEach(function(e){e&&e.pauseAllActions()}),this.column7Cloud.forEach(function(e){e&&e.pauseAllActions()}),this.column8Cloud.forEach(function(e){e&&e.pauseAllActions()}),this.column9Cloud.forEach(function(e){e&&e.pauseAllActions()})},a.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.column5Cloud.forEach(function(e){e&&e.resumeAllActions()}),this.column6Cloud.forEach(function(e){e&&e.resumeAllActions()}),this.column7Cloud.forEach(function(e){e&&e.resumeAllActions()}),this.column8Cloud.forEach(function(e){e&&e.resumeAllActions()}),this.column9Cloud.forEach(function(e){e&&e.resumeAllActions()})},a.prototype.backFog=function(e){var a=this,t=this.fogOffsetX,o=cc.winSize.width/28,n=this.node.x-o*e;if(n<=0&&(n=0,this.backing=!1),this.node.setPosition(cc.v2(n,35)),this.fogOffsetX=Math.floor(n/l.pzaGameState.map.getBlockWidth()),this.fogOffsetX!=t){var i=this.allScatterNode;this.getAllScatterFogNode(),this.allScatterNode.forEach(function(e){null==e||i&&i.has(e)||(e.stopAllActions(),e.opacity=255,e.runAction(cc.fadeOut(.3)))}),i&&i.forEach(function(e){null==e||a.allScatterNode&&a.allScatterNode.has(e)||(e.stopAllActions(),e.opacity=0,e.runAction(cc.fadeIn(.3)))})}},a.prototype.blowFog=function(e){if(void 0===e&&(e=0),!this.hasBeBlow){this.hasBeBlow=!0,this.backing=!1,this.beBlowTime=e,this.node.stopAllActions();var a=cc.winSize;this.node.runAction(cc.moveTo(.7,cc.v2(a.width/2,35)).easing(cc.easeQuadraticActionOut()))}},a.prototype.addPlantern=function(e){if(null!=e){var a=this.allScatterNode;this.planternDatas.add(e),this.getAllScatterFogNode(),this.allScatterNode.forEach(function(e){null==e||a&&a.has(e)||(e.stopAllActions(),e.runAction(cc.fadeOut(.3)))})}},a.prototype.removePlantern=function(e){var a=this;if(null!=e){var t=this.allScatterNode;this.planternDatas.delete(e),this.getAllScatterFogNode(),t&&t.forEach(function(e){null==e||a.allScatterNode&&a.allScatterNode.has(e)||(e.stopAllActions(),e.runAction(cc.fadeIn(.3)))})}},a.prototype.getAllScatterFogNode=function(){this.allScatterNode=new Set;for(var e=l.pzaGameState.map.getMapRow(),a=4;a<=8;a++){var t=this.getColumnFog(a);if(null!=t)for(var o=0;o<e;o++){var n=t[o];null!=n&&this.planterContainFog(a+this.fogOffsetX,o)&&this.allScatterNode.add(n)}}},a.prototype.getColumnFog=function(e){switch(e){case 4:return this.column5Cloud;case 5:return this.column6Cloud;case 6:return this.column7Cloud;case 7:return this.column8Cloud;case 8:return this.column9Cloud}},a.prototype.planterContainFog=function(e,a){var t=!1;return this.planternDatas.forEach(function(o){t||null==o||o.xIndex<=-1||o.yIndex<=-1||a>o.yIndex+2||a<o.yIndex-2||(t=a==o.yIndex+2||a==o.yIndex-2?e>=o.xIndex-2&&e<=o.xIndex+2:e>=o.xIndex-3&&e<=o.xIndex+3)}),t},i([u({displayName:"5\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],a.prototype,"column5Cloud",void 0),i([u({displayName:"6\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],a.prototype,"column6Cloud",void 0),i([u({displayName:"7\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],a.prototype,"column7Cloud",void 0),i([u({displayName:"8\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],a.prototype,"column8Cloud",void 0),i([u({displayName:"9\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],a.prototype,"column9Cloud",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaFogEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaFootballZombie:[function(e,a,t){"use strict";cc._RF.push(a,"f3422LKR3FJdJV8UNfW8IGR","pzaFootballZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFootballZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaZombieEnum"),l=e("../Plant/pzaAttackType"),s=e("../pzaGameState"),c=e("./pzaBaseZombie"),u=e("./pzaZombieSlot"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=u.pzaZombieSlotType.helmet_red,a}return n(a,e),a.prototype.bindData=function(a,t){e.prototype.bindData.call(this,a,t),s.pzaGameState.isSmallGame()?this.animation.spineAnimation.node.y=-5:this.animation.spineAnimation.node.y=0},a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,-29.65,88.31))],[u.pzaZombieSlotType.helmet_red,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.helmet_red).addState(new u.pzaZombieSlotAtt(1,this.equip1Slot+"1",75.55,-25.98,-90.67)).addState(new u.pzaZombieSlotAtt(2,this.equip1Slot+"2",75.32,-44.98,-90.67)).addState(new u.pzaZombieSlotAtt(3,this.equip1Slot+"3",43.62,-19.1,-90.67))]])},a.prototype.equipHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.zombieHurtSound=function(a){a!=l.pzaAttackType.KNOCK&&this.hasEquip?r.pzaSoundManager.playAudio("screenHurt"):e.prototype.zombieHurtSound.call(this,a)},i([h],a)}(c.pzaBaseZombie));t.pzaFootballZombie=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFrameAnimComponent:[function(e,a,t){"use strict";cc._RF.push(a,"c0754jcq6ZBT7iiagRYrYIF","pzaFrameAnimComponent");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaFrameAnim"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.update=function(e){this.updateFrame(e)},i([l],a)}(r.default));t.default=s,cc._RF.pop()},{"./pzaFrameAnim":"pzaFrameAnim"}],pzaFrameAnim:[function(e,a,t){"use strict";cc._RF.push(a,"2f54fyh8VpKBaCciEDVPkHC","pzaFrameAnim");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spriteFrames=[],a.duration=.1,a.loop=!1,a.playOnload=!1,a.endCallback=null,a.isPlaying=!1,a.playTime=0,a.spriteLen=0,a.spriteIndex=0,a}return n(a,e),a.prototype.onLoad=function(){this.sprite||(this.sprite=this.node.getComponent(cc.Sprite),this.spriteLen=this.spriteFrames.length),this.sprite?(this.sprite.sizeMode=cc.Sprite.SizeMode.RAW,this.sprite.trim=!1,this.playOnload&&this.play()):console.error("====[ERR]FrameAnim, \u672a\u914d\u7f6esprite")},a.prototype.setFrames=function(e){return this.spriteFrames=e,this.spriteLen=this.spriteFrames.length,this.node.getComponent(cc.Sprite).spriteFrame=e[0],this},a.prototype.setDuration=function(e){return this.duration=e,this},a.prototype.setLoop=function(e){return this.loop=e,this},a.prototype.setEndFn=function(e){return this.endCallback=e,this},a.prototype.play=function(){return this.spriteLen<=0?(console.error("====[ERR]FrameAnim, spriteLen\u4e3a\u7a7a"),this):(this.isPlaying=!0,this)},a.prototype.stop=function(){return this.isPlaying=!1,this},a.prototype.reset=function(){return this.spriteIndex=0,this.playTime=0,this.sprite.spriteFrame=this.spriteFrames[0],this},a.prototype.updateFrame=function(e){if(this.isPlaying&&(this.playTime+=e,!(this.playTime<this.duration))){if(this.spriteIndex++,this.playTime=0,this.spriteIndex>=this.spriteLen){if(!this.loop)return this.isPlaying=!1,void(this.endCallback&&this.endCallback());this.spriteIndex=0}this.sprite.spriteFrame=this.spriteFrames[this.spriteIndex]}},i([l({type:[cc.SpriteFrame]})],a.prototype,"spriteFrames",void 0),i([l({tooltip:"\u6bcf\u4e00\u5e27\u65f6\u957f"})],a.prototype,"duration",void 0),i([l(cc.Boolean)],a.prototype,"loop",void 0),i([l(cc.Boolean)],a.prototype,"playOnload",void 0),i([p],a)}(cc.Component);t.default=s,cc._RF.pop()},{}],pzaFrozenEffect:[function(e,a,t){"use strict";cc._RF.push(a,"2216dff601LwaALsQ/9tumg","pzaFrozenEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFrozenEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaSpineController"),s=e("../../Common/pzaWorldEventManager"),c=e("../Data/pzaBuffData"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a.frostNode=null,a.poolPrefab=null,a.thawing=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.CLEAR_FROZENEFFECT,this.close,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.CLEAR_FROZENEFFECT,this.close,this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.thawing=!1,this.node.setPosition(a.logicPos.x,a.logicPos.y+a.offsetY),this.spine.node.active=!1,this.frostNode.active=!0;var t=10*-this.baseData.yIndex+5;this.node.zIndex=t},a.prototype.logicUpdate=function(){this.thawing||(null==this.baseData||this.baseData.isDead?this.close():this.baseData.buffData.hasBuff(c.pzaBuffType.FROZEN)||this.thaw())},a.prototype.thaw=function(){var e=this;this.thawing=!0,this.spine.node.active=!0,this.frostNode.active=!1,this.spine.playAnimation("blow1",!1,function(){e.close()})},a.prototype.pauseSelf=function(){this.thawing&&this.spine.pauseAnimation()},a.prototype.resumeSelf=function(){this.thawing&&this.spine.resumeAnimation()},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([h({displayName:"spine\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"spine",void 0),i([h({displayName:"\u51b0\u51bb\u56fe\u8282\u70b9",type:cc.Node})],a.prototype,"frostNode",void 0),i([h(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([d],a)}(r.pzaBaseComponent);t.pzaFrozenEffect=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData"}],pzaFumeShroom:[function(e,a,t){"use strict";cc._RF.push(a,"3a637jM3wtCYrxURFH0/B6g","pzaFumeShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaFumeShroom=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../pzaEffectManager"),l=e("../pzaGameState"),s=e("./pzaAttackType"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):this.playNormalAni(),l.pzaGameState.onlyBoomPlant=!1,l.pzaGameState.useShroom=!0},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this)))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=window.pzazombieManager.getCanAttackZombies(e.baseData,4);if(t&&t.length>0)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void e.animation.playAnimation("attack",!1,a,function(){if(null!=e.baseData&&!e.baseData.isDead){var a=cc.v2(e.baseData.logicPos.x+e.shootNode.x,e.baseData.logicPos.y+e.shootNode.y);p.pzaEffectManager.createFumeShroomEffect(e.baseData.yIndex,a,null),e.scheduleOnce(function(){e&&e.baseData&&!e.baseData.isDead&&e.hurtZombies(t)},.3/l.pzaGameState.gameSpeed)}});e.animation.playAnimation("idle",!1,a)};this.animation.playAnimation("idle",!1,a)},a.prototype.hurtZombies=function(e){var a=this;null!=e&&e.forEach(function(e){if(null!=a.baseData){var t=window.pzazombieManager.getZombie(e);t&&t.hurt(a.baseData.atk,a.baseData,s.pzaAttackType.PENETRATE)}})},i([h({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([d],a)}(c.pzaBasePlant);t.pzaFumeShroom=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGaby:[function(e,a,t){"use strict";cc._RF.push(a,"6a1fe1Lg85D95wxLRsGfKxS","pzaGaby");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGaby=void 0;var r=e("../../Common/pzaUtil"),p=e("../Data/pzaBuffData"),l=e("../Data/pzaZombieEnum"),s=e("../pzaGameState"),c=e("./pzaAttackType"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.callCD=30,a.callTime=0,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.callTime=0,this.aniLogic(),s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1},a.prototype.aniLogic=function(e){var a=this;void 0===e&&(e=!1);var t=this.findAttackTarget();null!=t?this.animation.playAnimation("attack",!1,this.aniLogic.bind(this),function(){a.attack(t)}):this.animation.playAnimation("idle",!1,this.aniLogic.bind(this))},a.prototype.logicUpdate=function(a){if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead&&(this.callTime+=a,this.callTime>=this.callCD)){this.callTime=0;var t=r.pzaUtil.getRandomNum(0,1);this.spawnZombie(1==t?l.pzaZombieEnum.Cream_Normal:l.pzaZombieEnum.Cream_Pea)}},a.prototype.spawnZombie=function(e,a){void 0===a&&(a=0);var t=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex,this.baseData.yIndex,!0);t.zombieData.direction=1,a&&(t.atk=a),window.pzazombieManager.createHypnZombie(t)},a.prototype.findAttackTarget=function(){var e=this;if(null!=this.baseData&&!this.baseData.isDead){var a=null,t=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(p.pzaBuffType.FLY)||o.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(p.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=l.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(p.pzaBuffType.FROZEN)||o.zombieData.toolType==l.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=l.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=e.baseData.xIndex)){var n=r.pzaUtil.getDistance(o.logicPos,e.baseData.logicPos);if(o.logicPos.x<=e.baseData.logicPos.x)n<=.5*s.pzaGameState.map.getBlockWidth()&&(a=o,t=0);else if(!(n>1.8*s.pzaGameState.map.getBlockWidth()))return-1==t?(a=o,void(t=n)):void(t<=n||(a=o,t=n))}}),null==a){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&(a=window.pzazombieManager.drZomBoss.baseData)}return a}},a.prototype.attack=function(e){if(null!=this.baseData&&!this.baseData.isDead){var a=window.pzazombieManager.getZombie(e);null==a||null==a.baseData||a.baseData.isDead?this.baseData.plantData.eatTime=0:a.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.PENETRATE)}},i([h],a)}(u.pzaBasePlant));t.pzaGaby=m,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGameArtTest:[function(e,a,t){"use strict";cc._RF.push(a,"61a88oJCZVJxIGp4tVyn+Ei","pzaGameArtTest");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameArtTest=void 0;var i=e("../Battle/Data/pzaPlantEnum"),r=e("../Battle/pzaGameState"),p=e("../Load/pzaPreLoadManager"),l=e("../View/Battle/pzaPlantSelectView"),s=e("../View/pzaCommonMask"),c=e("./pzaGameManager"),u=e("./pzaGameNormal"),d=e("./pzaGamePartConfig"),h=e("./pzaUIManager"),m=e("./pzaUtil"),f=e("./pzaWorldEventManager"),z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=r.pzaGameMode.ART_TEST,a}return n(a,e),a.prototype.skipPartStar=function(){return!1},a.prototype.beforeLoad=function(e,a){r.pzaGameState.newZombie=null;var t=d.pzaGamePartConfig.getPartConfig(e,a);t.zombieTypes=[1,4,5,6],t.initSun=9900,window.pzaMapManager.preImgByMapId=new Map,window.pzaMapManager.DoorByMapId=new Map,r.pzaGameState.hadRevived=!0},a.prototype.gameStart=function(a,t){e.prototype.resetTryPlant.call(this),this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},a.prototype.normalStartGameCall=function(e,a,t,o){void 0===t&&(t=!0),void 0===o&&(o=!1),console.log("normalStartGameCall\u6f14\u793a\u5f00\u59cb",e,a),window.pzaMapManager.node.x=0,c.pzaGameManager.showBattleUI(p.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){var a=e&&e.getComponent(l.pzaPlantSelectView),t=[i.pzaPlantEnum.PEA_SHOOTER,i.pzaPlantEnum.SNOW_PEA,i.pzaPlantEnum.WALL_NUT];a&&a.init(t),a&&a.initPlant(),s.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),r.pzaGameState.gamePause=!1,r.pzaGameState.guideSunPause=!0,r.pzaGameState.guideZombiePause=!1,window.pzazombieManager.nextWaveTime=0,window.pzazombieManager.curWaveTime=46})},a.prototype.gameRestart=function(){h.pzaUIManager.removeBoardUI(),r.pzaGameState.midOut=!1,c.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),this.loadAndStart(r.pzaGameState.curChapter,r.pzaGameState.curPart),r.pzaGameState.hadRevived=!0,r.pzaGameState.restartGame()},a.prototype.showBattleDown=function(e){e.freePlantNode.active=!1,e.gameProp.node.active=!0,e.speedBtn.active=!0,e.sunUIShowNode.active=!0,e.gameProp.hideAllProp(),e.shovelShowNode.active=!0,e.skipPartBtn.active=!1,e.testNextWaveBtn.active=!1},a.prototype.showPreviewTip=function(e,a){e.word.string=e.chapterPreviewTips[a%100-1],e.flagWord.node.active=!1},a.prototype.getPreviewZombieCnt=function(e,a){var t=10==a?m.pzaUtil.getRandomNum(16,17):m.pzaUtil.getRandomNum(9,10);return e%300==1&&1==a&&(t=5),e%100==3&&5==a&&(t=m.pzaUtil.getRandomNum(13,14)),t},a.prototype.clickSelectPartInFailView=function(){},a}(u.pzaGameNormal);t.pzaGameArtTest=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameBase:[function(e,a,t){"use strict";cc._RF.push(a,"2ea68IoCGRJ3oY1yVnC2lvC","pzaGameBase");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameBase=void 0;var n=e("../Battle/Data/pzaDropType"),i=e("../Battle/pzaEffectManager"),r=e("../Battle/pzaGameState"),p=e("../Load/pzaBundleObjectPool"),l=e("../Load/pzaPreLoadManager"),s=e("../View/Battle/pzaGetAchieveView"),c=e("../View/Battle/pzaPlantSelectView"),u=e("../View/pzaCommonMask"),d=e("../View/pzaWarningView"),h=e("../utils/pzaChannel"),m=e("../utils/pzakc"),f=e("./pzaCollisionManager"),z=e("./pzaGameConfig"),y=e("./pzaGameManager"),g=e("./pzaGamePartConfig"),v=e("./pzaLocalData"),b=e("./pzaRankMgr"),P=e("./pzaSoundManager"),C=e("./pzaStatisticsMgr"),E=e("./pzaTipManager"),S=e("./pzaUIManager"),_=e("./pzaUtil"),D=e("./pzaWorldEventManager"),M=e("../Battle/Data/pzaBaseData"),w=e("../Battle/Plant/pzaAttackType"),T=e("../Battle/Data/pzaZombieEnum"),A=e("../Battle/Zombie/pzaBaseZombie"),B=e("../Garden/pzaGardenMgr"),G=e("./pzaOperationMgr"),I=e("../Achieve/pzaAchieveMgr"),O=e("../Achieve/pzaAchieve"),N=function(){function e(){this.gameMode=r.pzaGameMode.NORMAL,this.toolButtonUseTimes=0,this.toolButtonLeftArr=null,this.adPlantTimes=0,this.autoSunCreate=null,this.showErrorViewTimer=null,this.preLoadFun=null}return e.prototype.getGameModeName=function(){return"\u666e\u901a\u6a21\u5f0f-"},e.prototype.getRankKey=function(){return""},e.prototype.createAdBomb=function(){window.pzaplantManager.createAdCherry()},e.prototype.init=function(){return this},e.prototype.isMainMode=function(){return!1},e.prototype.isEndless=function(){return!1},e.prototype.isAutoCreateSun=function(){return!0},e.prototype.beforeLoad=function(){},e.prototype.skipPartStar=function(){return!0},e.prototype.getPlantArr=function(){return v.pzaLocalData.data.ownPlants},e.prototype.getZombieTypeArr=function(){return null},e.prototype.addOtherRes=function(){},e.prototype.getResArr=function(e,a){var t=Array.from(l.pzaPreLoadManager.getPartSubResources(e,a)),o=this.getPlantArr(e,a),n=[];o.forEach(function(e){var a=l.pzaPreLoadManager.getPlantUrl(e);if(null!=a&&!(n.indexOf(a)>=0)){t.push(new l.pzaResourceDetail(a));var o=l.pzaPreLoadManager.getSubResources(a);null!=o&&(t=t.concat(o)),n.push(a)}});var i=this.getZombieTypeArr(e,a);return null!=i&&(t.push(new l.pzaResourceDetail(l.pzaResourceUrl.FLAG_ZOMBIE)),i.forEach(function(e){var a=l.pzaPreLoadManager.getZombieUrl(e);if(null!=a){t.push(new l.pzaResourceDetail(a));var o=l.pzaPreLoadManager.getSubResources(a);null!=o&&(t=t.concat(o))}})),this.addOtherRes(t),t},e.prototype.readData=function(){},e.prototype.initMapPlantZombie=function(e,a){window.pzaMapManager.init(e,a,1),window.pzaplantManager.init(),window.pzazombieManager.init()},e.prototype.initGameState=function(){console.warn("\u9700\u8981\u914d\u7f6einitGameState")},e.prototype.preLoad=function(e,a,t){var o=this;this.preLoadFun=function(){o.preLoad(e,a,t)},this.init(),this.beforeLoad(e,a),S.pzaUIManager.hideLoadErrorView(),this.showErrorViewTimer=setTimeout(function(){S.pzaUIManager.showLoadErrorView()},2e4),this.initGameState(e,a),this.toolButtonUseTimes>0&&(this.toolButtonLeftArr=[this.toolButtonUseTimes,this.toolButtonUseTimes,this.toolButtonUseTimes,this.toolButtonUseTimes]),r.pzaGameState.isGameEnd=!1,f.pzaCollisionManager.getInstance.setOn();var n=this.getResArr(e,a);S.pzaUIManager.showLoading(),P.pzaSoundManager.clearAllLoopAudio(),this.readData(e,a),S.pzaUIManager.setLoadingActText("\u51c6\u5907\u52a0\u8f7d..");var i=!1;p.pzaBundleObjectPool.preLoadSubResource(n,function(){if(h.pzaChannel.isConfRemote)S.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u5b8c\u62101"),i=!0,S.pzaUIManager.hideLoading(t),o.showErrorViewTimer&&clearTimeout(o.showErrorViewTimer),o.showErrorViewTimer=null;else try{S.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u5b8c\u62101"),i=!0,S.pzaUIManager.hideLoading(t),o.showErrorViewTimer&&clearTimeout(o.showErrorViewTimer),o.showErrorViewTimer=null}catch(e){S.pzaUIManager.setLoadingActText("\u8fdb\u5165\u5f02\u5e381: "+e)}},function(e){S.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u4e2d..");var a=Math.min(100,Math.ceil(100*e));S.pzaUIManager.updateLoadPro(a),100==a&&(S.pzaUIManager.setLoadingActText("\u5373\u5c06\u8fdb\u5165.."),setTimeout(function(){if(i)S.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u672a\u5b8c\u6210..");else try{S.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u5b8c\u62102"),S.pzaUIManager.instance.loadNode.active=!1,t(),o.showErrorViewTimer&&clearTimeout(o.showErrorViewTimer),o.showErrorViewTimer=null}catch(e){S.pzaUIManager.setLoadingActText("\u8fdb\u5165\u5f02\u5e382: "+e)}},2e3))}),r.pzaGameState.autoPickLock=!1},e.prototype.beforeGameStart=function(){P.pzaSoundManager.playBgm(P.pzaBGMName.LOADING),u.pzaCommonMask.showMask(),i.pzaEffectManager.createGroveEffect()},e.prototype.gameStart=function(e,a){this.beforeGameStart(e,a),this.normalStartGameCall(e,a)},e.prototype.loadAndStart=function(e,a){var t=this;this.preLoad(e,a,function(){t.gameStart(e,a)})},e.prototype.firstStart=function(e,a,t){void 0===t&&(t=!1),r.pzaGameState.gameMode==r.pzaGameMode.NORMAL_WEEKTWO&&(this.gameMode=r.pzaGameMode.NORMAL_WEEKTWO),r.pzaGameState.inGameTime=0,r.pzaGameState.hasReportAliveOnly=!1,r.pzaGameState.hadRevived=!1,this.loadAndStart(e,a)},e.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u5192\u9669\u6a21\u5f0f\u201d\uff0c"+["\u4e00\u5468\u76ee\u57ce\u5e02\u8857\u9053","\u4e00\u5468\u76ee\u9ed1\u591c\u7981\u533a","\u4e00\u5468\u76ee\u6d77\u6ee9\u57ce\u9547","\u4e00\u5468\u76ee\u8ff7\u96fe\u5c9b\u5c7f","\u4e00\u5468\u76ee\u51b0\u5c01\u96ea\u5c71","\u4e8c\u5468\u76ee\u57ce\u5e02\u8857\u9053","\u4e8c\u5468\u76ee\u9ed1\u591c\u7981\u533a","\u4e8c\u5468\u76ee\u6d77\u6ee9\u57ce\u9547","\u4e8c\u5468\u76ee\u8ff7\u96fe\u5c9b\u5c7f","\u4e8c\u5468\u76ee\u51b0\u5c01\u96ea\u5c71"][r.pzaGameState.curChapter-1]+"\u7b2c"+r.pzaGameState.curPart+"\u5173\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},e.prototype.midOutAndStart=function(e,a,t,o,n,i){var p=this,s=v.pzaLocalData.endLessPowerCost,c=1,h=1500;if((i||r.pzaGameState.judgeIsMini(n)||r.pzaGameState.judgeIsVase(n)||r.pzaGameState.judgeIsZombie(n))&&(s=v.pzaLocalData.normalPowerCost),n==r.pzaGameMode.VASE_ENDLESS&&v.pzaLocalData.data.vaseEndLessLevelIndex&&v.pzaLocalData.data.vaseEndLessLevelIndex>0&&(s=0,h=0,c=0),v.pzaLocalData.isShowPowerGift||(s=0,h=0),e)S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.WARNING_VIEW,function(i){var l=i&&i.getComponent(d.pzaWarningView);l&&l.show(e,"\u662f","\u5426",function(){if(v.pzaLocalData.data.power<s)return E.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void S.pzaUIManager.showPowerView();u.pzaCommonMask.showMask(),v.pzaLocalData.setPower(-s),m.default.sendMsg("powerani"),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.POWER_ANI,{cost:s}),setTimeout(function(){u.pzaCommonMask.hideMask(),r.pzaGameState.gameMode=p.gameMode,y.pzaGameManager.removeBattleUI(),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),o&&o(),S.pzaUIManager.removeBoardUI(),p.loadAndStart(a,t),n!=r.pzaGameMode.VASE&&(r.pzaGameState.hadRevived=!1),v.pzaLocalData.isWeekTwo&&(r.pzaGameState.weekTwoInitPlants=[])},h)},null,"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,s,!1,c)});else{if(v.pzaLocalData.data.power<s)return E.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void S.pzaUIManager.showPowerView();u.pzaCommonMask.showMask(),v.pzaLocalData.setPower(-s),m.default.sendMsg("powerani"),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.POWER_ANI,{cost:s});var f=this;setTimeout(function(){r.pzaGameState.gameMode=f.gameMode,y.pzaGameManager.removeBattleUI(),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),o&&o(),S.pzaUIManager.removeBoardUI(),p&&f.firstStart(a,t),v.pzaLocalData.isWeekTwo&&(r.pzaGameState.weekTwoInitPlants=[])},h)}},e.prototype.initPartProcess=function(){},e.prototype.updatePartProcess=function(e){e.partProNode.active=!0,e.zombieHeadNode.active=!0;var a=window.pzazombieManager.wave/e.maxWave;a=Math.min(1,a);var t=e.partProgress.fillRange+a,o=Math.max(.05,3*t);cc.Tween.stopAllByTarget(e.partProgress),cc.Tween.stopAllByTarget(e.zombieHeadNode),cc.tween(e.partProgress).to(o,{fillRange:-a}).start(),cc.tween(e.zombieHeadNode).to(o,{x:Math.min(10+-315*a,-15)}).start()},e.prototype.showBattleDown=function(e){e.pauseBtn.active=!0,e.blackShovel.active=!1,e.guideArrow.active=!1,e.speedBtn.active=!1,e.sunUIShowNode.active=!1,e.freePlantNode.active=!1,e.gameProp.bombAni_1="3ui_1",e.gameProp.bombAni_2="3ui_idle3",e.gameProp.node.active=!0,setTimeout(function(){1==e.speedBtn.active&&C.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"18"},{name:"adname",value:"\u89e3\u9501\u52a0\u901f\u529f\u80fd"})},100)},e.prototype.refreshNextWave=function(e,a){e.curWaveTime+=a,e.nextWaveTime-=a},e.prototype.createWave=function(e){G.pzaOperationMgr.isShowChangeSpeedTips(),e.wave++,console.log("createWaveZombie",e.wave),e.curWaveZombieDatas.clear(),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.UPDATE_PART_PRO,null),e.curWaveTime=0,e.preRefreshHp=g.pzaWaveConfig.getPreRefreshHp(),e.hasShowRedTip=!1},e.prototype.createTombWaterWaveData=function(e){var a=g.pzaGamePartConfig.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart);if(null!=a){var t=[],o=[],n=[];if(window.pzaMapManager.TombMap.forEach(function(o){if(null!=o&&null!=o.xIndex&&null!=o.yIndex&&!window.pzaplantManager.hasPlant(o.xIndex,o.yIndex)){var n=a.getRandomTombZombie(),i=e.createFixBlockZombieData(n,o.xIndex,o.yIndex);e.curWaveZombieDatas.add(i),t.push(i)}}),window.pzazombieManager.lastZombieDataMap.set(0,t),a.lastWaterWaveZombie>0){for(var i=[],p=a.lastWaterWaveMinColumn-1;p<9;p++)i.push([p,window.pzaMapManager.getRandomWaterWay()]),i.push([p,window.pzaMapManager.getRandomWaterWay()]);i.sort(function(){return Math.random()-.5});for(var l=0;l<a.lastWaterWaveZombie;l++)if(null!=(u=i[l])){var s=a.getRandomDiveZombie(),c=e.createFixBlockZombieData(s,u[0],u[1]);e.curWaveZombieDatas.add(c),o.push(c)}}if(window.pzazombieManager.lastZombieDataMap.set(1,o),a.lastBungeeZombie>0){for(i=[],p=a.lastBungeeMinColumn-1;p<9;p++)i.push([p,0]),i.push([p,1]),i.push([p,2]),i.push([p,3]),i.push([p,4]);for(i.sort(function(){return Math.random()-.5}),l=0;l<a.lastBungeeZombie;l++){var u;if(null!=(u=i[l])){var d=a.getRandomTombZombie();c=window.pzazombieManager.createFixBlockZombieData(d,u[0],u[1]),e.zombieDatas[u[1]].delete(c),e.curWaveZombieDatas.add(c),n.push(c)}}window.pzazombieManager.lastZombieDataMap.set(2,n)}}},e.prototype.lastTombWaterZombie=function(e){setTimeout(function(){window.pzazombieManager.lastZombieDataMap.forEach(function(a,t){for(var o=0;o<a.length;o++){var n=a[o];0==t?e.createZombie(n,!1,!0):1==t?e.createZombie(n,!1,!1,!0):2==t&&i.pzaEffectManager.createBungeeZombieEffect(n)}})},500/r.pzaGameState.gameSpeed),window.pzaMapManager.TombMap.forEach(function(e){null!=e&&null!=e.xIndex&&null!=e.yIndex&&e.playLightAni()})},e.prototype.createRandomDrop=function(e){if(!r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)){var a=Math.random();a<=z.pzaGameConfig.DIAMOND_CHANCE?i.pzaEffectManager.createDropCoin(n.pzaDropType.DIAMOND,e):a<=z.pzaGameConfig.DIAMOND_CHANCE+z.pzaGameConfig.GOLD_CHANCE?i.pzaEffectManager.createDropCoin(n.pzaDropType.GOLD_COIN,e):a<=z.pzaGameConfig.DIAMOND_CHANCE+z.pzaGameConfig.GOLD_CHANCE+z.pzaGameConfig.SILVER_CHANCE&&i.pzaEffectManager.createDropCoin(n.pzaDropType.SILVER_COIN,e)}},e.prototype.createPassLastPartDrop=function(e){if(!r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)){var a=Math.random();a<=z.pzaGameConfig.PLANT_CHANCE&&B.default.instance().isDropGardenPlant()?i.pzaEffectManager.createDropCoin(n.pzaDropType.GARDEN_PLANT,e):a<=z.pzaGameConfig.CHOCOLATE_CHANCE?i.pzaEffectManager.createDropCoin(n.pzaDropType.GARDEN_CHOCOLATE,e):this.createRandomDrop(e)}},e.prototype.createYetiDrops=function(e){for(var a=0;a<4;a++)i.pzaEffectManager.createDropCoin(n.pzaDropType.DIAMOND,cc.v2(e.x+80*Math.random()-40,e.y+80*Math.random()-40));v.pzaLocalData.data.hasKillYeti||(v.pzaLocalData.data.hasKillYeti=!0,v.pzaLocalData.addDirty("hasKillYeti"))},e.prototype.zombieDeathDrop=function(e){e.zombieData.zombieType!=T.pzaZombieEnum.YETI_ZOMBIE?v.pzaLocalData.data.passLastPart&&y.pzaGameManager.getCurrentGame().isMainMode()&&r.pzaGameState.gameMode!=r.pzaGameMode.ZOM_BOSS?this.createPassLastPartDrop(e.logicPos):this.createRandomDrop(e.logicPos):e.logicPos.x<640&&this.createYetiDrops(e.logicPos)},e.prototype.checkAllZombieDeath=function(e){var a=0;if(e.zombieDatas.forEach(function(e){e.forEach(function(e){e.isDead||a++})}),console.log("zombieData.dataList",e.zombieDatas),console.log("zombieData.size",a),a>0)return!1;var t=r.pzaGameState.hasMainConf();return t&&t.need_sun&&r.pzaGameState.pickSunCount<t.need_sun?(y.pzaGameManager.specialFail("\u80fd\u91cf\u7684\u751f\u4ea7\u9700\u8981\u8fbe\u5230\u8981\u6c42\n"+t.tips,!0),!1):!(t&&t.kill&&!r.pzaGameState.competeKill&&(y.pzaGameManager.specialFail("\u9700\u8981\u6ce8\u610f\u8981\u8fde\u7eed\u7684\u51fb\u9000\u602a\u4eba\n"+t.tips,!0),1))},e.prototype.isLastWave=function(e){return e.wave>=g.pzaGamePartConfig.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart).maxWave},e.prototype.onZombieDeath=function(e,a,t,o){void 0===t&&(t=!0),void 0===o&&(o=null),t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)&&(o==w.pzaAttackType.CLEAN_CAR&&I.default.instance().checkAddAchieve(O.pzaAchieveType.ACH_13),y.pzaGameManager.passPart(a.logicPos))},e.prototype.createPreviewZombie=function(e,a,t){var o=10==t?_.pzaUtil.getRandomNum(16,17):_.pzaUtil.getRandomNum(9,10),n=1;1==a&&1==t&&(o=5),3!=a&&8!=a||5!=t||(o=_.pzaUtil.getRandomNum(13,14),n=z.pzaGameConfig.miniZombieScale);var i=null;if(r.pzaGameState.isSurvival()?(i=r.pzaGameState.survivalConfig,o=_.pzaUtil.getRandomNum(9,10),n=1):i=g.pzaGamePartConfig.getPartConfig(a,t),null!=i){var s=i.getPreviewZombies(o);if(null!=s){var c=this.getPreviewRandomPosList();c.sort(function(){return Math.random()-.5});for(var u=function(a,t){var o=l.pzaPreLoadManager.getZombieUrl(a);p.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,i){if(null==o&&null!=i){i.setParent(e.previewZombieNode),i.setPosition(t),i.zIndex=-t.y;var r=i.getComponent(A.pzaBaseZombie),p=new M.pzaBaseData(null,a);p.hp=1,p.logicPos=t,r&&r.preview(p,e.previewShadowNode,n),e.PreviewZombies.add(r)}else console.error(o)})},d=0;d<s.length;d++){var h=s[d],m=c[d];h==T.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==a?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),u(h,m)}if((5==a||10==a)&&5==t&&!r.pzaGameState.isSurvival()){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(d=0;d<3;d++)m=f[d],u(T.pzaZombieEnum.BUNGEE_ZOMBIE,m)}P.pzaSoundManager.playBgm(P.pzaBGMName.PRE_BGM)}}},e.prototype.getPreviewRandomPosList=function(){var e=[],a=-100;return 5==r.pzaGameState.mapId?a=0:3!=r.pzaGameState.mapId&&4!=r.pzaGameState.mapId||(a=5),e.push(cc.v2(a+1750+_.pzaUtil.getRandomFloatNum(-60,60),40+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1750+_.pzaUtil.getRandomFloatNum(-60,60),90+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1750+_.pzaUtil.getRandomFloatNum(-60,60),140+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1750+_.pzaUtil.getRandomFloatNum(-60,60),190+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1680+_.pzaUtil.getRandomFloatNum(-60,60),240+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1780+_.pzaUtil.getRandomFloatNum(-60,60),240+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1680+_.pzaUtil.getRandomFloatNum(-60,60),290+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1780+_.pzaUtil.getRandomFloatNum(-60,60),290+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1680+_.pzaUtil.getRandomFloatNum(-60,60),340+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1780+_.pzaUtil.getRandomFloatNum(-60,60),340+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1670+_.pzaUtil.getRandomFloatNum(-60,60),390+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1770+_.pzaUtil.getRandomFloatNum(-60,60),390+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1670+_.pzaUtil.getRandomFloatNum(-60,60),440+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1770+_.pzaUtil.getRandomFloatNum(-60,60),440+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1670+_.pzaUtil.getRandomFloatNum(-60,60),490+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1770+_.pzaUtil.getRandomFloatNum(-60,60),490+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1660+_.pzaUtil.getRandomFloatNum(-60,60),540+_.pzaUtil.getRandomFloatNum(-60,60))),e.push(cc.v2(a+1700+_.pzaUtil.getRandomFloatNum(-60,60),540+_.pzaUtil.getRandomFloatNum(-60,60))),e},e.prototype.showPreviewTip=function(e,a,t){r.pzaGameState.isTryMode(a,t)?(e.word.string="",e.flagWord.node.active=!1):(e.word.string=e.chapterPreviewTips[a-1],e.flagWord.node.active=!1)},e.prototype.showBattlePropButtons=function(e){var a,t;if(e.freeSunNode.active=!0,e.cherryBombNode.active=!0,e.autoPickNode.active=!0,e.clearCDNode.active=!1,r.pzaGameState.isMainMode()&&(1==r.pzaGameState.curChapter&&1==r.pzaGameState.curPart||1==r.pzaGameState.curChapter&&2==r.pzaGameState.curPart)){v.pzaLocalData.data.curChapter==r.pzaGameState.curChapter&&v.pzaLocalData.data.curPart==r.pzaGameState.curPart&&(e.freeSunNode.active=!1,e.autoPickNode.active=!1,e.cherryBombNode.active=!1);try{for(var n=o([[1,5],[1,10],[2,10],[3,10],[4,10],[5,5],[5,10],[6,5],[6,10],[7,10],[8,10],[9,10],[10,5],[10,10]]),i=n.next();!i.done;i=n.next()){var p=i.value;p[0]==r.pzaGameState.curChapter&&p[1]==r.pzaGameState.curPart&&(e.cherryBombNode.active=!0)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}}},e.prototype.clickSelectPartInFailView=function(){S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PART_SELECT_VIEW,function(){S.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},e.prototype.setAdPlantArr=function(){return null},e.prototype.getAdPlantArr=function(){return null},e.prototype.playBgm=function(){switch(r.pzaGameState.curChapter){case 1:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_1);break;case 2:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_2);break;case 3:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_3);break;case 4:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_4);break;case 5:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_5);break;case 6:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_1);break;case 7:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_2);break;case 8:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_3);break;case 9:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_4);break;case 10:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_5)}},e.prototype.normalStartGameCall=function(e,a,t){var o=this;void 0===t&&(t=!0);var n=null;(this.gameMode==r.pzaGameMode.NORMAL||this.gameMode==r.pzaGameMode.NORMAL_WEEKTWO&&7==e&&5==a)&&(n=g.pzaGamePartConfig.getPartDefaultPlant(e,a)),window.pzaMapManager.initMapTomb(e,a,function(){}),window.pzaplantManager.createInitPlant(),window.pzaMapManager.previewMap(function(){y.pzaGameManager.showBattleUI(l.pzaResourceUrl.PLANT_SELECT_VIEW,function(t){u.pzaCommonMask.hideMask();var p=t&&t.getComponent(c.pzaPlantSelectView);p&&p.init(n,function(){u.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(null==n?0:1,function(){if(o.gameMode!=r.pzaGameMode.SURVIVAL&&o.gameMode!=r.pzaGameMode.SUR_ENDLESS&&1==e&&3==a)return window.pzaMapManager.initCleanCar(),void i.pzaEffectManager.createReadyWord(function(){u.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),p&&p.initPlant(),r.pzaGameState.gamePause=!1,D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_RESUME,null)});null!=n&&window.pzaMapManager.initCleanCar(),window.pzaMapManager.fogEnter(function(){null==n&&window.pzaMapManager.initCleanCar(),i.pzaEffectManager.createReadyWord(function(){if(o.playBgm(),u.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),p&&p.initPlant(),r.pzaGameState.gamePause=!1,D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_RESUME,null),r.pzaGameState.gameMode==r.pzaGameMode.SURVIVAL&&1==r.pzaGameState.curPart)E.pzaTipManager.showGameTip("\u4f60\u80fd\u575a\u6301\u5230\u7b2c5\u6ce2\u653b\u51fb\u5417\uff1f");else if(r.pzaGameState.gameMode==r.pzaGameMode.SUR_ENDLESS&&1==r.pzaGameState.curPart){var e="\u4f60\u80fd\u575a\u6301\u5230\u7b2c\u51e0\u6ce2\u653b\u51fb\u5462\uff1f",a=v.pzaLocalData.data.survivalFlagCount[r.pzaGameState.curChapter-1];if(null!=a&&a>0){e+="\n\u5386\u53f2\u6700\u9ad8\u6ce2\u6570\uff1a"+a;var t=b.pzaRankMgr.endlessRank[r.pzaGameState.curChapter-1];null!=t&&t>0&&(e+=" \u5168\u670d\u6392\u540d\uff1a"+t)}E.pzaTipManager.showGameTip(e)}})})})})})},t)},e.prototype.gameRestart=function(){S.pzaUIManager.removeBoardUI(),r.pzaGameState.midOut=!1,y.pzaGameManager.removeBattleUI(),r.pzaGameState.gameMode!==r.pzaGameMode.BANG_JAR&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE_ENDLESS||(r.pzaGameState.isGameEnd=!1,r.pzaGameState.isMenuShow=!1),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),this.loadAndStart(r.pzaGameState.curChapter,r.pzaGameState.curPart),r.pzaGameState.hadRevived=!1,r.pzaGameState.gameMode!==r.pzaGameMode.VASE&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE_ENDLESS||(r.pzaGameState.hadRevived=!0)},e.prototype.gameRecover=function(e,a){var t=this;S.pzaUIManager.removeBoardUI(),r.pzaGameState.midOut=!1;var o=v.pzaLocalData.endLessPowerCost;(y.pzaGameManager.getCurrentGame().isMainMode()||r.pzaGameState.gameMode==r.pzaGameMode.NORMAL||r.pzaGameState.gameMode==r.pzaGameMode.NORMAL_WEEKTWO||r.pzaGameState.judgeIsMini(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsVase(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsZombie(r.pzaGameState.gameMode))&&(o=v.pzaLocalData.normalPowerCost),S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.WARNING_VIEW,function(n){var i=n&&n.getComponent(d.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){r.pzaGameState.gamePause=!1,D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_RESUME,null),_.pzaUtil.changeGameSpeed(r.pzaGameState.gameSpeed),P.pzaSoundManager.clearAllLoopAudio(),4!=e&&9!=e||10!=a||P.pzaSoundManager.playLoopAudio("rain",!0),5!=e&&10!=e||10!=a?t.playBgm():P.pzaSoundManager.playBgm(P.pzaBGMName.ZOMBIEBOSS_BGM)},function(){y.pzaGameManager.removeBattleUI(),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),r.pzaGameState.gameMode==r.pzaGameMode.VASE_ENDLESS&&(v.pzaLocalData.data.vaseEndLessLevelIndex=0,v.pzaLocalData.data.vaseEndLessSunCount=0,v.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount")),t.firstStart(e,a,!0),v.pzaLocalData.isWeekTwo&&(r.pzaGameState.weekTwoInitPlants=[])},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,o,!0,2)})},e.prototype.guide=function(){},e.prototype.showPassUiNoStar=function(){S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PART_SELECT_VIEW,function(){S.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},e.prototype.winDrop=function(){return v.pzaLocalData.rfRecordPassPart(),"my"===h.pzaChannel.instance().channel&&h.pzaChannel.instance().getChannel().actSubmit(),n.pzaDropType.COIN_PACKAGE},e.prototype.partWin=function(e,a,t){var o=this;void 0===e&&(e=!0),void 0===a&&(a=null),void 0===t&&(t=!1),_.pzaUtil.changeGameSpeed(1),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_PAUSE,null),r.pzaGameState.gamePause=!0;var n=0;v.pzaLocalData.hasUseProp&&(n=1);var i=Date.now()-v.pzaLocalData.gameStartTimeStamp;i=Math.ceil(i/1e3);var p=10*(r.pzaGameState.curChapter-1)+r.pzaGameState.curPart;this.isMainMode()&&(C.pzaStatisticsMgr.sendLevelEvent(p,C.pzaEventLevelType.completed,n,i,r.pzaGameMode.NORMAL),m.default.eventReport(p+"\u5173\u5361\u6210\u529f")),v.pzaLocalData.hasUseProp=!1;var c=function(){var e=0;o.skipPartStar()||(e=z.pzaGameConfig.getPartStar(r.pzaGameState.curChapter,r.pzaGameState.curPart)),e<=0?(D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),y.pzaGameManager.removeBattleUI(),h.pzaChannel.instance().showInter(!0),S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.GameWinNoStarView,null)):S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.GAME_WIN_VIEW,null)};null!=r.pzaGameState.achieveArr&&r.pzaGameState.achieveArr.length>0?S.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.GET_ACHIEVE_VIEW,function(e){var a=e&&e.getComponent(s.pzaGetAchieveView);a&&a.init(r.pzaGameState.achieveArr,c)}):c()},e.prototype.partFail=function(e){void 0===e&&(e=!0),P.pzaSoundManager.playAudio("losemusic"),P.pzaSoundManager.stopBgm(),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_PAUSE,null),r.pzaGameState.gamePause=!0,window.pzaMapManager.closeBattleUI(),e&&window.pzaMapManager.openDoor(),y.pzaGameManager.removeBattleUI(),v.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,v.pzaLocalData.addDirty("autoPickLeft")},e.prototype.nextPart=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=null)},e.prototype.checkAchieve=function(){},e.prototype.resetTryPlant=function(){r.pzaGameState.gameMode!=r.pzaGameMode.SUR_ENDLESS&&r.pzaGameState.gameMode!=r.pzaGameMode.SURVIVAL&&r.pzaGameState.gameMode!=r.pzaGameMode.ZOMBIE_ENDLESS&&(v.pzaLocalData.data.tryPlantCountArrayNormal=[0,0,0,0,0,0,0,0,0,0,0,0],v.pzaLocalData.data.watchADTryPlantCountNormal=0,v.pzaLocalData.addDirty("tryPlantCountArrayNormal","watchADTryPlantCountNormal"))},e}();t.pzaGameBase=N,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameBelt:[function(e,a,t){"use strict";cc._RF.push(a,"40c26ZTwkxDsaPtR7venpN4","pzaGameBelt");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameBelt=void 0;var r=e("../Battle/pzaGameState"),p=e("./pzaBeltConfig"),l=e("./pzaGameNormal"),s=e("./pzaSoundManager"),c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=r.pzaGameMode.BELT,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u4f20\u9001\u5e26\u6a21\u5f0f-"},a.prototype.isAutoCreateSun=function(){return!1},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=!1,r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)&&(a.freePlantNode.active=!1)},a.prototype.playBgm=function(){var a=r.pzaGameState.curChapter,t=r.pzaGameState.curPart;if((4==a||9==a)&&10==t)return s.pzaSoundManager.playBgm(s.pzaBGMName.BELT_BGM),void s.pzaSoundManager.playLoopAudio("rain",!0);10!=t||1!=a&&2!=a&&3!=a?e.prototype.playBgm.call(this):s.pzaSoundManager.playBgm(s.pzaBGMName.BELT_BGM)},a.prototype.getPlantArr=function(e,a){return p.pzaBeltConfig.getBeltPlants(e,a)},a.prototype.showBattlePropButtons=function(a){var t,o;if(5==r.pzaGameState.curPart||10==r.pzaGameState.curPart){a.freeSunNode.active=!1,a.cherryBombNode.active=!1;try{for(var n=i([[1,5],[1,10],[2,10],[3,10],[4,10],[5,5],[5,10],[6,5],[6,10],[7,10],[8,10],[9,10],[10,5],[10,10]]),p=n.next();!p.done;p=n.next()){var l=p.value;l[0]==r.pzaGameState.curChapter&&l[1]==r.pzaGameState.curPart&&(a.cherryBombNode.active=!0)}}catch(s){t={error:s}}finally{try{p&&!p.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}a.autoPickNode.active=!0,a.clearCDNode.active=!1}else r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)?(a.freeSunNode.active=!1,a.cherryBombNode.active=!1,a.autoPickNode.active=!1,a.clearCDNode.active=!1):e.prototype.showBattlePropButtons.call(this,a)},a}(l.pzaGameNormal);t.pzaGameBelt=c,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaBeltConfig":"pzaBeltConfig","./pzaGameNormal":"pzaGameNormal","./pzaSoundManager":"pzaSoundManager"}],pzaGameBoss:[function(e,a,t){"use strict";cc._RF.push(a,"a3942RVNM9J56CNGXZCTBw9","pzaGameBoss");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameBoss=void 0;var r=e("../Battle/pzaGameState"),p=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=r.pzaGameMode.ZOM_BOSS,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u50f5\u738b\u6a21\u5f0f-"},a.prototype.isAutoCreateSun=function(){return!1},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=!1},a.prototype.refreshNextWave=function(){},a.prototype.isLastWave=function(){return!1},a.prototype.checkAllZombieDeath=function(){return!1},a.prototype.showBattlePropButtons=function(a){var t,o;if(5==r.pzaGameState.curPart||10==r.pzaGameState.curPart){a.freeSunNode.active=!1,a.cherryBombNode.active=!1;try{for(var n=i([[1,5],[1,10],[2,10],[3,10],[4,10],[5,5],[5,10],[6,5],[6,10],[7,10],[8,10],[9,10],[10,5],[10,10]]),p=n.next();!p.done;p=n.next()){var l=p.value;l[0]==r.pzaGameState.curChapter&&l[1]==r.pzaGameState.curPart&&(a.cherryBombNode.active=!0)}}catch(s){t={error:s}}finally{try{p&&!p.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}console.log("view.cherryBombNode.active===>",a.cherryBombNode.active),a.autoPickNode.active=!0,a.clearCDNode.active=!1}else e.prototype.showBattlePropButtons.call(this,a)},a}(e("./pzaGameNormal").pzaGameNormal);t.pzaGameBoss=p,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaGameNormal":"pzaGameNormal"}],pzaGameCommonPool:[function(e,a,t){"use strict";cc._RF.push(a,"9a66aQkbvNLt4aUJDAQRYyG","pzaGameCommonPool"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameCommonPool=void 0;var o=function(){function e(){}return e.addUrlToPrefab=function(e,a){e&&a&&this.urlToPrefab.set(e,a)},e.getPrefabList=function(e){var a=this.currentPool.get(e);return a||(a=[],this.currentPool.set(e,a)),a},e.requestInstant2=function(e){var a=this.getPrefabList(e._uuid).pop();return a&&a.isValid?a.active=!0:a=cc.instantiate(e),a},e.requestInstant=function(e,a){return void 0===a&&(a=!1),cc.instantiate(e)},e.returnInstant2=function(a,t){a&&a.isValid&&(a.active=!1,a.removeFromParent(),t?this.addToCurrentPool(a,t):e.returnInstant(a))},e.returnInstant=function(e){e&&e.isValid&&e.destroy()},e.addToCurrentPool=function(e,a){if(e&&a){var t=this.currentPool.get(a);t?-1===t.indexOf(e)&&t.push(e):this.currentPool.set(a,[e])}},e.clear=function(){e.currentPool.clear(),console.log("\u6e05\u6c60 ",e.currentPool)},e.currentPool=new Map,e.urlToPrefab=new Map,e.urlToSpriteFame=new Map,e.urlToSkeletonData=new Map,e.urlToJson=new Map,e}();t.pzaGameCommonPool=o,cc._RF.pop()},{}],pzaGameConfig:[function(e,a,t){"use strict";cc._RF.push(a,"324edpOc/VIO7o/KS+DqQdc","pzaGameConfig");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameConfig=t.pzaMapConifg=t.pzaZjZombieBookConfig=t.pzaPlantSkinUnLockConf=t.pzaZombieBookConfig=t.pzaZombieConfigData=t.pzaZjPlantBookConfig=t.pzaPlantBookConfig=t.pzaPlantConfigData=void 0;var n=e("../Battle/Data/pzaDropType"),i=e("../Battle/Data/pzaJarData"),r=e("../Battle/Data/pzaPlantEnum"),p=e("../Battle/Data/pzaZombieEnum"),l=e("../Battle/pzaGameState"),s=e("./pzaLocalData"),c=e("./pzaUtil"),u=function(){function e(e,a,t,n,i,p,l,s,c,u,d,h,m,f,z,y,g,v){var b,P,C,E;if(void 0===u&&(u=!1),void 0===d&&(d=0),void 0===h&&(h=0),void 0===m&&(m=0),void 0===f&&(f=1),void 0===z&&(z=""),this.plantType=null,this.name=null,this.env=r.pzaPlantEnvEnum.NORMAL,this.hp=0,this.atk=0,this.atkInterval=0,this.price=0,this.createCD=0,this.initCD=0,this.rareLevel=0,this.isNight=!1,this.avoidshoot=0,this.float=0,this.isShowValue=!1,this.profession=1,this.relationTypeArr=null,this.tagArray=null,this.isPlayShowAudio=!1,this.isRider=!0,this.plantType=e,this.name=a,this.env=t,this.hp=n,this.atk=i,this.atkInterval=p,this.price=l,this.createCD=s,this.initCD=c,this.isNight=u,this.avoidshoot=d,this.float=h,this.isShowValue=1==m,this.isPlayShowAudio=1==g,this.isRider=1==v,f&&(this.profession=f),this.tagArray=[],z){var S=z.split("-");try{for(var _=o(S),D=_.next();!D.done;D=_.next()){var M=D.value;this.tagArray.push(M)}}catch(I){b={error:I}}finally{try{D&&!D.done&&(P=_.return)&&P.call(_)}finally{if(b)throw b.error}}}if(y){var w=y.split(","),T=[];try{for(var A=o(w),B=A.next();!B.done;B=A.next()){var G=B.value;T.push(parseInt(G))}}catch(O){C={error:O}}finally{try{B&&!B.done&&(E=A.return)&&E.call(A)}finally{if(C)throw C.error}}this.relationTypeArr=T}}return e.prototype.getPrice=function(){var e=this.price;return(e-=l.pzaGameState.pirceReduce)<0&&(e=0),e},e.prototype.filterPlantByPro=function(e){return 0==e||this.profession==e},e.isEnvPlant=function(a){return e.isLilyPad(a)||e.isPotPlant(a)},e.isPotEnv5Plant=function(e){return e==r.pzaPlantEnum.FLOWER_POT},e.isPotPlant=function(e){return e==r.pzaPlantEnum.FLOWER_POT},e.isPotRecoverPlant=function(e){return e==r.pzaPlantEnum.FLOWER_POT},e.isPumPkin=function(e){return e==r.pzaPlantEnum.PUMPKIN},e.isBowling=function(e){return e==r.pzaPlantEnum.WALL_NUT_BOWLING||e==r.pzaPlantEnum.BOOM_NUT_BOWLING||e==r.pzaPlantEnum.TALL_NUT_BOWLING},e.isBuster=function(e){return e==r.pzaPlantEnum.GRAVE_BUSTER},e.isLilyPad=function(e,a){return void 0===a&&(a=!1),e==r.pzaPlantEnum.LILY_PAD},e.isTangleKelp=function(e){return e==r.pzaPlantEnum.TANGLE_KELP},e.isCannonPlant=function(e){return e==r.pzaPlantEnum.COB_CANNON},e.isCoffeePlant=function(e){return e==r.pzaPlantEnum.COFFEE_BEAN},e.isTallPlant=function(e){return[r.pzaPlantEnum.TALL_NUT].indexOf(e)>=0},e.isNoTrackPlant=function(e){return[r.pzaPlantEnum.DOOM_SHROOM].indexOf(e)>=0},e.notShowPortal=function(e){var a=z.getPlantConfig(e);return!!a&&0==a.isRider},e.isSpikePlant=function(e){return[r.pzaPlantEnum.SPIKEWEED,r.pzaPlantEnum.SPIKEROCK].indexOf(e)>=0},e}();t.pzaPlantConfigData=u;var d=function(e,a,t,o,n,i,r){this.plantType=null,this.desc=null,this.prop=null,this.special=null,this.bg1=null,this.bg2=null,this.cd=null,this.plantType=e,this.desc=a,this.prop=t,this.special=o,this.bg1=n,this.bg2=i,this.cd=r};t.pzaPlantBookConfig=d;t.pzaZjPlantBookConfig=function(e,a,t,o,n,i,r,p,l,s,c){this.plantType=null,this.prop=null,this.tenacty=null,this.power=null,this.area=null,this.special=null,this.deathWord=null,this.desc=null,this.cost=null,this.speed=null,this.name=null,this.plantType=e,this.prop=a,this.tenacty=t,this.power=o,this.area=n,this.special=i,this.deathWord=r,this.desc=p,this.cost=l,this.speed=s,this.name=c};var h=function(){function e(e,a,t,o,n,i,r,p,l,s,c,u,d,h,m,f,z){var y=this;if(void 0===z&&(z=0),this.zombieType=null,this.name=null,this.hp=0,this.equipHp=0,this.equipType=0,this.toolType=0,this.atk=0,this.atkInterval=0,this.minSpeed=0,this.maxSpeed=0,this.specialMinSpeed=0,this.specialMaxSpeed=0,this.refreshLevel=1,this.refrshWeight=0,this.refrshMinWave=1,this.unlockChapter=1,this.unlockPart=1,this.price=0,this.ableRoad=0,this.ableRoad_old=0,this.typeId=[],this.showWeight=[],this.isShowValue=!1,this.zombieType=e,this.name=a,this.hp=t,this.equipHp=o,this.atk=r,this.atkInterval=p,this.equipType=n,this.toolType=i,this.refreshLevel=s,this.refrshWeight=c,this.refrshMinWave=u,this.minSpeed=this.maxSpeed=l,this.specialMinSpeed=this.specialMaxSpeed=l,this.ableRoad=d,this.ableRoad_old=h,this.isShowValue=1==z,null!=this.ableRoad_old&&null!=this.ableRoad_old||(this.ableRoad_old=this.ableRoad),m&&"0"!=m){var g=m.split(",");g.length>0&&g.forEach(function(e){y.typeId.push(parseFloat(e))}),null!=f&&f.split(",").forEach(function(e){y.showWeight.push(parseFloat(e))})}}return Object.defineProperty(e.prototype,"speed",{get:function(){return c.pzaUtil.getRandomFloatNum(this.minSpeed,this.maxSpeed)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"specialSpeed",{get:function(){return c.pzaUtil.getRandomFloatNum(this.specialMinSpeed,this.specialMaxSpeed)},enumerable:!1,configurable:!0}),e}();t.pzaZombieConfigData=h;var m=function(e,a,t,o,n,i){void 0===i&&(i=null),this.zombieType=null,this.desc=null,this.prop=null,this.special=!1,this.bg=null,this.bg2=null,this.zombieType=e,this.desc=a,this.prop=t,this.special=o,this.bg=n,this.bg2=i};t.pzaZombieBookConfig=m;t.pzaPlantSkinUnLockConf=function(e,a){this.plantType=null,this.state=0,this.plantType=e,this.state=a};t.pzaZjZombieBookConfig=function(e,a,t,o,n,i,r,p,l){void 0===l&&(l=null),this.zombieType=null,this.name=null,this.desc=null,this.tenacty=null,this.wear=null,this.dmage=null,this.speed=null,this.special=null,this.bg=null,this.zombieType=e,this.name=a,this.desc=t,this.tenacty=o,this.wear=n,this.dmage=i,this.speed=r,this.special=p,this.bg=l};var f=function(){function e(e,a,t,o,n,i,r,p,l,s,c){this.xInterval=[97,97,94,97,97,94,97,97,117],this.xPos=[0,97,194,288,385,482,576,673,770],this.yInterval=[125,102,124,115,148],this.yPos=[0,125,227,351,466],this.mapOriPos=cc.v2(-380,-326),this.blockWidth=97,this.mapHeight=614,this.mapWidth=887,this.mapRow=5,this.skewAngel=12,this.skewColumn=5,this.mapHeight=e,this.mapWidth=a,this.blockWidth=t,this.mapOriPos=o,this.xPos=n,this.xInterval=i,this.yPos=r,this.yInterval=p,this.mapRow=l,this.skewAngel=s,this.skewColumn=c}return e.prototype.getMapSkewRadion=function(){return this.skewAngel/180*Math.PI},e.prototype.getMapSkewColumn=function(){return this.skewColumn},e.prototype.getXInterval=function(e){return this.xInterval[e]},e.prototype.getXPos=function(e){return this.xPos[e]},e.prototype.getYInterval=function(e){return this.yInterval[e]},e.prototype.getYPos=function(e){return this.yPos[e]},e.prototype.getBlockAllPos=function(e,a,t){var o=this.skewAngel/180*Math.PI;if(0==t){var n=Math.min(this.skewColumn,e),i=Math.tan(o)*this.xPos[n];return cc.v2(this.xPos[e],this.yPos[a]+i)}return 1==t?(n=Math.min(this.skewColumn,e+1),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[e+1],this.yPos[a]+i)):2==t?(n=Math.min(this.skewColumn,e+1),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[e+1],this.yPos[a+1]+i)):3==t?(n=Math.min(this.skewColumn,e),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[e],this.yPos[a+1]+i)):void 0},e.prototype.getMapOriPos=function(){return this.mapOriPos},e.prototype.getMapWidth=function(){return this.mapWidth},e.prototype.getBlockWidth=function(){return this.blockWidth},e.prototype.getMapColumn=function(){return 9},e.prototype.getMapRow=function(){return this.mapRow},e.prototype.getMapXIndex=function(e,a,t){if(void 0===a&&(a=null),void 0===t&&(t=0),null==e&&null==a)return-1;var o=-1;if((o=null!=a?a.x:e.x-this.getMapOriPos().x)<0)return-1;o+=t;for(var n=0,i=this.getMapColumn(),r=0;r<i;r++)if((n+=this.getXInterval(r))>o)return r;return-1},e.prototype.getMapYIndex=function(e,a){if(void 0===a&&(a=null),null==e&&null==a)return-1;var t=-1,o=-1;if(null!=a)t=a.x,o=a.y;else{var n=this.getMapOriPos();t=e.x-n.x,o=e.y-n.y}var i=this.getMapSkewRadion(),r=this.getMapSkewColumn();if(t=Math.min(t,this.getXPos(r)),(o-=Math.tan(i)*t)<0)return-1;for(var p=this.getMapRow(),l=0,s=0;s<p;s++)if((l+=this.getYInterval(s))>o)return s;return-1},e.prototype.getBlockLogicPos=function(e,a,t,o){void 0===t&&(t=0);var n=this.xPos[e]+t,i=this.yPos[a]+o,r=this.getMapSkewRadion(),p=this.skewColumn,l=Math.min(n,this.xPos[p]),s=Math.tan(r)*l;return cc.v2(n+this.mapOriPos.x,i+s+this.mapOriPos.y)},e.prototype.fixMapYOffset=function(e,a,t){if(null!=a){var o=this.yPos[e]+t;if(this.skewAngel<=0||this.skewColumn<=0)a.y=o+this.mapOriPos.y;else{var n=this.skewColumn,i=this.xPos[n],r=a.x-this.mapOriPos.x;r>=i&&(r=i);var p=this.getMapSkewRadion(),l=r*Math.tan(p);a.y=o+l+this.mapOriPos.y}}},e.prototype.returnYOffset=function(e,a,t){var o=this.yPos[e]+t,n=this.skewColumn,i=this.xPos[n],r=a.x-this.mapOriPos.x;r>=i&&(r=i);var p=this.getMapSkewRadion(),l=r*Math.tan(p);return a.y=o+l+this.mapOriPos.y,a.y},e}();t.pzaMapConifg=f;var z=function(){function e(){}return e.initPlantConfig=function(e){var a=this;null!=e&&e.forEach(function(e){if(null!=e){var t=1==e.hy,o=new u(parseInt(e.id),e.name,parseInt(e.lx),parseInt(e.hp),parseInt(e.atk),0,parseInt(e.gold),0,parseInt(e.openingcd),t,e.avoidshoot,null,e.showValue,e.profession,e.tag,e.typeId,e.showAudio,e.isRider);null!=e.cd&&(o.atkInterval=parseFloat(e.cd)),null!=e.plantcd&&(o.createCD=parseFloat(e.plantcd)),null!=e.senior&&(o.rareLevel=parseInt(e.senior)),a.PlantConfigMap.set(e.id,o)}})},e.initZombieConfig=function(e){var a=this;null!=e&&e.forEach(function(e){if(null!=e){var t,o=new h(parseInt(e.id),e.name,parseInt(e.hp),parseInt(e.armorhp),parseInt(e.armor),parseInt(e.tool),parseInt(e.atk),parseFloat(e.cd),0,parseInt(e.level),parseInt(e.weight),parseInt(e.mini),parseInt(e.ableroad),parseInt(e.ableroad_old),e.typeId,e.showWeight,e.showValue);if(null!=e.speed)if((t=e.speed.split(",")).length>1){var n=parseFloat(t[0]),i=parseFloat(t[1]);o.minSpeed=Math.min(n,i),o.maxSpeed=Math.max(n,i)}else o.minSpeed=o.maxSpeed=parseFloat(t[0]);if(null!=e.bspeed&&((t=e.bspeed.split(",")).length>1?(n=parseFloat(t[0]),i=parseFloat(t[1]),o.specialMinSpeed=Math.min(n,i),o.specialMaxSpeed=Math.max(n,i)):o.specialMinSpeed=o.specialMaxSpeed=parseFloat(t[0])),null!=e.unlock){var r=e.unlock.split("-");o.unlockChapter=parseFloat(r[0])||1,o.unlockPart=parseFloat(r[1])||1}null!=e.gold&&(o.price=parseInt(e.gold)),a.ZombieConfigMap.set(e.id,o)}})},e.getPartDrop=function(e,a){if(1==e&&1==a)return n.pzaDropType.HAND_BOOK;if(1==e&&9==a)return n.pzaDropType.BELT_EQUIP;if(4==a){if(1==e)return n.pzaDropType.SHOVEL;if(2==e)return n.pzaDropType.SPRINKLER;if(3==e)return n.pzaDropType.BACONIC;if(4==e)return n.pzaDropType.TACO;if(5==e)return n.pzaDropType.COIN_PACKAGE}if(5==e&&10==a)return n.pzaDropType.SLIVER_TROHPY;if(10==e&&10==a)return n.pzaDropType.GOLD_TROHPY;if(9==a)return n.pzaDropType.CG_PAPER;var t=e+"-"+a;return this.newPlantDropMap.has(t)?n.pzaDropType.PLANT_CARD:e>5?n.pzaDropType.COIN_PACKAGE:null},e.getPartStar=function(e,a){return l.pzaGameState.isTryMode(e,a)?0:this.AllPartStar[e-1][a-1]},e.getAllPartStar=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=!1);var t=0,o=0,n=this.AllPartStar.length;e&&(t=5),a&&(t=0,n=5);for(var i=t;i<n;i++)for(var r=this.AllPartStar[i],p=0;p<r.length;p++)o+=r[p];return o},e.isWaterZombie=function(a){return 2==e.getZombieConfig(a).ableRoad_old},e.isAllWayZombie=function(a){return 1==e.getZombieConfig(a).ableRoad_old},e.isFlyZombie=function(e){return e==p.pzaZombieEnum.BALLOON_ZOMBIE},e.isAdvancePlant=function(e){return this.getPlantConfig(e).rareLevel>=2},e.isShowBuleValueEffect=function(e){return e==r.pzaPlantEnum.UMBRELLA_LEAF},e.getPlantConfig=function(e){return this.PlantConfigMap.get(e)},e.getZombieConfig=function(e){return this.ZombieConfigMap.get(e)},e.getZombieSpecialSpeed=function(e){var a=this.ZombieConfigMap.get(e);return null==a?0:a.specialSpeed},e.getZombieSpeed=function(e){var a=this.ZombieConfigMap.get(e);return null==a?0:a.speed},e.getRandomSunPos=function(){var e=c.pzaUtil.getRandomFloatNum(this.autoSunMinX,this.autoSunMaxX);return cc.v2(e,this.autoSunY)},e.getRandomSunDis=function(){return c.pzaUtil.getRandomFloatNum(this.autoSunMaxDis/2,this.autoSunMaxDis)},e.getZombieLevel=function(e){var a=this.ZombieConfigMap.get(e);return null==a?1:a.refreshLevel},e.isNoChangeColorBeHypnosis=function(e){return[p.pzaZombieEnum.Cream_Normal,p.pzaZombieEnum.Cream_Pea].indexOf(e)>=0},e.isNeedFlowerInMap=function(e){var a,t;if(!e||!u.isSpikePlant(e)){try{for(var n=o([5,6]),i=n.next();!i.done;i=n.next()){var r=i.value;if(l.pzaGameState.mapId==r)return!0}}catch(p){a={error:p}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return!1}},e.get45JarData=function(e){var a=[],t=6,o=0,n=null,r=null;if(1==e){t=6,n=[1,1,1,1,5],r=[];for(var p=0;p<5;p++)r.push(1);for(p=0;p<5;p++)r.push(18);o=0}else if(2==e){for(t=5,n=[1,1,1,1,1,5,8],r=[],p=0;p<4;p++)r.push(1);for(p=0;p<4;p++)r.push(18);for(p=0;p<5;p++)r.push(6);o=2}else if(3==e){for(t=4,n=[1,1,1,1,1,1,5,5,9,18],r=[],p=0;p<5;p++)r.push(1);for(p=0;p<5;p++)r.push(6);for(p=0;p<5;p++)9==l.pzaGameState.curChapter&&5==l.pzaGameState.curPart?r.push(13):r.push(18);o=3}r.sort(function(){return Math.random()-.5});for(var s=t;s<9;s++)for(var u=0;u<5;u++){var d=new i.pzaJarData(s,u);a.push(d)}var h=c.pzaUtil.getRandomArrayValue(a,n.length);for(p=0;p<n.length;p++){var m=h[p];null!=m&&(m.zombieType=n[p])}var f=[];if(a.forEach(function(e){h.indexOf(e)>=0||(e.plantType=r.shift(),f.push(e))}),o>0){var z=c.pzaUtil.getRandomArrayValue(f,o);for(p=0;p<o;p++){var y=z[p];null!=y&&(y.jarType=i.pzaJarType.GREEN_JAR)}}return a},e.canChoosePlants=function(e){var a=this.NO_RECOMMEND_PLANT.get(e),t=s.pzaLocalData.data.ownPlants;if(a){for(var o=Array.from(a),n=r.pzaPlantEnum.GATLING_PEA;n<=r.pzaPlantEnum.IMITATER;n++)o.push(n);o.push(51),o.push(36),o.push(53),o.push(54),t=t.filter(function(e){return!o.includes(e)})}return Array.from(new Set(t))},e.isNoRecommendPlant=function(e,a){var t=this.NO_RECOMMEND_PLANT.get(a);return null!=t&&t.has(e)},e.isNoRecommendPlantInMini=function(e,a){var t=this.MINI_NO_RECOMMEND_PLANT.get(a);return null!=t&&t.has(e)},e.isNoRecommendPlantCreateNormal=function(e){return new Set([20,25,26,28,34,36,44,17]).has(e)},e.setBlockTypeMap=function(a){for(var t=window.pzaMapManager.BlockTypeMap,o=e.mapTerrain.get(a),n=0;n<o.length;n++)for(var i=0;i<o[n].length;i++){var r=""+i+Math.abs(n-(o.length-1));t.set(r,o[n][i])}},e.getPartFixedPlant=function(){if(!1===l.pzaGameState.isMainMode())return null;var e=function(){return 10*s.pzaLocalData.data.curChapter+s.pzaLocalData.data.curPart>10*l.pzaGameState.curChapter+l.pzaGameState.curPart};return!1===e()&&1==l.pzaGameState.curChapter&&6==l.pzaGameState.curPart?[r.pzaPlantEnum.POTATO_MINE]:!1===e()&&2==l.pzaGameState.curChapter&&1==l.pzaGameState.curPart?[r.pzaPlantEnum.PUFF_SHROOM]:null},e.chapterMapConfig=new Map([[0,new f(610,1060,120,cc.v2(-450,-315),[0,112,232,348,460,574,688,806,926,1060],[112,120,116,114,114,118,120,120,120],[0,112,228,344,468,592],[112,116,108,124,124],5,0,0)],[1,new f(610,1060,120,cc.v2(-450,-315),[0,112,232,348,460,574,688,806,926,1060],[112,120,116,114,114,118,120,120,120],[0,112,228,344,468,592],[112,116,108,124,124],5,0,0)],[2,new f(610,1060,120,cc.v2(-450,-315),[0,112,232,348,460,574,688,806,926,1060],[112,120,116,114,114,118,120,120,120],[0,112,228,344,468,592],[112,116,108,124,124],5,0,0)],[3,new f(610,1040,120,cc.v2(-450,-340),[0,118,236,354,467,580,698,816,934,1052],[118,118,118,113,113,113,118,118,118],[0,80,190,305,415,500,600],[100,100,100,105,100,100],6,0,0)],[4,new f(610,1040,120,cc.v2(-450,-340),[0,118,236,354,467,580,698,816,934,1052],[118,118,118,113,113,113,118,118,118],[0,100,205,320,415,520,625],[100,100,105,110,110,100],6,0,0)],[5,new f(619,1060,120,cc.v2(-425,-390),[0,115,230,345,460,575,690,800,910,1020],[115,115,115,115,115,115,110,110,110],[0,105,210,315,420,525],[105,105,105,105,105],5,13,5)],[6,new f(619,1060,120,cc.v2(-425,-390),[0,115,230,345,460,575,690,800,910,1020],[115,115,115,115,115,115,110,110,110],[0,105,210,315,420,525],[105,105,105,105,105],5,13,5)]]),e.sunLiveTime=15,e.autoSunY=280,e.autoSunMaxDis=600,e.autoSunMinX=-450,e.autoSunMaxX=390,e.autoSunSpeed=80,e.bigSunValue=25,e.smallSunValue=15,e.DIAMOND_CHANCE=.005,e.GOLD_CHANCE=.02,e.SILVER_CHANCE=.08,e.PLANT_CHANCE=.004,e.CHOCOLATE_CHANCE=.01,e.miniZombieScale=.55,e.miniZombieHp=.2,e.miniZombieWaveInterval=8,e.PlantConfigMap=new Map,e.ZombieConfigMap=new Map,e.ZombieDescMap=new Map([[p.pzaZombieEnum.ZOMBIE,"\u6700\u666e\u901a\u6700\u5e38\u89c1\u7684\u4fee\u5361\u6218\u6597\u5458\uff0c\u751f\u547d\u529b\u4f4e\uff0c\u79fb\u52a8\u901f\u5ea6\u6162"],[p.pzaZombieEnum.FLAG_ZOMBIE,"\u9664\u4e86\u62ff\u7740\u65d7\u5b50\uff0c\u901f\u5ea6\u6bd4\u666e\u901a\u4fee\u5361\u6218\u6597\u5458\u7565\u5feb\uff0c\u65d7\u5b50\u6389\u65f6\u6218\u6597\u5458\u6b7b\u4ea1"],[p.pzaZombieEnum.CONE_HEAD_ZOMBIE,"\u4fee\u5361\u6218\u6597\u5458\u88c5\u5907\u4e86\u9632\u5177\uff0c\u5177\u5907\u66f4\u9ad8\u9632\u5fa1\uff0c\u53ec\u5524\u591a\u4e2a<color=#5feeff>\u5047\u9762\u9a91\u58eb555</c>\u6216<color=#5feeff>\u65a9\u6708\xb7\u871c\u74dc\u6b66\u88c5</c>\u5427\uff01"],[p.pzaZombieEnum.POLEVAULTING_ZOMBIE,"\u5b83\u80fd\u8df3\u8fc7\u4e00\u4e2a\u9a91\u58eb\uff0c\u53ec\u5524\u591a\u4e2a<color=#5feeff>\u5047\u9762\u9a91\u58eb555</c>\uff0c\u5feb\u901f\u89e3\u51b3\u5b83\uff01"],[p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,"\u5b83\u7684\u62a4\u7532\u9632\u5fa1\u6781\u9ad8\uff0c\u63d0\u524d\u5728\u8def\u4e0a\u53ec\u5524<color=#5feeff>\u52a0\u5e03\xb7\u8f6f\u68c9\u82b1\u7cd6\u5f62\u6001</c>\u51fb\u98de\u5b83\uff01"],[p.pzaZombieEnum.NEWSPAPER_ZOMBIE,"\u5b83\u8eab\u4e0a\u7684\u62a4\u7532\u80fd\u62b5\u6321\u4e00\u5b9a\u4f24\u5bb3\uff0c\u76d4\u7532\u6389\u843d\u540e\u901f\u5ea6\u53d8\u5feb\uff0c\u53ec\u5524\u591a\u4e2a<color=#5feeff>\u6e38\u6d41\u4ed9</c>\u89e3\u51b3\u5b83\uff01"],[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"\u5b83\u7684\u76fe\u724c\u5177\u5907\u9ad8\u9632\u5fa1\uff0c<color=#5feeff>\u5047\u9762\u9a91\u58eb\u6218\u9a91</c>\u7684\u653b\u51fb\u80fd\u7a7f\u900f\u76fe\u724c"],[p.pzaZombieEnum.FOOTBALL_ZOMBIE,"\u8fd9\u5bb6\u4f19\u8d85\u5389\u5bb3\uff0c\u53ec\u5524<color=#5feeff>\u514b\u6d1b\u8bfa\u65af</c>\u63a7\u5236\u5b83!"],[p.pzaZombieEnum.DANCING_ZOMBIE,"\u4f1a\u53ec\u5524\u4f34\u968f\u7684\u6f0f\u6d1e\u4f53\u75c5\u6bd2\uff0c\u53ec\u5524<color=#5feeff>\u683c\u91cc\u65af\xb7\u66b4\u96ea\u5f62\u6001</c>\u51bb\u4f4f\u5b83\u4eec\u5427!"],[p.pzaZombieEnum.SNORKEL_ZOMBIE,"\u85cf\u5728\u6c34\u91cc\u65f6\u9a91\u58eb\u6253\u4e0d\u5230\uff0c\u53ec\u5524<color=#5feeff>\u6b27\u5179\xb7\u9cb8\u9cd7\u7ae0\u8054\u7ec4</c>\u89e3\u51b3\u5b83"],[p.pzaZombieEnum.ZOMBONI,"\u80fd\u79d2\u6740\u9047\u5230\u7684\u9a91\u58eb\uff0c\u53ec\u5524<color=#5feeff>\u514b\u7f57\u5179\xb7\u7194\u5ca9\u5f62\u6001</c>\u6216<color=#5feeff>\u5c16\u9489\u9677\u9631</c>\u89e3\u51b3\u5b83\uff01"],[p.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,"\u80fd\u8df3\u8fc7\u4e00\u4e2a\u9a91\u58eb\uff0c\u53ef\u4ee5\u53ec\u5524<color=#5feeff>\u94e0\u6b66\xb7\u80dc\u543c\u6b66\u88c5</c>\u963b\u6b62\u5b83!"],[p.pzaZombieEnum.JACK_ZOMBIE,"\u5c0f\u5fc3\uff0c\u8fd9\u4e2a\u602a\u4eba\u4f1a\u81ea\u7206\uff01"],[p.pzaZombieEnum.BALLOON_ZOMBIE,"\u98de\u5728\u5929\u4e0a\uff0c\u53ec\u5524<color=#5feeff>\u7535\u738b\xb7\u5723\u67aa\u5f62\u6001</c>\u6216<color=#5feeff>\u53cc\u9a91\xb7\u75be\u98ce\u738b\u724c\u9ec4\u91d1\u6781\u81f4</c>\u89e3\u51b3\u5b83\uff01"],[p.pzaZombieEnum.DIGGER_ZOMBIE,"\u80fd\u94bb\u5230\u6218\u573a\u540e\u65b9\uff0c\u53ec\u5524<color=#5feeff>\u827e\u514b\u8d5b\u5fb7\xb7\u53cc\u4eba\u52a8\u4f5c\u73a9\u5bb6</c>\u6216<color=#5feeff>\u5723\u5203\xb7\u5de8\u9f99\u4e9a\u745f</c>\u89e3\u51b3\u5b83\uff01"],[p.pzaZombieEnum.POGO_ZOMBIE,"\u80fd\u8df3\u8fc7\u6240\u6709\u9a91\u58eb\uff0c\u53ec\u5524<color=#5feeff>\u94e0\u6b66\xb7\u80dc\u543c\u6b66\u88c5</c>\u6216<color=#5feeff>\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</c>\u53ef\u4ee5\u963b\u6b62\u5b83\u8df3\u8dc3!"],[p.pzaZombieEnum.LADDER_ZOMBIE,"\u80fd\u76f4\u63a5\u7a7f\u8fc7\u9632\u5fa1\u9a91\u58eb\uff0c\u7528\u6295\u63b7\u7c7b\u9a91\u58eb\u80fd\u76f4\u63a5\u6253\u5230\u5b83"],[p.pzaZombieEnum.CATAPULT_ZOMBIE,"\u6295\u51fa\u7684\u5b50\u5f39\u80fd\u76f4\u63a5\u4f24\u5bb3\u540e\u6392\u9a91\u58eb\uff0c\u53ec\u5524<color=#5feeff>\u62a4\u76fe\u53d1\u751f\u88c5\u7f6e</c>\u4fdd\u62a4\u540e\u6392\u7684\u9a91\u58eb\uff01"],[p.pzaZombieEnum.GARGANTUAR,"\u8fd9\u5bb6\u4f19\u5341\u5206\u5f3a\u5927\uff0c\u5c0f\u5fc3\u5b83\u4f1a\u53ec\u5524\u4f4e\u7ea7\u602a\u4eba\uff01"]]),e.PlantDescMap=new Map([[r.pzaPlantEnum.SUN_FLOWER,"\u4e3a\u4f60\u63d0\u4f9b\u66f4\u591a\u80fd\u91cf"],[r.pzaPlantEnum.CHERRY_BOMB,"\u70b8\u5149\u4e00\u5b9a\u533a\u57df\u5185\u7684\u5168\u90e8\u602a\u4eba"],[r.pzaPlantEnum.WALL_NUT,"\u6321\u4f4f\u602a\u4eba\uff0c\u4fdd\u62a4\u5b83\u80cc\u540e\u7684\u690d\u7269"],[r.pzaPlantEnum.POTATO_MINE,"\u70b8\u98de\u78b0\u5230\u5b83\u7684\u654c\u4eba\uff0c\u4f46\u5b89\u653e\u540e\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u542f\u52a8"],[r.pzaPlantEnum.SNOW_PEA,"\u5c04\u51fa\u5bd2\u51b0\u5b50\u5f39\uff0c\u4f24\u5bb3\u654c\u4eba\u7684\u540c\u65f6\u51cf\u6162\u654c\u4eba\u901f\u5ea6"],[r.pzaPlantEnum.CHOMPER,"\u4e00\u53e3\u541e\u4e0b\u4e00\u4e2a\u602a\u4eba\uff0c\u4f46\u5728\u5480\u56bc\u602a\u4eba\u7684\u65f6\u5019\u975e\u5e38\u8106\u5f31"],[r.pzaPlantEnum.REPEATER,"\u4e00\u6b21\u53d1\u5c04\u4e24\u4e2a\u53cc\u622a\u68cd"],[r.pzaPlantEnum.PUFF_SHROOM,"\u5728\u77ed\u8ddd\u79bb\u5185\u5411\u654c\u4eba\u53d1\u5c04\u5b50\u5f39"],[r.pzaPlantEnum.SUN_SHROOM,"\u5f00\u59cb\u65f6\u63d0\u4f9b\u5c11\u91cf\u80fd\u91cf\uff0c\u4e00\u6bb5\u65f6\u95f4\u540e\u4ea7\u91cf\u5c06\u548c\u80fd\u91cf\u82b1\u76f8\u540c"],[r.pzaPlantEnum.FUME_SHROOM,"\u55b7\u5c04\u80fd\u7a7f\u8fc7\u94c1\u95e8\u7684\u5b50\u5f39"],[r.pzaPlantEnum.GRAVE_BUSTER,"\u628a\u5b83\u653e\u7f6e\u5230\u80fd\u91cf\u67f1\u4e0a\uff0c\u5b83\u5c31\u80fd\u7834\u574f\u80fd\u91cf\u67f1"],[r.pzaPlantEnum.HYPNO_SHROOM,"\u8ba9\u4e00\u53ea\u602a\u4eba\u4e3a\u4f60\u4f5c\u6218"],[r.pzaPlantEnum.SCAREDY_SHROOM,"\u53d1\u5c04\u8fdc\u7a0b\u5b50\u5f39\uff0c\u4f46\u654c\u4eba\u9760\u8fd1\u65f6\u4f1a\u80c6\u5c0f\u5730\u7f29\u8fdb\u5730\u91cc"],[r.pzaPlantEnum.ICE_SHROOM,"\u6682\u65f6\u4f7f\u753b\u9762\u4e2d\u7684\u5168\u90e8\u602a\u4eba\u90fd\u65e0\u6cd5\u52a8\u5f39"],[r.pzaPlantEnum.DOOM_SHROOM,"\u9020\u6210\u5927\u8303\u56f4\u6bc1\u706d\u6548\u679c\uff0c\u4f46\u4f1a\u5728\u539f\u5730\u7559\u4e0b\u65e0\u6cd5\u8fdb\u884c\u79cd\u690d\u7684\u5f39\u5751"],[r.pzaPlantEnum.LILY_PAD,"\u53ef\u4ee5\u5728\u6c34\u6c60\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269"],[r.pzaPlantEnum.SQUASH,"\u538b\u6241\u8eab\u65c1\u7684\u602a\u4eba"],[r.pzaPlantEnum.THREE_PEATER,"\u4e00\u6b21\u5c04\u51fa\u4e09\u884c\u5f39\u5e55"],[r.pzaPlantEnum.TANGLE_KELP,"\u80fd\u591f\u628a\u4e00\u53ea\u602a\u4eba\u62d6\u8fdb\u6c34\u91cc\u7684\u6c34\u751f\u690d\u7269"],[r.pzaPlantEnum.JALAPENO,"\u70e7\u5149\u4e00\u6574\u884c\u7684\u602a\u4eba"],[r.pzaPlantEnum.SPIKEWEED,"\u80fd\u624e\u7834\u8f6e\u80ce\uff0c\u4e5f\u80fd\u523a\u4f24\u8e0f\u5728\u4e0a\u9762\u7684\u602a\u4eba"],[r.pzaPlantEnum.TORCHWOOD,"\u7a7f\u8fc7\u7bdd\u706b\u7684\u5b50\u5f39\u4f1a\u53d8\u6210\u706b\u5f39"],[r.pzaPlantEnum.TALL_NUT,"\u65e0\u6cd5\u8df3\u8fc7\u7684\u539a\u5b9e\u69b4\u83b2\u5899"],[r.pzaPlantEnum.SEA_SHROOM,"\u53d1\u5c04\u77ed\u7a0b\u5b50\u5f39\u7684\u6c34\u751f\u690d\u7269"],[r.pzaPlantEnum.PLANTERN,"\u7167\u4eae\u4e00\u7247\u533a\u57df\uff0c\u9a71\u6563\u8ff7\u96fe"],[r.pzaPlantEnum.CACTUS,"\u53d1\u5c04\u80fd\u591f\u523a\u7834\u6c14\u7403\u7684\u98de\u9556"],[r.pzaPlantEnum.BLOVER,"\u5439\u8d70\u6240\u6709\u98de\u884c\u602a\u4eba\u548c\u8ff7\u96fe"],[r.pzaPlantEnum.SPLIT_PEA,"\u540c\u65f6\u5411\u524d\u540e\u53d1\u5c04\u53cc\u622a\u68cd"],[r.pzaPlantEnum.STAR_FRUIT,"\u5411\u4e94\u4e2a\u65b9\u5411\u53d1\u5c04\u5f39\u5e55"],[r.pzaPlantEnum.PUMPKIN,"\u4fdd\u62a4\u88ab\u5957\u5728\u91cc\u9762\u7684\u690d\u7269"],[r.pzaPlantEnum.MAGNET_SHROOM,"\u5438\u8d70\u94c1\u9505\u3001\u5934\u76d4\u6216\u8005\u5176\u5b83\u91d1\u5c5e\u7269\u54c1"],[r.pzaPlantEnum.CABBAGE_PULT,"\u5411\u654c\u4eba\u6295\u63b7\u6d0b\u8471"],[r.pzaPlantEnum.FLOWER_POT,"\u8ba9\u690d\u7269\u53ef\u4ee5\u79cd\u690d\u5728\u623f\u9876\u4e0a"],[r.pzaPlantEnum.KERNEL_PULT,"\u5411\u602a\u4eba\u6295\u63b7\u91d1\u7b8d\u68d2"],[r.pzaPlantEnum.COFFEE_BEAN,"\u653e\u5728\u690d\u7269\u5934\u4e0a\uff0c\u5c31\u80fd\u628a\u767d\u5929\u7761\u89c9\u7684\u8611\u83c7\u53eb\u9192"],[r.pzaPlantEnum.GARLIC,"\u628a\u602a\u4eba\u8d76\u5230\u5176\u5b83\u524d\u8fdb\u8def\u7ebf\u4e0a"],[r.pzaPlantEnum.UMBRELLA_LEAF,"\u4fdd\u62a4\u5468\u56f4\u7684\u690d\u7269\uff0c\u514d\u53d7\u7334\u5b50\u602a\u4eba\u548c\u793c\u54c1\u8f66\u602a\u4eba\u7684\u4f24\u5bb3"],[r.pzaPlantEnum.MARIGOLD,"\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01"],[r.pzaPlantEnum.MELON_PULT,"\u6295\u51fa\u897f\u74dc\uff0c\u91cd\u91cd\u6253\u51fb\u6210\u7fa4\u7684\u602a\u4eba"]]),e.newPlantDropMap=new Map([["1-1",r.pzaPlantEnum.SUN_FLOWER],["1-2",r.pzaPlantEnum.CHERRY_BOMB],["1-3",r.pzaPlantEnum.WALL_NUT],["1-5",r.pzaPlantEnum.POTATO_MINE],["1-6",r.pzaPlantEnum.SNOW_PEA],["1-7",r.pzaPlantEnum.CHOMPER],["1-8",r.pzaPlantEnum.REPEATER],["1-10",r.pzaPlantEnum.PUFF_SHROOM],["2-1",r.pzaPlantEnum.SUN_SHROOM],["2-2",r.pzaPlantEnum.FUME_SHROOM],["2-3",r.pzaPlantEnum.GRAVE_BUSTER],["2-5",r.pzaPlantEnum.HYPNO_SHROOM],["2-6",r.pzaPlantEnum.SCAREDY_SHROOM],["2-7",r.pzaPlantEnum.ICE_SHROOM],["2-8",r.pzaPlantEnum.DOOM_SHROOM],["2-10",r.pzaPlantEnum.LILY_PAD],["3-1",r.pzaPlantEnum.SQUASH],["3-2",r.pzaPlantEnum.THREE_PEATER],["3-3",r.pzaPlantEnum.TANGLE_KELP],["3-5",r.pzaPlantEnum.JALAPENO],["3-6",r.pzaPlantEnum.SPIKEWEED],["3-7",r.pzaPlantEnum.TORCHWOOD],["3-8",r.pzaPlantEnum.TALL_NUT],["3-10",r.pzaPlantEnum.SEA_SHROOM],["4-1",r.pzaPlantEnum.PLANTERN],["4-2",r.pzaPlantEnum.CACTUS],["4-3",r.pzaPlantEnum.BLOVER],["4-5",r.pzaPlantEnum.STAR_FRUIT],["4-6",r.pzaPlantEnum.SPLIT_PEA],["4-7",r.pzaPlantEnum.PUMPKIN],["4-8",r.pzaPlantEnum.MAGNET_SHROOM],["4-10",r.pzaPlantEnum.CABBAGE_PULT],["5-1",r.pzaPlantEnum.FLOWER_POT],["5-2",r.pzaPlantEnum.KERNEL_PULT],["5-3",r.pzaPlantEnum.COFFEE_BEAN],["5-5",r.pzaPlantEnum.GARLIC],["5-6",r.pzaPlantEnum.UMBRELLA_LEAF],["5-7",r.pzaPlantEnum.MARIGOLD],["5-8",r.pzaPlantEnum.MELON_PULT]]),e.AllPartStar=[[0,0,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0]],e.waterWayZombies=new Set([p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,p.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE,p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE,p.pzaZombieEnum.SNORKEL_ZOMBIE,p.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE]),e.PlantBookMap=new Map([[r.pzaPlantEnum.PEA_SHOOTER,new d(r.pzaPlantEnum.PEA_SHOOTER,"\u662f\u4f60\u7684\u7b2c\u4e00\u9053\u9632\u7ebf\uff0c\u53ef\u4ee5\u53d1\u5c04\u5b50\u5f39\u653b\u51fb\u602a\u4eba\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color>","\u8d64\u4e95\u4f7f\u7528\u201c555\u624b\u673a\u201d\uff0c\u8f93\u5165\u53d8\u8eab\u4ee3\u7801\u201c555\u201d\u540e\u95ed\u5408\u5e76\u63d2\u5165\u201c555\u9a71\u52a8\u5668\u201d\u540e\u53d8\u8eab\u7684555\u7684\u57fa\u672c\u5f62\u6001\u3002\u4ee5\u201c555\u624b\u673a \u624b\u673a\u7206\u7834\u67aa\u5f62\u6001\u201d\u4e3a\u6b66\u5668\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.SUN_FLOWER,new d(r.pzaPlantEnum.SUN_FLOWER,"\u662f\u4e3a\u4f60\u751f\u4ea7\u66f4\u591a\u80fd\u91cf\u7684\u57fa\u7840\u9a91\u58eb\uff0c\u5c3d\u53ef\u80fd\u591a\u7684\u53ec\u5524\u5427!","<color=#47ecff>\u80fd\u91cf\u4ea7\u91cf\uff1a</c><color=#47ecff>\u4f4e</color>","\u98de\u7535\u667a\u80fd\u793e\u957f\u79d8\u4e66\u3002\u79d8\u4e66\u578bAI\u52a9\u7406\u7684\u4eba\u673a\u5076\u3002\u4e13\u4e3a\u542c\u4ece\u793e\u957f\u7684\u6307\u793a\u800c\u4f5c\u4e3a\u79d8\u4e66\u7279\u5316\u7684AI\u673a\u5668\u4eba\uff0c\u4f46\u5728\u4e0e\u6216\u4eba\u4e00\u8d77\u5de5\u4f5c\u65f6\u4f1a\u5b66\u4e60\u5404\u79cd\u5404\u6837\u7684\u4e8b\u60c5\u800c\u53d8\u5316\u3002\u5e38\u4e0e\u6216\u4eba\u793e\u957f\u4e00\u8d77\u884c\u52a8\uff0c\u5fe0\u5b9e\u5730\u8f85\u52a9\u5176\u5de5\u4f5c\u4e0e\u6218\u6597\uff0c\u4e0d\u8fc7\u5176\u5bf9\u6216\u4eba\u65e0\u804a\u7684\u641e\u7b11\u8fdb\u884c\u4e00\u4e00\u8bf4\u660e\u7684\u884c\u4e3a\u8ba9\u6216\u4eba\u9887\u611f\u65e0\u5948\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.CHERRY_BOMB,new d(r.pzaPlantEnum.CHERRY_BOMB,"\u53ec\u5524\u65e0\u53cc\u9f99\uff0c\u5bf93X3\u8303\u56f4\u5185\u9020\u6210\u6bc1\u706d\u4f24\u5bb3\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u4e2d\u7b49\u8303\u56f4\u5185\u7684\u5168\u90e8\u602a\u4eba</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>","\u9f99\u9a91\u5c06\u964d\u4e34\u5361\u7247\u201c\u751f\u5b58\u201d\u88c5\u586b\u4e8e\u201c\u9f99\u53ec\u5524\u673a\u2161\u201d\u4e2d\u5f3a\u5316\u53d8\u8eab\u7684\u6700\u7ec8\u5f62\u6001\u3002\u4ee5\u201c\u9f99\u53ec\u5524\u673a\u2161\u201d\u4e0e\u5176\u53d8\u5f62\u7684\u201c\u9f99\u5251\u5203\u201d\u4e3a\u6b66\u5668\u3002\u53d8\u8eab\u65f6\u706b\u7130\u4ece\u5168\u8eab\u4e0a\u4e0b\u53d1\u51fa\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.WALL_NUT,new d(r.pzaPlantEnum.WALL_NUT,"\u62e5\u6709\u8db3\u4ee5\u4fdd\u62a4\u5176\u4ed6\u9a91\u58eb\u7684\u575a\u786c\u76fe\u724c\uff0c\u53ef\u4ee5\u4fdd\u62a4\u540e\u65b9\u7684\u9a91\u58eb\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color>","\u4f7f\u7528\u201c\u6218\u6781\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u871c\u74dc\u5b9a\u9501\u79cd\u5b50\u201d\u53d8\u8eab\u7684\u65a9\u6708\u7684\u57fa\u672c\u5f62\u6001\u3002\u4ee5\u201c\u65e0\u53cc\u519b\u5200\uff08\u65a9\u6708\uff09\u201d\u4e0e\u201c\u871c\u74dc\u9632\u76fe\u8005\u201d\u4e3a\u6b66\u5668\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.POTATO_MINE,new d(r.pzaPlantEnum.POTATO_MINE,"\u5728\u573a\u4e0a\u57cb\u8bbe\u5ef6\u8fdf\u5f15\u7206\u7684\u8718\u86db\u70b8\u5f39\uff0c\u51c6\u5907\u5b8c\u6bd5\u540e\u9996\u4e2a\u78b0\u5230\u7684\u602a\u4eba\u4f1a\u88ab\u6d88\u706d\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u5c0f\u8303\u56f4\u5185\u7684\u5168\u90e8\u602a\u4eba</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u51c6\u5907\u624d\u80fd\u542f\u52a8\u3002</color>",null,null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.SNOW_PEA,new d(r.pzaPlantEnum.SNOW_PEA,"\u4f1a\u53d1\u5c04\u5bd2\u51b0\u5b50\u5f39\u653b\u51fb\u654c\u4eba\uff0c\u5e76\u5177\u6709\u51cf\u901f\u6548\u679c\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e\uff0c\u5177\u6709\u51cf\u901f\u6548\u679c</color>","\u5047\u9762\u9a91\u58eb\u96f6\u4e00\u4f7f\u7528\u201c\u98de\u7535\u96f6\u4e00\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u51b0\u51bb\u6781\u718a\u7a0b\u5f0f\u5347\u534e\u94a5\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u5f62\u6001\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.CHOMPER,new d(r.pzaPlantEnum.CHOMPER,"\u53ef\u4ee5\u4e00\u62f3\u51fb\u98de\u9996\u4e2a\u63a5\u8fd1\u7684\u654c\u4eba\uff0c\u4e4b\u540e\u77ed\u65f6\u95f4\u5185\u4e0d\u53ef\u653b\u51fb\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4e2d\u7b49</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u975e\u5e38\u8fd1</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u5480\u56bc\u65f6\u95f4\u957f</color>","\u5047\u9762\u9a91\u58eb\u52a0\u5e03\u4f7f\u7528\u201c\u8179\u53e3\u201d\uff0c\u914d\u5408\u201c\u84ec\u677e\u68c9\u82b1\u7cd6\u9a91\u58eb\u9971\u85cf\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u5f62\u6001\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.REPEATER,new d(r.pzaPlantEnum.REPEATER,"\u80fd\u4e00\u6b21\u53d1\u5c04\u4e24\u9897\u5b50\u5f39\u653b\u51fb\u602a\u4eba","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e\uff08\u6bcf\u9897\uff09</color><br/><color=#47ecff>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#47ecff>\u4e24\u500d</color>","\u4f7f\u7528\u9a91\u58eb\u8170\u5e26\uff0c\u914d\u5408\u201c\u7532\u6597\u6606\u866b\u4eea\u201d\u53d8\u8eab\u7684\u91cd\u6b66\u88c5\u5f62\u6001\uff0c\u4ea6\u662f\u7b2c\u4e00\u5f62\u6001\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.PUFF_SHROOM,new d(r.pzaPlantEnum.PUFF_SHROOM,"\u53ec\u5524\u4e0d\u9700\u8981\u80fd\u91cf\uff0c\u4e0d\u8fc7\u4ed6\u7684\u5c04\u7a0b\u5374\u5f88\u8fd1\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u8fd1</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u6e38\u6d41\u4ed9\u662f\u4f0a\u8fea\u65af\u517b\u7684\u732b\uff0c\u88ab\u6d3e\u53bb\u534f\u52a9\u5c0a\uff0c\u6027\u683c\u8f83\u4e3a\u50b2\u5a07\uff0c\u6709\u7740\u4e00\u5f20\u4e0e\u53ef\u7231\u5916\u8868\u76f8\u53cd\u7684\u6bd2\u820c\uff0c\u65f6\u5e38\u5bf9\u5c0a\u8fdb\u884c\u65a5\u8d23\u6216\u6fc0\u52b1\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.SUN_SHROOM,new d(r.pzaPlantEnum.SUN_SHROOM,"\u5f00\u59cb\u63d0\u4f9b\u5c11\u91cf\u80fd\u91cf\uff0c\u7a0d\u540e\u63d0\u4f9b\u6b63\u5e38\u6570\u91cf\u80fd\u91cf\u3002","<color=#47ecff>\u80fd\u91cf\u4ea7\u91cf\uff1a</c><color=#47ecff>\u5f00\u59cb\u4f4e\uff0c\u4e4b\u540e\u6b63\u5e38</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u4f7f\u7528\u201c\u65f6\u7a7a\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u6708\u8bfb\u9a7e\u9a6d\u8868\u5934\u201d\u53d8\u8eab\u7684\u57fa\u672c\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.FUME_SHROOM,new d(r.pzaPlantEnum.FUME_SHROOM,"\u53d1\u5c04\u5486\u54ee\u51b2\u51fb\u6ce2\uff0c\u53ef\u65e0\u89c6\u62a4\u7532\u653b\u51fb\u540e\u65b9\u654c\u4eba","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e\uff0c\u80fd\u7a7f\u900f\u62a4\u7532</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u88ab\u51b2\u51fb\u6ce2\u51fb\u4e2d\u7684\u602a\u4eba</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u4ee5\u201c\u6218\u9a91\u62f3\u94f3\u201d\u4e3a\u6b66\u5668\u3002\u540d\u62a4\u542f\u4ecb\u53d8\u8eab\u65f6\u4ea6\u66fe\u77ed\u6682\u62a2\u593a\u6708\u9a91\u7684\u201c\u52a0\u9c81\u9c81\u519b\u5200\u201d\u4f7f\u7528",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.GRAVE_BUSTER,new d(r.pzaPlantEnum.GRAVE_BUSTER,"\u53ef\u4ee5\u7834\u574f\u80fd\u91cf\u67f1","<color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u53ea\u5bf9\u80fd\u91cf\u67f1\u6709\u6548</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u7834\u574f\u80fd\u91cf\u67f1</color>","\u5047\u9762\u9a91\u58eb\u5251\u5728\u5251\u4e4b\u52c7\u8005\u65f6\u5c06\u89c9\u9192\u5361\u7247\u201c\u5438\u6536\u5c71\u7f8a\u201d\u88c5\u586b\u4e8e\u201c\u89c9\u9192\u878d\u5408\u5668\u201d\u4e2d\uff0c\u518d\u5237\u4e0b\u89c9\u9192\u5361\u7247\u201c\u878d\u5408\u79c3\u9e6b\u201d\u540e\u6240\u83b7\u5f97\u7684\u9ad8\u673a\u52a8\u6027\u7684\u5f3a\u5316\u5f62\u6001\u3002",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.HYPNO_SHROOM,new d(r.pzaPlantEnum.HYPNO_SHROOM,"\u5f53\u602a\u4eba\u89e6\u78b0\u5230\u514b\u6d1b\u8bfa\u65af\u540e\uff0c\u4ed6\u5c06\u4f1a\u6389\u8f6c\u65b9\u5411\u4e3a\u4f60\u4f5c\u6218\u3002","<color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u63a5\u89e6\u751f\u6548</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u8ba9\u4e00\u53ea\u602a\u4eba\u4e3a\u4f60\u4f5c\u6218</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u82b1\u5bb6\u5927\u6211\u4f7f\u7528\u201c\u73a9\u5bb6\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u5e02\u8d29\u7248\u201c\u5047\u9762\u9a91\u58eb\u7f16\u5e74\u53f2\u8f6c\u73a9\u5361\u5e26\u201d\u4e0e\u9a91\u58eb\u73a9\u5bb6\u59ae\u53ef\u7684\u201c\u5047\u9762\u9a91\u58eb\u7f16\u5e74\u53f2\u8f6c\u73a9\u5361\u5e26\u201d\u53d8\u8eab\u7684\u7279\u6b8a\u5f62\u6001\u3002\u4ee5\u201c\u53cc\u5b50\u5361\u5e26\u9ea6\u6797\u67aa \u624b\u67aa\u6a21\u5f0f\u201d\u3001\u201c\u53cc\u5b50\u5361\u5e26\u7834\u574f\u8005 \u5251\u6a21\u5f0f\u201d\u3001\u201c\u53cc\u5b50\u5361\u5e26\u5723\u5251 \u708e\u5251\u6a21\u5f0f\u201d\u548c\u201c\u53cc\u5b50\u5361\u5e26\u96c0\u5f62\u5f13 \u5f13\u6a21\u5f0f\u201d\u4e3a\u6b66\u5668\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.SCAREDY_SHROOM,new d(r.pzaPlantEnum.SCAREDY_SHROOM,"\u4f7f\u7528\u7075\u9b42\u5b50\u5f39\u653b\u51fb\u8fdc\u8ddd\u79bb\u654c\u4eba\uff0c\u654c\u4eba\u63a5\u8fd1\u65f6\u505c\u6b62\u653b\u51fb\u5e76\u9690\u853d\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u654c\u4eba\u63a5\u8fd1\u540e\u505c\u6b62\u653b\u51fb</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u5047\u9762\u9a91\u58eb\u76d6\u8328\u4f7f\u7528\u201c\u65f6\u7a7a\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u76d6\u8328\u9a7e\u9a6d\u8868\u5934\u201d\u4e0e\u201c\u6218\u5162\u9a7e\u9a6d\u8868\u5934\u201d\u53d8\u8eab\u7684\u7279\u6b8a\u88c5\u7532\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.ICE_SHROOM,new d(r.pzaPlantEnum.ICE_SHROOM,"\u91ca\u653e\u5bd2\u51b0\u51b2\u51fb\u6ce2\u51bb\u7ed3\u5168\u5c4f\u654c\u4eba\uff0c\u9020\u6210\u77ed\u6682\u786c\u76f4\u548c\u4f4e\u4f24\u5bb3\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e\uff0c\u51bb\u7ed3\u602a\u4eba</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u5c4f\u5e55\u4e0a\u7684\u6240\u6709\u602a\u4eba</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u91ca\u653e</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u5047\u9762\u9a91\u58eb\u683c\u91cc\u65af\u4f7f\u7528\u201c\u521b\u9a91\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u683c\u91cc\u65af\u66b4\u96ea\u94c1\u62f3\u201d\u4e0e\u201c\u5317\u66b4\u96ea\u6ee1\u88c5\u74f6\u7f50\u201d\u53d8\u8eab\u7684\u6700\u7ec8\u5f62\u6001\u3002\u4ee5\u201c\u683c\u91cc\u65af\u66b4\u96ea\u94c1\u62f3 \u94c1\u62f3\u6a21\u5f0f\u201d\u4e3a\u6b66\u5668\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.DOOM_SHROOM,new d(r.pzaPlantEnum.DOOM_SHROOM,"\u53ec\u5524\u540e\u91ca\u653e\u9a91\u58eb\u8e22\u5f15\u53d1\u7206\u70b8\uff0c\u6e05\u96646X6\u8303\u56f4\u5185\u654c\u4eba\u5e76\u7559\u4e0b\u65e0\u6cd5\u53ec\u5524\u7684\u5751\u6d1e","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u5927\u8303\u56f4\u5185\u7684\u6240\u6709\u602a\u4eba</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u7559\u4e0b\u4e00\u4e2a\u5751\u6d1e</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u5047\u9762\u9a91\u58eb\u7a7a\u6211\u5728\u5168\u80fd\u5f62\u6001\u65f6\u4f7f\u7528\u201c\u4e9a\u53e4\u9c81\u201d\u4ee5\u91d1\u4e4b\u529b\u5f3a\u5316\u540e\u8d85\u53d8\u8eab\u7684\u5f3a\u5316\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.LILY_PAD,new d(r.pzaPlantEnum.LILY_PAD,"\u5728\u6c34\u9762\u751f\u6210\u6218\u672f\u6d6e\u677f\uff0c\u5141\u8bb8\u5176\u4ed6\u9a91\u58eb\u5728\u6b64\u53ec\u5524\u3002","<color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u53ef\u4ee5\u5728\u4e0a\u9762\u53ec\u5524\u975e\u6c34\u4e2d\u9a91\u58eb</color>","<color=#30a7db>\u5fc5\u987b\u53ec\u5524\u5728\u6c34\u9762</c>",null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.SQUASH,new d(r.pzaPlantEnum.SQUASH,"\u4f1a\u9524\u6241\u7b2c\u4e00\u53ea\u63a5\u8fd1\u4ed6\u7684\u602a\u4eba\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u9524\u6241\u63a5\u8fd1\u4ed6\u7684\u602a\u4eba</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528</color>",null,"\u5047\u9762\u9a91\u58eb\u7075\u9a91\u4f7f\u7528\u201c\u7075\u9a91\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u5f01\u5e86\u5e7d\u7075\u773c\u9b42\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.THREE_PEATER,new d(r.pzaPlantEnum.THREE_PEATER,"\u53d1\u5c04\u5b50\u5f39\uff0c\u5206\u522b\u653b\u51fb\u4e0a\u3001\u4e2d\u3001\u4e0b\u4e09\u8def\u7684\u654c\u4eba\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e\uff08\u6bcf\u9897\uff09</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u4e09\u7ebf</color>",null,"\u5047\u9762\u9a91\u58eb\u65f6\u738b\u4f7f\u7528\u201c\u65f6\u7a7a\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u65f6\u738b\u9a7e\u9a6d\u8868\u5934\u201d\u548c\u201c\u65f6\u738b\u4e09\u4f4d\u4e00\u4f53\u9a7e\u9a6d\u8868\u5934\u201d\u53d8\u8eab\u7684\u8d85\u5f3a\u5316\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.TANGLE_KELP,new d(r.pzaPlantEnum.TANGLE_KELP,"\u4ece\u6c34\u4e2d\u4f38\u51fa\u89e6\u624b\u5c06\u654c\u4eba\u62d6\u5165\u6c34\u4e0b\uff0c\u4ec5\u9650\u6c34\u57df\u4f7f\u7528\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u63a5\u89e6\u751f\u6548</color>","<color=#30a7db>\u5fc5\u987b\u53ec\u5524\u5728\u6c34\u9762</c>","\u4f7f\u7528\u201cOOO\u9a71\u52a8\u5668\u201d\u4e0e\u201cO\u626b\u63cf\u73af\u201d\uff0c\u914d\u5408\u201c\u864e\u9cb8\xb7\u6838\u5fc3\u786c\u5e01\u201d\u3001\u201c\u7535\u9cd7\xb7\u6838\u5fc3\u786c\u5e01\u201d\u4e0e\u201c\u7ae0\u9c7c\xb7\u6838\u5fc3\u786c\u5e01\u201d\u53d8\u8eab\u7684OOO\u7684\u6c34\u6816\u7cfb\u8054\u7ec4\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.JALAPENO,new d(r.pzaPlantEnum.JALAPENO,"\u53ec\u5524\u514b\u7f57\u5179\xb7\u7194\u5ca9\u5f62\u6001\uff0c\u4f7f\u7528\u9a91\u58eb\u56de\u65cb\u7206\u788e\uff0c\u6467\u6bc1\u76f4\u7ebf\u5185\u6240\u6709\u602a\u4eba\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u6574\u6761\u7ebf\u4e0a\u7684\u602a\u4eba</color><br/><color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>",null,"\u514b\u7f57\u5179Z\u8d85\u7ea7\u5f62\u6001\u6240\u4f7f\u7528\u7684\u6307\u8282\u5957\u578b\u5f3a\u5316\u9053\u5177\u3002\u4ea6\u53ef\u53d8\u5f62\u4e3a\u94c1\u62f3\u6a21\u5f0f\u4f5c\u4e3a\u514b\u7f57\u5179Z&\u514b\u7f57\u5179Z\u8d85\u7ea7\u5f62\u6001\u7684\u6b66\u5668\u4f7f\u7528\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.SPIKEWEED,new d(r.pzaPlantEnum.SPIKEWEED,"\u5728\u5730\u9762\u8bbe\u7f6e\u9677\u9631\uff0c\u6301\u7eed\u5bf9\u8e29\u4e2d\u7684\u654c\u4eba\u9020\u6210\u4f24\u5bb3","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u6240\u6709\u8e29\u5230\u5b83\u7684\u602a\u4eba</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u4e0d\u4f1a\u88ab\u602a\u4eba\u5403\u6389</color>",null,null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.TORCHWOOD,new d(r.pzaPlantEnum.TORCHWOOD,"\u4ece\u540e\u65b9\u7a7f\u8fc7\u7684\u5b50\u5f39\u4f1a\u9644\u52a0\u706b\u7130\u5c5e\u6027\uff0c\u4f24\u5bb3\u7ffb\u500d\u5e76\u4e14\u9020\u6210\u6e85\u5c04\u4f24\u5bb3","<color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u8ba9\u7a7f\u8fc7\u4ed6\u7684\u5b50\u5f39\u53d8\u6210\u706b\u7403\u9020\u6210\u4e24\u500d\u4f24\u5bb3\u3002\u706b\u7403\u5bf9\u9644\u8fd1\u602a\u4eba\u9020\u6210\u6e85\u5c04\u4f24\u5bb3\u3002</color>",null,"\u6b64\u5f62\u6001\u7279\u522b\u5f3a\u5316\u4e86\u4e0a\u534a\u8eab\u7684\u808c\u8089\uff0c\u5168\u8eab\u5982\u540c\u7194\u5ca9\u4e00\u822c\u53d1\u51fa\u9ad8\u70ed\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.TALL_NUT,new d(r.pzaPlantEnum.TALL_NUT,"\u62e5\u6709\u575a\u786c\u7684\u94e0\u7532\u53ef\u4ee5\u4fdd\u62a4\u540e\u65b9\u7684\u9a91\u58eb\uff0c\u5e76\u4e14\u5b8c\u5168\u963b\u6321\u654c\u4eba\u8df3\u8dc3\u6216\u8de8\u8d8a\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u4e0d\u4f1a\u88ab\u8de8\u8fc7\u6216\u8df3\u8fc7</color>",null,"\u4f7f\u7528\u201c\u6218\u6781\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u80dc\u543c\u5b9a\u9501\u79cd\u5b50\u201d\u53d8\u8eab\u7684\u8d85\u5f3a\u5316\u5f62\u6001\uff0c\u7efc\u5408\u529b\u91cf\u63d0\u5347\u53ca\u5168\u8eab\u91cd\u7532\u7684\u9632\u5fa1\u6027\u8fbe\u5230\u6781\u81f4\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.SEA_SHROOM,new d(r.pzaPlantEnum.SEA_SHROOM,"\u6c34\u57df\u9650\u5b9a\uff0c\u53d1\u5c04\u77ed\u7a0b\u6c34\u5f39\u653b\u51fb","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u8fd1</color>","<color=#30a7db>\u5fc5\u987b\u53ec\u5524\u5728\u6c34\u9762</c><br/><color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u5047\u9762\u9a91\u58eb\u6b4c\u67e5\u5fb7\u4f7f\u7528\u201c\u6b4c\u67e5\u5fb7\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u6bd2\u6db2\u8611\u83c7\u7b49\u7ea75\u9a91\u58eb\u70bc\u91d1\u5361\u724c\u201d\u4e0e\u201c\u6df1\u6d77\u6f5c\u6c34\u8247\u7b49\u7ea75\u9a91\u58eb\u70bc\u91d1\u5361\u724c\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u5f62\u6001\uff0c\u7531\u7b49\u7ea75\u4e0e\u7b49\u7ea75\u4e24\u5f20\u5361\u7ec4\u6210\u7684\u7b49\u7ea710\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.PLANTERN,new d(r.pzaPlantEnum.PLANTERN,"\u91ca\u653e\u5f3a\u5149\u7167\u4eae\u8ff7\u96fe\u533a\u57df\uff0c\u9a71\u6563\u6218\u573a\u8ff7\u96fe\u3002 ","<color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u4e00\u7247\u5706\u5f62\u533a\u57df</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u9a71\u6563\u6218\u573a\u8ff7\u96fe</color>",null,null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.CACTUS,new d(r.pzaPlantEnum.CACTUS,"\u53ef\u4ee5\u540c\u65f6\u653b\u51fb\u5730\u9762\u548c\u7a7a\u4e2d\u76ee\u6807\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u5730\u9762\u548c\u7a7a\u4e2d</color>",null,"\u5047\u9762\u9a91\u58eb\u7535\u738b\u88ab\u9f99\u5854\u7f57\u65af\u9644\u8eab\u7684\u4eba\u6216\u662f\u9f99\u5854\u7f57\u65af\u81ea\u8eab\u4f7f\u7528\u201c\u9a91\u58eb\u901a\u7968\u201d\u8bbe\u89e6\u7d2b\u952e\u9009\u62e9\u72b6\u6001\u7684\u201c\u7535\u738b\u8170\u5e26\uff08\u5047\u9762\u9a91\u58eb\u7535\u738b\uff09\u201d\u540e\u53d8\u8eab\u7684\u7535\u738b\u7684\u8fdc\u6218\u578b\u6d3e\u751f\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.BLOVER,new d(r.pzaPlantEnum.BLOVER,"\u6247\u52a8\u7fc5\u8180\uff0c\u5439\u98de\u5168\u573a\u98de\u884c\u654c\u4eba\u5e76\u9a71\u6563\u8ff7\u96fe\u3002","<color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u5439\u8d70\u5c4f\u5e55\u4e0a\u6240\u6709\u7684\u98de\u884c\u602a\u4eba\uff0c\u5e76\u9a71\u6563\u8ff7\u96fe</color>",null,"\u5047\u9762\u9a91\u58eb\u53cc\u9a91\u4f7f\u7528\u201c\u53cc\u9a91\u9a71\u52a8\u5668\u201d\uff0c\u5728\u914d\u5408\u201c\u75be\u98ce\u8bb0\u5fc6\u4f53\u201d\u4e0e\u201c\u738b\u724c\u8bb0\u5fc6\u4f53\u201d\u7684\u57fa\u7840\u4e0a\u518d\u52a0\u4e4b\u201c\u6781\u81f4\u8bb0\u5fc6\u4f53\u201d\u53d8\u8eab\u7684\u6700\u7ec8\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.SPLIT_PEA,new d(r.pzaPlantEnum.SPLIT_PEA,"\u53ef\u4ee5\u540c\u65f6\u5411\u524d\u540e\u53d1\u5c04\u5b50\u5f39\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u524d\u9762\u548c\u540e\u9762</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5411\u524d\u4e3a\u6b63\u5e38\u901f\u5ea6\uff0c\u5411\u540e\u4e3a\u4e24\u500d\u901f\u5ea6</color>",null,"\u5047\u9762\u9a91\u58eb\u827e\u514b\u8d5b\u5fb7\u4f7f\u7528\u201c\u73a9\u5bb6\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u975e\u51e1\u5144\u5f1fXX\u8f6c\u73a9\u5361\u5e26\u201d\u53d8\u8eab\u7684Lv.X(10)\u5f3a\u5316\u5f62\u6001\u7b2c1\u9636\u6bb5\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.STAR_FRUIT,new d(r.pzaPlantEnum.STAR_FRUIT,"\u5411\u4e94\u4e2a\u65b9\u5411\u53d1\u5c04\u5149\u5203\uff0c\u8986\u76d6\u5168\u89d2\u5ea6\u653b\u51fb","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u4e94\u4e2a\u65b9\u5411</color>",null,"\u5047\u9762\u9a91\u58eb\u5723\u5203\u4f7f\u7528\u6536\u7eb3\u7740\u201c\u706b\u708e\u5251\u70c8\u706b\u201d\u7684\u201c\u5723\u5251\u5251\u5203\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u795e\u517d\u4e66\u201c\u52c7\u6c14\u98de\u9f99\u5947\u5e7b\u9a7e\u9a6d\u4e66\u201d\u3001\u751f\u7269\u4e66\u201c\u98ce\u66b4\u730e\u96d5\u5947\u5e7b\u9a7e\u9a6d\u4e66\u201d\u4e0e\u6545\u4e8b\u4e66\u201c\u4e9a\u745f\u738b\u5947\u5e7b\u9a7e\u9a6d\u4e66\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u589e\u518c\u8d85\u5f3a\u5316\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.PUMPKIN,new d(r.pzaPlantEnum.PUMPKIN,"\u5728\u9a91\u58eb\u8eab\u4e0a\u751f\u6210\u5175\u725b\u62a4\u76fe\uff0c\u53ef\u9632\u5fa1\u653b\u51fb\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u53ef\u4ee5\u53ec\u5524\u5728\u5176\u4ed6\u9a91\u58eb\u4e0a</color>",null,null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.MAGNET_SHROOM,new d(r.pzaPlantEnum.MAGNET_SHROOM,"\u91ca\u653e\u7535\u78c1\u6ce2\uff0c\u5438\u53d6\u602a\u4eba\u7684\u91d1\u5c5e\u88c5\u5907\u3002","<color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u9760\u8fd1\u7684\u602a\u4eba</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u79fb\u9664\u602a\u4eba\u4eec\u8eab\u4e0a\u6240\u6709\u7684\u91d1\u5c5e\u7269\u54c1</color>","<color=#fffff>\u767d\u5929\u88ab\u5c01\u5370</c>","\u5047\u9762\u9a91\u58eb\u534c\u9a91\u4f7f\u7528\u201c\u534c\u9a91\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201cNo.30 \u5317\u78c1\u6781\u5f00\u5173\u201d\u4e0e\u201cNo.31 \u5357\u78c1\u6781\u5f00\u5173\u201d\u53d8\u8eab\u7684\u5f3a\u529b\u6d3e\u751f\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.CABBAGE_PULT,new d(r.pzaPlantEnum.CABBAGE_PULT,"\u6295\u63b7\u98de\u8f6e\u9020\u6210\u4f24\u5bb3\uff0c\u53ef\u4ee5\u65e0\u89c6\u7279\u6b8a\u5730\u5f62","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u629b\u63b7</color>",null,"\u4f7f\u7528\u201c\u6218\u6781\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u5947\u5f02\u679c\u5b9a\u9501\u79cd\u5b50\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u5f62\u6001\u3002\u4ee5\u201c\u5947\u5f02\u679c\u51fb\u8f6e\u201d\u4e3a\u6b66\u5668\u4f5c\u6218\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.FLOWER_POT,new d(r.pzaPlantEnum.FLOWER_POT,"\u53ec\u5524\u5e76\u751f\u6210\u706b\u7130\u6cd5\u9635\uff0c\u53ef\u4ee5\u62b5\u6297\u9b54\u98ce\u51bb\u7ed3\u7684\u5f71\u54cd\u3002","<color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u53ef\u4ee5\u8ba9\u4f60\u5728\u51b0\u5c01\u96ea\u5c71\u53ec\u5524\u7684\u9a91\u58eb\u6295\u5f71\u4e0d\u88ab\u51bb\u7ed3\u3002</color>",null,null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.KERNEL_PULT,new d(r.pzaPlantEnum.KERNEL_PULT,"\u53ec\u5524\u96f7\u7535\u9020\u6210\u4f24\u5bb3\uff0c\u6709\u6982\u7387\u53ef\u6682\u65f6\u51fb\u6655\u654c\u4eba\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e\uff08\u96f7\u7535\uff09\uff0c\u4e2d\uff08\u7729\u6655\u96f7\u7535\uff09</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u629b\u63b7</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u96f7\u7535\u6709\u6982\u7387\u6682\u65f6\u56fa\u5b9a\u602a\u4eba</color>",null,"\u4f7f\u7528\u6536\u7eb3\u7740\u201c\u96f7\u9e23\u5251\u9ec4\u96f7\u201d\u7684\u201c\u5723\u5251\u5251\u5203\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u6545\u4e8b\u4e66\u201c\u963f\u5170\u57fa\u90a3\u795e\u706f\u5947\u5e7b\u9a7e\u9a6d\u4e66\u201d\u53d8\u8eab\u7684\u57fa\u672c\u5f62\u6001\u3002\u4ee5\u201c\u96f7\u9e23\u5251\u9ec4\u96f7\u201d\u4e3a\u6b66\u5668\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.COFFEE_BEAN,new d(r.pzaPlantEnum.COFFEE_BEAN,"\u5524\u9192\u88ab\u5c01\u5370\u7684\u9a91\u58eb\uff0c\u4f7f\u5176\u6b63\u5e38\u4f5c\u6218\u3002","<color=#47ecff>\u7528\u6cd5\uff1a</c><color=#47ecff>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u53ec\u5524\u5728\u5176\u5b83\u9a91\u58eb\u4e0a\uff0c\u7528\u6765\u5728\u767d\u5929\u5524\u9192\u5c01\u5370\u9a91\u58eb</color>",null,"\u5047\u9762\u9a91\u58eb\u65f6\u738b\u4f7f\u7528\u201c\u65f6\u738b\u8868\u76d8\u201d\u914d\u5408\u201c\u65f6\u7a7a\u9a71\u52a8\u5668\u201d\u53d8\u8eab\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.GARLIC,new d(r.pzaPlantEnum.GARLIC,"\u91ca\u653e\u97f3\u6ce2\u529b\u573a\uff0c\u8feb\u4f7f\u654c\u4eba\u6539\u53d8\u524d\u8fdb\u8def\u7ebf\u3002","<color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u8fd1\u8ddd\u79bb\u63a5\u89e6</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u6539\u53d8\u602a\u4eba\u7684\u524d\u8fdb\u8def\u7ebf</color>",null,"\u5047\u9762\u9a91\u58eb\u54cd\u9b3c\u4f7f\u7528\u201c\u97f3\u51fb\u589e\u5e45\u5251\xb7\u88c5\u7532\u58f0\u5203\u201d\u6b66\u88c5\u5f3a\u5316\u540e\u7684\u6700\u7ec8\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.UMBRELLA_LEAF,new d(r.pzaPlantEnum.UMBRELLA_LEAF,"\u751f\u6210\u80fd\u91cf\u62a4\u7f69\uff0c\u4fdd\u62a4\u5468\u56f4\u514d\u53d7\u6295\u63b7\u7c7b\u5b50\u5f39\u7684\u653b\u51fb\u3002","<color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u4fdd\u62a4\u9644\u8fd1\u7684\u9a91\u58eb\uff0c\u4e0d\u88ab\u8718\u86db\u739b\u5c14\u52a0\u59c6\u548c\u5929\u9f99\u5ea7\u4f24\u5bb3</color>",null,"\u4f7f\u7528\u751f\u6210\u80fd\u91cf\u62a4\u7f69\uff0c\u4fdd\u62a4\u5468\u56f4\u514d\u53d7\u6295\u63b7\u7c7b\u5b50\u5f39\u7684\u653b\u51fb\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.MARIGOLD,new d(r.pzaPlantEnum.MARIGOLD,"\u6bcf\u95f4\u9694\u4e00\u6bb5\u65f6\u95f4\u53ef\u4ee5\u751f\u6210\u9a91\u58eb\u5e01\u3002","<color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01</color>",null,"\u4ee5\u827a\u672f\u4f53\u64cd\u822c\u7684\u8f7b\u5feb\u6b65\u4f10\u8fdb\u884c\u6218\u6597\u3002\u88ab\u6d17\u8111\u671f\u95f4\u53cc\u76ee\u4e3a\u7ea2\u8272\uff0c\u5728\u88ab\u6c38\u68a6\u91cd\u7f16\u7a0b\u53d8\u56de\u826f\u6027\u7684\u5d29\u6e90\u4f53\u540e\u53cc\u76ee\u4e3a\u84dd\u8272\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.MELON_PULT,new d(r.pzaPlantEnum.MELON_PULT,"\u6295\u63b7\u8f6e\u80ce\uff0c\u7206\u70b8\u540e\u5bf9\u5468\u56f4\u654c\u4eba\u9020\u6210\u6e85\u5c04\u4f24\u5bb3\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u629b\u63b7</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u5b50\u5f39\u80fd\u5bf9\u76ee\u6807\u9644\u8fd1\u7684\u602a\u4eba\u9020\u6210\u4f24\u5bb3</color>",null,"\u578b\u53f7\u901f\u5ea6\u53ca\u5176\u6d3e\u751f\u5f62\u6001\u65f6\u914d\u5408\u53d8\u6863\u6218\u8f66\u201c\u5348\u591c\u6697\u5f71\u201d\u8f6e\u80ce\u4ea4\u6362\u7684\u6d3e\u751f\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u77ed</color>")],[r.pzaPlantEnum.GATLING_PEA,new d(r.pzaPlantEnum.GATLING_PEA,"\u62e5\u6709\u8d85\u5f3a\u7684\u706b\u529b\uff0c\u4e00\u6b21\u53ef\u4ee5\u53d1\u5c04\u56db\u679a\u5b50\u5f39\uff01","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#47ecff>\u56db\u500d</color><br/><color=#47ecff>",null,"\u5047\u9762\u9a91\u58eb\u6781\u72d0\u4f7f\u7528\u88c5\u586b\u201c\u9a91\u58eb\u6838\u5fc3ID\u201d\u7684\u201c\u6b32\u671b\u9a71\u52a8\u5668\u201d\uff0c\u5c06\u201c\u63a8\u8fdb\u5668MK\u2162\u5347\u7ea7\u5e26\u6263\u201d\u5f00\u542f\u53d8\u6362\u4e3a\u201c\u63a8\u8fdb\u5668MK9\u5e26\u6263\u201d\uff0c\u7136\u540e\u518d\u4f7f\u7528\u201c\u63a8\u8fdb\u5668MK9\u5e26\u6263\u201d\u8fdb\u884c\u7ffb\u8f6c\u53d8\u8eab\u7684\u6700\u7ec8\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.TWIN_SUNFLOWER,new d(r.pzaPlantEnum.TWIN_SUNFLOWER,"\u53ef\u4ee5\u6e90\u6e90\u4e0d\u65ad\u4e3a\u4f60\u63d0\u4f9b\u53cc\u500d\u7684\u80fd\u91cf","<color=#47ecff>\u80fd\u91cf\u4ea7\u91cf\uff1a</c><color=#47ecff>\u53cc\u500d</color><br/><color=#47ecff>",null,"\u4f7f\u7528\u201c\u70bc\u91d1\u5e08\u9a71\u52a8\u5668\u201d\u4e0e\u201c\u9ad8\u9636\u70bc\u91d1\u6212\u6307\u201d\uff0c\u914d\u5408\u201c\u72ec\u89d2\u517d\u7b49\u7ea73\u9a91\u58eb\u70bc\u91d1\u5361\u724c\u201d\u4e0e\u201c\u592a\u9633\u7b49\u7ea77\u9a91\u58eb\u70bc\u91d1\u5361\u724c\u201d\u53d8\u8eab\u7684\u57fa\u7840\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.GLOOM_SHROOM,new d(r.pzaPlantEnum.GLOOM_SHROOM,"\u5bf9\u5468\u56f4\u654c\u4eba\u91ca\u653e\u7687\u568e\u65a9\uff0c\u5feb\u901f\u653b\u51fb\u8fd1\u8ddd\u79bb\u602a\u4eba","<color=#47ecff>\u901f\u5ea6:\u5feb\n\u4f24\u5bb3:\u4e2d\n\u8303\u56f4:\u56db\u5468</color>",null,"\u5047\u9762\u9a91\u58eb\u6708\u9a91\u53ec\u5524\u7259\u8759\u8760\u2162\u4e16\u5439\u8d77\u201c\u8fb0\u9f99\u7b1b\u54e8\u201d\u53ec\u5524\u8fb0\u9f99\u540e\uff0c\u5c06\u5176\u88c5\u7740\u4e8e\u5de6\u8155\u540e\u89e3\u653e\u5168\u8eab\u201c\u9501\u94fe\u201d\u7684\u6700\u7ec8\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.CATTAIL,new d(r.pzaPlantEnum.CATTAIL,"\u53d1\u5c04\u8ffd\u8e2a\u9b54\u6cd5\u5f39\u653b\u51fb\u654c\u4eba\uff0c\u4f18\u5148\u653b\u51fb\u7a7a\u4e2d\u7684\u654c\u4eba","<color=#47ecff>\u901f\u5ea6:\u4e2d\n\u4f24\u5bb3:\u4f4e</color>",null,"\u5047\u9762\u9a91\u58eb\u5deb\u9a91\u5728\u65e0\u9650\u98ce\u683c\u65f6\u4f7f\u7528\u201c\u5deb\u9a91\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u7ec8\u7ed3\u5f3a\u88ad\u9b54\u6cd5\u5e08\u6307\u73af\u201d\u53d8\u8eab\u7684\u65e0\u9650\u98ce\u683c\u7684\u5f3a\u5316\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.WINTER_MELON,new d(r.pzaPlantEnum.WINTER_MELON,"\u53d1\u5c04\u5bd2\u51b0\u5f39\uff0c\u7206\u70b8\u540e\u51bb\u7ed3\u5e76\u51cf\u901f\u8303\u56f4\u5185\u602a\u4eba\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u629b\u63b7</color><br/><color=#47ecff>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#47ecff>1/2\u500d\u6570</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u51fb\u4e2d\u540e\u9020\u6210\u8303\u56f4\u4f24\u5bb3\u5e76\u51cf\u901f</color><br/><color=#47ecff>\u3001",null,"\u5047\u9762\u9a91\u58eb\u5723\u5203\u4f7f\u7528\u6536\u7eb3\u7740\u201c\u6c34\u52bf\u5251\u6d41\u6c34\u201d\u7684\u201c\u5723\u5251\u5251\u5203\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u89c9\u9192\u7684\u751f\u7269\u4e66\u201c\u9b03\u6bdb\u51b0\u517d\u6218\u8bb0\u5947\u5e7b\u9a7e\u9a6d\u4e66\u201d\u53d8\u8eab\u7684\u8d85\u5f3a\u5316\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.SPIKEROCK,new d(r.pzaPlantEnum.SPIKEROCK,"\u5728\u5730\u9762\u8bbe\u7f6e\u9677\u9631\uff0c\u53ef\u4ee5\u77ac\u95f4\u7834\u574f\u5f02\u7c7b\u9a70\u9a91\uff0c\u4e14\u6301\u7eed\u5bf9\u8e29\u4e2d\u7684\u654c\u4eba\u9020\u6210\u591a\u6bb5\u4f24\u5bb3","<color=#47ecff>",null,null,null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.COB_CANNON,new d(r.pzaPlantEnum.COB_CANNON,"\u70b9\u51fb\u521b\u9a91\xb7\u5929\u624d\uff0c\u9a91\u58eb\u84c4\u529b\u6f02\u6d6e\u5728\u7a7a\u4e2d\uff0c\u4e00\u51fb\u6d88\u706d3X3\u8303\u56f4\u5185\u7684\u602a\u4eba\u3002","<color=#47ecff>\u901f\u5ea6:\u4f4e\n\u4f24\u5bb3:\u8d85\u9ad8\n\u8303\u56f4:3X3\u8303\u56f4\u5185\u7684\u5168\u90e8\u602a\u4eba</color>",null,"\u5047\u9762\u9a91\u58eb\u521b\u9a91\u4f7f\u7528\u201c\u521b\u9a91\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u5929\u624d\u6ee1\u88c5\u74f6\u7f50\u201d\u53d8\u8eab\u7684\u521b\u9a91\u7684\u6700\u7ec8\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.IMITATER,new d(r.pzaPlantEnum.IMITATER,"\u590d\u5236\u4efb\u610f\u9a91\u58eb\u7684\u80fd\u529b\uff0c\u5141\u8bb8\u540c\u4e00\u5173\u5361\u4f7f\u7528\u4e24\u6b21\u76f8\u540c\u89d2\u8272\u3002 ",null,null,"\u5047\u9762\u9a91\u58eb\u5e1d\u9a91\u5728\u5e1d\u9a91\u65f6\u914d\u5408\u4f7f\u7528\u201cK\u89e6\u5c4f\uff08\u5e1d\u9a91\uff09\u201d\u3001\u201c\u5b8c\u5168\u5361\u7247\uff08\u5e1d\u9a91\uff09\u201d\u5e76\u4e0e\u201c\u5e1d\u9a91\u9a71\u52a8\u5668\u201d\u7ec4\u5408\u540e\u53d8\u8eab\uff08FKR\uff09\u7684\u5e1d\u9a91\u7684\u6700\u7ec8\u5f62\u6001\u3002",null,null)],[r.pzaPlantEnum.FIGHTKING,new d(r.pzaPlantEnum.FIGHTKING,"\u653b\u51fb\u9644\u5e26\u706b\u7130\u5c5e\u6027\uff0c\u5f3a\u5316\u4e86\u653b\u51fb\u7684\u4f24\u5bb3\u3002","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4e2d</color>\n<color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u524d\u65b9\u4e00\u884c</color>\n<color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u706b\u7130\u5b50\u5f39\u5bf9\u9644\u8fd1\u602a\u4eba\u9020\u6210\u6e85\u5c04\u4f24\u5bb3\u3002</color>",null,"\u5047\u9762\u9a91\u58eb\u7532\u6597\u738b\u5728\u9a91\u58eb\u5f62\u6001\u65f6\u914d\u5408\u8d85\u8d8a\u6606\u866b\u4eea\u8d85\u8715\u58f3\u540e\u7684\u6700\u7ec8\u5f62\u6001",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u6162</color>")],[r.pzaPlantEnum.GABY,new d(r.pzaPlantEnum.GABY,"\u52a0\u5e03\xb7\u86cb\u7cd5\u738b\u80fd\u5bf9\u524d\u65b9\u7684\u654c\u4eba\u9020\u6210\u4f24\u5bb3\uff0c\u8fd8\u80fd\u53ec\u5524\u5976\u6cb9\u5175\u8f85\u52a9\u653b\u51fb","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u524d\u65b91\u683c</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u6bcf30\u79d2\u53ec\u5524\u4e00\u4e2a\u5976\u6cb9\u5175\uff0c\u5bf9\u654c\u4eba\u53d1\u8d77\u653b\u51fb\u3002</color>",null,"\u5047\u9762\u9a91\u58eb\u52a0\u5e03\u4f7f\u7528\u201c\u8179\u53e3\u201d\uff0c\u914d\u5408\u201c\u86cb\u7cd5\u738b\u9a91\u58eb\u9971\u85cf\u201d\u53d8\u8eab\u7684\u5f3a\u5316\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>")],[r.pzaPlantEnum.Phoenix,new d(r.pzaPlantEnum.Phoenix,"\u6b4c\u67e5\u5fb7\xb7\u706b\u661f\u4e0d\u6b7b\u9e1f\u80fd\u5728\u653b\u51fb\u524d\u65b9\u7684\u654c\u4eba\u7684\u540c\u65f6\uff0c\u751f\u6210\u706b\u7403\u5bf9\u654c\u4eba\u9020\u6210\u9ad8\u989d\u4f24\u5bb3","<color=#47ecff>\u5a01\u529b\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u524d\u65b92\u683c</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u6bcf\u653b\u51fb60\u6b21\u751f\u62101\u4e2a\u706b\u7403\uff0c\u5bf9\u524d\u65b9\u9020\u6210\u8d85\u9ad8\u4f24\u5bb3\u3002</color>",null,"\u5047\u9762\u9a91\u58eb\u6b4c\u67e5\u5fb7\u4f7f\u7528\u201c\u6b4c\u67e5\u5fb7\u9a71\u52a8\u5668\u201d\uff0c\u914d\u5408\u201c\u70c8\u706b\u706b\u661f\u7b49\u7ea75\u9a91\u58eb\u70bc\u91d1\u5361\u724c\u201d\u4e0e\u201c\u65e0\u9650\u4e0d\u6b7b\u9e1f\u7b49\u7ea75\u9a91\u58eb\u70bc\u91d1\u5361\u724c\u201d\u53d8\u8eab\u7684\u6d3e\u751f\u5f62\u6001\uff0c\u7531\u7b49\u7ea75\u4e0e\u7b49\u7ea75\u4e24\u5f20\u5361\u7ec4\u6210\u7684\u7b49\u7ea710\u5f62\u6001\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>")],[r.pzaPlantEnum.Gene_SnowPea,new d(r.pzaPlantEnum.Gene_SnowPea,"\u5229\u7ef4\u65af\xb7\u7834\u58f3\u66b4\u9f99\u57fa\u56e0\u7ec4\u5177\u6709\u9632\u5b88\u80fd\u529b\u7684\u540c\u65f6\u53ef\u4ee5\u53d1\u5c04\u5bd2\u51b0\u5b50\u5f39\u51cf\u901f\u654c\u4eba","<color=#47ecff>\u5a01\u529b\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u4e00\u884c</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u6bcf1.5\u79d2\u53d1\u5c042\u679a\u5bd2\u51b0\u5b50\u5f39\uff0c\u5bf9\u653b\u51fb\u4ed6\u7684\u654c\u4eba\u9020\u6210\u51cf\u901f\u548c\u4f24\u5bb3\u3002\u8d25\u9000\u65f6\u51bb\u7ed33X3\u8303\u56f4\u5185\u7684\u6240\u6709\u654c\u4eba3\u79d2\u548c20\u79d2\u51cf\u901f</color>",null,"\u5934\u90e8\u7684\u8c03\u8282\u5668\u80fd\u5bf910\u79cd\u80fd\u529b\u8fdb\u884c\u53d6\u820d\u4f7f\u7528\u548c\u4f18\u5316\uff0c\u8ba9\u653b\u51fb\u6548\u679c\u6700\u5927\u5316\uff1b\u4ece\u7f6a\u6076\u5370\u7ae0\u548c\u5468\u56f4\u51bb\u7ed3\u7684\u70ed\u5ea6\u4e2d\u5438\u6536\u80fd\u91cf\u6765\u4f9b\u5e94\u6240\u9700\u7684\u5de8\u5927\u80fd\u91cf\uff0c\u8fbe\u5230\u4e34\u754c\u6e29\u5ea6\u540e\u80fd\u8fdb\u5165\u8d85\u5bfc\u72b6\u6001\uff0c\u5229\u7528\u78c1\u573a\u7535\u78c1\u52a0\u901f\u4ea7\u751f\u7684\u80fd\u91cf\u589e\u52a0\u52a8\u4f5c\u901f\u5ea6\uff0c\u5e76\u4e14\u80fd\u72ec\u7acb\u540c\u65f6\u53d1\u52a8\u6240\u6709\u7684REMIX\u53d8\u8eab\u3002",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>")],[r.pzaPlantEnum.SUPER_CHOMPER,new d(r.pzaPlantEnum.SUPER_CHOMPER,"\u8d85\u7ea7\u706b\u9f99\u679c\u6bcf\u6b21\u653b\u51fb\u670920%\u6982\u7387\u89e6\u53d1\u7279\u6b8a\u653b\u51fb\uff0c\u53ef\u4ee5\u541e\u566c\u524d\u65b93\u683c\u6240\u6709\u602a\u4eba\u3002 ","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u5de8\u5927</color>","<color=#47ecff>\u8303\u56f4\uff1a</c><color=#47ecff>\u975e\u5e38\u8fd1</color>","<color=#47ecff>\u80cc\u666f</c>",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u975e\u5e38\u957f</color>")],[r.pzaPlantEnum.BOOM_NUT,new d(r.pzaPlantEnum.BOOM_NUT,"\u7206\u70b8\u69b4\u83b2\u53ef\u70b8\u6b7b3X3\u8303\u56f4\u5185\u7684\u602a\u4eba\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color>","<color=#47ecff>\u4f24\u5bb3\uff1a</c><color=#47ecff>\u5de8\u5927\n</color><color=#47ecff>\u8303\u56f4: </c><color=#47ecff>3X3\u8303\u56f4\u5185\u7684\u5168\u90e8\u602a\u4eba</color>","<color=#47ecff>\u80cc\u666f</c>",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>")],[r.pzaPlantEnum.CAIWEN,new d(r.pzaPlantEnum.CAIWEN,"\u83dc\u5e08\u5085\u53ef\u4ee5\u653b\u51fb\u63a5\u8fd1\u7684\u602a\u4eba","<color=#47ecff>\u666e\u901a\u653b\u51fb\u8303\u56f4\uff1a</c><color=#47ecff>\u6b63\u524d\u65b9\u4e8c\u683c\u548c\u6b63\u540e\u65b9\u4e00\u683c</color>\n<color=#47ecff>\u666e\u901a\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>","<color=#47ecff>\u7279\u6b8a\u653b\u51fb\u8303\u56f4:</c><color=#47ecff>\u5468\u56f4\u4e5d\u683c</color>\n<color=#47ecff>\u7279\u6b8a\u653b\u51fb\u4f24\u5bb3:</c><color=#47ecff>\u9ad8</color>","<color=#47ecff>\u80cc\u666f</c>",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.LaserBean,new d(r.pzaPlantEnum.LaserBean,"\u96f7\u795e\u679c\u53ef\u4ee5\u53d1\u5c04\u6fc0\u5149\u653b\u51fb\u524d\u65b9\u7684\u6240\u6709\u654c\u4eba","<color=#47ecff>\u666e\u901a\u653b\u51fb\u8303\u56f4\uff1a</c><color=#47ecff>\u6b63\u524d\u65b9</color>\n<color=#47ecff>\u666e\u901a\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>","<color=#47ecff>\u7279\u6b8a\u653b\u51fb\u8303\u56f4:</c><color=#47ecff>\u6b63\u524d\u65b9</color>\n<color=#47ecff>\u7279\u6b8a\u653b\u51fb\u4f24\u5bb3:</c><color=#47ecff>\u9ad8</color>","<color=#47ecff>\u80cc\u666f</c>",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")],[r.pzaPlantEnum.FireBlover,new d(r.pzaPlantEnum.FireBlover,"\u706b\u7130\u82b1\u53ef\u4ee5\u55b7\u51fa\u706b\u7130\u653b\u51fb\u524d\u65b9\u7684\u602a\u4eba","<color=#47ecff>\u666e\u901a\u653b\u51fb\u8303\u56f4\uff1a</c><color=#47ecff>\u6b63\u524d\u65b9\u4e09\u683c</color>\n<color=#47ecff>\u666e\u901a\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#47ecff>\u4e2d\u7b49</color>","<color=#47ecff>\u7279\u6b8a\u653b\u51fb\u8303\u56f4:</c><color=#47ecff>\u6b63\u524d\u65b9\u4e5d\u683c</color>\n<color=#47ecff>\u7279\u6b8a\u653b\u51fb\u4f24\u5bb3:</c><color=#47ecff>\u9ad8</color>","<color=#47ecff>\u80cc\u666f</c>",null,"<color=#47ecff>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#47ecff>\u957f</color>")]]),e.ZombieBookMap=new Map([[p.pzaZombieEnum.ZOMBIE,new m(p.pzaZombieEnum.ZOMBIE,"\u6700\u4f4e\u7ea7\u7684\u6218\u6597\u5458","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color>",!1,"\u4e00\u822c\u88ab\u53eb\u505a\u201c\u4fee\u5361\u6218\u6597\u5458\u201d\uff0c\u5e76\u975e\u50cf\u602a\u4eba\u4e00\u822c\u7531\u4eba\u7c7b\u6539\u9020\uff0c\u800c\u662f\u901a\u8fc7\u57f9\u517b\u7ec6\u80de\u8fdb\u884c\u5408\u6210\u5236\u9020\u7684\u5408\u6210\u4eba\u3002\u62e5\u6709\u666e\u901a\u4eba\u76843\u500d\u529b\u91cf\uff0c\u542c\u4ece\u4e8e\u5927\u5e72\u90e8\u4e0e\u602a\u4eba\u4eec\u7684\u6307\u6325\uff0c\u7528\u4e8e\u8f85\u52a9\u5404\u79cd\u602a\u4eba\u3002")],[p.pzaZombieEnum.FLAG_ZOMBIE,new m(p.pzaZombieEnum.FLAG_ZOMBIE,"\u6307\u6325\u6700\u4f4e\u7ea7\u6218\u6597\u5458\u7684\u6307\u6325\u5b98 ","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color>",!1,"\u4e00\u822c\u88ab\u53eb\u505a\u201c\u4fee\u5361\u6307\u6325\u5b98\u201d\uff0c\u5e76\u975e\u50cf\u602a\u4eba\u4e00\u822c\u7531\u4eba\u7c7b\u6539\u9020\uff0c\u800c\u662f\u901a\u8fc7\u57f9\u517b\u7ec6\u80de\u8fdb\u884c\u5408\u6210\u5236\u9020\u7684\u5408\u6210\u4eba\u3002\u62e5\u6709\u666e\u901a\u4eba\u76842\u500d\u529b\u91cf\uff0c\u542c\u4ece\u4e8e\u5927\u5e72\u90e8\u4e0e\u602a\u4eba\u4eec\u7684\u6307\u6325\uff0c\u7528\u4e8e\u8f85\u52a9\u5404\u79cd\u602a\u4eba\u6307\u6325\u4fee\u5361\u6218\u6597\u5458\u3002")],[p.pzaZombieEnum.CONE_HEAD_ZOMBIE,new m(p.pzaZombieEnum.CONE_HEAD_ZOMBIE,"\u7cbe\u82f1\u6218\u6597\u5458\uff0c\u4ed6\u8eab\u4e0a\u7684\u6b66\u88c5\u8ba9\u4ed6\u6bd4\u666e\u901a\u6218\u6597\u5458\u575a\u97e7\u4e24\u500d","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color>",!1,"\u4e00\u822c\u88ab\u53eb\u505a\u201c\u7cbe\u82f1\u6218\u6597\u5458\u201d\uff0c\u6bd4\u4e00\u822c\u7684\u4fee\u5361\u6218\u6597\u5458\u66f4\u52a0\u5f3a\u529b\uff0c\u7cbe\u82f1\u6218\u6597\u5458\uff0c\u4ed6\u8eab\u4e0a\u7684\u6b66\u88c5\u8ba9\u4ed6\u6bd4\u666e\u901a\u6218\u6597\u5458\u575a\u97e7\u4e24\u500d\u3002\u62e5\u6709\u666e\u901a\u4eba\u76844\u500d\u529b\u91cf\uff0c\u542c\u4ece\u4e8e\u5927\u5e72\u90e8\u4e0e\u602a\u4eba\u4eec\u7684\u6307\u6325\uff0c\u7528\u4e8e\u8f85\u52a9\u5404\u79cd\u602a\u4eba\u3002")],[p.pzaZombieEnum.POLEVAULTING_ZOMBIE,new m(p.pzaZombieEnum.POLEVAULTING_ZOMBIE,"\u5251\u9f7f\u864e\u5f62\u6001\u7684\u602a\u4eba\uff0c\u53ef\u4ee5\u8d8a\u8fc7\u7b2c\u4e00\u4e2a\u9047\u5230\u7684\u9a91\u58eb","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5feb\u800c\u540e\u6162\uff08\u8df3\u8dc3\u540e\uff09</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u8dc3\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u4f4d\u9a91\u58eb</color>",!1,"\u5251\u9f7f\u864e\u7684\u884c\u52a8\u662f\u7531\u5730\u7403\u5185\u5b58\u63a7\u5236\u7684\u3002\u53cc\u722a\u53ef\u4ee5\u6321\u5f00\u5f3a\u5927\u653b\u51fb\u5e76\u53d1\u5c04\u5f3a\u5927\u5149\u5f39\u3002\u62e5\u6709\u5730\u7403\u5185\u5b58\u4e2d\u6700\u9876\u7ea7\u7684\u901f\u5ea6\uff0c\u52a0\u4e0a\u732b\u79d1\u52a8\u7269\u5feb\u4e8e\u4eba\u7c7b\u7684\u53cd\u5e94\u901f\u5ea6\uff0c\u5251\u9f7f\u864e\u8bb0\u5fc6\u4f53\u62e5\u6709\u9ad8\u4e8e\u5ba1\u5224\u8bb0\u5fc6\u4f53\u7684\u901f\u5ea6\uff0c\u662f\u535a\u7269\u9986\u7ec4\u7ec7\u7684\u5904\u5211\u8005\u3002")],[p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,new m(p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,"\u4ed6\u7684\u5047\u9762\u5934\u76d4\uff0c\u80fd\u6781\u5927\u7a0b\u5ea6\u7684\u627f\u53d7\u4f24\u5bb3\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</color>",!1,"\u4e00\u822c\u88ab\u53eb\u505a\u201c\u5047\u9762\u6218\u6597\u5458\u201d\uff0c\u6bd4\u7cbe\u82f1\u6218\u6597\u5458\u66f4\u52a0\u5f3a\u529b\uff0c\u5047\u9762\u6218\u6597\u5458\uff0c\u4ed6\u7684\u5047\u9762\u5934\u76d4\uff0c\u80fd\u6781\u5927\u7a0b\u5ea6\u7684\u627f\u53d7\u4f24\u5bb3\u3002\u62e5\u6709\u666e\u901a\u4eba\u768410-15\u500d\u529b\u91cf\uff0c\u542c\u4ece\u4e8e\u5927\u5e72\u90e8\u4e0e\u602a\u4eba\u4eec\u7684\u6307\u6325\uff0c\u7528\u4e8e\u8f85\u52a9\u5404\u79cd\u602a\u4eba\u3002")],[p.pzaZombieEnum.NEWSPAPER_ZOMBIE,new m(p.pzaZombieEnum.NEWSPAPER_ZOMBIE,"\u4ed6\u7684\u76d4\u7532\u53ea\u80fd\u63d0\u4f9b\u975e\u5e38\u6709\u9650\u7684\u9632\u5fa1\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u76d4\u7532\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u6b63\u5e38\uff0c\u800c\u540e\u5feb(\u5931\u53bb\u76d4\u7532\u540e)</color>",!1,"\u52a0\u7f8e\u5c14\u672c\u6765\u7684\u5b8c\u6574\u9762\u8c8c\uff0c\u5934\u90e8\u4e3a\u7280\u725b\u548c\u8c61\u7684\u9020\u5f62\uff0c\u5168\u8eab\u4e3a\u9ed1\u3001\u767d\u548c\u7070\u8272\u7684\u91cd\u578b\u88c5\u7532\uff0c\u53f3\u81c2\u4e0a\u6709\u5e26\u523a\u7684\u624b\u7532\uff0c\u5de6\u81c2\u4e0a\u6709\u5e26\u70ae\u7684\u624b\u7532\uff0c\u80cc\u4e0a\u6709\u7329\u7329\u7684\u80cc\u7532\uff0c\u8170\u5e26\u52a0\u4e0a\u5916\u6846\u548c\u91d1\u8272\u5b9d\u77f3\u3002\u62e5\u6709\u60ca\u4eba\u7684\u529b\u91cf\u548c\u9632\u5fa1\u529b\uff0c\u53ef\u4ee5\u5c06\u5468\u56f4\u7684\u7269\u4f53\u548c\u4eba\u53d8\u6210\u7ec6\u80de\u786c\u5e01\u3002")],[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,new m(p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"\u4ed6\u7684\u76fe\u724c\u80fd\u63d0\u4f9b\u9ad8\u5f3a\u5ea6\u7684\u9632\u5fa1\u3002 ","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u76fe\u724c\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u6218\u9a91\u548c\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</color>",!1,"\u730e\u6237\u5ea7\u80fd\u4f7f\u7528\u5de8\u5927\u68cd\u68d2\u548c\u5927\u76fe\u8fdb\u884c\u683c\u6597\u6218")],[p.pzaZombieEnum.FOOTBALL_ZOMBIE,new m(p.pzaZombieEnum.FOOTBALL_ZOMBIE,"\u4f5c\u4e3a\u4e00\u4e2a\u9a91\u58eb\uff0c\u6ca1\u6709\u9a6c\u4e5f\u80fd\u8dd1\u7684\u5f88\u5feb\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5feb</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</color>",!1,"\u901a\u8fc7\u83b7\u5f97\u201c\u874e\xb7\u6838\u5fc3\u786c\u5e01\u201d\u3001\u201c\u87f9\xb7\u6838\u5fc3\u786c\u5e01\u201d\u3001\u201c\u867e\xb7\u6838\u5fc3\u786c\u5e01\u201d\u4e4b\u529b\u53d8\u4e3a\u5b8c\u5168\u4e4b\u59ff\u7684\u94e0\u6b66\u8005\u602a\u4eba\u3002")],[p.pzaZombieEnum.DANCING_ZOMBIE,new m(p.pzaZombieEnum.DANCING_ZOMBIE,"\u70ed\u604b\u4e2d\u7684\u602a\u4eba\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u53ec\u5524\u6f0f\u6d1e\u4f53</color>",!1,"\u5438\u53d6\u604b\u7231\u6e38\u620f\u300a\u5fc3\u8df3\u5371\u673a\u300b\u7684\u6570\u636e\u7684\u5b8c\u5168\u4f53\u6f0f\u6d1e\u4f53\u3002\u5bf9\u8eab\u8fb9\u7684\u6f0f\u6d1e\u4f53\u201c\u53ef\u7231\u5973\u5b69\u4eec\u201d\u8bf4\u51fa\u63d0\u5347\u597d\u611f\u5ea6\u7684\u5bcc\u6709\u9b45\u529b\u7684\u53f0\u8bcd\uff0c\u5e76\u4ee5\u6b64\u529b\u91cf\u7ed9\u4e88\u5bf9\u624b\u4f24\u5bb3\u3002")],[p.pzaZombieEnum.BACKUP_DANCER,new m(p.pzaZombieEnum.BACKUP_DANCER,"\u5f53\u52d2\u5f17\u91cc\u5609\u6f0f\u6d1e\u4f53\u51fa\u73b0\u65f6\uff0c\u201c\u53ef\u7231\u5973\u5b69\u4eec\u201d\u4f1a\u88ab\u53ec\u5524\u51fa\u73b0\u3002 ","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color>",!1,"\u611f\u67d3\u4eba\u7c7b\u5e76\u5728\u5176\u8111\u5185\u5bc4\u751f\u6210\u957f\u7684\u5fae\u578b\u8ba1\u7b97\u673a\u75c5\u6bd2\u6240\u53d8\u6210\u7684\u602a\u4eba\u3002\u53ef\u968f\u7740\u611f\u67d3\u8005\u7684\u4eba\u7c7b\u7684\u538b\u529b\u800c\u589e\u6b96\u5e76\u53d1\u4f5c\u6e38\u620f\u75c5\uff0c\u540e\u593a\u53d6\u4eba\u7c7b\u7684\u8eab\u4f53\u4ece\u800c\u5b9e\u4f53\u5316\u7684\u6570\u636e\u4f53\u3002")],[p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,new m(p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,"\u6551\u751f\u5708\u80fd\u8ba9\u602a\u4eba\u80fd\u6d6e\u5728\u6c34\u9762\u4e0a\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color>",!0,null)],[p.pzaZombieEnum.SNORKEL_ZOMBIE,new m(p.pzaZombieEnum.SNORKEL_ZOMBIE,"\u9ca8\u9c7c\u566c\u6b32\u602a\u53ef\u4ee5\u5728\u6c34\u4e0b\u524d\u884c\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u6f5c\u6c34\u4ee5\u907f\u514d\u906d\u5230\u653b\u51fb</color>",!0,"\u9e3f\u4e0a\u751f\u7269\u7814\u7a76\u6240\u7684\u7814\u7a76\u5458\xb7\u53ea\u91ce\u901a\u62b1\u7740\u201c\u60f3\u4eab\u53d7\u70b8\u5f39\u7684\u5236\u9020\u548c\u76ee\u6807\u7684\u7206\u7834\u201d\u7684\u6b32\u671b\u4ea7\u751f\u7684\u566c\u6b32\u602a\u3002")],[p.pzaZombieEnum.ZOMBONI,new m(p.pzaZombieEnum.ZOMBONI,"\u5f02\u7c7b\u9a70\u9a91\u64cd\u7eb5\u6218\u8f66\uff0c\u78be\u8fc7\u4f60\u7684\u9a91\u58eb\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u8d85\u9ad8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u78be\u538b\u9a91\u58eb\uff0c\u7559\u4e0b\u6761\u8f66\u8f6e\u5370</color>",!1,"\u5f02\u7c7b\u9a70\u9a91\u4e13\u5c5e\u7684\u8d85\u7ea7\u8f66\u8f86\uff0c\u53ef\u901a\u8fc7\u8054\u5408\u4f7f\u5f02\u7c7b\u9a70\u9a91\u7684\u653b\u51fb\u529b\u500d\u589e\u3002")],[p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,new m(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,"\u4ee5\u56db\u4eba\u5c0f\u961f\u5f62\u5f0f\u51fa\u73b0\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u6469\u6258\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u53ea\u5728\u8f66\u8f6e\u5370\u4e0a\u51fa\u73b0</color>",!1,"\u4f7f\u7528\u201c\u667a\u6167\u8170\u6263\u201d\u53d8\u8eab\u7684\u57fa\u672c\u5f62\u6001\u3002\u4ee5\u201c\u52a0\u901f\u5203\u67aa\u201d\u4e3a\u6b66\u5668\u3002")],[p.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,new m(p.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,"\u6f5c\u6c34\u8247\u5408\u91d1\u517d\u5584\u4e8e\u5229\u7528\u4f60\u6c34\u4e2d\u9632\u5fa1\u7684\u5f31\u70b9\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5feb\u800c\u540e\u6162(\u8df3\u8dc3\u540e)</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u8dc3\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u4f4d\u9a91\u58eb</color>",!0,"\u8f7d\u5177\u5c5e\u514b\u7c73\u201c\u6df1\u6d77\u6f5c\u6c34\u8247\u201d\u5bf9\u4eba\u7c7b\u7684\u5f3a\u70c8\u6076\u610f\u505a\u51fa\u53cd\u5e94\u800c\u9644\u8eab\uff0c\u53d8\u6210\u4e86\u739b\u5c14\u52a0\u59c6\u7684\u6837\u5b50\u3002\u64c5\u957f\u957f\u671f\u6f5c\u822a\u5230\u5404\u79cd\u7269\u8d28\u5185\uff0c\u7528\u4f38\u957f\u7684\u773c\u775b\u5728\u4e0d\u88ab\u5bf9\u8c61\u53d1\u73b0\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u8ffd\u8e2a\u548c\u8c03\u67e5\uff0c\u8fd9\u4e5f\u53ef\u4ee5\u8f6c\u7528\u4e3a\u5bf9\u7279\u5b9a\u5bf9\u8c61\u7684\u62d8\u675f\u3002")],[p.pzaZombieEnum.JACK_ZOMBIE,new m(p.pzaZombieEnum.JACK_ZOMBIE,"\u5c0f\u5fc3\u4ed6\u4f1a\u7206\u70b8\uff01","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5feb</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u9760\u8fd1\u9a91\u58eb\u4f1a\u7206\u70b8</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</color>",!1,"\u4f53\u5185\u5177\u6709\u4ea7\u70ed\u5668\u5b98\uff0c\u6218\u6597\u65f6\u80fd\u5229\u7528\u53f3\u8155\u7684\u706b\u5668\u201c\u731b\u51fb\u71c3\u70e7\u8005\u201d\uff0c\u4f7f\u5927\u7247\u5468\u56f4\u7684\u4e1c\u897f\u70e7\u5c3d\u3002\u4e5f\u80fd\u4f7f\u51fa\u7f20\u7ed5\u7740\u706b\u7130\u7684\u683c\u6597\u653b\u51fb\u3002")],[p.pzaZombieEnum.BALLOON_ZOMBIE,new m(p.pzaZombieEnum.BALLOON_ZOMBIE,"\u717d\u52a8\u7fc5\u8180\u98de\u5728\u7a7a\u4e2d\uff0c\u8eb2\u8fc7\u5927\u591a\u6570\u653b\u51fb\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u98de\u884c</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u7535\u738b\xb7\u5723\u67aa\u5f62\u6001\u548c\u53cc\u9a91\xb7\u75be\u98ce\u738b\u724c\u9ec4\u91d1\u6781\u81f4</color>",!1,"\u88ab\u9886\u4e3b\u9644\u8eab\u7684\u6749\u6751\u9686\u5728\u6076\xb7\u6708\u9a91\u81ea\u52a8\u60ac\u6302\u4e8e\u8170\u95f4\u6d6e\u73b0\u7684\u5e26\u6263\u540e\u7f20\u7ed5\u201c\u6076\u4e4b\u94e0\u201d\u7684\u57fa\u672c\u5f62\u6001\u3002")],[p.pzaZombieEnum.DIGGER_ZOMBIE,new m(p.pzaZombieEnum.DIGGER_ZOMBIE,"\u9f9f\u5c0a\u8005-\u9646\u9f9f\u5c5e\xb7\u9646\u751f\u901a\u8fc7\u6316\u96a7\u9053\u6765\u7a7f\u8fc7\u4f60\u7684\u9632\u5fa1\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5feb\uff0c\u800c\u540e\u6162</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u7a7f\u8fc7\u5730\u4e0b\u96a7\u9053\u5e76\u51fa\u73b0\u5728\u6218\u573a\u7684\u5de6\u4fa7</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u7535\u738b\xb7\u5723\u67aa\u5f62\u6001\u548c\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</color>",!1,"\u5168\u8eab\u7684\u4f53\u8272\u4e3a\u94dc\u8272\u7684\u5177\u6709\u9646\u9f9f\u7279\u5f81\u7684\u5168\u8eab\u94f6\u8272\u7684\u672a\u77e5\u751f\u547d\u4f53\u3002\u4e0e\u540c\u578b\u7684\u9646\u9f9f\u5c5e\xb7\u6708\u6d0b\u540c\u6837\u80fd\u4f7f\u6ce5\u571f\u6db2\u72b6\u5316\u7684\u80fd\u529b\uff0c\u5e76\u4e8e\u5176\u4e2d\u81ea\u7531\u79fb\u52a8\u3002")],[p.pzaZombieEnum.POGO_ZOMBIE,new m(p.pzaZombieEnum.POGO_ZOMBIE,"\u8fd9\u79cd\u602a\u4eba\u4f1a\u8df3\u8dc3\u8fc7\u4f60\u7684\u9632\u5b88\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u8dc3\u8fc7\u9a91\u58eb</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001</color>",!1,"\u6f5c\u85cf\u5728\u4eba\u7c7b\u4f53\u5185\u7684\u6076\u9b54\u88ab\u300c\u8757\u866b\u539f\u578b\u7f6a\u6076\u5370\u7ae0\u300d\u7684\u529b\u91cf\u6240\u89e3\u653e\u51fa\u3002\u83b7\u53d6\u4e86\u8757\u866b\u7684\u9057\u4f20\u57fa\u56e0\u4fe1\u606f\uff0c\u64c5\u957f\u8fd0\u7528\u9ad8\u8df3\u8dc3\u529b\u548c\u8f7b\u76c8\u7684\u8eab\u4f53\u6765\u73a9\u5f04\u76ee\u6807\u3002")],[p.pzaZombieEnum.YETI_ZOMBIE,new m(p.pzaZombieEnum.YETI_ZOMBIE,"\u4e00\u79cd\u7f55\u89c1\u800c\u53e4\u602a\u7684\u602a\u4eba\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u4e00\u5c0f\u4f1a\u513f\u540e\u4f1a\u9003\u8dd1</color>",!1,"\u96ea\u4eba\u7c73\u5409\u591a\u867d\u7136\u662f\u5b8c\u6210\u4e86\u767d\u96ea\u96ea\u7537\u7684\u9b54\u6539\u4e4b\u4e66\uff0c\u4f46\u5728\u5b8c\u6210\u7684\u540c\u65f6\u88ab\u91ca\u653e\u5230\u4f53\u5916\u7684\u4e66\u88ab\u5047\u9762\u9a91\u58eb\u5723\u5203\xb7\u6df1\u7ea2\u4e4b\u9f99\u65a9\u6740\uff0c\u4e0e\u5bbf\u4e3b\u767d\u4e95\u7531\u7eaa\u5206\u79bb\u3002\u6700\u540e\u96ea\u4eba\u7c73\u5409\u591a\u88ab\u624b\u6301\u5149\u521a\u5251\u6700\u5149\u7684\u5047\u9762\u9a91\u58eb\u5723\u5203\xb7\u9f99\u7eb9\u9a91\u58eb\u7684\u5fc5\u6740\u6280\u300c\u5149\u521a\u9f99\u7834\u65a9\u300d\u51fb\u6740\u3002")],[p.pzaZombieEnum.BUNGEE_ZOMBIE,new m(p.pzaZombieEnum.BUNGEE_ZOMBIE,"\u8718\u86db\u5408\u91d1\u517d\u4f1a\u5410\u51fa\u86db\u4e1d\u7ed1\u8d70\u4f60\u7684\u9a91\u58eb\u3002 ","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u5410\u51fa\u86db\u4e1d\u7ed1\u8d70\u4f60\u7684\u9a91\u58eb</color>",!1,"\u52a8\u7269\u5c5e\u514b\u7c73\u201c\u6355\u6349\u72fc\u86db\u201d\u5bf9\u8c03\u67e5\u5b98\xb7\u9488\u9a6c\u6c50\u91cc\u7684\u5f3a\u70c8\u6076\u610f\u505a\u51fa\u53cd\u5e94\u800c\u9644\u8eab\uff0c\u53d8\u6210\u4e86\u5408\u91d1\u517d\u7684\u6837\u5b50\u3002\u901a\u8fc7\u91ca\u653e\u9ecf\u6027\u4e1d\u7ebf\u6765\u7f20\u7ed5\u5bf9\u8c61\u3002")],[p.pzaZombieEnum.LADDER_ZOMBIE,new m(p.pzaZombieEnum.LADDER_ZOMBIE,"\u4e5d\u5c3e\u72d0\u5408\u91d1\u517d\u80fd\u53ec\u5524\u4f20\u9001\u95e8\u7a7f\u8d8a\u969c\u788d\u7269\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u53ec\u5524\u95e8\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4e2d</color><br/><color=#47ecff>\u901f\u5ea6\uff1a</c><color=#47ecff>\u5feb\uff0c\u800c\u540e\u6162(\u53ec\u5524\u4f20\u9001\u95e8\u540e)</color><br/><color=#47ecff>\u5f31\u70b9\uff1a</c><color=#47ecff>\u534c\u9a91\xb7\u7535\u529b\u72b6\u6001\u53ef\u4ee5\u8ba9\u5b83\u7684\u4f20\u9001\u95e8\u65e0\u6548\u5316</color>",!1,"\u88ab\u79f0\u4e3a\u201c\u72d0\u72f8\u5927\u4eba\u201d\u7684\u6751\u5b50\u7684\u77f3\u50cf\u5728\u795e\u79d8\u5c5e\u514b\u7c73\u201c\u4e5d\u5c3e\u201d\u7684\u5e2e\u52a9\u4e0b\uff0c\u4f5c\u4e3a\u7279\u5f02\u7684\u5408\u91d1\u517d\u8bde\u751f\u4e86\u3002\u80fd\u719f\u7ec3\u4f7f\u7528\u7a7a\u4e2d\u6d6e\u6e38\u548c\u5e7b\u5f71\u7b49\u4e5d\u79cd\u7279\u6b8a\u80fd\u529b\u3002\u5728\u81ea\u8eab\u548c\u6b63\u5e38\u7a7a\u95f4\u4e2d\u5f62\u6210\u7279\u6b8a\u9886\u57df\uff0c\u53ef\u4ee5\u8eb2\u907f\u4efb\u4f55\u653b\u51fb\u3002")],[p.pzaZombieEnum.CATAPULT_ZOMBIE,new m(p.pzaZombieEnum.CATAPULT_ZOMBIE,"\u5c0f\u5fc3\u4ed6\u624b\u4e0a\u7684\u9ed1\u7403\uff0c\u522b\u88ab\u7838\u5230\u4e86\uff01","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u9ad8</color><br/><color=#47ecff>\u7279\u70b9\uff1a</c><color=#47ecff>\u5bf9\u4f60\u7684\u9a91\u58eb\u6295\u63b7\u9ed1\u7403</color>",!1,"\u5929\u751f\u4fbf\u5177\u6709\u7740\u538b\u5012\u6027\u7684\u5f3a\u5927\u529b\u91cf\u3002\u914d\u5408\u6700\u5f3a\u6b66\u5668\u2014\u2014\u94c1\u7403\u53ef\u4ee5\u538b\u5012\u534c\u9a91\u3002\u8d85\u91d1\u5c5e\u8986\u76d6\u7684\u8eab\u4f53\u751a\u81f3\u7535\u51fb\u548c\u5f3a\u5927\u7684\u51b2\u51fb\u529b\u4e5f\u65e0\u4ece\u7ba1\u7528\u3002")],[p.pzaZombieEnum.GARGANTUAR,new m(p.pzaZombieEnum.GARGANTUAR,"\u9ed1\u5316\u7684\u7a7a\u6211\u53d8\u6210\u4e86\u602a\u4eba\uff01","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u5371\u9669</color>",!1,"\u88ab\u79f0\u4e3a\u5f02\u7c7b\u9a91\u58eb\u7684\u602a\u4eba\u7684\u4e00\u79cd\u3002\u7531\u65f6\u52ab\u8005\u63d0\u5fb7\u53d8\u8eab\u800c\u6210\u7684\u59ff\u6001\u3002\u64c5\u957f\u4f7f\u7528\u80cc\u540e\u7684\u7fbd\u7ffc\u98de\u884c\u4ee5\u53ca\u4ece\u53e3\u4e2d\u5410\u51fa\u706b\u7403\u7684\u653b\u51fb\u3002\u5c55\u73b0\u51fa\u80fd\u591f\u78be\u538b\u201c\u65f6\u5149\u9b54\u795e\u673a\u201d\u7684\u529b\u91cf\u3002")],[p.pzaZombieEnum.RED_GARGANTUAR,new m(p.pzaZombieEnum.RED_GARGANTUAR,"\u9ed1\u5316\u7684\u7a7a\u6211\u53d8\u6210\u4e86\u602a\u4eba\u7a76\u6781\u4f53\uff01","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u5371\u9669</color>",!1,"\u7531\u65f6\u52ab\u8005\u63d0\u5fb7\u4e0e\u7279\u5f02\u70b9\u4e45\u6c38\u614e\u543e\u878d\u5408\u800c\u6210\u7684\u5f02\u7c7b\u7a7a\u6211\u8fdb\u5316\u6001\u3002\u6709\u7740\u5de8\u5927\u7684\u8eab\u59ff\uff0c\u5c55\u73b0\u51fa\u80fd\u591f\u78be\u538b\u201c\u65f6\u5149\u9b54\u795e\u673a\u201d\u7684\u529b\u91cf\u3002\u5177\u6709\u5728\u7a7a\u4e2d\u98de\u7fd4\u7684\u7279\u5f81\u3002\u66f4\u662f\u80fd\u91ca\u653e\u51fa\u62db\u5f15\u6bc1\u706d\u7684\u7a76\u6781\u9ed1\u6697\u3002")],[p.pzaZombieEnum.IMP,new m(p.pzaZombieEnum.IMP,"\u845b\xb7\u5df4\u8fbe\xb7\u5df4\u662f\u4e00\u7fa4\u5c0f\u578b\u602a\u4eba\uff0c\u88ab\u5f02\u7c7b\u7a7a\u6211\u7528\u6765\u6295\u63b7\u8fdb\u4f60\u7684\u9632\u5fa1\u4f53\u7cfb\u3002","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u4f4e</color>",!1,"\u672a\u786e\u8ba4\u751f\u547d\u4f5346\u53f7\u662f\u845b\u96c6\u56e2\u602a\u4eba\u4e4b\u9996\uff0c\u8eab\u9ad8209\u516c\u5206\uff0c\u4f53\u91cd252\u516c\u65a4\u3002\u4eba\u7c7b\u5f62\u6001\u8eab\u7a7f\u519b\u793c\u670d\uff0c\u62e5\u6709\u9ad8\u8d85\u7684\u667a\u6167\u4e0e\u529b\u91cf\uff0c\u81ea\u79f0\u201c\u7834\u574f\u4e4b\u9b45\u529b\u201d\u3002\u8eab\u4e3a\u72ec\u89d2\u4ed9\uff0c\u628a\u5c5e\u4e8e\u9539\u5f62\u866b\u7684\u7a7a\u6211\u4e0e0\u53f7\u8fbe\u53e4\u5df4\u89c6\u4e3a\u5bbf\u654c\u3002")],[p.pzaZombieEnum.DR_ZOMBOSS,new m(p.pzaZombieEnum.DR_ZOMBOSS,"King DARK \u8d85\u7ea7\u5927\u4fee\u5361\u7edf\u6cbb\u6240\u6709\u7684\u602a\u4eba","<color=#47ecff>\u5f3a\u5ea6\uff1a</c><color=#47ecff>\u72c2\u66b4\uff0c\u5de8\u5927\u7684\u8eab\u4f53\u8ba9\u654c\u4eba\u65e0\u6cd5\u63a5\u8fd1\u4ed6</color>",!1,"\u5927\u4fee\u5361\u7684\u5927\u5e72\u90e8\u3002\u4f5c\u4e3a\u5927\u4fee\u5361\u7684\u5de8\u5927\u5175\u5668\uff0c\u5168\u8eab\u88c5\u5907\u7740\u6b66\u5668\uff0c\u5229\u7528\u773c\u775b\u53d1\u51fa\u7684\u795e\u79d8\u5c04\u7ebf\u3001\u5bfc\u5f39\u548c\u81f4\u547d\u7684\u6bd2\u6c14\u6765\u8fdb\u884c\u7834\u574f\u6d3b\u52a8\u3002")]]),e.NO_RECOMMEND_PLANT=new Map([[1,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,34,43,44])],[2,new Set([17,20,25,26,34,36,44])],[3,new Set([9,10,11,12,13,14,15,16,25,26,32,34,43])],[4,new Set([12,34,36])],[5,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,43,44])],[6,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,34,43,44])],[7,new Set([17,20,25,26,34,36,44])],[8,new Set([9,10,11,12,13,14,15,16,25,26,32,34,43])],[9,new Set([12,34,36])],[10,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,43,44])]]),e.MINI_NO_RECOMMEND_PLANT=new Map([[1,new Set([12,17,20,22,25,26,44,47])]]),e.mapTerrain=new Map([[0,[[0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0]]],[1,[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]],[2,[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]],[3,[[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]]],[4,[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]],[5,[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]],[6,[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]]]),e}();t.pzaGameConfig=z,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGameFailView:[function(e,a,t){"use strict";cc._RF.push(a,"67529Lq27tAbLepZ8j8zGaa","pzaGameFailView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameFailView=void 0;var r=e("../../Battle/Data/pzaPlantEnum"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameConfig"),c=e("../../Common/pzaGameManager"),u=e("../../Common/pzaGameVaseEndless"),d=e("../../Common/pzaLocalData"),h=e("../../Common/pzaOperationMgr"),m=e("../../Common/pzaSoundManager"),f=e("../../Common/pzaTipManager"),z=e("../../Common/pzaUIManager"),y=e("../../Common/pzaWorldEventManager"),g=e("../../Load/pzaPreLoadManager"),v=e("../../utils/pzaChannel"),b=e("../pzaRankView"),P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.failWord=null,a.mask=null,a.board=null,a.tittle=null,a.txt=null,a.rankBtn=null,a.adIcon=null,a.shareIcon=null,a.expandShareNode=null,a.powerProNode=null,a.costPowerNode=null,a.costPowerLab=null,a.node_tryAgain=null,a.node_selectPart=null,a.node_leftBtnLab=null,a.blockTouch=!1,a.rewardBubble=null,a.adFlag=!1,a.shareFlag=!1,a.createMode=!1,a.costPower=0,a.shareBubble=null,a.tmpPart=0,a}return n(a,e),a.prototype.showView=function(e){var a=this;if(void 0===e&&(e=!1),this.adFlag=!1,this.shareFlag=!1,this.createMode=!1,this.powerProNode.active=!1,this.costPowerNode.active=!1,this.txt.lineHeight=34,this.node_leftBtnLab.y=2,m.pzaSoundManager.clearAllLoopAudio(),this.createMode||(d.pzaLocalData.isShowPowerGift&&(this.powerProNode.active=!1,this.costPowerNode.active=!0,c.pzaGameManager.getCurrentGame().isMainMode()||p.pzaGameState.judgeIsMini(p.pzaGameState.gameMode)||p.pzaGameState.judgeIsVase(p.pzaGameState.gameMode)||p.pzaGameState.judgeIsZombie(p.pzaGameState.gameMode)?this.costPower=d.pzaLocalData.normalPowerCost:this.costPower=d.pzaLocalData.endLessPowerCost,this.costPowerLab.string=this.costPower+"/"+d.pzaLocalData.maxPower),this.node_leftBtnLab.y=17,this.node_selectPart.active=!0,this.node_tryAgain.active=!0,this.node_tryAgain.x=-130,this.node_selectPart.x=130),p.pzaGameState.isTryMode(p.pzaGameState.curChapter,p.pzaGameState.curPart)&&(this.powerProNode.active=!1,this.costPowerNode.active=!1,this.node_selectPart.active=!1,this.node_tryAgain.active=!0,this.node_tryAgain.x=0,this.node_leftBtnLab.y=2),this.expandShareNode.active=!1,this.adIcon.active=this.adFlag,this.shareIcon.active=this.shareFlag,p.pzaGameState.isZombieMode())this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string=p.pzaGameState.gameMode==p.pzaGameMode.ZOMBIE_ENERMY?"\u4f60\u672a\u80fd\u83b7\u5f97\u5168\u90e8\u7684\u9971\u85cf\uff01":"\u4f60\u5df2\u7ecf\u8fde\u7eed\u901a\u8fc7"+(p.pzaGameState.curPart-1)+"\u5173",p.pzaGameState.gameMode==p.pzaGameMode.ZOMBIE_ENDLESS&&(this.expandShareNode.active=!0),v.pzaChannel.instance().showInter(!0),h.pzaOperationMgr.showZombieModeGift(function(){a.board.active=!0});else{if(p.pzaGameState.gameMode===p.pzaGameMode.VASE_ENDLESS)return this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.txt.node.active=!0,this.rankBtn.active=!0,this.txt.string="\u4f60\u5df2\u7ecf\u8fde\u7eed\u901a\u8fc7"+(c.pzaGameManager.getGame(p.pzaGameMode.VASE_ENDLESS,u.pzaGameVaseEndless).endLessRound||0)+"\u5173",this.expandShareNode.active=!0,d.pzaLocalData.data.vaseEndLessLevelIndex=0,d.pzaLocalData.data.vaseEndLessSunCount=0,d.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount"),void h.pzaOperationMgr.showZombieModeGift(null);if(p.pzaGameState.starWaveOverFail)return this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string="",void h.pzaOperationMgr.showZombieModeGift(null);if(e?(this.failWord.active=!1,this.mask.active=!0,this.showResultView()):(this.failWord.active=!0,this.mask.active=!1,this.board.active=!1,this.failWord.stopAllActions(),this.failWord.scale=.01,this.failWord.runAction(cc.sequence(cc.scaleTo(1.2,1),cc.callFunc(function(){}),cc.delayTime(2),cc.callFunc(function(){a.failWord.active=!1,a.mask.active=!0,a.showResultView()})))),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS)return this.txt.node.active=!0,this.rankBtn.active=!0,this.txt.string="\u5728\u88ab\u6050\u6016\u7684\u602a\u4eba\u6d6a\u6f6e\u6df9\u6ca1\u4e4b\u524d\uff0c\u4f60\u575a\u6301\u5230\u4e86\u7b2c"+(p.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c\uff01\uff01\uff01",void(this.expandShareNode.active=!0);p.pzaGameState.speFailTips?(this.txt.node.active=!0,this.txt.string=p.pzaGameState.speFailTips,this.txt.lineHeight=45):(this.txt.string="\u6e38\u620f\u7ed3\u675f",5!=p.pzaGameState.curChapter&&10!=p.pzaGameState.curChapter||10!=p.pzaGameState.curPart||(this.txt.string="\n"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.JALAPENO).name+"\u53ef\u4ee5\u6d88\u9664\u5927\u4fee\u5361\u91ca\u653e\u7684\u51b0\u7403\n\n"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.ICE_SHROOM).name+"\u53ef\u4ee5\u6d88\u9664\u5927\u4fee\u5361\u91ca\u653e\u7684\u706b\u7403")),this.rankBtn.active=!1,d.pzaLocalData.isShowPowerGift||(this.costPower=0),this.expandShareNode.active&&h.pzaOperationMgr.showShareBubble(this.expandShareNode,function(e){a.shareBubble=e})}},a.prototype.showResultView=function(){var e=this;p.pzaGameState.isTryMode(p.pzaGameState.curChapter,p.pzaGameState.curPart)?this.board.active=!0:(this.board.active=!0,h.pzaOperationMgr.showShareBubble(this.expandShareNode,function(a){e.rewardBubble=a}),this.blockTouch=!0,setTimeout(function(){e.blockTouch=!1,h.pzaOperationMgr.showFailGameGift(e.tmpPart,null,function(){})},300))},a.prototype.clickRestart=function(){var e=this;if(!this.blockTouch){var a=function(){e.close(),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.getCurrentGame().gameRestart()};if(this.adFlag)v.pzaChannel.instance().showVideo({sucCall:a,failCall:function(){},endCall:function(){}});else if(this.shareFlag)"ks"==v.pzaChannel.instance().channel||"tt"==v.pzaChannel.instance().channel||"my"==v.pzaChannel.instance().channel?v.pzaChannel.instance().showVideo({sucCall:a,failCall:function(){},endCall:function(){}}):v.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){a(),e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null});else if(this.createMode)a();else{if(d.pzaLocalData.data.power<this.costPower)return f.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void z.pzaUIManager.showPowerView();d.pzaLocalData.setPower(-this.costPower),a()}}},a.prototype.clickMainView=function(){this.blockTouch||(this.close(),p.pzaGameState.gameMode!==p.pzaGameMode.BANG_JAR&&p.pzaGameState.gameMode!==p.pzaGameMode.VASE&&p.pzaGameState.gameMode!==p.pzaGameMode.VASE_ENDLESS||(p.pzaGameState.isGameEnd=!1,p.pzaGameState.isMenuShow=!1),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),z.pzaUIManager.baseShowBoardUI(g.pzaResourceUrl.HOME_SELECT_VIEW,null),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.BACK_HOMEVIEW,null))},a.prototype.clickSelectPart=function(){this.blockTouch||(this.close(),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),p.pzaGameState.gameMode!==p.pzaGameMode.BANG_JAR&&p.pzaGameState.gameMode!==p.pzaGameMode.VASE&&p.pzaGameState.gameMode!==p.pzaGameMode.VASE_ENDLESS||(p.pzaGameState.isGameEnd=!1,p.pzaGameState.isMenuShow=!1),c.pzaGameManager.getCurrentGame().clickSelectPartInFailView())},a.prototype.clickShare=function(){var e=this;v.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gameFailView share sucess"),e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null})},a.prototype.clickRankBtn=function(){this.blockTouch||("hw"!=v.pzaChannel.instance().channel&&"oppo"!=v.pzaChannel.instance().channel&&"vivo"!=v.pzaChannel.instance().channel?this.createWxUserInfoButton(!0,function(){z.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.RANK_VIEW,function(e){if(p.pzaGameState.gameMode==p.pzaGameMode.VASE_ENDLESS){var a=e&&e.getComponent(b.pzaRankView);a&&a.init(2)}})}):f.pzaTipManager.showHomeTip("\u6682\u672a\u5f00\u653e",this.node,2))},a.prototype.createWxUserInfoButton=function(e,a){var t=this,o=v.pzaChannel.instance().getChannel();"tt"!=o.channel?"wx"!==o.channel||null!=d.pzaLocalData.data.playerNick&&null!=d.pzaLocalData.data.playerAvatar?a&&a():o.wxCheckPrivacySetting(function(n){var i=function(){var e=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width-t.rankBtn.x-60)/n.width*e.width,top:(.5*n.height-t.rankBtn.y-60)/n.height*e.height,width:120/n.width*e.width,height:120/n.height*e.height};o.getUserInfo(function(){null!=d.pzaLocalData.data.playerNick&&null!=d.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),a&&a())},i,!1)};if(n)return e?void o.wxPrivacyAuthorize(i,null):void(a&&a());i()},null):o.getUserInfo(function(){a()})},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node);var e=v.pzaChannel.instance().getChannel();"wx"==e.channel&&e.destroyAuthorizationButton()},i([E({displayName:"\u5931\u8d25\u6587\u5b57",type:cc.Node})],a.prototype,"failWord",void 0),i([E({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([E({displayName:"\u5931\u8d25\u754c\u9762",type:cc.Node})],a.prototype,"board",void 0),i([E({displayName:"\u5931\u8d25\u6807\u9898",type:cc.Node})],a.prototype,"tittle",void 0),i([E({displayName:"\u5931\u8d25\u6587\u6848",type:cc.Label})],a.prototype,"txt",void 0),i([E({displayName:"\u6392\u884c\u699c",type:cc.Node})],a.prototype,"rankBtn",void 0),i([E({displayName:"\u5e7f\u544a\u6807\u5fd7",type:cc.Node})],a.prototype,"adIcon",void 0),i([E({displayName:"\u5206\u4eab\u6807\u5fd7",type:cc.Node})],a.prototype,"shareIcon",void 0),i([E({displayName:"\u62d3\u5c55\u5206\u4eab\u6309\u94ae",type:cc.Node})],a.prototype,"expandShareNode",void 0),i([E({displayName:"\u4f53\u529b\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],a.prototype,"powerProNode",void 0),i([E({displayName:"\u4f53\u529b\u6d88\u8017\u8282\u70b9",type:cc.Node})],a.prototype,"costPowerNode",void 0),i([E({displayName:"\u4f53\u529b\u6d88\u8017\u6587\u5b57",type:cc.Label})],a.prototype,"costPowerLab",void 0),i([E({displayName:"\u518d\u6b21\u5c1d\u8bd5\u8282\u70b9",type:cc.Node})],a.prototype,"node_tryAgain",void 0),i([E({displayName:"\u9009\u62e9\u5173\u5361\u8282\u70b9",type:cc.Node})],a.prototype,"node_selectPart",void 0),i([E({displayName:"\u5de6\u6309\u94ae\u6587\u5b57\u8282\u70b9",type:cc.Node})],a.prototype,"node_leftBtnLab",void 0),i([C],a)}(cc.Component);t.pzaGameFailView=S,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaRankView":"pzaRankView"}],pzaGameJar:[function(e,a,t){"use strict";cc._RF.push(a,"afeaeDHx7BNxpxWAQ8LqAI5","pzaGameJar");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameJar=void 0;var i=e("../Battle/Data/pzaGuideType"),r=e("../Battle/pzaGameState"),p=e("./pzaGameConfig"),l=e("./pzaGameManager"),s=e("./pzaGameNormal"),c=e("./pzaWorldEventManager"),u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=r.pzaGameMode.BANG_JAR,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u7838\u7f50\u5b50-"},a.prototype.initPartProcess=function(e){e.partProNode.active=!1,e.partLabel.string=r.pzaGameState.curChapter+"-"+r.pzaGameState.curPart},a.prototype.updatePartProcess=function(){},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=!1},a.prototype.refreshNextWave=function(e,a){if(!(e.specialNextWaveTime<=0||(e.specialNextWaveTime-=a,e.specialNextWaveTime>0))){var t=function(){r.pzaGameState.selectCard=null,r.pzaGameState.selectPlant=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.wave++,3==window.pzazombieManager.wave&&(window.pzazombieManager.lastWave=!0);var e=p.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=e&&e.forEach(function(e){window.pzaplantManager.createJar(e)}),r.pzaGameState.gamePause=!0};window.pzaGuideManager.guideType==i.pzaGuideType.GUIDE_BANG_JAR_4_5?(r.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,window.pzaGuideManager.guideShow(function(){t(),r.pzaGameState.gamePause=!1})):t()}},a.prototype.onZombieDeath=function(e,a,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=null),t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.checkAllZombieDeath(e))if(e.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(e){null!=e&&null!=e.jarData&&null!=e.jarData.zombieType&&(n=!0)}),n||l.pzaGameManager.passPart(a.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(r.pzaGameState.gameMode===r.pzaGameMode.VASE)return void l.pzaGameManager.passPart(a.logicPos);if(r.pzaGameState.gameMode===r.pzaGameMode.VASE_ENDLESS)return void l.pzaGameManager.getCurrentGame().partWin();e.specialNextWaveTime=1}},a.prototype.showBattlePropButtons=function(a){5==r.pzaGameState.curPart||10==r.pzaGameState.curPart?(a.freeSunNode.active=!1,a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1):e.prototype.showBattlePropButtons.call(this,a)},a}(s.pzaGameNormal);t.pzaGameJar=u,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameKnock:[function(e,a,t){"use strict";cc._RF.push(a,"18dd45jI79JLaKO2BhiuGH2","pzaGameKnock");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameKnock=void 0;var i=e("../Achieve/pzaAchieve"),r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaBuffData"),l=e("../Battle/Plant/pzaAttackType"),s=e("../Battle/pzaGameState"),c=e("../utils/pzakc"),u=e("./pzaGameManager"),d=e("./pzaGameNormal"),h=e("./pzaGamePartConfig"),m=e("./pzaLocalData"),f=e("./pzaSoundManager"),z=e("./pzaStatisticsMgr"),y=e("./pzaUtil"),g=e("./pzaWorldEventManager"),v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=s.pzaGameMode.KNOCK_ZOMBIE,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u6253\u50f5\u5c38-"},a.prototype.isAutoCreateSun=function(){return!1},a.prototype.refreshNextWave=function(e,a){if(e.curWaveTime+=a,e.nextWaveTime-=a,!(e.lastWave||e.nextWaveTime>0)){e.wave++,console.log("wave:",e.wave),g.pzaWorldEventManager.triggerEvent(g.pzaWorldEventType.UPDATE_PART_PRO,null),1==e.wave&&f.pzaSoundManager.playAudio("awooga"),e.curWaveTime=0,e.preRefreshHp=0,e.hasShowRedTip=!1;var t=h.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart);if(!(null==t||t.maxWave<e.wave)){t.maxWave==e.wave&&(e.lastWave=!0);var o=window.pzaMapManager.TombSet.size;if(0==t.getWaveZombieDensity()[e.wave]){e.nextWaveTime=2;var n=1;return o<5&&(n=5-o),window.pzaMapManager.randomCreateTomb(n),void(t.maxWave==e.wave+1&&e.showBigWaveTip(!0,!0))}if(e.nextWaveTime=1.4,0==o)return e.wave--,void window.pzaMapManager.randomCreateTomb(5);var i=t.getRandomWaveZombie(e.wave,!1,window.pzaMapManager.getIceYCount());if(null!=i){var r=Math.min(.4,.05*e.wave);if(e.lastWave)window.pzaMapManager.TombMap.forEach(function(a){if(null!=a&&null!=a.xIndex&&null!=a.yIndex&&!window.pzaplantManager.hasPlant(a.xIndex,a.yIndex)){var o=t.getRandomTombZombie(),n=e.createFixBlockZombieData(o,a.xIndex,a.yIndex);Math.random()<=r&&n.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.SPEED_UP,-1,3)),e.createZombie(n,!1,!0)}});else{var l=[];window.pzaMapManager.TombMap.forEach(function(e){null!=e&&null!=e.xIndex&&null!=e.yIndex&&(window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)||l.push(e))});for(var c=y.pzaUtil.getRandomArrayValue(l,i.length),u=0;u<i.length;u++){var d=c[u];if(null!=d&&null!=d.xIndex&&null!=d.yIndex){var m=e.createFixBlockZombieData(i[u],d.xIndex,d.yIndex);Math.random()<=r&&m.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.SPEED_UP,-1,3)),e.createZombie(m,!1,!0)}}}}}}},a.prototype.onZombieDeath=function(e,a,t,o){if(Math.random()<=.1)for(var n=0;n<3;n++)window.pzaplantManager.plantCreateSun(cc.v2(a.logicPos.x+30*(n-1),a.logicPos.y),!0,!0);if(t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)){o==l.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13);var p=0;m.pzaLocalData.hasUseProp&&(p=1);var d=Date.now()-m.pzaLocalData.gameStartTimeStamp;d=Math.ceil(d/1e3);var h=10*(s.pzaGameState.curChapter-1)+s.pzaGameState.curPart;z.pzaStatisticsMgr.sendLevelEvent(h,z.pzaEventLevelType.completed,p,d,s.pzaGameMode.NORMAL),c.default.eventReport(h+"\u5173\u5361\u6210\u529f"),u.pzaGameManager.passPart(a.logicPos),m.pzaLocalData.hasUseProp=!1}},a.prototype.showBattlePropButtons=function(a){5==s.pzaGameState.curPart||10==s.pzaGameState.curPart?(a.freeSunNode.active=!1,a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1):e.prototype.showBattlePropButtons.call(this,a)},a}(d.pzaGameNormal);t.pzaGameKnock=v,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaGameState":"pzaGameState","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameManager:[function(e,a,t){"use strict";cc._RF.push(a,"dbef5/qfMpJKpk2vS74YyJq","pzaGameManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameManager=void 0;var o=e("../Achieve/pzaAchieve"),n=e("../Achieve/pzaAchieveMgr"),i=e("../Battle/Data/pzaDropType"),r=e("../Battle/Plant/pzaBowlingWallBody"),p=e("../Battle/pzaEffectManager"),l=e("../Battle/pzaGameState"),s=e("../Garden/pzaGardenMgr"),c=e("../Load/pzaBundleObjectPool"),u=e("../Load/pzaPreLoadManager"),d=e("../View/Battle/pzaGameFailView"),h=e("../View/pzaCommonMask"),m=e("./pzaCollisionManager"),f=e("./pzaGameArtTest"),z=e("./pzaGameBelt"),y=e("./pzaGameBoss"),g=e("./pzaGameCommonPool"),v=e("./pzaGameConfig"),b=e("./pzaGameJar"),P=e("./pzaGameKnock"),C=e("./pzaGameMiniGame"),E=e("./pzaGameNormal"),S=e("./pzaGameSmall"),_=e("./pzaGameSurEndless"),D=e("./pzaGameSurvival"),M=e("./pzaGameVase"),w=e("./pzaGameVaseEndless"),T=e("./pzaGameZombieEnemy"),A=e("./pzaGameZombieEnemyEndless"),B=e("./pzaKnockMiniGame"),G=e("./pzaLocalData"),I=e("./pzaNodeManager"),O=e("./pzaSmallMiniGame"),N=e("./pzaSoundManager"),L=e("./pzaUIManager"),R=e("./pzaUtil"),k=e("./pzaWorldEventManager"),U=function(){function e(){}return e.getGame=function(a){return e.gameMap.get(a).init()},e.getCurrentGame=function(){return e.gameMap.get(l.pzaGameState.gameMode)},e.getGameMode=function(a,t){return e.normalGameModeMap.get(a+"-"+t)||(G.pzaLocalData.isWeekTwo?l.pzaGameMode.NORMAL_WEEKTWO:l.pzaGameMode.NORMAL)},e.preLoadAndStart=function(a,t,o){l.pzaGameState.gameMode=a;var n=e.gameMap.get(a);n?n.firstStart(t,o):console.error("\u65e0\u6b64\u6e38\u620f\u6a21\u5f0f",a)},e.midOutStart=function(a,t,o,n,i){void 0===i&&(i=!1);var r=e.getCurrentGame(),p=r.isEndless()?null:r.getMidOutTip();e.gameMap.get(a).midOutAndStart(p,t,o,n,a,i)},e.passPart=function(a){G.pzaLocalData.data.autoPickLeft=l.pzaGameState.autoPickLeft,G.pzaLocalData.addDirty("autoPickLeft"),R.pzaUtil.changeGameSpeed(1);var t=e.getCurrentGame();t.checkAchieve(!0),l.pzaGameState.gameWin=!0;var r=t.winDrop();if(null==r)return N.pzaSoundManager.stopBgm(),void t.partWin();switch(r){case i.pzaDropType.PLANT_CARD:var c=l.pzaGameState.curChapter+"-"+l.pzaGameState.curPart,u=v.pzaGameConfig.newPlantDropMap.get(c);G.pzaLocalData.data.ownPlants.push(u),G.pzaLocalData.addDirty("ownPlants"),p.pzaEffectManager.createDropCard(i.pzaDropType.PLANT_CARD,u,a),n.default.instance().checkAddAchieve(o.pzaAchieveType.ACH_4,G.pzaLocalData.data.ownPlants.length,!1);break;case i.pzaDropType.HAND_BOOK:G.pzaLocalData.data.unlockBook=!0,G.pzaLocalData.addDirty("unlockBook"),p.pzaEffectManager.createDropCard(r,null,a);break;case i.pzaDropType.SHOVEL:case i.pzaDropType.CG_PAPER:case i.pzaDropType.BACONIC:case i.pzaDropType.TACO:case i.pzaDropType.COIN_PACKAGE:case i.pzaDropType.SURVIVAL_TROPHY:case i.pzaDropType.ZOMBIE_TROPHY:case i.pzaDropType.VASE_TROPHY:case i.pzaDropType.MINIGAME_TROPHY:p.pzaEffectManager.createDropCard(r,null,a);break;case i.pzaDropType.SPRINKLER:p.pzaEffectManager.createDropCard(r,null,a),s.default.instance().addGardenTool(s.pzaGardenToolType.waterPot,1);break;case i.pzaDropType.DROP_KEY:case i.pzaDropType.PLANT_SKIN:case i.pzaDropType.TRY_TROPHY:p.pzaEffectManager.createDropCard(r,null,a);break;case i.pzaDropType.SLIVER_TROHPY:case i.pzaDropType.GOLD_TROHPY:case i.pzaDropType.BELT_EQUIP:p.pzaEffectManager.createDropCard(r,null,a);break;default:t.partWin()}G.pzaLocalData.bpPassPart()},e.bangJarNextWave=function(){l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,k.pzaWorldEventManager.triggerEvent(k.pzaWorldEventType.SELECT_CARD,null),k.pzaWorldEventManager.triggerEvent(k.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.wave++,3==window.pzazombieManager.wave&&(window.pzazombieManager.lastWave=!0);var e=v.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=e&&e.forEach(function(e){window.pzaplantManager.createJar(e)}),l.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,window.pzaGuideManager.guideShow(function(){l.pzaGameState.gamePause=!1})},e.showGameFail=function(e){void 0===e&&(e=!1),R.pzaUtil.changeGameSpeed(1),L.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.GAME_FAIL_VIEW,function(a){var t=a.getComponent(d.pzaGameFailView);t&&t.showView(e)})},e.specialFail=function(a,t){void 0===t&&(t=!1),a&&(l.pzaGameState.speFailTips=a);var o=e.getCurrentGame();l.pzaGameState.isGameEnd=!0,l.pzaGameState.gamePause=!0,l.pzaGameState.zombieWinShowUI=!0,k.pzaWorldEventManager.triggerEvent(k.pzaWorldEventType.GAME_PAUSE,null),o.partFail(),e.showGameFail(t)},e.showBattleUI=function(a,t){var o=this;this.removeBattleUI();var n=I.pzaNodeManager.getBattleUINode();if(null!=n){h.pzaCommonMask.showMask(!0);var i=function(){c.pzaBundleObjectPool.requestInstantByUrl(a,!1,function(a,i){if(null==a&&null!=i){o.battleUINode=i,i.setParent(n),h.pzaCommonMask.hideMask(),t&&t(i);var p=l.pzaGameState.curPart,s=l.pzaGameState.curChapter,c=I.pzaNodeManager.getGrassNode().parent,u=c.getChildByName("wall_up").getComponent(r.pzaBowlingBodyWall),d=c.getChildByName("wall_down").getComponent(r.pzaBowlingBodyWall);5==p&&1==s||5==p&&6==s&&e.getCurrentGame().isMainMode()?(m.pzaCollisionManager.getInstance.addZombieOther(u),m.pzaCollisionManager.getInstance.addZombieOther(d)):!l.pzaGameState.isMiniMode()||5!=l.pzaGameState.curPart&&6!=l.pzaGameState.curPart?(m.pzaCollisionManager.getInstance.delZombieOther(u),m.pzaCollisionManager.getInstance.delZombieOther(d)):(m.pzaCollisionManager.getInstance.addZombieOther(u),m.pzaCollisionManager.getInstance.addZombieOther(d))}else console.error(a)})},p=u.pzaPreLoadManager.getSubResources(a);null!=p?c.pzaBundleObjectPool.preLoadSubResource(p,function(){i()}):i()}},e.removeBattleUI=function(){if(null==this.battleUINode)return null;g.pzaGameCommonPool.returnInstant(this.battleUINode),this.battleUINode=null},e.battleUINode=null,e.gameMap=new Map([[l.pzaGameMode.NORMAL,new E.pzaGameNormal],[l.pzaGameMode.BELT,new z.pzaGameBelt],[l.pzaGameMode.KNOCK_ZOMBIE,new P.pzaGameKnock],[l.pzaGameMode.SMALL_ZOMBIE,new S.pzaGameSmall],[l.pzaGameMode.BANG_JAR,new b.pzaGameJar],[l.pzaGameMode.ZOM_BOSS,new y.pzaGameBoss],[l.pzaGameMode.SURVIVAL,new D.pzaGameSurvival],[l.pzaGameMode.SUR_ENDLESS,new _.pzaGameSurEndless],[l.pzaGameMode.ZOMBIE_ENERMY,new T.pzaGameZombieEnemy],[l.pzaGameMode.ZOMBIE_ENDLESS,new A.pzaGameZombieEnemyEndless],[l.pzaGameMode.VASE,new M.pzaGameVase],[l.pzaGameMode.VASE_ENDLESS,new w.pzaGameVaseEndless],[l.pzaGameMode.MINIGAME,new C.pzaGameMiniGame],[l.pzaGameMode.MINIGAME_KNOCK,new B.pzaKnockMiniGame],[l.pzaGameMode.MINIGAME_SMALL,new O.pzaSmallMiniGame],[l.pzaGameMode.KNOCK_ZOMBIE_MINIGAME,new B.pzaKnockMiniGame],[l.pzaGameMode.MINIGAME_SMALL,new O.pzaSmallMiniGame],[l.pzaGameMode.NORMAL_WEEKTWO,new E.pzaGameNormal],[l.pzaGameMode.ART_TEST,new f.pzaGameArtTest]]),e.normalGameModeMap=new Map([["1-10",l.pzaGameMode.BELT],["2-10",l.pzaGameMode.BELT],["3-10",l.pzaGameMode.BELT],["2-5",l.pzaGameMode.KNOCK_ZOMBIE],["3-5",l.pzaGameMode.SMALL_ZOMBIE],["4-5",l.pzaGameMode.BANG_JAR],["5-10",l.pzaGameMode.ZOM_BOSS],["6-10",l.pzaGameMode.BELT],["7-10",l.pzaGameMode.BELT],["8-10",l.pzaGameMode.BELT],["7-5",l.pzaGameMode.KNOCK_ZOMBIE],["8-5",l.pzaGameMode.SMALL_ZOMBIE],["9-5",l.pzaGameMode.BANG_JAR],["10-10",l.pzaGameMode.ZOM_BOSS],["100-1",l.pzaGameMode.BELT]]),e}();t.pzaGameManager=U,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Plant/pzaBowlingWallBody":"pzaBowlingWallBody","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaGameFailView":"pzaGameFailView","../View/pzaCommonMask":"pzaCommonMask","./pzaCollisionManager":"pzaCollisionManager","./pzaGameArtTest":"pzaGameArtTest","./pzaGameBelt":"pzaGameBelt","./pzaGameBoss":"pzaGameBoss","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameConfig":"pzaGameConfig","./pzaGameJar":"pzaGameJar","./pzaGameKnock":"pzaGameKnock","./pzaGameMiniGame":"pzaGameMiniGame","./pzaGameNormal":"pzaGameNormal","./pzaGameSmall":"pzaGameSmall","./pzaGameSurEndless":"pzaGameSurEndless","./pzaGameSurvival":"pzaGameSurvival","./pzaGameVase":"pzaGameVase","./pzaGameVaseEndless":"pzaGameVaseEndless","./pzaGameZombieEnemy":"pzaGameZombieEnemy","./pzaGameZombieEnemyEndless":"pzaGameZombieEnemyEndless","./pzaKnockMiniGame":"pzaKnockMiniGame","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaSmallMiniGame":"pzaSmallMiniGame","./pzaSoundManager":"pzaSoundManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameMiniGame:[function(e,a,t){"use strict";cc._RF.push(a,"8a4a6GFcAlF7bID9Vfm8HRH","pzaGameMiniGame");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameMiniGame=void 0;var i=e("../Battle/Data/pzaDropType"),r=e("../Battle/Data/pzaPlantEnum"),p=e("../Battle/Data/pzaZombieEnum"),l=e("../Battle/pzaEffectManager"),s=e("../Battle/pzaGameState"),c=e("../Load/pzaPreLoadManager"),u=e("../MiniGame/pzaMiniGameConf"),d=e("../View/Battle/pzaPlantBeltView"),h=e("../View/pzaCommonMask"),m=e("../utils/pzaResMgr"),f=e("../utils/pzakc"),z=e("./pzaBeltConfig"),y=e("./pzaGameBase"),g=e("./pzaGameConfig"),v=e("./pzaGameManager"),b=e("./pzaGamePartConfig"),P=e("./pzaLocalData"),C=e("./pzaSoundManager"),E=e("./pzaUIManager"),S=e("./pzaUtil"),_=e("./pzaWorldEventManager"),D=e("../Achieve/pzaAchieveMgr"),M=e("../Achieve/pzaAchieve"),w=e("../View/Battle/pzaGetAchieveView"),T=e("../View/pzaWarningView"),A=e("./pzaStatisticsMgr"),B=e("../Battle/Data/pzaBaseData"),G=e("../Battle/Plant/pzaAttackType"),I=e("../Load/pzaBundleObjectPool"),O=e("../Battle/Zombie/pzaBaseZombie"),N=e("./pzaCollisionManager"),L=e("../View/Battle/pzaPlantSelectView"),R=e("../utils/pzaChannel"),k=e("./pzaTipManager"),U=e("./pzaOperationMgr"),x=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=s.pzaGameMode.MINIGAME,a.confMap=null,a.confArr=[],a.waveZombieDensity=null,a.randomZombies=[],a.createCardTime=0,a}return n(a,e),a.prototype.init=function(){var e=this;if(null!==this.confMap)return this;this.confMap=new Map,m.pzaResMgr.instance().getConf("a14").forEach(function(a){if(null!=a){var t=null;null!=a.density&&(t=a.density.split(",")).forEach(function(e,a){t[a]=parseInt(e)});var o=null;null!=a.zombie&&(o=a.zombie.split(",")).forEach(function(e,a){o[a]=parseInt(e)});var n=null;null!=a.initcards&&(n=a.initcards.split(",")).forEach(function(e,a){n[a]=parseInt(e)});var i=null;null!=a.plant&&((i=a.plant.split(",")).forEach(function(e,a){i[a]=parseInt(e)}),2==i.length?10==i[0]&&11==i[1]&&(i[0]=1e3,i[1]=1001):3==i.length&&10==i[0]&&11==i[1]&&12==i[2]&&(i[0]=1e3,i[1]=1001,i[2]=1002));var r=null;null!=a.plantweight&&(r=a.plantweight.split(",")).forEach(function(e,a){r[a]=parseInt(e)});var p=0,l=0;if(null!=a.fall){var s=a.fall.split(",");p=parseInt(s[0]),l=parseInt(s[1])}var c=0,d=0;if(null!=a.waterend){var h=a.waterend.split(",");null!=h&&(c=parseInt(h[0]),d=parseInt(h[1]))}var m=0;null!=a.waterexit&&(m=parseInt(a.waterexit));var f=0;null!=a.fog&&(f=parseInt(a.fog));var z=new u.pzaMiniGameConf(parseInt(a.id),a.name,parseInt(a.wave),t,o,parseInt(a.multiple),parseInt(a.flowerpot),n,i,r,p,l,parseInt(a.initsun),parseInt(a.bosshp),parseInt(a.tombstone),parseInt(a.tombstonemini),c,d,m,f,a.map,a.isnight);e.confMap.set(a.id+"",z),e.confArr.push(z)}})},a.prototype.getConf=function(e){var a=this.confMap.get(e+"");return null==a?(console.log("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):(s.pzaGameState.miniGameConfig=a,a)},a.prototype.getConfById=function(e){var a=this.confArr[e];if(null!=a)return a;console.error("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u6570\u636e")},a.prototype.initMapPlantZombie=function(e,a){window.pzaMapManager.init(e,a,this.getConf(a).mapId),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.initPartProcess=function(e){e.proLabel.node.active=!1;var t=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,a).getConf(s.pzaGameState.curPart);e.maxWave=t.maxWave;for(var o=Math.floor(e.maxWave/10),n=0;n<e.partFlags.length;n++){var i=e.partFlags[n];n+1>o?i.active=!1:(i.active=!0,i.setPosition(-315*(n+1)/o-30,42))}e.zombieHeadNode.setPosition(-15,37),e.partProNode.active=!1,e.partProgress.fillRange=0,e.partLabel.string=this.getConf(s.pzaGameState.curPart).name},a.prototype.updatePartProcess=function(a){e.prototype.updatePartProcess.call(this,a);var t=Math.floor(window.pzazombieManager.wave/10)-1;if(!(t<0||t>3)){var o=a.partFlags[t];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart||16==s.pzaGameState.curPart,a.skipPartBtn.active=!1,a.freePlantNode.active=!0,a.speedBtn.active=!0,5==s.pzaGameState.curPart||6==s.pzaGameState.curPart||7==s.pzaGameState.curPart?a.shovelShowNode.active=!1:a.shovelShowNode.active=!0},a.prototype.refreshNextWave=function(t,o){if(3!=s.pzaGameState.curPart&&4!=s.pzaGameState.curPart){e.prototype.refreshNextWave.call(this,t,o);var n=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,a);if(null!=n&&(13!=s.pzaGameState.curPart||s.pzaGameState.gameWin||(this.createCardTime-=o,this.createCardTime<=0&&this.createPlantCard()),!t.lastWave)){var i=!1;if(n.getConf(s.pzaGameState.curPart).maxWave==t.wave+1&&(i=!0),(t.wave+1)%10==0||i){if(!t.hasShowRedTip)return void((t.zombieMap.size<=0||t.curWaveTime>=b.pzaWaveConfig.activeRedTipTime)&&t.showBigWaveTip(i,!1))}else if(0!=t.wave&&t.nextWaveTime>b.pzaWaveConfig.preRefreshTime)if(10==s.pzaGameState.curPart){if(t.zombieMap.size<=0)return void(t.nextWaveTime=1)}else if(t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=b.pzaWaveConfig.preRefreshTime);t.curWaveTime<b.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||this.createWave(t)}}},a.prototype.createWave=function(t){e.prototype.createWave.call(this,t),5==s.pzaGameState.curPart||6==s.pzaGameState.curPart||s.pzaGameState.curPart>=9?t.nextWaveTime=b.pzaWaveConfig.getWaveRandomTime():t.nextWaveTime=S.pzaUtil.getRandomFloatNum(8,10);var o=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,a);if(null!=o){var n=o.getConf(s.pzaGameState.curPart);if(!(null==n||n.maxWave<t.wave)){n.maxWave==t.wave&&(t.lastWave=!0);var i=o.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,s.pzaGameState.redLeft);if(null==i&&!(s.pzaGameState.curPart>=9))return t.nextWaveTime=0,void(t.curWaveTime=6);if(9!=s.pzaGameState.curPart){var r=[];window.pzaMapManager.IceGroundSet.forEach(function(e){null==e||e.xIndex<0||e.yIndex<0||r.indexOf(e.yIndex)>=0||r.push(e.yIndex)});var l=s.pzaGameState.map.getMapRow(),c=!0,d=[],h=[];for(z=0;z<l;z++)h.push(z);h.sort(function(){return Math.random()-.5});var m=0;i.forEach(function(e){var a=u.pzaMiniGameConf.getRandomWayIndex(m,e,h,t.wave);if(m++,e==p.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,d);if(null==o)return;d.push(o);var n=o.split("-"),i=t.createFixBlockZombieData(e,parseInt(n[0]),parseInt(n[1]));return t.createZombie(i),void t.curWaveZombieDatas.add(i)}e==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&r.length>0&&(a=r.shift());var l=t.createZombieData(e,a);!c&&l.logicPos&&(l.logicPos.x+=S.pzaUtil.getRandomFloatNum(.2,1)*s.pzaGameState.map.getBlockWidth()),t.createZombie(l),t.curWaveZombieDatas.add(l),c=!1}),t.lastWave&&(this.createTombWaterWaveData(t),t.lastWayZombieTime=2)}else if(10!=t.wave&&t.createBungeePutZombie([7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5,6,5,5,5,5,5,5,5,5,5][t.wave-1]-1,i),t.wave%10==0)for(var f=[],z=0;z<5;z++){var y=window.pzaplantManager.getRandomBlock(!0,f);if(null==y)return;f.push(y);var g=y.split("-"),P=t.createFixBlockZombieData(p.pzaZombieEnum.BUNGEE_ZOMBIE,parseInt(g[0]),parseInt(g[1]));t.createZombie(P),t.curWaveZombieDatas.add(P)}}}},a.prototype.createTombWaterWaveData=function(e){var a=b.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart);if(null!=a){var t=[],o=[],n=[];if(window.pzaMapManager.TombMap.forEach(function(o){if(null!=o&&null!=o.xIndex&&null!=o.yIndex&&!window.pzaplantManager.hasPlant(o.xIndex,o.yIndex)){var n=a.getRandomTombZombie(),i=e.createFixBlockZombieData(n,o.xIndex,o.yIndex);e.curWaveZombieDatas.add(i),t.push(i)}}),window.pzazombieManager.lastZombieDataMap.set(0,t),a.lastWaterWaveZombie>0){for(var i=[],r=a.lastWaterWaveMinColumn-1;r<9;r++)i.push([r,2]),i.push([r,3]);i.sort(function(){return Math.random()-.5});for(var p=0;p<a.lastWaterWaveZombie;p++)if(null!=(u=i[p])){var l=a.getRandomDiveZombie(),c=e.createFixBlockZombieData(l,u[0],u[1]);e.curWaveZombieDatas.add(c),o.push(c)}}if(window.pzazombieManager.lastZombieDataMap.set(1,o),a.lastBungeeZombie>0){for(i=[],r=a.lastBungeeMinColumn-1;r<9;r++)i.push([r,0]),i.push([r,1]),i.push([r,2]),i.push([r,3]),i.push([r,4]);for(i.sort(function(){return Math.random()-.5}),p=0;p<a.lastBungeeZombie;p++){var u;if(null!=(u=i[p])){var d=a.getRandomTombZombie();c=window.pzazombieManager.createFixBlockZombieData(d,u[0],u[1]),e.zombieDatas[u[1]].delete(c),e.curWaveZombieDatas.add(c),n.push(c)}}window.pzazombieManager.lastZombieDataMap.set(2,n)}}},a.prototype.lastTombWaterZombie=function(e){window.pzazombieManager.lastZombieDataMap.forEach(function(a,t){for(var o=0;o<a.length;o++){var n=a[o];0==t?e.createZombie(n,!1,!0):1==t?e.createZombie(n,!1,!1,!0):2==t&&l.pzaEffectManager.createBungeeZombieEffect(n)}})},a.prototype.isLastWave=function(e){var t=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,a).getConf(s.pzaGameState.curPart);return e.wave==t.maxWave},a.prototype.checkAllZombieDeath=function(e){if(3==s.pzaGameState.curPart||4==s.pzaGameState.curPart)return!1;var a=0;return e.zombieDatas.forEach(function(e){a+=e.size}),!(a>0)},a.prototype.onZombieDeath=function(e,a,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=null),t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)&&!s.pzaGameState.starModeGameOver){if(!s.pzaGameState.partWin&&14==s.pzaGameState.curPart)return s.pzaGameState.starWaveOverFail=!0,v.pzaGameManager.getCurrentGame().partFail(),void v.pzaGameManager.showGameFail();o==G.pzaAttackType.CLEAN_CAR&&D.default.instance().checkAddAchieve(M.pzaAchieveType.ACH_13),v.pzaGameManager.passPart(a.logicPos)}},a.prototype.createPreviewZombie=function(e,t,o){if(3!==o&&4!=o){var n=1==o?S.pzaUtil.getRandomNum(6,7):S.pzaUtil.getRandomNum(8,9),i=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,a);if(null!=i){var r=i.getPreviewZombies(n);if(null!=r){var l=this.getPreviewRandomPosList();l.sort(function(){return Math.random()-.5});for(var u=function(a,t){var o=c.pzaPreLoadManager.getZombieUrl(a);I.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,n){if(null==o&&null!=n){n.setParent(e.previewZombieNode),n.setPosition(t),n.zIndex=-t.y;var i=n.getComponent(O.pzaBaseZombie),r=new B.pzaBaseData(null,a);r.hp=1,r.logicPos=t,i&&i.preview(r,e.previewShadowNode,1),e.PreviewZombies.add(i)}else console.error(o)})},d=0;d<r.length;d++){var h=r[d],m=l[d];h==p.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),h==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&1==s.pzaGameState.mapId&&(m.x=1420),u(h,m)}if(9==s.pzaGameState.curPart){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(d=0;d<3;d++)m=f[d],u(p.pzaZombieEnum.BUNGEE_ZOMBIE,m)}13!=o&&(3==o?C.pzaSoundManager.playBgm(C.pzaBGMName.LOADING):C.pzaSoundManager.playBgm(C.pzaBGMName.PRE_BGM))}}}else 3==o&&C.pzaSoundManager.stopBgm()},a.prototype.showPreviewTip=function(e){e.word.string=this.getConf(s.pzaGameState.curPart).name,e.flagWord.node.active=!1},a.prototype.getAllZombies=function(e){var a=[];return this.confMap.get(e+"").zombieTypes.forEach(function(e){a.indexOf(e)<0&&a.push(e)}),a},a.prototype.getBeltPlantArr=function(e){var a=[];return this.confMap.get(e+"").plantCardsId.forEach(function(e){a.indexOf(e)<0&&a.push(e)}),a},a.prototype.getBeltPlantWeightArr=function(e){var a=[];return this.confMap.get(e+"").plantCardsWeight.forEach(function(e){a.push(e)}),a},a.prototype.getAllPlantArr=function(e){var a=[],t=this.confMap.get(e+"");return t.initialCards.forEach(function(e){a.indexOf(e)<0&&a.push(e)}),t.plantCardsId.forEach(function(e){a.indexOf(e)<0&&a.push(e)}),a},a.prototype.getInitPlantArr=function(e){var a=[];return this.confMap.get(e+"").initialCards.forEach(function(e){a.push(e)}),a},a.prototype.getPreviewZombies=function(e){var a=[],t=this.getAllZombies(s.pzaGameState.curPart);if(null==t||t.length<=1){for(var o=0;o<e;o++)a.push(p.pzaZombieEnum.ZOMBIE);return a}for(o=0;o<t.length;o++)a.push(t[o]);if(a.length>=e)return a;var n=[],i=[];t.forEach(function(e){if(null!=e&&e!=p.pzaZombieEnum.BUNGEE_ZOMBIE&&null!=e&&e!=p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM){var a=g.pzaGameConfig.getZombieConfig(e);null!=a&&0!=a.refrshWeight&&(12==s.pzaGameState.curPart&&e==p.pzaZombieEnum.ZOMBIE&&(a.refrshWeight=200),n.push(e),i.push(a.refrshWeight))}});var r=a.length;for(o=0;o<e-r;o++){var l=S.pzaUtil.getRandomIndexByWeight(i);a.push(n[l])}return a},a.prototype.getRandomWaveZombie=function(e,a,t,o,n){var i=this;if(void 0===o&&(o=0),void 0===n&&(n=0),this.randomZombies=[],this.waveZombieDensity=this.getConf(s.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||e-1<0)return[p.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[e-1];if(0==r)return null;if(null==r||r<=1)return 15==s.pzaGameState.curPart||16==s.pzaGameState.curPart?[p.pzaZombieEnum.NormalPeaZombie]:[p.pzaZombieEnum.ZOMBIE];var l=this.getConf(s.pzaGameState.curPart),c=l.maxWave,u=l.zombieTypes;if(r=this.fixedZombie(r,e),e==c&&u.forEach(function(e){e!=p.pzaZombieEnum.ZOMBIE&&(i.randomZombies.push(e),r-=g.pzaGameConfig.getZombieLevel(e))}),e%10==0)for(var d=Math.min(Math.floor(r/2),8),h=0;h<d&&15!=s.pzaGameState.curPart&&16!=s.pzaGameState.curPart;h++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(;r>0;){var m=this.getRandomZombie(r,e,t,o,n);if(null==m)break;if(m==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?t--:m==p.pzaZombieEnum.RED_GARGANTUAR&&e%10!=0&&n--,this.randomZombies.push(m),this.randomZombies.length>=50)break;r-=g.pzaGameConfig.getZombieLevel(m)}return this.randomZombies},a.prototype.fixedZombie=function(e,a){if((16==a||26==a)&&1==s.pzaGameState.curPart)for(var t=0;t<10;t++)this.randomZombies.push(p.pzaZombieEnum.LADDER_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.LADDER_ZOMBIE);if((19==a||29==a)&&1==s.pzaGameState.curPart)for(t=0;t<10;t++)this.randomZombies.push(p.pzaZombieEnum.JACK_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.JACK_ZOMBIE);if(10==a&&1==s.pzaGameState.curPart){for(t=0;t<4;t++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)}if(20==a&&1==s.pzaGameState.curPart){for(t=0;t<7;t++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),t=0;t<3;t++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if(30==a&&1==s.pzaGameState.curPart){for(t=0;t<8;t++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),t=0;t<5;t++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if((16==a||26==a)&&2==s.pzaGameState.curPart)for(t=0;t<10;t++)this.randomZombies.push(p.pzaZombieEnum.DIGGER_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.DIGGER_ZOMBIE);if((19==a||29==a)&&2==s.pzaGameState.curPart)for(t=0;t<10;t++)this.randomZombies.push(p.pzaZombieEnum.POGO_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.POGO_ZOMBIE);if(10==a&&2==s.pzaGameState.curPart){for(t=0;t<4;t++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)}if(20==a&&2==s.pzaGameState.curPart){for(t=0;t<7;t++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),t=0;t<3;t++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if(30==a&&2==s.pzaGameState.curPart){for(t=0;t<8;t++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),t=0;t<5;t++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}return a%10==0&&s.pzaGameState.curPart>=10&&15!=s.pzaGameState.curPart&&16!=s.pzaGameState.curPart&&(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),e-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)),e},a.prototype.getRandomTombZombie=function(){return[p.pzaZombieEnum.ZOMBIE,p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,p.pzaZombieEnum.CONE_HEAD_ZOMBIE][Math.floor(3*Math.random())]},a.prototype.getRandomDiveZombie=function(){var e=[p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE];e.push(p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE);var a=[];return e.forEach(function(e){var t=g.pzaGameConfig.getZombieConfig(e);a.push(t.refrshWeight)}),e[S.pzaUtil.getRandomIndexByWeight(a)]},a.prototype.getRandomZombie=function(e,a,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[],l=this.getConf(s.pzaGameState.curPart).zombieTypes,c=1;if(a>=5&&a<10&&(c=2),a>=10&&a<15?c=3:a>=15&&(c=4),l.forEach(function(t){if(null!=t){var l=g.pzaGameConfig.getZombieConfig(t);if(12==s.pzaGameState.curPart&&l&&(l.refrshMinWave=1),10==s.pzaGameState.curPart){if(t==p.pzaZombieEnum.ZOMBONI&&l&&(l.refrshMinWave=1),a%10!=0&&(t==p.pzaZombieEnum.ZOMBIE||t==p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE))return;if(t==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM)return}15==s.pzaGameState.curPart&&(l.refrshMinWave=1),null==l||0==l.refrshWeight||l.refreshLevel>e||l.refrshMinWave>c||o>0&&t==p.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&a%10!=0||(12!=s.pzaGameState.curPart&&10!=s.pzaGameState.curPart||t!=p.pzaZombieEnum.ZOMBIE)&&(1!=s.pzaGameState.curPart||t!=p.pzaZombieEnum.JACK_ZOMBIE&&t!=p.pzaZombieEnum.LADDER_ZOMBIE&&t!=p.pzaZombieEnum.GARGANTUAR)&&(2!=s.pzaGameState.curPart||t!=p.pzaZombieEnum.DIGGER_ZOMBIE&&t!=p.pzaZombieEnum.POGO_ZOMBIE&&t!=p.pzaZombieEnum.GARGANTUAR)&&(i.push(t),o>0||r.push(l.refrshWeight))}}),t>0){var u=g.pzaGameConfig.getZombieConfig(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=u&&u.refreshLevel<=e&&(i.push(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(u.refrshWeight))}var d=S.pzaUtil.getRandomIndexByWeight(r);return i[d]},a.prototype.showBattlePropButtons=function(e){e.freeSunNode.active=4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart||16==s.pzaGameState.curPart,R.pzaChannel.isConfRemote?e.cherryBombNode.active=!0:e.cherryBombNode.active=3!=s.pzaGameState.curPart&&4!=s.pzaGameState.curPart,e.autoPickNode.active=!0,e.clearCDNode.active=!1},a.prototype.clickSelectPartInFailView=function(){E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.PUZZLE_VIEW,function(){E.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.getAdPlantArr=function(){return 1==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.COB_CANNON]:2==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.SPIKEROCK]:3==s.pzaGameState.curPart?[r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.JALAPENO,r.pzaPlantEnum.ICE_SHROOM]:4==s.pzaGameState.curPart?[r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.JALAPENO,r.pzaPlantEnum.ICE_SHROOM]:5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?[r.pzaPlantEnum.BOOM_NUT_BOWLING,r.pzaPlantEnum.TALL_NUT_BOWLING]:9==s.pzaGameState.curPart?[r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.COB_CANNON]:13==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.CATTAIL,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON]:14==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.SPIKEROCK]:15==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON]:16==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.CATTAIL]:void 0},a.prototype.getGameModeName=function(){return"\u8ff7\u4f60\u6e38\u620f-"},a.prototype.getZombieTypeArr=function(e,a){return this.getAllZombies(a)},a.prototype.getPlantArr=function(e,a){return this.getAllPlantArr(a)},a.prototype.isAutoCreateSun=function(){return 4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart||16==s.pzaGameState.curPart},a.prototype.beforeLoad=function(){s.pzaGameState.partStar=0,this.init()},a.prototype.readData=function(){},a.prototype.winDrop=function(){P.pzaLocalData.rfRecordPassPart();var e=i.pzaDropType.COIN_PACKAGE;return!P.pzaLocalData.passMiniGame(s.pzaGameState.curPart-1)&&(e=i.pzaDropType.MINIGAME_TROPHY),P.pzaLocalData.data.miniFirstPassArr[s.pzaGameState.curPart-1]||(P.pzaLocalData.data.miniFirstPassArr[s.pzaGameState.curPart-1]=1),P.pzaLocalData.addDirty("miniFirstPassArr"),"my"===R.pzaChannel.instance().channel&&R.pzaChannel.instance().getChannel().actSubmit(),e},a.prototype.showPassUiNoStar=function(){E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.PUZZLE_VIEW,function(){E.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,function(){U.pzaOperationMgr.showCreativeVaseModeGift(null)})})},a.prototype.beforeGameStart=function(){h.pzaCommonMask.showMask(),l.pzaEffectManager.createGroveEffect()},a.prototype.gameStart=function(a,t){P.pzaLocalData.gameStartTimeStamp=Date.now();var o=400+t;A.pzaStatisticsMgr.sendLevelEvent(this.getConf(s.pzaGameState.curPart).id,A.pzaEventLevelType.start,0,0,s.pzaGameMode.MINIGAME),f.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(a,t),this.normalStartGameCall(a,t),e.prototype.resetTryPlant.call(this)},a.prototype.loadAndStart=function(e,a){var t=this;this.preLoad(e,a,function(){t.gameStart(e,a)})},a.prototype.preLoad=function(e,a,t){this.init();var o=0,n=this.getConf(a);4==a&&(o=n.initSun),s.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),o,n.isnight,n.mapId),this.beforeLoad(e,a),s.pzaGameState.isGameEnd=!1,N.pzaCollisionManager.getInstance.setOn();var i=this.getResArr(e,a);E.pzaUIManager.showLoading(),this.initMapPlantZombie(e,a),C.pzaSoundManager.clearAllLoopAudio(),this.readData(e,a),I.pzaBundleObjectPool.preLoadSubResource(i,function(){E.pzaUIManager.hideLoading(t)},function(e){E.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*e)))}),s.pzaGameState.autoPickLock=!1},a.prototype.playGameBgm=function(){13!=s.pzaGameState.curPart&&(5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?C.pzaSoundManager.playBgm(C.pzaBGMName.BOWLING_BGM):C.pzaSoundManager.playBgm(C.pzaBGMName.BELT_BGM))},a.prototype.normalStartGameCall=function(e,a){var t=this;5==e&&this.initFlowerPot(a),14==a&&this.initStarFruitShadow(),3!=a&&13!=a&&C.pzaSoundManager.playBgm(C.pzaBGMName.PRE_BGM),3==a?this.createDrZomBoss(a):4==a?this.createDrZomBossNormal(a):10==a||11==a||12==a||14==a||15==a||16==a?this.createPlantSelectNormal(a):13==a?(l.pzaEffectManager.createRainNightEffect(),C.pzaSoundManager.playBgm(C.pzaBGMName.CHAPTER_4),C.pzaSoundManager.playLoopAudio("rain",!0),this.createChapterFour(a)):window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_BELT_VIEW,function(e){var o=e&&e.getComponent(d.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?(window.pzazombieManager.nextWaveTime=2,window.pzaMapManager.showRedLine(3)):9==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=2:12==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=55:window.pzazombieManager.nextWaveTime=25,z.pzaBeltConfig.initMiniPlants(a),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),t.playGameBgm()})})})})},!0)},a.prototype.createDrZomBoss=function(e){var a=this.getConf(e).bossHp;window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var o=t&&t.getComponent(d.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),window.pzazombieManager.createDrZomBoss(function(){l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,z.pzaBeltConfig.initMiniPlants(e),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),C.pzaSoundManager.playBgm(C.pzaBGMName.ZOMBIEBOSS_BGM)})},a)})})})},!0)},a.prototype.createDrZomBossNormal=function(e){var a=this.getConf(e).bossHp;window.pzaMapManager.previewMap(function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){h.pzaCommonMask.hideMask();var t=e&&e.getComponent(L.pzaPlantSelectView);t&&t.miniGameInit(null,function(){h.pzaCommonMask.showMask(),t&&t.initPlant();window.pzaMapManager.cancelPreviewMap(0,function(){var e=R.pzaChannel.instance().getChannel();null!=e.ctrl&&e.ctrl.p1,window.pzazombieManager.createDrZomBoss(function(){l.pzaEffectManager.createReadyWord(function(){t&&t.initPlant(),h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzaMapManager.battleDownView.showSunUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),C.pzaSoundManager.playBgm(C.pzaBGMName.ZOMBIEBOSS_BGM)})},a)})})})},!0)},a.prototype.createPlantSelectNormal=function(e){var a=this;window.pzaMapManager.previewMap(function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(t){h.pzaCommonMask.hideMask();var o=t&&t.getComponent(L.pzaPlantSelectView);o&&o.miniGameInit(null,function(){h.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),o&&o.initPlant(),window.pzaMapManager.cancelPreviewMap(0,function(){l.pzaEffectManager.createReadyWord(function(){o&&o.initPlant(),a.playBgm(),h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzaMapManager.battleDownView.showSunUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),S.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),10==e&&a.createIceGround(),12==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=55:10==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=45:window.pzazombieManager.nextWaveTime=18,14==e&&k.pzaTipManager.showGameTip("\u7528\u5c0f\u661f\u661f\u585e\u6ee1\u8fd9\u4e2a\u88ab\u56f4\u51fa\u7684\u7a7a\u95f4\u5427!")})})})})},!0)},a.prototype.createChapterFour=function(){var e=this;window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=25,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),e.playGameBgm(),e.createCardTime=10})})})},!0)},a.prototype.initFlowerPot=function(e){var a=this.getConf(e);if(!(null==a||a.flowerPotColumn<=0))for(var t=s.pzaGameState.map.getMapRow(),o=0;o<a.flowerPotColumn;o++)for(var n=0;n<t;n++)window.pzaplantManager.createPlant(r.pzaPlantEnum.FLOWER_POT,o,n,!0)},a.prototype.initStarFruitShadow=function(){for(var e=[[3,0],[6,0],[3,1],[4,1],[5,1],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[3,3],[4,3],[3,4]],a=0;a<e.length;a++)window.pzaplantManager.createStarFruitShadow(e[a][0],e[a][1])},a.prototype.createIceGround=function(){for(var e=[0,1,2,3,4],a=0;a<e.length;a++){var t=.1*s.pzaGameState.map.getYInterval(1),o=s.pzaGameState.map.getBlockLogicPos(4,e[a],50,t),n=e[a];l.pzaEffectManager.createIceGroundStart(o.x,o.y,4,n)}},a.prototype.gameRecover=function(e,a){var t=this;E.pzaUIManager.removeBoardUI(),s.pzaGameState.midOut=!1,E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(T.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){s.pzaGameState.gamePause=!1,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),S.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),s.pzaGameState.curPart>=5&&s.pzaGameState.curPart<=8?C.pzaSoundManager.playBgm(C.pzaBGMName.BOWLING_BGM):s.pzaGameState.curPart>=10?t.playBgm():C.pzaSoundManager.playBgm(C.pzaBGMName.BELT_BGM),C.pzaSoundManager.clearAllLoopAudio(),13==a&&(C.pzaSoundManager.playBgm(C.pzaBGMName.CHAPTER_4),C.pzaSoundManager.playLoopAudio("rain",!0))},function(){v.pzaGameManager.removeBattleUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),t.firstStart(e,a)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,P.pzaLocalData.normalPowerCost,!0,2)})},a.prototype.createPlantCard=function(){for(var e=[],a=r.pzaPlantEnum.PEA_SHOOTER;a<=r.pzaPlantEnum.MELON_PULT;a++)e.push(a);var t=[r.pzaPlantEnum.GRAVE_BUSTER,r.pzaPlantEnum.FLOWER_POT,r.pzaPlantEnum.COFFEE_BEAN,r.pzaPlantEnum.SUN_FLOWER,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.SUN_SHROOM,r.pzaPlantEnum.IMITATER,r.pzaPlantEnum.UMBRELLA_LEAF];e=e.filter(function(e){return!t.includes(e)});var o=S.pzaUtil.getRandomValueFromArray(e),n=0;window.pzaplantManager.plantEnvDataMap.forEach(function(e){e.plantData.plantType==r.pzaPlantEnum.LILY_PAD&&n++});var i=30-29*(n=n>=18?18:n)/18,p=!1;100*Math.random()<i&&(p=!0),p&&(o=r.pzaPlantEnum.LILY_PAD),l.pzaEffectManager.createAutoCard(o),this.createCardTime=S.pzaUtil.getRandomFloatNum(5,9.9)},a.prototype.partFail=function(){var a=0;P.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-P.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=400+s.pzaGameState.curPart;A.pzaStatisticsMgr.sendLevelEvent(this.getConf(s.pzaGameState.curPart).id,A.pzaEventLevelType.failed,a,t,s.pzaGameMode.MINIGAME),f.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),P.pzaLocalData.hasUseProp=!1,e.prototype.partFail.call(this)},a.prototype.partWin=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=null);var t=0;P.pzaLocalData.hasUseProp&&(t=1);var o=Date.now()-P.pzaLocalData.gameStartTimeStamp;o=Math.ceil(o/1e3);var n=400+s.pzaGameState.curPart;A.pzaStatisticsMgr.sendLevelEvent(this.getConf(s.pzaGameState.curPart).id,A.pzaEventLevelType.completed,t,o,s.pzaGameMode.MINIGAME),f.default.eventReport(n+"\u5173\u5361\u6210\u529f"),P.pzaLocalData.hasUseProp=!1,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),v.pzaGameManager.removeBattleUI();var i=function(){E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.GameWinNoStarView,null)};null!=s.pzaGameState.achieveArr&&s.pzaGameState.achieveArr.length>0?E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.GET_ACHIEVE_VIEW,function(e){var a=e&&e.getComponent(w.pzaGetAchieveView);a&&a.init(s.pzaGameState.achieveArr,i)}):i()},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u7279\u6b8a\u4efb\u52a1\u201d\uff0c"+this.getConf(s.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a}(y.pzaGameBase);t.pzaGameMiniGame=x,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniGame/pzaMiniGameConf":"pzaMiniGameConf","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaBeltConfig":"pzaBeltConfig","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBase":"pzaGameBase","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameNormal:[function(e,a,t){"use strict";cc._RF.push(a,"0e86aspu6xM+p2NF6QIxdIG","pzaGameNormal");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameNormal=void 0;var r=e("../Achieve/pzaAchieve"),p=e("../Achieve/pzaAchieveMgr"),l=e("../Battle/Data/pzaDropType"),s=e("../Battle/Data/pzaGuideType"),c=e("../Battle/Data/pzaPlantEnum"),u=e("../Battle/Data/pzaZombieEnum"),d=e("../Battle/Plant/pzaAttackType"),h=e("../Battle/pzaEffectManager"),m=e("../Battle/pzaGameState"),f=e("../Load/pzaPreLoadManager"),z=e("../View/Battle/pzaAssessView"),y=e("../View/Battle/pzaBattleDownView"),g=e("../View/Battle/pzaPlantBeltView"),v=e("../View/Battle/pzaPlantSelectView"),b=e("../View/pzaCommonMask"),P=e("../View/pzaSpecialTipsView"),C=e("../utils/pzaChannel"),E=e("../utils/pzaChannelTT"),S=e("../utils/pzakc"),_=e("./pzaGameBase"),D=e("./pzaGameConfig"),M=e("./pzaGameManager"),w=e("./pzaGamePartConfig"),T=e("./pzaLocalData"),A=e("./pzaRankMgr"),B=e("./pzaSoundManager"),G=e("./pzaStatisticsMgr"),I=e("./pzaTipManager"),O=e("./pzaUIManager"),N=e("./pzaUtil"),L=e("./pzaWorldEventManager"),R=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=m.pzaGameMode.NORMAL,a.startGameCall=null,a.guideMap=new Map([[s.pzaGuideType.GUIDE_PLANT_1_1,a.guidePlant11.bind(a)],[s.pzaGuideType.GUIDE_PROP_1_2,a.guidePlant12.bind(a)],[s.pzaGuideType.GUIDE_1_3,a.guidePlant13.bind(a)],[s.pzaGuideType.FORCE_GUIDE_1_4,a.forceGuide.bind(a)],[s.pzaGuideType.GUIDE_SHOVEL_1_5,a.guidePlant15.bind(a)],[s.pzaGuideType.FORCE_GUIDE_2_4,a.forceGuide.bind(a)],[s.pzaGuideType.FORCE_GUIDE_4_2,a.forceGuide.bind(a)],[s.pzaGuideType.GUIDE_BELT_MODE,a.guideBletMode.bind(a)],[s.pzaGuideType.GUIDE_NINGHT_4_10,a.guide_night_4_10.bind(a)],[s.pzaGuideType.FORCE_GUIDE_5_1,a.forceGuide.bind(a)],[s.pzaGuideType.GUIDE_5_5,a.guide_night_4_10.bind(a)],[s.pzaGuideType.GUIDE_NINGHT_2_1,a.guide_night_2_1.bind(a)],[s.pzaGuideType.GUIDE_TRACK_2_3,a.guide_track_2_3.bind(a)],[s.pzaGuideType.GUIDE_CARD_SLOT_2_2,a.guide_night_2_1.bind(a)],[s.pzaGuideType.GUIDE_CARD_SLOT_2_4,a.guide_night_2_1.bind(a)],[s.pzaGuideType.GUIDE_CARD_SLOT_2_6,a.guide_night_2_1.bind(a)],[s.pzaGuideType.GUIDE_POOL_3_1,a.guide_night_2_1.bind(a)],[s.pzaGuideType.GUIDE_4_1,a.guide_night_2_1.bind(a)],[s.pzaGuideType.GUIDE_5_2,a.guidet_5_1.bind(a)],[s.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5,a.guidePlant25.bind(a)],[s.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5,a.guidePlant35.bind(a)],[s.pzaGuideType.GUIDE_BANG_JAR_4_5,a.guidePlant45.bind(a)],[s.pzaGuideType.GUIDE_BOSS_5_10,a.guidePlant510.bind(a)],[s.pzaGuideType.GUIDE_6_1,a.guide6_1.bind(a)],[s.pzaGuideType.GUIDE_6_5,a.guidePlant65.bind(a)],[s.pzaGuideType.GUIDE_10_5,a.guide_night_4_10.bind(a)]]),a}return n(a,e),a.prototype.isMainMode=function(){return!0},a.prototype.initMapPlantZombie=function(e,a){if(4==e&&5==a||9==e&&5==a)return window.pzaMapManager.init(e,a,2),window.pzaplantManager.init(),void window.pzazombieManager.init();var t=w.pzaGamePartConfig.getPartConfig(e,a);window.pzaMapManager.init(e,a,t.mapId),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.initGameState=function(e,a){var t=0;if(4==e&&5==a||9==e&&5==a)return m.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),t,1,2),void this.initMapPlantZombie(e,a);var o=w.pzaGamePartConfig.getPartConfig(e,a);if(o){t=o.initSun;var n=o.isnight;m.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),t,n,o.mapId),this.initMapPlantZombie(e,a),m.pzaGameState.autoPickLock=!1}},a.prototype.getPlantArr=function(e,a){var t=w.pzaGamePartConfig.getPartDefaultPlant(e,a);return null==t&&(t=T.pzaLocalData.data.ownPlants),t},a.prototype.getZombieTypeArr=function(e,a){var t=w.pzaGamePartConfig.getPartConfig(e,a);return t&&t.zombieTypes},a.prototype.skipPartStar=function(){return!1},a.prototype.winDrop=function(){T.pzaLocalData.rfRecordPassPart();var e=l.pzaDropType.COIN_PACKAGE;return T.pzaLocalData.passPart(m.pzaGameState.curChapter,m.pzaGameState.curPart,m.pzaGameState.partStar)&&(5==m.pzaGameState.curChapter&&10==m.pzaGameState.curPart&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_1),e=D.pzaGameConfig.getPartDrop(m.pzaGameState.curChapter,m.pzaGameState.curPart),3==m.pzaGameState.curChapter&&4==m.pzaGameState.curPart?(T.pzaLocalData.data.curGuideType=s.pzaGuideType.GUIDE_SHOP_3_4,T.pzaLocalData.data.unlockShop=!0,T.pzaLocalData.addDirty("curGuideType","unlockShop")):4==m.pzaGameState.curChapter&&4==m.pzaGameState.curPart?(T.pzaLocalData.data.curGuideType=s.pzaGuideType.GUIDE_SHOP_4_4,T.pzaLocalData.addDirty("curGuideType")):5==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart?(T.pzaLocalData.data.curGuideType=s.pzaGuideType.GUIDE_SHOP_5_1,T.pzaLocalData.addDirty("curGuideType")):2==m.pzaGameState.curChapter&&4==m.pzaGameState.curPart?(T.pzaLocalData.data.curGuideType=s.pzaGuideType.GUIDE_GARDEN_5_4,T.pzaLocalData.data.unlockGarden=!0,T.pzaLocalData.addDirty("curGuideType","unlockGarden")):1==m.pzaGameState.curChapter&&9==m.pzaGameState.curPart&&(T.pzaLocalData.data.curGuideType=s.pzaGuideType.RIDER_BELTEQUIP_GUIDE)),5==m.pzaGameState.curChapter&&10==m.pzaGameState.curPart&&(T.pzaLocalData.data.passLastPartCnt++,T.pzaLocalData.addDirty("passLastPartCnt"),T.pzaLocalData.data.passLastPartCnt>1&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_24)),m.pzaGameState.isTryMode(m.pzaGameState.curChapter,m.pzaGameState.curPart)&&(e=l.pzaDropType.TRY_TROPHY),e},a.prototype.partFail=function(){e.prototype.partFail.call(this),S.default.eventReport(m.pzaGameState.curChapter+"-"+m.pzaGameState.curPart+"\u5931\u8d25");var a=0;T.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-T.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=10*(m.pzaGameState.curChapter-1)+m.pzaGameState.curPart;G.pzaStatisticsMgr.sendLevelEvent(o,G.pzaEventLevelType.failed,a,t,m.pzaGameMode.NORMAL),S.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),T.pzaLocalData.hasUseProp=!1},a.prototype.beforeLoad=function(e,a){m.pzaGameState.sunLightCount=w.pzaWaveConfig.initSunCount,m.pzaGameState.map=4!=e&&9!=e||5!=a?D.pzaGameConfig.chapterMapConfig.get(e):D.pzaGameConfig.chapterMapConfig.get(2),m.pzaGameState.gameTimeType=2==e||4==e||7==e||9==e||(5==e||10==e)&&10==a?m.pzaGameTimeType.NIGHT:m.pzaGameTimeType.DAY,m.pzaGameState.newZombie=null;var t=w.pzaGamePartConfig.getPartConfig(e,a);null==t||null==t.newZombieType||T.pzaLocalData.hasUnlockZombie(t.newZombieType)||(m.pzaGameState.newZombie=t.newZombieType),0==m.pzaGameState.isTryMode(e,a)&&(m.pzaGameState.partStar=D.pzaGameConfig.getPartStar(e,a))},a.prototype.gameStart=function(a,t){e.prototype.resetTryPlant.call(this),T.pzaLocalData.gameStartTimeStamp=Date.now();var o=10*(m.pzaGameState.curChapter-1)+m.pzaGameState.curPart;G.pzaStatisticsMgr.sendLevelEvent(o,G.pzaEventLevelType.start,0,0,m.pzaGameMode.NORMAL),S.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(a,t),4!=a&&9!=a||10!=t||(h.pzaEffectManager.createRainNightEffect(),B.pzaSoundManager.playBgm(B.pzaBGMName.RAIN_BGM)),this.startGameCall=null;var n=this;if(window.pzaGuideManager.guideStart(function(){n.normalStartGameCall(a,t,!0)}),null!==window.pzaGuideManager.guideType){var i=this.guideMap.get(window.pzaGuideManager.guideType);i&&i(a,t)}"tt"==C.pzaChannel.instance().channel&&"idle"==E.pzaChannelTT.rState&&C.pzaChannel.instance().recorderStart()},a.prototype.normalStartGameCall=function(e,a,t,o){var n=this;void 0===t&&(t=!0),(this.gameMode==m.pzaGameMode.NORMAL||this.gameMode==m.pzaGameMode.NORMAL_WEEKTWO&&7==e&&5==a)&&w.pzaGamePartConfig.getPartDefaultPlant(e,a),this.showPartTips(function(){var r,p,l=w.pzaGamePartConfig.getPartConfig(m.pzaGameState.curChapter,m.pzaGameState.curPart);if(l.d_plant?1==l.reDP_rule?n.guideBletMode():0==l.reDP_rule&&n.logicStart(e,a,t,l.defaultPlants,o):n.logicStart(e,a,t,null,o),l.protect)try{for(var s=i(l.protectPlant),c=s.next();!c.done;c=s.next()){var u=c.value;window.pzaplantManager.createPlant(u.plant,u.xIndex,u.yIndex,!0,!0,!0)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(p=s.return)&&p.call(s)}finally{if(r)throw r.error}}if(l.warncol){var d=m.pzaGameState.map.getBlockLogicPos(l.warncol,0,0,0);m.pzaGameState.warnCol=d,h.pzaEffectManager.createWarnLineEff(l.warncol)}n.createPortalDoor(e,a)})},a.prototype.logicStart=function(e,a,t,o,n){var i=this;void 0===t&&(t=!0),window.pzaMapManager.initMapTomb(e,a,function(){}),window.pzaMapManager.previewMap(function(){M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_SELECT_VIEW,function(t){b.pzaCommonMask.hideMask();var r=t&&t.getComponent(v.pzaPlantSelectView);r&&r.init(o,function(){window.pzaplantManager.createInitPlant(),b.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(null==o?0:1,function(){var t=function(){null!=o&&window.pzaMapManager.initCleanCar(),window.pzaMapManager.fogEnter(function(){null==o&&window.pzaMapManager.initCleanCar(),h.pzaEffectManager.createReadyWord(function(){if(i.playBgm(),b.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),r&&r.initPlant(),m.pzaGameState.gamePause=!1,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_RESUME,null),n&&n(),window.pzaGuideManager.onGameStart(),m.pzaGameState.gameMode==m.pzaGameMode.SURVIVAL&&1==m.pzaGameState.curPart)I.pzaTipManager.showGameTip("\u4f60\u80fd\u575a\u6301\u5230\u7b2c5\u6ce2\u653b\u51fb\u5417\uff1f");else if(m.pzaGameState.gameMode==m.pzaGameMode.SUR_ENDLESS&&1==m.pzaGameState.curPart){var e="\u4f60\u80fd\u575a\u6301\u5230\u7b2c\u51e0\u6ce2\u653b\u51fb\u5462\uff1f",a=T.pzaLocalData.data.survivalFlagCount[m.pzaGameState.curChapter-1];if(null!=a&&a>0){e+="\n\u5386\u53f2\u6700\u9ad8\u6ce2\u6570\uff1a"+a;var t=A.pzaRankMgr.endlessRank[m.pzaGameState.curChapter-1];null!=t&&t>0&&(e+=" \u5168\u670d\u6392\u540d\uff1a"+t)}I.pzaTipManager.showGameTip(e)}})})};1==e&&3==a?O.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.GAME_ASSESS_VIEW,function(e){var a=e&&e.getComponent(z.pzaAssessView);a&&a.bindBackGameCall(function(){t()},!0)}):t()})})})},t)},a.prototype.initPartProcess=function(e){e.proLabel.node.active=!1;var a=w.pzaGamePartConfig.getPartConfig(m.pzaGameState.curChapter,m.pzaGameState.curPart);if(null!=a){if(e.maxWave=a.maxWave,(2==m.pzaGameState.curChapter||7==m.pzaGameState.curChapter)&&5==m.pzaGameState.curPart||(5==m.pzaGameState.curChapter||10==m.pzaGameState.curChapter)&&10==m.pzaGameState.curPart)for(var t=0;t<e.partFlags.length;t++)(n=e.partFlags[t]).active=!1;else{var o=Math.floor(e.maxWave/10);for(m.pzaGameState.isSurvival()||1!=m.pzaGameState.curChapter||2!=m.pzaGameState.curPart&&3!=m.pzaGameState.curPart&&5!=m.pzaGameState.curPart||(o=1),t=0;t<e.partFlags.length;t++){var n=e.partFlags[t];t+1>o?n.active=!1:(n.active=!0,n.setPosition(-315*(t+1)/o-30,42))}}e.zombieHeadNode.setPosition(-15,37),e.partProNode.active=!1,e.partProgress.fillRange=0,m.pzaGameState.isTryMode(m.pzaGameState.curChapter,m.pzaGameState.curPart)?e.partLabel.string="\u8bd5\u73a9\u5173\u5361":e.partLabel.string="\u5173\u5361\u8fdb\u7a0b:"+(m.pzaGameState.curChapter,m.pzaGameState.curChapter)+"-"+m.pzaGameState.curPart}},a.prototype.updatePartProcess=function(a){if(e.prototype.updatePartProcess.call(this,a),1!=m.pzaGameState.curChapter||2!=m.pzaGameState.curPart&&3!=m.pzaGameState.curPart&&5!=m.pzaGameState.curPart){var t=Math.floor(window.pzazombieManager.wave/10)-1;if(!(t<0||t>3)){var o=a.partFlags[t];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}}else if(a.maxWave==window.pzazombieManager.wave){var n=a.partFlags[0];cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{y:72}).start()}},a.prototype.showBattleDown=function(a){if(e.prototype.showBattleDown.call(this,a),a.gameProp.node.active=m.pzaGameState.curChapter>1||1==m.pzaGameState.curChapter&&m.pzaGameState.curPart>=2,a.freePlantNode.active=!0,m.pzaGameState.curChapter%5==1&&5==m.pzaGameState.curPart&&(a.freePlantNode.active=!1),a.shovelShowNode.active=m.pzaGameState.curChapter>1||m.pzaGameState.curPart>4,a.speedBtn.active=!0,a.sunUIShowNode.active=!0,5!=m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||10!=m.pzaGameState.curPart||!C.pzaChannel.isConfRemote||(a.freePlantNode.active=!0),window.pzaGuideManager.guideType==s.pzaGuideType.GUIDE_PROP_1_2?(a.freePlantNode.active=!1,a.gameProp.hideAllProp()):(G.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"3"},{name:"adname",value:"\u5c40\u5185\u65e0\u53cc\u9f99"}),G.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"4"},{name:"adname",value:"\u5c40\u5185\u81ea\u52a8\u62fe\u53d6"}),G.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"5"},{name:"adname",value:"\u5c40\u5185\u989d\u5916\u80fd\u91cf"})),1==m.pzaGameState.curChapter&&5==m.pzaGameState.curPart&&(a.speedBtn.active=!1),1==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart&&(a.speedBtn.active=!1),1==m.pzaGameState.curChapter&&5==m.pzaGameState.curPart?a.pauseBtn.active=!1:1==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart&&(a.pauseBtn.active=!1,a.freePlantNode.active=!1),m.pzaGameState.curChapter==T.pzaLocalData.data.curChapter&&m.pzaGameState.curPart==T.pzaLocalData.data.curPart&&1==m.pzaGameState.curChapter&&2==m.pzaGameState.curPart&&(a.freePlantNode.active=!1),a.freePlantNode.active){var t="WEAK_GUIDE_"+m.pzaGameState.curChapter+"_"+m.pzaGameState.curPart;if(2==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart)return;window.pzaGuideManager.checkGuideStart(t,!1)&&(a.freePlantNode.active=!1)}},a.prototype.refreshNextWave=function(a,t){if(e.prototype.refreshNextWave.call(this,a,t),window.pzaGuideManager.guideType==s.pzaGuideType.GUIDE_PROP_1_2)if(0==window.pzaGuideManager.guideStep&&1==a.wave&&a.curWaveTime>=10)L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GUIDE_REFRESH_PROP,null),m.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShow(function(){m.pzaGameState.gamePause=!1,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_RESUME,null)});else{if(1==window.pzaGuideManager.guideStep&&2==a.wave&&(a.curWaveTime>=10||a.nextWaveTime<=0))return m.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_PAUSE,null),void window.pzaGuideManager.guideShow(function(){m.pzaGameState.gamePause=!1,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_RESUME,null)});2==window.pzaGuideManager.guideStep&&3==a.wave&&a.curWaveTime>=10&&(m.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShow(function(){m.pzaGameState.gamePause=!1,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_RESUME,null)}))}if(!a.lastWave){var o=!1;if(1!=m.pzaGameState.curChapter||1!=m.pzaGameState.curPart&&2!=m.pzaGameState.curPart&&3!=m.pzaGameState.curPart&&5!=m.pzaGameState.curPart||null!=(n=w.pzaGamePartConfig.getPartConfig(m.pzaGameState.curChapter,m.pzaGameState.curPart))&&n.maxWave==a.wave+1&&(o=!0),(a.wave+1)%10==0||o){if(!a.hasShowRedTip){if(a.zombieMap.size<=0||a.curWaveTime>=w.pzaWaveConfig.activeRedTipTime){var n;null!=(n=w.pzaGamePartConfig.getPartConfig(m.pzaGameState.curChapter,m.pzaGameState.curPart))&&n.maxWave==a.wave+1&&(o=!0);var i=1==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart||2==m.pzaGameState.curChapter&&5==m.pzaGameState.curPart;a.showBigWaveTip(o,i)}return}}else if(0!=a.wave&&a.nextWaveTime>w.pzaWaveConfig.preRefreshTime&&a.getCurWaveLeftHp()<=a.preRefreshHp)return void(a.nextWaveTime=w.pzaWaveConfig.preRefreshTime);a.curWaveTime<w.pzaWaveConfig.minRefreshTime||a.nextWaveTime>0||this.createWave(a)}},a.prototype.createWave=function(a){e.prototype.createWave.call(this,a),1==a.wave?(window.pzaGuideManager.checkGuideStart(s.pzaGuideType.WEAK_GUIDE_5_1),B.pzaSoundManager.playAudio("awooga")):B.pzaSoundManager.playAudio("groan1",2),a.nextWaveTime=w.pzaWaveConfig.getWaveRandomTime();var t=w.pzaGamePartConfig.getPartConfig(m.pzaGameState.curChapter,m.pzaGameState.curPart);if(!(null==t||t.maxWave<a.wave)){1==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart&&1==T.pzaLocalData.data.curChapter&&1==T.pzaLocalData.data.curPart&&S.default.eventReport("\u7b2c\u4e00\u5173\u7b2c"+a.wave+"\u6ce2"),t.maxWave==a.wave&&(a.lastWave=!0);var o=t.getRandomWaveZombie(a.wave,!0,window.pzaMapManager.getIceYCount(),0,m.pzaGameState.redLeft);if(null!=o)if(5!=m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||5!=m.pzaGameState.curPart){if(window.pzaGuideManager.guideType==s.pzaGuideType.GUIDE_PROP_1_2&&3==a.wave)for(o=[],f=0;f<20;f++)o.push(u.pzaZombieEnum.ZOMBIE);var n=[];window.pzaMapManager.IceGroundSet.forEach(function(e){null==e||e.xIndex<0||e.yIndex<0||n.indexOf(e.yIndex)>=0||n.push(e.yIndex)});var i=m.pzaGameState.map.getMapRow(),r=!0,p=[],l=[];if(1==m.pzaGameState.curChapter&&1==m.pzaGameState.curPart)(l=[1,2,3]).sort(function(){return Math.random()-.5});else{for(f=0;f<i;f++)l.push(f);l.sort(function(){return Math.random()-.5})}var c=0;o.forEach(function(e){var o=t.getRandomWayIndex(c,e,l,a.wave);if(window.pzaMapManager.getRandomNoWaterWay(),c++,e==u.pzaZombieEnum.BUNGEE_ZOMBIE){var i=window.pzaplantManager.getRandomBlock(!0,p);if(null==i)return;p.push(i);var s=i.split("-"),d=a.createFixBlockZombieData(e,parseInt(s[0]),parseInt(s[1]));return a.createZombie(d),void a.curWaveZombieDatas.add(d)}e==u.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(o=n.shift());var h=a.createZombieData(e,o);!r&&h.logicPos&&(h.logicPos.x+=N.pzaUtil.getRandomFloatNum(.2,1)*m.pzaGameState.map.getBlockWidth()),a.createZombie(h,null,null,null,null,null,null,t.isShowPortalEffect(a.wave)),a.curWaveZombieDatas.add(h),r=!1}),a.lastWave&&(this.createTombWaterWaveData(a),a.lastWayZombieTime=2)}else{var d;if(d=5==m.pzaGameState.curChapter?[7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5]:[7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5,6,5,5,5,5,5,5,5,5,5],10!=a.wave&&a.createBungeePutZombie(d[a.wave-1]-1,o),a.wave%10==0){for(var h=[],f=0;f<5;f++){var z=window.pzaplantManager.getRandomBlock(!0,h);if(null==z)return;h.push(z);var y=z.split("-"),g=a.createFixBlockZombieData(u.pzaZombieEnum.BUNGEE_ZOMBIE,parseInt(y[0]),parseInt(y[1]));a.createZombie(g),a.curWaveZombieDatas.add(g)}I.pzaTipManager.showGameTip(D.pzaGameConfig.getZombieConfig(u.pzaZombieEnum.BUNGEE_ZOMBIE).name+"\u6765\u5566\uff01")}}}},a.prototype.zombieDeathDrop=function(a){m.pzaGameState.curChapter<=1||e.prototype.zombieDeathDrop.call(this,a)},a.prototype.createPreviewZombie=function(a,t,o){(5!==m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||10!==m.pzaGameState.curPart)&&e.prototype.createPreviewZombie.call(this,a,t,o)},a.prototype.onZombieDeath=function(e,a,t,o){t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)&&(o==d.pzaAttackType.CLEAN_CAR&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_13),M.pzaGameManager.passPart(a.logicPos))},a.prototype.checkAchieve=function(e){m.pzaGameState.onlyBoomPlant&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_16,1,e),m.pzaGameState.gameMode!=m.pzaGameMode.NORMAL&&m.pzaGameState.gameMode!=m.pzaGameMode.SURVIVAL&&m.pzaGameState.gameMode!=m.pzaGameMode.NORMAL_WEEKTWO||(m.pzaGameState.curChapter%5!=3||m.pzaGameState.usePeaPlant||p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_5,1,e),5!=m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||m.pzaGameState.useThrowPlant||p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_7,1,e),m.pzaGameState.curChapter%5!=1&&m.pzaGameState.curChapter%5!=3&&5!=m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||!m.pzaGameState.onlyShroomCofee||p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_11,1,e),m.pzaGameState.curChapter%5!=2&&m.pzaGameState.curChapter%5!=4||m.pzaGameState.useShroom||p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_12,1,e),m.pzaGameState.curChapter%5!=4||5==m.pzaGameState.curPart||m.pzaGameState.usePlanternBlover||p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_21,1,e),m.pzaGameState.curChapter%5!=4||5==m.pzaGameState.curPart||m.pzaGameState.usePondPlant||p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_22,1,e))},a.prototype.playBgm=function(){var a=m.pzaGameState.curChapter,t=m.pzaGameState.curPart;if(4!=a&&9!=a||5!=t)return 4!=a&&9!=a||10!=t?void(5!=t||1!=a&&6!=a?(5!=a&&10!=a||10!=t)&&(10!=t||1!=a&&2!=a&&3!=a&&6!=a&&7!=a&&8!=a?e.prototype.playBgm.call(this):B.pzaSoundManager.playBgm(B.pzaBGMName.BELT_BGM)):B.pzaSoundManager.playBgm(B.pzaBGMName.BOWLING_BGM)):(B.pzaSoundManager.playBgm(B.pzaBGMName.BELT_BGM),void B.pzaSoundManager.playLoopAudio("rain",!0));B.pzaSoundManager.playBgm(B.pzaBGMName.PUZZLE_BGM)},a.prototype.guidePlant11=function(){var e=this;G.pzaStatisticsMgr.sendEvent("Loading",{name:"loading_step",value:4}),window.pzaplantManager.createPlant(c.pzaPlantEnum.SUN_FLOWER,0,1,!0),window.pzaplantManager.createPlant(c.pzaPlantEnum.SUN_FLOWER,0,3,!0),h.pzaEffectManager.createShowGrassEffect(2,null),window.pzaMapManager.previewMap(function(){b.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){e.playBgm(),window.pzaMapManager.initCleanCar(),M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){var a=e&&e.getComponent(v.pzaPlantSelectView),t=w.pzaGamePartConfig.getPartDefaultPlant(1,1);a&&a.init(t),a&&a.initPlant(),b.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),m.pzaGameState.gamePause=!1,m.pzaGameState.guideSunPause=!0,m.pzaGameState.guideZombiePause=!0,window.pzaGuideManager.guideShow()})})},!0)},a.prototype.guidePlant12=function(){var e=this;window.pzaMapManager.previewMap(function(){M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(v.pzaPlantSelectView),o=w.pzaGamePartConfig.getPartDefaultPlant(1,2);t&&t.init(o,function(){b.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){e.playBgm(),window.pzaMapManager.initCleanCar(),h.pzaEffectManager.createReadyWord(function(){b.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),t&&t.initPlant(),m.pzaGameState.gamePause=!1,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_RESUME,null),L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GUIDE_TIPS,c.pzaPlantEnum.SUN_FLOWER)})})})})},!0)},a.prototype.guidePlant13=function(){window.pzaGuideManager.guideType=s.pzaGuideType.FORCE_GUIDE_1_3,this.forceGuide()},a.prototype.forceGuide=function(){var e=this;window.pzaGuideManager.guideShow(null,function(){M.pzaGameManager.removeBattleUI(),e.normalStartGameCall(m.pzaGameState.curChapter,m.pzaGameState.curPart,!1)})},a.prototype.guidePlant15=function(){var e=this;m.pzaGameState.gameMode=m.pzaGameMode.BELT,window.pzaplantManager.createPlant(c.pzaPlantEnum.PEA_SHOOTER,6,1,!0),window.pzaplantManager.createPlant(c.pzaPlantEnum.PEA_SHOOTER,7,2,!0),window.pzaplantManager.createPlant(c.pzaPlantEnum.PEA_SHOOTER,5,3,!0),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.createPitchFork(),b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){window.pzaMapManager.openBattleUI(),window.pzaGuideManager.guideStepNext()},function(){window.pzaGuideManager.guideType=null,y.pzaBattleDownView.getInstance.refreshSkipPartBtn(),e.playBgm(),b.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_BELT_VIEW,function(e){var a=e&&e.getComponent(g.pzaPlantBeltView);a&&a.showView(function(){b.pzaCommonMask.hideMask(),L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.REFRESH_FREE_PLANT,null),m.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})},a.prototype.guidePlant65=function(){var e=this;m.pzaGameState.gameMode=m.pzaGameMode.BELT,window.pzaMapManager.initMapPos(!1),window.pzaMapManager.createPitchFork(),window.pzaMapManager.showRedLine(3),b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.playBgm(),b.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.REFRESH_FREE_PLANT,null),M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_BELT_VIEW,function(e){var a=e&&e.getComponent(g.pzaPlantBeltView);a&&a.showView(function(){b.pzaCommonMask.hideMask(),m.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})},a.prototype.guideBletMode=function(){var e=this;m.pzaGameState.gameMode=m.pzaGameMode.NORMAL,window.pzaplantManager.createInitPlant(),window.pzaMapManager.initMapTomb(m.pzaGameState.curChapter,m.pzaGameState.curPart,function(){}),m.pzaGameState.gameMode=m.pzaGameMode.BELT,window.pzaMapManager.previewMap(function(){b.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar(),M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(g.pzaPlantBeltView);t&&t.showView(function(){h.pzaEffectManager.createReadyWord(function(){e.playBgm(),b.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),m.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})})},!0)},a.prototype.guidePlant25=function(){var e=this;m.pzaGameState.sunLightCount=0,window.pzaMapManager.initMapPos(!1),m.pzaGameState.gameMode=m.pzaGameMode.KNOCK_ZOMBIE,b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.playBgm(),window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),window.pzaMapManager.hideSunUI(),m.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})},a.prototype.guidePlant35=function(){var e=this;m.pzaGameState.gameMode=m.pzaGameMode.NORMAL,window.pzaplantManager.createInitPlant(),m.pzaGameState.gameMode=m.pzaGameMode.SMALL_ZOMBIE,b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){window.pzaMapManager.previewMap(function(){window.pzaGuideManager.guideType=null,b.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(g.pzaPlantBeltView);t&&t.showView(function(){window.pzaMapManager.initCleanCar(),h.pzaEffectManager.createReadyWord(function(){e.playBgm(),b.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),m.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})})},!1)})},a.prototype.guidePlant45=function(){var e=this;window.pzaMapManager.initMapPos(!1),window.pzaMapManager.initCleanCar(),window.pzaMapManager.createPitchFork(),window.pzazombieManager.wave=1;var a=D.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=a&&a.forEach(function(e){window.pzaplantManager.createJar(e)}),m.pzaGameState.gameMode=m.pzaGameMode.BANG_JAR,b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.playBgm(),window.pzaGuideManager.guideStepNext(),window.pzaMapManager.openBattleUI(),m.pzaGameState.gamePause=!1})},a.prototype.guidePlant510=function(){var e=this;b.pzaCommonMask.hideMask(),window.pzaplantManager.createInitPlant(),m.pzaGameState.gameMode=m.pzaGameMode.ZOM_BOSS,window.pzaGuideManager.guideShow(function(){B.pzaSoundManager.stopBgm(),window.pzaMapManager.previewMap(function(){b.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar();var a=0;10==m.pzaGameState.curChapter&&10==m.pzaGameState.curPart&&(a=6e4),window.pzazombieManager.createDrZomBoss(function(){M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(g.pzaPlantBeltView);t&&t.showView(function(){h.pzaEffectManager.createReadyWord(function(){e.playBgm(),b.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),m.pzaGameState.gamePause=!1,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.GAME_RESUME,null)})})})},a)})},!1)})},a.prototype.guide_night_4_10=function(){var e=this;b.pzaCommonMask.hideMask(),window.pzaplantManager.createInitPlant(),window.pzaGuideManager.guideShow(function(){e.guideBletMode()})},a.prototype.guide_night_2_1=function(e,a){var t=this;b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){t.normalStartGameCall(e,a,!1)})},a.prototype.guide_track_2_3=function(e,a){var t=this;b.pzaCommonMask.hideMask(),window.pzaplantManager.createPlant(c.pzaPlantEnum.PUFF_SHROOM,4,2,!0),window.pzaGuideManager.guideShow(null,function(){t.normalStartGameCall(e,a,!1)})},a.prototype.guidet_5_1=function(e,a){var t=this;b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){t.normalStartGameCall(e,a,!1)})},a.prototype.guide6_1=function(e,a){var t=this;b.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){t.normalStartGameCall(e,a,!1)})},a.prototype.getAdPlantArr=function(){return 10!=m.pzaGameState.curPart||m.pzaGameState.curChapter%5!=1&&m.pzaGameState.curChapter%5!=2?5==m.pzaGameState.curPart&&m.pzaGameState.curChapter%5==1?[c.pzaPlantEnum.BOOM_NUT_BOWLING,c.pzaPlantEnum.TALL_NUT_BOWLING]:5==m.pzaGameState.curPart&&m.pzaGameState.curChapter%5==2?[c.pzaPlantEnum.GATLING_PEA,c.pzaPlantEnum.GLOOM_SHROOM,c.pzaPlantEnum.WINTER_MELON,c.pzaPlantEnum.SPIKEROCK]:5!=m.pzaGameState.curPart&&10!=m.pzaGameState.curPart||m.pzaGameState.curChapter%5!=3?m.pzaGameState.curChapter%5==4&&10==m.pzaGameState.curPart?[c.pzaPlantEnum.GATLING_PEA,c.pzaPlantEnum.GLOOM_SHROOM,c.pzaPlantEnum.CATTAIL,c.pzaPlantEnum.WINTER_MELON,c.pzaPlantEnum.SPIKEROCK,c.pzaPlantEnum.COB_CANNON]:m.pzaGameState.curChapter%5==4&&5==m.pzaGameState.curPart?[c.pzaPlantEnum.SQUASH,c.pzaPlantEnum.ICE_SHROOM]:5!=m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||5!=m.pzaGameState.curPart?5!=m.pzaGameState.curChapter&&10!=m.pzaGameState.curChapter||10!=m.pzaGameState.curPart?void 0:[c.pzaPlantEnum.WINTER_MELON,c.pzaPlantEnum.COB_CANNON,c.pzaPlantEnum.JALAPENO,c.pzaPlantEnum.ICE_SHROOM]:[c.pzaPlantEnum.GATLING_PEA,c.pzaPlantEnum.GLOOM_SHROOM,c.pzaPlantEnum.WINTER_MELON,c.pzaPlantEnum.COB_CANNON,c.pzaPlantEnum.SPIKEROCK]:[c.pzaPlantEnum.GATLING_PEA,c.pzaPlantEnum.GLOOM_SHROOM,c.pzaPlantEnum.CATTAIL,c.pzaPlantEnum.WINTER_MELON,c.pzaPlantEnum.SPIKEROCK,c.pzaPlantEnum.COB_CANNON]:[c.pzaPlantEnum.GATLING_PEA,c.pzaPlantEnum.GLOOM_SHROOM,c.pzaPlantEnum.WINTER_MELON,c.pzaPlantEnum.SPIKEROCK,c.pzaPlantEnum.COB_CANNON]},a.prototype.createPortalDoor=function(){var e,a,t=m.pzaGameState.hasMainConf();if(t&&t.portalDoor)try{for(var o=i(t.portalDoorArray),n=o.next();!n.done;n=o.next()){var r=n.value;window.pzaMapManager.createPortalDoor(r.type,r.xIndex_1,r.yIndex_1,r.xIndex_2,r.yIndex_2)}}catch(p){e={error:p}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}},a.prototype.showPartTips=function(e){var a=m.pzaGameState.hasMainConf();if(a&&a.tips){var t=a.tips.replace(/\\n/g,"\n");O.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.SPEPART_TIPS_VIEW,function(a){var o=a&&a.getComponent(P.pzaSpecialTipsView);o&&o.show(t,function(){e&&e()})})}else e&&e()},a}(_.pzaGameBase);t.pzaGameNormal=R,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaAssessView":"pzaAssessView","../View/Battle/pzaBattleDownView":"pzaBattleDownView","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaSpecialTipsView":"pzaSpecialTipsView","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelTT":"pzaChannelTT","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGamePartConfig:[function(e,a,t){"use strict";cc._RF.push(a,"1da54Pqt3NJaJJrwLTjkbmX","pzaGamePartConfig");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWaveConfig=t.pzaGamePartConfig=void 0;var n=e("../Battle/Data/pzaPlantEnum"),i=e("../Battle/Data/pzaZombieEnum"),r=e("../Battle/pzaGameState"),p=e("./pzaGameConfig"),l=e("./pzaLocalData"),s=e("./pzaUtil"),c=function(){function e(e,a,t,n,i,r,p,l,s,c,u,d,h,m,f,z,y,g,v,b,P,C,E,S,_,D,M){var w,T,A,B,G,I,O,N,L,R,k,U,x,F,W,Z,j,V;if(void 0===r&&(r=1),void 0===p&&(p=0),void 0===l&&(l=0),void 0===s&&(s=0),void 0===S&&(S=0),this.part=null,this.maxWave=0,this.waveZombieDensity=null,this.zombieTypes=null,this.newZombieType=null,this.newZombieWave=0,this.newZombieYIndex=0,this.magnification=1,this.tombCount=0,this.tombMinRow=0,this.flowerPotColumn=0,this.minWaterWave=0,this.lastWaterWaveMinColumn=0,this.lastWaterWaveZombie=0,this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.minFogColumn=0,this.redLimit=0,this.initSun=0,this.mapId=0,this.isnight=0,this.partPlantType=0,this.type2=[],this.limitation=0,this.d_plant=null,this.defaultPlants=[],this.defaultPlantsWeight=[],this.reDP_rule=0,this.protectPlant=[],this.protect=null,this.warncol=null,this.p_wave=null,this.p_waveData={waveList:[],colList:[]},this.lily_col=null,this.tips=null,this.need_sun=null,this.dontuse_sun=null,this.kill=null,this.killData={killTime:10,killCount:8},this.ablemove=null,this.ablemoveData=[],this.coldWindCD=0,this.portalDoor=null,this.portalDoorArray=[],this.holeBlock=null,this.tipsIconArray=null,this.tipsIcon=null,this.part=e,this.maxWave=a,this.waveZombieDensity=t,this.zombieTypes=n,0!=i&&(this.newZombieType=i),this.magnification=r,this.tombCount=p,this.tombMinRow=l,this.flowerPotColumn=s,this.initSun=c,this.mapId=u,this.isnight=d,this.partPlantType=h||0,this.d_plant=m,m){var H=m.split(",");if(H)try{for(var q=o(H),K=q.next();!K.done;K=q.next()){var Y=(De=K.value).split("-");Y[1]?(this.reDP_rule=1,this.defaultPlants.push(parseInt(Y[0])),this.defaultPlantsWeight.push(parseInt(Y[1]))):(this.reDP_rule=0,this.defaultPlants.push(parseInt(De)))}}catch(Be){w={error:Be}}finally{try{K&&!K.done&&(T=q.return)&&T.call(q)}finally{if(w)throw w.error}}}if(f&&(this.protect=f,pe=f.split(",")))try{for(var X=o(pe),J=X.next();!J.done;J=X.next()){var Q=(De=J.value).split("-")[0],$=De.split("-")[1],ee=De.split("-")[2];Q&&$&&ee&&this.protectPlant.push({plant:parseInt(Q),xIndex:parseInt($),yIndex:parseInt(ee)})}}catch(Ge){A={error:Ge}}finally{try{J&&!J.done&&(B=X.return)&&B.call(X)}finally{if(A)throw A.error}}if(this.warncol=z,y&&(this.p_wave=y,pe=y.split(",")))try{for(var ae=o(pe),te=ae.next();!te.done;te=ae.next()){var oe=(De=te.value).split("-")[0],ne=De.split("-")[1];oe&&ne&&(this.p_waveData.waveList.push(parseInt(oe)),this.p_waveData.colList.push(parseInt(ne)))}}catch(Ie){G={error:Ie}}finally{try{te&&!te.done&&(I=ae.return)&&I.call(ae)}finally{if(G)throw G.error}}if(this.lily_col=g,this.tips=v,this.need_sun=b,this.dontuse_sun=P,C){var ie=C.split(",")[0],re=C.split(",")[1];ie&&re&&(this.kill=C,this.killData.killTime=parseInt(ie),this.killData.killCount=parseInt(re))}if(E){var pe=E.split(",");try{for(var le=o(pe),se=le.next();!se.done;se=le.next()){var ce=(De=se.value).split("-")[0],ue=De.split("-")[1],de=De.split("-")[2];if(ce&&ue&&de){this.ablemove=E;var he={xIndex:parseInt(ce),yIndex:parseInt(ue),height:parseInt(de)};this.ablemoveData.push(he)}}}catch(Oe){O={error:Oe}}finally{try{se&&!se.done&&(N=le.return)&&N.call(le)}finally{if(O)throw O.error}}}if(this.coldWindCD=S,this.portalDoor=_,_){var me=_.split(",");try{for(var fe=o(me),ze=fe.next();!ze.done;ze=fe.next()){var ye=ze.value.split(",");try{for(var ge=(k=void 0,o(ye)),ve=ge.next();!ve.done;ve=ge.next()){var be=(De=ve.value).split("-");this.portalDoorArray.push({type:parseInt(be[0]),xIndex_1:parseInt(be[1]),yIndex_1:parseInt(be[2]),xIndex_2:parseInt(be[3]),yIndex_2:parseInt(be[4])})}}catch(Ne){k={error:Ne}}finally{try{ve&&!ve.done&&(U=ge.return)&&U.call(ge)}finally{if(k)throw k.error}}}}catch(Le){L={error:Le}}finally{try{ze&&!ze.done&&(R=fe.return)&&R.call(fe)}finally{if(L)throw L.error}}}if(this.holeBlock=D,D){me=D.split(","),this.holeBlockMap=new Map;try{for(var Pe=o(me),Ce=Pe.next();!Ce.done;Ce=Pe.next()){var Ee=Ce.value.split(",");try{for(var Se=(W=void 0,o(Ee)),_e=Se.next();!_e.done;_e=Se.next()){var De;be=(De=_e.value).split("-"),$=parseInt(be[0]),ee=parseInt(be[1]),this.holeBlockMap.set(""+$+ee,{xIndex:$,yIndex:ee})}}catch(Re){W={error:Re}}finally{try{_e&&!_e.done&&(Z=Se.return)&&Z.call(Se)}finally{if(W)throw W.error}}}}catch(ke){x={error:ke}}finally{try{Ce&&!Ce.done&&(F=Pe.return)&&F.call(Pe)}finally{if(x)throw x.error}}}if(M){var Me=[];me=M.split(",");try{for(var we=o(me),Te=we.next();!Te.done;Te=we.next()){var Ae=Te.value;Me.push(parseInt(Ae))}}catch(Ue){j={error:Ue}}finally{try{Te&&!Te.done&&(V=we.return)&&V.call(we)}finally{if(j)throw j.error}}this.tipsIconArray=Me,this.tipsIcon=M}}return e.initPartConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var o=null;null!=a.density&&(o=a.density.split(",")).forEach(function(e,a){o[a]=parseInt(e)});var n=null;null!=a.type&&(n=a.type.split(",")).forEach(function(e,a){n[a]=parseInt(e)});var i=null,r=0,p=0;if(null!=a.new){var l=a.new.split(",");null!=l&&(i=parseInt(l[0]),r=parseInt(l[1]),l[2]&&(p=parseInt(l[2])))}var s=new e(a.Level,parseInt(a.wave),o,n,i,parseInt(a.multiple),parseInt(a.tombstone),parseInt(a.tombstonemini),parseInt(a.flowerpot),parseInt(a.initsun),parseInt(a.map),parseInt(a.isnight),a.planttype,a.d_plant,a.protect,a.warncol,a.p_wave,a.lily_col,a.tips,a.need_sun,a.dontuse_sun,a.kill,a.ablemove,a.coldWindCD,a.portalDoor,a.holeBlock,a.tipsIcon);if(s.newZombieWave=r,s.newZombieYIndex=p,null!=a.waterexit&&(s.minWaterWave=parseInt(a.waterexit)),null!=a.waterend){var c=a.waterend.split(",");null!=c&&(s.lastWaterWaveMinColumn=parseInt(c[0]),s.lastWaterWaveZombie=parseInt(c[1]))}if(null!=a.fall){var u=a.fall.split(",");null!=u&&(s.lastBungeeMinColumn=parseInt(u[0]),s.lastBungeeZombie=parseInt(u[1]))}null!=a.fog&&(s.minFogColumn=parseInt(a.fog)),t.partConfigMap.set(a.Level,s)}})},e.getPartConfig=function(e,a){var t=this.partConfigMap.get(e+"-"+a);return null==t?(console.error("\u672a\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):t},e.getPartDefaultPlant=function(e,a){var t=e+"-"+a;return this.PartDefaultPlantMap.get(t)},e.prototype.clone=function(){var a=new e(this.part,this.maxWave,this.waveZombieDensity,this.zombieTypes,this.newZombieType,this.magnification,this.tombCount,this.tombMinRow,this.flowerPotColumn,this.initSun,this.mapId,this.isnight,this.partPlantType,this.d_plant,this.protect,this.warncol,this.p_wave,this.lily_col,this.tips,this.need_sun,this.dontuse_sun,this.kill,this.ablemove,this.coldWindCD,this.portalDoor,this.holeBlock,this.tipsIcon);return a.minWaterWave=this.minWaterWave,a.lastWaterWaveMinColumn=this.lastWaterWaveMinColumn,a.lastWaterWaveZombie=this.lastWaterWaveZombie,a.lastBungeeMinColumn=this.lastBungeeMinColumn,a.lastBungeeZombie=this.lastBungeeZombie,a},e.prototype.getWaveZombieDensity=function(){return null==this.waveZombieDensity&&this.createZombieDensity(),this.waveZombieDensity},e.prototype.createZombieDensity=function(){this.waveZombieDensity=[];for(var e=1;e<=this.maxWave;e++){var a=Math.floor(Math.floor(.8*(e-1))/2)+1;a=e%10==0?Math.floor(2.5*a):Math.floor(a*this.magnification),this.waveZombieDensity.push(a)}},e.prototype.getRandomWaveZombie=function(e,a,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0),this.getWaveZombieDensity();var s=[];if(null==this.waveZombieDensity||e-1<0)return[i.pzaZombieEnum.ZOMBIE];var c=this.waveZombieDensity[e-1];if(null!=this.newZombieType&&this.newZombieWave==e&&(s.push(this.newZombieType),c-=p.pzaGameConfig.getZombieLevel(this.newZombieType)),a&&e%10==0){s.push(i.pzaZombieEnum.FLAG_ZOMBIE),c-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.FLAG_ZOMBIE);for(var u=Math.min(Math.floor(c/2),8),d=0;d<u;d++)s.push(i.pzaZombieEnum.ZOMBIE),c-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.ZOMBIE)}for(l.pzaLocalData.hasUnlockZombie(i.pzaZombieEnum.YETI_ZOMBIE)||9!=r.pzaGameState.curChapter||10!=r.pzaGameState.curPart||15!=e||(s.push(i.pzaZombieEnum.YETI_ZOMBIE),c-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.YETI_ZOMBIE)),e==this.maxWave&&e>=10&&this.zombieTypes.forEach(function(e){e!=i.pzaZombieEnum.ZOMBIE&&e!=i.pzaZombieEnum.YETI_ZOMBIE&&(s.push(e),c-=p.pzaGameConfig.getZombieLevel(e))});c>0;){var h=this.getRandomZombie(c,e,t,o,n);if(null==h)break;if(h==i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?t--:h==i.pzaZombieEnum.RED_GARGANTUAR&&e%10!=0&&n--,s.push(h),s.length>=50)break;c-=p.pzaGameConfig.getZombieLevel(h)}return s},e.prototype.getRandomZombie=function(e,a,t,o,n){var r=this;void 0===o&&(o=0),void 0===n&&(n=0);var l=[],c=[];if(this.zombieTypes.forEach(function(t){if(null!=t&&!(p.pzaGameConfig.isWaterZombie(t)&&a<r.minWaterWave)){var s=p.pzaGameConfig.getZombieConfig(t);if(!(null==s||0==s.refrshWeight||s.refreshLevel>e||s.refrshMinWave>a||o>0&&t==i.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&a%10!=0))if(l.push(t),o>0)if(t==i.pzaZombieEnum.RED_GARGANTUAR)c.push(a%10==0?6e3:1e3);else if(t==i.pzaZombieEnum.ZOMBIE){var u=s.refrshWeight;o>5&&(u=Math.max(u-180*(o-5),400)),c.push(u)}else t==i.pzaZombieEnum.ZOMBIE?(u=s.refrshWeight,o>5&&(u=Math.max(u-150*(o-5),1e3)),c.push(u)):c.push(s.refrshWeight);else c.push(s.refrshWeight)}}),t>0){var u=p.pzaGameConfig.getZombieConfig(i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=u&&u.refreshLevel<=e&&(l.push(i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),c.push(u.refrshWeight))}var d=s.pzaUtil.getRandomIndexByWeight(c);return l[d]},e.prototype.getPreviewZombies=function(e){var a=[];if(null==this.zombieTypes||this.zombieTypes.length<=1){for(var t=0;t<e;t++)a.push(i.pzaZombieEnum.ZOMBIE);return a}for(t=0;t<this.zombieTypes.length;t++)a.push(this.zombieTypes[t]);if(a.length>=e)return a;var o=[],n=[];this.zombieTypes.forEach(function(e){if(null!=e&&e!=i.pzaZombieEnum.BUNGEE_ZOMBIE){var a=p.pzaGameConfig.getZombieConfig(e);null!=a&&0!=a.refrshWeight&&(o.push(e),n.push(a.refrshWeight))}});var r=a.length;for(t=0;t<e-r;t++){var l=s.pzaUtil.getRandomIndexByWeight(n);a.push(o[l])}return a},e.prototype.getRandomTombZombie=function(){var e=this,a=[i.pzaZombieEnum.ZOMBIE,i.pzaZombieEnum.CONE_HEAD_ZOMBIE,i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE],t=[],o=[];a.forEach(function(a){if(e.zombieTypes.includes(a)){var n=p.pzaGameConfig.getZombieConfig(a);o.push(n.refrshWeight),t.push(a)}});var n=s.pzaUtil.getRandomIndexByWeight(o);return t[n]},e.prototype.getRandomDiveZombie=function(){var e=[i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE];null!=this.zombieTypes&&(this.zombieTypes.indexOf(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE)>=0&&e.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),this.zombieTypes.indexOf(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE)>=0&&e.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));var a=[];return e.forEach(function(e){var t=p.pzaGameConfig.getZombieConfig(e);a.push(t.refrshWeight)}),e[s.pzaUtil.getRandomIndexByWeight(a)]},e.prototype.getRandomWayIndex=function(a,t,o,n){if(null==t||null==o||o.length<=0)return 0;if(r.pzaGameState.newZombie&&this.newZombieType==t&&this.newZombieWave==n)return this.newZombieYIndex;if(4==r.pzaGameState.curChapter&&2==r.pzaGameState.curPart&&l.pzaLocalData.data.curChapter<=4&&l.pzaLocalData.data.curPart<=2&&1==n)return r.pzaGameState.map.getMapRow()-1;var c=o[a%o.length];if(t==i.pzaZombieEnum.GARGANTUAR&&c==o.length-1)return s.pzaUtil.getRandomValueFromArray([0,1]);var u=e.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart);if(p.pzaGameConfig.isAllWayZombie(t)&&n>=u.minWaterWave)return c;var d=p.pzaGameConfig.isWaterZombie(t),h=window.pzaMapManager.isInWaterWay(c);if(h&&d||!h&&!d)return c;if(d){var m=window.pzaMapManager.getRandomWaterWay();return null==m?c:m}return window.pzaMapManager.getRandomNoWaterWay()},e.prototype.isShowPortalEffect=function(a){for(var t=e.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart),o=0;o<t.p_waveData.waveList.length;o++){var n=t.p_waveData.waveList[o],i=t.p_waveData.colList[o];if(a==n)return i}},e.partConfigMap=new Map,e.PartDefaultPlantMap=new Map([["1-1",[n.pzaPlantEnum.SUN_FLOWER]],["1-2",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER]],["2-5",[n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GRAVE_BUSTER,n.pzaPlantEnum.CHERRY_BOMB]],["7-5",[n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GRAVE_BUSTER,n.pzaPlantEnum.CHERRY_BOMB]]]),e}();t.pzaGamePartConfig=c;var u=function(){function e(){}return e.getWaveRandomTime=function(){return s.pzaUtil.getRandomFloatNum(this.minWaveRandomTime,this.maxWaveRandomTime)},e.getPreRefreshHp=function(){return s.pzaUtil.getRandomFloatNum(this.preRefreshMinHp,this.preRefreshMaxHp)},e.initBaseWaveConfig=function(e){var a=e&&e[0];null!=a&&(this.firstWaveTime=parseFloat(a.first),this.initSunCount=parseInt(a.lnitial),this.minRefreshTime=parseFloat(a.interval),this.minWaveRandomTime=parseFloat(a.randommini),this.maxWaveRandomTime=parseFloat(a.randommax),this.preRefreshMinHp=parseFloat(a.advancemini),this.preRefreshMaxHp=parseFloat(a.advancemax),this.preRefreshTime=parseFloat(a.advance),this.activeRedTipTime=parseFloat(a.delay),this.redTipNextWaveTime=parseFloat(a.cd))},e.firstWaveTime=18,e.minRefreshTime=6,e.minWaveRandomTime=25,e.maxWaveRandomTime=31,e.preRefreshMinHp=.5,e.preRefreshMaxHp=.67,e.preRefreshTime=2,e.activeRedTipTime=45,e.redTipNextWaveTime=7.2,e.initSunCount=50,e}();t.pzaWaveConfig=u,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGamePropConfig:[function(e,a,t){"use strict";var o;cc._RF.push(a,"41a32ESnYpIMY3MttEXjBfJ","pzaGamePropConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRewardPropData=t.pzaGamePropConfig=t.pzaItemType=t.pzaGamePropEnum=void 0,function(e){e[e.PROP_CHERRY_BOMB=1]="PROP_CHERRY_BOMB",e[e.PROP_FREE_SUN=2]="PROP_FREE_SUN",e[e.PROP_AUTO_PICK=3]="PROP_AUTO_PICK",e[e.PROP_COIN=4]="PROP_COIN",e[e.PROP_PLANTE=5]="PROP_PLANTE",e[e.PROP_FERTILIZER=6]="PROP_FERTILIZER",e[e.PROP_PESTICIDE=7]="PROP_PESTICIDE",e[e.PROP_SECRET_FLOWER=8]="PROP_SECRET_FLOWER",e[e.PROP_BRONZE_FLOWE=9]="PROP_BRONZE_FLOWE",e[e.PROP_SILVER_FLOWE=10]="PROP_SILVER_FLOWE",e[e.PROP_GOLD_FLOWER=11]="PROP_GOLD_FLOWER",e[e.PROP_ACHIEVE=12]="PROP_ACHIEVE",e[e.PROP_POWER=13]="PROP_POWER",e[e.PROP_AD_TICKET=14]="PROP_AD_TICKET",e[e.RANDOM_GIFT=15]="RANDOM_GIFT",e[e.EQUIP_BELT=16]="EQUIP_BELT",e[e.BELT_ACTIVITY_COIN=17]="BELT_ACTIVITY_COIN",e[e.RIDER_PIECE=18]="RIDER_PIECE",e[e.HERO_ACTIVITY_COIN=19]="HERO_ACTIVITY_COIN",e[e.BELT_PIECE=20]="BELT_PIECE",e[e.PROP_CHOCOLATES=999]="PROP_CHOCOLATES",e[e.PROP_FLOWER_POT=1e3]="PROP_FLOWER_POT"}(o=t.pzaGamePropEnum||(t.pzaGamePropEnum={})),function(e){e[e.PROP=0]="PROP",e[e.PLANT=1]="PLANT",e[e.SKIN=2]="SKIN"}(t.pzaItemType||(t.pzaItemType={}));var n=function(){function e(e,a,t,n){this.propType=o.PROP_FREE_SUN,this.propName=null,this.propDesc=null,this.itemicon=0,this.propType=e,this.propName=a,this.propDesc=t,this.itemicon=n}return e.initPropConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var o=parseInt(a.id),n=new e(o,a.name,a.txt,a.itemicon);t.PorpConfigMap.set(o,n)}})},e.PorpConfigMap=new Map,e}();t.pzaGamePropConfig=n;t.pzaRewardPropData=function(e,a,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.propType=o.PROP_FREE_SUN,this.propCount=0,this.limitGet=0,this.trunToCoin=0,this.targetID=0,this.riderId=0,this.giftChange=0,this.propType=e,this.propCount=a,this.targetID=t,this.giftChange=n},cc._RF.pop()},{}],pzaGameRecruitMgr:[function(e,a,t){"use strict";cc._RF.push(a,"4837eRnY9BPTqvHv7gq8lJa","pzaGameRecruitMgr"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameRecruitMgr=void 0;var o=e("./pzaRecruitDrawConf"),n=function(){function e(){this.recruitDrawMap=new Map}return e.instance=function(){return e._me||(e._me=new e),e._me},e.prototype.initRecruitDrawMap=function(e){if(!e)return console.warn("\u6ca1\u6709a35\u914d\u7f6e");for(var a=0;a<e.length;a++){var t=new o.pzaRecruitDrawConf(e[a]);this.recruitDrawMap.set(t.id,t)}},e._me=null,e}();t.pzaGameRecruitMgr=n,cc._RF.pop()},{"./pzaRecruitDrawConf":"pzaRecruitDrawConf"}],pzaGameSmall:[function(e,a,t){"use strict";cc._RF.push(a,"d6478vg2ZdNxIDU+EJlpdbm","pzaGameSmall");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameSmall=void 0;var i=e("../Battle/Data/pzaZombieEnum"),r=e("../Battle/pzaGameState"),p=e("./pzaGameConfig"),l=e("./pzaGameNormal"),s=e("./pzaGamePartConfig"),c=e("./pzaUtil"),u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=r.pzaGameMode.SMALL_ZOMBIE,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u5c0f\u50f5\u5c38-"},a.prototype.isAutoCreateSun=function(){return!1},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=!1},a.prototype.createWave=function(a){e.prototype.createWave.call(this,a),a.nextWaveTime=p.pzaGameConfig.miniZombieWaveInterval;var t=s.pzaGamePartConfig.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart);if(!(null==t||t.maxWave<a.wave)){t.maxWave==a.wave&&(a.lastWave=!0);var o=t.getRandomWaveZombie(a.wave,!0,window.pzaMapManager.getIceYCount(),0,r.pzaGameState.redLeft);if(null!=o){var n=[];window.pzaMapManager.IceGroundSet.forEach(function(e){null==e||e.xIndex<0||e.yIndex<0||n.indexOf(e.yIndex)>=0||n.push(e.yIndex)});for(var l=r.pzaGameState.map.getMapRow(),u=!0,d=[],h=[],m=0;m<l;m++)h.push(m);h.sort(function(){return Math.random()-.5});var f=0;o.forEach(function(e){var o=t.getRandomWayIndex(f,e,h,a.wave);if(f++,e==i.pzaZombieEnum.BUNGEE_ZOMBIE){var p=window.pzaplantManager.getRandomBlock(!0,d);if(null==p)return;d.push(p);var l=p.split("-"),s=a.createFixBlockZombieData(e,parseInt(l[0]),parseInt(l[1]));return a.createZombie(s),void a.curWaveZombieDatas.add(s)}e==i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(o=n.shift());var m=a.createZombieData(e,o);!u&&m.logicPos&&(m.logicPos.x+=c.pzaUtil.getRandomFloatNum(.2,1)*r.pzaGameState.map.getBlockWidth()),a.createZombie(m),a.curWaveZombieDatas.add(m),u=!1})}}},a.prototype.showBattlePropButtons=function(a){5==r.pzaGameState.curPart||10==r.pzaGameState.curPart?(a.freeSunNode.active=!1,a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1):e.prototype.showBattlePropButtons.call(this,a)},a}(l.pzaGameNormal);t.pzaGameSmall=u,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUtil":"pzaUtil"}],pzaGameState:[function(e,a,t){"use strict";cc._RF.push(a,"ec118RIzbVBC4zMJO2TojyG","pzaGameState"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameState=t.pzaSelectCardType=t.pzaGameMode=t.pzaGameTimeType=void 0;var o,n,i=e("../Common/pzaGameConfig"),r=e("../Common/pzaGamePartConfig"),p=e("../Common/pzaLocalData"),l=e("./Data/pzaPlantEnum");(function(e){e[e.DAY=1]="DAY",e[e.NIGHT=2]="NIGHT"})(o=t.pzaGameTimeType||(t.pzaGameTimeType={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.BELT=1]="BELT",e[e.KNOCK_ZOMBIE=2]="KNOCK_ZOMBIE",e[e.SMALL_ZOMBIE=3]="SMALL_ZOMBIE",e[e.BANG_JAR=4]="BANG_JAR",e[e.ZOM_BOSS=5]="ZOM_BOSS",e[e.SURVIVAL=6]="SURVIVAL",e[e.SUR_ENDLESS=7]="SUR_ENDLESS",e[e.ZOMBIE_ENERMY=8]="ZOMBIE_ENERMY",e[e.ZOMBIE_ENDLESS=9]="ZOMBIE_ENDLESS",e[e.VASE=10]="VASE",e[e.VASE_ENDLESS=11]="VASE_ENDLESS",e[e.MINIGAME=12]="MINIGAME",e[e.KNOCK_ZOMBIE_MINIGAME=13]="KNOCK_ZOMBIE_MINIGAME",e[e.MINIGAME_KNOCK=16]="MINIGAME_KNOCK",e[e.MINIGAME_SMALL=17]="MINIGAME_SMALL",e[e.NORMAL_WEEKTWO=18]="NORMAL_WEEKTWO",e[e.ART_TEST=999]="ART_TEST"}(n=t.pzaGameMode||(t.pzaGameMode={})),function(e){e[e.SLOT_CARD=0]="SLOT_CARD",e[e.BELT_CARD=1]="BELT_CARD",e[e.DROP_CARD=2]="DROP_CARD",e[e.AD_CARD=3]="AD_CARD",e[e.SHOVE_CARD=4]="SHOVE_CARD"}(t.pzaSelectCardType||(t.pzaSelectCardType={}));var s=function(){function e(){}return Object.defineProperty(e,"curPart",{get:function(){return e._curPart},set:function(a){e._curPart=a},enumerable:!1,configurable:!0}),e.init=function(a,t,l,s,c,u,d){if(void 0===l&&(l=n.NORMAL),void 0===s&&(s=!1),void 0===c&&(c=0),void 0===u&&(u=0),this.skipGuidePartAble=!1,this.endLessResetPlantCd=!0,this.gameMode=l,this.curChapter=a,this.mapId=d,this.curPart=t,this.midOut=!1,this.gamePause=!0,this.guideSunPause=!1,this.guideZombiePause=!1,this.selectCard=null,this.selectPlant=null,this.selectZombie=null,this.curImitaterPlant=null,this.cobCannon=null,this.adFreePlant=null,this.zombieWinShowMap=!1,this.finishShowWinShowMap=!1,this.zombieWinShowUI=!1,this.zombieWinInVase=!1,this.envPlantTip.clear(),this.pondPlantTip.clear(),this.specialPlantTip.clear(),this.gameSpecialTip.clear(),this.advancePlantMap.clear(),this.goldPlantMap.clear(),this.InflationPlantMap.clear(),this.tombTip=!1,this.cantPlantTip=!1,this.putZombieTipLeft=!1,this.putZombieTipRight=!1,this.sunLightCount=r.pzaWaveConfig.initSunCount,this.lossCar=!1,this.lossPlantCount=0,this.showSunUI=!0,this.grayPlantWarning=!1,this.cardIsMove=!1,this.bangCaring=!1,this.gameWin=!1,this.achieveArr=[],this.pickCoinCount=0,this.pickSunCount=0,this.costSunCount=0,this.pickGoldCnt=0,this.twinFlowerCount=0,this.killZombieTeam=0,this.cobCannonCount=0,this.winterMelon=[],this.usePeaPlant=!1,this.useThrowPlant=!1,this.onlyShroomCofee=!0,this.useShroom=!1,this.onlyBoomPlant=!0,this.usePlanternBlover=!1,this.usePondPlant=!1,this.gameSpeed=1,this.redLeft=0,this.autoPickLeft=p.pzaLocalData.data.autoPickLeft,this.cdReduceValue=0,this.sunReduceValue=0,this.critValue=0,this.maxMarigold=5e3,this.starModeGameOver=!1,this.starWaveOverFail=!1,this.map=i.pzaGameConfig.chapterMapConfig.get(d),this.isSelectPlant=!1,this.lockPlants=[],this.partWin=!1,this.allZombieInvisible=!1,this.hasPlantCandy=!1,this.createPlantNoCD=!1,this.ableShowBuyGift=!0,this.sunLightCount=c,this.leftMoney=5e3,this.leftMoneyTime=2,this.moneyIsNotEnough=!1,this.warnCol=null,this.forceCreateXY=null,this.competeKill=!1,this.speFailTips=null,this.getCoinByGameOnce=0,this.creatingBlock=null,this.warnLineTips=!0,this.newDropPlant=null,this.newDropType=null,this.demoScene=null,this.plantSelectScene=null,this.freePlantArr=[],this.extraAdPlantArr=[],this.pauseDropSunLight=!1,this.guideBattle=!1,this.clickExtraCardType=null,this.ExtraCardFreeCount=0,this.shareAble=!0,0==c&&(this.sunLightCount=50),this.isNightScene=u,this.gameTimeType=u?o.NIGHT:o.DAY,e.isMiniMode()&&4==t&&(this.sunLightCount=c),e.isMiniMode()&&11==t&&(this.gameSpeed=2),e.isZombieMode()&&(e.sunLightCount=150),e.gameMode==n.VASE_ENDLESS&&(e.sunLightCount=p.pzaLocalData.data.vaseEndLessSunCount,console.log("pzaGameState.sunLightCount",e.sunLightCount)),!s){4!=a&&9!=a||5!=t||(this.map=i.pzaGameConfig.chapterMapConfig.get(2)),this.newZombie=null;var h=10*p.pzaLocalData.data.curChapter+p.pzaLocalData.data.curPart>10*a+t,m=r.pzaGamePartConfig.getPartConfig(a,t);null==m||null==m.newZombieType||p.pzaLocalData.hasUnlockZombie(m.newZombieType)&&!1!==h||(this.newZombie=m.newZombieType),0==e.isTryMode(a,t)&&(this.lossStarCount=this.getPartLostPlantCount(),e.partStar=i.pzaGameConfig.getPartStar(a,t))}},e.getPartLostPlantCount=function(){return e.curChapter%5==1?3:e.curChapter%5==2||e.curChapter%5==4?7:5},e.getStorageSun=function(e){this.sunLightCount=e},e.endLessWin=function(){this.selectCard=null,this.selectPlant=null,this.selectZombie=null,this.cobCannon=null,this.costSunCount=0,this.pickCoinCount=0,this.pickGoldCnt=0,this.lossCar=!1,this.lossPlantCount=0,this.gameWin=!1,this.usePeaPlant=!1,this.useThrowPlant=!1,this.onlyShroomCofee=!0,this.useShroom=!1,this.onlyBoomPlant=!0,this.usePlanternBlover=!1,this.usePondPlant=!1,this.maxMarigold=5e3},e.restartGame=function(){this.leftMoney=5e3,this.leftMoneyTime=2,this.moneyIsNotEnough=!1,this.recordPlantData={}},e.survivalPartWin=function(){this.gamePause=!0,this.curPart++,e.endLessWin()},e.isMainMode=function(){return e.gameMode==n.NORMAL||e.gameMode==n.NORMAL_WEEKTWO||e.gameMode==n.ZOM_BOSS},e.hasMainConf=function(){return this.isMainMode()?r.pzaGamePartConfig.getPartConfig(this.curChapter,this.curPart):null},e.isSmallGame=function(){return e.gameMode==n.SMALL_ZOMBIE||e.gameMode==n.MINIGAME_SMALL},e.isEndLess=function(){return e.gameMode==n.SUR_ENDLESS||e.gameMode==n.SURVIVAL||e.gameMode==n.ZOMBIE_ENDLESS},e.isRoofMode=function(){return!1},e.isSurvival=function(){return this.gameMode==n.SURVIVAL||this.gameMode==n.SUR_ENDLESS},e.isZombieMode=function(){return this.gameMode==n.ZOMBIE_ENERMY||this.gameMode==n.ZOMBIE_ENDLESS},e.isVaseMode=function(){return this.gameMode===n.VASE||this.gameMode===n.VASE_ENDLESS},e.isMiniMode=function(){return this.gameMode==n.MINIGAME||this.gameMode==n.KNOCK_ZOMBIE_MINIGAME||this.gameMode==n.MINIGAME_SMALL},e.judgeIsMini=function(e){return e==n.MINIGAME||e==n.KNOCK_ZOMBIE||e==n.SMALL_ZOMBIE},e.judgeIsVase=function(e){return e==n.VASE},e.judgeIsZombie=function(e){return e==n.ZOMBIE_ENERMY},e.isWatchStarMode=function(){return e.isMiniMode()&&14==e.curPart},e.isPsdhMode=function(){return e.isMiniMode()&&e.curPart<=2},e.isTryMode=function(e,a){return 100==e&&1==a},e.isNoTargetMap=function(e){return e==l.pzaPlantEnum.UMBRELLA_LEAF},e.showUnlockZombie=function(){this.newZombie=null},e.addPlant=function(e){if(this.gameMode==n.SUR_ENDLESS){if(!i.pzaGameConfig.isAdvancePlant(e))return;var a=0;this.advancePlantMap.has(e)&&(a=this.advancePlantMap.get(e)),this.advancePlantMap.set(e,a+1)}},e.deletPlant=function(e){if(this.gameMode==n.SUR_ENDLESS){if(!this.advancePlantMap.has(e))return!1;var a=this.advancePlantMap.get(e);return this.advancePlantMap.set(e,Math.max(a-1,0)),!0}return!1},e.getPlantPrice=function(a,t){if(void 0===t&&(t=!1),a==l.pzaPlantEnum.IMITATER&&(a=e.curImitaterPlant),this.freePlantArr.includes(a))return 0;var o,n=i.pzaGameConfig.getPlantConfig(a),r=0;return null==n?r:(r=i.pzaGameConfig.isAdvancePlant(a)&&this.advancePlantMap.has(a)?t?n.getPrice()+50*this.advancePlantMap.get(a):Math.round((n.getPrice()+50*this.advancePlantMap.get(a))*(1-this.sunReduceValue)):t?n.getPrice():Math.round(n.getPrice()*(1-this.sunReduceValue)),o=this.advancePlantMap.get(a)||0,r=t?n.getPrice():n.getPrice()+100*o,this.sunDecreaseValue&&i.pzaGameConfig.getPlantConfig(a).rareLevel<4&&(r-=this.sunDecreaseValue)<0&&(r=0),this.sunDecreaseValueAllLevel&&(r-=this.sunDecreaseValueAllLevel)<0&&(r=0),r)},e.getDemoLogicPos=function(e,a,t){void 0===t&&(t=cc.v2(0,-this.demo_blockHeight/5));var o=e*this.demo_blockWidth+this.demo_startPos.x+t.x,n=a*this.demo_blockHeight+this.demo_startPos.y+t.y;return cc.v2(o,n)},e.curChapter=1,e._curPart=1,e.firstPassCurPart=!1,e.isGameEnd=!1,e.isMenuShow=!1,e.midOut=!1,e.hasPlantSelect=!1,e.gamePause=!0,e.guideBattle=!0,e.guideSunPause=!1,e.guideZombiePause=!1,e.selectCard=null,e.selectPlant=null,e.selectIdx=0,e.selectZombie=null,e.curImitaterPlant=null,e.cobCannon=null,e.adFreePlant=null,e.sunLightCount=50,e.pickSunCount=0,e.costSunCount=0,e.sunMoveUIPos=null,e.coinMoveUIPos=null,e.speedUIPos=null,e.guideSunPos=null,e.guideAutoPickPos=null,e.guideCherryPos=null,e.gameTimeType=o.DAY,e.gameMode=n.NORMAL,e.newZombie=null,e.zombieWinShowMap=!1,e.finishShowWinShowMap=!1,e.zombieWinShowUI=!1,e.zombieWinInVase=!1,e.partStar=3,e.lossCar=!1,e.lossPlantCount=0,e.lossStarCount=7,e.showSunUI=!0,e.envPlantTip=new Set,e.pondPlantTip=new Set,e.specialPlantTip=new Set,e.gameSpecialTip=new Set,e.tombTip=!1,e.cantPlantTip=!1,e.grayPlantWarning=!1,e.cardIsMove=!1,e.putZombieTipLeft=!1,e.putZombieTipRight=!1,e.bangCaring=!1,e.gameWin=!1,e.autoPickLeft=0,e.autoPickLock=!1,e.hadRevived=!1,e.achieveArr=[],e.pickCoinCount=0,e.pickGoldCnt=0,e.twinFlowerCount=0,e.killZombieTeam=0,e.cobCannonCount=0,e.winterMelon=[],e.usePeaPlant=!1,e.useThrowPlant=!1,e.onlyShroomCofee=!0,e.useShroom=!1,e.onlyBoomPlant=!0,e.usePlanternBlover=!1,e.usePondPlant=!1,e.gameSpeed=1,e.survivalConfig=null,e.miniGameConfig=null,e.zombieEndlessPart=1,e.zombiePuffCount=0,e.map=null,e.redLeft=0,e.advancePlantMap=new Map,e.goldPlantMap=new Map,e.InflationPlantMap=new Map,e.cdReduceValue=0,e.sunReduceValue=0,e.createPlantNoCD=!1,e.sunDecreaseValue=0,e.sunDecreaseValueAllLevel=0,e.hasPlantCandy=!1,e.critValue=0,e.maxMarigold=5e3,e.isInHandBookView=!1,e.starModeGameOver=!1,e.starWaveOverFail=!1,e.reviveViewBtnState=1,e.weekTwoInitPlants=[],e.lockPlants=[],e.miniGameIsClickBack=!1,e.isSelectPlant=!1,e.curTryPlantIndex=null,e.inGameTime=0,e.inGameTimeAcc=0,e.hasReportAliveOnly=!1,e.partWin=!1,e.allZombieInvisible=!1,e.adCherryBoomDmg=5e5,e.endLessResetPlantCd=!0,e.setBgmCount=0,e.ableShowBuyGift=!1,e.mapId=0,e.isNightScene=0,e.leftMoney=5e3,e.leftMoneyTime=2,e.moneyIsNotEnough=!1,e.recordPlantData={},e.scrollviewPos=cc.v2(0,0),e.phbLeftDay=0,e.phbPartId=0,e.phbLastRank=0,e.testUserId="_000DFmwtc490IfA15oeyXGHzCrLp572zu23",e.bpResetLeftDay=0,e.bpRewardPlantId=0,e.hasJoinChallenge=!1,e.isShowSpePlant=!1,e.beltLoginCircleDay=14,e.riderFallCircleDay=14,e.battleCircleDay=30,e.pirceReduce=0,e.warnCol=null,e.competeKill=!1,e.speFailTips=null,e.getCoinByGameOnce=0,e.creatingBlock=null,e.demoScene=null,e.plantSelectScene=null,e.warnLineTips=!0,e.freePlantArr=[],e.extraAdPlantArr=[],e.pauseDropSunLight=!1,e.clickExtraCardType=null,e.ExtraCardFreeCount=0,e.shareAble=!0,e.skipGuidePartAble=!1,e.demo_startPos=cc.v2(200,50),e.demo_blockWidth=120,e.demo_blockHeight=120,e}();t.pzaGameState=s,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaLocalData":"pzaLocalData","./Data/pzaPlantEnum":"pzaPlantEnum"}],pzaGameSurEndless:[function(e,a,t){"use strict";cc._RF.push(a,"3a13fbeYHtM9JhoujbIjtUz","pzaGameSurEndless");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameSurEndless=void 0;var i=e("../Achieve/pzaAchieve"),r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaBattleData"),l=e("../Battle/Plant/pzaAttackType"),s=e("../Battle/pzaGameState"),c=e("../View/pzaCommonMask"),u=e("../utils/pzaChannel"),d=e("../utils/pzakc"),h=e("./pzaGameManager"),m=e("./pzaGameSurvival"),f=e("./pzaLocalData"),z=e("./pzaRankMgr"),y=e("./pzaStatisticsMgr"),g=e("./pzaSurvivalConfig"),v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=s.pzaGameMode.SUR_ENDLESS,a}return n(a,e),a.prototype.isEndless=function(){return!0},a.prototype.getRankKey=function(){var e=u.pzaChannel.instance().channel;return"wx"!==e?e+"endless_rank_":"endless_rank_"},a.prototype.getGameModeName=function(){return"\u751f\u5b58\u65e0\u5c3d-"},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u751f\u5b58\u6a21\u5f0f\u201d\uff0c"+["\u57ce\u5e02\u8857\u9053","\u9ed1\u591c\u7981\u533a","\u6d77\u6ee9\u57ce\u9547","\u8ff7\u96fe\u5c9b\u5c7f","\u51b0\u5c01\u96ea\u5c71"][s.pzaGameState.curChapter-1]+"(\u65e0\u5c3d)\u7b2c"+(s.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a.prototype.initPartProcess=function(e){e.proLabel.node.active=!1;var a=s.pzaGameState.survivalConfig;if(null!=a){e.maxWave=a.maxWave;for(var t=Math.floor(e.maxWave/10),o=0;o<e.partFlags.length;o++){var n=e.partFlags[o];o+1>t?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/t-30,42))}e.zombieHeadNode.setPosition(-15,37),e.partProNode.active=!1,e.partProgress.fillRange=0;var i=["\u57ce\u5e02\u8857\u9053","\u9ed1\u591c\u7981\u533a","\u6d77\u6ee9\u57ce\u9547","\u8ff7\u96fe\u5c9b\u5c7f","\u51b0\u5c01\u96ea\u5c71"][s.pzaGameState.curChapter-1]+"(\u65e0\u5c3d):";s.pzaGameState.curPart>=1&&(i+="\u7b2c"+s.pzaGameState.curPart+"\u5173"),e.partLabel.string=i}},a.prototype.beforeLoad=function(e,a){s.pzaGameState.partStar=0,s.pzaGameState.survivalConfig=g.pzaSurvivalConfig.createEndlessConfig(e,a),s.pzaGameState.redLeft=s.pzaGameState.survivalConfig.redLimit,f.pzaLocalData.gameStartTimeStamp=Date.now();var t=100+e+5;y.pzaStatisticsMgr.sendLevelEvent(e+5,y.pzaEventLevelType.start,0,0,s.pzaGameMode.SURVIVAL),d.default.eventReport(t+"\u5173\u5361\u8fdb\u5165")},a.prototype.getZombieTypeArr=function(e){return g.pzaSurvivalConfig.getAllEndlessZombies(e)},a.prototype.readData=function(e){var a=f.pzaLocalBattleData.data.endlessBattleData[e-1];p.pzaBattleData.readData(a)},a.prototype.gameRestart=function(){s.pzaGameState.hadRevived=!1,f.pzaLocalBattleData.clearEndlessBattleData(s.pzaGameState.curChapter),this.loadAndStart(s.pzaGameState.curChapter,1)},a.prototype.updatePartProcess=function(a){e.prototype.updatePartProcess.call(this,a);var t=Math.floor(window.pzazombieManager.wave/10)-1;if(!(t<0||t>2)){var o=a.partFlags[t];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},a.prototype.partFail=function(){e.prototype.partFail.call(this),f.pzaLocalData.passSurvivalEndless(s.pzaGameState.curChapter,s.pzaGameState.curPart-1),f.pzaLocalBattleData.clearEndlessBattleData(s.pzaGameState.curChapter);var a=0;f.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-f.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=100+s.pzaGameState.curPart+5;y.pzaStatisticsMgr.sendLevelEvent(s.pzaGameState.curPart+5,y.pzaEventLevelType.failed,a,t,s.pzaGameMode.SURVIVAL),d.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),f.pzaLocalData.hasUseProp=!1},a.prototype.onZombieDeath=function(e,a,t,o){var n=this;if(t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)){var p=0;f.pzaLocalData.hasUseProp&&(p=1);var u=Date.now()-f.pzaLocalData.gameStartTimeStamp;u=Math.ceil(u/1e3);var m=100+s.pzaGameState.curPart+5;y.pzaStatisticsMgr.sendLevelEvent(s.pzaGameState.curPart+5,y.pzaEventLevelType.completed,p,u,s.pzaGameMode.SURVIVAL),d.default.eventReport(m+"\u5173\u5361\u6210\u529f"),f.pzaLocalData.hasUseProp=!1,h.pzaGameManager.getCurrentGame().checkAchieve(!1),c.pzaCommonMask.showMask(),z.pzaRankMgr.uploadEndlssScore(s.pzaGameState.curChapter,s.pzaGameState.curPart,function(e){c.pzaCommonMask.hideMask(),f.pzaLocalData.passSurvivalEndless(s.pzaGameState.curChapter,s.pzaGameState.curPart),n.nextPart(!1,e)}),f.pzaLocalData.bpEndlessPassPart(s.pzaGameState.curPart),o==l.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13)}},a.prototype.showPreviewTip=function(e,a,t){e.word.string=e.survivalPreviewTips[a-1]+"(\u65e0\u5c3d): \u7b2c"+t+"\u5173",t>1?(e.flagWord.node.active=!0,e.flagWord.string=""):e.flagWord.node.active=!1},a.prototype.partWin=function(a,t){e.prototype.partWin.call(this,a,t),f.pzaLocalData.rfRecordPassPart()},a}(m.pzaGameSurvival);t.pzaGameSurEndless=v,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaGameState":"pzaGameState","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameSurvival":"pzaGameSurvival","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaSurvivalConfig":"pzaSurvivalConfig"}],pzaGameSurvival:[function(e,a,t){"use strict";cc._RF.push(a,"25b1fp6ux1Drb6N1Vwwqh7X","pzaGameSurvival");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameSurvival=void 0;var i=e("../Achieve/pzaAchieve"),r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaBattleData"),l=e("../Battle/Data/pzaDropType"),s=e("../Battle/Data/pzaZombieEnum"),c=e("../Battle/Plant/pzaAttackType"),u=e("../Battle/pzaEffectManager"),d=e("../Battle/pzaGameState"),h=e("../Load/pzaPreLoadManager"),m=e("../View/Battle/pzaPlantSelectView"),f=e("../View/pzaCommonMask"),z=e("../View/pzaWarningView"),y=e("../utils/pzaChannel"),g=e("../utils/pzakc"),v=e("./pzaGameBase"),b=e("./pzaGameManager"),P=e("./pzaGamePartConfig"),C=e("./pzaLocalData"),E=e("./pzaOperationMgr"),S=e("./pzaRankMgr"),_=e("./pzaSoundManager"),D=e("./pzaStatisticsMgr"),M=e("./pzaSurvivalConfig"),w=e("./pzaTipManager"),T=e("./pzaUIManager"),A=e("./pzaUtil"),B=e("./pzaWorldEventManager"),G=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=d.pzaGameMode.SURVIVAL,a.isStopCreateSun=!1,a.stopCreateSunTime=0,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u751f\u5b58\u6a21\u5f0f-"},a.prototype.initMapPlantZombie=function(e,a){var t=M.pzaSurvivalConfig.getSurvivaliConfig(e,a);window.pzaMapManager.init(e,a,t.mapId),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.initGameState=function(e,a){var t,o=M.pzaSurvivalConfig.getSurvivaliConfig(e,a);t=o.initSun;var n=o.isnight;d.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),t,n,o.mapId),this.initMapPlantZombie(e,a)},a.prototype.getZombieTypeArr=function(e){return M.pzaSurvivalConfig.getAllZombies(e)},a.prototype.beforeLoad=function(e,a){d.pzaGameState.partStar=0,d.pzaGameState.survivalConfig=M.pzaSurvivalConfig.getSurvivaliConfig(e,a);var t=100+e;D.pzaStatisticsMgr.sendLevelEvent(e+5,D.pzaEventLevelType.start,0,0,d.pzaGameMode.SURVIVAL),g.default.eventReport(t+"\u5173\u5361\u8fdb\u5165")},a.prototype.readData=function(e){var a=C.pzaLocalBattleData.data.survivalBattleData[e-1];p.pzaBattleData.readData(a)},a.prototype.initPartProcess=function(e){e.proLabel.node.active=!1;var a=d.pzaGameState.survivalConfig;if(null!=a){e.maxWave=a.maxWave;for(var t=Math.floor(e.maxWave/10),o=0;o<e.partFlags.length;o++){var n=e.partFlags[o];o+1>t?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/t-30,42))}e.zombieHeadNode.setPosition(-15,37),e.partProNode.active=!1,e.partProgress.fillRange=0;var i="\u751f\u5b58\u6a21\u5f0f";d.pzaGameState.curPart>1&&(i+="\u7b2c"+(d.pzaGameState.curPart-1)+"\u5173"),e.partLabel.string=i}},a.prototype.updatePartProcess=function(a){if(e.prototype.updatePartProcess.call(this,a),1!=d.pzaGameState.curChapter||2!=d.pzaGameState.curPart&&3!=d.pzaGameState.curPart&&5!=d.pzaGameState.curPart){var t=Math.floor(window.pzazombieManager.wave/10)-1;if(!(t<0||t>2)){var o=a.partFlags[t];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}}else if(a.maxWave==window.pzazombieManager.wave){var n=a.partFlags[0];cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{y:72}).start()}},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.gameProp.node.active=!0,a.freePlantNode.active=!0,a.shovelShowNode.active=!0,a.speedBtn.active=!0,a.sunUIShowNode.active=!0},a.prototype.getSurvivalSunState=function(){return this.isStopCreateSun},a.prototype.refreshNextWave=function(a,t){if(e.prototype.refreshNextWave.call(this,a,t),a.lastWave)return this.stopCreateSunTime+=t,void(this.stopCreateSunTime>=60&&(this.isStopCreateSun=!0));this.stopCreateSunTime=0,this.isStopCreateSun=!1;var o=!1;if(d.pzaGameState.gameMode==d.pzaGameMode.SUR_ENDLESS&&(o=!1),(a.wave+1)%10==0||o){if(!a.hasShowRedTip){if(a.zombieMap.size<=0||a.curWaveTime>=P.pzaWaveConfig.activeRedTipTime){var n=d.pzaGameState.survivalConfig;null!=n&&n.maxWave==a.wave+1&&d.pzaGameState.gameMode==d.pzaGameMode.SURVIVAL&&5==d.pzaGameState.curPart&&(o=!0),a.showBigWaveTip(o,!1)}return}}else if(0!=a.wave&&a.nextWaveTime>P.pzaWaveConfig.preRefreshTime&&a.getCurWaveLeftHp()<=a.preRefreshHp)return void(a.nextWaveTime=P.pzaWaveConfig.preRefreshTime);a.curWaveTime<P.pzaWaveConfig.minRefreshTime||a.nextWaveTime>0||this.createWave(a)},a.prototype.createWave=function(a){e.prototype.createWave.call(this,a),1==a.wave?_.pzaSoundManager.playAudio("awooga"):_.pzaSoundManager.playAudio("groan1",1),a.nextWaveTime=P.pzaWaveConfig.getWaveRandomTime();var t=d.pzaGameState.survivalConfig;if(!(null==t||t.maxWave<a.wave)){t.maxWave==a.wave&&(a.lastWave=!0);var o=d.pzaGameState.curPart,n=t.getRandomWaveZombie(a.wave,!0,window.pzaMapManager.getIceYCount(),o,d.pzaGameState.redLeft);if(null!=n){var i=[];window.pzaMapManager.IceGroundSet.forEach(function(e){null==e||e.xIndex<0||e.yIndex<0||i.indexOf(e.yIndex)>=0||i.push(e.yIndex)});for(var r=d.pzaGameState.map.getMapRow(),p=!0,l=[],c=[],u=0;u<r;u++)c.push(u);c.sort(function(){return Math.random()-.5}),console.log("zombieTypeList ",n);var h=0;n.forEach(function(e){var o=t.getRandomWayIndex(h,e,c,a.wave);if(h++,e==s.pzaZombieEnum.BUNGEE_ZOMBIE){var n=window.pzaplantManager.getRandomBlock(!0,l);if(null==n)return;l.push(n);var r=n.split("-"),u=a.createFixBlockZombieData(e,parseInt(r[0]),parseInt(r[1]));return a.createZombie(u),void a.curWaveZombieDatas.add(u)}e==s.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&i.length>0&&(o=i.shift());var m=a.createZombieData(e,o);!p&&m.logicPos&&(m.logicPos.x+=A.pzaUtil.getRandomFloatNum(.2,1)*d.pzaGameState.map.getBlockWidth());var f=t.isShowPortalEffect(a.wave);e!=s.pzaZombieEnum.ZOMBONI&&e!=s.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM||(f=null),a.createZombie(m,null,null,null,null,null,null,f),a.curWaveZombieDatas.add(m),p=!1}),a.lastWave&&(this.createTombWaterWaveData(a),a.lastWayZombieTime=2,2==d.pzaGameState.curChapter&&window.pzaMapManager.randomCreateTomb(1))}}},a.prototype.isLastWave=function(e){return e.wave===d.pzaGameState.survivalConfig.maxWave},a.prototype.onZombieDeath=function(e,a,t,o){if(t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)){var n=0;C.pzaLocalData.hasUseProp&&(n=1);var p=Date.now()-C.pzaLocalData.gameStartTimeStamp;p=Math.ceil(p/1e3);var l=100+d.pzaGameState.curChapter;D.pzaStatisticsMgr.sendLevelEvent(d.pzaGameState.curChapter,D.pzaEventLevelType.completed,n,p,d.pzaGameMode.SURVIVAL),g.default.eventReport(l+"\u5173\u5361\u6210\u529f"),C.pzaLocalData.hasUseProp=!1,5==d.pzaGameState.curPart?(b.pzaGameManager.passPart(a.logicPos),C.pzaLocalBattleData.clearSurvivalBattleData(d.pzaGameState.curChapter)):(b.pzaGameManager.getCurrentGame().checkAchieve(!1),this.nextPart()),C.pzaLocalData.bpEndlessPassPart(d.pzaGameState.curPart),o==c.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13)}},a.prototype.showPreviewTip=function(e,a,t){e.word.string="\u751f\u5b58\u6a21\u5f0f\uff1a"+e.survivalPreviewTips[a-1],t>1?(e.flagWord.node.active=!0,e.flagWord.string="\u5b8c\u6210\u65d7\u5e1c"):e.flagWord.node.active=!1},a.prototype.clickSelectPartInFailView=function(){if(C.pzaLocalData.data.preOpenSurvival)return C.pzaLocalData.data.preOpenSurvival=!1,C.pzaLocalData.addDirty("preOpenSurvival"),void T.pzaUIManager.baseShowBoardUI(h.pzaResourceUrl.HOME_SELECT_VIEW,null);T.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.SURVIVAL_VIEW,function(){T.pzaUIManager.baseShowBoardUI(h.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.winDrop=function(){C.pzaLocalData.rfRecordPassPart();var e=l.pzaDropType.COIN_PACKAGE;return!C.pzaLocalData.data.preOpenSurvival&&C.pzaLocalData.passSurvival(d.pzaGameState.curChapter)&&(e=l.pzaDropType.SURVIVAL_TROPHY),"my"===y.pzaChannel.instance().channel&&y.pzaChannel.instance().getChannel().actSubmit(),e},a.prototype.showPassUiNoStar=function(){C.pzaLocalData.data.preOpenSurvival?(C.pzaLocalData.data.preOpenSurvival=!1,C.pzaLocalData.addDirty("preOpenSurvival"),T.pzaUIManager.baseShowBoardUI(h.pzaResourceUrl.HOME_SELECT_VIEW,function(){E.pzaOperationMgr.showCreativeVaseModeGift(null)})):T.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.SURVIVAL_VIEW,function(){T.pzaUIManager.baseShowBoardUI(h.pzaResourceUrl.HOME_SELECT_VIEW,function(){E.pzaOperationMgr.showCreativeVaseModeGift(null)})})},a.prototype.gameStart=function(a,t){var o=this;e.prototype.resetTryPlant.call(this),this.beforeGameStart(a,t);var n=this.gameMode===d.pzaGameMode.SURVIVAL?C.pzaLocalBattleData.data.survivalBattleData[a-1]:C.pzaLocalBattleData.data.endlessBattleData[a-1];if(n)return this.gameMode===d.pzaGameMode.SURVIVAL?d.pzaGameState.survivalConfig=M.pzaSurvivalConfig.getSurvivaliConfig(d.pzaGameState.curChapter,d.pzaGameState.curPart):d.pzaGameState.survivalConfig=M.pzaSurvivalConfig.createEndlessConfig(d.pzaGameState.curChapter,d.pzaGameState.curPart),window.pzaMapManager.initMapPos(!1),window.pzaplantManager.recoverSurvivalPlant(n),window.pzaMapManager.recoverMap(n),window.pzaplantManager.createInitPlant(),0==n.state?(b.pzaGameManager.showBattleUI(h.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){var a=e&&e.getComponent(m.pzaPlantSelectView);a&&a.survivalInit(n.selectPlants,null)}),window.pzaMapManager.openBattleUI()):1==n.state&&w.pzaTipManager.showPreviewTip(d.pzaGameState.curChapter,d.pzaGameState.curPart+1,d.pzaGameState.gameMode,null),void T.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(e){var i=e&&e.getComponent(z.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){0==n.state&&(window.pzaMapManager.closeBattleUI(),window.pzaMapManager.fogEnter(function(){u.pzaEffectManager.createReadyWord(function(){o.playBgm(),f.pzaCommonMask.hideMask(),d.pzaGameState.gamePause=!1,window.pzaMapManager.openBattleUI(),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)})})),1==n.state&&o.nextPart(!0)},function(){n.gameMode==d.pzaGameMode.SURVIVAL?C.pzaLocalBattleData.clearSurvivalBattleData(n.chapter):n.gameMode==d.pzaGameMode.SUR_ENDLESS&&C.pzaLocalBattleData.clearEndlessBattleData(n.chapter),b.pzaGameManager.removeBattleUI(),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_OVER,null),o.firstStart(a,t)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,C.pzaLocalData.endLessPowerCost,!0,2)});this.normalStartGameCall(a,t)},a.prototype.gameRestart=function(){d.pzaGameState.hadRevived=!1,C.pzaLocalBattleData.clearSurvivalBattleData(d.pzaGameState.curChapter),this.loadAndStart(d.pzaGameState.curChapter,1)},a.prototype.gameRecover=function(e,a){var t=this;T.pzaUIManager.removeBoardUI(),d.pzaGameState.midOut=!1,T.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(z.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){d.pzaGameState.hasPlantSelect?_.pzaSoundManager.playBgm(_.pzaBGMName.PRE_BGM):(d.pzaGameState.gamePause=!1,A.pzaUtil.changeGameSpeed(d.pzaGameState.gameSpeed),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null),t.playBgm())},function(){var o=function(){b.pzaGameManager.removeBattleUI(),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_OVER,null),t.firstStart(e,a)};t.gameMode==d.pzaGameMode.SURVIVAL?C.pzaLocalBattleData.clearSurvivalBattleData(d.pzaGameState.curChapter):t.gameMode==d.pzaGameMode.SUR_ENDLESS&&C.pzaLocalBattleData.clearEndlessBattleData(d.pzaGameState.curChapter),d.pzaGameState.gameMode==d.pzaGameMode.SUR_ENDLESS?S.pzaRankMgr.queryMyRank(d.pzaGameState.curChapter,o):o()},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,C.pzaLocalData.endLessPowerCost,!0,2)})},a.prototype.partFail=function(){e.prototype.partFail.call(this),C.pzaLocalBattleData.clearSurvivalBattleData(d.pzaGameState.curChapter);var a=0;C.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-C.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=100+d.pzaGameState.curChapter;D.pzaStatisticsMgr.sendLevelEvent(d.pzaGameState.curChapter,D.pzaEventLevelType.failed,a,t,d.pzaGameMode.SURVIVAL),g.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),C.pzaLocalData.hasUseProp=!1},a.prototype.nextPart=function(e,a){var t=this;void 0===e&&(e=!1),void 0===a&&(a=null),A.pzaUtil.changeGameSpeed(1),d.pzaGameState.gameWin=!0,f.pzaCommonMask.showMask();var o=function(){f.pzaCommonMask.hideMask(),d.pzaGameState.survivalPartWin(),t.gameMode===d.pzaGameMode.SURVIVAL?d.pzaGameState.survivalConfig=M.pzaSurvivalConfig.getSurvivaliConfig(d.pzaGameState.curChapter,d.pzaGameState.curPart):d.pzaGameState.survivalConfig=M.pzaSurvivalConfig.createEndlessConfig(d.pzaGameState.curChapter,d.pzaGameState.curPart),window.pzaMapManager.previewMap(function(){b.pzaGameManager.showBattleUI(h.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){f.pzaCommonMask.hideMask();var a=e&&e.getComponent(m.pzaPlantSelectView);d.pzaGameState.cardIsMove=!1,a&&a.survivalInit(null,function(){var e=p.pzaBattleData.saveData(0);d.pzaGameState.gameMode==d.pzaGameMode.SURVIVAL?C.pzaLocalBattleData.saveSurvivalBattleData(e):d.pzaGameState.gameMode==d.pzaGameMode.SUR_ENDLESS&&C.pzaLocalBattleData.saveEndlessBattleData(e),f.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.fogEnter(function(){u.pzaEffectManager.createReadyWord(function(){t.playBgm(),f.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),a&&a.initPlant(),d.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null),A.pzaUtil.changeGameSpeed(d.pzaGameState.gameSpeed)})})})})})},!0)};if(e)o();else{var n=p.pzaBattleData.saveData(1);d.pzaGameState.gameMode==d.pzaGameMode.SURVIVAL?C.pzaLocalBattleData.saveSurvivalBattleData(n):d.pzaGameState.gameMode==d.pzaGameMode.SUR_ENDLESS&&C.pzaLocalBattleData.saveEndlessBattleData(n);var i="\u66f4\u591a\u602a\u4eba\u6765\u88ad\uff01";null!=a&&(i+="\n"+a),"my"===y.pzaChannel.instance().channel&&y.pzaChannel.instance().getChannel().actSubmit();var r=!1;w.pzaTipManager.showGameTip(i,function(){r=!0,t.showGameTipNext(),o()}),setTimeout(function(){r||!t||d.pzaGameState.gamePause||(r=!0,t.showGameTipNext(),o(),w.pzaTipManager.hideGuideTip())},6e3)}},a.prototype.showGameTipNext=function(){B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.CLOSE_REDTIP,null),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_PAUSE,null),window.pzaMapManager.closeBattleUI(),window.pzaMapManager.removeFog(),window.pzaMapManager.removeAllIceGround(),b.pzaGameManager.removeBattleUI(),f.pzaCommonMask.showMask(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),_.pzaSoundManager.clearAllLoopAudio()},a.prototype.partWin=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=null),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_OVER,null),b.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),y.pzaChannel.instance().showInter(!0),g.default.eventReport("\u751f\u5b58\u6a21\u5f0f-"+d.pzaGameState.curChapter+"\u6210\u529f")},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u751f\u5b58\u6a21\u5f0f\u201d\uff0c"+["\u57ce\u5e02\u8857\u9053","\u9ed1\u591c\u7981\u533a","\u6d77\u6ee9\u57ce\u9547","\u8ff7\u96fe\u5c9b\u5c7f","\u51b0\u5c01\u96ea\u5c71"][d.pzaGameState.curChapter-1]+"\u7b2c"+d.pzaGameState.curPart+"\u9762\u65d7\u5e1c\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a}(v.pzaGameBase);t.pzaGameSurvival=G,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaSurvivalConfig":"pzaSurvivalConfig","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameTime:[function(e,a,t){"use strict";cc._RF.push(a,"6596eId2FRLVqFNHXeYVQ+4","pzaGameTime");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameTime=void 0;var r=e("../Battle/pzaGameState"),p=e("../utils/pzaChannel"),l=e("./pzaLocalData"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.saveRemoteInterval=0,a.gameInterval=0,a}return n(a,e),a.prototype.update=function(e){if(this.saveRemoteInterval+=e,this.gameInterval+=e,!l.pzaLocalData.gardenGuiding&&l.pzaLocalData.hasDirty&&l.pzaLocalData.localSaveData(),this.gameInterval>3&&(r.pzaGameState.setBgmCount=0,this.gameInterval=0),!p.pzaChannel.isConfRemote&&this.saveRemoteInterval>600){var a=p.pzaChannel.instance().getChannel();p.pzaChannel.saveToRemote(a.channelUserId,l.pzaLocalData.data),this.saveRemoteInterval=0}},i([c],a)}(cc.Component));t.pzaGameTime=u,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaGameTouch:[function(e,a,t){"use strict";cc._RF.push(a,"ac5c4atzNFKvqhf2EX+LIiv","pzaGameTouch");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameTouch=void 0;var r=cc._decorator,p=r.ccclass,l=(r.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node._touchListener.setSwallowTouches(!1)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},a.prototype.touchStart=function(e){this.touch(e,!0)},a.prototype.touchMove=function(e){this.touch(e,!1)},a.prototype.touch=function(e,a){var t=e&&e.getLocation();if(null!=t){var o=this.node.convertToNodeSpaceAR(t),n=!1;window.pzaplantManager.AllSunLight.forEach(function(e){e&&e.node&&(Math.abs(e.node.x-o.x)>50||Math.abs(e.node.y-o.y)>50||(e.clickSun(),n=!0))}),window.pzaMapManager.DropCoinSet.forEach(function(e){e&&e.node&&(Math.abs(e.node.x-o.x)>35||Math.abs(e.node.y-o.y)>35||(e.clickCoin(),n=!0))}),a&&n&&this.node._touchListener.setSwallowTouches(!0)}},a.prototype.touchEnd=function(){this.node._touchListener.setSwallowTouches(!1)},a.prototype.setSwllowTouch=function(){null!=this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1)},i([p],a)}(cc.Component));t.pzaGameTouch=l,cc._RF.pop()},{}],pzaGameVaseEndless:[function(e,a,t){"use strict";cc._RF.push(a,"47c3chsWYZLA6hDmnpsTMNx","pzaGameVaseEndless");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameVaseEndless=void 0;var i=e("../Battle/Data/pzaDropType"),r=e("../Battle/Data/pzaPlantEnum"),p=e("../Battle/pzaEffectManager"),l=e("../Battle/pzaGameState"),s=e("../Load/pzaPreLoadManager"),c=e("../View/Battle/pzaBattleUpView"),u=e("../View/Battle/pzaPlantSelectView"),d=e("../View/pzaCommonMask"),h=e("../utils/pzaChannel"),m=e("../utils/pzakc"),f=e("./pzaCollisionManager"),z=e("./pzaGameManager"),y=e("./pzaGameVase"),g=e("./pzaLocalData"),v=e("./pzaNodeManager"),b=e("./pzaRankMgr"),P=e("./pzaSoundManager"),C=e("./pzaStatisticsMgr"),E=e("./pzaTipManager"),S=e("./pzaUtil"),_=e("./pzaWorldEventManager"),D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.endLessRound=0,a.changeRound=10,a.gameMode=l.pzaGameMode.VASE_ENDLESS,a.myRank=0,a.nextPartTimer=null,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u7834\u7f50\u8005\u65e0\u5c3d-"},a.prototype.getRankKey=function(){return"vase_endless_rank"},a.prototype.isEndless=function(){return!0},a.prototype.initPartProcess=function(e){e.partLabel.string=this.getConf(l.pzaGameState.curPart).name+(this.endLessRound>1?"-\u8bb0\u5f55\uff1a"+this.endLessRound:""),e.partProNode.active=!1,e.zombieHeadNode.active=!1},a.prototype.loadAndStart=function(a,t){this.endLessRound=g.pzaLocalData.data.vaseEndLessLevelIndex,l.pzaGameState.sunLightCount=g.pzaLocalData.data.vaseEndLessSunCount,e.prototype.loadAndStart.call(this,a,t)},a.prototype.gameStart=function(a,t){e.prototype.resetTryPlant.call(this),g.pzaLocalData.gameStartTimeStamp=Date.now();var o=300+t;C.pzaStatisticsMgr.sendLevelEvent(t,C.pzaEventLevelType.start,0,0,l.pzaGameMode.VASE),m.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),d.pzaCommonMask.hideMask(),l.pzaGameState.hadRevived=!1;var n=this;b.pzaRankMgr.queryLeaderBoardRank(b.pzaRankMgr.Vase_Rank_Key,function(e){n.endLessRound=g.pzaLocalData.data.vaseEndLessLevelIndex,console.log("self.endLessRound :",n.endLessRound),g.pzaLocalData.addDirty("vaseEndLessLevelIndex"),l.pzaGameState.showSunUI=!1,n.myRank=e,n.startCall(),v.pzaNodeManager.getBattleUINode().getChildByName("BattleUpUI").getComponent(c.pzaBattleUpView).partLabel.string=n.getConf(l.pzaGameState.curPart).name+(n.endLessRound>0?"-\u8bb0\u5f55\uff1a"+n.endLessRound:""),l.pzaGameState.sunLightCount>0&&(window.pzaMapManager.showSunUI(),z.pzaGameManager.showBattleUI(s.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){var a=e&&e.getComponent(u.pzaPlantSelectView);a&&a.init([r.pzaPlantEnum.CHERRY_BOMB],function(){a&&a.initPlant()})}))})},a.prototype.gameRestart=function(){this.endLessRound=0,g.pzaLocalData.data.vaseEndLessLevelIndex=0,g.pzaLocalData.data.vaseEndLessSunCount=0,g.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount"),e.prototype.gameRestart.call(this)},a.prototype.showTip=function(e){var a=this;void 0===e&&(e=null),S.pzaUtil.changeGameSpeed(1),l.pzaGameState.gameWin=!0;var t="\u6311\u6218\u66f4\u591a\u5173\u5361\uff01\n\u5df2\u5b8c\u6210"+this.endLessRound+"\u5173",o=g.pzaLocalData.data.vaseFlagCount;o&&(t+="\n\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\uff1a"+o,this.myRank&&this.myRank>0&&(t+=" \u5168\u670d\u6392\u540d"+this.myRank)),null!=e&&(t+="\n"+e),this.nextPartTimer=setInterval(function(){a.doNextPart()},4e3),E.pzaTipManager.showGameTip(t,null)},a.prototype.winDrop=function(){return g.pzaLocalData.rfRecordPassPart(),null},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u661f\u8fb0\u8bd5\u70bc\u201d\uff0c"+this.getConf(this.endLessId).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a.prototype.partWin=function(e,a,t){void 0===t&&(t=!1),g.pzaLocalData.rfRecordPassPart(),t&&_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),this.nextPart(e,a),"my"===h.pzaChannel.instance().channel&&h.pzaChannel.instance().getChannel().actSubmit()},a.prototype.startCall=function(){e.prototype.startCall.call(this),E.pzaTipManager.showGameTip("\u7834\u574f\u6240\u6709\u7684\u7f50\u5b50\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01")},a.prototype.doNextPart=function(){clearInterval(this.nextPartTimer),console.log("\u7834\u7f50\u8005\u4e0b\u4e00\u6ce2",this.endLessRound),S.pzaUtil.changeGameSpeed(l.pzaGameState.gameSpeed),this.endLessRound%this.changeRound==0&&console.log("\u8fc7\u4e86"+this.changeRound+"\u6ce2\u4e86,\u6389\u5de7\u514b\u529b\u5e76\u591a\u4e00\u4e2a\u5de8\u4eba"),P.pzaSoundManager.playBgm(P.pzaBGMName.PUZZLE_BGM),v.pzaNodeManager.getBattleUINode().getChildByName("BattleUpUI").getComponent(c.pzaBattleUpView).partLabel.string=this.getConf(l.pzaGameState.curPart).name+(this.endLessRound>0?"-\u8bb0\u5f55\uff1a"+this.endLessRound:""),l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.SELECT_CARD,null),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),m.default.removeNodeChildren(v.pzaNodeManager.getCardsNode()),window.pzazombieManager.lastWave=!1;for(var e=this.getConf(this.endLessId),a=m.default.strArr(e.zombie),t=m.default.strArr(e.plant),o=Math.floor((this.endLessRound+1)/this.changeRound);o>0;){o--;for(var n=0,i=0;i<a.length&&!(n>=2);i++)if((s=a[i]).startsWith("1-")){if((r=parseInt(s.substring(2)))>1){a[i]="1-"+(r-1),n++;continue}if(1===r){a.splice(i,1),i--,n++;continue}}else if(s.startsWith("26-")){var r=parseInt(s.substring(3));a[i]="26-"+(r+1),n++;continue}}var p=6;for(i=0;i<a.length;i++)(s=a[i]).startsWith("1-")?p+=r=parseInt(s.substring(2)):s.startsWith("26-")&&(p+=r=parseInt(s.substring(3)));for(i=0;i<a.length;i++){var s;if((s=a[i]).startsWith("26-")){for(r=parseInt(s.substring(3));p>15;)r--,p--;a[i]="26-"+r;break}}this.gameInit(e,a,t),l.pzaGameState.gamePause=!1,f.pzaCollisionManager.getInstance.setOn()},a.prototype.nextPart=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=null);var t=this;t.endLessRound++,d.pzaCommonMask.showMask(),b.pzaRankMgr.uploadLeaderboardScore(b.pzaRankMgr.Vase_Rank_Key,t.endLessRound,g.pzaLocalData.data.vaseFlagCount,function(){g.pzaLocalData.data.vaseEndLessLevelIndex=t.endLessRound,g.pzaLocalData.data.vaseEndLessSunCount=l.pzaGameState.sunLightCount,console.log("pzaGameState.sunLightCount",l.pzaGameState.sunLightCount),g.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount"),d.pzaCommonMask.hideMask(),t.endLessRound>g.pzaLocalData.data.vaseFlagCount&&(g.pzaLocalData.data.vaseFlagCount=t.endLessRound,g.pzaLocalData.addDirty("vaseFlagCount")),t.endLessRound%3!=0?t.showTip(null,t.doNextPart):p.pzaEffectManager.createDropCard(i.pzaDropType.COIN_PACKAGE,null,cc.v2(),function(){t.showTip(null,t.doNextPart)})}),g.pzaLocalData.bpEndlessPassPart(t.endLessRound)},a.prototype.partFail=function(){e.prototype.partFail.call(this);var a=0;g.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-g.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=300+l.pzaGameState.curPart;C.pzaStatisticsMgr.sendLevelEvent(l.pzaGameState.curPart,C.pzaEventLevelType.failed,a,t,l.pzaGameMode.VASE_ENDLESS),m.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),g.pzaLocalData.hasUseProp=!1},a}(y.pzaGameVase);t.pzaGameVaseEndless=D,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaBattleUpView":"pzaBattleUpView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameManager":"pzaGameManager","./pzaGameVase":"pzaGameVase","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameVase:[function(e,a,t){"use strict";cc._RF.push(a,"ff73fmGXbpGz5Qjre4T4OU8","pzaGameVase");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameVase=void 0;var i=e("../Battle/Data/pzaDropType"),r=e("../Battle/Data/pzaJarData"),p=e("../Battle/Data/pzaPlantEnum"),l=e("../Battle/pzaEffectManager"),s=e("../Battle/pzaGameState"),c=e("../Load/pzaBundleObjectPool"),u=e("../Load/pzaPreLoadManager"),d=e("../MiniVase/pzaMiniVaseConf"),h=e("../View/pzaCommonMask"),m=e("../utils/pzaChannel"),f=e("../utils/pzaResMgr"),z=e("../utils/pzakc"),y=e("./pzaCollisionManager"),g=e("./pzaGameBase"),v=e("./pzaGameManager"),b=e("./pzaLocalData"),P=e("./pzaSoundManager"),C=e("./pzaStatisticsMgr"),E=e("./pzaTipManager"),S=e("./pzaUIManager"),_=e("./pzaWorldEventManager"),D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=s.pzaGameMode.VASE,a.confMap=null,a.endLessId=0,a}return n(a,e),a.prototype.init=function(){if(null!==this.confMap)return this;var e=f.pzaResMgr.instance().getConf("a12");this.confMap=new Map;for(var a=0;a<e.length;a++){var t=new d.pzaMiniVaseConf(e[a]);this.confMap.set(t.id,t),t.endless&&(this.endLessId=t.id)}return this},a.prototype.getConf=function(e){return this.confMap.get(e)},a.prototype.getGameModeName=function(){return"\u661f\u8fb0\u8bd5\u70bc-"},a.prototype.playBgm=function(){P.pzaSoundManager.playBgm(P.pzaBGMName.PUZZLE_BGM)},a.prototype.initPartProcess=function(e){e.partLabel.string=this.getConf(s.pzaGameState.curPart).name,e.partProNode.active=!1,e.zombieHeadNode.active=!1},a.prototype.showBattlePropButtons=function(e){e.freeSunNode.active=s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS,e.cherryBombNode.active=!1,e.autoPickNode.active=!0,e.clearCDNode.active=!1},a.prototype.clickSelectPartInFailView=function(){S.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){S.pzaUIManager.baseShowBoardUI(u.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.getAdPlantArr=function(){return[p.pzaPlantEnum.PLANTERN,p.pzaPlantEnum.SQUASH,p.pzaPlantEnum.ICE_SHROOM]},a.prototype.updatePartProcess=function(){},a.prototype.refreshNextWave=function(){},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.speedBtn.active=!0,a.shovelShowNode.active=!0,a.sunUIShowNode.active=!1,a.freePlantNode.active=!0,a.pauseBtn.active=!0,a.skipPartBtn.active=!1},a.prototype.gameInit=function(e,a,t){b.pzaLocalData.testMode=!1,window.pzaMapManager.initMapPos(!1),window.pzazombieManager.wave=1;for(var o=[],n=0;n<t.length;n++)if(2===(d=t[n].split("-")).length)for(var i=parseInt(d[0]),p=parseInt(d[1]),l=0;l<p;l++)(m=new r.pzaJarData(0,0)).plantType=i,o.push(m);else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef3",e.id);var c=z.default.randomChooseIndex(o,e.green);for(n=0;n<e.green;n++)o[c[n]].jarType=r.pzaJarType.GREEN_JAR;var u=o.length;for(n=0;n<a.length;n++){var d;if(2===(d=a[n].split("-")).length){var h=parseInt(d[0]);for(p=parseInt(d[1]),l=0;l<p;l++){var m;(m=new r.pzaJarData(0,0)).zombieType=h,o.push(m)}}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef2",e.id)}if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS){var f=z.default.randomInt(1,3);for(n=u;n<u+f;n++)o[n].jarType=r.pzaJarType.ZOMBIE_JAR}if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS){var y=o[u-1];y.isSunLight=!0,y.plantType=null,y.zombieType=null,y.jarType=r.pzaJarType.BRONZE_JAR}z.default.shuffle(o);for(var g=e.min-1;g<e.max;g++)for(var v=0;v<5;v++){var P=o.shift();if(!P)return;P.xIndex=g,P.yIndex=v,P.hasColli=!0,window.pzaplantManager.createJar(P)}},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u661f\u8fb0\u8bd5\u70bc\u201d\uff0c"+this.getConf(s.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a.prototype.initGameState=function(e,a){s.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),0,1,2),this.initMapPlantZombie(2,1)},a.prototype.initMapPlantZombie=function(e,a){window.pzaMapManager.init(e,a,2),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.preLoad=function(e,a,t){this.init(),s.pzaGameState.autoPickLock=!1,s.pzaGameState.isGameEnd=!1;var o=[new u.pzaResourceDetail(u.pzaResourceUrl.SUN),new u.pzaResourceDetail(u.pzaResourceUrl.CLEANER_CAR),new u.pzaResourceDetail(u.pzaResourceUrl.WORD_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.SHADOW),new u.pzaResourceDetail(u.pzaResourceUrl.SHOVEL_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.PLANT_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_COIN),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_CARD),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_PLANT_CARD),new u.pzaResourceDetail(u.pzaResourceUrl.JAR),new u.pzaResourceDetail(u.pzaResourceUrl.HAMMER_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.FOG_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.TOMB),new u.pzaResourceDetail(u.pzaResourceUrl.TOMB),new u.pzaResourceDetail(u.pzaResourceUrl.PLANT_ICON,u.pzaResourceType.SpriteFrameDir),new u.pzaResourceDetail(u.pzaResourceUrl.ZOMBIE_ICON,u.pzaResourceType.SpriteFrameDir)];this.initGameState(e,a);var n=this.getConf(a);if(n){var i=z.default.strArr(n.zombie),r=z.default.strArr(n.plant);if(i&&r){for(var p=0;p<i.length;p++)if(2===(h=i[p].split("-")).length){var d=u.pzaPreLoadManager.getZombieUrl(parseInt(h[0]));null!=d?(o.push(new u.pzaResourceDetail(d)),null!=(f=u.pzaPreLoadManager.getSubResources(d))&&o.concat(f)):console.error("zombieUrl",h[0])}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",a,i[p]);for(p=0;p<r.length;p++){var h;if(2===(h=r[p].split("-")).length){var m=parseInt(h[0]);50===m&&(m=8);var f,y=u.pzaPreLoadManager.getPlantUrl(m);null!=y?(o.push(new u.pzaResourceDetail(y)),null!=(f=u.pzaPreLoadManager.getSubResources(y))&&o.concat(f)):console.error("theur",m)}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",a,r[p])}S.pzaUIManager.showLoading(),l.pzaEffectManager.createGroveEffect(),P.pzaSoundManager.clearAllLoopAudio(),this.gameInit(n,i,r),c.pzaBundleObjectPool.preLoadSubResource(o,function(){S.pzaUIManager.hideLoading(t)},function(e){S.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*e)))})}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef",a)}else z.default.err("\u7834\u7f50\u8005id\u9519\u8bef",a)},a.prototype.startCall=function(){P.pzaSoundManager.playBgm(P.pzaBGMName.PUZZLE_BGM),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,y.pzaCollisionManager.getInstance.setOn(),1==s.pzaGameState.curPart&&E.pzaTipManager.showGameTip("\u7834\u574f\u6240\u6709\u7684\u7f50\u5b50\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01")},a.prototype.gameStart=function(a,t){e.prototype.resetTryPlant.call(this),b.pzaLocalData.gameStartTimeStamp=Date.now();var o=300+t;C.pzaStatisticsMgr.sendEvent("level",{name:"level",value:o},{name:"is_Win",value:2},{name:"Use",value:0},{name:"time",value:0}),z.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),h.pzaCommonMask.hideMask(),window.pzaGuideManager.guideStart(this.startCall.bind(this)),window.pzaGuideManager.guideShow(this.startCall.bind(this)),s.pzaGameState.hadRevived=!0},a.prototype.showPassUiNoStar=function(){S.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){S.pzaUIManager.baseShowBoardUI(u.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.winDrop=function(){var e=i.pzaDropType.COIN_PACKAGE;return b.pzaLocalData.passVaseMode(s.pzaGameState.curPart)&&(e=i.pzaDropType.VASE_TROPHY),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit(),e},a.prototype.partWin=function(){_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),v.pzaGameManager.removeBattleUI(),m.pzaChannel.instance().showInter(!0),S.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.GameWinNoStarView,null);var e=0;b.pzaLocalData.hasUseProp&&(e=1);var a=Date.now()-b.pzaLocalData.gameStartTimeStamp;a=Math.ceil(a/1e3);var t=300+s.pzaGameState.curPart;C.pzaStatisticsMgr.sendEvent("level",{name:"level",value:t},{name:"is_Win",value:1},{name:"Use",value:e},{name:"time",value:a}),z.default.eventReport(t+"\u5173\u5361\u6210\u529f"),b.pzaLocalData.hasUseProp=!1},a.prototype.partFail=function(){e.prototype.partFail.call(this);var a=0;b.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-b.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=300+s.pzaGameState.curPart;C.pzaStatisticsMgr.sendEvent("level",{name:"level",value:o},{name:"is_Win",value:0},{name:"Use",value:a},{name:"time",value:t}),z.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),b.pzaLocalData.hasUseProp=!1},a.prototype.onZombieDeath=function(e,a,t,o){if(void 0===t&&(t=!0),void 0===o&&(o=null),t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.checkAllZombieDeath(e))if(e.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(e){null!=e&&null!=e.jarData&&null!=e.jarData.zombieType&&(n=!0)}),n||v.pzaGameManager.passPart(a.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(s.pzaGameState.gameMode===s.pzaGameMode.VASE)return void v.pzaGameManager.passPart(a.logicPos);if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS)return void v.pzaGameManager.getCurrentGame().partWin();e.specialNextWaveTime=1}},a}(g.pzaGameBase);t.pzaGameVase=D,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniVase/pzaMiniVaseConf":"pzaMiniVaseConf","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameWinNoStarView:[function(e,a,t){"use strict";cc._RF.push(a,"d0ea0l9sYRITaDm1PsVN9qY","pzaGameWinNoStarView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameWinNoStarView=void 0;var r=e("../../Battle/Data/pzaGuideType"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaSoundManager"),d=e("../../Common/pzaUIManager"),h=e("../../Common/pzaWorldEventManager"),m=e("../../Garden/pzaGardenView"),f=e("../../Load/pzaPreLoadManager"),z=e("../../utils/pzaChannel"),y=e("../../Load/pzaBundleObjectPool"),g=e("../../Common/pzaOperationMgr"),v=e("../pzaCommonMask"),b=e("../../Common/pzaGameSurvival"),P=e("../../Common/pzaStatisticsMgr"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.mainViewBtn=null,a.nextBtn=null,a.shareBtn=null,a.bottomHome=null,a.rewardView=null,a.rewardLB=null,a.rewardBubble=null,a.blockTouch=!1,a.shareAble=!0,a}return n(a,e),a.prototype.onEnable=function(){var e=this;h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.JUMP_VIEW,"dialog"),this.addCoin(),this.mainViewBtn.active=!0,this.bottomHome.active=!0,this.showGift(),this.shareBtn.active=p.pzaGameState.shareAble,p.pzaGameState.shareAble?(this.mainViewBtn.x=-266,this.nextBtn.x=-2,this.rewardBubble=null,setTimeout(function(){g.pzaOperationMgr.showShareBubble(e.shareBtn,function(a){e.rewardBubble=a})},1)):(this.mainViewBtn.x=-150,this.nextBtn.x=180),p.pzaGameState.getCoinByGameOnce>0?(this.rewardView.active=!0,this.rewardLB.string="\u91d1\u5e01*"+p.pzaGameState.getCoinByGameOnce):this.rewardView.active=!1,setTimeout(function(){y.pzaBundleObjectPool.clearCachePool()},500);var a=z.pzaChannel.instance().getChannel();z.pzaChannel.saveToRemote(a.channelUserId,c.pzaLocalData.data)},a.prototype.setCloseCall=function(e){this.nextCall=e},a.prototype.addCoin=function(){p.pzaGameState.getCoinByGameOnce+=50,c.pzaLocalData.bpGetGold(50),c.pzaLocalData.data.coin+=50,u.pzaSoundManager.playAudio("pickCoin")},a.prototype.showGift=function(){var e=this;this.blockTouch=!0,setTimeout(function(){g.pzaOperationMgr.showNormalGameGift(function(){e.blockTouch=!1})},300)},a.prototype.clickMainView=function(){this.blockTouch||(this.close(),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI(),d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.BACK_HOMEVIEW,null))},a.prototype.clickShare=function(){var e=this;this.blockTouch||z.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gamewinView share sucess"),e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null,P.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:3},{name:"ShareR",value:1})},function(){P.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:3},{name:"ShareR",value:0})})},a.prototype.clickNext=function(){this.blockTouch||(p.pzaGameState.isMainMode()||p.pzaGameState.gameMode==p.pzaGameMode.BELT||p.pzaGameState.gameMode==p.pzaGameMode.KNOCK_ZOMBIE||p.pzaGameState.gameMode==p.pzaGameMode.SMALL_ZOMBIE||p.pzaGameState.gameMode==p.pzaGameMode.BANG_JAR?this.normalGameNext():p.pzaGameState.isSurvival()?this.survivalGameNext():this.challengGameNext())},a.prototype.normalGameNext=function(){this.close(),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI(),c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_3_4&&c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_4_4&&c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_5_1?c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_GARDEN_5_4?c.pzaLocalData.data.curGuideType!=r.pzaGuideType.RIDER_BELTEQUIP_GUIDE?d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.PART_SELECT_VIEW,function(){d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,function(){v.pzaCommonMask.showMask(!0),setTimeout(function(){v.pzaCommonMask.hideMask()},1e3),g.pzaOperationMgr.everyDayShowOperaView(g.pzaOperationType.sign),g.pzaOperationMgr.everyDayShowOperaView(g.pzaOperationType.newPlayerTask),g.pzaOperationMgr.everyDayShowOperaView(g.pzaOperationType.loginActivity)})}):d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.BELTEQUIPVIEW,function(){d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null)}):d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.GARDEN_VIEW,function(e){var a=e&&e.getComponent(m.pzaGardenView);a&&a.init(),d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null),u.pzaSoundManager.playBgm(u.pzaBGMName.GARDEN)}):d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.SHOP_VIEW,function(){d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.survivalGameNext=function(){this.close(),s.pzaGameManager.getGame(p.pzaGameMode.SURVIVAL,b.pzaGameSurvival).showPassUiNoStar()},a.prototype.challengGameNext=function(){this.close(),d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.PUZZLE_VIEW,function(){d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,function(){})})},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([S({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae",type:cc.Node})],a.prototype,"mainViewBtn",void 0),i([S({displayName:"\u4e0b\u4e00\u5173\u6309\u94ae",type:cc.Node})],a.prototype,"nextBtn",void 0),i([S({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],a.prototype,"shareBtn",void 0),i([S({displayName:"\u4e0b\u65b9\u4e3b\u9875\u6309\u94ae",type:cc.Node})],a.prototype,"bottomHome",void 0),i([S({type:cc.Node})],a.prototype,"rewardView",void 0),i([S({type:cc.Label})],a.prototype,"rewardLB",void 0),i([E],a)}(cc.Component);t.pzaGameWinNoStarView=_,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameSurvival":"pzaGameSurvival","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenView":"pzaGardenView","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaCommonMask":"pzaCommonMask"}],pzaGameWinView:[function(e,a,t){"use strict";cc._RF.push(a,"f02d8BZIw9Bu48fazOB3R6s","pzaGameWinView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameWinView=void 0;var r=e("../../Battle/Data/pzaGuideType"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaSoundManager"),d=e("../../Common/pzaUIManager"),h=e("../../Common/pzaUtil"),m=e("../../Common/pzaWorldEventManager"),f=e("../../Garden/pzaGardenView"),z=e("../../Load/pzaPreLoadManager"),y=e("../../utils/pzaChannel"),g=e("../../Load/pzaBundleObjectPool"),v=e("../../Common/pzaOperationMgr"),b=e("../../Common/pzaGamePropConfig"),P=e("../pzaCommonRewardView"),C=e("../pzaCommonMask"),E=e("../../Common/pzaStatisticsMgr"),S=cc._decorator,_=S.ccclass,D=S.property,M=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.stars=[],a.mainViewBtn=null,a.nextBtn=null,a.nextTxt=null,a.plantTarget=null,a.carTarget=null,a.shareBtn=null,a.bottomHome=null,a.videoIcon=null,a.rewardView=null,a.rewardLB=null,a.tips=null,a.rewardBubble=null,a.blockTouch=!1,a}return n(a,e),a.prototype.onEnable=function(){var e=this;m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.JUMP_VIEW,"dialog"),this.addCoin(),this.stars.forEach(function(e){null!=e&&(e.active=!1)});var a=p.pzaGameState.partStar;a>0&&this.showStarAni(0,function(){a>1&&e.showStarAni(1,function(){a>2&&e.showStarAni(2,null)})}),c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4||c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4||c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1||c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4||c.pzaLocalData.data.curGuideType==r.pzaGuideType.RIDER_BELTEQUIP_GUIDE?(this.videoIcon.active=!1,this.bottomHome.active=!0,this.mainViewBtn.active=!1,this.nextBtn.x=0,this.nextTxt.string="\u7ee7\u7eed"):(this.mainViewBtn.active=!0,this.nextTxt.string="\u4e0b\u4e00\u5173",this.videoIcon.active=!1,this.bottomHome.active=!0);var t;t=1==p.pzaGameState.curChapter||3==p.pzaGameState.curChapter||5==p.pzaGameState.curChapter||6==p.pzaGameState.curChapter||8==p.pzaGameState.curChapter||10==p.pzaGameState.curChapter?p.pzaGameState.lossPlantCount>=4:p.pzaGameState.lossPlantCount>=6,h.pzaUtil.switchGraySprite(this.plantTarget,t),h.pzaUtil.switchGraySprite(this.carTarget,p.pzaGameState.lossCar),this.showGift(),this.shareBtn.active=p.pzaGameState.shareAble,p.pzaGameState.shareAble?(this.mainViewBtn.x=-266,this.nextBtn.x=-2,this.rewardBubble=null,setTimeout(function(){v.pzaOperationMgr.showShareBubble(e.shareBtn,function(a){e.rewardBubble=a})},1)):(this.mainViewBtn.x=-150,this.nextBtn.x=180,0==this.mainViewBtn.active&&(this.nextBtn.x=0)),"my"!=y.pzaChannel.instance().channel&&y.pzaChannel.instance().showInter(!0),p.pzaGameState.getCoinByGameOnce>0?(this.rewardView.active=!0,this.rewardLB.string="\u91d1\u5e01*"+p.pzaGameState.getCoinByGameOnce):this.rewardView.active=!1,this.node.on(cc.Node.EventType.TOUCH_END,function(){e.tips.active=!1},this),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),setTimeout(function(){g.pzaBundleObjectPool.clearCachePool()},500);var o=y.pzaChannel.instance().getChannel();y.pzaChannel.saveToRemote(o.channelUserId,c.pzaLocalData.data)},a.prototype.onDisable=function(){var e=this;this.node.off(cc.Node.EventType.TOUCH_END,function(){e.tips.active=!1},this)},a.prototype.addCoin=function(){p.pzaGameState.getCoinByGameOnce+=50,c.pzaLocalData.bpGetGold(50),c.pzaLocalData.data.coin+=50,u.pzaSoundManager.playAudio("pickCoin")},a.prototype.clickVideoToggle=function(){},a.prototype.showGift=function(){var e=this;this.blockTouch=!0,setTimeout(function(){v.pzaOperationMgr.showNormalGameGift(function(){e.blockTouch=!1})},300)},a.prototype.showStarAni=function(e,a){var t=this.stars[e];null!=t?(t.active=!0,t.opacity=0,t.scale=2.5,t.runAction(cc.sequence(cc.spawn(cc.fadeTo(.5,255),cc.scaleTo(.5,1).easing(cc.easeBackIn())),cc.callFunc(a))).clone(),u.pzaSoundManager.playAudio("getstar")):a&&a()},a.prototype.clickMainView=function(){this.blockTouch||(this.close(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI(),d.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.BACK_HOMEVIEW,null))},a.prototype.clickShare=function(){var e=this;y.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gamewinView share sucess"),e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null,E.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:2},{name:"ShareR",value:1})},function(){E.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:2},{name:"ShareR",value:0})})},a.prototype.clickNext=function(){var e=this;if(!this.blockTouch){var a=function(){e.close(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI(),c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_3_4&&c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_4_4&&c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_5_1?c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_GARDEN_5_4?c.pzaLocalData.data.curGuideType!=r.pzaGuideType.RIDER_BELTEQUIP_GUIDE?d.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.PART_SELECT_VIEW,function(){d.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,function(){C.pzaCommonMask.showMask(!0),setTimeout(function(){C.pzaCommonMask.hideMask()},1e3),v.pzaOperationMgr.everyDayShowOperaView(v.pzaOperationType.sign),v.pzaOperationMgr.everyDayShowOperaView(v.pzaOperationType.newPlayerTask),v.pzaOperationMgr.everyDayShowOperaView(v.pzaOperationType.loginActivity)})}):d.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.BELTEQUIPVIEW,function(){}):d.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.GARDEN_VIEW,function(e){var a=e&&e.getComponent(f.pzaGardenView);a&&a.init(),d.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),u.pzaSoundManager.playBgm(u.pzaBGMName.GARDEN)}):d.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.SHOP_VIEW,function(){d.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null)})};this.videoIcon.active?y.pzaChannel.instance().showVideo({sucCall:function(){var e=new b.pzaRewardPropData(b.pzaGamePropEnum.PROP_COIN,500);d.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.COMMON_REWARD_VIEW,function(t){var o=t&&t.getComponent(P.pzaCommonRewardView);o&&o.bindData([e],function(){a()})})},failCall:function(){},endCall:function(){},posName:"\u5173\u5361\u7ed3\u675f\u89c6\u9891"}):a()}},a.prototype.clickIcon=function(e,a){var t=["\u987a\u5229\u901a\u5173","\u4fdd\u7559\u6240\u6709\u8f7d\u5177","\u4e0d\u88ab\u51fb\u5012"+p.pzaGameState.lossStarCount+"\u4f4d\u9a91\u58eb"];a&&(this.tips.active=!0,this.tips.x=e.target.x,this.tips.getChildByName("desc").getComponent(cc.Label).string=t[parseInt(a)])},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([D({displayName:"\u661f\u661f",type:[cc.Node]})],a.prototype,"stars",void 0),i([D({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae",type:cc.Node})],a.prototype,"mainViewBtn",void 0),i([D({displayName:"\u4e0b\u4e00\u5173\u6309\u94ae",type:cc.Node})],a.prototype,"nextBtn",void 0),i([D({displayName:"\u4e0b\u4e00\u5173\u6587\u6848",type:cc.Label})],a.prototype,"nextTxt",void 0),i([D({displayName:"\u690d\u7269\u76ee\u6807",type:cc.Sprite})],a.prototype,"plantTarget",void 0),i([D({displayName:"\u63a8\u8f66\u76ee\u6807",type:cc.Sprite})],a.prototype,"carTarget",void 0),i([D({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],a.prototype,"shareBtn",void 0),i([D({displayName:"\u4e0b\u65b9\u4e3b\u9875\u6309\u94ae",type:cc.Node})],a.prototype,"bottomHome",void 0),i([D({displayName:"\u89c6\u9891\u56fe\u6807",type:cc.Node})],a.prototype,"videoIcon",void 0),i([D({type:cc.Node})],a.prototype,"rewardView",void 0),i([D({type:cc.Label})],a.prototype,"rewardLB",void 0),i([D(cc.Node)],a.prototype,"tips",void 0),i([_],a)}(cc.Component);t.pzaGameWinView=M,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenView":"pzaGardenView","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaCommonMask":"pzaCommonMask","../pzaCommonRewardView":"pzaCommonRewardView"}],pzaGameZombieEnemyEndless:[function(e,a,t){"use strict";cc._RF.push(a,"6b8bcwDBmlBOqZEjxzb3suT","pzaGameZombieEnemyEndless");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameZombieEnemyEndless=void 0;var i=e("../Achieve/pzaAchieve"),r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaBattleData"),l=e("../Battle/Data/pzaDropType"),s=e("../Battle/Data/pzaPlantEnum"),c=e("../Battle/pzaEffectManager"),u=e("../Battle/pzaGameState"),d=e("../Load/pzaPreLoadManager"),h=e("../View/Battle/pzaZombieSelectView"),m=e("../View/pzaCommonMask"),f=e("../View/pzaWarningView"),z=e("../utils/pzaChannel"),y=e("../utils/pzakc"),g=e("./pzaGameManager"),v=e("./pzaGameZombieEnemy"),b=e("./pzaLocalData"),P=e("./pzaRankMgr"),C=e("./pzaSoundManager"),E=e("./pzaStatisticsMgr"),S=e("./pzaTipManager"),_=e("./pzaUIManager"),D=e("./pzaUtil"),M=e("./pzaWorldEventManager"),w=e("./pzaZombieEnermyPartCfg"),T=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=u.pzaGameMode.ZOMBIE_ENDLESS,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u50f5\u5c38\u516c\u654c\u65e0\u5c3d-"},a.prototype.isEndless=function(){return!0},a.prototype.getRankKey=function(){return"zombie_endless_rank"},a.prototype.getPlantArr=function(){var e=w.pzaZombieEnermyPartCfg.getPlantType(u.pzaGameState.zombieEndlessPart);return e.push(s.pzaPlantEnum.PUFF_SHROOM),e},a.prototype.getZombieTypeArr=function(){return w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart)},a.prototype.addOtherRes=function(e){e.push(new d.pzaResourceDetail(d.pzaResourceUrl.BRAIN))},a.prototype.initPartProcess=function(e){e.partLabel.string="\u5165\u4fb5\u6a21\u5f0f(\u65e0\u5c3d)"+(u.pzaGameState.curPart>1?"-\u8bb0\u5f55\uff1a"+(u.pzaGameState.curPart-1):""),e.zombieHeadNode.active=!1;for(var a=0;a<e.partFlags.length;a++)e.partFlags[a].active=!1;e.proLabel.node.active=!0,e.proLabel.string="0/5 \u83b7\u53d6\u7684\u9971\u85cf",e.partProgress.fillRange=0},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u5165\u4fb5\u6a21\u5f0f(\u65e0\u5c3d)\u201d\uff0c\u201c"+w.pzaZombieEnermyPartCfg.getName(u.pzaGameState.curPart)+"\u201d\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a.prototype.readData=function(){var e=b.pzaLocalBattleData.data.zombieEndlessData;p.pzaBattleData.readData(e)},a.prototype.beforeLoad=function(){u.pzaGameState.partStar=0,u.pzaGameState.sunLightCount=150,u.pzaGameState.zombiePuffCount=w.pzaZombieEnermyPartCfg.getRandomPuff(1),u.pzaGameState.zombieEndlessPart=w.pzaZombieEnermyPartCfg.getEndlessCfgLevel(1)},a.prototype.preLoad=function(a,t,o){e.prototype.preLoad.call(this,2,1,o)},a.prototype.gameRestart=function(){u.pzaGameState.hadRevived=!1,b.pzaLocalBattleData.data.zombieEndlessData=null,b.pzaLocalBattleData.localSaveData(),this.loadAndStart(2,1)},a.prototype.gameStart=function(a,t){var o=this;e.prototype.resetTryPlant.call(this),b.pzaLocalData.gameStartTimeStamp=Date.now();var n=200+t;E.pzaStatisticsMgr.sendLevelEvent(t,E.pzaEventLevelType.start,0,0,u.pzaGameMode.ZOMBIE_ENDLESS),y.default.eventReport(n+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(a,t);var i=b.pzaLocalBattleData.data.zombieEndlessData;if(u.pzaGameState.isGameEnd=!1,i)return window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),C.pzaSoundManager.clearAllLoopAudio(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(w.pzaZombieEnermyPartCfg.getPlantColumn(u.pzaGameState.zombieEndlessPart)),window.pzaplantManager.initSimulatePlant(i.zombiePlantList),window.pzaplantManager.initBrain(),window.pzaMapManager.openBattleUI(),g.pzaGameManager.showBattleUI(d.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(e){var a=e&&e.getComponent(h.pzaZombieSelectView);a&&a.init(w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart))}),void this.gameRecover(a,t,i);P.pzaRankMgr.queryLeaderBoardRank(P.pzaRankMgr.Zombie_Rank_Key,function(e){m.pzaCommonMask.hideMask(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(w.pzaZombieEnermyPartCfg.getPlantColumn(u.pzaGameState.zombieEndlessPart)),window.pzaplantManager.initSimulatePlant(w.pzaZombieEnermyPartCfg.getPlantList(u.pzaGameState.zombieEndlessPart,u.pzaGameState.zombiePuffCount)),window.pzaplantManager.initBrain();var a="\u83b7\u5f97\u5168\u90e8\u7684\u9971\u85cf\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01",t=b.pzaLocalData.data.zombieFlagCount;null!=t&&t>0&&(a+="\n\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\uff1a"+t,null!=e&&e>0&&(a+=" \u5168\u670d\u6392\u540d\uff1a"+e)),S.pzaTipManager.showGameTip(a,function(){S.pzaTipManager.showGameTip("\u80fd\u91cf\u53ef\u4ee5\u4fdd\u5b58\u5230\u4e0b\u4e00\u5173\uff0c\u4f60\u5fc5\u987b\u4fdd\u5b58\u8d85\u8fc750\u70b9\u80fd\u91cf\uff0c\u5426\u5219\u4f60\u5c06\u8fc7\u5173\u5931\u8d25\u3002")}),window.pzaplantManager.blinkBrain(),window.pzaMapManager.openBattleUI(),g.pzaGameManager.showBattleUI(d.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(e){var a=e&&e.getComponent(h.pzaZombieSelectView);a&&a.init(w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart))}),o.playBgm(),u.pzaGameState.gamePause=!1})},a.prototype.gameRecover=function(){var e=this;_.pzaUIManager.removeBoardUI(),u.pzaGameState.midOut=!1,_.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(f.pzaWarningView);t&&t.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){e.playBgm(),window.pzazombieManager.zombieModeCheckTime=2,u.pzaGameState.gamePause=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),D.pzaUtil.changeGameSpeed(u.pzaGameState.gameSpeed),e.playBgm()},function(){b.pzaLocalBattleData.data.zombieEndlessData=null,b.pzaLocalBattleData.localSaveData(),g.pzaGameManager.removeBattleUI(),M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_OVER,null),P.pzaRankMgr.queryLeaderBoardRank(P.pzaRankMgr.Zombie_Rank_Key,function(){e.firstStart(u.pzaGameState.curChapter,1)})},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,b.pzaLocalData.endLessPowerCost,!0,2)})},a.prototype.winDrop=function(){return null},a.prototype.partFail=function(){e.prototype.partFail.call(this),b.pzaLocalBattleData.data.zombieEndlessData=null,b.pzaLocalBattleData.localSaveData();var a=0;b.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-b.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=200+u.pzaGameState.curPart;E.pzaStatisticsMgr.sendLevelEvent(u.pzaGameState.curPart,E.pzaEventLevelType.failed,a,t,u.pzaGameMode.ZOMBIE_ENDLESS),y.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),b.pzaLocalData.hasUseProp=!1},a.prototype.partWin=function(e,a){b.pzaLocalData.rfRecordPassPart(),this.nextPart(e,a)},a.prototype.doNextPart=function(){window.pzaMapManager.blink(2),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),C.pzaSoundManager.clearAllLoopAudio(),u.pzaGameState.survivalPartWin(),u.pzaGameState.zombiePuffCount=w.pzaZombieEnermyPartCfg.getRandomPuff(u.pzaGameState.curPart),u.pzaGameState.zombieEndlessPart=w.pzaZombieEnermyPartCfg.getEndlessCfgLevel(u.pzaGameState.curPart),window.pzaMapManager.clearLadder(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(w.pzaZombieEnermyPartCfg.getPlantColumn(u.pzaGameState.zombieEndlessPart));var e=w.pzaZombieEnermyPartCfg.getPlantList(u.pzaGameState.zombieEndlessPart,u.pzaGameState.zombiePuffCount);window.pzaplantManager.initSimulatePlant(e),window.pzaplantManager.initBrain(),window.pzaMapManager.openBattleUI(),g.pzaGameManager.showBattleUI(d.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(e){var a=e&&e.getComponent(h.pzaZombieSelectView);a&&a.init(w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart))}),this.playBgm(),u.pzaGameState.gamePause=!1,window.pzazombieManager.zombieModeCheckTime=2,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.PASS_PICK,null),D.pzaUtil.changeGameSpeed(u.pzaGameState.gameSpeed),b.pzaLocalBattleData.data.zombieEndlessData=p.pzaBattleData.saveData(0,e),b.pzaLocalBattleData.localSaveData(),u.pzaGameState.isGameEnd=!1,u.pzaGameState.curPart>10&&r.default.instance().zombieCheckAchieve(i.pzaAchieveType.ACH_8)},a.prototype.nextPart=function(e,a){var t=this;void 0===e&&(e=!1),void 0===a&&(a=null),u.pzaGameState.isGameEnd=!0;var o=function(){D.pzaUtil.changeGameSpeed(1),window.pzaMapManager.closeBattleUI(),g.pzaGameManager.removeBattleUI();var e="\u5e72\u5f97\u597d\uff01\u5df2\u5b8c\u6210"+u.pzaGameState.curPart+"\u5173";null!=a&&(e+="\n"+a),S.pzaTipManager.showGameTip(e,function(){m.pzaCommonMask.showMask(),P.pzaRankMgr.uploadLeaderboardScore(P.pzaRankMgr.Zombie_Rank_Key,b.pzaLocalData.data.zombieFlagCount,u.pzaGameState.curPart-1,function(){m.pzaCommonMask.hideMask(),u.pzaGameState.curPart>b.pzaLocalData.data.zombieFlagCount&&(b.pzaLocalData.data.zombieFlagCount=u.pzaGameState.curPart,b.pzaLocalData.addDirty("zombieFlagCount")),t.doNextPart()}),b.pzaLocalData.bpEndlessPassPart(u.pzaGameState.curPart)})};u.pzaGameState.curPart%3==0?c.pzaEffectManager.createDropCard(l.pzaDropType.COIN_PACKAGE,null,cc.v2(),o):o(),"my"===z.pzaChannel.instance().channel&&z.pzaChannel.instance().getChannel().actSubmit()},a}(v.pzaGameZombieEnemy);t.pzaGameZombieEnemyEndless=T,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaZombieSelectView":"pzaZombieSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameZombieEnemy":"pzaGameZombieEnemy","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg"}],pzaGameZombieEnemy:[function(e,a,t){"use strict";cc._RF.push(a,"4ce2aoYXkZA5IeWQ//Zc2vL","pzaGameZombieEnemy");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGameZombieEnemy=void 0;var i=e("../Battle/Data/pzaDropType"),r=e("../Battle/Data/pzaGuideType"),p=e("../Battle/pzaGameState"),l=e("../Load/pzaPreLoadManager"),s=e("../View/Battle/pzaZombieSelectView"),c=e("../View/pzaCommonMask"),u=e("../utils/pzaChannel"),d=e("../utils/pzakc"),h=e("./pzaGameBase"),m=e("./pzaGameManager"),f=e("./pzaLocalData"),z=e("./pzaOperationMgr"),y=e("./pzaSoundManager"),g=e("./pzaStatisticsMgr"),v=e("./pzaTipManager"),b=e("./pzaUIManager"),P=e("./pzaWorldEventManager"),C=e("./pzaZombieEnermyPartCfg"),E=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gameMode=p.pzaGameMode.ZOMBIE_ENERMY,a}return n(a,e),a.prototype.getGameModeName=function(){return"\u50f5\u5c38\u516c\u654c-"},a.prototype.playBgm=function(){y.pzaSoundManager.playBgm(y.pzaBGMName.PUZZLE_BGM)},a.prototype.winDrop=function(){f.pzaLocalData.rfRecordPassPart();var e=i.pzaDropType.COIN_PACKAGE;return f.pzaLocalData.passZombieMode(p.pzaGameState.curPart)&&(e=i.pzaDropType.ZOMBIE_TROPHY),"my"===u.pzaChannel.instance().channel&&u.pzaChannel.instance().getChannel().actSubmit(),e},a.prototype.showPassUiNoStar=function(){b.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PUZZLE_VIEW,function(){b.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,function(){z.pzaOperationMgr.showCreativeVaseModeGift(null)})})},a.prototype.showBattlePropButtons=function(e){e.freeSunNode.active=!0,e.cherryBombNode.active=!1,e.autoPickNode.active=!0,e.clearCDNode.active=!1},a.prototype.clickSelectPartInFailView=function(){b.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PUZZLE_VIEW,function(){b.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.getPlantArr=function(e,a){return C.pzaZombieEnermyPartCfg.getPlantType(a)},a.prototype.getZombieTypeArr=function(e,a){return C.pzaZombieEnermyPartCfg.getZombiePool(a)},a.prototype.addOtherRes=function(e){e.push(new l.pzaResourceDetail(l.pzaResourceUrl.BRAIN))},a.prototype.beforeLoad=function(){p.pzaGameState.partStar=0},a.prototype.partFail=function(){e.prototype.partFail.call(this);var a=0;f.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-f.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var o=200+p.pzaGameState.curPart;g.pzaStatisticsMgr.sendLevelEvent(p.pzaGameState.curPart,g.pzaEventLevelType.failed,a,t,p.pzaGameMode.ZOMBIE_ENERMY),d.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),f.pzaLocalData.hasUseProp=!1},a.prototype.partWin=function(){P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.GAME_OVER,null),m.pzaGameManager.removeBattleUI(),b.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.GameWinNoStarView,null);var e=0;f.pzaLocalData.hasUseProp&&(e=1);var a=Date.now()-f.pzaLocalData.gameStartTimeStamp;a=Math.ceil(a/1e3);var t=200+p.pzaGameState.curPart;g.pzaStatisticsMgr.sendLevelEvent(p.pzaGameState.curPart,g.pzaEventLevelType.completed,e,a,p.pzaGameMode.ZOMBIE_ENERMY),d.default.eventReport(t+"\u5173\u5361\u6210\u529f"),f.pzaLocalData.hasUseProp=!1},a.prototype.preLoad=function(a,t,o){e.prototype.preLoad.call(this,2,t,o)},a.prototype.initPartProcess=function(e){e.partProNode.active=!0,e.partLabel.string=C.pzaZombieEnermyPartCfg.getName(p.pzaGameState.curPart),e.zombieHeadNode.active=!1;for(var a=0;a<e.partFlags.length;a++)e.partFlags[a].active=!1;e.proLabel.node.active=!0,e.proLabel.string="0/5 \u83b7\u53d6\u7684\u9971\u85cf",e.partProgress.fillRange=0},a.prototype.updatePartProcess=function(e){e.partProNode.active=!0;var a=5-window.pzaplantManager.brainMap.size,t=a/5,o=e.partProgress.fillRange+t,n=Math.max(.05,3*o);cc.Tween.stopAllByTarget(e.partProgress),cc.tween(e.partProgress).to(n,{fillRange:-t}).start(),e.proLabel.string=a+"/5 \u83b7\u53d6\u7684\u9971\u85cf"},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.freePlantNode.active=!1,a.shovelShowNode.active=!1,a.sunUIShowNode.active=!0,a.speedBtn.active=!0},a.prototype.refreshNextWave=function(){},a.prototype.onZombieDeath=function(){window.pzazombieManager.zombieModeCheckTime=2},a.prototype.initGameState=function(e,a){p.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),0,1,2),this.initMapPlantZombie(2,1)},a.prototype.initMapPlantZombie=function(e,a){window.pzaMapManager.init(e,a,2),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.gameStart=function(a,t){var o=this;e.prototype.resetTryPlant.call(this),f.pzaLocalData.gameStartTimeStamp=Date.now();var n=200+t;g.pzaStatisticsMgr.sendLevelEvent(p.pzaGameState.curPart,g.pzaEventLevelType.start,0,0,p.pzaGameMode.ZOMBIE_ENERMY),d.default.eventReport(n+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(a,t),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(C.pzaZombieEnermyPartCfg.getPlantColumn(t)),window.pzaplantManager.initSimulatePlant(C.pzaZombieEnermyPartCfg.getPlantList(t,0)),window.pzaplantManager.initBrain();var i=function(){v.pzaTipManager.showGameTip("\u83b7\u5f97\u5168\u90e8\u7684\u9971\u85cf\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01"),window.pzaplantManager.blinkBrain(),window.pzaMapManager.openBattleUI(),m.pzaGameManager.showBattleUI(l.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(e){var a=e&&e.getComponent(s.pzaZombieSelectView);a&&a.init(C.pzaZombieEnermyPartCfg.getZombiePool(p.pzaGameState.curPart))}),o.playBgm(),p.pzaGameState.gamePause=!1};if(window.pzaGuideManager.guideStart(i),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1)return c.pzaCommonMask.hideMask(),void window.pzaGuideManager.guideShow(i)},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u5165\u4fb5\u6a21\u5f0f\u201d\uff0c"+C.pzaZombieEnermyPartCfg.getName(p.pzaGameState.curPart)+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a}(h.pzaGameBase);t.pzaGameZombieEnemy=E,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaZombieSelectView":"pzaZombieSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg"}],pzaGardenDave:[function(e,a,t){"use strict";cc._RF.push(a,"94090H3UhRGB5UEMEdqCS5D","pzaGardenDave");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenDave=void 0;var r=e("../Battle/Data/pzaGuideType"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.daveAni=null,a.sell_yes=null,a.sell_no=null,a.continueTxt=null,a.dialogTxt=null,a.dialogNode=null,a.canContinue=!1,a.words=null,a.sellCall=null,a.guideEndCall=null,a}return n(a,e),a.prototype.onEnable=function(){this.sell_yes.on(cc.Node.EventType.TOUCH_END,this.onSellYes,this),this.sell_no.on(cc.Node.EventType.TOUCH_END,this.onSellNo,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},a.prototype.onDisable=function(){this.sell_yes.off(cc.Node.EventType.TOUCH_END,this.onSellYes,this),this.sell_no.off(cc.Node.EventType.TOUCH_END,this.onSellNo,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},a.prototype.showSell=function(e,a){var t=this;this.node.active=!0,this.canContinue=!1,this.dialogNode.active=!1,this.continueTxt.active=!1,this.sell_yes.active=!0,this.sell_no.active=!0,this.dialogTxt.string=e,this.sellCall=a,this.daveAni.playAnimation(r.pzaDaveAni.into,!1,function(){t.dialogNode.active=!0,t.daveAni.playAnimation(r.pzaDaveAni.suggest,!0)})},a.prototype.showGuide=function(e,a){var t=this;this.node.active=!0,this.canContinue=!1,this.dialogNode.active=!1,this.continueTxt.active=!0,this.sell_yes.active=!1,this.sell_no.active=!1,this.words=e,this.guideEndCall=a,this.daveAni.playAnimation(r.pzaDaveAni.into,!1,function(){t.dialogNode.active=!0,t.canContinue=!0,t.daveAni.playAnimation(r.pzaDaveAni.suggest,!0),t.showNextWord()})},a.prototype.onSellYes=function(){var e=this;this.sellCall&&this.sellCall(),this.dialogNode.active=!1,this.daveAni.playAnimation(r.pzaDaveAni.out,!1,function(){e.node.active=!1})},a.prototype.onSellNo=function(){var e=this;this.dialogNode.active=!1,this.daveAni.playAnimation(r.pzaDaveAni.out,!1,function(){e.node.active=!1})},a.prototype.clickContinue=function(){this.canContinue&&this.showNextWord()},a.prototype.showNextWord=function(){var e=this;if(null!=this.words){var a=this.words.shift();if(null==a)return this.canContinue=!1,this.dialogNode.active=!1,void this.daveAni.playAnimation(r.pzaDaveAni.out,!1,function(){e.node.active=!1,e.guideEndCall&&e.guideEndCall()});this.playShortSound(),this.daveAni.playAnimation(r.pzaDaveAni.normal_talk,!1,function(){e.daveAni.playAnimation(r.pzaDaveAni.suggest,!0)}),this.dialogTxt.string=a.word,a.event&&a.event()}else this.node.active=!1},a.prototype.playShortSound=function(){p.pzaSoundManager.playAudio("daveshort")},i([u({displayName:"\u6234\u592b\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"daveAni",void 0),i([u({displayName:"\u552e\u5356_\u662f",type:cc.Node})],a.prototype,"sell_yes",void 0),i([u({displayName:"\u552e\u5356_\u5426",type:cc.Node})],a.prototype,"sell_no",void 0),i([u({displayName:"\u70b9\u51fb\u7ee7\u7eed",type:cc.Node})],a.prototype,"continueTxt",void 0),i([u({displayName:"\u5bf9\u8bdd\u6587\u672c",type:cc.Label})],a.prototype,"dialogTxt",void 0),i([u({displayName:"\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],a.prototype,"dialogNode",void 0),i([c],a)}(cc.Component);t.pzaGardenDave=d,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController"}],pzaGardenDropCoin:[function(e,a,t){"use strict";cc._RF.push(a,"030adx5J0RGg7CKdbyuWmfs","pzaGardenDropCoin");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenDropCoin=void 0;var r=e("../Battle/Data/pzaDropType"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Load/pzaBundleObjectPool"),c=e("../utils/pzakc"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine_coin=null,a.curDropType=null,a.priceMap=new Map([[r.pzaDropType.SILVER_COIN,10],[r.pzaDropType.GOLD_COIN,50],[r.pzaDropType.DIAMOND,1e3]]),a.canPick=!0,a.pickTargetPos=null,a.pickCall=null,a.price=0,a}var t;return n(a,e),t=a,a.prototype.onEnable=function(){},a.prototype.onDisable=function(){},a.prototype.pickUp=function(e){var a=this;void 0===e&&(e=!1),this.canPick&&(this.canPick=!1,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:this.pickTargetPos},{easing:"cubicOut"}).call(function(){p.pzaLocalData.data.coin+=a.price,p.pzaLocalData.addDirty("coin"),a.close()}).start(),l.pzaSoundManager.playAudio("pickCoin"),this.pickCall&&this.pickCall())},a.prototype.init=function(e,a,t,o,n){var i=this;void 0===n&&(n=!1),this.curDropType=e,this.pickTargetPos=cc.v3(t.x,t.y),this.pickCall=o,this.price=this.priceMap.get(this.curDropType);var p="pr3";e==r.pzaDropType.SILVER_COIN?(l.pzaSoundManager.playAudio("garden_drop_coin"),p="pr3"):e==r.pzaDropType.GOLD_COIN?(l.pzaSoundManager.playAudio("garden_drop_coin"),p="pr2"):(l.pzaSoundManager.playAudio("garden_drop_coin"),p="pr1_2"),this.spine_coin.setAnimation(0,p,!0),this.node.setPosition(a);var s=a.clone();s.x+=c.default.randomInt(-100,100),s.y+=c.default.randomInt(-100,100),s.y>210&&(s.y-=50),this.node.parent.convertToWorldSpaceAR(s).y<20&&(s.y+=70),cc.tween(this.node).bezierTo(.3,cc.v2(a.x,s.y+100),cc.v2(a.x,s.y+300),s).start(),this.scheduleOnce(function(){i.close()},60),n&&(this.node.stopAllActions(),this.pickUp(n))},a.show=function(e,a,o,n,i,r){void 0===r&&(r=!1),s.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Effect/GardenDropCoin",!1,function(p,l){if(null==p&&null!=l){l.setParent(e);var s=l.getComponent(t);s&&s.init(a,o,n,i,r)}else console.error(p)})},a.prototype.close=function(){this.node&&this.node.isValid&&this.node.destroy()},i([h({displayName:"\u52a8\u753b",type:sp.Skeleton})],a.prototype,"spine_coin",void 0),t=i([d],a)}(cc.Component);t.pzaGardenDropCoin=m,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzakc":"pzakc"}],pzaGardenMgr:[function(e,a,t){"use strict";cc._RF.push(a,"5ab27xFOGlJ7ocM9eNExUUr","pzaGardenMgr");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenToolType=t.pzaGardenOpType=t.pzaGardenEnv=t.pzaGardenOpResult=void 0;var n,i,r,p=e("../Achieve/pzaAchieveMgr"),l=e("../Battle/Data/pzaDropType"),s=e("../Battle/Data/pzaPlantEnum"),c=e("../Battle/pzaGameState"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaUtil"),h=e("../Common/pzaWorldEventManager"),m=e("../utils/pzakc"),f=e("./pzaGardenPlant"),z=e("./pzaGardenPlantConfig");t.pzaGardenOpResult=function(e,a,t,o,n,i){void 0===e&&(e=0),void 0===a&&(a=l.pzaDropType.SILVER_COIN),void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.dropNum=0,this.dropType=l.pzaDropType.SILVER_COIN,this.isLight=!1,this.isWet=!1,this.isLevelUp=!1,this.offLight=!1,this.dropNum=e,this.dropType=a,this.isLight=n,this.isLevelUp=o,this.isWet=t,this.offLight=i},function(e){e[e.normal=0]="normal",e[e.night=1]="night",e[e.water=2]="water"}(n=t.pzaGardenEnv||(t.pzaGardenEnv={})),function(e){e[e.water=0]="water",e[e.manure=1]="manure",e[e.pesticide=2]="pesticide",e[e.phonograph=3]="phonograph",e[e.chocolate=4]="chocolate",e[e.income=5]="income",e[e.share=6]="share",e[e.null=-1]="null"}(i=t.pzaGardenOpType||(t.pzaGardenOpType={})),function(e){e[e.null=-1]="null",e[e.waterPot=0]="waterPot",e[e.goldWaterPot=1]="goldWaterPot",e[e.manure=2]="manure",e[e.pesticide=10]="pesticide",e[e.phonograph=3]="phonograph",e[e.chocolate=4]="chocolate",e[e.glove=5]="glove",e[e.sell=6]="sell",e[e.cart=7]="cart",e[e.nextEnv=8]="nextEnv",e[e.snail=9]="snail",e[e.backEnv=11]="backEnv",e[e.share=12]="share"}(r=t.pzaGardenToolType||(t.pzaGardenToolType={}));var y=function(){function e(){this.gardenPlantConfMap=null,this.curGardenPlantMap=null,this.addPlantArr=[],this.snailSpeedUpTime=0,this.envMaxMap=new Map([[n.normal,24],[n.water,24],[n.night,24]]),this.opPicMap=new Map([[i.water,"skin1"],[i.manure,"skin3"],[i.pesticide,"skin4"],[i.phonograph,"skin5"]]),this.toolPicMap=new Map([[r.waterPot,"resources/Texture/Goods/3109"],[r.goldWaterPot,"resources/Texture/Goods/3017"],[r.manure,"resources/Texture/Goods/3018"],[r.pesticide,"resources/Texture/Goods/3019"],[r.phonograph,"resources/Texture/Goods/3020"],[r.glove,"resources/Texture/Goods/3021"],[r.sell,"Texture/MainView/GardenView/garden_dollar"],[r.cart,"resources/Texture/Goods/3024"],[r.chocolate,"Texture/MainView/GardenView/chocolate"],[r.nextEnv,"Texture/MainView/GardenView/garden_arrow1"],[r.share,"resources/Texture/Goods/3111"]]),this.toolSpineMap=new Map([[r.waterPot,"Garden/28FX_pr2"],[r.goldWaterPot,"Garden/28FX_pr2"],[r.manure,"Garden/55_FX"],[r.pesticide,"Garden/55_FX"],[r.phonograph,"Garden/28FX_pr5"],[r.chocolate,"Effect/DropEffect/05_light"]])}return e.instance=function(){return e._me||(e._me=new e),e._me},e.prototype.init=function(e){if(!this.gardenPlantConfMap){this.gardenPlantConfMap=new Map;for(var a=0;a<e.length;a++){var t=new z.pzaGardenPlantConfig(e[a]);this.gardenPlantConfMap.set(t.plantId,t)}}this.loadPlantsFromSave()},e.prototype.addPlantByOther=function(e){this.addPlantArr.push(e)},e.prototype.getPriceFromLevel=function(e){if(0===e.level)return 1500;var a=this.getGardenPlantConf(e.plantId);return 1===e.level?a.price1:2===e.level?a.price2:a.price3},e.prototype.loadPlantsFromSave=function(){var e=m.default.isNewDay(u.pzaLocalData.data.gardenLastTime),a=u.pzaLocalData.data.gardenPlants||[];this.curGardenPlantMap=new Map,Date.now();for(var t=0;t<a.length;t++){var o=f.pzaGardenPlant.create(a[t]);this.curGardenPlantMap.has(o.env)||this.curGardenPlantMap.set(o.env,[]),e&&(4===o.level&&(o.level=3),o.cdCount=0),this.curGardenPlantMap.get(o.env).push(o)}m.default.log("\u52a0\u8f7d\u5b8c\u82b1\u56ed",this.curGardenPlantMap)},e.prototype.getOffLineReward=function(){var e=u.pzaLocalData.data.gardenLastTime;if(!e)return 0;var a=Date.now(),t=Math.floor((a-e)/1e3);t>3600&&(t=3600);var o=this.curGardenPlantMap.get(n.normal);if(!o)return 0;for(var i=0;i<o.length;i++){var r=o[i];4===r.level&&this.getPriceFromLevel(r)}return 0},e.prototype.getCurPlants=function(e){var a=this.curGardenPlantMap.get(e);return null==a?(this.curGardenPlantMap.set(e,[]),a=this.curGardenPlantMap.get(e)):a},e.prototype.canOperate=function(){if(!this.curGardenPlantMap)return!1;var e=Date.now(),a=!1;return this.curGardenPlantMap.forEach(function(t){if(t&&!a)for(var o=0;o<t.length;o++){var n=t[o];if(n&&n.opLeft>0&&n.opTime>0&&n.opTime<e)return void(a=!0)}}),a},e.prototype.getGardenPlantConf=function(e){return this.gardenPlantConfMap.get(e)},e.prototype.getEmptyPos=function(e){for(var a=this.envMaxMap.get(e),t=[],o=[],n=u.pzaLocalData.data.gardenPlants||[],i=0;i<n.length;i++){var r=n[i];r.env===e&&(t[r.pos]=1)}for(i=0;i<a;i++)void 0===t[i]&&o.push(i);return o.length<=0?-1:(console.log("env "+e+" ",o.length),m.default.randomChoose(o,1)[0])},e.prototype.hasEmptyPos=function(e){void 0===e&&(e=n.normal);var a=this.envMaxMap.get(e);return this.getCurPlants(e).length<a},e.prototype.addGardenEnv=function(e){var a=u.pzaLocalData.data.gardenEnv||{};a[""+e]=1,u.pzaLocalData.data.gardenEnv=a,u.pzaLocalData.addDirty("gardenEnv"),m.default.sendMsg("addNewGardenTool")},e.prototype.addGardenPlant=function(a){var t=this,o=function(a,o,n){var r=new f.pzaGardenPlant(null,a,o,n);return r.opLeft=r.getLeftTimes(),r.opType=i.water,r.opTime=e.opGapTime+Date.now(),r.towards=Math.random()<.5?-1:1,t.getCurPlants(n).push(r),u.pzaLocalData.data.gardenPlants.push(r.toJson()),u.pzaLocalData.addDirty("gardenPlants"),console.log("\u82b1\u56ed\u52a0\u5165\u65b0\u690d\u7269",a,n,"pos",o),m.default.sendMsg("addNewGardenPlant"),p.default.instance().addGardenPlant(a),r},r=this.getEmptyPos(n.normal),l=this.getEmptyPos(n.night),s=this.getEmptyPos(n.water);return r>=0?o(a,r,n.normal):l>=0&&1==u.pzaLocalData.data.gardenEnv[""+n.night]?o(a,l,n.night):s>=0&&1==u.pzaLocalData.data.gardenEnv[""+n.water]?o(a,s,n.water):null},e.prototype.addGuidePlant=function(e,a){void 0===a&&(a=0);var t=new f.pzaGardenPlant(null,39,e,n.normal);t.level=a,t.opLeft=3,t.opType=i.water,t.opTime=300+Date.now(),t.opGapTime=500;for(var o=!1,r=0;r<this.getCurPlants(n.normal).length;r++){var l=this.getCurPlants(n.normal)[r];if(l.pos==e){l.level=1,o=!0;break}}if(!o)return this.getCurPlants(n.normal).push(t),u.pzaLocalData.data.gardenPlants.push(t.toJson()),u.pzaLocalData.addDirty("gardenPlants"),console.log("\u82b1\u56ed\u52a0\u5165\u5f15\u5bfc\u690d\u7269",39,"pos",e),m.default.sendMsg("addNewGardenPlant"),p.default.instance().addGardenPlant(39),t;h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_GARDEN_STATE,null)},e.prototype.addGardenTool=function(e,a,t){void 0===a&&(a=1),void 0===t&&(t=!0);var o=u.pzaLocalData.data.gardenToolNum;o[""+e]||(o[""+e]=0),o[""+e]+=a,u.pzaLocalData.addDirty("gardenToolNum"),console.log("\u82b1\u56ed\u52a0\u5165\u65b0\u5de5\u5177",e,a),t&&m.default.sendMsg("addNewGardenTool")},e.prototype.useGardenTool=function(a,t){if(void 0===t&&(t=1),e.numToolMap.has(a)){var o=u.pzaLocalData.data.gardenToolNum;o[""+a]&&(o[""+a]-=t,o[""+a]<0&&(o[""+a]=0),u.pzaLocalData.addDirty("gardenToolNum"))}},e.prototype.savePlant=function(e){for(var a=u.pzaLocalData.data.gardenPlants,t=0;t<a.length;t++)if(a[t].id===e.id)return u.pzaLocalData.data.gardenPlants[t]=e.toJson(),void u.pzaLocalData.addDirty("gardenPlants")},e.prototype.removePlant=function(e){for(var a=this,t=u.pzaLocalData.data.gardenPlants,o=0;o<t.length;o++)if(t[o].id===e.id)return u.pzaLocalData.data.gardenPlants.splice(o,1),u.pzaLocalData.addDirty("gardenPlants"),void this.curGardenPlantMap.get(e.env).forEach(function(t,o){t.id===e.id&&a.curGardenPlantMap.get(e.env).splice(o,1)})},e.prototype.changeEnv=function(e,a){var t=this;e.env!==a&&(this.curGardenPlantMap.get(e.env).forEach(function(a,o){a.id!==e.id||t.curGardenPlantMap.get(e.env).splice(o,1)}),e.env=a,this.curGardenPlantMap.has(a)||this.curGardenPlantMap.set(a,[]),this.curGardenPlantMap.get(a).push(e))},e.prototype.saveAllPlants=function(){var e=[];this.curGardenPlantMap.forEach(function(a){for(var t=0;t<a.length;t++)e.push(a[t].toJson())}),u.pzaLocalData.data.gardenPlants=e,u.pzaLocalData.addDirty("gardenPlants")},e.prototype.checkPlantState=function(e){var a=!1,t=Date.now();return this.curGardenPlantMap.forEach(function(o){null!=o&&o.forEach(function(o){null!=o&&o.opType==e&&o.opTime>0&&o.opTime<t&&(a=!0)})}),a},e.prototype.randomGardenPlant=function(e){var a=[],t=[];if(e<=0||Math.random()>e){for(var o=s.pzaPlantEnum.PEA_SHOOTER;o<=s.pzaPlantEnum.MELON_PULT;o++)o!=s.pzaPlantEnum.FLOWER_POT&&1===this.getGardenPlantConf(o).enabled&&(a.push(o),t.push(this.getGardenPlantConf(o).ratio));return a[d.pzaUtil.getRandomIndexByWeight(t)]}var n=new Set,i=u.pzaLocalData.data.gardenPlants;for(o=0;o<i.length;o++){var r=i[o];null!=r&&n.add(r.plantId)}for(o=s.pzaPlantEnum.PEA_SHOOTER;o<=s.pzaPlantEnum.MELON_PULT;o++)o!=s.pzaPlantEnum.FLOWER_POT&&(n.has(o)||1!==this.getGardenPlantConf(o).enabled||(a.push(o),t.push(this.getGardenPlantConf(o).ratio)));if(a.length<=0){for(o=s.pzaPlantEnum.PEA_SHOOTER;o<=s.pzaPlantEnum.MELON_PULT;o++)o!=s.pzaPlantEnum.FLOWER_POT&&1===this.getGardenPlantConf(o).enabled&&(a.push(o),t.push(this.getGardenPlantConf(o).ratio));return a[d.pzaUtil.getRandomIndexByWeight(t)]}return a[d.pzaUtil.getRandomIndexByWeight(t)]},e.prototype.dropGardenPlant=function(){var e=0;switch(c.pzaGameState.curChapter>5?c.pzaGameState.curChapter-5:c.pzaGameState.curChapter){case 1:e=this.chapter1Drop();break;case 2:e=this.chapter2Drop();break;case 3:e=this.chapter3Drop();break;case 4:e=this.chapter4Drop();break;case 5:e=this.chapter5Drop()}u.pzaLocalData.data.dropPlantArr.push(e),u.pzaLocalData.addDirty("dropPlantArr")},e.prototype.filterGardenPlantEnabled=function(a){return a.filter(function(a){var t=e.instance().getGardenPlantConf(a);return!(!t||0==t.enabled)})},e.prototype.chapter1Drop=function(){var e=[s.pzaPlantEnum.PEA_SHOOTER,s.pzaPlantEnum.SUN_FLOWER,s.pzaPlantEnum.CHERRY_BOMB,s.pzaPlantEnum.WALL_NUT,s.pzaPlantEnum.POTATO_MINE,s.pzaPlantEnum.SNOW_PEA,s.pzaPlantEnum.CHOMPER,s.pzaPlantEnum.REPEATER],a=this.filterGardenPlantEnabled(e);return d.pzaUtil.getRandomValueFromArray(a)},e.prototype.chapter2Drop=function(){var e=[s.pzaPlantEnum.PUFF_SHROOM,s.pzaPlantEnum.SUN_SHROOM,s.pzaPlantEnum.FUME_SHROOM,s.pzaPlantEnum.GRAVE_BUSTER,s.pzaPlantEnum.HYPNO_SHROOM,s.pzaPlantEnum.SCAREDY_SHROOM,s.pzaPlantEnum.ICE_SHROOM,s.pzaPlantEnum.DOOM_SHROOM],a=this.filterGardenPlantEnabled(e);return d.pzaUtil.getRandomValueFromArray(a)},e.prototype.chapter3Drop=function(){var e=[s.pzaPlantEnum.LILY_PAD,s.pzaPlantEnum.SQUASH,s.pzaPlantEnum.THREE_PEATER,s.pzaPlantEnum.TANGLE_KELP,s.pzaPlantEnum.JALAPENO,s.pzaPlantEnum.SPIKEWEED,s.pzaPlantEnum.TORCHWOOD,s.pzaPlantEnum.TALL_NUT],a=this.filterGardenPlantEnabled(e);return d.pzaUtil.getRandomValueFromArray(a)},e.prototype.chapter4Drop=function(){var e=[s.pzaPlantEnum.SEA_SHROOM,s.pzaPlantEnum.PLANTERN,s.pzaPlantEnum.CACTUS,s.pzaPlantEnum.BLOVER,s.pzaPlantEnum.SPLIT_PEA,s.pzaPlantEnum.STAR_FRUIT,s.pzaPlantEnum.PUMPKIN,s.pzaPlantEnum.MAGNET_SHROOM],a=this.filterGardenPlantEnabled(e);return d.pzaUtil.getRandomValueFromArray(a)},e.prototype.chapter5Drop=function(){var e=[s.pzaPlantEnum.CABBAGE_PULT,s.pzaPlantEnum.KERNEL_PULT,s.pzaPlantEnum.COFFEE_BEAN,s.pzaPlantEnum.GARLIC,s.pzaPlantEnum.UMBRELLA_LEAF,s.pzaPlantEnum.MELON_PULT],a=this.filterGardenPlantEnabled(e);return d.pzaUtil.getRandomValueFromArray(a)},e.prototype.hasAllGardenPlant=function(){for(var e=new Set,a=u.pzaLocalData.data.gardenPlants,t=0;t<a.length;t++){var o=a[t];null!=o&&e.add(o.plantId)}for(t=s.pzaPlantEnum.PEA_SHOOTER;t<=s.pzaPlantEnum.MELON_PULT;t++)if(t!=s.pzaPlantEnum.FLOWER_POT&&!e.has(t))return!1;return!0},e.prototype.isDropGardenPlant=function(){for(var e,a,t=0,i=u.pzaLocalData.data.gardenPlants||[],r=0;r<i.length;r++)t++;var p=[];try{for(var l=o(i),s=l.next();!s.done;s=l.next()){var c=s.value;c.env==n.night&&p.push(c)}}catch(h){e={error:h}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(e)throw e.error}}var d=24;return 1==u.pzaLocalData.data.gardenEnv[""+n.night]&&(d+=24),1==u.pzaLocalData.data.gardenEnv[""+n.water]&&(d+=24),!(t+u.pzaLocalData.data.dropPlantArr.length>=d)},e._me=null,e.opGapTime=1e4,e.numToolMap=new Map([[r.manure,1],[r.pesticide,1],[r.chocolate,1]]),e}();t.default=y,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzakc":"pzakc","./pzaGardenPlant":"pzaGardenPlant","./pzaGardenPlantConfig":"pzaGardenPlantConfig"}],pzaGardenPlantConfig:[function(e,a,t){"use strict";cc._RF.push(a,"57b1bqRI45FSKvH8QOofR3i","pzaGardenPlantConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenPlantConfig=void 0;var o=function(){function e(e){this.id=0,this.plantId=0,this.name="",this.plantSpine="",this.skin="",this.ani="",this.from="",this.price1=0,this.price2=0,this.price3=0,this.ratio=0,this.enabled=1,this.id=e.id,this.plantId=e.plantId,this.name=e.name||"",this.plantSpine=e.plantSpine||"",this.skin=e.skin||"",this.ani=e.ani||"",this.from=e.from||"",this.price1=e.price1||0,this.price2=e.price2||0,this.price3=e.price3||0,this.ratio=e.ratio||0,this.enabled=e.enabled}return e.prototype.isFromShop=function(){return"shop"===this.from},e}();t.pzaGardenPlantConfig=o,cc._RF.pop()},{}],pzaGardenPlant:[function(e,a,t){"use strict";cc._RF.push(a,"49310gXvulP3rT+g9EkECHt","pzaGardenPlant"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenPlant=void 0;var o=e("../utils/pzakc"),n=e("./pzaGardenMgr"),i=e("../Battle/Data/pzaDropType"),r=e("../Achieve/pzaAchieveMgr"),p=e("../utils/pzaChannel"),l=e("../Common/pzaLocalData"),s=function(){function e(e,a,t,o){this.id=null,this.plantId=0,this.level=0,this.pos=0,this.env=n.pzaGardenEnv.normal,this.opTime=0,this.opType=0,this.opLeft=0,this.lightGoneTime=0,this.cdCount=0,this.opGapTime=1e4,this.pot=null,this.towards=1,this.plantId=a,this.pos=t,this.env=o,this.id=e||""+t+o+Date.now()}return e.create=function(a){var t=new e(a.id,a.plantId,a.pos,a.env);return t.level=a.level||0,void 0===a.opLeft?(t.opType=n.pzaGardenOpType.water,t.opTime=Date.now()+n.default.opGapTime,t.opLeft=t.getLeftTimes()):(t.opType=a.opType||n.pzaGardenOpType.water,t.opTime=a.opTime||Date.now()+n.default.opGapTime,t.opLeft=a.opLeft),t.towards=a.towards||(Math.random()<.5?-1:1),t.cdCount=a.cdCount=0,t.lightGoneTime=a.lightGoneTime||0,t},e.prototype.getLeftTimes=function(){var e=o.default.randomDraw({3:.3333,4:.3333,5:.3333});return parseInt(e)},e.prototype.goNextOp=function(e,a,t){void 0===a&&(a=Date.now()),void 0===t&&(t=this.getLeftTimes()),this.opType=e,this.opLeft=t,this.opTime=a+this.opGapTime,this.cdCount++,this.cdCount>5&&(this.opTime=a+36e5),p.pzaChannel.isConfRemote&&(this.opTime=a+3)},e.prototype.goLight=function(e,a){void 0===e&&(e=Date.now()),void 0===a&&(a=!1),this.opType=n.pzaGardenOpType.income,this.opLeft=1,this.level=4,(this.lightGoneTime<=0||a)&&(this.lightGoneTime=e+36e6);var t=this.lightGoneTime-e;if(t<=0)return this.level=3,void this.goNextOp(n.pzaGardenOpType.water,e);var i=36e6-t,r=0;if(i<9e5)r=o.default.randomInt(20,30);else if(i<18e6){var p=Math.ceil(i/9e5);r=o.default.randomInt(30*p,30*(p+1))}else r=o.default.randomInt(900,1200);this.pot.isSpeedUp&&(r/=2),this.opTime=1e3*r+e},e.prototype.doOperation=function(){if(this.opLeft>0){var e=Date.now();if(this.canLight()){if(this.lightGoneTime<=0||e>this.lightGoneTime)return this.level=3,this.goNextOp(n.pzaGardenOpType.water,e),new n.pzaGardenOpResult(0,null,!1,!1,!1,!0);if(this.opType===n.pzaGardenOpType.water){var a=Math.random()<.3?n.pzaGardenOpType.phonograph:n.pzaGardenOpType.manure;return this.goNextOp(a,e,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0)}return this.goLight(e),null}if(this.opTime<e)if(this.opLeft--,this.opLeft<=0){if(this.opGapTime=n.default.opGapTime,1==l.pzaLocalData.gardenGuiding&&(this.opGapTime=500),this.opType===n.pzaGardenOpType.water)return 3===this.level?(a=Math.random()<.5?n.pzaGardenOpType.phonograph:n.pzaGardenOpType.pesticide,this.goNextOp(a,e,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0)):(this.goNextOp(n.pzaGardenOpType.manure,e,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0));if(this.opType===n.pzaGardenOpType.pesticide)return this.goLight(e,!0),new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!1,!0);if(this.opType===n.pzaGardenOpType.phonograph)return this.goLight(e,!0),new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!1,!0);if(this.opType===n.pzaGardenOpType.manure)return this.goNextOp(n.pzaGardenOpType.water,e),this.level<4&&this.level++,3===this.level&&r.default.instance().addMature(),1===this.level?new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!0):2===this.level?new n.pzaGardenOpResult(2,i.pzaDropType.GOLD_COIN,!1,!0):(4===this.level&&this.goLight(e,!0),new n.pzaGardenOpResult(1,i.pzaDropType.DIAMOND,!1,!0))}else{if(this.opType===n.pzaGardenOpType.water)return this.goNextOp(n.pzaGardenOpType.water,e,this.opLeft),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0);this.opLeft=1}}return null},e.prototype.canLight=function(){return 4===this.level},e.prototype.toJson=function(){return{id:this.id,plantId:this.plantId,towards:this.towards,level:this.level,pos:this.pos,env:this.env,opTime:this.opTime,opType:this.opType,opLeft:this.opLeft,lightGoneTime:this.lightGoneTime}},e}();t.pzaGardenPlant=s,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaLocalData":"pzaLocalData","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr"}],pzaGardenPot:[function(e,a,t){"use strict";cc._RF.push(a,"f845cbgBS1KiZFxOIwQn3cR","pzaGardenPot");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenPot=void 0;var r=e("../Battle/Data/pzaDropType"),p=e("./pzaGardenMgr"),l=e("../utils/pzakc"),s=e("./pzaGardenShadow"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaSpriteFrameManager"),d=e("../Common/pzaSpineController"),h=e("../Common/pzaLocalData"),m=e("../Common/pzaWorldEventManager"),f=e("../Common/pzaOperationMgr"),z=e("../View/pzaBubbleItem"),y=e("../Battle/Data/pzaPlantEnum"),g=e("../Common/pzaUIManager"),v=e("../Load/pzaPreLoadManager"),b=e("../View/Battle/pzaGardenShareView"),P=e("../Common/pzaGlobalMask"),C=e("../Common/pzaStatisticsMgr"),E=cc._decorator,S=E.ccclass,_=E.property,D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.pic_op=null,a.plantSP=null,a.level0Node=null,a.level1Node=null,a.level2Node=null,a.lightBottom=null,a.lightTop=null,a.selectedFrame=null,a.plantMask=null,a.cleanEffect=null,a.plant=null,a.plantConf=null,a.view=null,a.isLock=!1,a.isForShow=!1,a.isSpeedUp=!1,a.color_gray=(new cc.Color).fromHEX("#747474"),a.tipsItem=null,a.choosingTW=null,a.aniColorValue=255,a.aniColorDir=-1,a}return n(a,e),a.prototype.onEnable=function(){m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GUIDE_GARDEN_CLICKPOT,this.showGuideClick,this),m.pzaWorldEventManager.addListener(m.pzaWorldEventType.GARDENSHARE_GUIDE_START,this.shareGuideStart,this)},a.prototype.onDisable=function(){m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GUIDE_GARDEN_CLICKPOT,this.showGuideClick,this),m.pzaWorldEventManager.removeListener(m.pzaWorldEventType.GARDENSHARE_GUIDE_START,this.shareGuideStart,this)},a.prototype.showGuideClick=function(){var e=this;f.pzaOperationMgr.showTips(this.node,0,0,null,z.pzaBubbleType.tips,3e4,function(a){e.tipsItem=a.node})},a.prototype.shareGuideStart=function(e){2==e&&P.pzaGlobalMask.showOperaArea(this.node)},a.prototype.onTouchStart=function(){var e=this;if(!this.isForShow&&this.view&&this.view.curTool&&this.view.curTool.isChoosing){var a=this.view.curTool.getOpType();if(a!==p.pzaGardenOpType.null)a===this.plant.opType&&this.choosing();else{if(this.view.glovePot)return;this.view.curTool.exec(null,!1,this.node,function(a){var t=cc.instantiate(e.node.getChildByName("plant"));t.parent=a,t.setPosition(15,-30)})}}},a.prototype.onTouchEnd=function(){var e=this;if(!this.isForShow&&this.view&&this.view.curTool&&this.view.curTool.isChoosing){var a=this.view.curTool.getOpType();a!==p.pzaGardenOpType.null&&this.view.curTool.exec(this.node.getPosition(),!0,this.node,function(){e.doOperation(a),e.isLock=!1,e.view.curTool.updateToolNum()},this)}},a.prototype.init=function(e,a){if(this.plant=e,this.view=a,this.plant.pot=this,this.node.parent=this.view.pots_container,e.pos<0){a.cartPot=this;var t=a.toolMap.get(p.pzaGardenToolType.cart);t&&t.putInCart(this)}else{var o=this.view.curShadowArr[e.pos];this.node.setPosition(o.getPosition()),o.getComponent(s.pzaGardenShadow).pot=this}return this.plantConf=p.default.instance().getGardenPlantConf(e.plantId),this.show(),this.node.zIndex=e.pos+1,this.setPlantAniState(),this},a.prototype.getPrice=function(){var e=1500;return 1===this.plant.level?e=this.plantConf.price1:2===this.plant.level?e=this.plantConf.price2:this.plant.level>=3&&(e=this.plantConf.price3),e},a.prototype.remove=function(){p.default.instance().removePlant(this.plant),this.node.removeFromParent(!0),this.node.destroy()},a.prototype.speedUp=function(){var e=this;if(4===this.plant.level){this.isSpeedUp=!0;var a=Date.now();this.plant.opTime>a&&(this.plant.opTime=(this.plant.opTime-a)/2+a),this.scheduleOnce(function(){e.isSpeedUp=!1},60)}},a.prototype.canBeChoosed=function(e){return e<0||!(this.plant.opType!==e||!this.pic_op.node.active)},a.prototype.willBeChoosed=function(e,a){void 0===a&&(a=!1),!a&&this.canBeChoosed(e)||this.hideChoosingEffect()},a.prototype.unChoosed=function(){this.unChoosing(),this.node.opacity=255,this.plantSP.node.color=cc.color(255,255,255),this.level0Node.color=cc.color(255,255,255),this.level1Node.color=cc.color(255,255,255),this.level2Node.color=cc.color(255,255,255)},a.prototype.reShow=function(e){this.node.parent=this.view.pots_container,this.changePos(e),this.isForShow=!1,this.isLock=!1,this.node.scale=1,this.show(),c.pzaSoundManager.playAudio("garden_move_normal")},a.prototype.showChoosingEffect=function(){this.selectedFrame.active=!0},a.prototype.choosing=function(){this.isLock=!0,this.showChoosingEffect()},a.prototype.onlyForShow=function(){this.isForShow=!0,this.unChoosed()},a.prototype.hideChoosingEffect=function(){this.choosingTW&&(this.choosingTW.stop(),this.choosingTW=null),this.selectedFrame.active=!1},a.prototype.unChoosing=function(){this.isLock=!1,this.selectedFrame.active=!1,this.hideChoosingEffect()},a.prototype.watered=function(){var e=this;this.cleanEffect.spineAnimation.node.active=!0,this.cleanEffect.playAnimation("idle",!0,function(){e.cleanEffect.spineAnimation.node.active=!1})},a.prototype.unwatered=function(){},a.prototype.isSleep=function(){return!1},a.prototype.getLevelScale=function(){return this.plant.env!==this.view.curEnv&&this.view.curEnv===p.pzaGardenEnv.normal?.6:1===this.plant.level?.5:2===this.plant.level?.7:.9},a.prototype.fixSpineY=function(){},a.prototype.setPlantAniState=function(){if(this.plantSP.node.active=!0,this.plantMask.enabled=!1,0==this.plant.level)this.level0Node.active=!0,this.level1Node.active=!1,this.level2Node.active=!1,this.lightBottom.active=!1,this.lightTop.active=!1,this.plantMask.enabled=!0,this.plantSP.node.active=!1;else if(1==this.plant.level)switch(this.level0Node.active=!1,this.level1Node.active=!0,this.level2Node.active=!1,this.lightBottom.active=!1,this.lightTop.active=!1,this.plantMask.enabled=!0,this.plantSP.node.x=0,this.plantSP.node.y=10,this.plantConf.id){case y.pzaPlantEnum.PEA_SHOOTER:case y.pzaPlantEnum.GARLIC:case y.pzaPlantEnum.CABBAGE_PULT:case y.pzaPlantEnum.MAGNET_SHROOM:this.plantSP.node.x=6;break;case y.pzaPlantEnum.SUN_FLOWER:this.plantSP.node.x=-2;break;case y.pzaPlantEnum.WALL_NUT:this.plantSP.node.x=3;break;case y.pzaPlantEnum.THREE_PEATER:this.plantMask.node.height=115,this.plantSP.node.x=6;break;case y.pzaPlantEnum.SPLIT_PEA:this.plantMask.node.width=120,this.plantSP.node.scaleX=.7,this.plantSP.node.y=14;break;case y.pzaPlantEnum.MARIGOLD:this.plantMask.node.width=80,this.plantMask.node.height=120;break;case y.pzaPlantEnum.KERNEL_PULT:this.plantSP.node.x=5,this.plantSP.node.scaleX=.9,this.plantSP.node.scaleY=.85;break;case y.pzaPlantEnum.REPEATER:this.plantSP.node.x=8;break;case y.pzaPlantEnum.DOOM_SHROOM:this.plantSP.node.x=-2;break;case y.pzaPlantEnum.FUME_SHROOM:this.plantSP.node.x=1,this.plantSP.node.scaleX=.9,this.plantSP.node.scaleY=.85;break;case y.pzaPlantEnum.MELON_PULT:this.plantSP.node.x=4;break;case y.pzaPlantEnum.TANGLE_KELP:this.plantSP.node.x=2;break;case y.pzaPlantEnum.SCAREDY_SHROOM:this.plantSP.node.x=1;break;case y.pzaPlantEnum.CACTUS:this.plantSP.node.x=9}else if(2==this.plant.level){this.level0Node.active=!1,this.level1Node.active=!1,this.level2Node.active=!0,this.lightBottom.active=!1,this.lightTop.active=!1;var e=this.level2Node.getChildByName("noArm"),a=this.level2Node.getChildByName("split");switch(e.active=!1,a.active=!1,this.plantConf.id==y.pzaPlantEnum.SPLIT_PEA?a.active=!0:e.active=!0,this.level2Node.x=0,this.level2Node.y=-13.7,this.level2Node.scale=.8,this.plantConf.id){case y.pzaPlantEnum.BLOVER:this.level2Node.x=3.8;break;case y.pzaPlantEnum.STAR_FRUIT:case y.pzaPlantEnum.SUN_SHROOM:this.level2Node.scale=.7;break;case y.pzaPlantEnum.WALL_NUT:this.level2Node.x=-.8;break;case y.pzaPlantEnum.SUN_FLOWER:this.level2Node.scale=.7,this.level2Node.x=2,this.level2Node.y=-16;break;case y.pzaPlantEnum.CACTUS:this.level2Node.x=-7;break;case y.pzaPlantEnum.SPLIT_PEA:this.level2Node.scaleX=.9,this.level2Node.y=-15;break;case y.pzaPlantEnum.MARIGOLD:this.level2Node.x=1.2,this.level2Node.y=-14;break;case y.pzaPlantEnum.KERNEL_PULT:this.level2Node.x=-1.5;break;case y.pzaPlantEnum.CABBAGE_PULT:this.level2Node.scale=.6,this.level2Node.x=-5;break;case y.pzaPlantEnum.THREE_PEATER:this.level2Node.x=-5;break;case y.pzaPlantEnum.TORCHWOOD:this.level2Node.x=4;break;case y.pzaPlantEnum.ICE_SHROOM:this.level2Node.x=2;break;case y.pzaPlantEnum.SQUASH:this.level2Node.x=-5.5;break;case y.pzaPlantEnum.DOOM_SHROOM:this.level2Node.x=2;break;case y.pzaPlantEnum.GARLIC:this.level2Node.x=-3;break;case y.pzaPlantEnum.SEA_SHROOM:this.level2Node.x=2.2;break;case y.pzaPlantEnum.CHOMPER:this.level2Node.x=2.5;break;case y.pzaPlantEnum.SNOW_PEA:this.level2Node.x=2,this.level2Node.scale=.7;break;case y.pzaPlantEnum.REPEATER:this.level2Node.x=-6;break;case y.pzaPlantEnum.SCAREDY_SHROOM:this.level2Node.scale=.7;break;case y.pzaPlantEnum.MAGNET_SHROOM:this.level2Node.x=-3.5;break;case y.pzaPlantEnum.FUME_SHROOM:this.level2Node.scale=.7,this.level2Node.x=-4;break;case y.pzaPlantEnum.TALL_NUT:this.level2Node.x=6;break;case y.pzaPlantEnum.HYPNO_SHROOM:this.level2Node.scale=.7;break;case y.pzaPlantEnum.PEA_SHOOTER:case y.pzaPlantEnum.GRAVE_BUSTER:this.level2Node.x=-5;break;case y.pzaPlantEnum.CHERRY_BOMB:this.level2Node.x=4.5;break;case y.pzaPlantEnum.MELON_PULT:this.level2Node.x=4,this.level2Node.scaleX=.85;break;case y.pzaPlantEnum.JALAPENO:this.level2Node.x=5,this.level2Node.scale=.7}}else 3==this.plant.level?(this.level0Node.active=!1,this.level1Node.active=!1,this.level2Node.active=!1,this.lightBottom.active=!1,this.lightTop.active=!1):4==this.plant.level&&(this.level0Node.active=!1,this.level1Node.active=!1,this.level2Node.active=!1,this.lightBottom.active=!0,this.lightTop.active=!0)},a.prototype.updatePlantAni=function(){this.setPlantAniState(),0===this.plant.level||(this.plant.canLight()&&this.showLight(),this.fixSpineY())},a.prototype.changePos=function(e){var a=this.plant.pos;this.plant.pos=e.posId,e.pot=null,this.plant.env!==this.view.curEnv?p.default.instance().changeEnv(this.plant,this.view.curEnv):a>=0&&a!==this.plant.pos&&(this.view.curShadowArr[a].getComponent(s.pzaGardenShadow).pot=null),this.node.setPosition(e.node.getPosition()),this.view.curShadowArr[this.plant.pos].getComponent(s.pzaGardenShadow).pot=this,p.default.instance().savePlant(this.plant),c.pzaSoundManager.playAudio("garden_move_normal"),this.node.zIndex=e.posId+1},a.prototype.show=function(e,a){void 0===e&&(e=!1),void 0===a&&(a=null),this.unChoosed(),this.pic_op.node.active=!1,this.loadPlantSP(),this.plant.level>0&&this.plantConf.plantId,this.updatePlantAni(),a&&a.call(this);var t=Date.now();3==this.plant.level&&this.plant.opType==p.pzaGardenOpType.income&&this.plant.opLeft<=0&&this.plant.opTime>0&&this.plant.opTime<t&&(this.plant.opType=p.pzaGardenOpType.water,this.plant.opLeft=parseInt(l.default.randomDraw({3:.3333,4:.3333,5:.3333}))),4==this.plant.level&&this.showLight(),this.updateState()},a.prototype.loadPlantSP=function(){if(this.plantConf){var e=this.plantConf.id+"";[y.pzaPlantEnum.TANGLE_KELP,y.pzaPlantEnum.MELON_PULT].includes(this.plantConf.id)&&2==this.plant.level&&(e=this.plantConf.id+"_garden"),[y.pzaPlantEnum.STAR_FRUIT,y.pzaPlantEnum.SPLIT_PEA,y.pzaPlantEnum.SQUASH,y.pzaPlantEnum.KERNEL_PULT,y.pzaPlantEnum.FUME_SHROOM,y.pzaPlantEnum.GRAVE_BUSTER,y.pzaPlantEnum.BLOVER,y.pzaPlantEnum.TALL_NUT].includes(this.plantConf.id)&&1==this.plant.level&&(e=this.plantConf.id+"_gardenLevel1"),u.pzaSpriteFrameManager.loadPlantWholeCard(e,this.plantSP)}},a.prototype.showLight=function(){},a.prototype.createGardenShare=function(){var e=this,a=this.node.getChildByName("plant");g.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.GARDEN_SHARE_VIEW,function(t){var o=t&&t.getComponent(b.pzaGardenShareView);o&&o.bindData(a,e.plantConf.id,p.pzaGardenEnv.normal,e.plant.level)})},a.prototype.doOperation=function(e){var a=this;if(this.plant){if(e==p.pzaGardenOpType.share)return this.createGardenShare(),void m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GARDEN_CANCEL_CHOICE,!0);if(this.canBeChoosed(e)){this.tipsItem&&f.pzaOperationMgr.hideTips(),h.pzaLocalData.gardenGuiding&&e==this.plant.opType&&this.plant.opType==p.pzaGardenOpType.water&&this.view.showWaterOerationGuide();var t=this.plant.doOperation();if(this.updatePlantAni(),p.default.instance().savePlant(this.plant),t){if(C.pzaStatisticsMgr.sendEvent("System",{name:"collect",value:1}),t.isLight&&this.showLight(),t.dropNum>0)for(var o=0;o<t.dropNum;o++)this.view.dropCoin(this.node.getPosition(),t.dropType);t.isWet&&this.watered(),t.isLevelUp&&(this.show(!1,function(){}),c.pzaSoundManager.playAudio("garden_plantgrow")),this.pic_op.playAnimation("idle3",!1,function(){a.pic_op.node.active=!1})}}}},a.prototype.updateState=function(){var e=this;if(this.plant){var a=Date.now();if(this.plant.canLight()&&this.plant.lightGoneTime<a)return this.plant.doOperation(),void p.default.instance().savePlant(this.plant);if(this.plant.opLeft>0&&this.plant.opTime>0&&this.plant.opTime<a){if(this.pic_op.node.active)return;if(this.pic_op.node.active=!1,this.plant.opType===p.pzaGardenOpType.income){var t=Math.random()<.025?r.pzaDropType.GOLD_COIN:r.pzaDropType.SILVER_COIN;this.view.dropCoin(this.node.getPosition(),t),this.plant.doOperation(),p.default.instance().savePlant(this.plant)}else{this.pic_op.node.active=!0,this.pic_op.spineAnimation.node.opacity=255;var o=p.default.instance().opPicMap.get(this.plant.opType);this.pic_op.setAnimationSkin(o),this.pic_op.playAnimation("idle",!1,function(){e.pic_op.playAnimation("idle2",!0)})}}}},a.prototype.update=function(e){this.isForShow&&(this.aniColorValue+=100*e*this.aniColorDir,this.plantSP.node.color=cc.color(this.aniColorValue,this.aniColorValue,this.aniColorValue),this.level0Node.color=cc.color(this.aniColorValue,this.aniColorValue,this.aniColorValue),this.level1Node.color=cc.color(this.aniColorValue,this.aniColorValue,this.aniColorValue),this.level2Node.color=cc.color(this.aniColorValue,this.aniColorValue,this.aniColorValue),this.aniColorValue<=150?this.aniColorDir=1:this.aniColorValue>=255&&(this.aniColorDir=-1)),this.isLock||this.updateState()},a.prototype.clickNextLevel=function(){this.plant.level++,this.updatePlantAni()},i([_({displayName:"\u64cd\u4f5c\u7c7b\u578b\u56fe",type:d.pzaSpineController})],a.prototype,"pic_op",void 0),i([_({type:cc.Sprite})],a.prototype,"plantSP",void 0),i([_({type:cc.Node})],a.prototype,"level0Node",void 0),i([_({type:cc.Node})],a.prototype,"level1Node",void 0),i([_({type:cc.Node})],a.prototype,"level2Node",void 0),i([_({type:cc.Node})],a.prototype,"lightBottom",void 0),i([_({type:cc.Node})],a.prototype,"lightTop",void 0),i([_({type:cc.Node})],a.prototype,"selectedFrame",void 0),i([_({type:cc.Mask})],a.prototype,"plantMask",void 0),i([_({type:d.pzaSpineController})],a.prototype,"cleanEffect",void 0),i([S],a)}(cc.Component);t.pzaGardenPot=D,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGlobalMask":"pzaGlobalMask","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaGardenShareView":"pzaGardenShareView","../View/pzaBubbleItem":"pzaBubbleItem","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenShadow":"pzaGardenShadow"}],pzaGardenShadow:[function(e,a,t){"use strict";cc._RF.push(a,"1c55ehgrAxMcK6K+8S4IhPN","pzaGardenShadow");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenShadow=void 0;var r=e("./pzaGardenMgr"),p=e("./pzaGardenView"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.view=null,a.posId=0,a.pot=null,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.view=this.node.parent.parent.parent.parent.getComponent(p.pzaGardenView),this.view||(this.view=this.node.parent.parent.parent.getComponent(p.pzaGardenView))},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},a.prototype.onTouchStart=function(){if(this.view&&(!this.view.curTool||this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot))if(this.pot&&this.pot.node)this.pot.onTouchStart();else if(this.view.cartPot&&this.view.curTool&&this.view.curTool.type===r.pzaGardenToolType.cart)(e=this.view.toolMap.get(r.pzaGardenToolType.cart))&&e.execTarget(this);else if(this.view.glovePot&&this.view.curTool&&this.view.curTool.type===r.pzaGardenToolType.glove){var e;(e=this.view.toolMap.get(r.pzaGardenToolType.glove))&&e.execTarget(this)}},a.prototype.onTouchEnd=function(){this.pot&&this.view&&this.view.curTool&&this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot&&this.pot.onTouchEnd()},i([s],a)}(cc.Component));t.pzaGardenShadow=c,cc._RF.pop()},{"./pzaGardenMgr":"pzaGardenMgr","./pzaGardenView":"pzaGardenView"}],pzaGardenShareView:[function(e,a,t){"use strict";cc._RF.push(a,"7b43fAtehtIQqYxRwm8KTuf","pzaGardenShareView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenShareView=void 0;var r=e("../../Common/pzaCommonPopView"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaGlobalMask"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaOperationMgr"),d=e("../../Common/pzaSpineController"),h=e("../../Common/pzaSpriteFrameManager"),m=e("../../Common/pzaStatisticsMgr"),f=e("../../Common/pzaTipManager"),z=e("../../Common/pzaUIManager"),y=e("../../Common/pzaUtil"),g=e("../../Common/pzaWorldEventManager"),v=e("../../Garden/pzaGardenMgr"),b=e("../../Shop/pzaShopConfig"),P=e("../../utils/pzaChannel"),C=e("../pzaBubbleItem"),E=e("../pzaCommonMask"),S=cc._decorator,_=S.ccclass,D=S.property,M=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.profess=null,a.shareTxt=null,a.plantTitle=null,a.plantContent=null,a.cloneParent=null,a.spineCtrl=null,a}return n(a,e),a.prototype.bindData=function(e,a,t,o){cc.instantiate(e).parent=this.cloneParent;var n=l.pzaGameConfig.getPlantConfig(a);h.pzaSpriteFrameManager.loadPlantProfessBig(n.profession,this.profess),c.pzaLocalData.data.gardenShareRwdCount>0?this.shareTxt.string="\u5206\u4eab\u6709\u5956":this.shareTxt.string="\u5206\u4eab",0==o?(this.plantTitle.string="? ? ?",this.plantTitle.fontSize=42,this.plantContent.string="\u731c\u731c\u6211\u662f\u8c01?",this.profess.node.active=!1):(this.plantTitle.fontSize=35,this.plantTitle.string=n.name,this.plantContent.string=l.pzaGameConfig.PlantBookMap.get(a).bg1,this.profess.node.active=!0)},a.prototype.aniOver=function(){c.pzaLocalData.gardenGuiding&&(s.pzaGlobalMask.hideMask(),u.pzaOperationMgr.showTips(this.shareTxt.node.parent,0,0,null,C.pzaBubbleType.tips))},a.prototype.clickShareBtn=function(){var e=this;u.pzaOperationMgr.hideTips(),P.pzaChannel.instance().getChannel().shareByScreenShot("[\u6709\u4eba@\u4f60]\u5feb\u6765\u548c\u6211\u4e00\u8d77\u4f53\u9a8c\u5427",function(){c.pzaLocalData.data.gardenShareRwdCount>0&&(E.pzaCommonMask.showMask(),e.spineCtrl.node.active=!0,e.spineCtrl.playAnimation("animation",!1,function(){E.pzaCommonMask.hideMask(),e.spineCtrl.node.active=!1,e.getRandomRwd(),c.pzaLocalData.data.gardenShareRwdCount--,c.pzaLocalData.addDirty("gardenShareRwdCount")})),f.pzaTipManager.showHomeTip("\u5206\u4eab\u6210\u529f",null,3),m.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:5},{name:"ShareR",value:1})},function(){m.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:5},{name:"ShareR",value:0})},2,-300)},a.prototype.getRandomRwd=function(){if(Math.random()>=.8){var e=this.node.getChildByName("box"),a=v.default.instance().randomGardenPlant(0);v.default.instance().addGardenPlant(a);var t=b.pzaShopConfig.SHOP_CONFIG.get(b.pzaShopItemType.FLOWER_SEED);z.pzaUIManager.instance.showRewardUI(e,t.desc,this.close.bind(this))}else{var o=y.pzaUtil.getRandomNum(3,5),n=this.node.getChildByName("manure");n.getChildByName("label").getComponent(cc.Label).string="\xd7"+o,v.default.instance().addGardenTool(v.pzaGardenToolType.manure,o),t=b.pzaShopConfig.SHOP_CONFIG.get(b.pzaShopItemType.FERTILIZER),z.pzaUIManager.instance.showRewardUI(n,t.desc,this.close.bind(this))}},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node),c.pzaLocalData.gardenGuiding&&(u.pzaOperationMgr.hideTips(),g.pzaWorldEventManager.triggerEvent(g.pzaWorldEventType.GARDENSHARE_GUIDE_OVER))},i([D(cc.Sprite)],a.prototype,"profess",void 0),i([D(cc.Label)],a.prototype,"shareTxt",void 0),i([D(cc.Label)],a.prototype,"plantTitle",void 0),i([D(cc.Label)],a.prototype,"plantContent",void 0),i([D(cc.Node)],a.prototype,"cloneParent",void 0),i([D(d.pzaSpineController)],a.prototype,"spineCtrl",void 0),i([_],a)}(r.default);t.pzaGardenShareView=M,cc._RF.pop()},{"../../Common/pzaCommonPopView":"pzaCommonPopView","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGlobalMask":"pzaGlobalMask","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenMgr":"pzaGardenMgr","../../Shop/pzaShopConfig":"pzaShopConfig","../../utils/pzaChannel":"pzaChannel","../pzaBubbleItem":"pzaBubbleItem","../pzaCommonMask":"pzaCommonMask"}],pzaGardenSnail:[function(e,a,t){"use strict";cc._RF.push(a,"21d1eYCqihAeaMR/47RoFBe","pzaGardenSnail");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenSnail=t.pzaGardenSnailState=void 0;var r,p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaUtil"),c=e("../utils/pzakc"),u=e("./pzaGardenDropCoin"),d=e("./pzaGardenMgr"),h=cc._decorator,m=h.ccclass,f=h.property;(function(e){e.collect="collect",e.sleep="sleep"})(r=t.pzaGardenSnailState||(t.pzaGardenSnailState={}));var z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine_snail=null,a.sleep_arrow=null,a.chocolateNode=null,a.view=null,a.state=r.collect,a.targetNode=null,a.maxActiveTime=60,a.activeTime=0,a.speedX=50,a.speedXSwitchTime=1,a.speedY=50,a.isLock=!0,a.speedUp=1,a.speedTime=0,a.targetOffset=cc.v2(0,0),a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node._touchListener.setSwallowTouches(!1),this.speedTime=p.pzaLocalData.data.snailSpeedUpTime,this.speedTime>0&&(this.speedUp=2,this.scheduleOnce(function(){e.speedUp=1},this.speedTime))},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},a.prototype.init=function(e){var a=this;return this.view=e,this.node.parent=e.layer_snail,this.node.active=!0,this.node.setPosition(cc.v2(-10,-10)),this.scheduleOnce(function(){a.changeTarget(null,!0)}),this.stateCollect(),this.chocolateNode.active=!1,this},a.prototype.onTouchStart=function(e){this.state!==r.sleep?this.view.curTool&&this.view.curTool.type===d.pzaGardenToolType.chocolate&&this.view.curTool.isChoosing&&(this.eatChocolate(),this.view.curTool.updateToolNum(),this.view.curTool.playAni(this.view.layer_tool_drag.convertToNodeSpaceAR(e.getLocation()),null,null)):this.wakeUp()},a.prototype.eatChocolate=function(){var e=this;this.speedUp=2,this.speedTime=3600,p.pzaLocalData.data.snailSpeedUpTime=this.speedTime,p.pzaLocalData.addDirty("snailSpeedUpTime"),this.scheduleOnce(function(){e.speedUp=1},this.speedTime),l.pzaSoundManager.playAudio("garden_speedup")},a.prototype.hide=function(){this.isLock=!0,this.node.active=!1},a.prototype.show=function(){this.isLock=!1,this.node.active=!0},a.prototype.wakeUp=function(){var e=this;this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){e.isLock=!1,e.spine_snail.setCompleteListener(null),e.spine_snail.setAnimation(0,"idle",!0),e.stateCollect()}),this.spine_snail.setAnimation(0,"idle4",!1)},a.prototype.toSleep=function(){var e=this;this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){e.isLock=!1,e.stateSleep()}),this.spine_snail.setAnimation(0,"idle3",!1)},a.prototype.findTarget=function(e){void 0===e&&(e=null);for(var a=this.view.layer_coin.children,t=this.node.getPosition(),o=null,n=1280,i=0;i<a.length;i++){var r=a[i];if(r.getComponent(u.pzaGardenDropCoin).canPick){var p=t.sub(r.getPosition()).mag();p<n&&(n=p,o=r)}}if(o)n<10&&(o.getComponent(u.pzaGardenDropCoin).pickUp(),this.changeTarget());else{if(a=this.view.pots_container.children,e){var l=[];for(i=0;i<a.length;i++)a[i].uuid!==e.uuid&&l.push(a[i]);a=l}o=c.default.randomChoose(a,1)[0]}return o},a.prototype.changeTarget=function(e,a){if(void 0===e&&(e=null),void 0===a&&(a=!1),this.targetNode=this.findTarget(e),this.targetNode){var t=this.node.x,o=s.pzaUtil.getRandomNum(-150,150),n=s.pzaUtil.getRandomNum(-150,150);this.targetOffset=cc.v2(o,n),this.targetNode.x+this.targetOffset.x>t&&this.node.scaleX<0||this.targetNode.x+this.targetOffset.x<t&&this.node.scaleX>0?(this.isLock=!0,this.node.scaleX=-this.node.scaleX,this.isLock=!1,this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"idle",!0)):a&&(this.isLock=!1,this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"idle",!0))}else console.error("\u8717\u725b\u65e0\u76ee\u6807")},a.prototype.stateCollect=function(){this.activeTime=0,this.state=r.collect,cc.Tween.stopAllByTarget(this.sleep_arrow),this.sleep_arrow.active=!1},a.prototype.stateSleep=function(){this.activeTime=this.maxActiveTime,this.state=r.sleep,this.sleep_arrow.active=!0,cc.Tween.stopAllByTarget(this.sleep_arrow),cc.tween(this.sleep_arrow).repeatForever(cc.tween().to(.2,{y:85}).to(.2,{y:50})).start(),this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"idle2",!0)},a.prototype.update=function(e){if(!this.isLock&&this.state!==r.sleep)if(this.activeTime+=e,this.activeTime>=(this.speedUp>1?3600:this.maxActiveTime))this.toSleep();else{var a=this.node.getPosition();if(this.targetNode&&this.targetNode.isValid){this.targetNode&&!this.targetNode.getComponent(u.pzaGardenDropCoin)&&this.view.layer_coin.children.length>0&&this.changeTarget();var t=this.targetNode.getPosition();t.x+=this.targetOffset.x,t.y+=this.targetOffset.y,a.fuzzyEquals(t,10)&&(this.targetNode.getComponent(u.pzaGardenDropCoin)?(this.targetNode.getComponent(u.pzaGardenDropCoin).pickUp(),this.changeTarget()):this.changeTarget(this.targetNode)),this.speedXSwitchTime-=e,this.speedXSwitchTime<=0&&(50===this.speedX?(this.speedX=120,this.speedXSwitchTime=.6):(this.speedX=50,this.speedXSwitchTime=1));var o=t.sub(a),n=o.mag(),i=this.speedX*e*this.speedUp/n*o.x,p=this.speedY*e*this.speedUp/n*o.y;this.node.x+=i,this.node.y+=p}else this.changeTarget()}},a.prototype.showChololateNode=function(){this.chocolateNode.active=!0},a.prototype.hideChololateNode=function(){this.chocolateNode.active=!1},i([f({displayName:"\u8717\u725bspine",type:sp.Skeleton})],a.prototype,"spine_snail",void 0),i([f({displayName:"\u7761\u89c9\u7bad\u5934",type:cc.Node})],a.prototype,"sleep_arrow",void 0),i([f({displayName:"\u5de7\u514b\u529b\u8282\u70b9",type:cc.Node})],a.prototype,"chocolateNode",void 0),i([m],a)}(cc.Component);t.pzaGardenSnail=z,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../utils/pzakc":"pzakc","./pzaGardenDropCoin":"pzaGardenDropCoin","./pzaGardenMgr":"pzaGardenMgr"}],pzaGardenTool:[function(e,a,t){"use strict";cc._RF.push(a,"9d63ec3acNAlLxgE9iS6YIg","pzaGardenTool");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenTool=void 0;var p=e("./pzaGardenMgr"),l=e("../Load/pzaBundleObjectPool"),s=e("../utils/pzaResMgr"),c=e("../utils/pzakc"),u=e("./pzaGardenView"),d=e("./pzaGardenPot"),h=e("./pzaGardenShadow"),m=e("../Common/pzaLocalData"),f=e("../Common/pzaSoundManager"),z=e("../Common/pzaOperationMgr"),y=e("../Common/pzaWorldEventManager"),g=e("../Common/pzaGlobalMask"),v=cc._decorator,b=v.ccclass,P=v.property,C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.pic_tool=null,a.plant_cart=null,a.pic_plant_op=null,a.t_num=null,a.spine_tool=null,a.guide_arrow=null,a.guide_finger=null,a.car_top=null,a.clonePlantParent=null,a.type=p.pzaGardenToolType.waterPot,a.num=0,a.view=null,a.isDrag=!1,a.isChoosing=!1,a.isDoing=!1,a.dragNode=null,a.moveMinDist=50,a.moveStartPos=null,a.guideClickCall=null,a.guideUseCall=null,a.shareGardenGuide=!1,a.toolAudioMap=new Map([[p.pzaGardenToolType.manure,"garden_manure"],[p.pzaGardenToolType.phonograph,"garden_phonograph"],[p.pzaGardenToolType.waterPot,"garden_water"],[p.pzaGardenToolType.goldWaterPot,"garden_water"],[p.pzaGardenToolType.chocolate,"garden_wakeup"]]),a}var t;return n(a,e),t=a,a.prototype.getOpType=function(){return this.type===p.pzaGardenToolType.waterPot||this.type===p.pzaGardenToolType.goldWaterPot?p.pzaGardenOpType.water:this.type===p.pzaGardenToolType.manure?p.pzaGardenOpType.manure:this.type===p.pzaGardenToolType.pesticide?p.pzaGardenOpType.pesticide:this.type===p.pzaGardenToolType.phonograph?p.pzaGardenOpType.phonograph:this.type===p.pzaGardenToolType.chocolate?p.pzaGardenOpType.chocolate:this.type===p.pzaGardenToolType.share?p.pzaGardenOpType.share:p.pzaGardenOpType.null},a.prototype.onEnable=function(){y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GARDEN_CANCEL_CHOICE,this.unChoosed,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GARDENSHARE_GUIDE_START,this.shareGuideStart,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plant_cart.removeAllChildren(),this.plant_cart.active=!1},a.prototype.onDisable=function(){y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GARDEN_CANCEL_CHOICE,this.unChoosed,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GARDENSHARE_GUIDE_START,this.shareGuideStart,this),this.unChoosed(!0),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},a.prototype.shareGuideStart=function(e){this.type===p.pzaGardenToolType.share&&1==e&&(this.shareGardenGuide=!0,g.pzaGlobalMask.showOperaArea(this.node))},a.prototype.init=function(e,a){var t=this;this.type=e,this.view=a,this.node.parent=a.layer_tool,this.view.toolMap.set(this.type,this),this.plant_cart.active=!1,this.guide_arrow.active=!1,this.guide_finger.active=!1,this.guideClickCall=null,p.default.numToolMap.has(this.type)?(this.t_num.node.active=!0,this.t_num.string="x"+(m.pzaLocalData.data.gardenToolNum[""+e]||0)):this.t_num.node.active=!1,this.type===p.pzaGardenToolType.cart&&a.cartPot&&this.putInCart(a.cartPot);var o=p.default.instance().toolPicMap.get(this.type);e==p.pzaGardenToolType.backEnv&&(o=p.default.instance().toolPicMap.get(p.pzaGardenToolType.nextEnv)),l.pzaBundleObjectPool.requestSpriteFrameByUrl(o,function(a,o){null==a?o?(t.pic_tool.spriteFrame=o,t.pic_tool.node.scaleX=e==p.pzaGardenToolType.backEnv?-1:1):c.default.err("\u65e0tool\u56fe"):console.error(a)});var n=p.default.instance().toolSpineMap.get(this.type);return n&&s.pzaResMgr.instance().getSpineSync(n,function(e,a){e?console.error(e):t.spine_tool.skeletonData=a}),this},a.prototype.setTouchStart=function(e){this.moveStartPos=this.view.layer_tool_drag.convertToNodeSpaceAR(e.getLocation())},a.prototype.onTouchStart=function(e){this.shareGardenGuide&&(this.shareGardenGuide=!1,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GARDENSHARE_GUIDE_START,2)),this.isChoosing?this.unChoosed(!0):(y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GARDEN_CANCEL_CHOICE,!0),u.pzaGardenView.toolInUse=this.type,this.view.curTool=this,f.pzaSoundManager.playAudio("garden_tool_click"),this.type!==p.pzaGardenToolType.nextEnv&&this.type!==p.pzaGardenToolType.backEnv?(this.setTouchStart(e),this.choosed(),null!=this.guideClickCall&&(this.guideClickCall(),this.guideClickCall=null)):this.exec(null,!1,null))},a.prototype.onTouchEnd=function(e){var a=this;if(this.isDrag){var t=null;if(this.dragNode&&(this.dragNode.isValid&&(t=this.view.dragPoint.getPosition(),this.dragNode.destroy()),this.dragNode=null),this.isChoosing&&t){if(this.type===p.pzaGardenToolType.glove&&this.view.glovePot)return void this.execTarget(this.view.curShadow);if(this.type===p.pzaGardenToolType.cart&&this.view.cartPot)return void this.unChoosed(!1);var o=this.getOpType(),n=this.view.choosedPots.slice();if(n.length>0)this.exec(t,!1,n[0].node,function(){for(var e=0;e<n.length;e++){var t=n[e];t.doOperation(o),t.unChoosing()}a.view.curTool.updateToolNum()},this);else if(this.type===p.pzaGardenToolType.goldWaterPot){var i=this.view.layer_tool_drag.convertToNodeSpaceAR(e.getLocation());this.playAni(i,null,null)}}}else this.moveStartPos=null,this.isDrag=!1},a.prototype.onTouchMove=function(e){var a=this;if(this.isChoosing&&this.moveStartPos&&this.type!==p.pzaGardenToolType.nextEnv){var t=this.view.layer_tool_drag.convertToNodeSpaceAR(e.getLocation());if(!(t.sub(this.moveStartPos).mag()<this.moveMinDist)){if(this.type===p.pzaGardenToolType.glove&&this.view.glovePot)return this.dragNode?void this.view.dragPoint.setPosition(t):(this.isDrag=!0,this.dragNode=cc.instantiate(this.view.glovePot.node),this.dragNode.getComponent(d.pzaGardenPot).onlyForShow(),this.dragNode.scale=1.5,this.dragNode.parent=this.view.dragPoint,this.dragNode.setPosition(60,60),this.view.dragPoint.setPosition(t),void(this.view.glovePot.node.opacity=0));if(this.isDrag=!0,this.dragNode)this.view.dragPoint.setPosition(t);else{if(this.dragNode=cc.instantiate(this.pic_tool.node),this.dragNode.color=cc.Color.WHITE,this.type===p.pzaGardenToolType.goldWaterPot){if(this.isDoing)return;if(!this.dragNode.children[0]||"waterBall"!==this.dragNode.children[0].name)return void l.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_water_ball",function(e,o){if(null==e)if(o){var n=new cc.Node("waterBall");n.addComponent(cc.Sprite).spriteFrame=o,a.dragNode.parent=n,a.dragNode.setPosition(0,0),a.dragNode=n,a.dragNode.parent=a.view.dragPoint,a.view.dragPoint.setPosition(t)}else c.default.err("\u65e0\u6c34\u5708");else console.error(e)})}this.dragNode.setPosition(0,0),this.dragNode.parent=this.view.dragPoint,this.view.dragPoint.setPosition(t)}}}},a.prototype.putInCart=function(e){this.view.cartPot=e,e.isForShow=!0,e.unChoosed(),e.node.scale=.5,e.pic_op.spineAnimation.node.opacity=0,c.default.removeNodeChildren(this.plant_cart),e.node.parent=this.plant_cart,e.node.setPosition(0,0),e.plant.pos>=0&&(this.view.curShadowArr[e.plant.pos].getComponent(h.pzaGardenShadow).pot=null),e.plant.pos=-1,this.car_top.active=!0,p.default.instance().savePlant(e.plant),this.plant_cart.active=!0,this.unChoosed(!1),f.pzaSoundManager.playAudio("garden_cart")},a.prototype.choosed=function(){if(p.default.numToolMap.has(this.type)&&!m.pzaLocalData.data.gardenToolNum[""+this.type])return this.view.showTip("\u6570\u91cf\u4e0d\u8db3!"),void this.unChoosed(!1);this.isChoosing=!0,this.view.chooseTool(this),this.choosedAni(this.pic_tool.node),this.type===p.pzaGardenToolType.cart&&this.choosedAni(this.pic_tool.node.getChildByName("25_top")),m.pzaLocalData.gardenGuiding&&this.type==p.pzaGardenToolType.manure&&(this.hideGuideArrow(),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GUIDE_GARDEN_CLICKPOT))},a.prototype.choosedAni=function(e,a){if(void 0===a&&(a=!1),a){var t=e.tw;return t&&t.stop(),void(e.color=cc.Color.WHITE)}var o=function(a,t,o,n){var i=a+(t-a)*n,r=new cc.Color(i,i,i);return e&&(e.color=r),i},n=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:o}).to(.5,{c:255},{progress:o}));e.tw=n,n.start()},a.prototype.unChoosed=function(e){var a,t;if(this.node){if(this.isDrag=!1,this.pic_tool.node.color=cc.Color.WHITE,this.isChoosing=!1,this.isDoing=!1,this.dragNode=null,e&&this.view.unchooseTool(),this.choosedAni(this.pic_tool.node,!0),this.type===p.pzaGardenToolType.cart&&this.choosedAni(this.pic_tool.node.getChildByName("25_top"),!0),!1===this.pic_tool.node.active&&(this.pic_tool.node.active=!0,this.view.glovePot&&(this.view.glovePot.isForShow=!1),this.view.glovePot=null,this.view.hideShadows()),this.view.cartPot||(this.plant_cart.active=!1,this.car_top.active=!1),this.type===p.pzaGardenToolType.sell)this.view.sellPot=null;else if(this.type===p.pzaGardenToolType.cart)this.view.hideShadows(),this.view.unchooseTool();else if(this.type===p.pzaGardenToolType.glove)try{for(var o=r(this.clonePlantParent.children),n=o.next();!n.done;n=o.next())n.value.destroy()}catch(i){a={error:i}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}u.pzaGardenView.toolInUse=p.pzaGardenToolType.null}else u.pzaGardenView.toolInUse=p.pzaGardenToolType.null},a.prototype.playAni=function(e,a,t){var o=this;if(void 0===t&&(t=null),!this.isDoing){this.isDoing=!0;var n=function(){var n=o.spine_tool.node;n.parent=o.view.layer_tool_drag,n.setPosition(e),n.active=!0,o.spine_tool.setCompleteListener(null);var i=o,r=!1,l=function(){r||(r=!0,n.active=!1,n.parent=i.node,a&&a.call(t),i.unChoosed(!0))},s="idle";o.type==p.pzaGardenToolType.waterPot?s="idle2":o.type==p.pzaGardenToolType.goldWaterPot&&(s="idle"),o.spine_tool.premultipliedAlpha=!1;var c=o.spine_tool.findAnimation(s);c||(s="idle",c=o.spine_tool.findAnimation(s)),o.scheduleOnce(l,c.duration+.1),o.spine_tool.setCompleteListener(l),o.type===p.pzaGardenToolType.chocolate?o.spine_tool.node.scale=.5:o.spine_tool.node.scale=1,o.spine_tool.setAnimation(0,s,!1);var u=o.toolAudioMap.get(o.type);if(u&&f.pzaSoundManager.playAudio(u),null!=o.guideUseCall){var d=o.guideUseCall;o.guideUseCall=null,d()}};if(this.type==p.pzaGardenToolType.manure||this.type==p.pzaGardenToolType.pesticide){var i=new cc.Node("newNode");i.parent=this.view.layer_tool_drag,i.setPosition(e),l.pzaBundleObjectPool.requestSpriteFrameByUrl(p.default.instance().toolPicMap.get(this.type),function(e,a){null==e?a?(i.y+=80,i.scale=.7,i.addComponent(cc.Sprite).spriteFrame=a,i.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){n(),i.destroy()}))).clone()):c.default.err("\u65e0tool\u56fe"):console.error(e)})}else n()}},a.prototype.updateToolNum=function(e){if(void 0===e&&(e=1),p.default.numToolMap.has(this.type)){p.default.instance().useGardenTool(this.type,e),this.t_num.node.active=!0;var a=m.pzaLocalData.data.gardenToolNum[""+this.type]||0;this.t_num.string="x"+a,z.pzaOperationMgr.showGardenGift(a)}},a.prototype.exec=function(e,a,t,o,n){var i,l,s=this;if(void 0===o&&(o=null),void 0===n&&(n=null),this.type===p.pzaGardenToolType.nextEnv||this.type===p.pzaGardenToolType.backEnv)return this.unChoosed(!0),this.type===p.pzaGardenToolType.nextEnv?this.view.nextEnv():this.view.backEnv(),void(o&&o.call(n));if(this.type===p.pzaGardenToolType.glove){if(!t||this.view.glovePot){if(this.unChoosed(!0),this.clonePlantParent)try{for(var c=r(this.clonePlantParent.children),u=c.next();!u.done;u=c.next())u.value.destroy()}catch(f){i={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}return}return this.view.glovePot=t.getComponent(d.pzaGardenPot),this.view.glovePot.isLock=!0,this.view.glovePot.willBeChoosed(null,!0),this.view.glovePot.isForShow=!0,this.isDoing=!0,this.pic_tool.node.active=!1,void(o&&o(this.clonePlantParent))}if(this.type===p.pzaGardenToolType.cart){if(!t||this.view.cartPot)return void this.unChoosed(!0);var h=t.getComponent(d.pzaGardenPot);return this.putInCart(h),void this.choosedAni(this.pic_tool.node,!0)}return this.type===p.pzaGardenToolType.sell?t?(this.unChoosed(!0),this.view.sellPot=t.getComponent(d.pzaGardenPot),void this.view.showSell()):void this.unChoosed(!0):this.type===p.pzaGardenToolType.chocolate?t?m.pzaLocalData.data.gardenToolNum[""+p.pzaGardenToolType.chocolate]?(t.getComponent(d.pzaGardenPot).speedUp(),this.updateToolNum(),void this.playAni(e,o,n)):(this.unChoosed(!0),console.error("\u5de7\u514b\u529b\u6570\u91cf\u4e0d\u8db3!"),void this.view.showTip("\u5de7\u514b\u529b\u6570\u91cf\u4e0d\u8db3!")):void this.unChoosed(!0):this.type===p.pzaGardenToolType.goldWaterPot?(this.playAni(e,function(){var e=s.view.choosedPots.slice();if(e.length>0)for(var a=0;a<e.length;a++){var t=e[a];t.doOperation(p.pzaGardenOpType.water),t.unChoosing()}},this),void this.view.curTool.updateToolNum()):void(this.type!==p.pzaGardenToolType.share?!a&&this.view.choosedPots.length<=0?this.isDrag=!1:this.spine_tool.skeletonData&&e?(this.playAni(e,o,n),this.guideEndCall&&(this.guideEndCall(),this.guideEndCall=null)):this.unChoosed(!0):o&&o())},a.prototype.execTarget=function(e){if(this.type!==p.pzaGardenToolType.sell){if(!e)return c.default.err("\u672a\u9009\u62e9\u76ee\u6807\u6216\u76ee\u6807\u4f4d\u7f6e"),void(this.view.glovePot&&(this.view.curShadowArr[this.view.glovePot.plant.pos].getComponent(h.pzaGardenShadow).pot=this.view.glovePot,this.view.glovePot.unChoosed(),this.unChoosed(!1)));if(this.type===p.pzaGardenToolType.glove){if(!this.view.glovePot)return;return this.view.glovePot.changePos(e),this.view.glovePot.unChoosed(),this.view.glovePot.isForShow=!1,this.view.glovePot=null,void this.unChoosed(!1)}if(this.type===p.pzaGardenToolType.cart){var a=this.view.cartPot;if(!a)return void this.unChoosed(!1);var t=this.putEnvMsg(a);if(t)return console.error(t),void this.view.showTip(t);this.pic_plant_op.spriteFrame=null,a.reShow(e),this.view.cartPot=null,this.unChoosed(!1)}}},a.prototype.putEnvMsg=function(){return this.view.curEnv,null},a.prototype.showGuideArrow=function(e,a,t){this.guide_arrow.active=!1,this.guide_finger.active=!0,this.guideClickCall=e,this.guideUseCall=a,t&&(this.guideEndCall=t),cc.Tween.stopAllByTarget(this.guide_arrow),cc.tween(this.guide_arrow).repeatForever(cc.tween().to(.3,{y:-110}).to(.3,{y:-85})).start()},a.prototype.hideGuideArrow=function(){this.guide_arrow.active=!1,this.guide_finger.active=!1},a.show=function(e,a,o){l.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Garden/garden_tool",!1,function(n,i){if(null==n&&null!=i){var r=i.getComponent(t);r&&r.init(e,a),o&&o()}else console.error(n)})},i([P({displayName:"\u5de5\u5177\u56fe",type:cc.Sprite})],a.prototype,"pic_tool",void 0),i([P({displayName:"\u63a8\u8f66\u653e\u7684\u690d\u7269",type:cc.Node})],a.prototype,"plant_cart",void 0),i([P({displayName:"\u63a8\u8f66\u690d\u7269\u72b6\u6001\u56fe",type:cc.Sprite})],a.prototype,"pic_plant_op",void 0),i([P({displayName:"\u6570\u91cf",type:cc.Label})],a.prototype,"t_num",void 0),i([P({displayName:"\u5bf9\u5e94spine",type:sp.Skeleton})],a.prototype,"spine_tool",void 0),i([P({displayName:"\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],a.prototype,"guide_arrow",void 0),i([P({displayName:"\u5f15\u5bfc\u624b\u6307",type:cc.Node})],a.prototype,"guide_finger",void 0),i([P({type:cc.Node})],a.prototype,"car_top",void 0),i([P({type:cc.Node})],a.prototype,"clonePlantParent",void 0),t=i([b],a)}(cc.Component);t.pzaGardenTool=C,cc._RF.pop()},{"../Common/pzaGlobalMask":"pzaGlobalMask","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenPot":"pzaGardenPot","./pzaGardenShadow":"pzaGardenShadow","./pzaGardenView":"pzaGardenView"}],pzaGardenView:[function(e,a,t){"use strict";cc._RF.push(a,"dbaecoUK+pJfZ+nZqv2jsG2","pzaGardenView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGardenView=void 0;var p=e("../Battle/Data/pzaDropType"),l=e("./pzaGardenDropCoin"),s=e("../Common/pzaGameCommonPool"),c=e("./pzaGardenMgr"),u=e("../Common/pzaUIManager"),d=e("../Load/pzaPreLoadManager"),h=e("../utils/pzakc"),m=e("./pzaGardenPot"),f=e("./pzaGardenTool"),z=e("./pzaGardenShadow"),y=e("../Common/pzaGameConfig"),g=e("../Common/pzaLocalData"),v=e("../Common/pzaTipManager"),b=e("../Load/pzaBundleObjectPool"),P=e("./pzaGardenSnail"),C=e("../Common/pzaSoundManager"),E=e("../Battle/Data/pzaGuideType"),S=e("./pzaGardenDave"),_=e("../View/pzaShopView"),D=e("../Common/pzaUtil"),M=e("../Common/pzaStatisticsMgr"),w=e("../Common/pzaWorldEventManager"),T=e("../utils/pzaChannel"),A=cc._decorator,B=A.ccclass,G=A.property,I=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.dragPoint=null,a.layer_snail=null,a.layer_tip=null,a.layer_board=null,a.layer_coin=null,a.layer_tool_drag=null,a.layer_tool=null,a.pots_container=null,a.pic_bg=null,a.pots_normal_shadow=null,a.pots_night_shadow=null,a.pots_water_shadow=null,a.bt_shop=null,a.bt_home=null,a.moneyCount=null,a.moneyShowNode=null,a.moneyTarget=null,a.dave=null,a.prefab_pot=null,a.prefab_snail=null,a.skipGuideBtn=null,a.shadows_normal=[],a.shadows_night=[],a.shadows_water=[],a.toolMap=new Map,a.curEnv=c.pzaGardenEnv.normal,a.curShadowContainer=null,a.curShadowArr=null,a.curTool=null,a.glovePot=null,a.sellPot=null,a.cartPot=null,a.snail=null,a.curShadow=null,a.choosedPots=[],a.lastShowCoinCount=null,a.hideMoneyNodeTime=0,a.guideManureCheck=!1,a.isNeedRefreshPlants=!1,a.isNeedRefreshTools=!1,a.unPickCoin=0,a.clickCloseDelay=!0,a.checkCoinSilde=!1,a.checkCoinSildeCD=0,a.guideWaterCount=0,a}var t;return n(a,e),t=a,a.prototype.onEnable=function(){var e=this;this.clickCloseDelay=!0,setTimeout(function(){e.clickCloseDelay=!1},1e3),"noAD"!=T.pzaChannel.instance().channel&&"oppo"!=T.pzaChannel.instance().channel&&"vivo"!=T.pzaChannel.instance().channel||(this.skipGuideBtn.getComponent(cc.Widget).enabled=!1,this.skipGuideBtn.x-=100),w.pzaWorldEventManager.addListener(w.pzaWorldEventType.UPDATE_GARDEN_STATE,this.updatePlant,this),w.pzaWorldEventManager.addListener(w.pzaWorldEventType.GARDENSHARE_GUIDE_OVER,this.guideOver,this),M.pzaStatisticsMgr.sendEvent("System",{name:"system",value:3}),this.curShadowContainer=this.pots_normal_shadow,this.bt_home.on(cc.Node.EventType.TOUCH_END,function(){e.clickCloseDelay||(C.pzaSoundManager.playSFX(),v.pzaTipManager.hideHomeTip(),s.pzaGameCommonPool.returnInstant(e.node))},this),this.bt_shop.on(cc.Node.EventType.TOUCH_END,this.clickShop,this),D.pzaUtil.blinkAni(this.bt_shop,!0),D.pzaUtil.blinkAni(this.bt_home,!0),this.layer_board.on(cc.Node.EventType.TOUCH_START,this.onToolTouchStart,this),this.layer_board.on(cc.Node.EventType.TOUCH_MOVE,this.onToolTouchMove,this),this.layer_board.on(cc.Node.EventType.TOUCH_CANCEL,this.onToolTouchEnd,this),this.layer_board.on(cc.Node.EventType.TOUCH_END,this.onToolTouchEnd,this),this.dave.node.active=!1,this.isNeedRefreshPlants=!1,h.default.delMsgReciever("addNewGardenPlant"),h.default.regMsgReciever("addNewGardenPlant",function(){return e.isNeedRefreshPlants=!0,!1}),this.isNeedRefreshTools=!1,h.default.delMsgReciever("addNewGardenTool"),h.default.regMsgReciever("addNewGardenTool",function(){return e.isNeedRefreshTools=!0,!1}),this.moneyShowNode.active=!1,this.lastShowCoinCount=null,this.hideMoneyNodeTime=0,this.guideManureCheck=!1,g.pzaLocalData.data.curGuideType==E.pzaGuideType.GUIDE_GARDEN_5_4?(g.pzaLocalData.gardenGuiding=!0,this.showGardenGuide()):g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.sell]||c.default.instance().addGardenTool(c.pzaGardenToolType.sell,1,!1),this.cartPot=null,this.curTool=null,t.toolInUse=c.pzaGardenToolType.null;for(var a=0;a<c.default.instance().addPlantArr.length;a++)c.default.instance().addGardenPlant(c.default.instance().addPlantArr[a]);for(c.default.instance().addPlantArr=[],a=0;a<g.pzaLocalData.data.dropPlantArr.length;a++)c.default.instance().addGardenPlant(g.pzaLocalData.data.dropPlantArr[a]);g.pzaLocalData.data.dropPlantArr=[],g.pzaLocalData.addDirty("dropPlantArr"),console.log("pzaLocalData.data.gardenPlants :",g.pzaLocalData.data.gardenPlants)},a.prototype.onDisable=function(){this.unschedule(this.saveLastTime),this.removeUnPickCoin(),w.pzaWorldEventManager.removeListener(w.pzaWorldEventType.UPDATE_GARDEN_STATE,this.updatePlant,this),w.pzaWorldEventManager.removeListener(w.pzaWorldEventType.GARDENSHARE_GUIDE_OVER,this.guideOver,this),this.bt_home.off(cc.Node.EventType.TOUCH_END),this.bt_shop.off(cc.Node.EventType.TOUCH_END),this.layer_board.off(cc.Node.EventType.TOUCH_START,this.onToolTouchStart,this),this.layer_board.off(cc.Node.EventType.TOUCH_MOVE,this.onToolTouchMove,this),this.layer_board.off(cc.Node.EventType.TOUCH_CANCEL,this.onToolTouchEnd,this),this.layer_board.off(cc.Node.EventType.TOUCH_END,this.onToolTouchEnd,this),C.pzaSoundManager.playBgm(C.pzaBGMName.LOADING)},a.prototype.removeUnPickCoin=function(){var e=this;if(!g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.snail])return this.layer_coin.children.forEach(function(e){var a=e.getComponent(l.pzaGardenDropCoin);a.canPick&&(g.pzaLocalData.data.coin+=a.price),e.isValid&&e.destroy()}),void g.pzaLocalData.addDirty("coin");this.layer_coin.children.forEach(function(a){var t=a.getComponent(l.pzaGardenDropCoin);t.canPick&&(e.unPickCoin+=t.price),a.isValid&&a.destroy()})},a.prototype.onToolTouchStart=function(e){this.checkSildeCoin(e),this.curTool&&this.curTool.isChoosing&&this.curTool.setTouchStart(e)},a.prototype.checkSildeCoin=function(e){var a,t;if(this.checkCoinSilde){this.checkCoinSildeCD=.1,this.checkCoinSilde=!1;var o=e.getLocation(),n=this.node.convertToNodeSpaceAR(o);try{for(var i=r(this.layer_coin.children),p=i.next();!p.done;p=i.next()){var s=p.value;if(new cc.Rect(s.x-s.width/2,s.y-s.height/2,s.width,s.height).contains(n)){var c=s.getComponent(l.pzaGardenDropCoin);c&&c.pickUp()}}}catch(u){a={error:u}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}}},a.prototype.onToolTouchMove=function(e){this.checkSildeCoin(e),this.curTool&&([c.pzaGardenToolType.waterPot,c.pzaGardenToolType.pesticide,c.pzaGardenToolType.manure,c.pzaGardenToolType.goldWaterPot].includes(this.curTool.type)&&this.curTool.isDoing||this.curTool.onTouchMove(e))},a.prototype.onToolTouchEnd=function(e){var a=this;if(this.curTool&&this.curTool.isChoosing)if(this.curTool.isDrag)this.curTool.onTouchEnd(e);else if(this.curTool.type===c.pzaGardenToolType.goldWaterPot){if(this.curTool.isDoing)return;var t=this.layer_tool_drag.convertToNodeSpaceAR(e.getLocation());if(b.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_water_ball",function(e,o){if(null==e)if(o){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=o,n.parent=a.layer_tool_drag,n.setPosition(t),a.scheduleOnce(function(){n.destroy()},.3)}else h.default.err("\u65e0\u6c34\u5708");else console.error(e)}),this.dragChoose(t)){var o=this.choosedPots.slice();o.length>0&&this.curTool.exec(t,!1,o[0].node,null,null)}else this.curTool.playAni(t,null,null)}else this.curTool.isDoing||this.curTool.unChoosed(!0)},a.prototype.init=function(){this.shadows_normal=[];for(var e=0;e<this.pots_normal_shadow.children.length;e++)this.shadows_normal[e]=this.pots_normal_shadow.children[e],this.shadows_normal[e].getComponent(z.pzaGardenShadow).posId=e;for(this.shadows_night=[],e=0;e<this.pots_night_shadow.children.length;e++)this.shadows_night[e]=this.pots_night_shadow.children[e],this.shadows_night[e].getComponent(z.pzaGardenShadow).posId=e;for(this.shadows_water=[],e=0;e<this.pots_water_shadow.children.length;e++)this.shadows_water[e]=this.pots_water_shadow.children[e],this.shadows_water[e].getComponent(z.pzaGardenShadow).posId=e;this.curShadowArr=this.shadows_normal,this.showTools(),this.showOffLineReward(),this.unschedule(this.saveLastTime),this.schedule(this.saveLastTime,1,cc.macro.REPEAT_FOREVER),this.changeEnv(this.curEnv),C.pzaSoundManager.playBgm(C.pzaBGMName.GARDEN)},a.prototype.showOffLineReward=function(){if(g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.snail]){var e=this.unPickCoin+c.default.instance().getOffLineReward();e&&(g.pzaLocalData.data.coin+=e,g.pzaLocalData.addDirty("coin"),this.showTip("\u5f53\u4f60\u4e0d\u5728\u7684\u65f6\u5019\uff0c\u7259\u8759\u8760\u4e3a\u4f60\u6536\u96c6\u4e86"+e+"!")),this.unPickCoin=0}},a.prototype.saveLastTime=function(){g.pzaLocalData.data.gardenLastTime=Date.now(),g.pzaLocalData.addDirty("gardenLastTime")},a.prototype.showTip=function(e,a){void 0===a&&(a=3),v.pzaTipManager.showHomeTip(e,this.layer_tip,a)},a.prototype.showSell=function(){var e=this;if(!this.sellPot)return this.showTip("\u65e0\u53ef\u552e\u5356\u624b\u529e"),!1;var a,t=this.sellPot.getPrice();return a=this.sellPot.plant.level>=1?"\u6211\u7ed9\u4f60$"+t+"\u6765\u6362 "+y.pzaGameConfig.getPlantConfig(this.sellPot.plant.plantId).name+"!":"\u6211\u7ed9\u4f60$1500\u6765\u6362\u672a\u89e3\u5c01\u7684\u624b\u529e\uff01",this.dave.showSell(a,function(){if(e.sellPot){var a=e.sellPot.getPrice();g.pzaLocalData.data.coin+=a,g.pzaLocalData.addDirty("coin"),C.pzaSoundManager.playAudio("garden_sell"),e.dropCoin(cc.v2(e.sellPot.node.position),p.pzaDropType.GOLD_COIN,!0),e.sellPot.remove(),e.sellPot=null,e.moneyShowNode.active=!0,e.hideMoneyNodeTime=8}}.bind(this)),this.moneyShowNode.active=!0,this.hideMoneyNodeTime=8,!0},a.prototype.chooseTool=function(e){if(t.toolInUse==c.pzaGardenToolType.null||t.toolInUse===e.type){this.curTool&&this.curTool!==e&&this.curTool.unChoosed(!1),this.curTool=e;for(var a=this.pots_container.children,o=0;o<a.length;o++)a[o].getComponent(m.pzaGardenPot).willBeChoosed(this.curTool.getOpType());this.curTool.getOpType()==c.pzaGardenOpType.chocolate&&this.snail&&this.snail.showChololateNode()}},a.prototype.unchooseTool=function(){for(var e=this.pots_container.children,a=0;a<e.length;a++)e[a].getComponent(m.pzaGardenPot).unChoosed();this.choosedPots.length=0,this.snail&&this.snail.hideChololateNode()},a.prototype.hideShadows=function(){this.curEnv!==c.pzaGardenEnv.normal&&(this.curShadowContainer.opacity=0)},a.prototype.showShadows=function(){if(this.curEnv!==c.pzaGardenEnv.normal){var e=new Map;this.pots_container.children.forEach(function(a){var t=a.getComponent(m.pzaGardenPot).plant.pos;e.set(t,1)}),this.curShadowContainer.opacity=255;for(var a=0;a<this.curShadowArr.length;a++){var t=this.curShadowArr[a];e.has(t.getComponent(z.pzaGardenShadow).posId)?t.opacity=0:t.opacity=255}}},a.prototype.getNextEnv=function(e){var a=e+1;return a>c.pzaGardenEnv.water&&(a=c.pzaGardenEnv.normal),a},a.prototype.getBackEnv=function(e){var a=e-1;return a<c.pzaGardenEnv.normal&&(a=c.pzaGardenEnv.water),a},a.prototype.changeEnv=function(e){var a=this;this.curEnv=e,this.curEnv===c.pzaGardenEnv.normal?(this.curShadowContainer=this.pots_normal_shadow,this.curShadowArr=this.shadows_normal,this.pots_night_shadow.active=!1,this.pots_water_shadow.active=!1):this.curEnv===c.pzaGardenEnv.night?(this.curShadowContainer=this.pots_night_shadow,this.curShadowArr=this.shadows_night,this.pots_normal_shadow.active=!1,this.pots_water_shadow.active=!1,this.curShadowContainer.opacity=0):(this.curShadowContainer=this.pots_water_shadow,this.curShadowArr=this.shadows_water,this.pots_night_shadow.active=!1,this.pots_normal_shadow.active=!1,this.curShadowContainer.opacity=0),this.curShadowContainer.active=!0,this.removeUnPickCoin(),this.curTool&&(this.curTool.unChoosed(!0),this.curTool=null),b.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_bg"+this.curEnv,function(e,t){null==e?t?a.pic_bg.spriteFrame=t:h.default.err("\u65e0\u80cc\u666f\u56fe"):console.error(e)}),this.showPlants(),this.snail},a.prototype.nextEnv=function(){for(var e=this.getNextEnv(this.curEnv);e!==c.pzaGardenEnv.normal&&!g.pzaLocalData.data.gardenEnv[""+e];)e=this.getNextEnv(e);this.changeEnv(e)},a.prototype.backEnv=function(){for(var e=this.getBackEnv(this.curEnv);e!==c.pzaGardenEnv.normal&&!g.pzaLocalData.data.gardenEnv[""+e];)e=this.getBackEnv(e);this.changeEnv(e)},a.prototype.showPlants=function(){h.default.removeNodeChildren(this.pots_container);for(var e=c.default.instance().getCurPlants(this.curEnv),a=0;a<e.length;a++){var t=e[a];cc.instantiate(this.prefab_pot).getComponent(m.pzaGardenPot).init(t,this)}},a.prototype.showTools=function(){h.default.removeNodeChildren(this.layer_tool),null!=g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.goldWaterPot]?f.pzaGardenTool.show(c.pzaGardenToolType.goldWaterPot,this):f.pzaGardenTool.show(c.pzaGardenToolType.waterPot,this);for(var e=c.pzaGardenToolType.manure;e<=c.pzaGardenToolType.cart;e++)null!=g.pzaLocalData.data.gardenToolNum[""+e]&&f.pzaGardenTool.show(e,this),e==c.pzaGardenToolType.manure&&null!=g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.pesticide]&&f.pzaGardenTool.show(c.pzaGardenToolType.pesticide,this);!1===g.pzaLocalData.gardenGuiding&&f.pzaGardenTool.show(c.pzaGardenToolType.share,this),(g.pzaLocalData.data.gardenEnv[""+c.pzaGardenEnv.night]||g.pzaLocalData.data.gardenEnv[""+c.pzaGardenEnv.water])&&(f.pzaGardenTool.show(c.pzaGardenToolType.backEnv,this),f.pzaGardenTool.show(c.pzaGardenToolType.nextEnv,this)),this.curEnv===c.pzaGardenEnv.normal&&g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.snail]&&(h.default.removeNodeChildren(this.layer_snail),this.snail=cc.instantiate(this.prefab_snail).getComponent(P.pzaGardenSnail).init(this))},a.prototype.dropCoin=function(e,a,t){var o=this;void 0===t&&(t=!1);var n=this.moneyTarget.convertToWorldSpaceAR(cc.v2()),i=this.layer_coin.convertToNodeSpaceAR(n);l.pzaGardenDropCoin.show(this.layer_coin,a,e,i,function(){o.moneyShowNode.active=!0,o.hideMoneyNodeTime=8,o.updateMoney(0)},t)},a.prototype.dragChoose=function(e){var a=1;if(this.curTool.type!==c.pzaGardenToolType.goldWaterPot||(a=4,!this.curTool.isDoing)){this.choosedPots.length=0;for(var t=this.pots_container.children,o=[],n=0;n<t.length;n++){var i=(p=t[n]).getComponent(m.pzaGardenPot),r=p.getPosition().sub(e).mag();r>120?i.unChoosing():o.push({pot:i,dist:r})}if(o.length<=0)return!1;for(o.sort(function(e,a){return e.dist-a.dist}),n=0;n<o.length;n++){var p=o[n];n>=a?p.pot.unChoosing():(p.pot.choosing(),this.choosedPots.push(p.pot))}return this.choosedPots.length>0}},a.prototype.dragForGlove=function(){if(this.glovePot){for(var e=this.curShadowContainer.children,a=this.dragPoint.getPosition(),t=0;t<e.length;t++){var o=e[t];if(o.getPosition().sub(a).mag()<40){if(o.getComponent(z.pzaGardenShadow).pot)continue;return this.curTool.dragNode.setPosition(0,0),this.dragPoint.setPosition(o.getPosition()),this.curTool.dragNode.scale=1,void(this.curShadow=o.getComponent(z.pzaGardenShadow))}}this.curTool.dragNode.setPosition(60,60),this.curTool.dragNode.scale=1.2,this.curShadow=null}},a.prototype.clickShop=function(){var e=this;C.pzaSoundManager.playSFX(),u.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.SHOP_VIEW,function(a){var t=a&&a.getComponent(_.pzaShopView);e.curTool&&e.curTool.unChoosed(!0),g.pzaLocalData.gardenGuiding?(t&&t.showShopItem(3),t&&t.bindCloseCall(!1,function(){var a=e.toolMap.get(c.pzaGardenToolType.manure);null!=a&&a.showGuideArrow(null,function(){a.hideGuideArrow(),f.pzaGardenTool.show(c.pzaGardenToolType.share,e,function(){setTimeout(function(){v.pzaTipManager.hideHomeTip(),e.guideOver()},1e3)})},null),e.showTip("\u73b0\u5728\uff0c\u7ed9\u4f60\u7684\u624b\u529e\u4f7f\u7528\u989c\u6599\uff0c\u770b\u770b\u5b83\u4eec\u7684\u53d8\u5316\u5427\u3002",0)}),D.pzaUtil.blinkAni(e.bt_shop,!0)):t&&t.showShopItem(3)})},a.prototype.guideOver=function(){this.showTip("\u73b0\u5728\u4f60\u53ea\u80fd\u505a\u8fd9\u4e9b\u4e86\uff01\n\u5f53\u6709\u65b0\u7684\u7cfb\u7edf\u63d0\u793a\u51fa\u73b0\u65f6\u518d\u56de\u6765\u5427\uff01",10),this.bt_home.active=!0,D.pzaUtil.blinkAni(this.bt_home),g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.sell]||c.default.instance().addGardenTool(c.pzaGardenToolType.sell,1,!1),f.pzaGardenTool.show(c.pzaGardenToolType.sell,this),g.pzaLocalData.gardenGuiding=!1,g.pzaLocalData.data.curGuideType=null,g.pzaLocalData.addDirty("curGuideType")},a.prototype.update=function(e){this.guideManureCheck&&c.default.instance().checkPlantState(c.pzaGardenOpType.manure)&&(this.bt_shop.active=!0,this.showTip("\u4f60\u7684\u624b\u529e\u9700\u8981\u4e0a\u8272\u624d\u80fd\u8fdb\u4e00\u6b65\u5236\u4f5c\uff01\n\u8bbf\u95ee\u5546\u5e97\u53bb\u641e\u4e9b\u989c\u6599\u6765\u5427\u3002",0),this.guideManureCheck=!1,D.pzaUtil.blinkAni(this.bt_shop)),this.skipGuideBtn.active=g.pzaLocalData.gardenGuiding,this.updateMoney(e),this.checkCoinSilde||(this.checkCoinSildeCD-=e,this.checkCoinSildeCD<=0&&(this.checkCoinSilde=!0)),this.curTool&&this.curTool.isDrag&&this.curTool.dragNode&&(this.curTool.type===c.pzaGardenToolType.glove&&this.glovePot?this.dragForGlove():this.dragChoose(this.dragPoint.getPosition()))},a.prototype.lateUpdate=function(){this.isNeedRefreshPlants&&(this.isNeedRefreshPlants=!1,this.showPlants()),this.isNeedRefreshTools&&(this.isNeedRefreshTools=!1,this.showTools())},a.prototype.updateMoney=function(e){this.moneyShowNode.active&&(this.lastShowCoinCount!=g.pzaLocalData.data.coin&&(this.lastShowCoinCount=g.pzaLocalData.data.coin,this.moneyCount.string=D.pzaUtil.getCurrencyStr(this.lastShowCoinCount)),this.hideMoneyNodeTime-=e,this.hideMoneyNodeTime<=0&&(this.moneyShowNode.active=!1))},a.prototype.showGardenGuide=function(){var e=this;this.bt_shop.active=!1,this.bt_home.active=!1,c.default.instance().addGuidePlant(10),this.dave.showGuide([new E.pzaDialog("\u53d1\u73b0\u53e4\u8463\u7ea7\u7ed8\u753b\u5de5\u5177"),new E.pzaDialog("\u606d\u559c\u89e3\u9501\uff1a\u6536\u85cf\u5ba4\uff01"),new E.pzaDialog("\u65b0\u624b\u793c\u5305\uff1a1\u4e2a\u968f\u673a\u624b\u529e\u793c\u76d2",function(){}),new E.pzaDialog("\u517b\u62a4\u63d0\u793a\uff1a\u6bcf\u65e5\u9664\u5c18\u63d0\u5347\u6210\u957f\u5ea6"),new E.pzaDialog("\u5a31\u4e50\u534f\u8bae\u5df2\u6fc0\u6d3b")],function(){var a=e.toolMap.get(c.pzaGardenToolType.waterPot);null!=a&&(e.showTip("\u64cd\u4f5c\u6307\u5357\uff1a\u70b9\u51fb\u6728\u5237\uff0c\u628a\u5b83\u62ff\u8d77\u6765\u3002",0),a.showGuideArrow(function(){a.hideGuideArrow(),e.guideWaterCount=3,e.showTip("\u70b9\u51fb\u4e00\u4e2a\u624b\u529e\u7ed9\u5b83\u5b8c\u6210"+e.guideWaterCount+"\u6b21\u9664\u5c18\u3002",0)},function(){e.guideManureCheck=!0},function(){}))})},a.prototype.skipGuide=function(){c.default.instance().addGuidePlant(10,1),this.dave.node.active=!1,this.bt_home.active=!0,this.bt_shop.active=!0,g.pzaLocalData.data.gardenToolNum[""+c.pzaGardenToolType.sell]||c.default.instance().addGardenTool(c.pzaGardenToolType.sell,1,!1),f.pzaGardenTool.show(c.pzaGardenToolType.sell,this),g.pzaLocalData.gardenGuiding=!1,g.pzaLocalData.data.curGuideType=null,g.pzaLocalData.addDirty("curGuideType"),v.pzaTipManager.hideHomeTip(),this.guideManureCheck=!1,D.pzaUtil.blinkAni(this.bt_home,!0),D.pzaUtil.blinkAni(this.bt_shop,!0);var e=this.toolMap.get(c.pzaGardenToolType.manure);e&&e.hideGuideArrow();var a=this.toolMap.get(c.pzaGardenToolType.waterPot);a&&a.hideGuideArrow()},a.prototype.updatePlant=function(){this.changeEnv(c.pzaGardenEnv.normal)},a.prototype.showWaterOerationGuide=function(){var e=this;if(this.guideWaterCount--,this.guideWaterCount<=0)v.pzaTipManager.hideHomeTip();else{this.showTip("\u70b9\u51fb\u4e00\u4e2a\u624b\u529e\u7ed9\u5b83\u5b8c\u6210"+this.guideWaterCount+"\u6b21\u9664\u5c18\u3002",0);var a=this.toolMap.get(c.pzaGardenToolType.waterPot);a.showGuideArrow(function(){a.hideGuideArrow()},function(){e.guideManureCheck=!0},function(){})}},a.prototype.close=function(){D.pzaUtil.blinkAni(this.bt_home,!0),D.pzaUtil.blinkAni(this.bt_shop,!0),this.curTool&&this.curTool.unChoosed(!0),s.pzaGameCommonPool.returnInstant(this.node)},a.toolInUse=c.pzaGardenToolType.null,i([G({displayName:"\u62d6\u52a8\u70b9",type:cc.Node})],a.prototype,"dragPoint",void 0),i([G({displayName:"\u8717\u725b\u5c42",type:cc.Node})],a.prototype,"layer_snail",void 0),i([G({displayName:"tip\u5c42",type:cc.Node})],a.prototype,"layer_tip",void 0),i([G({displayName:"\u690d\u7269\u5e95\u5c42",type:cc.Node})],a.prototype,"layer_board",void 0),i([G({displayName:"\u91d1\u5e01\u5c42",type:cc.Node})],a.prototype,"layer_coin",void 0),i([G({displayName:"\u5de5\u5177\u62d6\u52a8\u5c42",type:cc.Node})],a.prototype,"layer_tool_drag",void 0),i([G({displayName:"\u5de5\u5177\u5c42",type:cc.Node})],a.prototype,"layer_tool",void 0),i([G({displayName:"pots\u5bb9\u5668",type:cc.Node})],a.prototype,"pots_container",void 0),i([G({displayName:"\u80cc\u666f\u56fe",type:cc.Sprite})],a.prototype,"pic_bg",void 0),i([G({displayName:"\u6e29\u5ba4\u5f71\u5b50",type:cc.Node})],a.prototype,"pots_normal_shadow",void 0),i([G({displayName:"\u591c\u665a\u5f71\u5b50",type:cc.Node})],a.prototype,"pots_night_shadow",void 0),i([G({displayName:"\u6c34\u65cf\u9986\u5f71\u5b50",type:cc.Node})],a.prototype,"pots_water_shadow",void 0),i([G({displayName:"\u5546\u5e97",type:cc.Node})],a.prototype,"bt_shop",void 0),i([G({displayName:"\u4e3b\u83dc\u5355",type:cc.Node})],a.prototype,"bt_home",void 0),i([G({displayName:"\u91d1\u94b1\u6570\u91cf",type:cc.Label})],a.prototype,"moneyCount",void 0),i([G({displayName:"\u91d1\u94b1\u663e\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"moneyShowNode",void 0),i([G({displayName:"\u91d1\u94b1\u98de\u884c\u76ee\u6807",type:cc.Node})],a.prototype,"moneyTarget",void 0),i([G({displayName:"\u6234\u592b",type:S.pzaGardenDave})],a.prototype,"dave",void 0),i([G(cc.Prefab)],a.prototype,"prefab_pot",void 0),i([G(cc.Prefab)],a.prototype,"prefab_snail",void 0),i([G({displayName:"\u8df3\u8fc7\u6559\u7a0b\u6309\u94ae",type:cc.Node})],a.prototype,"skipGuideBtn",void 0),t=i([B],a)}(cc.Component);t.pzaGardenView=I,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaShopView":"pzaShopView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGardenDave":"pzaGardenDave","./pzaGardenDropCoin":"pzaGardenDropCoin","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenPot":"pzaGardenPot","./pzaGardenShadow":"pzaGardenShadow","./pzaGardenSnail":"pzaGardenSnail","./pzaGardenTool":"pzaGardenTool"}],pzaGargantuar:[function(e,a,t){"use strict";cc._RF.push(a,"48badpbNY1B5Ll+3N5c+E3c","pzaGargantuar");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGargantuar=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBaseData"),c=e("../Data/pzaBuffData"),u=e("../Data/pzaZombieEnum"),d=e("../Plant/pzaAttackType"),h=e("../pzaGameState"),m=e("./pzaBaseZombie"),f=e("./pzaZombieState"),z=e("./pzaZombieSlot"),y=cc._decorator,g=y.ccclass,v=(y.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName=null,a.weaponIndex=1,a.throwImping=!1,a.hasImp=!0,a.hasThrowImp=!1,a.attacking=!1,a.skinPre="zombie1_1",a.isRedEyes=!1,a.skinPreMap=new Map([[u.pzaZombieEnum.GARGANTUAR,"zombie1_1"],[u.pzaZombieEnum.RED_GARGANTUAR,"zombie2_1"]]),a.deathPlayingOver=!1,a.deathCallBack=null,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[z.pzaZombieSlotType.butter,new z.pzaZombieSlot(this.animation.spineAnimation,z.pzaZombieSlotType.butter).addState(new z.pzaZombieSlotAtt(1,z.pzaZombieSlotType.butter,52.22,4.58,-94.44))]])},a.prototype.preview=function(a,t,o){this.skinPre=this.skinPreMap.get(a.zombieData.zombieType),this.isRedEyes="zombie2_1"==this.skinPre,e.prototype.preview.call(this,a,t,o)},a.prototype.bindData=function(a){this.skinPre=this.skinPreMap.get(a.zombieData.zombieType),this.isRedEyes="zombie2_1"==this.skinPre,e.prototype.bindData.call(this,a),this.throwImping=!1,this.hasImp=!0,this.attacking=!1,this.hasThrowImp=!1,window.pzazombieManager.wave%10!=0&&h.pzaGameState.redLeft--,a.zombieData.cate=u.pzaZombieCate.Gargantuar,this.bodyWidth=50,this.node.scale=1},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.node.scale=.7},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled()&&(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),!this.throwImping))if(-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(e);else if(!this.attacking){var a=this.findTarget();null==a||a.isDead?this.updateMove(e):this.attack(e,a)}}else this.changeRowMove(e)}},a.prototype.attackJar=function(e){var a=this,t=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.zombieState=f.pzaZombieState.EAT_ATK;var o=this.isRedEyes?"attack2":"attack";this.attacking=!0,this.animation.playAnimation(o,!1,function(){a.attacking=!1},function(){e.bang(),p.pzaSoundManager.playAudio("gargantuar_thump")},null!=t?t.buffValue:1)},a.prototype.attack=function(e,a){var t=this,o=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.zombieState=f.pzaZombieState.EAT_ATK;var n=this.isRedEyes?"attack2":"attack";p.pzaSoundManager.playAudio("lowgroan"),this.attacking=!0,this.animation.playAnimation(n,!1,function(){t.attacking=!1},function(){t.damage(a),p.pzaSoundManager.playAudio("gargantuar_thump")},null!=o?.5*o.buffValue:.5)},a.prototype.damage=function(e){var a=this;if(null!=e&&null!=this.baseData&&null!=this.baseData.zombieData)if(e.isBrain){var t=window.pzaplantManager.brainMap.get(e);t&&t.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG)}else if(this.baseData.zombieData.hypnosis)window.pzazombieManager.zombieMap.forEach(function(t,o){null!=o&&o.xIndex==e.xIndex&&o.yIndex==e.yIndex&&t.hurt(1800,a.baseData,d.pzaAttackType.BANG)});else{var o=""+e.xIndex+e.yIndex,n=window.pzaplantManager.plantDataMap.get(o);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);if(i&&i.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG),i&&i.baseData&&!i.baseData.isDead)return}var r=window.pzaplantManager.pumpkinDataMap.get(o);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG)}var l=window.pzaplantManager.plantEnvDataMap.get(o);if(null!=l){var s=window.pzaplantManager.getPlantByData(l);s&&s.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG)}var c=window.pzaplantManager.notTargetMap.get(o);if(null!=c){var u=window.pzaplantManager.getPlantByData(c);u&&u.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG)}window.pzazombieManager.hypnoZombieMap.forEach(function(t,o){null!=o&&o.xIndex==e.xIndex&&o.yIndex==e.yIndex&&t.hurt(1800,a.baseData,d.pzaAttackType.BANG)})}},a.prototype.hurt=function(a,t,o){if(void 0===o&&(o=d.pzaAttackType.FLOOR_ATK),this.baseData){this.baseData.hp,this.baseData.maxHp,e.prototype.hurt.call(this,a,t,o);var n=this.baseData.hp/this.baseData.maxHp;!this.hasThrowImp&&n<=.5&&this.throwImp()}},a.prototype.throwImp=function(){var e=this;if(!this.isInButterState&&!(this.baseData.xIndex<=4||this.baseData.zombieData.hypnosis)){var a=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.throwImping=!0,this.attacking=!1,this.hasThrowImp=!0;var t=this.animation.getAnimationDuration("attack2")/this.animation.spineAnimation.timeScale+.1,o=!1,n=function(){o||!e.baseData||e.isInButterState||e.baseData.buffData.hasBuff(c.pzaBuffType.FROZEN)||(o=!0,e.baseData.hp<=0||(e.hasImp=!1,e.throwImping=!1,e.playMoveAnimation()))};this.scheduleOnce(n.bind(this),t);var i=this.isRedEyes?"call2":"call";this.animation.playAnimation(i,!1,function(){n()},function(a,t){console.log("call event:",t),e.createImp(),p.pzaSoundManager.playAudio("gargantuar_fly")},null!=a?a.buffValue:1)}},a.prototype.createImp=function(){var e=r.pzaGameConfig.getZombieConfig(u.pzaZombieEnum.IMP),a=new s.pzaBaseData(null,u.pzaZombieEnum.IMP);a.hp=a.maxHp=e.hp,a.atk=e.atk,a.zombieData.equipHp=a.zombieData.maxEquipHp=e.equipHp,a.zombieData.direction=-1,a.zombieData.initMSpd=a.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/e.speed,a.zombieData.equipType=e.equipType,a.zombieData.toolType=e.toolType,a.xIndex=this.baseData.xIndex-4,a.yIndex=this.baseData.yIndex;var t=h.pzaGameState.map.getXInterval(a.xIndex)/2,o=h.pzaGameState.map.getYInterval(a.yIndex)/3;h.pzaGameState.isRoofMode()&&(o=h.pzaGameState.map.getYInterval(a.yIndex)/6);var n=h.pzaGameState.map.getBlockLogicPos(a.xIndex,a.yIndex,t,o);a.logicPos=n,window.pzazombieManager.zombieDatas[a.yIndex].add(a),window.pzazombieManager.createZombie(a,!1,!1,!1,null,!1,!0)},a.prototype.playAttakAnimation=function(){this.zombieState=f.pzaZombieState.EAT_ATK;var e=this.isRedEyes?"attack2":"attack";this.animation.playAnimation(e,!0)},a.prototype.playMoveAnimation=function(){if(this.zombieState=f.pzaZombieState.MOVE,"move"!=this.animation.spineAnimation.animation&&"move2"!=this.animation.spineAnimation.animation){var e=this.isRedEyes?"move2":"move";this.animation.playAnimation(e,!0)}},a.prototype.playDeathAnimation=function(e){var a=this;this.zombieState=f.pzaZombieState.DEAD,this.zombieHurtState=u.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.deathCallBack=e;var t=!1,o=function(){t||(t=!0,a.deathCallBack())},n=this.isRedEyes?"death2":"death";this.scheduleOnce(o.bind(this),this.animation.getAnimationDuration(n)/this.animation.spineAnimation.timeScale+.1),this.animation.playAnimation(n,!1,null,function(e,a){"sy"==a.data.name&&(p.pzaSoundManager.playAudio("gargantuar_thump"),o())},.5),this.refreshFrostState(!1),this.zombieFallSound()},a.prototype.zombieDying=function(){e.prototype.zombieDying.call(this),"zombie1_1"==this.curSkinName?this.changeSkin("zombie1_2"):"zombie2_1"==this.curSkinName&&this.changeSkin("zombie2_2")},a.prototype.zombieIntact=function(){e.prototype.zombieIntact.call(this),this.changeSkin(this.skinPre)},a.prototype.zombieScream=function(){p.pzaSoundManager.playAudio("GargantuarEnter")},a.prototype.death=function(a){a&&p.pzaSoundManager.playAudio("gargantudeath"),e.prototype.death.call(this,a)},a.prototype.zombieHurtSound=function(a){if(this.hasEquip){var t="shieldhit"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(t)}else e.prototype.zombieHurtSound.call(this,a)},a.prototype.changeMapRow=function(){e.prototype.changeMapRow.call(this),this.attacking=!1},a.prototype.onWaterEnter=function(){this.waterMask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave()},a.prototype.onWaterExit=function(){this.waterMask.enabled=!1,this.curWaterWaveEff&&this.curWaterWaveEff.hideWaterWave()},a.prototype.ashesDeath=function(a,t){e.prototype.ashesDeath.call(this,a,t,this.isRedEyes?"blow2":"blow")},a.prototype.close=function(){this.curWaterWaveEff&&this.curWaterWaveEff.close(),e.prototype.close.call(this)},a.prototype.getDeathAniName=function(){return l.pzaUtil.getRandomValueFromArray(this.deathAniName)},i([g],a)}(m.pzaBaseZombie));t.pzaGargantuar=v,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaGarlic:[function(e,a,t){"use strict";cc._RF.push(a,"794ccTUQuVEDYoMQO0xXY3e","pzaGarlic");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGarlic=void 0;var r=e("../../Common/pzaSpineController"),p=e("../Data/pzaZombieEnum"),l=e("../pzaGameState"),s=e("./pzaAttackType"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.attackEffect=null,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a);var o=function(){t.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyBoomPlant=!1,l.pzaGameState.onlyShroomCofee=!1,this.attackEffect.node.active=!1},a.prototype.playAttack=function(){var e=this;this.animation.playAnimation("attack",!1,function(){}),this.attackEffect.node.active=!0,this.attackEffect.playAnimation("idle",!1,function(){e.animation.playAnimation("idle",!0),e.attackEffect.node.active=!1})},a.prototype.hurt=function(a,t,o){if(void 0===o&&(o=null),null!=this.baseData&&!this.baseData.isDead)if(this.playAttack(),o!=s.pzaAttackType.ROLLING&&o!=s.pzaAttackType.BOOM&&o!=s.pzaAttackType.BANG){if(null!=t&&null!=t.zombieData&&null==o)switch(t.zombieData.zombieType){case p.pzaZombieEnum.FOOTBALL_ZOMBIE:case p.pzaZombieEnum.DANCING_ZOMBIE:case p.pzaZombieEnum.BACKUP_DANCER:a=18;break;case p.pzaZombieEnum.YETI_ZOMBIE:a=24;break;case p.pzaZombieEnum.DIGGER_ZOMBIE:a=28;break;case p.pzaZombieEnum.NEWSPAPER_ZOMBIE:case p.pzaZombieEnum.LADDER_ZOMBIE:a=32;break;case p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM:a=40;break;case p.pzaZombieEnum.JACK_ZOMBIE:a=44;break;case p.pzaZombieEnum.IMP:a=48;break;case p.pzaZombieEnum.POLEVAULTING_ZOMBIE:a=56;break;case p.pzaZombieEnum.SNORKEL_ZOMBIE:a=72;break;default:a=20}this.baseData.hurtPlanet(a),this.refreshHurtState(!1),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(t))}else e.prototype.hurt.call(this,a,t,o)},i([h(r.pzaSpineController)],a.prototype,"attackEffect",void 0),i([d],a)}(c.pzaBasePlant);t.pzaGarlic=m,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGatlingPea:[function(e,a,t){"use strict";cc._RF.push(a,"85b04FObQJJvL2iCWdgGt2g","pzaGatlingPea");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGatlingPea=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.ignoreDive=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playNormalAni(),c.pzaGameState.usePeaPlant=!0,c.pzaGameState.onlyBoomPlant=!1,c.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){window.pzazombieManager.hasCanAttackZombie(e.baseData)?e.animation.playAnimation("attack",!1,a,function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.animation.playAnimation("idle",!1,a)};a()},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null!=this.baseData&&!this.baseData.isDead&&this.baseData.plantData},a.prototype.getBulletAtk=function(){return this.baseData.atk},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.getBulletAtk(),1),n.ignoreDive=this.ignoreDive;var i=c.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*c.pzaGameState.map.getBlockWidth())}}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([h],a)}(u.pzaBasePlant);t.pzaGatlingPea=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGatlingShooterZombie:[function(e,a,t){"use strict";cc._RF.push(a,"65b5fNz3XZEP6oUiVUDqnrp","pzaGatlingShooterZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGatlingShooterZombie=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaZombieBaseBullet"),c=e("../Data/pzaZombieEnum"),u=e("../Plant/pzaAttackType"),d=e("../pzaGameState"),h=e("../pzaSpineTool"),m=e("./pzaNormalZombie"),f=e("./pzaZombieSlot"),z=e("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName="",a.bulletPrefab=null,a.shootNode=null,a.equip1Slot=f.pzaZombieSlotType.hat,a.equip2Slot=f.pzaZombieSlotType.door,a.equipSlotMap=new Map([]),a.directThrowHurt=!1,a}return n(a,e),a.prototype.bindData=function(a,t){this.baseData=a,this.initEquips(),e.prototype.bindData.call(this,a,t),this.baseData.zombieData.hurtCate=c.pzaZombieHurtCate.Null,this.directThrowHurt=!1,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var o=this.animation.findBone("aduck");this.hasUseSrAni?o&&(o.scaleX=.158,o.scaleY=.158):o&&(o.scaleX=0,o.scaleY=0)},a.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){this.slotMap=new Map([]),h.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,f.pzaZombieSlotType.hat,null,0,0),h.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,f.pzaZombieSlotType.door,null,0,0);var e=this.equipSlotMap.get(this.baseData.zombieData.zombieType);e&&(this.slotMap.set(e.slotName,new f.pzaZombieSlot(this.animation.spineAnimation,e.slotName).addState(new f.pzaZombieSlotAtt(1,e.attNameArr[0],e.arr1[0],e.arr1[1],e.arr1[2])).addState(new f.pzaZombieSlotAtt(2,e.attNameArr[1],e.arr2[0],e.arr2[1],e.arr2[2])).addState(new f.pzaZombieSlotAtt(3,e.attNameArr[2],e.arr3[0],e.arr3[1],e.arr3[2]))),this.updateEquipState(e.slotName,0))}},a.prototype.playMoveAnimation=function(){var e=this;this.zombieState=z.pzaZombieState.MOVE,this.animation.playAnimation(this.getMoveAniName(),!0,null,function(a,t){"attack"==t.data.name&&e.shoot()},1)},a.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(e){l.pzaSoundManager.playAudio("PeashooterAtk");var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);o.y-=15,a.setPosition(o);var n=a.getComponent(s.pzaZombieBaseBullet);n.init(this.baseData.yIndex,20);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}},a.prototype.updateMove=function(a){var t=this.baseData.xIndex;e.prototype.updateMove.call(this,a);var o=this.baseData.xIndex;t<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&t>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),l.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},a.prototype.zombieHurtSound=function(a){this.hasEquip&&a!=u.pzaAttackType.PENETRATE?l.pzaSoundManager.playAudio("screenHurt"):e.prototype.zombieHurtSound.call(this,a)},a.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT},a.prototype.equipDying=function(){this.equipHurtState=c.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip1Slot,3)},a.prototype.equipHurt=function(){this.equipHurtState=c.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip1Slot,2)},a.prototype.equipIntact=function(){this.equipHurtState=c.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip1Slot,1)},a.prototype.equipDeath=function(){this.equipHurtState=c.pzaHurtStateEnum.DEAD,this.hasEquip=!1,this.updateEquipState(this.equip1Slot,0)},i([v(cc.Prefab)],a.prototype,"bulletPrefab",void 0),i([v({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([g],a)}(m.pzaNormalZombie);t.pzaGatlingShooterZombie=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaGdyxIcon:[function(e,a,t){"use strict";cc._RF.push(a,"0ec51qLWwRBsKE3t3v0v3k9","pzaGdyxIcon");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaChannel"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ball=null,a.txt=null,a.pic=null,a.appId=null,a.adList=null,a.curId=0,a}return n(a,e),a.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){r.pzaChannel.instance().jumpTo(e.appId),e.ball.active=!1})},a.prototype.show=function(e,a){var t=this;this.node.active=!0,this.node.parent=e,this.node.setPosition(a),hzzxsdk.getRecommedAdList(!1,0,0).then(function(e){console.log("\u63a8\u8350\u5217\u8868\u5e7f\u544a\uff1a",e),!e||e.length<=0||(t.adList=e,t.showOneIcon(),t.schedule(t.showOneIcon,3,cc.macro.REPEAT_FOREVER))})},a.prototype.showOneIcon=function(){var e=this,a=this.adList[this.curId];if(a||(this.curId=0,a=this.adList[this.curId])){this.shake(),this.appId=a.appid;var t=a.image;if(t){var o=".png";-1!=t.indexOf(".jpg")&&(o=".jpg"),cc.assetManager.loadRemote(t,{ext:o},function(t,o){if(t)console.log("err==",t);else{var n=new cc.SpriteFrame(o);e.pic.spriteFrame=n,e.txt.string=a.title||""}}),this.curId++,this.curId>=this.adList.length&&(this.curId=0)}}},a.prototype.shake=function(){cc.tween(this.node).repeat(5,cc.tween().to(.05,{angle:10}).to(.05,{angle:0}).to(.05,{angle:-10}).to(.05,{angle:0})).start()},i([s(cc.Node)],a.prototype,"ball",void 0),i([s(cc.Label)],a.prototype,"txt",void 0),i([s(cc.Sprite)],a.prototype,"pic",void 0),i([l],a)}(cc.Component);t.default=c,cc._RF.pop()},{"./pzaChannel":"pzaChannel"}],pzaGdyxItem:[function(e,a,t){"use strict";cc._RF.push(a,"fc0a6pFUMNChYfi/kNAhTFt","pzaGdyxItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaChannel"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.gdyx_img=null,a.appId=null,a.page=null,a}return n(a,e),a.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.on_tiaozhuan,this)},a.prototype.on_tiaozhuan=function(){r.pzaChannel.instance().jumpTo(this.appId)},a.prototype.init=function(e,a,t,o,n){var i=this;this.appId=o,this.page=n;var r=".png";-1!=e.indexOf(".jpg")&&(r=".jpg"),cc.assetManager.loadRemote(e,{ext:r},function(e,a){if(e)console.log("err==",e);else{var t=new cc.SpriteFrame(a);i.gdyx_img.getComponent(cc.Sprite).spriteFrame=t}})},i([s(cc.Node)],a.prototype,"gdyx_img",void 0),i([l],a)}(cc.Component);t.default=c,cc._RF.pop()},{"./pzaChannel":"pzaChannel"}],pzaGeneSnowPea:[function(e,a,t){"use strict";cc._RF.push(a,"1e2e4RuXCpBTYT6XZ3VdwUt","pzaGeneSnowPea");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGeneSnowPea=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaNodeManager"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaUtil"),d=e("../Bullet/pzaBaseBullet"),h=e("../Data/pzaBuffData"),m=e("../Data/pzaPlantEnum"),f=e("../Data/pzaZombieEnum"),z=e("../pzaEffectManager"),y=e("../pzaGameState"),g=e("./pzaAttackType"),v=e("./pzaBasePlant"),b=cc._decorator,P=b.ccclass,C=b.property,E=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode_right=null,a.shootNode_left=null,a.bulletPrefab=null,a.shooterRight=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.cate=m.pzaPlantCate.Nut,this.shooterRight=!0,this.animation.playAnimation(this.shooterRight?"idle":"idle2",!1,this.aniLogic.bind(this)),y.pzaGameState.onlyShroomCofee=!1,y.pzaGameState.onlyBoomPlant=!1},a.prototype.aniLogic=function(){var e=this,a=this.getCanAttackZombies(this.baseData,0,.5);a?(Math.abs(a.xIndex-this.baseData.xIndex),this.isChangeState(this.baseData.xIndex<=a.xIndex,function(){e.animation.playAnimation(e.shooterRight?"attack":"attack2",!1,e.aniLogic.bind(e),function(){e.shoot()})})):this.isChangeState(!0,function(){e.animation.playAnimation(e.shooterRight?"idle":"idle2",!1,e.aniLogic.bind(e))})},a.prototype.isChangeState=function(e,a){if(this.shooterRight==e)return this.shooterRight=e,void a();this.shooterRight=e,this.animation.playAnimation(e?"fx2":"fx1",!1,a.bind(this))},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=s.pzaNodeManager.getBulletNode();if(null!=e){var a=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=(this.shooterRight?this.shootNode_right:this.shootNode_left).convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(d.pzaBaseBullet);if(null!=n){n.setPeaBallType(),n.init(this.baseData.yIndex,this.baseData.atk,0,null,this.shooterRight?cc.v2(1,0):cc.v2(-1,0));var i=y.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*y.pzaGameState.map.getBlockWidth())}}}}},a.prototype.attack=function(e){if(null!=this.baseData&&!this.baseData.isDead){var a=window.pzazombieManager.getZombie(e);null==a||null==a.baseData||a.baseData.isDead||a.hurt(this.baseData.atk,this.baseData,g.pzaAttackType.PENETRATE)}},a.prototype.getCanAttackZombies=function(e){var a=this;if(null==e||null==e.logicPos)return null;var t=null,o=1/0;return window.pzazombieManager.zombieDatas[e.yIndex].forEach(function(e){if(e&&e.logicPos&&!(e.buffData.hasBuff(h.pzaBuffType.DIVE)||e.buffData.hasBuff(h.pzaBuffType.FLY)||e.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)||e.buffData.hasBuff(h.pzaBuffType.INVINCIBLE))){var n=Math.abs(a.baseData.logicPos.x-e.logicPos.x);!(e.xIndex<=-1)&&o>n&&(o=n,t=e)}}),t},a.prototype.death=function(a,t,o,n,i){var l=this;c.pzaSoundManager.playAudio("IceShroomBoom"),z.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos);var s=this.getCanSpeAttackZombies(this.baseData,-3,3);null==s&&(s=[]);var u=0;s.forEach(function(e){e&&null!=e.baseData&&(e.baseData.buffData.hasBuff(h.pzaBuffType.INVINCIBLE)||e.baseData.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)||(e.hurt(l.baseData.atk,l.baseData),e.baseData.buffData.hasBuff(h.pzaBuffType.IMM_ICE)||(e.baseData.buffData.addBuff(new h.pzaBuffInfo(h.pzaBuffType.FROST,15,.5)),e.baseData.buffData.hasBuff(h.pzaBuffType.IMM_CONTROL)||(e.bePauseControl(),e.baseData.buffData.addBuff(new h.pzaBuffInfo(h.pzaBuffType.FROZEN,4)),null!=e.baseData.zombieData&&e.baseData.zombieData.zombieType!=f.pzaZombieEnum.DR_ZOMBOSS&&z.pzaEffectManager.createFrozenEffect(e.baseData),l.playFrozenSound(),u++))))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,u),e.prototype.death.call(this,a,t,o,n,i)},a.prototype.getCanSpeAttackZombies=function(e,a,t){if(null==e||null==e.logicPos)return null;var o=[],n=window.pzazombieManager.zombieDatas[e.yIndex+1],i=window.pzazombieManager.zombieDatas[e.yIndex-1];return window.pzazombieManager.zombieDatas[e.yIndex].forEach(function(n){n&&n.logicPos&&(n.buffData.hasBuff(h.pzaBuffType.DIVE)||n.buffData.hasBuff(h.pzaBuffType.FLY)||n.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(h.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(window.pzazombieManager.getZombie(n)))}),n&&n.forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||n.buffData.hasBuff(h.pzaBuffType.DIVE)||n.buffData.hasBuff(h.pzaBuffType.FLY)||n.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(h.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(window.pzazombieManager.getZombie(n))}),i&&i.forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||n.buffData.hasBuff(h.pzaBuffType.DIVE)||n.buffData.hasBuff(h.pzaBuffType.FLY)||n.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(h.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(window.pzazombieManager.getZombie(n))}),o},a.prototype.playFrozenSound=function(){var e="frozen_"+u.pzaUtil.getRandomNum(1,2);c.pzaSoundManager.playAudio(e)},i([C({type:cc.Node})],a.prototype,"shootNode_right",void 0),i([C({type:cc.Node})],a.prototype,"shootNode_left",void 0),i([C({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([P],a)}(v.pzaBasePlant);t.pzaGeneSnowPea=E,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGetAchieveItem:[function(e,a,t){"use strict";cc._RF.push(a,"0939c3i1qtHLZhK9czUVkIx","pzaGetAchieveItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGetAchieveItem=void 0;var r=e("../../Achieve/pzaAchieveMgr"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaSpriteFrameManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.achieveIcon=null,a.achieveName=null,a.achieveDesc=null,a}return n(a,e),a.prototype.bindData=function(e){l.pzaSpriteFrameManager.loadAchieveIcon(e,this.achieveIcon);var a=r.default.instance().getAchieve(e);null!=a&&(this.achieveName.string=a.name+" \u6210\u5c31\u8fbe\u6210\uff01",this.achieveDesc.string=a.desc)},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6210\u5c31\u56fe\u6807",type:cc.Sprite})],a.prototype,"achieveIcon",void 0),i([u({displayName:"\u6210\u5c31\u540d\u79f0",type:cc.Label})],a.prototype,"achieveName",void 0),i([u({displayName:"\u6210\u5c31\u63cf\u8ff0",type:cc.Label})],a.prototype,"achieveDesc",void 0),i([c],a)}(cc.Component);t.pzaGetAchieveItem=d,cc._RF.pop()},{"../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaGetAchieveView:[function(e,a,t){"use strict";cc._RF.push(a,"396c6mShGVOU7QCy1jO/9Ig","pzaGetAchieveView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGetAchieveView=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaOperationMgr"),l=e("../../utils/pzaChannel"),s=e("./pzaGetAchieveItem"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.itemPrefab=null,a.content=null,a.shareBtn=null,a.nextBtn=null,a.rewardBubble=null,a.items=null,a.closeCall=null,a}return n(a,e),a.prototype.onDisable=function(){null!=this.items&&(this.items.forEach(function(e){e&&e.close()}),this.items=null)},a.prototype.init=function(e,a){var t=this;this.closeCall=a,this.items=[],e.forEach(function(e){var a=r.pzaGameCommonPool.requestInstant(t.itemPrefab);a.setParent(t.content);var o=a.getComponent(s.pzaGetAchieveItem);o&&o.bindData(e),t.items.push(o)}),this.rewardBubble=null,p.pzaOperationMgr.showShareBubble(this.shareBtn,function(e){t.rewardBubble=e,e||(t.nextBtn.x=0,t.shareBtn.active=!1)})},a.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},a.prototype.clickShare=function(){var e=this;l.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null})},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u6210\u5c31item\u9884\u8bbe",type:cc.Prefab})],a.prototype,"itemPrefab",void 0),i([d({displayName:"\u6210\u5c31\u5bb9\u5668",type:cc.Node})],a.prototype,"content",void 0),i([d({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],a.prototype,"shareBtn",void 0),i([d({displayName:"\u7ee7\u7eed\u6309\u94ae",type:cc.Node})],a.prototype,"nextBtn",void 0),i([u],a)}(cc.Component);t.pzaGetAchieveView=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaOperationMgr":"pzaOperationMgr","../../utils/pzaChannel":"pzaChannel","./pzaGetAchieveItem":"pzaGetAchieveItem"}],pzaGiftConfig:[function(e,a,t){"use strict";cc._RF.push(a,"d0b16eCFjVIwKHgKYl+HdWZ","pzaGiftConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGiftConfig=t.pzaPlantGiftDesc=t.pzaPlantGiftType=t.pzaGiftID=t.pzaGiftType=void 0;var o,n,i,r=e("../Battle/Data/pzaPlantEnum"),p=e("./pzaGamePropConfig"),l=e("./pzaLocalData"),s=e("./pzaUtil");(function(e){e[e.Res=0]="Res",e[e.Plant=1]="Plant"})(o=t.pzaGiftType||(t.pzaGiftType={})),function(e){e[e.Begin=0]="Begin",e[e.Dave=1]="Dave",e[e.PlayTicket=2]="PlayTicket",e[e.Garden=3]="Garden",e[e.Festival=10]="Festival",e[e.SJHH=11]="SJHH",e[e.Random=12]="Random",e[e.Res=13]="Res"}(n=t.pzaGiftID||(t.pzaGiftID={})),function(e){e[e.GATLING_PEA=0]="GATLING_PEA",e[e.GLOOM_SHROOM=1]="GLOOM_SHROOM",e[e.CATTAIL=2]="CATTAIL",e[e.SPIKEROCK=3]="SPIKEROCK",e[e.COB_CANNON=4]="COB_CANNON",e[e.WINTER_MELON=5]="WINTER_MELON"}(t.pzaPlantGiftType||(t.pzaPlantGiftType={})),function(e){e.GATLING_PEA="\u6781\u901f\u53cc\u622a\u68cd4\u8fde\u53d1\uff0c\u53cc\u622a\u68cd\u4e2d\u7684\u5927\u54e5\u5927\uff01",e.GLOOM_SHROOM="\u8303\u56f4\u6740\u4f24\uff0c\u5bf9\u4ed8\u50f5\u5c38\u7fa4\u7684\u5927\u6740\u5668\uff01",e.CATTAIL="\u8de8\u7ebf\u8ffd\u8e2a\u653b\u51fb\uff0c\u50f5\u5c38\u65e0\u6240\u9041\u5f62\uff01",e.SPIKEROCK="\u6301\u7eed\u6740\u4f24\uff0c\u4e0e\u51cf\u901f\u690d\u7269\u5b8c\u7f8e\u642d\u914d\uff01",e.COB_CANNON="\u53d1\u5c04\u81f4\u547d\u7684\u841d\u535c\u70ae\u5f39\uff0c\u79d2\u6740\u50f5\u5c38\uff01",e.WINTER_MELON="\u8303\u56f4\u6740\u4f24\u52a0\u51cf\u901f\uff0c\u4eba\u6c14\u6700\u9ad8\u7684\u690d\u7269\uff01"}(i=t.pzaPlantGiftDesc||(t.pzaPlantGiftDesc={}));var c=function(){function e(e,a,t,o,n,i,r){this.reward=[{type:0,itemId:0,value:0}],this.ID=e,this.getCount=a,this.name=t,this.reward=o,this.GiftType=i,this.plant=r,this.needVideo=n}return e.initPropConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a)if(a.GiftType==o.Res){var n=[];a.reward.split(",").forEach(function(e){var a=e.split("-"),t={itemId:0,value:0};t.itemId=parseInt(a[0]),t.value=parseInt(a[1]),n.push(t)});var i=new e(a.id,a.getCount,a.name,n,a.needVideo,a.GiftType,a.plant);t.ResGiftConfigMap.set(a.id,i)}else a.GiftType==o.Plant&&(i=new e(a.id,a.getCount,a.name,{},a.needVideo,a.GiftType,a.plant),t.PlantGiftConfigMap.set(a.plant,i))})},e.getPlantGiftDesc=function(e){switch(e){case r.pzaPlantEnum.GATLING_PEA:return i.GATLING_PEA;case r.pzaPlantEnum.GLOOM_SHROOM:return i.GLOOM_SHROOM;case r.pzaPlantEnum.CATTAIL:return i.CATTAIL;case r.pzaPlantEnum.SPIKEROCK:return i.SPIKEROCK;case r.pzaPlantEnum.COB_CANNON:return i.COB_CANNON;case r.pzaPlantEnum.WINTER_MELON:return i.WINTER_MELON}return null},e.getPlantGiftData=function(a){return e.PlantGiftConfigMap.get(a)},e.isAbleGetPlantGift=function(e){var a=l.pzaLocalData.data.curChapter,t=l.pzaLocalData.data.curPart;switch(e){case r.pzaPlantEnum.GATLING_PEA:if(10*a+t>=26)return!0;break;case r.pzaPlantEnum.GLOOM_SHROOM:if(10*a+t>=28)return!0;break;case r.pzaPlantEnum.CATTAIL:if(10*a+t>=31)return!0;break;case r.pzaPlantEnum.SPIKEROCK:if(10*a+t>=49)return!0;break;case r.pzaPlantEnum.COB_CANNON:if(10*a+t>=54)return!0;break;case r.pzaPlantEnum.WINTER_MELON:if(10*a+t>=59)return!0}return!1},e.isUnlockGift=function(e){return e==n.Begin?1*l.pzaLocalData.data.curChapter+l.pzaLocalData.data.curPart>=2:e==n.Dave||e==n.Res?l.pzaLocalData.data.hasBeginGift:e==n.PlayTicket||e==n.Garden&&10*l.pzaLocalData.data.curChapter+l.pzaLocalData.data.curPart>=25},e.setGiftCount=function(e){e==n.Begin?(l.pzaLocalData.data.hasBeginGift=!0,l.pzaLocalData.addDirty("hasBeginGift")):e==n.Dave?(l.pzaLocalData.data.getDaveGiftCount++,l.pzaLocalData.addDirty("getDaveGiftCount",l.pzaLocalData.data.getDaveGiftCount.toString()),l.pzaLocalData.data.hasDaveGift=!0,l.pzaLocalData.addDirty("hasDaveGift")):e==n.Res?(l.pzaLocalData.data.getRseGiftCount++,l.pzaLocalData.addDirty("getRseGiftCount",l.pzaLocalData.data.getRseGiftCount.toString())):e==n.Garden&&(l.pzaLocalData.data.getGardenGiftCount++,l.pzaLocalData.addDirty("getGardenGiftCount",l.pzaLocalData.data.getGardenGiftCount.toString()),l.pzaLocalData.data.hasGardenGift=!0,l.pzaLocalData.addDirty("hasGardenGift"))},e.getGiftPropData=function(a){var t=e.ResGiftConfigMap.get(a),o=[];return t.reward.forEach(function(e){o.push(new p.pzaRewardPropData(e.itemId,e.value))}),o},e.getGiftData=function(a){var t=e.ResGiftConfigMap.get(a);if(a==n.Random){var o=s.pzaUtil.getRandomValueFromArray([p.pzaGamePropEnum.PROP_CHERRY_BOMB,p.pzaGamePropEnum.PROP_FREE_SUN,p.pzaGamePropEnum.PROP_AUTO_PICK]);t.reward=[],t.reward.push({type:0,itemId:p.pzaGamePropEnum.PROP_COIN,value:500}),t.reward.push({type:0,itemId:o,value:1})}return new e(t.ID,t.getCount,t.name,t.reward,t.needVideo,t.GiftType,t.plant)},e.ResGiftConfigMap=new Map,e.PlantGiftConfigMap=new Map,e}();t.pzaGiftConfig=c,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGiftRwdItem:[function(e,a,t){"use strict";cc._RF.push(a,"4e9adXCXq9JOoAgA0DpsOZf","pzaGiftRwdItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGiftRwdItem=void 0;var r=e("../Common/pzaGameConfig"),p=e("../Common/pzaGamePropConfig"),l=e("../Common/pzaSpriteFrameManager"),s=e("../Common/pzaUtil"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.desc=null,a.count=null,a.icon=null,a.frameSpine=null,a}return n(a,e),a.prototype.setView=function(e,a,t){switch(void 0===t&&(t=0),this.count.string="",e){case p.pzaItemType.PROP:this.frameSpine.setAnimation(0,"idle",!0),this.frameSpine.timeScale=s.pzaUtil.getRandomFloatNum(.5,.7),this.setPropData(a,t);break;case p.pzaItemType.PLANT:this.frameSpine.setAnimation(0,"idle",!0),this.frameSpine.timeScale=.8,this.setPlantData(a)}},a.prototype.setPlantData=function(e){var a=r.pzaGameConfig.getPlantConfig(e);l.pzaSpriteFrameManager.loadPlantCard(e,this.icon),this.desc.string=a.name},a.prototype.setPropData=function(e,a){void 0===a&&(a=0);var t=p.pzaGamePropConfig.PorpConfigMap.get(e);l.pzaSpriteFrameManager.loadPropIcon(e,this.icon),this.desc.string=t.propName,this.count.string="+"+a},i([d({type:cc.Label})],a.prototype,"desc",void 0),i([d({type:cc.Label})],a.prototype,"count",void 0),i([d({type:cc.Sprite})],a.prototype,"icon",void 0),i([d(sp.Skeleton)],a.prototype,"frameSpine",void 0),i([u],a)}(cc.Component);t.pzaGiftRwdItem=h,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaUtil":"pzaUtil"}],pzaGiftViewItem:[function(e,a,t){"use strict";cc._RF.push(a,"6bffc/i8L9AX4nHthzXVvac","pzaGiftViewItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGiftViewItem=void 0;var p=e("../Common/pzaGamePropConfig"),l=e("../Common/pzaItemTips"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=[],a}return n(a,e),a.prototype.bindData=function(e){var a,t,o=0;try{for(var n=r(e.reward),i=n.next();!i.done;i=n.next()){var s=i.value,c=p.pzaGamePropConfig.PorpConfigMap.get(s.itemId);this.label[o].string=c.propName+"\xd7"+s.value,this.label[o].node.parent.addComponent(l.default).bindData(s.itemId,s.value),o++}}catch(u){a={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}},i([u({type:[cc.Label]})],a.prototype,"label",void 0),i([c],a)}(cc.Component);t.pzaGiftViewItem=d,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips"}],pzaGiftView:[function(e,a,t){"use strict";cc._RF.push(a,"bc5dc2EWZNPwLCCVXzeqoqV","pzaGiftView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGiftView=void 0;var r=e("../Battle/Data/pzaPlantEnum"),p=e("../Common/pzaCommonPopView"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGamePropConfig"),c=e("../Common/pzaGiftConfig"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaRewardManager"),h=e("../Common/pzaSoundManager"),m=e("../Common/pzaStatisticsMgr"),f=e("../utils/pzaChannel"),z=e("./pzaGiftViewItem"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.BeginGiftItem=null,a.DaveGiftItem=null,a.PlayPucketGiftItem=null,a.GardenGiftItem=null,a.resGiftItem=null,a.PlantGiftPre=null,a.ResContent=null,a.PlantContent=null,a.ResOnShowBtn=null,a.ResOnHideBtn=null,a.PlantOnShowBtn=null,a.PlantOnHideBtn=null,a.scroll=null,a.plantImg=[],a}return n(a,e),a.prototype.onLoad=function(){m.pzaStatisticsMgr.sendEvent("System",{name:"system",value:10})},a.prototype.refreshView=function(){if(this.ResOnShowBtn.active=this.ResContent.active,this.ResOnHideBtn.active=!this.ResContent.active,this.PlantOnShowBtn.active=this.PlantContent.active,this.PlantOnHideBtn.active=!this.PlantContent.active,this.PlantOnShowBtn.opacity="wx"==f.pzaChannel.instance().channel?0:255,this.PlantOnHideBtn.opacity="wx"==f.pzaChannel.instance().channel?0:255,this.PlantOnHideBtn.getComponent(cc.Button).enabled="wx"!=f.pzaChannel.instance().channel,this.ResContent.active){u.pzaLocalData.data.hasBeginGift?(this.DaveGiftItem.active=u.pzaLocalData.data.hasBeginGift,this.resGiftItem.active=u.pzaLocalData.data.hasBeginGift,this.BeginGiftItem.active=!1):this.BeginGiftItem.active=c.pzaGiftConfig.isUnlockGift(c.pzaGiftID.Begin);var e=c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Dave),a=(c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.PlayTicket),c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Garden)),t=c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Res);this.refreshResItem(this.DaveGiftItem,u.pzaLocalData.data.getDaveGiftCount,e.getCount,c.pzaGiftConfig.isUnlockGift(e.ID)),this.refreshResItem(this.GardenGiftItem,u.pzaLocalData.data.getGardenGiftCount,a.getCount,c.pzaGiftConfig.isUnlockGift(a.ID)),this.refreshResItem(this.resGiftItem,u.pzaLocalData.data.getRseGiftCount,t.getCount,c.pzaGiftConfig.isUnlockGift(t.ID)),this.BeginGiftItem.getComponent(z.pzaGiftViewItem).bindData(c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Begin)),this.DaveGiftItem.getComponent(z.pzaGiftViewItem).bindData(c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Dave)),this.GardenGiftItem.getComponent(z.pzaGiftViewItem).bindData(c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Garden)),this.resGiftItem.getComponent(z.pzaGiftViewItem).bindData(c.pzaGiftConfig.ResGiftConfigMap.get(c.pzaGiftID.Res))}if(this.PlantContent.active)if(this.PlantContent.childrenCount<=0)for(var o=0;o<this.plantImg.length;o++){var n=this.plantImg[o],i=l.pzaGameCommonPool.requestInstant(this.PlantGiftPre);i.parent=this.PlantContent,this.refreshPlantItem(i,o,null)}else for(o=0;o<this.PlantContent.children.length;o++)n=this.PlantContent.children[o],this.setBtnVideoNum(n,o)},a.prototype.setBtnVideoNum=function(e,a){var t,o;switch(a){case c.pzaPlantGiftType.GATLING_PEA:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA),o=u.pzaLocalData.data.gatlingAdCount;break;case c.pzaPlantGiftType.GLOOM_SHROOM:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM),o=u.pzaLocalData.data.gloomShroomAdCount;break;case c.pzaPlantGiftType.CATTAIL:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL),o=u.pzaLocalData.data.cattailAdCount;break;case c.pzaPlantGiftType.SPIKEROCK:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK),o=u.pzaLocalData.data.spikerockAdCount;break;case c.pzaPlantGiftType.COB_CANNON:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON),o=u.pzaLocalData.data.cobCannonAdCount;break;case c.pzaPlantGiftType.WINTER_MELON:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON),o=u.pzaLocalData.data.winterMelonAdCount}var n=e.getChildByName("btn_5");n.active=!0;var i=e.getChildByName("buy_text").getComponent(cc.Label);i.string="\u9700\u8981\u89c2\u770b("+o+"/"+t.needVideo+")\u5e7f\u544a",o>=t.needVideo&&(n.active=!1,i.string="\u5df2\u89e3\u9501")},a.prototype.refreshPlantItem=function(e,a){var t,o=e.getChildByName("name").getComponent(cc.Label),n=e.getChildByName("btn_5").getComponent(cc.Button),i=new cc.Component.EventHandler;switch(i.target=this.node,i.component="pzaGiftView",i.handler="clickPlantVideoBtn",a){case c.pzaPlantGiftType.GATLING_PEA:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA),i.customEventData=r.pzaPlantEnum.GATLING_PEA.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[0];break;case c.pzaPlantGiftType.GLOOM_SHROOM:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM),i.customEventData=r.pzaPlantEnum.GLOOM_SHROOM.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[1];break;case c.pzaPlantGiftType.CATTAIL:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL),i.customEventData=r.pzaPlantEnum.CATTAIL.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[2];break;case c.pzaPlantGiftType.SPIKEROCK:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK),i.customEventData=r.pzaPlantEnum.SPIKEROCK.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[3];break;case c.pzaPlantGiftType.COB_CANNON:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON),i.customEventData=r.pzaPlantEnum.COB_CANNON.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[4];break;case c.pzaPlantGiftType.WINTER_MELON:t=c.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON),i.customEventData=r.pzaPlantEnum.WINTER_MELON.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[5]}o.string=t.name,n.clickEvents.push(i),this.setBtnVideoNum(e,a);var p=u.pzaLocalData.data.ownPlants.includes(t.plant);c.pzaGiftConfig.isAbleGetPlantGift(t.plant)&&!p||(e.active=!1)},a.prototype.refreshResItem=function(e,a,t,o){e.active=o;var n=e.getChildByName("lb").getChildByName("buy_text").getComponent(cc.Label),i=e.getChildByName("btn_5").getComponent(cc.Button),r=Math.abs(a-t);n.string="\u53ef\u8d2d\u4e70"+r+"/"+t,i.node.active=a<t,e.getChildByName("buy_over").active=a>=t},a.prototype.clickVideoBtn=function(e,a){var t=this,o=c.pzaGiftConfig.ResGiftConfigMap.get(parseInt(a)),n=[];o.reward.forEach(function(e){n.push(new s.pzaRewardPropData(e.itemId,e.value))}),h.pzaSoundManager.playSFX(),f.pzaChannel.instance().showVideo({sucCall:function(){c.pzaGiftConfig.setGiftCount(a),t.refreshView(),d.pzaRewardManager.recieveRewards(n,function(){t.refreshView()})},failCall:function(){},endCall:function(){},posName:"\u8d44\u6e90\u793c\u5305\u83b7\u53d6"})},a.prototype.clickPlantVideoBtn=function(e,a){var t=this;f.pzaChannel.instance().showVideo({sucCall:function(){var e,o=c.pzaGiftConfig.getPlantGiftData(parseInt(a));switch(parseInt(a)){case r.pzaPlantEnum.GATLING_PEA:u.pzaLocalData.data.gatlingAdCount++,u.pzaLocalData.addDirty("gatlingAdCount"),e=u.pzaLocalData.data.gatlingAdCount;break;case r.pzaPlantEnum.GLOOM_SHROOM:u.pzaLocalData.data.gloomShroomAdCount++,u.pzaLocalData.addDirty("gloomShroomAdCount"),e=u.pzaLocalData.data.gloomShroomAdCount;break;case r.pzaPlantEnum.CATTAIL:u.pzaLocalData.data.cattailAdCount++,u.pzaLocalData.addDirty("cattailAdCount"),e=u.pzaLocalData.data.cattailAdCount;break;case r.pzaPlantEnum.SPIKEROCK:u.pzaLocalData.data.spikerockAdCount++,u.pzaLocalData.addDirty("spikerockAdCount"),e=u.pzaLocalData.data.spikerockAdCount;break;case r.pzaPlantEnum.COB_CANNON:u.pzaLocalData.data.cobCannonAdCount++,u.pzaLocalData.addDirty("cobCannonAdCount"),e=u.pzaLocalData.data.cobCannonAdCount;break;case r.pzaPlantEnum.WINTER_MELON:u.pzaLocalData.data.winterMelonAdCount++,u.pzaLocalData.addDirty("winterMelonAdCount"),e=u.pzaLocalData.data.winterMelonAdCount}e>=o.needVideo&&(u.pzaLocalData.data.ownPlants.push(o.plant),u.pzaLocalData.addDirty("ownPlants")),t.refreshView()},failCall:function(){},endCall:function(){},posName:"\u690d\u7269\u793c\u5305\u83b7\u53d6"})},a.prototype.clickCancel=function(){h.pzaSoundManager.playSFX(),this.close()},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},a.prototype.clickShowResBtn=function(){h.pzaSoundManager.playSFX(),this.ResContent.active=!0,this.PlantContent.active=!1,this.scroll.content=this.ResContent,this.refreshView()},a.prototype.clickShowPlantBtn=function(){h.pzaSoundManager.playSFX(),this.ResContent.active=!1,this.PlantContent.active=!0,this.scroll.content=this.PlantContent,this.refreshView()},i([v({displayName:"\u65b0\u624b\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"BeginGiftItem",void 0),i([v({displayName:"\u6234\u592b\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"DaveGiftItem",void 0),i([v({displayName:"\u521b\u610f\u7545\u73a9\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"PlayPucketGiftItem",void 0),i([v({displayName:"\u82b1\u56ed\u8865\u7ed9\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"GardenGiftItem",void 0),i([v({displayName:"\u8d44\u6e90\u8865\u7ed9\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"resGiftItem",void 0),i([v({displayName:"\u690d\u7269\u793c\u5305\u9884\u5236\u4f53",type:cc.Prefab})],a.prototype,"PlantGiftPre",void 0),i([v({displayName:"\u8d44\u6e90\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"ResContent",void 0),i([v({displayName:"\u690d\u7269\u793c\u5305\u754c\u9762",type:cc.Node})],a.prototype,"PlantContent",void 0),i([v({displayName:"\u8d44\u6e90\u754c\u9762\u663e\u793a\u4e2d",type:cc.Node})],a.prototype,"ResOnShowBtn",void 0),i([v({displayName:"\u8d44\u6e90\u754c\u9762\u9690\u85cf\u4e2d",type:cc.Node})],a.prototype,"ResOnHideBtn",void 0),i([v({displayName:"\u690d\u7269\u754c\u9762\u663e\u793a\u4e2d",type:cc.Node})],a.prototype,"PlantOnShowBtn",void 0),i([v({displayName:"\u690d\u7269\u754c\u9762\u9690\u85cf\u4e2d",type:cc.Node})],a.prototype,"PlantOnHideBtn",void 0),i([v({displayName:"\u6ed1\u52a8\u7ec4\u4ef6",type:cc.ScrollView})],a.prototype,"scroll",void 0),i([v({type:[cc.SpriteFrame]})],a.prototype,"plantImg",void 0),i([g],a)}(p.default);t.pzaGiftView=b,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaGiftConfig":"pzaGiftConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel","./pzaGiftViewItem":"pzaGiftViewItem"}],pzaGlobalMask:[function(e,a,t){"use strict";cc._RF.push(a,"eafa7mC4zhJpKwi9hroxN5V","pzaGlobalMask");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGlobalMask=void 0;var r=e("../Battle/pzaGameState"),p=e("../View/pzaBubbleItem"),l=e("./pzaOperationMgr"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.operaArea=null,a.block=null,a.blockSP=null,a.mask=null,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){t.instance=this},a.showOperaArea=function(e,a,o,n){void 0===a&&(a=0),void 0===o&&(o=0),void 0===n&&(n=!1);var i=t.instance;if(i){i.blockSP.enabled=n;var r=e.convertToWorldSpaceAR(cc.v2()),s=i.node.parent.convertToNodeSpaceAR(r);i.mask.active=!0,i.operaArea.x=s.x+e.width*(.5-e.anchorX),i.operaArea.y=s.y+e.height*(.5-e.anchorY),i.operaArea.width=e.width+a,i.operaArea.height=e.height+o,l.pzaOperationMgr.hideTips(),l.pzaOperationMgr.showTips(i.node,0,0,null,p.pzaBubbleType.tips,3e4,null,3e4)}},a.setToGroundBlock=function(e,a,o,n,i,s){void 0===o&&(o=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===s&&(s=0);var c=t.instance;if(c){var u=r.pzaGameState.map.getXInterval(e)/2,d=r.pzaGameState.map.getYInterval(a)/2,h=r.pzaGameState.map.getBlockLogicPos(e,a,u,d);h.x+=o,h.y+=n,c.operaArea.setPosition(h),c.operaArea.width=r.pzaGameState.map.getXInterval(e),c.operaArea.height=r.pzaGameState.map.getYInterval(a),c.block.active=!0,c.block.setPosition(h),c.block.width=r.pzaGameState.map.getXInterval(e)+30+i,c.block.height=r.pzaGameState.map.getYInterval(a)+30+s,c.blankGrass(),l.pzaOperationMgr.hideTips(),l.pzaOperationMgr.showTips(c.node,0,0,null,p.pzaBubbleType.tips,3e4,null,3e4)}},a.setOperaAreaPos=function(e,a,o){var n=t.instance;n&&(n.operaArea.setPosition(e),n.operaArea.width=a,n.operaArea.height=o,l.pzaOperationMgr.hideTips(),l.pzaOperationMgr.showTips(n.node,0,0,null,p.pzaBubbleType.tips,3e4,null,3e4))},a.hideMask=function(){var e=t.instance;e&&(e.hideBlankGrass(),e.mask.active=!1,l.pzaOperationMgr.hideTips())},a.prototype.blankGrass=function(){this.block.stopAllActions(),this.block.active=!0,this.block.opacity=0,this.block.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4))))},a.prototype.hideBlankGrass=function(){this.block.active=!1},i([u(cc.Node)],a.prototype,"operaArea",void 0),i([u(cc.Node)],a.prototype,"block",void 0),i([u(cc.Sprite)],a.prototype,"blockSP",void 0),i([u(cc.Node)],a.prototype,"mask",void 0),t=i([c],a)}(cc.Component);t.pzaGlobalMask=d,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../View/pzaBubbleItem":"pzaBubbleItem","./pzaOperationMgr":"pzaOperationMgr"}],pzaGloomShroom:[function(e,a,t){"use strict";cc._RF.push(a,"f098cCRikVHVqfMmNScDg1G","pzaGloomShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGloomShroom=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaBuffData"),s=e("../pzaEffectManager"),c=e("../pzaGameState"),u=e("./pzaAttackType"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):this.playNormalAni(),c.pzaGameState.onlyBoomPlant=!1,c.pzaGameState.useShroom=!0},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this)))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=!1,o=1.7*c.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(a,n){null==a||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(e.baseData.logicPos,n.logicPos)<o&&(t=!0)}),t||e.canJoinDrZomBoss(e.baseData)&&(t=!0),t)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void e.animation.playAnimation("attack",!1,a,function(){if(null!=e.baseData&&!e.baseData.isDead){var a=cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y+47);s.pzaEffectManager.createGloomShroomEffect(e.baseData.yIndex,a,null),e.hurtZombies()}});e.animation.playAnimation("idle",!1,a)};this.animation.playAnimation("idle",!1,a)},a.prototype.canJoinDrZomBoss=function(e){if(e.xIndex<5)return null;var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)?null:a.baseData},a.prototype.hurtZombies=function(){var e=this,a=1.7*c.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,o){null==t||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.DIVE)||o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(e.baseData.logicPos,o.logicPos)<a&&t&&t.hurt(e.baseData.atk,e.baseData,u.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var t=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(t);o&&o.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.PENETRATE)}},i([m],a)}(d.pzaBasePlant));t.pzaGloomShroom=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGoldBullet:[function(e,a,t){"use strict";cc._RF.push(a,"28697UgTxhFRIx+zLj2CcRt","pzaGoldBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGoldBullet=void 0;var r=e("../../Common/pzaUtil"),p=e("../Data/pzaBuffData"),l=e("./pzaTrackBullet"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletFrameArr=[],a.bulletSpr=null,a.plantBaseData=null,a.trackEnemy=!0,a.yMove=!1,a}return n(a,e),a.prototype.bulletInit=function(e,a){this.bulletSpr.spriteFrame=this.bulletFrameArr[a],this.plantBaseData=e},a.prototype.init=function(a,t,o,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1),e.prototype.init.call(this,a,t,o,n),this.trackEnemy=i,this.yMove=r},a.prototype.logicUpdate=function(e){if(this.lifeTime+=e,this.lifeTime>=this.maxLifeTime)this.close();else{if(!this.trackEnemy||null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis){if(this.trackEnemy&&(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis)){var a=this.findAttackTarget();null!=a&&(this.targetData=a,this.updateDirection(e))}}else this.updateDirection(e);this.updateMove(e)}},a.prototype.yUpdateMove=function(e){this.node.y-=this.moveSpeed*e*.5},a.prototype.updateMove=function(e){if(this.yMove)return this.yUpdateMove(e),void this.shadowMove();this.logicPos.x+=e*this.moveSpeed*this.moveDirection.x,this.logicPos.y+=e*this.moveSpeed*this.moveDirection.y,this.node.setPosition(this.logicPos),this.shadowMove()},a.prototype.findAttackTarget=function(){var e=this;if(0!=this.trackEnemy){var a=null,t=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,l){if(null!=l&&null!=l.logicPos&&!l.buffData.hasBuff(p.pzaBuffType.DIVE)&&!l.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)){var s=r.pzaUtil.getDistance(e.logicPos,l.logicPos);l.buffData.hasBuff(p.pzaBuffType.FLY)?(-1==n||n>s)&&(n=s,o=l):(-1==t||t>s)&&(t=s,a=l)}}),null!=o?o:a}},a.prototype.close=function(){e.prototype.close.call(this),this.plantBaseData=null,this.bulletSpr.spriteFrame=null},i([u({displayName:"\u5b50\u5f39\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"bulletFrameArr",void 0),i([u({displayName:"\u5b50\u5f39\u7cbe\u7075",type:cc.Sprite})],a.prototype,"bulletSpr",void 0),i([c],a)}(l.pzaTrackBullet);t.pzaGoldBullet=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","./pzaTrackBullet":"pzaTrackBullet"}],pzaGoldHoleEffect:[function(e,a,t){"use strict";cc._RF.push(a,"793d73TCaNGDazKre3AVRaZ","pzaGoldHoleEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGoldHoleEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaNodeManager"),l=e("../../Load/pzaBundleObjectPool"),s=e("../../Load/pzaPreLoadManager"),c=e("../../utils/pzakc"),u=e("../Data/pzaDropType"),d=e("../pzaSunLight"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hole=null,a.holeFrames=[],a.holeTime=0,a.dropTime=0,a.holeStep=1,a.mapXIndex=-1,a.mapYIndex=-1,a.dropMap={},a}return n(a,e),a.prototype.init=function(e,a){this.mapXIndex=e,this.mapYIndex=a,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.GoldHoleSet.add(this),this.dropMap[""+u.pzaDropType.GOLD_COIN]=.15,this.dropMap[""+u.pzaDropType.SILVER_COIN]=.3,this.dropMap[""+u.pzaDropType.DIAMOND]=.05,this.dropMap.sun15=.3,this.dropMap.sun25=.15,this.dropMap.sun50=.05},a.prototype.recover=function(e,a,t,o){this.mapXIndex=e,this.mapYIndex=a,this.holeTime=t,this.holeStep=o,this.showHole(),window.pzaMapManager.GoldHoleSet.add(this)},a.prototype.dropSun=function(e,a){void 0===a&&(a=1);var t=this.node.getPosition();l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SUN,function(o,n){if(null==o&&null!=n){n.setParent(p.pzaNodeManager.getUpBgNode());var i=n.getComponent(d.pzaSunLight);i&&i.init2(t,a,e),window.pzaplantManager.AllSunLight.add(i)}else console.error(o)})},a.prototype.logicUpdate=function(e){if(this.holeTime+=e,this.dropTime+=e,this.node.getPosition(),this.holeTime>=180)return this.close(),window.pzaMapManager.GoldHoleSet.delete(this),void Math.random();if(this.holeTime>=90&&1==this.holeStep&&(this.holeStep=2,this.showHole()),this.dropTime>3){this.dropTime=0;var a=c.default.randomDraw(this.dropMap)||"sun15";if(a.startsWith("sun")){var t=parseInt(a.substring(3)),o=1;t<25?o=.7:t>25&&(o=2),this.dropSun(t,o)}}},a.prototype.showHole=function(){this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1],window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},a.prototype.clearHole=function(){this.dropCard(),this.close(),window.pzaMapManager.GoldHoleSet.delete(this)},a.prototype.dropCard=function(){this.node.getPosition(),window.pzaMapManager.GoldHoleSet.delete(this),Math.random()},a.prototype.close=function(){e.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},i([f({displayName:"\u6d1e",type:cc.Sprite})],a.prototype,"hole",void 0),i([f({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],a.prototype,"holeFrames",void 0),i([m],a)}(r.pzaBaseComponent);t.pzaGoldHoleEffect=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaNodeManager":"pzaNodeManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Data/pzaDropType":"pzaDropType","../pzaSunLight":"pzaSunLight"}],pzaGoldMagnet:[function(e,a,t){"use strict";cc._RF.push(a,"c5905QxdaNEapbfnmpbE9QQ","pzaGoldMagnet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGoldMagnet=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../pzaGameState"),l=e("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.restTime=0,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.sleeping=!1,this.restTime=0,this.playNormalAni(),p.pzaGameState.onlyBoomPlant=!1,p.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){if(!p.pzaGameState.gameWin&&window.pzaMapManager.DropCoinSet.size>0)return e.restTime=6,r.pzaSoundManager.playAudio("MagnetShroom"),void e.animation.playAnimation("attack",!1,a,function(){e.absorbCoin()});e.animation.playAnimation("idle",!1,a)};this.animation.playAnimation("idle",!1,a)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.restTime-=a},a.prototype.absorbCoin=function(){var e=this,a=Array.from(window.pzaMapManager.DropCoinSet);if(null!=a){var t=new cc.Vec2(50,130);(a=a.slice(0,5)).forEach(function(a){a.absorbMove(cc.v2(e.baseData.logicPos.x+t.x,e.baseData.logicPos.y+t.y))})}},i([c],a)}(l.pzaBasePlant));t.pzaGoldMagnet=u,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGoodsEnum:[function(e,a,t){"use strict";cc._RF.push(a,"f9c2dzr/KFJgbKP8WnQTBAo","pzaGoodsEnum"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGoodsEnum=void 0,function(e){e[e.CARD_SLOT_7=3001]="CARD_SLOT_7",e[e.CARD_SLOT_8=3002]="CARD_SLOT_8",e[e.CARD_SLOT_9=3003]="CARD_SLOT_9",e[e.POOL_CLEAN_CAR=3004]="POOL_CLEAN_CAR",e[e.PITCHFORK=3005]="PITCHFORK",e[e.ROOF_CART=3006]="ROOF_CART",e[e.GATLING_PEA=3007]="GATLING_PEA",e[e.GLOOM_SHROOM=3009]="GLOOM_SHROOM",e[e.CATTAIL=3010]="CATTAIL",e[e.SPIKEROCK=3011]="SPIKEROCK",e[e.WINTER_MELON=3012]="WINTER_MELON",e[e.COB_CANNON=3013]="COB_CANNON",e[e.IMITATER=3014]="IMITATER",e[e.NUT_HEALING=3015]="NUT_HEALING",e[e.MARIGOLD_FLOWERPOT=3016]="MARIGOLD_FLOWERPOT",e[e.GOLD_KETTLE=3017]="GOLD_KETTLE",e[e.FERTILIZER=3018]="FERTILIZER",e[e.PESTICIDE=3019]="PESTICIDE",e[e.JUKEBOX=3020]="JUKEBOX",e[e.GLOVE=3021]="GLOVE",e[e.SHROOM_GARDEN=3022]="SHROOM_GARDEN",e[e.AQUARIUM=3023]="AQUARIUM",e[e.WHEELBARROW=3024]="WHEELBARROW",e[e.SNAIL=3025]="SNAIL",e[e.FLOWER_SEED=3026]="FLOWER_SEED",e[e.BRONZE_FLOWER_SEED=3027]="BRONZE_FLOWER_SEED",e[e.SILVER_FLOWER_SEED=3028]="SILVER_FLOWER_SEED",e[e.GOLD_FLOWER_SEED=3029]="GOLD_FLOWER_SEED",e[e.BELT_SLOT1=3030]="BELT_SLOT1",e[e.BELT_SLOT2=3031]="BELT_SLOT2",e[e.BELT_SLOT3=3032]="BELT_SLOT3",e[e.BELT_SLOT4=3033]="BELT_SLOT4",e[e.WITCH_KNIGHT_BELT=3034]="WITCH_KNIGHT_BELT",e[e.DROP_COIN_PAGE=3101]="DROP_COIN_PAGE",e[e.DROP_HANDBOOK=3102]="DROP_HANDBOOK",e[e.DROP_GARDEN_KEY=3103]="DROP_GARDEN_KEY",e[e.DROP_SHOVEL=3104]="DROP_SHOVEL",e[e.DROP_CG_PAGE=3105]="DROP_CG_PAGE",e[e.DROP_SLIVER_TROHPY=3106]="DROP_SLIVER_TROHPY",e[e.DROP_GOLD_TROHPY=3107]="DROP_GOLD_TROHPY",e[e.DROP_SHOP=3108]="DROP_SHOP",e[e.DROP_SPRINKLER=3109]="DROP_SPRINKLER",e[e.DROP_DIANWANG=3110]="DROP_DIANWANG",e[e.GARDEN_MAGNIFIER=3111]="GARDEN_MAGNIFIER"}(t.pzaGoodsEnum||(t.pzaGoodsEnum={})),cc._RF.pop()},{}],pzaGotRewardView:[function(e,a,t){"use strict";cc._RF.push(a,"cc313x2SFRHPpxTbZTja0EM","pzaGotRewardView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGotRewardView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSpineController"),s=e("../Common/pzaWorldEventManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.itemParent=null,a.board=null,a.txt=null,a.spine=null,a}return n(a,e),a.prototype.bindData=function(e,a,t){var o=this;void 0===a&&(a=""),this.board.active=!1;var n=cc.instantiate(e);n.parent=this.itemParent,n.setPosition(0,0),this.txt.string=a,t&&t(),this.spine.playAnimation("ruchang",!1,function(){o.board.active=!0})},a.prototype.clickEnterBtn=function(){this.close()},a.prototype.clickCloseBtn=function(){this.close()},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node),p.pzaLocalData.gardenGuiding&&s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.UPDATE_GARDEN_GUIDE)},i([d(cc.Node)],a.prototype,"itemParent",void 0),i([d(cc.Node)],a.prototype,"board",void 0),i([d(cc.Label)],a.prototype,"txt",void 0),i([d(l.pzaSpineController)],a.prototype,"spine",void 0),i([u],a)}(cc.Component);t.pzaGotRewardView=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaGraveBuster:[function(e,a,t){"use strict";cc._RF.push(a,"88b4f8lc7lKtpSRmJt/bXt1","pzaGraveBuster");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGraveBuster=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaGameManager"),l=e("../../Common/pzaSoundManager"),s=e("../Data/pzaDropType"),c=e("../Data/pzaGuideType"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.swallTime=0,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),this.swallTime=0,l.pzaSoundManager.playAudio("GraveBuster"),this.animation.playAnimation("idle",!1,function(){l.pzaSoundManager.playAudio("gravebusterchomp"),t.animation.playAnimation("attack",!1,function(){t.swallowEnd()})}),this.atkInterval=4.5,d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.onlyShroomCofee=!1},a.prototype.logicLateUpdate=function(){e.prototype.logicLateUpdate.call(this),null!=this.baseData&&!this.baseData.isDead&&this.baseData.logicPos},a.prototype.swallowEnd=function(){window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.removeTomb(this.baseData.xIndex,this.baseData.yIndex),u.pzaEffectManager.createDirtEffect("idle2",this.baseData.yIndex,this.baseData.logicPos,null),window.pzaGuideManager.guideType==c.pzaGuideType.FORCE_GUIDE_2_4?window.pzaGuideManager.guideStepNext():this.dropCoin()},a.prototype.dropCoin=function(){Math.random()<=.2?u.pzaEffectManager.createDropCoin(s.pzaDropType.GOLD_COIN,this.baseData.logicPos):u.pzaEffectManager.createDropCoin(s.pzaDropType.SILVER_COIN,this.baseData.logicPos)},a.prototype.death=function(e,a,t,o,n){if(void 0===e&&(e=null),void 0===a&&(a=null),void 0===t&&(t=!0),void 0===o&&(o=null),void 0===n&&(n=null),this.baseData.isDead=!0,this.baseData&&this.baseData.plantData&&this.baseData.plantData.isProtectPlant)return p.pzaGameManager.specialFail("\u8bf7\u6ce8\u610f\uff0c\u9700\u8981\u4fdd\u62a4\u9762\u4e34\u5371\u9669\u7684\u9a91\u58eb",!0),void this.close();t&&u.pzaEffectManager.plantDeathEffect(!r.pzaGameConfig.isShowBuleValueEffect(this.baseData.plantData.plantType),this.animation,this.uiIdleName,this.baseData.logicPos,this.node.zIndex,n),this.close()},i([f],a)}(h.pzaBasePlant));t.pzaGraveBuster=z,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaDropType":"pzaDropType","../Data/pzaGuideType":"pzaGuideType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGroupEnum:[function(e,a,t){"use strict";cc._RF.push(a,"3426cg49eVIiYOL6XQvZ3G4","pzaGroupEnum"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGroupEnum=void 0,function(e){e.PLANT_BULLET="PlantBullet",e.ZOMBIE="Zombie",e.TORCHWOOD="TorchWood",e.PLANT="Plant",e.BOWLING="Bowling",e.WALL="Wall",e.ZOMBIE_BULLET="ZombieBullet",e.BRAIN="Brain",e.ZOMBIEFIRETORCH="ZombieTorch",e.PORTALDOOR="Portal"}(t.pzaGroupEnum||(t.pzaGroupEnum={})),cc._RF.pop()},{}],pzaGroveEffect:[function(e,a,t){"use strict";cc._RF.push(a,"ca9a1YXYU5Lq6K1D3L5mq+/","pzaGroveEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGroveEffect=void 0;var p=e("../../Common/pzaBaseComponent"),l=e("../../Common/pzaWorldEventManager"),s=e("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){var a,t,o;e.prototype.onEnable.call(this);try{for(var n=r(this.node.children),i=n.next();!i.done;i=n.next())i.value.active=!1}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}o=0==s.pzaGameState.mapId||1==s.pzaGameState.mapId?"map_1":"map_"+s.pzaGameState.mapId;var p=this.node.getChildByName(o);p&&(p.active=!0),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.SET_GROVEOPACITY,this.setGroveEffect,this)},a.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.SET_GROVEOPACITY,this.setGroveEffect,this)},a.prototype.setGroveEffect=function(e){this.node.opacity=e},i([u],a)}(p.pzaBaseComponent));t.pzaGroveEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaGuanKaItemView:[function(e,a,t){"use strict";cc._RF.push(a,"94d58qmgwFH+bfrpPdKMuF1","pzaGuanKaItemView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Battle/Data/pzaGoodsEnum"),p=e("../Battle/pzaGameState"),l=e("../Common/pzaGameConfig"),s=e("../Common/pzaGameManager"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSoundManager"),d=e("../Common/pzaSpriteFrameManager"),h=e("../Common/pzaTipManager"),m=e("../Common/pzaUIManager"),f=e("../Common/pzaWorldEventManager"),z=e("../utils/pzakc"),y=e("./pzaCommonMask"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.guankaImg=null,a.guanKaName=null,a.guanKaPlant=null,a.lockNode=null,a.passNode=null,a.guanKaMaskNode=null,a.blackMaskNode=null,a.startGameNode=null,a.loseStar=[],a.winStarArr=[],a.zombieImg=null,a.beltNode=null,a.curChapter=1,a.curPart=1,a.btZombiesArr=[2,1,3,1,-1,4,1,5,1,-2],a.btPlantArr=["3102","3","4","3104","5","6","7","8","3110","9"],a.hyZombiesArr=[6,1,7,1,-3,8,1,9,1,-4],a.hyPlantArr=["10","11","12","3103","13","14","15","16","3105","17"],a.ycZombiesArr=[11,1,14,1,-5,15,1,17,1,-6],a.ycPlantArr=["18","19","20","3108","21","22","23","24","3105","25"],a.wyZombiesArr=[18,1,19,1,-7,20,1,21,1,-8],a.wyPlantArr=["26","27","28","3108","30","29","31","32","3105","33"],a.wdZombiesArr=[23,1,24,1,-9,25,1,26,1,-10],a.wdPlantArr=["34","35","36","3101","37","38","39","40","3105","3106"],a.startGameCall=null,a.unlockPart=!1,a.passPart=!1,a.myIndex=-1,a.costPower=c.pzaLocalData.normalPowerCost,a.gameDelayTime=1.5,a}return n(a,e),a.prototype.bindStartGameCall=function(e){this.startGameCall=e},a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.scrollToCenter,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.scrollToCenter,this)},a.prototype.bindData=function(e,a,t,o){this.curChapter=e,this.curPart=a,this.myIndex=o,10==this.curChapter?this.wdPlantArr=["34","35","36","3101","37","38","39","40","3105","3107"]:this.wdPlantArr=["34","35","36","3101","37","38","39","40","3105","3106"],this.unlockPart=this.curChapter<c.pzaLocalData.data.curChapter||this.curChapter==c.pzaLocalData.data.curChapter&&this.curPart<=c.pzaLocalData.data.curPart,this.passPart=this.curChapter<c.pzaLocalData.data.curChapter||this.curChapter==c.pzaLocalData.data.curChapter&&this.curPart<c.pzaLocalData.data.curPart,5==this.curChapter&&10==this.curPart&&(this.passPart=c.pzaLocalData.data.passLastPart),10==this.curChapter&&10==this.curPart&&(this.passPart=c.pzaLocalData.data.passWtLastPart),this.updateStar(),this.updateUI(t),c.pzaLocalData.isShowPowerGift||(this.startGameNode.getChildByName("New Label").y=0,this.startGameNode.getChildByName("rightPower").active=!1,this.costPower=0,this.gameDelayTime=0);var n=this.startGameNode.getChildByName("rightPower").getChildByName("rightPowercost");n&&(n.getComponent(cc.Label).string="X"+c.pzaLocalData.normalPowerCost)},a.prototype.updateStartGameNode=function(e){this.curPart==e?(this.node.scale=.9,this.unlockPart?(this.startGameNode.active=!0,this.startGameNode.opacity=255):this.startGameNode.active=!1):(this.node.scale=.65,this.startGameNode.active=!1)},a.prototype.scrollMove=function(e){var a=950-214.6*(this.curPart-1),t=Math.abs(e-a);t<=214.6?(this.node.scale=.65+.25*(214.6-t)/214.6,this.unlockPart&&(this.startGameNode.active=!0,this.startGameNode.opacity=(214.6-t)/214.6*255)):(this.node.scale=.65,this.startGameNode.active=!1)},a.prototype.updateUI=function(e){this.guanKaName.string=this.curPart.toString(),this.passPart?(this.lockNode.active=!1,this.guanKaMaskNode.active=!1,this.blackMaskNode.active=!1,this.passNode.active=!0,this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):this.unlockPart?(this.lockNode.active=!1,this.guanKaMaskNode.active=!1,this.blackMaskNode.active=!1,this.passNode.active=!1,this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):(this.lockNode.active=!0,this.guanKaMaskNode.active=!0,this.blackMaskNode.active=!0,this.passNode.active=!1,c.pzaLocalData.isWeekTwo?(this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):(this.zombieImg.node.color=cc.color(0,0,0,255),this.guanKaPlant.node.color=cc.color(0,0,0,255))),this.updateStartGameNode(e),this.updateZombieImg(),this.updatePlantImg(),this.beltNode.active=10==this.curPart&&5!=this.curChapter&&10!=this.curChapter||(5==this.curChapter||10==this.curChapter)&&5==this.curPart},a.prototype.updateStar=function(){var e=l.pzaGameConfig.getPartStar(this.curChapter,this.curPart);if(null!=e&&e>0)if(this.curChapter<c.pzaLocalData.data.curChapter)this.showWinStar();else if(this.curChapter==c.pzaLocalData.data.curChapter)if(this.curPart<=c.pzaLocalData.data.curPart)this.showWinStar();else for(var a=0;a<3;a++)this.loseStar[a].node.active=!1,this.winStarArr[a].node.active=!1;else for(a=0;a<3;a++)this.loseStar[a].node.active=!1,this.winStarArr[a].node.active=!1;else for(a=0;a<3;a++)this.loseStar[a].node.active=!1,this.winStarArr[a].node.active=!1},a.prototype.showWinStar=function(){var e=c.pzaLocalData.getPartStar(this.curChapter,this.curPart);this.loseStar[0].node.active=!0,this.loseStar[1].node.active=!0,this.loseStar[2].node.active=!0;for(var a=0;a<3;a++)this.winStarArr[a].node.active=a<e},a.prototype.updateZombieImg=function(){var e=0,a=this.curChapter>5?this.curChapter-5:this.curChapter;if(1==a?e=this.btZombiesArr[this.curPart-1]:2==a?e=this.hyZombiesArr[this.curPart-1]:3==a?e=this.ycZombiesArr[this.curPart-1]:4==a?e=this.wyZombiesArr[this.curPart-1]:5==a&&(e=this.wdZombiesArr[this.curPart-1]),!(e>0))return this.guankaImg.node.active=!0,t="map"+a,1==a||2==a||3==a||4==a||6==a||7==a||8==a||9==a?5==this.curPart&&(t="te"+a):5!=a&&10!=a||10==this.curPart&&(t="te"+a),d.pzaSpriteFrameManager.loadGuanKaImg(t,this.guankaImg),void(this.zombieImg.node.opacity=0);this.guankaImg.node.active=!1,this.zombieImg.node.opacity=255,d.pzaSpriteFrameManager.loadZombieCard(e,this.zombieImg),this.changePosByZombieId(e),this.guankaImg.node.active=!0;var t="map"+a;1==a||2==a||3==a||4==a||6==a||7==a||8==a||9==a?5==this.curPart&&(t="te"+a):5!=a&&10!=a||10==this.curPart&&(t="te"+a),d.pzaSpriteFrameManager.loadGuanKaImg(t,this.guankaImg)},a.prototype.updatePlantImg=function(){var e="",a=this.curChapter>5?this.curChapter-5:this.curChapter,t=[],o=!1;1==a?t=this.btPlantArr:2==a?t=this.hyPlantArr:3==a?t=this.ycPlantArr:4==a?t=this.wyPlantArr:5==a&&(t=this.wdPlantArr),parseInt(t[this.curPart-1])>=r.pzaGoodsEnum.DROP_COIN_PAGE?(e=t[this.curPart-1],o=!0):e="wholePlantIcon/whole_"+t[this.curPart-1],this.guanKaPlant.node.scale="3103"==e?.6:"3102"==e?.45:1,o?d.pzaSpriteFrameManager.loadCommonGoodsIcon(parseInt(e),this.guanKaPlant):d.pzaSpriteFrameManager.loadPlantImg(e,this.guanKaPlant)},a.prototype.changePosByZombieId=function(e){this.zombieImg.node.scale=.5,4==this.curChapter||9==this.curChapter?this.zombieImg.node.setPosition(-50,-30):this.zombieImg.node.setPosition(-17.609,-16.35),15==e&&(this.zombieImg.node.scale=.3)},a.prototype.showLockTween=function(){for(var e=cc.tween(this.lockNode),a=10;a<=13;a++)e.to(.07,{angle:0+a}).to(.07,{angle:0-a});e.to(.07,{angle:0}).start()},a.prototype.clickStartBtn=function(){var e=this;if(this.unlockPart)if(p.pzaGameState.midOut)p.pzaGameState.curChapter==this.curChapter&&p.pzaGameState.curPart==this.curPart&&s.pzaGameManager.getCurrentGame().isMainMode()?(this.startGameCall&&this.startGameCall(),s.pzaGameManager.getCurrentGame().gameRecover(this.curChapter,this.curPart,null)):s.pzaGameManager.midOutStart(s.pzaGameManager.getGameMode(this.curChapter,this.curPart),this.curChapter,this.curPart,this.startGameCall.bind(this),!0);else{if(c.pzaLocalData.data.power<this.costPower)return h.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void m.pzaUIManager.showPowerView();c.pzaLocalData.setPower(-this.costPower),z.default.sendMsg("powerani"),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),y.pzaCommonMask.showMask(),this.scheduleOnce(function(){y.pzaCommonMask.hideMask(),e.startGameCall&&e.startGameCall(),m.pzaUIManager.removeBoardUI(),s.pzaGameManager.preLoadAndStart(s.pzaGameManager.getGameMode(e.curChapter,e.curPart),e.curChapter,e.curPart),p.pzaGameState.weekTwoInitPlants=[]},this.gameDelayTime)}else this.showLockTween(),u.pzaSoundManager.playAudio("unlockpart")},a.prototype.scrollToCenter=function(){f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.PARTVIEW_SCROLLTOCENTER,this.myIndex)},i([b({displayName:"\u5f53\u524d\u5173\u5361\u56fe\u7247",type:cc.Sprite})],a.prototype,"guankaImg",void 0),i([b({displayName:"\u5f53\u524d\u5173\u5361\u540d\u79f0",type:cc.Label})],a.prototype,"guanKaName",void 0),i([b({displayName:"\u5f53\u524d\u5173\u5361\u690d\u7269",type:cc.Sprite})],a.prototype,"guanKaPlant",void 0),i([b({displayName:"\u9501\u8282\u70b9",type:cc.Node})],a.prototype,"lockNode",void 0),i([b({displayName:"\u901a\u8fc7\u8282\u70b9",type:cc.Node})],a.prototype,"passNode",void 0),i([b({displayName:"\u5173\u5361\u8499\u7248\u8282\u70b9",type:cc.Node})],a.prototype,"guanKaMaskNode",void 0),i([b({displayName:"\u9ed1\u8272\u8499\u7248\u8282\u70b9",type:cc.Node})],a.prototype,"blackMaskNode",void 0),i([b({displayName:"\u5f00\u59cb\u6e38\u620f\u6309\u94ae",type:cc.Node})],a.prototype,"startGameNode",void 0),i([b({displayName:"\u661f\u661f",type:cc.Sprite})],a.prototype,"loseStar",void 0),i([b({displayName:"\u8d62\u7684\u661f\u661f",type:cc.Sprite})],a.prototype,"winStarArr",void 0),i([b({displayName:"\u50f5\u5c38\u56fe\u7247",type:cc.Sprite})],a.prototype,"zombieImg",void 0),i([b({displayName:"\u4f20\u9001\u5e26",type:cc.Node})],a.prototype,"beltNode",void 0),i([v],a)}(cc.Component);t.default=P,cc._RF.pop()},{"../Battle/Data/pzaGoodsEnum":"pzaGoodsEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask"}],pzaGuideDialogView:[function(e,a,t){"use strict";cc._RF.push(a,"b41ebcZIqNOl6hK3wENh5Vn","pzaGuideDialogView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGuideDialogView=void 0;var r=e("../Battle/Data/pzaGuideType"),p=e("../Battle/pzaGameState"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaSpineController"),d=e("../Common/pzaUtil"),h=e("../Common/pzaWorldEventManager"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bgButton=null,a.dialogNode=null,a.word=null,a.selectBoard=null,a.selectTittle=null,a.selectTxt=null,a.coinLabel=null,a.black=null,a.daveAni=null,a.skipBtnMask=null,a.words=null,a.confirmWords=null,a.cancelWords=null,a.dialogEndCall=null,a.firstClickCall=null,a.lastDialogCall=null,a.confirmCall=null,a.cancelCall=null,a.canContinue=!1,a.daveDeathAni=!1,a}return n(a,e),a.prototype.jumpView=function(e){"dialog"===e&&this.close()},a.prototype.onEnable=function(){this.bgButton.on(cc.Node.EventType.TOUCH_START,this.clickNext,this),this.coinLabel.string=d.pzaUtil.getCurrencyStr(s.pzaLocalData.data.coin),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),this.skipBtnMask.enabled=p.pzaGameState.skipGuidePartAble},a.prototype.onDisable=function(){this.bgButton.off(cc.Node.EventType.TOUCH_START,this.clickNext,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.JUMP_VIEW,this.jumpView,this)},a.prototype.setBlackBG=function(e){void 0===e&&(e=!1),this.black.active=e},a.prototype.showDialog=function(e,a,t,o,n){void 0===t&&(t=null),void 0===n&&(n=!1),this.words=e,this.selectBoard.active=!1,this.dialogNode.active=!1,this.canContinue=!1,this.daveDeathAni=n,this.dialogEndCall=a,this.firstClickCall=t,this.lastDialogCall=o,this.enterAnimation()},a.prototype.showSelectDialog=function(e,a,t,o,n,i,r,p,l){var s=this;void 0===l&&(l=null),this.words=e,this.selectBoard.active=!1,this.dialogNode.active=!1,this.confirmWords=n,this.cancelWords=r,this.dialogEndCall=p,this.lastDialogCall=function(){s.showSelectBoard(a,t,o,i)},this.firstClickCall=l,this.enterAnimation()},a.prototype.showSelectBoard=function(e,a,t,o){this.selectBoard.active=!0,this.selectTittle.string=e,this.selectTxt.string=a,this.confirmCall=t,this.cancelCall=o},a.prototype.onPlayAniEnd=function(){this.daveAni.playAnimation(this.getRandomIdleAni(),!1,this.onPlayAniEnd.bind(this))},a.prototype.getRandomTalkAni=function(e){var a=null,t=d.pzaUtil.getRandomNum(0,1);switch(e){case r.pzaDaveAni.normal:case r.pzaDaveAni.normal_eye:case r.pzaDaveAni.normal_talk:case r.pzaDaveAni.normal_talk_eye:default:a=1==t?r.pzaDaveAni.normal_talk:r.pzaDaveAni.normal_talk_eye;break;case r.pzaDaveAni.require:case r.pzaDaveAni.require_eye:case r.pzaDaveAni.require_talk:case r.pzaDaveAni.require_talk_eye:a=1==t?r.pzaDaveAni.require_talk:r.pzaDaveAni.require_talk_eye;break;case r.pzaDaveAni.suggest:case r.pzaDaveAni.suggest_eye:case r.pzaDaveAni.suggest_talk:case r.pzaDaveAni.suggest_talk_eye:a=1==t?r.pzaDaveAni.suggest_talk:r.pzaDaveAni.suggest_talk_eye;break;case r.pzaDaveAni.think:case r.pzaDaveAni.think_eye:case r.pzaDaveAni.think_talk:case r.pzaDaveAni.think_talk_eye:a=1==t?r.pzaDaveAni.think_talk:r.pzaDaveAni.think_talk_eye}return a},a.prototype.getRandomIdleAni=function(){var e=null,a=d.pzaUtil.getRandomNum(0,1);switch(this.daveAni.spineAnimation.animation){case r.pzaDaveAni.normal:case r.pzaDaveAni.normal_eye:case r.pzaDaveAni.normal_talk:case r.pzaDaveAni.normal_talk_eye:default:e=1==a?r.pzaDaveAni.normal:r.pzaDaveAni.normal_eye;break;case r.pzaDaveAni.require:case r.pzaDaveAni.require_eye:case r.pzaDaveAni.require_talk:case r.pzaDaveAni.require_talk_eye:e=1==a?r.pzaDaveAni.require:r.pzaDaveAni.require_eye;break;case r.pzaDaveAni.suggest:case r.pzaDaveAni.suggest_eye:case r.pzaDaveAni.suggest_talk:case r.pzaDaveAni.suggest_talk_eye:e=1==a?r.pzaDaveAni.suggest:r.pzaDaveAni.suggest_eye;break;case r.pzaDaveAni.think:case r.pzaDaveAni.think_eye:case r.pzaDaveAni.think_talk:case r.pzaDaveAni.think_talk_eye:e=1==a?r.pzaDaveAni.think:r.pzaDaveAni.think_eye}return e},a.prototype.showNextWord=function(){var e=this;if(null!=this.words){this.words&&this.words[0]&&this.words[0].event&&this.words[0].event();var a=this.words.shift();null!=a?(this.word.string=a.word,this.playShortSound(),this.daveAni.playAnimation(this.getRandomTalkAni(a.daveAni),!1,function(){e.onPlayAniEnd()}),null!=this.lastDialogCall&&this.words.length<=0&&(this.lastDialogCall(),this.lastDialogCall=null)):this.outAnimation()}else this.outAnimation()},a.prototype.enterAnimation=function(){var e=this;this.daveAni.playAnimation(r.pzaDaveAni.into,!1,function(){e.dialogNode.active=!0,e.canContinue=!0,e.showNextWord()})},a.prototype.outAnimation=function(){var e=this;this.dialogNode.active=!1,this.canContinue=!1,this.daveDeathAni,this.daveAni.playAnimation(r.pzaDaveAni.out,!1,function(){e.close(),e.dialogEndCall&&e.dialogEndCall()})},a.prototype.clickNext=function(){this.canContinue&&(this.showNextWord(),this.firstClickCall&&this.firstClickCall(),this.firstClickCall=null)},a.prototype.clickConfirm=function(){this.confirmCall&&this.confirmCall(),this.selectBoard.active=!1,this.words=this.confirmWords,this.showNextWord()},a.prototype.clickCancel=function(){this.cancelCall&&this.cancelCall(),this.selectBoard.active=!1,this.words=this.cancelWords,this.showNextWord()},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},a.prototype.playShortSound=function(){c.pzaSoundManager.playAudio("daveshort")},i([z({displayName:"\u80cc\u666f\u6309\u94ae",type:cc.Node})],a.prototype,"bgButton",void 0),i([z({displayName:"\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],a.prototype,"dialogNode",void 0),i([z({displayName:"\u6587\u5b57",type:cc.Label})],a.prototype,"word",void 0),i([z({displayName:"\u9009\u62e9\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],a.prototype,"selectBoard",void 0),i([z({displayName:"\u9009\u62e9\u6807\u9898",type:cc.Label})],a.prototype,"selectTittle",void 0),i([z({displayName:"\u9009\u62e9\u6587\u672c",type:cc.Label})],a.prototype,"selectTxt",void 0),i([z({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],a.prototype,"coinLabel",void 0),i([z({type:cc.Node})],a.prototype,"black",void 0),i([z({displayName:"\u6234\u592b\u52a8\u753b",type:u.pzaSpineController})],a.prototype,"daveAni",void 0),i([z({type:cc.Mask})],a.prototype,"skipBtnMask",void 0),i([f],a)}(cc.Component);t.pzaGuideDialogView=y,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaGuideManager:[function(e,a,t){"use strict";cc._RF.push(a,"769a2uE36pNHoz5+DpNycx5","pzaGuideManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGuideManager=void 0;var p=e("../Battle/Data/pzaBuffData"),l=e("../Battle/Data/pzaGuideType"),s=e("../Battle/Data/pzaPlantEnum"),c=e("../Battle/Data/pzaZombieEnum"),u=e("../Battle/Plant/pzaSunFlower"),d=e("../Battle/pzaEffectManager"),h=e("../Battle/pzaGameState"),m=e("../Load/pzaPreLoadManager"),f=e("../utils/pzakc"),z=e("../View/Battle/pzaBattleDownView"),y=e("../View/Battle/pzaGuideView"),g=e("../View/Battle/pzaPlantSelectView"),v=e("../View/pzaCommonMask"),b=e("../View/pzaGuideDialogView"),P=e("./pzaGameConfig"),C=e("./pzaGameManager"),E=e("./pzaGamePropConfig"),S=e("./pzaGlobalMask"),_=e("./pzaLocalData"),D=e("./pzaOperationMgr"),M=e("./pzaTipManager"),w=e("./pzaUIManager"),T=e("./pzaWorldEventManager"),A=cc._decorator,B=A.ccclass,G=A.property,I=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.guideHand=null,a.guideType=null,a.guideStep=0,a.autoHideTime=0,a.autoNextGuide=!1,a.guidePlant=null,a.triggerExtraGuide=!1,a.guideEndCall=null,a}return n(a,e),a.prototype.onLoad=function(){window.pzaGuideManager=this},a.prototype.update=function(e){h.pzaGameState.gamePause||this.autoHideTime>0&&(this.autoHideTime-=e,this.autoHideTime<=0&&(this.autoNextGuide?(this.autoNextGuide=!1,this.guideStepNext()):M.pzaTipManager.hideGuideTip()))},a.prototype.guideStart=function(e){if(this.guideType=null,this.guideStep=0,this.guidePlant=null,this.triggerExtraGuide=!1,this.autoHideTime=0,this.autoNextGuide=!1,this.guideEndCall=null,h.pzaGameState.gameMode==h.pzaGameMode.ZOMBIE_ENERMY)return 1==h.pzaGameState.curPart?void(this.guideType=l.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1):void(e&&e(!1));if(h.pzaGameState.gameMode==h.pzaGameMode.VASE)return 1==h.pzaGameState.curPart?void(this.guideType=l.pzaGuideType.GUIDE_VASE):void(e&&e(!1));if(1==h.pzaGameState.curChapter){if(1==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_PLANT_1_1);if(2==h.pzaGameState.curPart){if(1==_.pzaLocalData.data.curChapter&&2==_.pzaLocalData.data.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_PROP_1_2)}else{if(3==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>=1&&_.pzaLocalData.data.curPart>3?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.GUIDE_1_3);if(4==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>1&&_.pzaLocalData.data.curPart>4?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.FORCE_GUIDE_1_4);if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_SHOVEL_1_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE)}}else if(2==h.pzaGameState.curChapter){if(1==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>=2&&_.pzaLocalData.data.curPart>1?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.GUIDE_NINGHT_2_1);if(3==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_TRACK_2_3);if(4==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>=2&&_.pzaLocalData.data.curPart>4?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.FORCE_GUIDE_2_4);if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE);if(6==h.pzaGameState.curPart&&_.pzaLocalData.data.coin>=750&&6==_.pzaLocalData.data.plantSlotCount&&!_.pzaLocalData.data.unlockShop)return void(this.guideType=l.pzaGuideType.GUIDE_CARD_SLOT_2_4)}else if(3==h.pzaGameState.curChapter){if(1==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_POOL_3_1);if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE);if(!_.pzaLocalData.data.unlockShop){if(_.pzaLocalData.data.coin>=750&&6==_.pzaLocalData.data.plantSlotCount)return void(this.guideType=l.pzaGuideType.GUIDE_CARD_SLOT_2_4);if(_.pzaLocalData.data.coin>=5e3&&7==_.pzaLocalData.data.plantSlotCount)return void(this.guideType=l.pzaGuideType.GUIDE_CARD_SLOT_2_6)}}else if(4==h.pzaGameState.curChapter){if(1==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_4_1);if(2==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>4&&_.pzaLocalData.data.curPart>2?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.FORCE_GUIDE_4_2);if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BANG_JAR_4_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_NINGHT_4_10)}else if(5==h.pzaGameState.curChapter){if(1==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>5&&_.pzaLocalData.data.curPart>1?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.FORCE_GUIDE_5_1);if(2==h.pzaGameState.curPart)return _.pzaLocalData.data.curChapter>=5&&_.pzaLocalData.data.curPart>2?void(e&&e(!1)):void(this.guideType=l.pzaGuideType.GUIDE_5_2);if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_5_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BOSS_5_10)}else if(6==h.pzaGameState.curChapter){if(1==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_6_1);if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_6_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE)}else if(7==h.pzaGameState.curChapter){if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE)}else if(8==h.pzaGameState.curChapter){if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE)}else if(9==h.pzaGameState.curChapter){if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BANG_JAR_4_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_NINGHT_4_10)}else if(10==h.pzaGameState.curChapter){if(5==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_10_5);if(10==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BOSS_5_10)}else if(100==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart)return void(this.guideType=l.pzaGuideType.GUIDE_BELT_MODE);e&&e(!1)},a.prototype.guideStepPre=function(){this.guideStep--,this.guideShow()},a.prototype.guideStepNext=function(){this.guideStep++,this.guideShow()},a.prototype.guideStepTo=function(e){this.guideStep=e,this.guideShow()},a.prototype.guideShow=function(e,a){var t=this;void 0===e&&(e=null),void 0===a&&(a=null);var o=function(e,a,t){void 0===t&&(t=0);var o=h.pzaGameState.map.getXInterval(e)/2|0,n=h.pzaGameState.map.getYInterval(a)/3|0,i=window.pzazombieManager.createZombieData(c.pzaZombieEnum.ZOMBIE,a),r=P.pzaGameConfig.getZombieConfig(c.pzaZombieEnum.ZOMBIE);return i.zombieData.initMSpd=i.zombieData.moveSpd=h.pzaGameState.map.getBlockWidth()/r.maxSpeed,window.pzazombieManager.createZombie(i,null,null,null,null,null,null,e,cc.v2(o+t,n),!1),i},n=function(e,a,t,o){return window.pzaplantManager.createPlant(e,a,t,!0,!1,!1,o)},i=function(e,a){C.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(t){var o=t&&t.getComponent(g.pzaPlantSelectView);o&&o.init(e,function(){a&&a()}),o&&o.initPlant()})};if(null!=a&&(this.guideEndCall=a),this.guideType==l.pzaGuideType.GUIDE_PLANT_1_1)switch(this.guideStep){case 0:return f.default.eventReport("\u7b2c\u4e00\u5173\u6559\u7a0b\u5f00\u59cb"),z.pzaBattleDownView.getInstance.hideSkipPartBtn(),v.pzaCommonMask.showMask(!1,!1),h.pzaGameState.guideSunPause=!0,this.guidePlant=null,this.guideStep=2,void this.showGuideDialogView([new l.pzaDialog("\u68c0\u6d4b\u5230\u9a91\u58eb\u7cfb\u7edf\u5df2\u6fc0\u6d3b\u3002"),new l.pzaDialog("\u9a91\u58eb\u7cfb\u7edf\u53ef\u4ee5\u5e2e\u52a9\u60a8\u53ec\u5524\u5404\u4e2a\u65f6\u7a7a\u7684\u5047\u9762\u9a91\u58eb\u6295\u5f71\u3002"),new l.pzaDialog("\u7406\u8bba\u4e0a\uff0c\u6295\u5f71\u4e0d\u5177\u5907\u5b9e\u4f53\u6218\u6597\u529b\u2026\u4f46\u80fd\u91cf\u8bfb\u6570\u5f02\u5e38\uff01"),new l.pzaDialog("\u8b66\u544a\uff01\u602a\u4eba\u63a5\u8fd1\u57ce\u5e02\u9632\u706b\u5899\uff01",null,l.pzaDaveAni.require_talk_eye),new l.pzaDialog("\u793e\u957f\uff01\u80fd\u91cf\u74f6\u662f\u6fc0\u6d3b\u9a91\u58eb\u7cfb\u7edf\u7684\u5173\u952e\u3002"),new l.pzaDialog("\u80fd\u91cf\u50a8\u5907\u5df2\u8fbe\u4e34\u754c\u503c\uff01")],this.guideStepNext.bind(this),function(){});case 3:return v.pzaCommonMask.hideMask(),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,s.pzaPlantEnum.SUN_FLOWER),void M.pzaTipManager.showGuideTip("\u6b63\u5728\u8ba1\u7b97\u6700\u4f18\u65b9\u6848\u2014\u2014\u5efa\u8bae\u90e8\u7f723\u4e2a\u4f0a\u5179\u6295\u5f71\uff01");case 4:return h.pzaGameState.forceCreateXY={xIndex:0,yIndex:2},void S.pzaGlobalMask.setToGroundBlock(0,2,0,5,0,10);case 5:return S.pzaGlobalMask.hideMask(),M.pzaTipManager.showGuideTip("\u751f\u5b58\u6982\u7387\u63d0\u5347\u81f378%\uff01"),this.autoHideTime=2,this.autoNextGuide=!0,void v.pzaCommonMask.showMask(!1,!1);case 6:return window.pzaplantManager.autoCreateSun(),setTimeout(function(){v.pzaCommonMask.hideMask(),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,"showSunTips")},1e3),void M.pzaTipManager.showGuideTip("\u53d1\u73b0\u6ea2\u51fa\u7684\u80fd\u91cf\u74f6\uff01",3);case 7:var y=window.pzaplantManager.plantMap.get(window.pzaplantManager.plantDataMap.get("03")).node.getComponent(u.pzaSunFlower);return y&&y.showGuideSun("createSunAndTips"),v.pzaCommonMask.showMask(!1,!1),setTimeout(function(){v.pzaCommonMask.hideMask(),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,"showSunTips")},1e3),void M.pzaTipManager.showGuideTip("\u5efa\u8bae\u6301\u7eed\u6536\u96c6\u80fd\u91cf\u74f6\u8ba9\u9a91\u58eb\u7cfb\u7edf\u5145\u80fd");case 8:return M.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new l.pzaDialog("\u793e\u957f\uff01\u68c0\u6d4b\u5230\u6709\u9a91\u58eb\u5361\u724c\uff01")],null,function(){D.pzaOperationMgr.hideTips(),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.SET_CARDLIST,[s.pzaPlantEnum.SUN_FLOWER,s.pzaPlantEnum.PEA_SHOOTER]),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,s.pzaPlantEnum.PEA_SHOOTER)});case 9:return h.pzaGameState.forceCreateXY={xIndex:1,yIndex:2},S.pzaGlobalMask.setToGroundBlock(1,2,0,5,0,10),void M.pzaTipManager.showGuideTip("\u5047\u9762\u9a91\u58eb555\u6295\u5f71\u5df2\u89e3\u9501\uff0c\u8bf7\u90e8\u7f72\u9a91\u58eb\u6295\u5f71\u5230\u4f5c\u6218\u533a\u57df\uff01");case 10:return h.pzaGameState.forceCreateXY=null,h.pzaGameState.guideSunPause=!1,h.pzaGameState.guideZombiePause=!1,window.pzazombieManager.nextWaveTime=0,S.pzaGlobalMask.hideMask(),M.pzaTipManager.showGuideTip("\u64cd\u4f5c\u8ba4\u8bc1\u6210\u529f\uff01\u62d6\u62fd\u9a91\u58eb\u5361\u724c\u53ef\u7cbe\u786e\u90e8\u7f72~",2),void setTimeout(function(){window.pzaGuideManager.guideType=null,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.SHOW_BUBBLE_TIPS,!0),z.pzaBattleDownView.getInstance.refreshSkipPartBtn(),window.pzaMapManager.showPauseBtn(),f.default.eventReport("\u7b2c\u4e00\u5173\u6559\u7a0b\u7ed3\u675f")},8e3);default:return void this.guideEnd()}if(this.guideType==l.pzaGuideType.GUIDE_NEW_PLANT_1_2)switch(this.guideStep){case 0:return this.autoHideTime=5,this.autoNextGuide=!0,void M.pzaTipManager.showGuideTip("\u80fd\u91cf\u7f50\u662f\u975e\u5e38\u91cd\u8981\u7684\u8d44\u6e90\u3002");case 1:return this.autoHideTime=5,this.autoNextGuide=!0,void M.pzaTipManager.showGuideTip("\u4f0a\u5179\u53ef\u4ee5\u5e2e\u52a9\u4f60\u6536\u96c6\u80fd\u91cf\u7f50\uff0c\u8bf7\u81f3\u5c11\u53ec\u55243\u6b21\u4f0a\u5179\u3002");case 2:return this.autoHideTime=5,void M.pzaTipManager.showGuideTip("\u53ec\u55243\u6b21\u4f0a\u5179\uff0c\u8fd9\u6837\u4f60\u624d\u6709\u66f4\u591a\u7684\n\u673a\u4f1a\u5728\u602a\u4eba\u7684\u653b\u52bf\u4e2d\u6d3b\u4e0b\u6765\u3002");default:return void this.guideEnd()}if(this.guideType==l.pzaGuideType.GUIDE_PROP_1_2)switch(this.guideStep){case 1:return void this.showGuideView([new l.pzaDialog("\u68c0\u6d4b\u5230\u5f02\u5e38\u80fd\u91cf\u6ce2\u52a8\uff01"),new l.pzaDialog("\u4e34\u65f6\u6388\u6743500\u5355\u4f4d\u80fd\u91cf\uff01",function(){_.pzaLocalData.obtainProp(E.pzaGamePropEnum.PROP_FREE_SUN,1,!1),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_REFRESH_PROP,null)}),new l.pzaDialog("\u9996\u6b21\u6fc0\u6d3b\u514d\u8d39")],e,cc.v2(74,304),function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.USE_GAME_PROP,E.pzaGamePropEnum.PROP_FREE_SUN),M.pzaTipManager.showGameTip("\u589e\u52a0\u4e86500\u70b9\u80fd\u91cf\u3002")});case 2:return void this.showGuideView([new l.pzaDialog("\u8bf7\u6fc0\u6d3b\u81ea\u52a8\u6536\u96c6\u534f\u8bae\uff01"),new l.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4e3a\u4f60\u81ea\u52a8\u62fe\u53d6\u80fd\u91cf\u3002",function(){_.pzaLocalData.obtainProp(E.pzaGamePropEnum.PROP_AUTO_PICK,1,!1),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_REFRESH_PROP,null)})],e,cc.v2(184,304),function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.USE_GAME_PROP,E.pzaGamePropEnum.PROP_AUTO_PICK);for(var e=0;e<5;e++)window.pzaplantManager.autoCreateSun()});case 3:return void this.showGuideView([new l.pzaDialog("\u7d27\u6025\u4e8b\u6001\uff01\u68c0\u6d4b\u5230\u5927\u6279\u602a\u4eba\u80fd\u91cf\u6ce2\u52a8\uff01"),new l.pzaDialog("\u63a8\u8350\u53ec\u5524\u65e0\u53cc\u9f99\uff01",function(){_.pzaLocalData.obtainProp(E.pzaGamePropEnum.PROP_CHERRY_BOMB,1,!1),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_REFRESH_PROP,null)})],e,cc.v2(293,304),function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.USE_GAME_PROP,E.pzaGamePropEnum.PROP_CHERRY_BOMB)});default:return void this.guideEnd()}if(this.guideType==l.pzaGuideType.FORCE_GUIDE_1_3)switch(this.guideStep){case 0:window.pzaMapManager.node.x=0,i([s.pzaPlantEnum.CHERRY_BOMB]),o(5,1),o(5,2),o(5,3),o(6,1),o(6,2),o(6,3),o(7,1),o(7,2),o(7,3),h.pzaGameState.guideZombiePause=!0,h.pzaGameState.pauseDropSunLight=!0,setTimeout(function(){t.guideStepNext()},1500);break;case 1:this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u7fa4\u4f53\u602a\u4eba\u5165\u4fb5\uff0c\u654c\u65b9\u6218\u529b\u8bc4\u4f30\uff1a\u8f83\u9ad8\u3002"),new l.pzaDialog("\u6700\u4f73\u5e94\u5bf9\u65b9\u6848\uff1a"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CHERRY_BOMB).name+"\u3002",null,l.pzaDaveAni.suggest_talk),new l.pzaDialog(P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CHERRY_BOMB).name+"\u53ef\u4ee5\u4e00\u6b21\u6027\u6d88\u706d3*3\u8303\u56f4\u5185\u7684\u6240\u6709\u602a\u4eba",null,l.pzaDaveAni.suggest_talk)],function(){M.pzaTipManager.showGameTip("\u4f7f\u7528\u9a91\u58eb\u5361\u724c\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CHERRY_BOMB).name,null,null,0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.FORCEGUIDE_CLICK,s.pzaPlantEnum.CHERRY_BOMB)});break;case 2:M.pzaTipManager.showGameTip("\u6e05\u9664\u4fee\u5361\u6218\u6597\u5458",null,null,0),h.pzaGameState.forceCreateXY={xIndex:6,yIndex:2},S.pzaGlobalMask.setToGroundBlock(6,2,0,5,0,10);break;case 3:M.pzaTipManager.hideGuideTip(),h.pzaGameState.forceCreateXY=null,S.pzaGlobalMask.hideMask(),setTimeout(function(){t.showGuideDialogView([new l.pzaDialog("\u5e72\u7684\u6f02\u4eae\uff0c\u8bf7\u793e\u957f\u60a8\u7ee7\u7eed\u524d\u8fdb\u5427\uff01")],function(){t.guideStepNext()})},2e3);break;case 4:this.guideType=null,h.pzaGameState.freePlantArr=[],T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.UPDATE_PLANT_PRICE,s.pzaPlantEnum.CHERRY_BOMB),h.pzaGameState.guideZombiePause=!1,h.pzaGameState.pauseDropSunLight=!1,this.guideEnd();break;default:return this.guideType=null,void this.guideEnd()}if(this.guideType==l.pzaGuideType.FORCE_GUIDE_1_4)switch(this.guideStep){case 0:var b=h.pzaGameState.map.getXInterval(5)/2|0;this.curZombieData=o(5,2,-b/2),this.curZombieData.hp=150,this.curPlantData=n(s.pzaPlantEnum.SUN_FLOWER,4,2,!1),this.curPlantData.hp=100,i([s.pzaPlantEnum.WALL_NUT],function(){v.pzaCommonMask.showMask()}),n(s.pzaPlantEnum.PEA_SHOOTER,1,2,!1),window.pzaMapManager.node.x=0,h.pzaGameState.guideBattle=!0,v.pzaCommonMask.showMask();break;case 1:h.pzaGameState.guideBattle=!1,h.pzaGameState.guideZombiePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),v.pzaCommonMask.hideMask(),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u5165\u4fb5"),new l.pzaDialog(P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.WALL_NUT).name+"\u53ef\u4ee5\u963b\u6321\u666e\u901a\u602a\u4eba\u7684\u8fdb\u653b\uff0c\u4fdd\u62a4\u540e\u6392\u7684\u9a91\u58eb",null,l.pzaDaveAni.suggest_talk)],function(){M.pzaTipManager.showGameTip("\u4f7f\u7528\u9a91\u58eb\u5361\u724c\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.WALL_NUT).name,null,null,0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.FORCEGUIDE_CLICK,s.pzaPlantEnum.WALL_NUT)});break;case 2:h.pzaGameState.forceCreateXY={xIndex:4,yIndex:2},S.pzaGlobalMask.setToGroundBlock(4,2,0,5,0,10);break;case 3:M.pzaTipManager.hideGuideTip(),S.pzaGlobalMask.hideMask(),h.pzaGameState.forceCreateXY=null,h.pzaGameState.guideBattle=!0,h.pzaGameState.guideZombiePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME);break;case 4:h.pzaGameState.guideBattle=!1,this.showGuideView([new l.pzaDialog("\u68c0\u6d4b\u5230\u66f4\u591a\u602a\u4eba\u5373\u5c06\u6765\u88ad\uff0c\u8bf7\u793e\u957f\u505a\u597d\u51c6\u5907\u3002")],function(){t.guideStepNext()});break;case 5:this.guideType=null,h.pzaGameState.freePlantArr=[],T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.UPDATE_PLANT_PRICE,s.pzaPlantEnum.WALL_NUT),this.guideEnd();break;default:return this.guideType=null,void this.guideEnd()}if(this.guideType==l.pzaGuideType.GUIDE_SHOVEL_1_5)switch(this.guideStep){case 0:return void this.showGuideDialogView([new l.pzaDialog("\u793e\u957f\uff0c\u7cfb\u7edf\u91cd\u542f\u5b8c\u6210\uff0c\u5f88\u9ad8\u5174\u518d\u6b21\u89c1\u5230\u60a8"),new l.pzaDialog("\u5f53\u524d\u4f5c\u6218\u6548\u7387\u8bc4\u4f30\uff1a92%\uff0c\u8868\u73b0\u4f18\u5f02"),new l.pzaDialog("\u6839\u636e\u534f\u8baeAX-01\uff0c\u4e3a\u60a8\u89e3\u9501\u7279\u522b\u5956\u52b1"),new l.pzaDialog("\u4f46\u9700\u8981\u5148\u5b8c\u6210\u6218\u573a\u6e05\u7406\u534f\u8bae"),new l.pzaDialog("\u5efa\u8bae\u4f7f\u7528\u7a7a\u767d\u5361\u724c\u56de\u6536\u4f5c\u6218\u5355\u4f4d"),new l.pzaDialog("\u70b9\u51fb\u53ec\u56de\u4e00\u4f4d\u9a91\u58eb\u6295\u5f71\uff01"),new l.pzaDialog("\u521d\u59cb\u5316\u6e05\u7406\u7a0b\u5e8f...")],e);case 1:return T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_CLICKSHOVEL,null),void M.pzaTipManager.showGuideTip("\u8bf7\u62ff\u8d77\u7a7a\u767d\u5361\u724c");case 2:return void M.pzaTipManager.showGuideTip("\u8f7b\u89e6\u9700\u8981\u53ec\u56de\u7684\u9a91\u58eb\u6295\u5f71");case 3:case 4:return void M.pzaTipManager.showGuideTip("\u8bf7\u7ee7\u7eed\u6e05\u7a7a\u573a\u4e0a\u6240\u6709\u9a91\u58eb\u6295\u5f71");case 5:return D.pzaOperationMgr.hideTips(),void setTimeout(function(){t.guideStepNext()},1500);case 6:return M.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new l.pzaDialog("\u6e05\u7406\u7a0b\u5e8f\u9a8c\u8bc1\u901a\u8fc7\uff01"),new l.pzaDialog("\u542f\u52a8\u7279\u522b\u8bad\u7ec3\u6a21\u5757\uff1a\u98d9\u901f\u51b2\u51fb.exe"),new l.pzaDialog("\u88c5\u5907\u5956\u52b1\u5361\u724c\u8fdb\u884c\u7279\u6b8a\u4f5c\u6218"),new l.pzaDialog("\u6218\u672f\u5206\u6790\uff1a\u649e\u51fb\u6548\u7387\u63d0\u5347300%"),new l.pzaDialog("\u8b66\u544a\uff1a\u68c0\u6d4b\u5230\u80be\u4e0a\u817a\u7d20\u6c34\u5e73\u4e0a\u5347"),new l.pzaDialog("\u8ba9\u6211\u4eec\u521b\u9020\u65b0\u7684\u901f\u5ea6\u8bb0\u5f55\u5427\uff01")],this.guideStepNext.bind(this),function(){window.pzaMapManager.showRedLine(3)});default:return window.pzaMapManager.showPauseBtn(),void this.guideEnd()}if(this.guideType==l.pzaGuideType.FORCE_GUIDE_1_6)switch(this.guideStep){case 0:h.pzaGameState.guideBattle=!0,this.showGuideDialogView([new l.pzaDialog(P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.POTATO_MINE).name+"\u90e8\u7f72\u540e\u9700\u8981\u4e00\u5b9a\u51c6\u5907\u65f6\u95f4\uff0c\u63d0\u524d\u5e03\u7f6e\u53ef\u4ee5\u6709\u6548\u9632\u5fa1\u602a\u4eba\u7684\u8fdb\u653b"),new l.pzaDialog("\u8bf7\u793e\u957f\u5c1d\u8bd5\u5e03\u7f6e\u4e00\u6b21"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.POTATO_MINE).name+"\u5427\uff01",null,l.pzaDaveAni.suggest_talk)],function(){M.pzaTipManager.showGameTip("\u4f7f\u7528\u9a91\u58eb\u5361\u724c\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.POTATO_MINE).name,null,null,0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.FORCEGUIDE_CLICK,s.pzaPlantEnum.POTATO_MINE)});break;case 1:M.pzaTipManager.showGameTip("\u5c06"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.POTATO_MINE).name+"\u90e8\u7f72\u5728\u8fd9\u91cc",null,null,0),h.pzaGameState.forceCreateXY={xIndex:2,yIndex:2},S.pzaGlobalMask.setToGroundBlock(2,2,0,5,0,10);break;case 2:M.pzaTipManager.hideGuideTip(),h.pzaGameState.forceCreateXY=null,S.pzaGlobalMask.hideMask(),o(6,2),setTimeout(function(){t.guideStepNext()},2500);break;case 3:h.pzaGameState.gamePause=!0,h.pzaGameState.guideBattle=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u68c0\u6d4b\u5230\u602a\u4eba\u5165\u4fb5\uff0c\u4e0d\u7528\u62c5\u5fc3"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.POTATO_MINE).name+"\u4f1a\u89e3\u51b3\u4ed6\u7684"),new l.pzaDialog("\u8bf7\u793e\u957f\u5c3d\u5feb\u6536\u96c6\u80fd\u91cf\uff0c\u4e3a\u63a5\u4e0b\u6765\u7684\u5165\u4fb5\u505a\u597d\u51c6\u5907",null,l.pzaDaveAni.require_talk_eye)],function(){t.guideStepNext()});break;case 4:h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),this.guideType=null,h.pzaGameState.freePlantArr=[],T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.UPDATE_PLANT_PRICE,s.pzaPlantEnum.POTATO_MINE),window.pzazombieManager.nextWaveTime=18,this.guideEnd(),M.pzaTipManager.showGameTip("\u8bf7\u793e\u957f\u53ec\u5524\u9a91\u58eb\u7ee7\u7eed\u6218\u6597\uff01",null,!1,3),z.pzaBattleDownView.getInstance.refreshSkipPartBtn();break;default:return}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_1_8)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u7737\u5c5e\u201d\u5165\u4fb5\uff0c\u5b83\u7684\u62a4\u7532\u9632\u5fa1\u6781\u9ad8\u3002"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CHOMPER).name+"\u201d\uff0c\u53ef\u4ee5\u51fb\u98de\u63a5\u8fd1\u7684\u602a\u4eba\uff0c\u8bf7\u5728\u201c\u7737\u5c5e\u201d\u524d\u65b9\u53ec\u5524\u3002\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.CHOMPER)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),g.pzaPlantSelectView.instance.playWeakGuideCardAct(),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_NINGHT_2_1){if(this.guideType==l.pzaGuideType.WEAK_GUIDE_2_1)switch(this.guideStep){case 0:T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,s.pzaPlantEnum.PUFF_SHROOM,5),M.pzaTipManager.showGuideTip("\u8bf7\u53ec\u5524\u5c3d\u53ef\u80fd\u591a\u7684\u6e38\u6d41\u4ed9\u62b5\u5fa1\u602a\u4eba\u5165\u4fb5\uff01",5),setTimeout(function(){t.guideStepNext()},5e3);break;case 1:D.pzaOperationMgr.hideTips(),this.guideEnd(),this.guideType=null,z.pzaBattleDownView.getInstance.refreshSkipPartBtn();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_CARD_SLOT_2_2){if(this.guideType==l.pzaGuideType.GUIDE_TRACK_2_3)switch(this.guideStep){case 0:return this.guideStep=0,void this.showGuideDialogView([new l.pzaDialog("\u6a21\u5757\u626b\u63cf\u4e2d\uff1a\u68c0\u6d4b\u5230\u7cfb\u7edf\u5df2\u89e3\u9501\u79fb\u52a8\u5e73\u53f0\u6a21\u5757")],this.guideStepNext.bind(this),function(){});case 1:return this.showDragGuide({x:4,y:2},{x:4,y:3}),void M.pzaTipManager.showGuideTip("\u53ea\u9700\u7528\u624b\u6307\u8f7b\u8f7b\u6ed1\u52a8\uff0c\u5373\u53ef\u63a7\u5236\u5e73\u53f0\u5728\u8f68\u9053\u4e0a\u79fb\u52a8\u54e6~");case 2:return M.pzaTipManager.hideGuideTip(),this.guideHand.stopAllActions(),this.guideHand.active=!1,void this.showGuideDialogView([new l.pzaDialog("\u793e\u957f\uff0c\u60a8\u505a\u7684\u975e\u5e38\u597d\uff01\u53ef\u4ee5\u5728\u7a7a\u7684\u9a91\u58eb\u5e73\u53f0\u4e0a\u653e\u7f6e\u9a91\u58eb\u6295\u5f71")],this.guideStepNext.bind(this),function(){});case 3:return this.guideType=null,void this.guideEnd();default:return this.guideType=null,h.pzaGameState.gamePause=!1,D.pzaOperationMgr.hideTips(),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLOSECLICK),void this.guideEnd()}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_2_3)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u730e\u6237\u5ea7\u661f\u5f92\u201d\u5165\u4fb5\uff0c\u5b83\u7684\u76fe\u724c\u53ef\u4ee5\u62b5\u6321\u6b63\u9762\u653b\u51fb\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c\u6218\u9a91\u201d\uff0c\u4ed6\u7684\u653b\u51fb\u53ef\u4ee5\u7a7f\u900f\u76fe\u724c\u5feb\u901f\u51fb\u8d25\u730e\u6237\u5ea7\u661f\u5f92\uff01",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.FUME_SHROOM)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_CARD_SLOT_2_4){if(this.guideType==l.pzaGuideType.FORCE_GUIDE_2_4)switch(this.guideStep){case 0:window.pzaMapManager.node.x=0,i([s.pzaPlantEnum.GRAVE_BUSTER]),h.pzaGameState.guideZombiePause=!0,h.pzaGameState.pauseDropSunLight=!0,window.pzaMapManager.createTomb(6,2,function(){window.pzaMapManager.TombSet.add("62")},!1),setTimeout(function(){t.guideStepNext()},1500);break;case 1:this.showGuideDialogView([new l.pzaDialog("\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.GRAVE_BUSTER).name+"\u51fb\u788e\u80fd\u91cf\u67f1\u7834\u574f\u4fee\u5361\u7ec4\u7ec7\u7684\u90e8\u7f72\uff01",null,l.pzaDaveAni.suggest_talk)],function(){M.pzaTipManager.showGameTip("\u4f7f\u7528\u9a91\u58eb\u5361\u724c\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.GRAVE_BUSTER).name,null,null,0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.FORCEGUIDE_CLICK,s.pzaPlantEnum.GRAVE_BUSTER)});break;case 2:M.pzaTipManager.showGameTip(P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.GRAVE_BUSTER).name+"\u53ef\u4ee5\u51fb\u788e\u80fd\u91cf\u67f1",null,null,0),h.pzaGameState.forceCreateXY={xIndex:6,yIndex:2},S.pzaGlobalMask.setToGroundBlock(6,2,0,5,0,10);break;case 3:M.pzaTipManager.hideGuideTip(),h.pzaGameState.forceCreateXY=null,S.pzaGlobalMask.hideMask();break;case 4:this.showGuideDialogView([new l.pzaDialog("\u51fb\u788e\u80fd\u91cf\u67f1\u53ef\u4ee5\u8ba9\u6211\u65b9\u6709\u66f4\u591a\u7684\u4f4d\u7f6e\u90e8\u7f72\u9a91\u58eb\u6295\u5f71\u3002"),new l.pzaDialog("\u8bf7\u793e\u957f\u5c3d\u53ef\u80fd\u51fb\u788e\u573a\u4e0a\u7684\u80fd\u91cf\u67f1\u5427\uff01")],function(){t.guideStepNext()});break;case 5:this.guideType=null,h.pzaGameState.freePlantArr=[],T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.UPDATE_PLANT_PRICE,s.pzaPlantEnum.GRAVE_BUSTER),h.pzaGameState.guideZombiePause=!1,h.pzaGameState.pauseDropSunLight=!1,this.guideEnd();break;default:return this.guideType=null,void this.guideEnd()}if(this.guideType!=l.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5)if(this.guideType!=l.pzaGuideType.GUIDE_CARD_SLOT_2_6){if(this.guideType==l.pzaGuideType.WEAK_GUIDE_2_6)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u94e0\u6b66\u8005\u201d\u5165\u4fb5\uff0c\u8fd9\u5bb6\u4f19\u8d85\u7ea7\u5389\u5bb3\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c\u514b\u6d1b\u8bfa\u65af\u201d\uff0c\u53ef\u4ee5\u63a7\u5236\u4ed6\u63a5\u89e6\u5230\u7684\u7b2c\u4e00\u4e2a\u602a\u4eba,\u8bf7\u5728\u201c\u94e0\u6b66\u8005\u201d\u524d\u65b9\u53ec\u5524\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.HYPNO_SHROOM)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_2_8)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u52d2\u5f17\u91cc\u5609\u6f0f\u6d1e\u4f53\u201d\u5165\u4fb5\uff0c\u5b83\u4f1a\u53ec\u5524\u968f\u884c\u7684\u6f0f\u6d1e\u4f53\u75c5\u6bd2\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.ICE_SHROOM).name+"\u201d\uff0c\u53ef\u4ee5\u51bb\u7ed3\u5168\u5c4f\u654c\u4eba\uff0c\u5e76\u4e14\u6253\u65ad\u201c\u52d2\u5f17\u91cc\u5609\u6f0f\u6d1e\u4f53\u201d\u7684\u53ec\u5524\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.ICE_SHROOM)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_POOL_3_1){if(this.guideType==l.pzaGuideType.WEAK_GUIDE_3_3)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u9ca8\u9c7c\u8d2a\u566c\u5f92\u201d\u5165\u4fb5\uff0c\u5b83\u79fb\u52a8\u65f6\u4f1a\u85cf\u5728\u6c34\u91cc\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.TANGLE_KELP).name+"\u201d\uff0c\u53ef\u4ee5\u653b\u51fb\u6c34\u4e2d\u7684\u602a\u4eba\uff0c\u8bf7\u5728\u9ca8\u9c7c\u8d2a\u566c\u5f92\u524d\u65b9\u53ec\u5524\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.TANGLE_KELP)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5){if(this.guideType==l.pzaGuideType.WEAK_GUIDE_3_6)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u201c\u5f02\u7c7b\u9a70\u9a91\u201d\u7684\u8fdb\u653b\uff0c\u5b83\u7684\u8f7d\u5177\u80fd\u79d2\u6740\u9047\u5230\u7684\u9a91\u58eb\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c\u5c16\u9489\u9677\u9631\u201d\uff0c\u53ef\u4ee5\u6467\u6bc1\u63a5\u89e6\u5230\u8f7d\u5177\uff0c\u8bf7\u793e\u957f\u5728\u201c\u5f02\u7c7b\u9a70\u9a91\u201d\u524d\u65b9\u53ec\u5524\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.SPIKEWEED)},l.pzaDaveAni.suggest_talk)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_3_8)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u6f5c\u6c34\u8247\u5408\u91d1\u517d\u201d\u7684\u8fdb\u653b\uff0c\u5b83\u53ef\u4ee5\u8df3\u8fc7\u4e00\u4e2a\u9a91\u58eb\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.TALL_NUT).name+"\u201d\uff0c\u5177\u6709\u5f3a\u5927\u7684\u9632\u5fa1\u80fd\u529b\uff0c\u53ef\u4ee5\u963b\u6b62\u201c\u6f5c\u6c34\u8247\u5408\u91d1\u517d\u201d\u7684\u524d\u8fdb\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.TALL_NUT)},l.pzaDaveAni.suggest_talk)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_4_1){if(this.guideType==l.pzaGuideType.FORCE_GUIDE_4_2)switch(this.guideStep){case 0:h.pzaGameState.guideBattle=!0,window.pzaMapManager.node.x=0,i([s.pzaPlantEnum.PLANTERN]),window.pzaMapManager.fogEnter(null,!0),this.showGuideDialogView([new l.pzaDialog("\u606d\u559c\u793e\u957f\u60a8\u83b7\u5f97\u4e86\u65b0\u7684\u9a91\u58eb\u5361\u724c\uff0c\u73b0\u5728\u4f60\u53ef\u4ee5\u53ec\u5524\u8718\u86db\u63d0\u706f\u6765\u9a71\u6563\u8ff7\u96fe\u4e86")],function(){M.pzaTipManager.showGameTip("\u4f7f\u7528\u9a91\u58eb\u5361\u724c\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.PLANTERN).name,null,null,0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.FORCEGUIDE_CLICK,s.pzaPlantEnum.PLANTERN)});break;case 1:M.pzaTipManager.showGameTip(P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.PLANTERN).name+"\u53ef\u4ee5\u9a71\u6563\u8ff7\u96fe",null,null,0),h.pzaGameState.forceCreateXY={xIndex:4,yIndex:4},S.pzaGlobalMask.setToGroundBlock(4,4);break;case 2:M.pzaTipManager.hideGuideTip(),h.pzaGameState.forceCreateXY=null,S.pzaGlobalMask.hideMask(),this.showGuideDialogView([new l.pzaDialog("\u5e72\u7684\u6f02\u4eae\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u6e05\u602a\u4eba\u5165\u4fb5\u7684\u8def\u7ebf\u4e86\u3002"),new l.pzaDialog("\u8bf7\u793e\u957f\u7ee7\u7eed\u51fb\u9000\u5373\u5c06\u6765\u88ad\u7684\u602a\u4eba\u3002")],function(){t.guideStepNext()});break;case 3:h.pzaGameState.guideBattle=!1,this.guideType=null,h.pzaGameState.freePlantArr=[],T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.UPDATE_PLANT_PRICE,s.pzaPlantEnum.PLANTERN),this.guideEnd();break;default:return this.guideType=null,void this.guideEnd()}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_4_3)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u201c\u6b27\u5c3c\u79d1\u9b54\u673a\u201d\u4ece\u5929\u4e0a\u8fdb\u653b\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.BLOVER).name+"\u201d\uff0c\u53ef\u4ee5\u5439\u98de\u5929\u4e0a\u7684\u602a\u4eba\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.BLOVER)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips(),g.pzaPlantSelectView.instance.playWeakGuideCardAct();break;default:return}if(this.guideType==l.pzaGuideType.GUIDE_BANG_JAR_4_5)switch(this.guideStep){case 0:return void this.showGuideDialogView([new l.pzaDialog("\u52a0\u8f7d\u8bad\u7ec3\u6a21\u62df\u7a0b\u5e8f\uff1a\u7f50\u5b50\u7834\u574f\u6d4b\u8bd5"),new l.pzaDialog("\u5386\u53f2\u8bb0\u5f55\u4fdd\u6301\u8005\uff1a\u7a7a\u6211\u524d\u8f88"),new l.pzaDialog("\u5f53\u524d\u7834\u62c6\u6548\u7387\uff1a120%\u9884\u671f\u503c")],e);case 1:return void M.pzaTipManager.showGuideTip("\u793e\u957f\uff01\u70b9\u51fb\u4e00\u4e2a\u7f50\u5b50\uff0c\u770b\u770b\u91cc\u9762\u6709\u4ec0\u4e48\u5427");case 2:return void this.guideEnd();case 3:return M.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new l.pzaDialog("\u793e\u957f!\u60a8\u505a\u7684\u592a\u597d\u4e86\uff0c\u5b8c\u7f8e\u5b8c\u6210\u76ee\u6807!"),new l.pzaDialog("\u6ce8\u610f\u63a7\u5236\u8282\u594f\uff0c\u793e\u957f\uff01\u60a8\u4e5f\u4e0d\u60f3\u7a81\u7136\u5192\u51fa\u4e00\u5927\u5806\u602a\u4eba\u5427\uff01"),new l.pzaDialog("\u4efb\u52a1\u76ee\u6807\uff1a\u6467\u6bc1\u5168\u90e8\u7f50\u5b50\u548c\u602a\u4eba\uff01")],e);case 4:return void this.showGuideDialogView([new l.pzaDialog("\u8bad\u7ec3\u8bc4\u4f30\uff1a\u5b8c\u7f8e\u8fbe\u6210\uff01"),new l.pzaDialog("\u8981\u6311\u6218\u66f4\u96be\u7684\u2019\u5730\u72f1\u7f50\u5b50\u6a21\u5f0f\u2019\u5417"),new l.pzaDialog("\u6700\u7ec8\u9636\u6bb5\u51c6\u5907\u5b8c\u6210")],e);default:return void this.guideEnd()}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_4_6)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u9f9f\u5c0a\u8005-\u9646\u9f9f\u5c5e\xb7\u9646\u751f\u201d\uff0c\u5b83\u80fd\u94bb\u5230\u6218\u573a\u540e\u65b9\u53d1\u8d77\u8fdb\u653b\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.SPLIT_PEA).name+"\u201d\uff0c\u53ef\u4ee5\u540c\u65f6\u653b\u51fb\u4e24\u4e2a\u65b9\u5411\u7684\u602a\u4eba\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.SPLIT_PEA)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType==l.pzaGuideType.WEAK_GUIDE_4_8)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u8757\u866b\xb7\u4ea1\u547d\u5f92\u201d\uff0c\u5b83\u80fd\u8df3\u8fc7\u6240\u6709\u9a91\u58eb\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.MAGNET_SHROOM).name+"\uff0c\u8bf7\u5728\u201c\u8757\u866b\xb7\u4ea1\u547d\u5f92\u201d\u9644\u8fd1\u53ec\u5524\uff0c\u53ef\u4ee5\u5265\u593a\u5b83\u7684\u8df3\u8dc3\u80fd\u529b\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.MAGNET_SHROOM)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_NINGHT_4_10){if(this.guideType==l.pzaGuideType.FORCE_GUIDE_5_1)switch(this.guideStep){case 0:i([s.pzaPlantEnum.CABBAGE_PULT]),n(s.pzaPlantEnum.PEA_SHOOTER,3,2,!1),this.curZombieData=o(7,2),this.curZombieData.hp=100,window.pzaMapManager.node.x=0,h.pzaGameState.guideBattle=!0,v.pzaCommonMask.showMask(),setTimeout(function(){t.guideStepNext()},2e3);break;case 1:h.pzaGameState.guideBattle=!0,h.pzaGameState.guideZombiePause=!0,v.pzaCommonMask.hideMask(),this.showGuideDialogView([new l.pzaDialog("\u68c0\u6d4b\u5230\u5730\u5f62\u53d1\u751f\u53d8\u5316\u3002"),new l.pzaDialog("\u8bf7\u53ec\u5524\u629b\u63b7\u7c7b\u9a91\u58eb\u3002"),new l.pzaDialog("\u6b63\u5728\u5206\u6790\u7834\u89e3\u65b9\u6848...",null,l.pzaDaveAni.think_talk),new l.pzaDialog("\u7531\u4e8e\u5f53\u524d\u5730\u5f62\u53d1\u751f\u6539\u53d8\uff0c"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CABBAGE_PULT).name+"\u5339\u914d\u5ea6\u6781\u9ad8\uff0c\u5efa\u8bae\u793e\u957f\u53ec\u5524\u3002",null,l.pzaDaveAni.suggest_talk)],function(){M.pzaTipManager.showGameTip("\u4f7f\u7528\u9a91\u58eb\u5361\u724c\u53ec\u5524"+P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CABBAGE_PULT).name,null,null,0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.FORCEGUIDE_CLICK,s.pzaPlantEnum.CABBAGE_PULT)});break;case 2:M.pzaTipManager.showGameTip(P.pzaGameConfig.getPlantConfig(s.pzaPlantEnum.CABBAGE_PULT).name+"\u53ef\u4ee5\u65e0\u89c6\u5730\u5f62\u9650\u5236\u653b\u51fb\u602a\u4eba",null,null,0),h.pzaGameState.forceCreateXY={xIndex:2,yIndex:2},S.pzaGlobalMask.setToGroundBlock(2,2,7,-10);break;case 3:M.pzaTipManager.hideGuideTip(),S.pzaGlobalMask.hideMask(),h.pzaGameState.forceCreateXY=null,h.pzaGameState.guideZombiePause=!1;break;case 4:h.pzaGameState.guideBattle=!1,this.showGuideDialogView([new l.pzaDialog("\u68c0\u6d4b\u5230\u66f4\u591a\u602a\u4eba\u5373\u5c06\u6765\u88ad\uff0c\u8bf7\u793e\u957f\u505a\u597d\u51c6\u5907\uff01",null,l.pzaDaveAni.require_talk_eye)],function(){t.guideStepNext()});break;case 5:this.guideType=null,h.pzaGameState.freePlantArr=[],T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.UPDATE_PLANT_PRICE,s.pzaPlantEnum.CABBAGE_PULT),this.guideEnd();break;default:return this.guideType=null,void this.guideEnd()}if(this.guideType==l.pzaGuideType.GUIDE_5_2)return window.pzaplantManager.createPlant(s.pzaPlantEnum.SUN_FLOWER,2,2,!0),void this.showGuideDialogView([new l.pzaDialog("\u8b66\u62a5\uff01\u76d1\u6d4b\u5230\u654c\u65b9\u5f02\u5e38\u80fd\u91cf\u6ce2\u52a8 ",null,l.pzaDaveAni.require_talk_eye),new l.pzaDialog("\u654c\u4eba\u5c06\u4f1a\u53ec\u5524\u9b54\u98ce\u51bb\u7ed3\u4f60\u7684\u9a91\u58eb\u6295\u5f71",function(){var e,a;v.pzaCommonMask.showMask(!1);var t=window.pzaplantManager.getAllPlant(s.pzaPlantEnum.SUN_FLOWER);try{for(var o=r(t),n=o.next();!n.done;n=o.next()){var i=n.value;window.pzaplantManager.getPlantByData(i).onFrozen(99999)}}catch(p){e={error:p}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}d.pzaEffectManager.createEffect(m.pzaResourceUrl.COLDWIND_EFFECT,cc.v2()),setTimeout(function(){v.pzaCommonMask.hideMask()},2e3)}),new l.pzaDialog("\u5206\u6790\u4e2d...\u9002\u5e94\u7cfb\u7edf\u4ee5\u542f\u52a8...",null,l.pzaDaveAni.think_talk),new l.pzaDialog("\u5efa\u8bae\u60a8\u5728\u6709\u706b\u7130\u9b54\u9f99\u6cd5\u9635\u7684\u5730\u5757\u53ec\u5524\u9a91\u58eb\u6295\u5f71\uff0c\u4ee5\u6d88\u9664\u9b54\u98ce\u51bb\u7ed3\u7684\u5f71\u54cd",function(){var e,a;n(s.pzaPlantEnum.FLOWER_POT,2,2,!1),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,s.pzaPlantEnum.FLOWER_POT,!0),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.CLEAR_FROZENEFFECT,null);var t=window.pzaplantManager.getAllPlant(s.pzaPlantEnum.SUN_FLOWER);try{for(var o=r(t),i=o.next();!i.done;i=o.next()){var l=i.value,c=window.pzaplantManager.getPlantByData(l);l.buffData.removeBuff(p.pzaBuffType.FROZEN),c.unFrozen()}}catch(u){e={error:u}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}},l.pzaDaveAni.suggest_talk)],function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_TIPS,s.pzaPlantEnum.FLOWER_POT,!1),e()},null,null);if(this.guideType!=l.pzaGuideType.GUIDE_5_5){if(this.guideType==l.pzaGuideType.WEAK_GUIDE_5_6)switch(this.guideStep){case 0:h.pzaGameState.ExtraCardFreeCount=3,v.pzaCommonMask.showMask(),h.pzaGameState.gamePause=!0,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_PAUSE),this.showGuideDialogView([new l.pzaDialog("\u4fa6\u6d4b\u5230\u602a\u4eba\u201c\u5929\u9f99\u5ea7\u201d\uff0c\u5b83\u6295\u51fa\u7684\u5b50\u5f39\u80fd\u76f4\u63a5\u4f24\u5bb3\u540e\u6392\u9a91\u58eb\uff01"),new l.pzaDialog("\u5df2\u6388\u6743\u83b7\u5f97\u7279\u6b8a\u652f\u63f4\u5361\u724c\u201c\u62a4\u76fe\u53d1\u751f\u88c5\u7f6e\u201d\uff0c\u8bf7\u5728\u540e\u65b9\u9a91\u58eb\u8eab\u4e0a\u53ec\u5524\uff0c\u53ef\u4ee5\u4fdd\u62a4\u9a91\u58eb\u514d\u53d7\u653b\u51fb\u3002",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,s.pzaPlantEnum.UMBRELLA_LEAF)},l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()}),setTimeout(function(){D.pzaOperationMgr.hideTips(),v.pzaCommonMask.hideMask()},500);break;case 1:g.pzaPlantSelectView.instance.playWeakGuideCardAct(),h.pzaGameState.gamePause=!1,T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME),D.pzaOperationMgr.hideTips();break;default:return}if(this.guideType!=l.pzaGuideType.GUIDE_BOSS_5_10)if(this.guideType!=l.pzaGuideType.GUIDE_6_1)if(this.guideType==l.pzaGuideType.GUIDE_6_5&&e&&e(),this.guideType!=l.pzaGuideType.GUIDE_10_5)if(this.guideType!=l.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1)if(this.guideType!=l.pzaGuideType.GUIDE_VASE){if(this.guideType==l.pzaGuideType.RIDER_BELTEQUIP_GUIDE)switch(this.guideStep){case 0:this.showGuideDialogView([new l.pzaDialog("\u606d\u559c\u60a8\u53d1\u73b0\u4e86\u9a91\u58eb\u8170\u5e26\u6536\u85cf\u54c1\uff0c\u5df2\u4e3a\u60a8\u89e3\u9501\u9a91\u58eb\u6bbf\u5802\u6a21\u5757"),new l.pzaDialog("\u9a91\u58eb\u8170\u5e26\u53ef\u4ee5\u5e2e\u52a9\u60a8\u83b7\u5f97\u5404\u79cd\u589e\u76ca\u6548\u679c"),new l.pzaDialog("\u8bf7\u88c5\u5907\u4e0a\u4f60\u7684\u9a91\u58eb\u8170\u5e26\uff0c\u7ee7\u7eed\u524d\u8fdb\u5427",null,l.pzaDaveAni.suggest_talk_eye)],function(){t.guideStepNext()},null,null,!1,!0);break;case 1:T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.BELTEQUIP_GUIDE_START);break;case 2:M.pzaTipManager.showHomeTip("\u589e\u76ca\u6548\u679c\u5df2\u6fc0\u6d3b\uff0c\u5f53\u60a8\u6536\u96c6\u5230\u66f4\u591a\u7684\u9a91\u58eb\u8170\u5e26\u65f6\u518d\u56de\u6765\u5427",null,3),this.guideEnd();break;default:return}}else this.showGuideDialogView([new l.pzaDialog("\u6b22\u8fce\u6765\u5230\u661f\u8fb0\u8bd5\u70bc\uff01"),new l.pzaDialog("\u8fd9\u91cc\u7684\u5173\u5361\u90fd\u5145\u6ee1\u6311\u6218\u3002"),new l.pzaDialog("\u52a0\u6cb9\u5427\u793e\u957f\uff01")],e,null,null);else this.showGuideDialogView([new l.pzaDialog("\u6b22\u8fce\u6765\u5230\u5165\u4fb5\u6a21\u5f0f\uff01"),new l.pzaDialog("\u8fd9\u91cc\u53ef\u4ee5\u626e\u6f14\u602a\u4eba\uff0c\u6a21\u62df\u6218\u6597\u573a\u666f\u3002"),new l.pzaDialog("\u6a21\u62df\u6218\u6597\u53ef\u4ee5\u8ba9\u60a8\u66f4\u52a0\u4e86\u89e3\u602a\u4eba\u7684\u7279\u6027\u548c\u5f31\u70b9\u3002"),new l.pzaDialog("\u52a0\u6cb9\u5427\u793e\u957f\uff01")],e,null,null);else e&&e();else this.showGuideDialogView([new l.pzaDialog("\u8b66\u62a5\uff01\u68c0\u6d4b\u5230\u6301\u7eed\u6027\u7684\u602a\u4eba\u5165\u4fb5\u6ce2\u6b21"),new l.pzaDialog("\u6b63\u5728\u6267\u884c\u5f3a\u5236\u6218\u672f\u5355\u4f4d\u7b5b\u9009\u534f\u8bae..."),new l.pzaDialog("\u793e\u957f\uff0c\u8bf7\u786e\u8ba4\u6700\u7ec8\u4f5c\u6218\u65b9\u6848"),new l.pzaDialog("\u9884\u6d4b\u80dc\u7387\uff1a87.6%")],e);else this.showGuideDialogView([new l.pzaDialog("\u786e\u8ba4\u76ee\u6807\uff1a\u8d85\u7ea7\u5927\u4fee\u5361"),new l.pzaDialog("\u6218\u6597\u51c6\u5907\u7b49\u7ea7\uff1aMAX"),new l.pzaDialog("\u5f31\u70b9\u5206\u6790\u4e2d...\u9519\u8bef404",null,l.pzaDaveAni.think_talk),new l.pzaDialog("\u5907\u7528\u65b9\u6848\uff1a\u9971\u548c\u8f70\u70b8"),new l.pzaDialog("\u66f4\u6b63\uff1a\u8179\u90e8\u88c5\u7532\u6700\u8584\u5904"),new l.pzaDialog("\u6570\u636e\u51b2\u7a81...\u91cd\u65b0\u626b\u63cf...",null,l.pzaDaveAni.think_talk_eye)],e,null,null,!0)}else this.showGuideDialogView([new l.pzaDialog("\u7279\u522b\u8b66\u544a\uff1a\u8718\u86db\u519b\u56e2\u6765\u88ad"),new l.pzaDialog("\u672c\u673a\u60c5\u611f\u6a21\u5757\u4ea7\u751f\u5f3a\u70c8\u6392\u65a5\u53cd\u5e94"),new l.pzaDialog("\u91cd\u590d\uff1a\u6781\u5ea6\u5371\u9669\uff01\u6781\u5ea6\u5371\u9669\uff01"),new l.pzaDialog("\u8bf7\u60a8\u505a\u597d\u6218\u6597\u51c6\u5907\uff01\u793e\u957f\uff01")],e,null,null)}else this.showGuideDialogView([new l.pzaDialog("\u8b66\u544a\uff01\u73af\u5883\u5149\u91cf\u9aa4\u964d97%\uff1f"),new l.pzaDialog("\u68c0\u6d4b\u5230\u5927\u91cf\u602a\u4eba\u4fe1\u53f7\uff1f"),new l.pzaDialog("\u751f\u5b58\u6982\u7387\u8ba1\u7b97\u4e2d...68.3%")],e)}else this.showGuideDialogView([new l.pzaDialog("\u68c0\u6d4b\u5230\u5df2\u8fdb\u5165\u8ff7\u96fe\u5c9b\u5c7f"),new l.pzaDialog("\u8ff7\u96fe\u4f1a\u906e\u6321\u602a\u4eba\u7684\u8eab\u5f71"),new l.pzaDialog("\u5efa\u8bae\u5728\u5148\u5728\u8ff7\u96fe\u5916\u56f4\u53ec\u5524\u9a91\u58eb\u6295\u5f71\u5efa\u7acb\u9632\u5fa1",function(){t.guideType=null},l.pzaDaveAni.suggest_talk)],e)}else this.showGuideDialogView([new l.pzaDialog("\u53d1\u73b0\u5fae\u578b\u602a\u4eba\u96c6\u7fa4\uff01"),new l.pzaDialog("\u7279\u522b\u63d0\u9192\uff1a\u5fae\u578b\u602a\u4eba\u8840\u91cf\u51cf\u5c11\u7684\u540c\u65f6\u901f\u5ea6\u4f1a\u52a0\u5feb"),new l.pzaDialog("\u53ec\u5524\u9a91\u58eb\u6295\u5f71\u51fb\u9000\u4ed6\u4eec\u5427\uff01",null,l.pzaDaveAni.require_talk)],e)}else this.showGuideDialogView([new l.pzaDialog("\u68c0\u6d4b\u5230\u6211\u65b9\u7cfb\u7edf\u6536\u5230\u5e72\u6270"),new l.pzaDialog("\u90e8\u5206\u9a91\u58eb\u6295\u5f71\u5df2\u88ab\u5f3a\u5236\u5c01\u5370\uff0c\u60a8\u53ef\u4ee5\u5728\u9009\u5361\u9875\u9762\u67e5\u770b\u88ab\u5c01\u5370\u7684\u9a91\u58eb\u5361\u7247"),new l.pzaDialog("\u88ab\u5c01\u5370\u7684\u9a91\u58eb\u6295\u5f71\u53ec\u5524\u540e\u5c06\u65e0\u6cd5\u6b63\u5e38\u6d3b\u52a8"),new l.pzaDialog("\u6b63\u5728\u5206\u6790\u7834\u89e3\u65b9\u6848...",null,l.pzaDaveAni.think_talk)],e)}else this.showGuideSelectDialog([new l.pzaDialog("\u793e\u957f\u8bf7\u6ce8\u610f\uff01\u8d2d\u4e70\u6269\u5c55\u534f\u8bae\u5c06\u82b1\u8d39\u60a85000\u9a91\u58eb\u5e01\uff0c\u4f46\u662f\u4e4b\u540e\u6bcf\u5173\u90fd\u53ef\u4ee5\u643a\u5e268\u4e3a\u9a91\u58eb\u6218\u6597\u3002"),new l.pzaDialog("\u63a8\u8350\u9a91\u58eb\u5e01\u5b58\u91cf\u5230\u8fbe5000\uff04\u65f6\u8d2d\u4e70\u6269\u5c55\u534f\u8bae\uff1f",null,l.pzaDaveAni.suggest_talk)],"$5000","\u9ad8\u7ea7\u5347\u7ea7\u9884\u6d4b\uff1a8\u69fd\u4f4d\u529f\u80fd\u53ef\u6fc0\u6d3b",function(){_.pzaLocalData.costCoin(5e3),_.pzaLocalData.data.plantSlotCount=8,_.pzaLocalData.addDirty("coin","plantSlotCount")},[new l.pzaDialog("\u6a21\u5757\u5347\u7ea7\u4e2d...\u5347\u7ea7\u6210\u529f\uff01")],null,[new l.pzaDialog("\u62d3\u5c55\u534f\u8bae\u4e5f\u53ef\u4ee5\u540e\u7eed\u8d2d\u4e70")],e);else this.showGuideDialogView([new l.pzaDialog("\u6536\u85cf\u5ba4\u8bbf\u95ee\u65e5\u5fd7\u5df2\u4fdd\u5b58"),new l.pzaDialog("\u793e\u957f\uff01\u60a8\u4efb\u4f55\u65f6\u5019\u90fd\u53ef\u4ee5\u4ece\u4e3b\u83dc\u5355\u8fdb\u5165\u6536\u85cf\u5ba4\u3002"),new l.pzaDialog("\u4f46\u4e0d\u662f\u73b0\u5728\uff01\u5f53\u524d\u4f18\u5148\u4e8b\u9879\uff1a\u57ce\u5e02\u9632\u5fa1\u3002"),new l.pzaDialog("\u68c0\u6d4b\u5230\u602a\u4eba\u6d3b\u52a8"),new l.pzaDialog("\u542f\u52a8\u5bb3\u866b\u6e05\u9664\u7a0b\u5e8f"),new l.pzaDialog("\u6700\u4f73\u88c5\u5907\uff1a\u5361\u63a7\u7834\u574f\u5668"),new l.pzaDialog("\u8fde\u7eed\u51fb\u6253\u673a\u5236\u5df2\u6fc0\u6d3b")],function(){e&&e(),M.pzaTipManager.showGameTip("\u70b9\u51fb\u5c4f\u5e55\u4e0a\u7684\u5165\u4fb5\u602a\u4eba\uff0c\u6d88\u706d\u4ed6\u4eec\u5427\uff01",null,null,2.5)},null,function(){window.pzaMapManager.initMapTomb(h.pzaGameState.curChapter,h.pzaGameState.curPart,null)})}else this.showGuideSelectDialog([new l.pzaDialog("\u6a21\u5757\u626b\u63cf\u4e2d\uff1a\u7cfb\u7edf\u6269\u5c55\u534f\u8bae\u4ee5\u5f00\u653e\uff1f"),new l.pzaDialog("\u793e\u957f\u8bf7\u6ce8\u610f\uff01\u8d2d\u4e70\u6269\u5c55\u534f\u8bae\u5c06\u82b1\u8d39\u60a8750\u9a91\u58eb\u5e01\uff0c\u4f46\u662f\u4e4b\u540e\u6bcf\u5173\u90fd\u53ef\u4ee5\u643a\u5e267\u4f4d\u9a91\u58eb\u6218\u6597\u3002"),new l.pzaDialog("\u8bf7\u786e\u8ba4\u662f\u5426\u82b1\u8d39750\u9a91\u58eb\u5e01\u5347\u7ea7\u52307\u4e2a\u5361\u724c\u69fd\uff1f")],"$750","\u5347\u7ea7\u52307\n\u4e2a\u5361\u724c\u69fd\uff1f",function(){_.pzaLocalData.costCoin(750),_.pzaLocalData.data.plantSlotCount=7,_.pzaLocalData.addDirty("coin","plantSlotCount")},[new l.pzaDialog("\u5f53\u60a8\u62e5\u67095000\u9a91\u58eb\u5e01\u65f6\uff0c\u6211\u5c06\u4e3a\u60a8\u5347\u7ea7\u52308\u4e2a\u5361\u724c\u69fd\uff01")],null,[new l.pzaDialog("\u62d3\u5c55\u534f\u8bae\u4e5f\u53ef\u4ee5\u540e\u7eed\u8d2d\u4e70")],e)}else this.showGuideDialogView([new l.pzaDialog("\u5f53\u524d\u9a91\u58eb\u5e01\u5b58\u91cf\uff1a\uff04"+_.pzaLocalData.data.coin),new l.pzaDialog("\u63a8\u8350\u9a91\u58eb\u5e01\u5b58\u91cf\u5230\u8fbe750\uff04\u65f6\u8d2d\u4e70\u6269\u5c55\u534f\u8bae")],e)}else this.showGuideDialogView([new l.pzaDialog("\u5207\u6362\u81f3\u6708\u5149\u4f5c\u6218\u6a21\u5f0f"),new l.pzaDialog("\u8b66\u62a5\uff1a\u5149\u4f0f\u5145\u7535\u7cfb\u7edf\u79bb\u7ebf"),new l.pzaDialog("\u6708\u5149\u4f5c\u6218\u6a21\u5f0f\u4e0b,\u65e0\u6cd5\u83b7\u53d6\u81ea\u7136\u80fd\u91cf\u3002"),new l.pzaDialog("\u4f46\u4f60\u4ecd\u53ef\u4ee5\u901a\u8fc7\u4f0a\u5179\u83b7\u5f97\u80fd\u91cf\u3002",null,l.pzaDaveAni.require_talk),new l.pzaDialog("\u68c0\u6d4b\u5230\u6e38\u6d41\u4ed9\u5361\u724c\u73af\u5883\u9002\u914d\u5ea6100%"),new l.pzaDialog("\u5df2\u81ea\u52a8\u4e3a\u60a8\u9009\u62e9\u6e38\u6d41\u4ed9\u5361\u724c")],e)},a.prototype.guideShowSpeedBtn=function(e){this.showGuideView([new l.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4f1a\u8ba9\u4f60\u7684\u6e38\u620f\u901f\u5ea6\u52a0\u5feb\uff01",function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_SHOW_SPEED,null)})],e,cc.v2(390,320),function(){T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GUIDE_USE_SPEED,null)})},a.prototype.guideShowNeedMoreSun=function(){this.autoHideTime=5,this.triggerExtraGuide=!0,M.pzaTipManager.showGuideTip("\u4f60\u9700\u8981\u66f4\u591a\u7684\u4f0a\u5179\n\u8fd9\u6837\u4f60\u624d\u80fd\u66f4\u5feb\u7684\u53ec\u5524\u9a91\u58eb\uff01")},a.prototype.guideEnd=function(){this.hideGuide(),this.guideEndCall&&this.guideEndCall(),window.pzaMapManager.showPauseBtn()},a.prototype.hideGuide=function(){this.guidePlant=null,M.pzaTipManager.hideGuideTip()},a.prototype.showGuideDialogView=function(e,a,t,o,n,i){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=!1),void 0===i&&(i=!1),w.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.GUIDE_DIALOG_VIEW,function(r){var p=r&&r.getComponent(b.pzaGuideDialogView);p.showDialog(e,a,t,o,n),p.setBlackBG(i)})},a.prototype.showGuideSelectDialog=function(e,a,t,o,n,i,r,p,l){void 0===l&&(l=null),w.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.GUIDE_DIALOG_VIEW,function(s){(s&&s.getComponent(b.pzaGuideDialogView)).showSelectDialog(e,a,t,o,n,i,r,p,l)})},a.prototype.showGuideView=function(e,a,t,o){void 0===t&&(t=null),void 0===o&&(o=null),w.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.GUIDE_VIEW,function(n){(n&&n.getComponent(y.pzaGuideView)).showGuide(e,a,t,o)})},a.prototype.showDragGuide=function(e,a){var t=this;this.guideHand.active=!0;var o=h.pzaGameState.map.getXInterval(e.x)/2,n=h.pzaGameState.map.getYInterval(e.y)/3;h.pzaGameState.isRoofMode()&&(n=h.pzaGameState.map.getYInterval(e.y)/6);var i=h.pzaGameState.map.getBlockLogicPos(e.x,e.y,o,n),r=h.pzaGameState.map.getXInterval(a.x)/2,p=h.pzaGameState.map.getYInterval(a.y)/3;h.pzaGameState.isRoofMode()&&(p=h.pzaGameState.map.getYInterval(a.y)/6);var l=h.pzaGameState.map.getBlockLogicPos(a.x,a.y,r,p);this.guideHand.stopAllActions(),this.guideHand.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){t.guideHand.opacity=0,t.guideHand.setPosition(i)}),cc.fadeTo(.3,255),cc.delayTime(.2),cc.moveTo(.5,l),cc.delayTime(.2),cc.fadeTo(.3,0)))).clone()},a.prototype.checkGuideStart=function(e,a){var t=this;if(void 0===a&&(a=!0),!1===h.pzaGameState.isMainMode())return null;var o=function(){return 10*_.pzaLocalData.data.curChapter+_.pzaLocalData.data.curPart>10*h.pzaGameState.curChapter+h.pzaGameState.curPart},n=function(){t.guideStep=0,t.guideShow()};return e==l.pzaGuideType.FORCE_GUIDE_1_6&&!1===o()&&1==h.pzaGameState.curChapter&&6==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.FORCE_GUIDE_1_6,a&&(window.pzaMapManager.hidePauseBtn(),n()),l.pzaGuideType.FORCE_GUIDE_1_6):e==l.pzaGuideType.WEAK_GUIDE_1_8&&!1===o()&&1==h.pzaGameState.curChapter&&8==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_1_8,a&&n(),l.pzaGuideType.WEAK_GUIDE_1_8):e==l.pzaGuideType.WEAK_GUIDE_2_1&&!1===o()&&2==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_2_1,a&&n(),l.pzaGuideType.WEAK_GUIDE_2_1):e==l.pzaGuideType.WEAK_GUIDE_2_3&&!1===o()&&2==h.pzaGameState.curChapter&&3==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_2_3,a&&n(),l.pzaGuideType.WEAK_GUIDE_2_3):e==l.pzaGuideType.WEAK_GUIDE_2_6&&!1===o()&&2==h.pzaGameState.curChapter&&6==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_2_6,a&&n(),l.pzaGuideType.WEAK_GUIDE_2_6):e==l.pzaGuideType.WEAK_GUIDE_2_8&&!1===o()&&2==h.pzaGameState.curChapter&&8==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_2_8,a&&n(),l.pzaGuideType.WEAK_GUIDE_2_8):e==l.pzaGuideType.WEAK_GUIDE_3_3&&!1===o()&&3==h.pzaGameState.curChapter&&3==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_3_3,a&&n(),l.pzaGuideType.WEAK_GUIDE_3_3):e==l.pzaGuideType.WEAK_GUIDE_3_6&&!1===o()&&3==h.pzaGameState.curChapter&&6==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_3_6,a&&n(),l.pzaGuideType.WEAK_GUIDE_3_6):e==l.pzaGuideType.WEAK_GUIDE_3_8&&!1===o()&&3==h.pzaGameState.curChapter&&8==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_3_8,a&&n(),l.pzaGuideType.WEAK_GUIDE_3_8):e==l.pzaGuideType.FORCE_GUIDE_4_2&&!1===o()&&4==h.pzaGameState.curChapter&&2==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.FORCE_GUIDE_4_2,a&&n(),l.pzaGuideType.FORCE_GUIDE_4_2):e==l.pzaGuideType.WEAK_GUIDE_4_3&&!1===o()&&4==h.pzaGameState.curChapter&&3==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_4_3,a&&n(),l.pzaGuideType.WEAK_GUIDE_4_3):e==l.pzaGuideType.WEAK_GUIDE_4_6&&!1===o()&&4==h.pzaGameState.curChapter&&6==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_4_6,a&&n(),l.pzaGuideType.WEAK_GUIDE_4_6):e==l.pzaGuideType.WEAK_GUIDE_4_8&&!1===o()&&4==h.pzaGameState.curChapter&&8==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_4_8,a&&n(),l.pzaGuideType.WEAK_GUIDE_4_8):e==l.pzaGuideType.WEAK_GUIDE_5_6&&!1===o()&&5==h.pzaGameState.curChapter&&6==h.pzaGameState.curPart?(this.guideType=l.pzaGuideType.WEAK_GUIDE_5_6,a&&n(),l.pzaGuideType.WEAK_GUIDE_5_6):void 0},a.prototype.onCreatePlant=function(){this.guideType&&"string"==typeof this.guideType&&this.guideType.toString().match("WEAK_GUIDE")?this.guideStepNext():window.pzaGuideManager.guideType&&window.pzaGuideManager.guideType.toString().match("FORCE_GUIDE")&&window.pzaGuideManager.guideStepNext()},a.prototype.onGameStart=function(){this.checkGuideStart(l.pzaGuideType.FORCE_GUIDE_1_6),this.checkGuideStart(l.pzaGuideType.WEAK_GUIDE_2_1)},i([G(cc.Node)],a.prototype,"guideHand",void 0),i([B],a)}(cc.Component);t.pzaGuideManager=I,cc._RF.pop()},{"../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaSunFlower":"pzaSunFlower","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaBattleDownView":"pzaBattleDownView","../View/Battle/pzaGuideView":"pzaGuideView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaGuideDialogView":"pzaGuideDialogView","../utils/pzakc":"pzakc","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePropConfig":"pzaGamePropConfig","./pzaGlobalMask":"pzaGlobalMask","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGuideTip:[function(e,a,t){"use strict";cc._RF.push(a,"8c8adtgMMlIxaYhA5UfNdVR","pzaGuideTip");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGuideTip=void 0;var r=e("../Battle/pzaGameState"),p=e("./pzaBaseComponent"),l=e("./pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.word=null,a.lossCarTip=null,a.lossPlantTip=null,a.closeTime=0,a.pasue=!1,a.closeCall=null,a}return n(a,e),a.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.node.off(cc.Node.EventType.TOUCH_START,this.clcikTip,this)},a.prototype.showGuideTip=function(e,a){void 0===a&&(a=0),this.lossCarTip.active=!1,this.lossPlantTip.active=!1,this.word.node.active=!0,this.word.string=e,this.closeTime=a,this.pasue=!1,this.closeCall=null,this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255))))},a.prototype.showGameTip=function(e,a,t,o){if(void 0===a&&(a=null),void 0===t&&(t=!1),void 0===o&&(o=5),this.lossCarTip.active=!1,this.lossPlantTip.active=!1,this.word.node.active=!0,this.word.string=e,this.pasue=!1,a){if(this.closeCall){var n=this.closeCall;this.closeCall=function(){n(),a()}}this.closeCall=a}this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255)))),t?(this.closeTime=0,this.node.on(cc.Node.EventType.TOUCH_START,this.clcikTip,this)):this.closeTime=o},a.prototype.showStarLoseTip=function(e,a){this.lossPlantTip.getComponent(cc.Label).string="\u5df2\u88ab\u51fb\u7834"+r.pzaGameState.getPartLostPlantCount()+"\u4f4d\u9a91\u58eb\u6295\u5f71\uff0c-",this.word.node.active=!1,this.lossCarTip.active=e,this.lossPlantTip.active=a,this.lossPlantTip.getChildByName("win_star").x=this.lossPlantTip.width/2+60,this.closeTime=5,this.pasue=!1,this.closeCall=null},a.prototype.update=function(e){this.pasue||this.closeTime<=0||(this.closeTime-=e,this.closeTime<=0&&(this.close(),this.closeCall&&(this.closeCall(),this.closeCall=null)))},a.prototype.clcikTip=function(){this.close(),this.closeCall&&(this.closeCall(),this.closeCall=null)},a.prototype.pauseSelf=function(){this.pasue=!0,this.word.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.pasue=!1,this.word.node.resumeAllActions()},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6587\u5b57",type:cc.Label})],a.prototype,"word",void 0),i([u({displayName:"\u635f\u5931\u5c0f\u63a8\u8f66\u6587\u6848",type:cc.Node})],a.prototype,"lossCarTip",void 0),i([u({displayName:"\u635f\u5931\u690d\u7269\u6587\u6848",type:cc.Node})],a.prototype,"lossPlantTip",void 0),i([c],a)}(p.pzaBaseComponent);t.pzaGuideTip=d,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaBaseComponent":"pzaBaseComponent","./pzaGameCommonPool":"pzaGameCommonPool"}],pzaGuideType:[function(e,a,t){"use strict";cc._RF.push(a,"8420bdgYmdMUL+6b3c38Mgc","pzaGuideType"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaDialog=t.pzaDaveAni=t.pzaGuideType=void 0,function(e){e[e.GUIDE_PLANT_1_1=0]="GUIDE_PLANT_1_1",e[e.GUIDE_NEW_PLANT_1_2=1]="GUIDE_NEW_PLANT_1_2",e[e.GUIDE_1_3=1]="GUIDE_1_3",e[e.GUIDE_SHOVEL_1_5=2]="GUIDE_SHOVEL_1_5",e[e.GUIDE_BELT_MODE=3]="GUIDE_BELT_MODE",e[e.GUIDE_NINGHT_2_1=4]="GUIDE_NINGHT_2_1",e[e.GUIDE_CARD_SLOT_2_2=5]="GUIDE_CARD_SLOT_2_2",e[e.GUIDE_TRACK_2_3=29]="GUIDE_TRACK_2_3",e[e.GUIDE_CARD_SLOT_2_4=6]="GUIDE_CARD_SLOT_2_4",e[e.GUIDE_KNOCK_ZOMBIE_2_5=7]="GUIDE_KNOCK_ZOMBIE_2_5",e[e.GUIDE_CARD_SLOT_2_6=8]="GUIDE_CARD_SLOT_2_6",e[e.GUIDE_POOL_3_1=9]="GUIDE_POOL_3_1",e[e.GUIDE_SHOP_3_4=10]="GUIDE_SHOP_3_4",e[e.GUIDE_SMALL_ZOMBIE_3_5=11]="GUIDE_SMALL_ZOMBIE_3_5",e[e.GUIDE_SHOP_4_4=12]="GUIDE_SHOP_4_4",e[e.GUIDE_BANG_JAR_4_5=13]="GUIDE_BANG_JAR_4_5",e[e.GUIDE_NINGHT_4_10=14]="GUIDE_NINGHT_4_10",e[e.GUIDE_SHOP_5_1=15]="GUIDE_SHOP_5_1",e[e.GUIDE_GARDEN_5_4=16]="GUIDE_GARDEN_5_4",e[e.GUIDE_BOSS_5_10=17]="GUIDE_BOSS_5_10",e[e.GUIDE_PROP_1_2=18]="GUIDE_PROP_1_2",e[e.GUIDE_5_5=19]="GUIDE_5_5",e[e.GUIDE_5_2=20]="GUIDE_5_2",e[e.GUIDE_4_1=21]="GUIDE_4_1",e[e.GUIDE_ZOMBIE_ENERMY_1=22]="GUIDE_ZOMBIE_ENERMY_1",e[e.GUIDE_VASE=23]="GUIDE_VASE",e[e.GUIDE_6_1=26]="GUIDE_6_1",e[e.GUIDE_6_5=27]="GUIDE_6_5",e[e.GUIDE_10_5=28]="GUIDE_10_5",e.FORCE_GUIDE_1_3="FORCE_GUIDE_1_3",e.FORCE_GUIDE_1_4="FORCE_GUIDE_1_4",e.FORCE_GUIDE_1_6="FORCE_GUIDE_1_6",e.FORCE_GUIDE_2_4="FORCE_GUIDE_2_4",e.FORCE_GUIDE_4_2="FORCE_GUIDE_4_2",e.FORCE_GUIDE_5_1="FORCE_GUIDE_5_1",e.WEAK_GUIDE_1_8="WEAK_GUIDE_1_8",e.WEAK_GUIDE_2_1="WEAK_GUIDE_2_1",e.WEAK_GUIDE_2_3="WEAK_GUIDE_2_3",e.WEAK_GUIDE_2_6="WEAK_GUIDE_2_6",e.WEAK_GUIDE_2_8="WEAK_GUIDE_2_8",e.WEAK_GUIDE_3_3="WEAK_GUIDE_3_3",e.WEAK_GUIDE_3_6="WEAK_GUIDE_3_6",e.WEAK_GUIDE_3_8="WEAK_GUIDE_3_8",e.WEAK_GUIDE_4_2="WEAK_GUIDE_4_2",e.WEAK_GUIDE_4_3="WEAK_GUIDE_4_3",e.WEAK_GUIDE_4_6="WEAK_GUIDE_4_6",e.WEAK_GUIDE_4_8="WEAK_GUIDE_4_8",e.WEAK_GUIDE_5_1="WEAK_GUIDE_5_1",e.WEAK_GUIDE_5_6="WEAK_GUIDE_5_6",e.RIDER_BELTEQUIP_GUIDE="RIDER_BELTEQUIP_GUIDE"}(t.pzaGuideType||(t.pzaGuideType={})),function(e){e.normal="idle1",e.normal_eye="idle1_eye",e.normal_talk="idle1talk",e.normal_talk_eye="idle1talk_eye",e.suggest="idle2",e.suggest_eye="idle2_eye",e.suggest_talk="idle2talk",e.suggest_talk_eye="idle2talk_eye",e.think="idle3",e.think_eye="idle3_eye",e.think_talk="idle3talk",e.think_talk_eye="idle3talk_eye",e.require="idle4",e.require_eye="idle4_eye",e.require_talk="idle4talk",e.require_talk_eye="idle4talk_eye",e.into="into",e.out="out"}(t.pzaDaveAni||(t.pzaDaveAni={}));t.pzaDialog=function(e,a,t){void 0===a&&(a=null),void 0===t&&(t=null),this.event=null,this.daveAni=null,this.word=e,this.event=a,this.daveAni=t},cc._RF.pop()},{}],pzaGuideView:[function(e,a,t){"use strict";cc._RF.push(a,"bd58dbosIJJZLeFmDxI1kWU","pzaGuideView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGuideView=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.guideTxt=null,a.guideAniNode=null,a.daveAni=null,a.words=null,a.guideEndCall=null,a.canClick=!0,a.fingerPos=null,a.fingerEvent=null,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickNext,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickNext,this)},a.prototype.showGuide=function(e,a,t,o){void 0===t&&(t=null),void 0===o&&(o=null),this.canClick=!0,this.guideAniNode.active=!1,this.words=e,this.fingerPos=t,this.fingerEvent=o,this.guideEndCall=a,this.showNext()},a.prototype.clickNext=function(){this.canClick&&this.showNext()},a.prototype.showNext=function(){var e=this.words.shift();if(null==e)return this.close(),void(this.guideEndCall&&this.guideEndCall());this.guideTxt.string=e.word,e.event&&e.event(),this.words.length<=0&&null!=this.fingerPos&&this.showFingerAni()},a.prototype.showFingerAni=function(){this.canClick=!1,this.guideAniNode.active=!0,this.guideAniNode.setPosition(this.fingerPos)},a.prototype.clickFinger=function(){this.close(),this.guideEndCall&&this.guideEndCall(),this.fingerEvent&&this.fingerEvent()},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u5f15\u5bfc\u6587\u6848",type:cc.Label})],a.prototype,"guideTxt",void 0),i([c({displayName:"\u5f15\u5bfc\u52a8\u753b\u8282\u70b9",type:cc.Node})],a.prototype,"guideAniNode",void 0),i([c({displayName:"\u6234\u592b\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"daveAni",void 0),i([s],a)}(cc.Component);t.pzaGuideView=u,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaHammerEffect:[function(e,a,t){"use strict";cc._RF.push(a,"dedbdX7ZaBIZbSV49lpNH0w","pzaHammerEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaHammerEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaSoundManager"),u=e("../Plant/pzaAttackType"),d=e("../pzaBaseBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hammer=null,a.collider=null,a.peng=null,a.poolPrefab=null,a.trigger=!1,a.hitZombie=!1,a}return n(a,e),a.prototype.showEffect=function(){var e=this;this.collider.enabled=!0,p.pzaCollisionManager.getInstance.addBulletOther(this),this.trigger=!1,this.hitZombie=!1,this.peng.active=!1,this.hammer.stopAllActions(),this.hammer.angle=40,this.hammer.opacity=255,this.hammer.runAction(cc.sequence(cc.rotateTo(.1,-60),cc.callFunc(function(){e.trigger=!0}),cc.fadeOut(.1),cc.callFunc(function(){e.hitZombie||(c.pzaSoundManager.playAudio("voidbang"),e.close())})))},a.prototype.onlyShowHammer=function(){var e=this;this.collider.enabled=!1,p.pzaCollisionManager.getInstance.delBulletOther(this),this.trigger=!1,this.hitZombie=!1,this.peng.active=!1,this.hammer.stopAllActions(),this.hammer.angle=40,this.hammer.opacity=255,this.hammer.runAction(cc.sequence(cc.rotateTo(.1,-60),cc.fadeOut(.1),cc.callFunc(function(){e.close()})))},a.prototype.showPeng=function(){var e=this;this.peng.active=!0,this.peng.stopAllActions(),this.peng.scale=.5,this.peng.opacity=122,this.peng.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeIn(.1)),cc.delayTime(.4),cc.fadeOut(.1),cc.callFunc(function(){e.close()})))},a.prototype.pauseSelf=function(){this.hammer.pauseAllActions(),this.peng.pauseAllActions()},a.prototype.resumeSelf=function(){this.hammer.resumeAllActions(),this.peng.resumeAllActions()},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.collider.poSource=this.node,this.collider):null},a.prototype.onCollision=function(e){if(!this.trigger&&e.node.group==s.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(d.pzaBaseBody);if(null==a||null==a.baseData||a.baseData.isDead)return;var t=window.pzazombieManager.getZombie(a.baseData);if(null==t)return;t.hurt(1e3,null,u.pzaAttackType.KNOCK),this.trigger=!0,this.hitZombie=!0,this.showPeng()}},a.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([f({displayName:"\u9524\u5b50",type:cc.Node})],a.prototype,"hammer",void 0),i([f({displayName:"\u78b0\u649e\u7ec4\u4ef6",type:cc.BoxCollider})],a.prototype,"collider",void 0),i([f({displayName:"\u562d",type:cc.Node})],a.prototype,"peng",void 0),i([f(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([m],a)}(r.pzaBaseComponent);t.pzaHammerEffect=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Plant/pzaAttackType":"pzaAttackType","../pzaBaseBody":"pzaBaseBody"}],pzaHandbookCard:[function(e,a,t){"use strict";cc._RF.push(a,"90c044XkCxGMLQGNppnP0Zh","pzaHandbookCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaHandbookCard=void 0;var r=e("../Battle/Data/pzaPlantEnum"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGameConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaSpriteFrameManager"),d=e("../Common/pzaWorldEventManager"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardBoard=null,a.cardBoardFrames=[],a.cardIcon=null,a.tryUseIcon=null,a.priceLabel=null,a.priceNode=null,a.voidSlot=null,a.select=null,a.professorSP=null,a.priceSP=null,a.plantType=null,a.clickCall=null,a.hasPlant=!1,a}return n(a,e),a.prototype.onEnable=function(){d.pzaWorldEventManager.addListener(d.pzaWorldEventType.SELECT_PLANT_CARD,this.selectCard,this)},a.prototype.bindData=function(e,a){return this.select.active=!1,this.tryUseIcon.active=!1,this.plantType=e,this.clickCall=a,this.hasPlant=s.pzaLocalData.data.ownPlants.includes(e),s.pzaLocalData.data.plantTrial[""+e]&&s.pzaLocalData.data.plantTrial[""+e]<=10&&(this.hasPlant=!0,this.tryUseIcon.active=!0),this.hasPlant?(this.professorSP.node.active=!0,this.voidSlot.active=!1,this.cardBoard.node.active=!0,e==r.pzaPlantEnum.IMITATER?(u.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),this.priceNode.active=!1,void(this.cardBoard.spriteFrame=this.cardBoardFrames[0])):(this.priceNode.active=!0,void this.setPlantCardSP(e))):(this.voidSlot.active=!0,this.cardBoard.node.active=!1,void(this.professorSP.node.active=!1))},a.prototype.setPlantCardSP=function(e){var a=l.pzaGameConfig.getPlantConfig(e);a?(this.priceLabel.string=a.price+"",u.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),u.pzaSpriteFrameManager.loadPlantProfess(a.profession,this.professorSP),u.pzaSpriteFrameManager.loadPlantCardSlotFrame(this.cardBoard,e,e==r.pzaPlantEnum.IMITATER),u.pzaSpriteFrameManager.loadPlantCardPriceFrame(this.priceSP.getComponent(cc.Sprite),e,e==r.pzaPlantEnum.IMITATER)):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",e)},a.prototype.setFilterByPro=function(e){var a=l.pzaGameConfig.getPlantConfig(this.plantType);a&&(this.node.active=a.filterPlantByPro(e))},a.prototype.selectCard=function(e){e.plantType!=this.plantType&&(this.select.active=!1)},a.prototype.clickCard=function(){this.hasPlant&&(c.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.plantType),this.showSelectAni())},a.prototype.showSelectAni=function(){this.select.active=!0,cc.tween(this.select).to(.3,{scale:1.1},{easing:"sineInOut"}).to(.3,{scale:1},{easing:"sineInOut"}).union().repeatForever().start(),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.SELECT_PLANT_CARD,{plantType:this.plantType})},a.prototype.onDisable=function(){d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.SELECT_PLANT_CARD,this.selectCard,this)},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([f({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],a.prototype,"cardBoardFrames",void 0),i([f({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([f({type:cc.Node})],a.prototype,"tryUseIcon",void 0),i([f({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],a.prototype,"priceLabel",void 0),i([f({displayName:"\u4ef7\u683c\u8282\u70b9",type:cc.Node})],a.prototype,"priceNode",void 0),i([f({displayName:"\u7a7a\u5361\u69fd",type:cc.Node})],a.prototype,"voidSlot",void 0),i([f({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"select",void 0),i([f({type:cc.Sprite})],a.prototype,"professorSP",void 0),i([f({type:cc.Node})],a.prototype,"priceSP",void 0),i([m],a)}(cc.Component);t.pzaHandbookCard=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaHandbookView:[function(e,a,t){"use strict";cc._RF.push(a,"3cd4cOQNe5AlKqqOM/396Us","pzaHandbookView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaHandbookView=void 0;var r=e("../Battle/pzaGameState"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaStatisticsMgr"),c=e("../Common/pzaUIManager"),u=e("../Load/pzaPreLoadManager"),d=e("./pzaPlantHandbookView"),h=e("./pzaZombieHandbookView"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.plantBGNode=null,a.zombieBGNode=null,a.plantBtn=null,a.zombieBtn=null,a.closeBtn=null,a.title=null,a.touchBlock=null,a.mask=null,a.lastBgm=null,a.closeCall=null,a}return n(a,e),a.prototype.onEnable=function(){this.touchBlock.active=!1,this.mask.opacity=140,this.showAni(),s.pzaStatisticsMgr.sendEvent("System",{name:"system",value:13}),this.lastBgm=null,"fightbeforebgm"!=l.pzaSoundManager.lastbgmName&&(this.lastBgm=l.pzaSoundManager.lastbgmName,l.pzaSoundManager.playBgm(l.pzaBGMName.PRE_BGM)),r.pzaGameState.isInHandBookView=!0},a.prototype.bindCloseCall=function(e){this.closeCall=e},a.prototype.jdInit=function(){},a.prototype.clickPlantBook=function(){var e=this;l.pzaSoundManager.playSFX(),c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PLANT_HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(d.pzaPlantHandbookView);t&&t.bindCloseCall(function(){e.close(),e.closeCall&&e.closeCall(),e.closeCall=null})})},a.prototype.clickZombieBook=function(){var e=this;l.pzaSoundManager.playSFX(),c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.ZOMBIE_HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(h.pzaZombieHandbookView);t&&t.bindCloseCall(function(){e.close(),e.closeCall&&e.closeCall(),e.closeCall=null})})},a.prototype.clickClose=function(){var e=this;l.pzaSoundManager.playSFX(),this.touchBlock.active=!0,this.hideAni(),setTimeout(function(){e.close(),e.closeCall&&e.closeCall(),e.closeCall=null},1e3)},a.prototype.showAni=function(){var e=this.plantBGNode.position,a=this.zombieBGNode.position,t=cc.v2(-2e3,0),o=cc.v2(2e3,0);this.moveAct(this.plantBGNode,t,cc.v2(e)),this.moveAct(this.zombieBGNode,o,cc.v2(a)),this.moveAct2(this.plantBtn,cc.v2(this.plantBtn.x-2e3,this.plantBtn.y),cc.v2(this.plantBtn.position)),this.moveAct2(this.zombieBtn,cc.v2(this.zombieBtn.x+2e3,this.zombieBtn.y),cc.v2(this.zombieBtn.position)),this.moveAct3(this.title,cc.v2(this.title.x,this.title.y+2e3),cc.v2(this.title.position)),this.moveAct2(this.closeBtn,cc.v2(this.closeBtn.x+2e3,this.closeBtn.y),cc.v2(this.closeBtn.position))},a.prototype.hideAni=function(){var e=this.plantBGNode.position,a=this.zombieBGNode.position,t=cc.v2(-2e3,0),o=cc.v2(2e3,0);this.moveAct2(this.plantBGNode,cc.v2(e),t),this.moveAct2(this.zombieBGNode,cc.v2(a),o),this.moveAct(this.plantBtn,cc.v2(this.plantBtn.position),cc.v2(this.plantBtn.x-2e3,this.plantBtn.y)),this.moveAct(this.zombieBtn,cc.v2(this.zombieBtn.position),cc.v2(this.zombieBtn.x+2e3,this.zombieBtn.y)),this.moveAct3(this.title,cc.v2(this.title.position),cc.v2(this.title.x,this.title.y+2e3)),this.moveAct(this.closeBtn,cc.v2(this.closeBtn.position),cc.v2(this.closeBtn.x+2e3,this.closeBtn.y)),this.mask.runAction(cc.fadeTo(1,0))},a.prototype.moveAct=function(e,a,t){e.setPosition(a);var o=cc.moveTo(.5,t).easing(cc.easeInOut(3));e.runAction(o.clone())},a.prototype.moveAct2=function(e,a,t){e.setPosition(a);var o=cc.moveTo(.7,t).easing(cc.easeInOut(3));e.runAction(o.clone())},a.prototype.moveAct3=function(e,a,t){e.setPosition(a);var o=cc.moveTo(.6,t).easing(cc.easeInOut(3));e.runAction(o.clone())},a.prototype.close=function(){this.lastBgm&&l.pzaSoundManager.playBgm(this.lastBgm),p.pzaGameCommonPool.returnInstant(this.node),r.pzaGameState.isInHandBookView=!1},i([z({type:cc.Node})],a.prototype,"plantBGNode",void 0),i([z({type:cc.Node})],a.prototype,"zombieBGNode",void 0),i([z({type:cc.Node})],a.prototype,"plantBtn",void 0),i([z({type:cc.Node})],a.prototype,"zombieBtn",void 0),i([z({type:cc.Node})],a.prototype,"closeBtn",void 0),i([z({type:cc.Node})],a.prototype,"title",void 0),i([z({type:cc.Node})],a.prototype,"touchBlock",void 0),i([z({type:cc.Node})],a.prototype,"mask",void 0),i([f],a)}(cc.Component);t.pzaHandbookView=y,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaPlantHandbookView":"pzaPlantHandbookView","./pzaZombieHandbookView":"pzaZombieHandbookView"}],pzaHitFlyEffect:[function(e,a,t){"use strict";cc._RF.push(a,"91966KwCZ9DaI7wEzqtOtEN","pzaHitFlyEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaHitFlyEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hitFlyTime=0,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.hitFlyTime=3},a.prototype.logicUpdate=function(e){this.hitFlyMove(e)},a.prototype.hitFlyMove=function(e){this.hitFlyTime-=e,this.node.x+=550*e,this.node.y+=.7*p.pzaGameState.gameSpeed,this.node.angle-=10*p.pzaGameState.gameSpeed,(this.hitFlyTime<=0||this.node.x>=850)&&(this.hitFlyTime=0,this.close())},i([s],a)}(r.pzaBaseComponent));t.pzaHitFlyEffect=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaHoleBlock:[function(e,a,t){"use strict";cc._RF.push(a,"95242eHpu9JFLTf0l8aM3Dc","pzaHoleBlock");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTrackBlock=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hole=null,a.holeBlockSPF=[],a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),5==p.pzaGameState.mapId?this.hole.spriteFrame=this.holeBlockSPF[0]:6==p.pzaGameState.mapId&&(this.hole.spriteFrame=this.holeBlockSPF[1])},a.prototype.onDisable=function(){e.prototype.onDisable.call(this)},i([c({type:cc.Sprite})],a.prototype,"hole",void 0),i([c([cc.SpriteFrame])],a.prototype,"holeBlockSPF",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaTrackBlock=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaHomeTip:[function(e,a,t){"use strict";cc._RF.push(a,"77c0b7ai01Ne4ZwCimBv8Xo","pzaHomeTip");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaHomeTip=void 0;var r=e("./pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.word=null,a.closeTime=0,a}return n(a,e),a.prototype.showTip=function(e,a){void 0===a&&(a=0),this.word.node.active=!0,this.word.string=e,this.closeTime=a,this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255))))},a.prototype.update=function(e){this.closeTime<=0||(this.closeTime-=e,this.closeTime<=0&&this.close())},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s({displayName:"\u6587\u5b57",type:cc.Label})],a.prototype,"word",void 0),i([l],a)}(cc.Component);t.pzaHomeTip=c,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool"}],pzaHomeView:[function(e,a,t){"use strict";cc._RF.push(a,"ca117f9f6FOXbZyu8xg7+mB","pzaHomeView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Achieve/pzaAchieveView"),p=e("../Battle/Data/pzaDropType"),l=e("../Battle/Data/pzaGuideType"),s=e("../BattlePass/pzaBattlePassTaskMgr"),c=e("../Common/pzaGamePropConfig"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaOperationMgr"),h=e("../Common/pzaRewardManager"),m=e("../Common/pzaShareGiftConfig"),f=e("../Common/pzaSoundManager"),z=e("../Common/pzaSpineController"),y=e("../Common/pzaTipManager"),g=e("../Common/pzaUIManager"),v=e("../Garden/pzaGardenMgr"),b=e("../Garden/pzaGardenView"),P=e("../Load/pzaPreLoadManager"),C=e("../LoginRewardView/pzaLoginRewardMgr"),E=e("../utils/pzaChannel"),S=e("../utils/pzaChannelMy"),_=e("../utils/pzakc"),D=e("./Battle/pzaNewPlantView"),M=e("./Battle/pzaOptionView"),w=e("./pzaCommonMask"),T=e("./pzaGiftView"),A=e("./pzaHandbookView"),B=e("./pzaPreOpenView"),G=e("./pzaSaveView"),I=e("./pzaShareGiftView"),O=e("./pzaShopView"),N=e("./pzaWarningView"),L=cc._decorator,R=L.ccclass,k=L.property,U=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.guanKaDescLab=null,a.gardenBtn=null,a.shopBtn=null,a.achBtn=null,a.signBtn=null,a.monthSignBtn=null,a.shareGiftBtn=null,a.achUI=null,a.sideBarNode=null,a.addToDeskNode=null,a.welfareMask=null,a.activityMask=null,a.welfareArrow=null,a.activityArrow=null,a.giftBtn=null,a.power=null,a.node_RiderFall=null,a.node_LoginReward=null,a.node_RiderBeltEquip=null,a.node_battlePass=null,a.node_newPlayer=null,a.activityBtn=null,a.saveBtn=null,a.prefab_pageItem=null,a.riderAni=null,a.left_bottomView=null,a.moreChallengBtn=null,a.endTime=new Date("2024-08-25 00:00:00").getTime(),a.showLeafAniFlag=!0,a.edit=null,a.Welfare_isExpand=!1,a.Activity_isExpand=!1,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){this.scheduleOnce(function(){S.pzaChannelMy.SOPReport(S.reportAct.reportGamePlay)},1),this.setRiderAct(!1),this.left_bottomView.getChildByName("welfareContent").active=!0,this.left_bottomView.getChildByName("activityContent").active=!0},a.prototype.showNewplantview=function(){var e=parseInt(this.edit.string);g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(D.pzaNewPlantView)).showView(p.pzaDropType.PLANT_CARD,e)})},a.prototype.setRiderAct=function(e){var a=this;if(e&&u.pzaLocalData.data.showHomeGoActLocal)return u.pzaLocalData.data.showHomeGoActLocal=!1,u.pzaLocalData.addDirty("showHomeGoActLocal"),void this.riderAni.playAnimation("go",!1,function(){a.riderAni.playAnimation("idle",!0)});u.pzaLocalData.showHomeGoAct?(u.pzaLocalData.showHomeGoAct=!1,this.riderAni.playAnimation("go",!1,function(){a.riderAni.playAnimation("idle",!0)})):this.riderAni.playAnimation("idle",!0)},a.prototype.onEnable=function(){var e=this;f.pzaSoundManager.playBgm(f.pzaBGMName.LOADING),this.refreshHomeView(),_.default.regMsgReciever("unlockMonth",function(a){return a&&(e.monthSignBtn.active=!0,e.signBtn.active=!1),!0}),_.default.regMsgReciever("readGameData",function(){return w.pzaCommonMask.showMask(!0),e.refreshHomeView(),v.default.instance().loadPlantsFromSave(),e.scheduleOnce(function(){w.pzaCommonMask.hideMask(),y.pzaTipManager.showHomeTip("\u6570\u636e\u8bfb\u53d6\u6210\u529f",null,2)},2),!0}),_.default.regMsgReciever("saveGameData",function(){return w.pzaCommonMask.showMask(!0),e.refreshHomeView(),v.default.instance().loadPlantsFromSave(),e.scheduleOnce(function(){w.pzaCommonMask.hideMask(),y.pzaTipManager.showHomeTip("\u6570\u636e\u4fdd\u5b58\u6210\u529f",null,2)},2),!0}),_.default.regMsgReciever("shareGiftGetAll",function(){return e.shareGiftBtn&&(e.shareGiftBtn.active=!1),!0}),_.default.regMsgReciever("backHome",function(){return e.setRiderAct(!0),!0}),this.welfareMask.width=0,this.activityMask.width=0,this.welfareArrow.active=!1,this.activityArrow.active=!1,u.pzaLocalData.data.hasInGame=!0,u.pzaLocalData.addDirty("hasInGame"),this.Welfare_isExpand=!1,this.Activity_isExpand=!1,u.pzaLocalData.loadingIsOver=!0,u.pzaLocalData.isShowSaveView&&(u.pzaLocalData.isShowSaveView=!1,g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SAVE_VIEW,function(e){var a=e&&e.getComponent(G.pzaSaveView);a&&a.gameInit(null)})),d.pzaOperationMgr.everyDayShowOperaView(d.pzaOperationType.sign),d.pzaOperationMgr.everyDayShowOperaView(d.pzaOperationType.newPlayerTask),d.pzaOperationMgr.everyDayShowOperaView(d.pzaOperationType.loginActivity),d.pzaOperationMgr.everyDayShowOperaView(d.pzaOperationType.riderFall)},a.prototype.refreshHomeView=function(){var e;e=u.pzaLocalData.data.curChapter+"-"+u.pzaLocalData.data.curPart,this.guanKaDescLab&&(this.guanKaDescLab.string=e),this.setBtn(),!u.pzaLocalData.data.openPuzzleTip&&(u.pzaLocalData.data.curChapter>1||u.pzaLocalData.data.curPart>5)&&(u.pzaLocalData.data.openPuzzleTip=!0,u.pzaLocalData.addDirty("openPuzzleTip"),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(N.pzaWarningView);a&&a.show("\u66f4\u591a\u6a21\u5f0f\u5173\u5361\u5df2\u5f00\u653e","\u786e\u5b9a","\u7acb\u5373\u524d\u5f80",null,function(){g.pzaUIManager.removeAllPopUI(),g.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.CHALLENGE_VIEW,null)},"\u89e3\u9501\u65b0\u6a21\u5f0f")})),"wx"==E.pzaChannel.instance().channel&&(this.sideBarNode.active=!1),this.addToDeskNode&&(this.addToDeskNode.active=!1),"tt"==E.pzaChannel.instance().channel&&(this.addToDeskNode&&(this.addToDeskNode.active=!0),_.default.getData("addToDesk",0)&&this.addToDeskNode&&(this.addToDeskNode.active=!1)),u.pzaLocalData.data&&u.pzaLocalData.data.canMonthSign&&this.monthSignBtn&&this.signBtn&&(this.monthSignBtn.active=!0,this.signBtn.active=!1),this.monthSignBtn&&this.signBtn&&this.shareGiftBtn},a.prototype.setBtn=function(){this.monthSignBtn&&(this.monthSignBtn.active=!1),this.gardenBtn&&(this.gardenBtn.active=!0,this.gardenBtn.getChildByName("sp").color=u.pzaLocalData.data.unlockGarden?cc.Color.WHITE:cc.Color.fromHEX(cc.color(),"#737373"),this.gardenBtn.getChildByName("lock").active=!u.pzaLocalData.data.unlockGarden),this.node_RiderBeltEquip.active=!0,this.node_RiderBeltEquip.getChildByName("sp").color=d.pzaOperationMgr.isUnlockOperaFN(d.pzaOperationType.riderBeltEquip)?cc.Color.WHITE:cc.Color.fromHEX(cc.color(),"#737373"),this.node_RiderBeltEquip.getChildByName("lock").active=!d.pzaOperationMgr.isUnlockOperaFN(d.pzaOperationType.riderBeltEquip),this.shopBtn.active=!0,this.achBtn.active=!0,this.signBtn.active=d.pzaOperationMgr.isUnlockOperaFN(d.pzaOperationType.sign),this.shareGiftBtn.active=d.pzaOperationMgr.isUnlockOperaFN(d.pzaOperationType.shareGift),u.pzaLocalData.data.shareGiftGetAll&&(this.shareGiftBtn.active=!1),this.node_newPlayer.active=d.pzaOperationMgr.isUnlockOperaFN(d.pzaOperationType.newPlayerTask),this.giftBtn.active=u.pzaLocalData.isShowGift,this.setActivityBtn()},a.prototype.setActivityBtn=function(){var e=this;if(u.pzaLocalData.disablePostFn){this.activityBtn.active=!1,this.node_newPlayer.active=!1,this.node_RiderFall.active=!1,this.node_battlePass.active=!1,this.node_LoginReward.active=!1;var a=this.saveBtn.getComponent(cc.Widget);a.left=-15,a.bottom=160,this.left_bottomView.getChildByName("welfare").getComponent(cc.Widget).bottom=33,this.left_bottomView.getChildByName("welfareContent").getComponent(cc.Widget).bottom=15}else{var t=this.left_bottomView.getChildByName("activity_btn");t.active=!1,s.default.instance().checkDayTask(1,u.pzaLocalData.data.bpDayLoginCnt),s.default.instance().checkWeekTask(1,u.pzaLocalData.data.bpWeekLoginCnt),this.node_RiderFall.active=!1,this.node_LoginReward.active=!1,this.node_battlePass.active=!1,this.node_newPlayer.active=!1,d.pzaOperationMgr.checkRiderFall(function(){t.active=!0,e.node_RiderFall.active=!0},function(){e.node_RiderFall.active=!1}),d.pzaOperationMgr.checkLoginReward(function(){t.active=!0,e.node_LoginReward.active=!0},function(){e.node_LoginReward.active=!1}),d.pzaOperationMgr.checkBpTask(function(){e.node_battlePass.active=!0},function(){e.node_battlePass.active=!1}),d.pzaOperationMgr.checkNewPlayerTask(function(){t.active=!0,e.node_newPlayer.active=!0},function(){e.node_newPlayer.active=!1}),C.default.instance().checkRiderFallTask(1,u.pzaLocalData.data.riderFallTaskPro.login)}},a.prototype.unlockMonthSign=function(){this.monthSignBtn.active=!0,this.signBtn.active=!1},a.prototype.onDisable=function(){_.default.delMsgReciever("unlockMonth"),_.default.delMsgReciever("readGameData"),_.default.delMsgReciever("saveGameData"),_.default.delMsgReciever("backHome")},a.prototype.clickChallengeBtn=function(){f.pzaSoundManager.playAudio("gravebutton"),g.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.CHALLENGE_VIEW,null)},a.jumpView=function(e){var a;switch(e){case"normalMode":u.pzaLocalData.data.normalClickTips=!1,u.pzaLocalData.addDirty("normalClickTips"),u.pzaLocalData.data.curGuideType!=l.pzaGuideType.GUIDE_SHOP_3_4&&u.pzaLocalData.data.curGuideType!=l.pzaGuideType.GUIDE_SHOP_4_4&&u.pzaLocalData.data.curGuideType!=l.pzaGuideType.GUIDE_SHOP_5_1?u.pzaLocalData.data.curGuideType!=l.pzaGuideType.GUIDE_GARDEN_5_4?u.pzaLocalData.data.newGuide||u.pzaLocalData.hasPass12()?g.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PART_SELECT_VIEW,null):(u.pzaLocalData.data.newGuide=!0,u.pzaLocalData.addDirty("newGuide"),g.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PART_SELECT_VIEW,null),u.pzaLocalData.data.normalClickTips=!1,u.pzaLocalData.addDirty("normalClickTips")):g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GARDEN_VIEW,function(e){var a=e&&e.getComponent(b.pzaGardenView);a&&a.init()}):g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHOP_VIEW,null);break;case"jarMode":a=function(){u.pzaLocalData.challengPage=1,g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.PUZZLE_VIEW,function(){})},0!=(10*u.pzaLocalData.data.curChapter+u.pzaLocalData.data.curPart>15||u.pzaLocalData.data.preUnlockJar)?a():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(e){var t=e&&e.getComponent(N.pzaWarningView);t&&t.show("\u901a\u5173\u5192\u9669\u6a21\u5f0f1-5\u540e\u89e3\u9501","\u8fd4\u56de","\u63d0\u524d\u89e3\u9501",function(){},function(){E.pzaChannel.instance().showVideo({sucCall:function(){a(),u.pzaLocalData.data.preUnlockJar=!0,u.pzaLocalData.addDirty("preUnlockJar")},failCall:function(){},endCall:function(){},posName:"\u661f\u8fb0\u8bd5\u70bc\u63d0\u524d\u89e3\u9501"})},"\u672a\u89e3\u9501",!1,!1,1)})}},a.prototype.clickAdventureBtn=function(){f.pzaSoundManager.playAudio("gravebutton"),t.jumpView("normalMode")},a.prototype.clickSurvivalBtn=function(){f.pzaSoundManager.playAudio("gravebutton");var e=function(){g.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.SURVIVAL_VIEW,null)};u.pzaLocalData.data.passLastPart?(u.pzaLocalData.data.preOpenSurvival&&(u.pzaLocalData.data.preOpenSurvival=!1,u.pzaLocalData.addDirty("preOpenSurvival")),e()):g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.PRE_OPEN_VIEW,function(a){var t=a&&a.getComponent(B.pzaPreOpenView);t&&t.show(function(){E.pzaChannel.instance().showVideo({sucCall:function(){u.pzaLocalData.data.preOpenSurvival=!0,u.pzaLocalData.addDirty("preOpenSurvival"),e()},failCall:function(){},endCall:function(){},posName:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"16"})})})},a.prototype.clickHelp=function(){f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GAME_OPTION_VIEW,function(e){var a=e&&e.getComponent(M.pzaOptionView);a&&a.init(!1,null,"\u786e\u5b9a")})},a.prototype.clickShop=function(){u.pzaLocalData.data.curChapter<2||2==u.pzaLocalData.data.curChapter&&u.pzaLocalData.data.curPart<=4?g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(N.pzaWarningView);a&&a.show("\u5192\u9669\u6a21\u5f0f\u901a\u51732-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501")}):(f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHOP_VIEW,function(e){var a=e&&e.getComponent(O.pzaShopView);a&&a.bindCloseCall(!0,null);var t=a&&a.getfirstPage();a&&a.showShopItem(t)}))},a.prototype.clickAchieve=function(){f.pzaSoundManager.playSFX(),r.default.show(this)},a.prototype.clickHandbook=function(){f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.HANDBOOK_VIEW,function(e){var a=e&&e.getComponent(A.pzaHandbookView);a&&a.jdInit()})},a.prototype.clickSign=function(){f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.DAY_SIGN_VIEW,null)},a.prototype.clickGift=function(){f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GIFT_VIEW,function(e){e.getComponent(T.pzaGiftView).refreshView()})},a.prototype.clickMonthSign=function(){f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.MONTH_SIGN_VIEW,null)},a.prototype.clickShareGift=function(){if(f.pzaSoundManager.playSFX(),u.pzaLocalData.isNoShareAct)g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHARE_GIFT_VIEW,function(e){var a=e&&e.getComponent(I.pzaShareGiftView);a&&a.init([])});else{var e=E.pzaChannel.instance().getChannel();"noAD"!=e.channel?"wx"==e.channel?e.getShareResult(m.pzaShareGiftConfig.act,function(e){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(I.pzaShareGiftView);t&&t.init(e)})}):"tt"==e.channel?e.getShareResult(m.pzaShareGiftConfig.act,function(e){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(I.pzaShareGiftView);t&&t.init(e)})}):"ks"==e.channel&&e.getShareResult(m.pzaShareGiftConfig.act,function(e){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(I.pzaShareGiftView);t&&t.init(e)})}):e.getShareResult(m.pzaShareGiftConfig.act,function(e){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(I.pzaShareGiftView);t&&t.init(e)})})}},a.prototype.clickGarden=function(){f.pzaSoundManager.playSFX(),u.pzaLocalData.data.unlockGarden?g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GARDEN_VIEW,function(e){var a=e&&e.getComponent(b.pzaGardenView);a&&a.init()}):g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(N.pzaWarningView);a&&a.show("\u5192\u9669\u6a21\u5f0f\u901a\u51732-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501")})},a.prototype.clickWelfareBtn=function(e,a,t){var o=this;!1===t?this.Welfare_isExpand=t:(this.Welfare_isExpand=!this.Welfare_isExpand,f.pzaSoundManager.playSFX(),this.clickActivityBtn(null,null,!1)),this.Welfare_isExpand?(this.welfareArrow.active=!0,cc.tween(this.welfareMask).to(.2,{width:508}).start()):cc.tween(this.welfareMask).to(.2,{width:0}).call(function(){o.welfareArrow.active=!1}).start()},a.prototype.clickActivityBtn=function(e,a,t){var o=this;!1===t?this.Activity_isExpand=t:(this.Activity_isExpand=!this.Activity_isExpand,f.pzaSoundManager.playSFX(),this.clickWelfareBtn(null,null,!1)),this.Activity_isExpand?(this.activityArrow.active=!0,cc.tween(this.activityMask).to(.2,{width:508}).start()):cc.tween(this.activityMask).to(.2,{width:0}).call(function(){o.activityArrow.active=!1}).start()},a.prototype.clickWelfareArr=function(){},a.prototype.clickNewPlayerBtn=function(){f.pzaSoundManager.playSFX(),d.pzaOperationMgr.showNewPlayerTask(!0)},a.prototype.clickBattlePassBtn=function(){f.pzaSoundManager.playSFX(),d.pzaOperationMgr.showBattlePass()},a.prototype.clickLoginReward=function(){d.pzaOperationMgr.showLoginActivity()},a.prototype.clickRiderFall=function(){d.pzaOperationMgr.showRiderFall()},a.prototype.clickSave=function(){f.pzaSoundManager.playSFX();var e=E.pzaChannel.instance().getChannel();E.pzaChannel.loadFromRemote(e.channelUserId,function(e,a){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SAVE_VIEW,function(e){var t=e&&e.getComponent(G.pzaSaveView);t&&t.init(a)})})},a.prototype.clickSidebar=function(){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.BYTE_SIDEBAR_VIEW,function(){})},a.prototype.clickAddToDesk=function(){var e=this;f.pzaSoundManager.playSFX(),E.pzaChannel.instance().addShortcut({sucCall:function(){e.addToDeskNode.active=!1;var a=[new c.pzaRewardPropData(c.pzaGamePropEnum.PROP_POWER,5)];h.pzaRewardManager.recieveRewards(a,function(){}),_.default.saveData("addToDesk",1)},failCall:function(){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25")}})},a.prototype.clickBeltEquip=function(){0!=d.pzaOperationMgr.isUnlockOperaFN(d.pzaOperationType.riderBeltEquip)?g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.BELTEQUIPVIEW,function(){}):g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(N.pzaWarningView);a&&a.show("\u5192\u9669\u6a21\u5f0f\u901a\u51731-9\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501")})},i([k({displayName:"\u5173\u5361\u63cf\u8ff0",type:cc.Label})],a.prototype,"guanKaDescLab",void 0),i([k({displayName:"\u82b1\u56ed\u6309\u94ae",type:cc.Node})],a.prototype,"gardenBtn",void 0),i([k({displayName:"\u5546\u5e97\u6309\u94ae",type:cc.Node})],a.prototype,"shopBtn",void 0),i([k({displayName:"\u6210\u5c31\u6309\u94ae",type:cc.Node})],a.prototype,"achBtn",void 0),i([k({displayName:"\u7b7e\u5230\u6309\u94ae",type:cc.Node})],a.prototype,"signBtn",void 0),i([k({displayName:"\u6708\u7b7e\u5230\u6309\u94ae",type:cc.Node})],a.prototype,"monthSignBtn",void 0),i([k({displayName:"\u5206\u4eab\u6709\u793c\u6309\u94ae",type:cc.Node})],a.prototype,"shareGiftBtn",void 0),i([k({displayName:"\u6210\u5c31UI",type:cc.Node})],a.prototype,"achUI",void 0),i([k({displayName:"\u4fa7\u8fb9\u680f",type:cc.Node})],a.prototype,"sideBarNode",void 0),i([k({displayName:"\u6dfb\u52a0\u684c\u9762",type:cc.Node})],a.prototype,"addToDeskNode",void 0),i([k({displayName:"\u798f\u5229Mask",type:cc.Node})],a.prototype,"welfareMask",void 0),i([k({displayName:"\u6d3b\u52a8Mask",type:cc.Node})],a.prototype,"activityMask",void 0),i([k({displayName:"\u798f\u5229\u7bad\u5934",type:cc.Node})],a.prototype,"welfareArrow",void 0),i([k({displayName:"\u6d3b\u52a8\u7bad\u5934",type:cc.Node})],a.prototype,"activityArrow",void 0),i([k({displayName:"\u793c\u5305\u6309\u94ae",type:cc.Node})],a.prototype,"giftBtn",void 0),i([k({displayName:"\u4f53\u529b\u69fd",type:cc.Node})],a.prototype,"power",void 0),i([k({displayName:"\u9a91\u58eb\u964d\u4e34\u8282\u70b9",type:cc.Node})],a.prototype,"node_RiderFall",void 0),i([k({displayName:"\u767b\u5f55\u8c6a\u793c\u8282\u70b9",type:cc.Node})],a.prototype,"node_LoginReward",void 0),i([k({type:cc.Node})],a.prototype,"node_RiderBeltEquip",void 0),i([k({displayName:"\u798f\u5229\u6218\u4ee4\u8282\u70b9",type:cc.Node})],a.prototype,"node_battlePass",void 0),i([k({displayName:"\u6d3b\u52a8\u8282\u70b9",type:cc.Node})],a.prototype,"node_newPlayer",void 0),i([k({displayName:"\u6d3b\u52a8\u8282\u70b9",type:cc.Node})],a.prototype,"activityBtn",void 0),i([k({displayName:"\u5b58\u6863\u8282\u70b9",type:cc.Node})],a.prototype,"saveBtn",void 0),i([k({displayName:"\u6d3b\u52a8pageItem",type:cc.Prefab})],a.prototype,"prefab_pageItem",void 0),i([k({type:z.pzaSpineController})],a.prototype,"riderAni",void 0),i([k({displayName:"\u5de6\u4e0b\u89d2\u89c6\u56fe",type:cc.Node})],a.prototype,"left_bottomView",void 0),i([k({type:cc.Node})],a.prototype,"moreChallengBtn",void 0),i([k({type:cc.EditBox})],a.prototype,"edit",void 0),t=i([R],a)}(cc.Component);t.default=U,cc._RF.pop()},{"../Achieve/pzaAchieveView":"pzaAchieveView","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../BattlePass/pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Garden/pzaGardenMgr":"pzaGardenMgr","../Garden/pzaGardenView":"pzaGardenView","../Load/pzaPreLoadManager":"pzaPreLoadManager","../LoginRewardView/pzaLoginRewardMgr":"pzaLoginRewardMgr","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelMy":"pzaChannelMy","../utils/pzakc":"pzakc","./Battle/pzaNewPlantView":"pzaNewPlantView","./Battle/pzaOptionView":"pzaOptionView","./pzaCommonMask":"pzaCommonMask","./pzaGiftView":"pzaGiftView","./pzaHandbookView":"pzaHandbookView","./pzaPreOpenView":"pzaPreOpenView","./pzaSaveView":"pzaSaveView","./pzaShareGiftView":"pzaShareGiftView","./pzaShopView":"pzaShopView","./pzaWarningView":"pzaWarningView"}],pzaHtBox:[function(e,a,t){"use strict";cc._RF.push(a,"44316KwvdxB/ppm7+H8BMcc","pzaHtBox");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaGdyxItem"),p=e("./pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.close=null,a.content=null,a.list=null,a.curr_time=0,a.total_time=.1,a.is_scroll=!1,a.spacing=140,a.itemHeight=130,a.jishu_num=0,a.dir=1,a.start_y=0,a}return n(a,e),a.prototype.onLoad=function(){var e=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){e.hide()}),this.list.on("touch-up",function(){e.node.active&&(e.is_scroll=!0)}),this.content.on(cc.Node.EventType.TOUCH_START,function(){e.is_scroll=!1}),this.content.on(cc.Node.EventType.TOUCH_END,function(){e.is_scroll=!0}),this.content.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.is_scroll=!0})},a.prototype.hide=function(){this.is_scroll=!1,this.node.active=!1,p.default.log("\u4e92\u63a8\u5173\u95ed")},a.prototype.show=function(){var e=this;this.node.active=!0,this.node.setPosition(0,0),p.default.removeNodeChildren(this.content),hzzxsdk.getBannerAdList(!1,0,0).then(function(a){console.log("\u83b7\u53d6banner\u5e7f\u544a\u5217\u8868:",a),a&&(a.forEach(function(a,t){var o=cc.instantiate(pzaResMgr.instance().getPrefab("gdyx_item1"));o.parent=e.content;var n=-e.itemHeight/2-e.spacing*t+2*e.spacing;o.setPosition(o.x,o.y+n),o.getComponent(r.default).init(a.banner,a.title,a.description,a.appid,a.page)}),e.start_y=e.content.children[0].y,e.content.setContentSize(a.length,a.length*e.spacing),e.is_scroll=!0)})},a.prototype.update=function(e){if(this.is_scroll){this.curr_time=0;var a=50*e,t=this.content.childrenCount;if(this.content.y,!(t<=4)){var o;if(this.dir>0)this.content.children[0].y>this.spacing&&(this.jishu_num+=this.dir,this.jishu_num>=t&&(this.dir=-this.dir),this.jishu_num<=0&&(this.dir=-this.dir),(o=this.content.children.shift()).y=-(t-1)*this.spacing*this.dir,this.content.children.push(o));else this.content.childrenCount,this.content.children[0].y<0&&(this.jishu_num+=this.dir,this.jishu_num<=0&&(this.dir=-this.dir),(o=this.content.children.pop()).y=this.start_y,this.content.children.unshift(o));for(var n=0;n<t;++n)this.content.children[n].y+=a*this.dir}}},i([c(cc.Node)],a.prototype,"close",void 0),i([c(cc.Node)],a.prototype,"content",void 0),i([c(cc.Node)],a.prototype,"list",void 0),i([s],a)}(cc.Component);t.default=u,cc._RF.pop()},{"./pzaGdyxItem":"pzaGdyxItem","./pzakc":"pzakc"}],pzaHypnoShroom:[function(e,a,t){"use strict";cc._RF.push(a,"8c657KDT2VN1IijQ4azCEx/","pzaHypnoShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaHypnoShroom=void 0;var r=e("../pzaGameState"),p=e("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.target=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):this.animation.playAnimation("idle",!0),r.pzaGameState.onlyBoomPlant=!1,r.pzaGameState.useShroom=!0,this.target=null},a.prototype.attack=function(e){var a=this;this.target&&!this.target.isDead||(this.target=e,this.animation.playAnimation("attack",!1,function(){a.death(),window.pzaplantManager.removePlant(a.baseData)},function(){window.pzazombieManager.zombieHypnosis(a.target)}))},a.prototype.wakeUp=function(){var a=this;null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation("idle",!0,function(){a.animation.playAnimation("idle",!0)}))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},i([s],a)}(p.pzaBasePlant));t.pzaHypnoShroom=c,cc._RF.pop()},{"../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceGroundEffect:[function(e,a,t){"use strict";cc._RF.push(a,"b6d09eU8vpEEqYlH++7vryG","pzaIceGroundEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaIceGroundEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../pzaGameState"),l=e("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.iceGround=null,a.iceGround2=null,a.iceGroundSlope=null,a.oilGroundConslope=null,a.poolPrefab=null,a.lifeTime=0,a.iceInitZombiePosX=0,a.iceLength=0,a.yIndex=-1,a.xIndex=-1,a.xOriginX=-1,a.isStartCreate=!1,a.isBreak=!1,a.iceMaxLifeTime=30,a}return n(a,e),a.prototype.init=function(e,a,t,o){void 0===o&&(o=!1),this.baseData=e,this.baseData.groundEffect=this.node,this.lifeTime=0,null!=e&&null!=e.logicPos&&(this.node.setPosition(cc.v2(o?700:a,t)),this.node.y-=10,this.node.x-=5,this.iceGround.width=0,this.iceGround2.x=0,this.iceLength=0,this.iceInitZombiePosX=o?700-p.pzaGameState.map.getBlockWidth():e.logicPos.x,this.yIndex=e.yIndex,this.xIndex=-1,this.isStartCreate=!1,window.pzaMapManager.addIceGround(this),this.iceMaxLifeTime=30,this.setType(),4==p.pzaGameState.curChapter&&3==p.pzaGameState.curPart&&(this.iceMaxLifeTime=3e3),1==p.pzaGameState.mapId?(this.node.y+=5,0==this.yIndex?this.node.y=-293.5:1==this.yIndex?this.node.y+=6:2==this.yIndex?this.node.y+=9:3==this.yIndex?this.node.y=61:4==this.yIndex&&(this.node.y=185)):3==p.pzaGameState.mapId&&2==this.yIndex&&(this.node.y=-115))},a.prototype.miniInit=function(e,a,t,o){this.lifeTime=0,this.xIndex=t,this.xOriginX=this.xIndex,this.yIndex=o,this.baseData=null,this.node.setPosition(cc.v2(700,a)),this.node.y-=10,this.iceGround.width=620,window.pzaMapManager.addIceGround(this),this.isStartCreate=!0,1==p.pzaGameState.mapId&&(this.node.y+=30,0==this.yIndex&&(this.node.y-=10)),this.setType()},a.prototype.setType=function(){5==p.pzaGameState.mapId||6==p.pzaGameState.mapId?(this.iceGroundSlope.active=!0,this.iceGround2.active=!1,this.oilGroundConslope.active=!1,6==p.pzaGameState.mapId?this.iceGroundSlope.x=350:this.iceGroundSlope.x=150):(this.iceGroundSlope.active=!1,this.iceGround2.active=!0,this.oilGroundConslope.active=!0)},a.prototype.logicUpdate=function(e){this.isStartCreate||(null==this.baseData||this.baseData.isDead)&&(this.lifeTime+=e,this.lifeTime>=this.iceMaxLifeTime&&this.close())},a.prototype.logicLateUpdate=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos&&!this.isBreak){var e=this.baseData.logicPos.x,a=1;p.pzaGameState.isRoofMode()&&(a=4);var t=p.pzaGameState.map.getBlockLogicPos(a,this.baseData.yIndex,0,0);e=Math.max(t.x-p.pzaGameState.map.getBlockWidth()/2,e);var o=Math.abs(this.iceInitZombiePosX-e);this.iceLength=o,this.iceGround.width=o,this.iceGround2.x=5-o;var n=p.pzaGameState.map.getMapXIndex(cc.v2(this.node.x-o+12,0));this.xIndex=n}},a.prototype.containBlock=function(e,a){return a==this.yIndex&&-1!=this.xIndex&&(!window.pzazombieManager.drZomBoss||7!=e&&8!=e)&&this.xIndex<=e},a.prototype.posHasIce=function(e,a){return a==this.yIndex&&-1!=this.xIndex&&e<=this.xOriginX&&e>=this.xIndex},a.prototype.getIceX=function(){return this.isStartCreate?80:this.node.x-this.iceLength},a.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy(),window.pzaMapManager.removeIceGround(this)},i([u({displayName:"\u51b0\u5730\u9762",type:cc.Node})],a.prototype,"iceGround",void 0),i([u({displayName:"\u51b0\u5730\u97622",type:cc.Node})],a.prototype,"iceGround2",void 0),i([u({displayName:"\u6cb9\u9762\u659c\u5761",type:cc.Node})],a.prototype,"iceGroundSlope",void 0),i([u({displayName:"\u6cb9\u9762\u76f4\u5761",type:cc.Node})],a.prototype,"oilGroundConslope",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaIceGroundEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../pzaGameState":"pzaGameState"}],pzaIceMelonBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"f4d66oKKH9LY6omZfinZPZI","pzaIceMelonBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaIceMelonBaseBullet=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../Data/pzaBuffData"),s=e("../Effect/pzaBaseEffect"),c=e("../pzaGameState"),u=e("./pzaRotateBullet"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.noSpecialEff=!1,a}return n(a,e),a.prototype.colliderZombie=function(e){var a=this;if(e&&!e.isDead)if(null!=e.zombieData){if(e.zombieData&&e.zombieData.hypnosis)this.close();else if(!e.buffData.hasBuff(l.pzaBuffType.DIVE)&&!e.buffData.hasBuff(l.pzaBuffType.FLY))if(e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var t=window.pzazombieManager.getZombie(e);if(null!=t){if(t.hurt(this.atk),this.close(),this.hitPrefab){var o=cc.v2(this.node.x,this.node.y),n=p.pzaNodeManager.getPlantZombieNode(),i=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);i.setParent(n),i.setPosition(o);var u=i.getComponent(s.pzaBaseEffect);u&&u.showEffect(null,null),0!=this.noSpecialEff||e.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||e.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5));for(var d=[],h=e.yIndex-1;h<=e.yIndex+1;h++)h<0||h>=c.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[h].forEach(function(a){null!=a&&a!=e&&a.xIndex==e.xIndex&&(a.buffData.hasBuff(l.pzaBuffType.FLY)||a.buffData.hasBuff(l.pzaBuffType.DIVE)||a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||d.push(a))});d.forEach(function(e){var t=window.pzazombieManager.getZombie(e);null!=t&&(t.hurt(26),0!=a.noSpecialEff||t.baseData.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5)))})}}else this.close()}}else this.close()},i([m({displayName:"\u6ca1\u6709\u7279\u6b8a\u6548\u679c\u5b50\u5f39"})],a.prototype,"noSpecialEff",void 0),i([h],a)}(u.pzaRotateBullet);t.pzaIceMelonBaseBullet=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","../pzaGameState":"pzaGameState","./pzaRotateBullet":"pzaRotateBullet"}],pzaIceMelonBullet:[function(e,a,t){"use strict";cc._RF.push(a,"1ec0apvbm5Ab5fnPlKnZx1N","pzaIceMelonBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaIceMelonBullet=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../Data/pzaBuffData"),s=e("../Effect/pzaBaseEffect"),c=e("../pzaGameState"),u=e("./pzaTrackBullet"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hitPrefab=null,a}return n(a,e),a.prototype.colliderZombie=function(e){if(e&&!e.isDead)if(null!=e.zombieData){if(e.zombieData&&e.zombieData.hypnosis)this.close();else if(e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else if(!e.buffData.hasBuff(l.pzaBuffType.DIVE)&&!e.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)){var a=window.pzazombieManager.getZombie(e);if(null!=a){if(a.hurt(this.atk),this.close(),this.hitPrefab){var t=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(t);var i=n.getComponent(s.pzaBaseEffect);i&&i.showEffect(null,null),e.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||e.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5));for(var u=[],d=e.yIndex-1;d<=e.yIndex+1;d++)d<0||d>=c.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[d].forEach(function(a){null!=a&&a!=e&&a.xIndex==e.xIndex&&(a.buffData.hasBuff(l.pzaBuffType.FLY)||a.buffData.hasBuff(l.pzaBuffType.DIVE)||a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||u.push(a))});u.forEach(function(e){var a=window.pzazombieManager.getZombie(e);null!=a&&(a.hurt(26),a.baseData.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||a.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5)))})}}else this.close()}}else this.close()},i([m({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],a.prototype,"hitPrefab",void 0),i([h],a)}(u.pzaTrackBullet);t.pzaIceMelonBullet=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","../pzaGameState":"pzaGameState","./pzaTrackBullet":"pzaTrackBullet"}],pzaIceShroom:[function(e,a,t){"use strict";cc._RF.push(a,"b65b3EL8DpDPp+QT7IWve1B","pzaIceShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaIceShroom=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaSoundManager"),s=e("../../Common/pzaUtil"),c=e("../../Common/pzaWorldEventManager"),u=e("../Data/pzaBuffData"),d=e("../Data/pzaZombieEnum"),h=e("../pzaEffectManager"),m=e("../pzaGameState"),f=e("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=(z.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lifeTime=0,a.hasBomb=!1,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),this.hasBomb=!1,this.lifeTime=0,a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):(this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.IMM_CONTROL,1)),this.animation.playAnimation("attack",!0,function(){t.attack()})),m.pzaGameState.useShroom=!0},a.prototype.wakeUp=function(){var a=this;null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.baseData.buffData.hasBuff(u.pzaBuffType.FROZEN)||this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.IMM_CONTROL,1)),this.animation.playAnimation("attack",!0,function(){a.attack()}))},a.prototype.attack=function(){var e=this;l.pzaSoundManager.playAudio("IceShroomBoom"),this.hasBomb=!0,window.pzaplantManager.removePlant(this.baseData),this.death(null,null,!1),h.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var a=window.pzazombieManager.findAllZombies();null==a&&(a=[]),null!=window.pzazombieManager.drZomBoss&&a.push(window.pzazombieManager.drZomBoss);var t=0;a.forEach(function(a){a&&null!=a.baseData&&(a.baseData.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||(a.hurt(e.baseData.atk,e.baseData),a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||(a.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,15,.5)),a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_CONTROL)||(a.bePauseControl(),a.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROZEN,4)),null!=a.baseData.zombieData&&a.baseData.zombieData.zombieType!=d.pzaZombieEnum.DR_ZOMBOSS&&h.pzaEffectManager.createFrozenEffect(a.baseData),e.playFrozenSound(),t++))))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,t)},a.prototype.playFrozenSound=function(){var e="frozen_"+s.pzaUtil.getRandomNum(1,2);l.pzaSoundManager.playAudio(e)},a.prototype.flaserDeath=function(){var e=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){e.node.scale=1,e.close()})))},i([y],a)}(f.pzaBasePlant));t.pzaIceShroom=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaImitaterSelectView:[function(e,a,t){"use strict";cc._RF.push(a,"a9b36QLlYdJ/qgNLp+39Zdg","pzaImitaterSelectView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaImitaterSelectView=void 0;var p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/pzaGameState"),s=e("../../Common/pzaGameCommonPool"),c=e("../../Common/pzaGameConfig"),u=e("../../Common/pzaLocalData"),d=e("./pzaBagPlantCard"),h=e("./pzaPlantSelectView"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardPrefab=null,a.cardBag=null,a.selectCardCall=null,a.bagCards=[],a}return n(a,e),a.prototype.init=function(e){var a,t;this.node.active=!0,this.selectCardCall=e;for(var o=p.pzaPlantEnum.PEA_SHOOTER;o<=p.pzaPlantEnum.MELON_PULT;o++)null!=(n=s.pzaGameCommonPool.requestInstant(this.cardPrefab,!1))&&(n.setParent(this.cardBag),null!=(i=n.getComponent(d.pzaBagPlantCard))&&(i.bindData(o,this.clickBagCardCall.bind(this),!0),this.bagCards.push(i)));for(o=p.pzaPlantEnum.CAIWEN;o<=p.pzaPlantEnum.FireBlover;o++){var n,i;null!=(n=s.pzaGameCommonPool.requestInstant(this.cardPrefab,!1))&&(n.setParent(this.cardBag),null!=(i=n.getComponent(d.pzaBagPlantCard))&&(i.bindData(o,this.clickBagCardCall.bind(this),!0),this.bagCards.push(i)))}u.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.BOOM_NUT)>=0&&(n=s.pzaGameCommonPool.requestInstant(this.cardPrefab,!1))&&(n.setParent(this.cardBag),(i=n.getComponent(d.pzaBagPlantCard))&&(i.bindData(p.pzaPlantEnum.BOOM_NUT,this.clickBagCardCall.bind(this),!0),this.bagCards.push(i)));var l=h.pzaPlantSelectView.instance;if(l)try{for(var c=r(l.cardSelectList.cardList),m=c.next();!m.done;m=c.next()){var f=m.value;f&&f.curPlantType&&this.checkPlantRelation(f.curPlantType)}}catch(z){a={error:z}}finally{try{m&&!m.done&&(t=c.return)&&t.call(c)}finally{if(a)throw a.error}}},a.prototype.checkPlantRelation=function(e){var a=c.pzaGameConfig.getPlantConfig(e).relationTypeArr;a&&this.bagCards.forEach(function(t){null!=t&&t.curPlantType!=e&&a.indexOf(t.curPlantType)>=0&&t.setRelateState(!0)})},a.prototype.clickBagCardCall=function(e){l.pzaGameState.curImitaterPlant=e,this.node.active=!1,this.selectCardCall&&this.selectCardCall()},a.prototype.clickCancel=function(){this.node.active=!1},a.prototype.onDisable=function(){this.bagCards.forEach(function(e){e&&e.close()}),this.bagCards=[]},i([z({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],a.prototype,"cardPrefab",void 0),i([z({displayName:"\u5361\u7247\u80cc\u5305\u5bb9\u5668",type:cc.Node})],a.prototype,"cardBag",void 0),i([f],a)}(cc.Component);t.pzaImitaterSelectView=y,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaLocalData":"pzaLocalData","./pzaBagPlantCard":"pzaBagPlantCard","./pzaPlantSelectView":"pzaPlantSelectView"}],pzaImitater:[function(e,a,t){"use strict";cc._RF.push(a,"f40e0hGwCtHWrPXVkj929CB","pzaImitater");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaImitater=void 0;var r=e("../pzaGameState"),p=e("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.imitatTime=0,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),this.imitatTime=1.6;var o=function(){t.imitatTime<=0?t.animation.playAnimation("zhuan",!1,t.imitat.bind(t),function(){}):t.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.imitatTime-=a)},a.prototype.imitat=function(){this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.close(),null!=r.pzaGameState.curImitaterPlant&&(window.pzaplantManager.createPlant(r.pzaGameState.curImitaterPlant,this.baseData.xIndex,this.baseData.yIndex,!0),this.baseData.xIndex,this.baseData.yIndex)},i([s],a)}(p.pzaBasePlant));t.pzaImitater=c,cc._RF.pop()},{"../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaImp:[function(e,a,t){"use strict";cc._RF.push(a,"60cda1HD21OrqK/2G31WX/4","pzaImp");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaImp=void 0;var r=e("../Data/pzaZombieEnum"),p=e("../pzaGameState"),l=e("./pzaBaseZombie"),s=e("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.flying=!0,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,52.22,4.58,-94.44))]])},a.prototype.bindData=function(a,t){var o=this;if(void 0===t&&(t=!1),e.prototype.bindData.call(this,a),p.pzaGameState.isZombieMode())return this.flying=!1,void this.playStayAnimation();this.flying=!0,p.pzaGameState.map&&this.animation.playAnimation("go",!1,function(){o.flying=!1,o.playMoveAnimation(),o.body.curTarget=null},function(){o.setWaterState(o.baseData.xIndex,o.baseData.yIndex),o.hasInWater&&(o.waterMask.enabled=!0,o.curWaterWaveEff&&o.curWaterWaveEff.showWaterWave())})},a.prototype.logicUpdate=function(a){if(this.breakDirtTime>0){this.breakDirtTime-=a;var t=-Math.max(0,this.breakDirtTime/.3)*this.breakDirtHeight+this.animationYOffset;return this.animation.node.y=t*this.zombieScale,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.curShadow&&this.curShadow.showShadow(),this.breakCall&&this.breakCall()))}this.flying||e.prototype.logicUpdate.call(this,a)},a.prototype.zombieDying=function(){e.prototype.zombieDying.call(this),"zombie_1"==this.curSkinName&&this.changeSkin("zombie_1_1")},a.prototype.logicLateUpdate=function(a){null!=this.baseData&&null!=this.baseData.logicPos&&(this.node.setPosition(this.baseData.logicPos),0==this.flying&&e.prototype.logicLateUpdate.call(this,a))},a.prototype.onWaterEnter=function(){this.flying||(this.waterMask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave())},a.prototype.onWaterExit=function(){this.flying||(this.waterMask.enabled=!1,this.curWaterWaveEff&&this.curWaterWaveEff.hideWaterWave())},a.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([u],a)}(l.pzaBaseZombie));t.pzaImp=d,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaItemTips:[function(e,a,t){"use strict";cc._RF.push(a,"21d46ACIxFJC6laTPDuxE/G","pzaItemTips");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Battle/Data/pzaPlantEnum"),p=e("../View/pzaPropNameTip"),l=e("./pzaBeltEquipConfig"),s=e("./pzaGameConfig"),c=e("./pzaGamePropConfig"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.rewardType=0,a.height=50,a.forceDesc=null,a.forceTitle=null,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onClick,this),p.pzaPropNameTip.hideTip()},a.prototype.onDestroy=function(){p.pzaPropNameTip.hideTip()},a.prototype.bindData=function(e,a){if(this.rewardType=e,this.height=50,e==c.pzaGamePropEnum.EQUIP_BELT)(t=l.pzaBeltEquipConfig.getConfig().get(a))&&(this.forceDesc=t.desc,this.forceTitle=t.name);else if(e==c.pzaGamePropEnum.PROP_PLANTE){var t;(t=s.pzaGameConfig.getPlantConfig(a))&&(this.forceDesc=s.pzaGameConfig.PlantBookMap.get(a).desc,a==r.pzaPlantEnum.Phoenix&&(this.forceDesc="\u653b\u51fb\u524d\u65b9\u654c\u4eba\u7684\u540c\u65f6\uff0c\u751f\u6210\u706b\u7403\u7167\u6210\u9ad8\u989d\u4f24\u5bb3"),this.forceTitle=t.name)}},a.prototype.onClick=function(){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));p.pzaPropNameTip.showTip(e,this.rewardType,this.height,.8,this.forceDesc,this.forceTitle)},i([d],a)}(cc.Component));t.default=h,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../View/pzaPropNameTip":"pzaPropNameTip","./pzaBeltEquipConfig":"pzaBeltEquipConfig","./pzaGameConfig":"pzaGameConfig","./pzaGamePropConfig":"pzaGamePropConfig"}],pzaJackZombie:[function(e,a,t){"use strict";cc._RF.push(a,"0acdd8NEJFLu5WbLeyEM4Rs","pzaJackZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJackZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../Plant/pzaAttackType"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaBaseZombie"),m=e("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=(f.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.boomLeftTime=0,a.openBoxTime=0,a.hasOpenBox=!1,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,18.21,19.01,-90.94))]])},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.hasOpenBox=!1,this.boomLeftTime=0,d.pzaGameState.gameMode===d.pzaGameMode.BANG_JAR||d.pzaGameState.isVaseMode()?this.openBoxTime=0:Math.random()>.05?this.openBoxTime=p.pzaUtil.getRandomFloatNum(13.22,20):this.openBoxTime=p.pzaUtil.getRandomFloatNum(4.4,7.54)},a.prototype.playMoveAnimation=function(){this.openBoxTime<=0||e.prototype.playMoveAnimation.call(this)},a.prototype.logicUpdate=function(a){if(e.prototype.logicUpdate.call(this,a),this.boomLeftTime>0)return this.boomLeftTime-=a,void(this.boomLeftTime<=0&&this.boom());!this.hasOpenBox&&this.hasTool&&(this.openBoxTime-=a,this.baseData.isBeControlled()||this.openBoxTime<=0&&(this.hasOpenBox=!0,this.boomLeftTime=1.1,r.pzaSoundManager.playAudio("jackboing"),this.scheduleOnce(function(){r.pzaSoundManager.playAudio("jack_surprise")},.5),this.animation.playAnimation("wow",!1),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.HARD_BODY,-1))))},a.prototype.boom=function(){var e=this;if(null!=this.baseData&&null!=this.baseData.zombieData){this.baseData.zombieDie(),this.death(!1),r.pzaSoundManager.playAudio("explosion");var a=this.baseData.zombieData.zombieType;u.pzaEffectManager.createAshesEffect(a,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,"blow2",null);var t=1.5*d.pzaGameState.map.getBlockWidth();if(!this.baseData.zombieData.hypnosis){if(window.pzaplantManager.pzaJarMap.size>0){for(var o=[""+(this.baseData.xIndex-1)+(this.baseData.yIndex-1),""+this.baseData.xIndex+(this.baseData.yIndex-1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex-1),""+(this.baseData.xIndex-1)+this.baseData.yIndex,""+(this.baseData.xIndex+1)+this.baseData.yIndex,""+(this.baseData.xIndex-1)+(this.baseData.yIndex+1),""+this.baseData.xIndex+(this.baseData.yIndex+1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex+1)],n=!1,i=0;i<o.length;i++){var s=o[i],h=window.pzaplantManager.pzaJarMap.get(s);h&&(window.pzaplantManager.pzaJarMap.delete(s),h.bang(),n=!0)}n&&r.pzaSoundManager.playAudio("vase_breaking")}var m=window.pzaplantManager.findFixRangePlants(this.baseData.logicPos,t);return m&&m.forEach(function(a){a&&a.hurt(1800,e.baseData,c.pzaAttackType.BOOM)}),void window.pzazombieManager.hypnoZombieMap.forEach(function(a,o){null==a||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(e.baseData.logicPos,o.logicPos)<=t&&a&&a.hurt(1800,e.baseData,c.pzaAttackType.BOOM)})}var f=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,t);null!=f&&f.forEach(function(a){var t=a&&a.baseData;null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||a&&a.hurt(1800,e.baseData,c.pzaAttackType.BOOM)})}},a.prototype.zombieIntact=function(){e.prototype.zombieIntact.call(this),this.changeSkin("zombie_1")},a.prototype.zombieHurt=function(){this.zombieHurtState=s.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.toolDeath=function(){e.prototype.toolDeath.call(this),window.pzazombieManager.getJackHasToolAmt()<=0&&r.pzaSoundManager.deleteLoopAudioName("jack_enter")},a.prototype.zombieScream=function(){},a.prototype.close=function(){e.prototype.close.call(this),window.pzazombieManager.getZombieMapData()<=0&&r.pzaSoundManager.deleteLoopAudioName("jack_enter")},i([z],a)}(h.pzaBaseZombie));t.pzaJackZombie=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJalapenoZombie:[function(e,a,t){"use strict";cc._RF.push(a,"0cc46eggGFGJLNBSJlwl8AQ","pzaJalapenoZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJalapenoZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaZombieEnum"),s=e("../Plant/pzaAttackType"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=e("./pzaNormalZombie"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.isNut=!0,a.garlicSkinName="",a.boomIdx=0,a.hasBoomAtk=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.boomIdx=p.pzaUtil.getRandomValueFromArray([5,6,7]),this.hasBoomAtk=!1,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var t=this.animation.findBone("aduck");this.hasUseSrAni?t&&(t.scaleX=.158,t.scaleY=.158):t&&(t.scaleX=0,t.scaleY=0)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.canBoom()},a.prototype.canBoom=function(){this.baseData&&!this.baseData.isDead&&this.baseData.xIndex>=0&&this.baseData.xIndex<=this.boomIdx&&!this.hasBoomAtk&&(this.hasBoomAtk=!0,this.jalapenoAttack(),this.death(!1))},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.changeSkin(this.curSkinName)},a.prototype.jalapenoAttack=function(){window.pzaMapManager.shakeMap(),r.pzaSoundManager.playAudio("JalapenoBoom",.1);for(var e=u.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),a=0;a<12;a++){var t=e.clone();t.x+=100*a,u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,t,0);var o=.1*a+.5;a>=5&&(o=.05*a+.5),c.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,o,t,null)}for(a=0;a<8;a++){var n=""+a+this.baseData.yIndex,i=window.pzaplantManager.plantDataMap.get(n);if(null!=i){var p=window.pzaplantManager.getPlantByData(i);p&&p.hurt(5e4,this.baseData,s.pzaAttackType.BOOM)}var l=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=l){var d=window.pzaplantManager.getPlantByData(l);d&&d.hurt(5e4,this.baseData,s.pzaAttackType.BOOM)}var h=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=h){var m=window.pzaplantManager.getPlantByData(h);m&&m.hurt(5e4,this.baseData,s.pzaAttackType.BOOM)}}},a.prototype.updateMove=function(a){var t=this.baseData.xIndex;e.prototype.updateMove.call(this,a);var o=this.baseData.xIndex;t<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&t>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},a.prototype.ashesDeath=function(a,t){e.prototype.ashesDeath.call(this,a,t)},i([m],a)}(d.pzaNormalZombie));t.pzaJalapenoZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie"}],pzaJalapeno:[function(e,a,t){"use strict";cc._RF.push(a,"b9da2ckJ49KCJ87/y5Ssjij","pzaJalapeno");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJalapeno=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaWorldEventManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=e("./pzaAttackType"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.isHideEff=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),r.pzaSoundManager.playAudio("JalapenoReady",.1),this.preventBreak(),this.playBoomAni(),u.pzaGameState.onlyShroomCofee=!1},a.prototype.playBoomAni=function(){var e=this;this.animation.playAnimation("attack",!1,function(){if(e.isHideEff)return window.pzaplantManager.removePlant(e.baseData),void e.death();r.pzaSoundManager.playAudio("JalapenoBoom",.1),e.body.node.getComponent(cc.BoxCollider).enabled=!0,e.baseData.isDead=!1,e.attack()})},a.prototype.attack=function(){var e=this;window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.shakeMap(),c.pzaEffectManager.createJalapenoBoomEffect(this.baseData),window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var a=0;a<=8;a++)window.pzaMapManager.removeLadder(a,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var t=window.pzazombieManager.zombieDatas[this.baseData.yIndex],o=Array.from(t);null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss.baseData),o.forEach(function(a){if(null!=a&&!a.isDead&&!a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var t=window.pzazombieManager.getZombie(a);e.baseData.plantData.adClearPlant?t&&t.hurt(u.pzaGameState.adCherryBoomDmg,e.baseData,d.pzaAttackType.BOOM):t&&t.hurt(e.baseData.atk,e.baseData,d.pzaAttackType.BOOM),null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS&&(a.buffData.removeBuff(l.pzaBuffType.FROST),a.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},i([f],a)}(h.pzaBasePlant));t.pzaJalapeno=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaJarBody:[function(e,a,t){"use strict";cc._RF.push(a,"cfe8faavQVIrbpwT69qPorB","pzaJarBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJarBody=void 0;var r=e("../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jar=null,a}return n(a,e),a.prototype.enable=function(e){this.jar=e,r.pzaCollisionManager.getInstance.addJarByRow(this.jar.jarData.yIndex,this),this.node.active=!0},a.prototype.disable=function(){this.jar&&r.pzaCollisionManager.getInstance.delJarByRow(this.jar.jarData.yIndex,this),this.node&&this.node.isValid&&(this.node.active=!1)},a.prototype.onCollisionEnter=function(e,a){this.jar.onCollision(e,a)},a.prototype.getCollider=function(){if(!this.node||!this.node.isValid)return null;var e=this.node.getComponent(cc.Collider);return e.poSource=this.node.parent,e},i([l],a)}(cc.Component));t.pzaJarBody=s,cc._RF.pop()},{"../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaJarData:[function(e,a,t){"use strict";var o;cc._RF.push(a,"ea249E7+LRBV62siD2HgrTy","pzaJarData"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJarData=t.pzaJarType=void 0,function(e){e[e.BRONZE_JAR=1]="BRONZE_JAR",e[e.GREEN_JAR=2]="GREEN_JAR",e[e.ZOMBIE_JAR=3]="ZOMBIE_JAR"}(o=t.pzaJarType||(t.pzaJarType={}));t.pzaJarData=function(e,a){this.xIndex=-1,this.yIndex=-1,this.jarType=o.BRONZE_JAR,this.plantType=null,this.zombieType=null,this.hasColli=!1,this.isLighted=!1,this.isSunLight=!1,this.xIndex=e,this.yIndex=a},cc._RF.pop()},{}],pzaJar:[function(e,a,t){"use strict";cc._RF.push(a,"9907b58JHRK+JGjaWAfcmxM","pzaJar");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaJar=void 0;var r=e("../Common/pzaBaseComponent"),p=e("../Common/pzaGameManager"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaSpineController"),c=e("../Common/pzaSpriteFrameManager"),u=e("../Load/pzaBundleObjectPool"),d=e("../Load/pzaPreLoadManager"),h=e("../utils/pzakc"),m=e("./Data/pzaJarData"),f=e("./Effect/pzaDropPlantCard"),z=e("./Zombie/pzaGargantuar"),y=e("./pzaGameState"),g=e("./pzaJarBody"),v=cc._decorator,b=v.ccclass,P=v.property,C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jar=null,a.collider=null,a.content=null,a.jarData=null,a.dropPlantCall=null,a.isHit=!1,a.isBang=!1,a.lightZombieScaleMap=new Map([[1,.4],[26,.4]]),a}return n(a,e),a.prototype.onDisable=function(){this.lightOff(),e.prototype.onDisable.call(this)},a.prototype.init=function(e,a){this.jarData=e,this.dropPlantCall=a,this.jarData.jarType==m.pzaJarType.BRONZE_JAR?(this.jar.setAnimationSkin("skin1"),this.jar.playAnimation("idle1",!0)):this.jarData.jarType==m.pzaJarType.GREEN_JAR?(this.jar.setAnimationSkin("skin3"),this.jar.playAnimation("idle1",!0)):this.jarData.jarType===m.pzaJarType.ZOMBIE_JAR&&(this.jar.setAnimationSkin("skin2"),this.jar.playAnimation("idle1",!0));var t=10*-e.yIndex;this.node.zIndex=t,this.jarData.hasColli&&this.collider.enable(this),this.isHit=!1,this.isBang=!1,this.jarData.isLighted&&this.lighted()},a.prototype.lightOff=function(){this.jar.playAnimation("idle1",!0),h.default.removeNodeChildren(this.content)},a.prototype.lighted=function(){var e=this;if(!this.isBang)if(this.jar.playAnimation("idle2",!0),h.default.removeNodeChildren(this.content),null!=this.jarData.zombieType){var a=new cc.Node;a.anchorY=0;var t=a.addComponent(cc.Sprite);c.pzaSpriteFrameManager.loadZombieCard(this.jarData.zombieType,t),a.parent=this.content,a.x=-5,a.y=30,a.scale=.5}else null!=this.jarData.plantType?u.pzaBundleObjectPool.requestInstantByUrl(d.pzaResourceUrl.DROP_PLANT_CARD,!1,function(a,t){if(null==a&&null!=t){t.scale=.6;var o=t.getComponent(f.pzaDropPlantCard);t.setParent(e.content),o&&o.show(e.jarData.plantType,cc.v2(0,10),!1),t.y=50}else console.error(a)}):this.jarData.isSunLight&&u.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/BattleUI/sun",function(a,t){if(null==a&&null!=t){var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=t,o.scale=.8,o.parent=e.content,o.setPosition(0,55)}else console.error(a)})},a.prototype.bang=function(){var e=this;if(!this.isBang){if(this.isBang=!0,this.collider.disable(),window.pzaplantManager.pzaJarMap.delete(""+this.jarData.xIndex+this.jarData.yIndex),l.pzaSoundManager.playAudio("bangjar"),h.default.removeNodeChildren(this.content),null!=this.jarData.zombieType){var a=window.pzazombieManager.createFixBlockZombieData(this.jarData.zombieType,this.jarData.xIndex,this.jarData.yIndex);window.pzazombieManager.createZombie(a,!1)}else null!=this.jarData.plantType?this.dropPlantCall&&this.dropPlantCall(this.jarData.plantType):this.jarData.isSunLight&&window.pzaplantManager.plantCreateSun(this.node.getPosition(),!0,h.default.randomPick([25,50,75],1)[0]);this.jar.playAnimation("blow",!1,function(){if(e.close(),window.pzaplantManager.pzaJarMap.size<=0){var a=0;if(window.pzazombieManager.zombieDatas.forEach(function(e){a+=e.size}),a>0)return;if(y.pzaGameState.gameMode===y.pzaGameMode.VASE)return void p.pzaGameManager.passPart(e.node.getPosition());y.pzaGameState.gameMode===y.pzaGameMode.VASE_ENDLESS&&p.pzaGameManager.getCurrentGame().nextPart()}})}},a.prototype.pauseSelf=function(){this.jar.pauseAnimation()},a.prototype.resumeSelf=function(){this.jar.resumeAnimation()},a.prototype.onCollision=function(e){if(!this.isHit){var a=e.node.parent.getComponent(z.pzaGargantuar);a&&(a.baseData.yIndex!==this.jarData.yIndex||e.node.parent.x<this.node.x||(this.isHit=!0,this.collider.disable(),a.attackJar(this)))}},i([P({displayName:"\u7f50\u5b50\u52a8\u753b",type:s.pzaSpineController})],a.prototype,"jar",void 0),i([P(g.pzaJarBody)],a.prototype,"collider",void 0),i([P(cc.Node)],a.prototype,"content",void 0),i([b],a)}(r.pzaBaseComponent);t.pzaJar=C,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameManager":"pzaGameManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./Data/pzaJarData":"pzaJarData","./Effect/pzaDropPlantCard":"pzaDropPlantCard","./Zombie/pzaGargantuar":"pzaGargantuar","./pzaGameState":"pzaGameState","./pzaJarBody":"pzaJarBody"}],pzaKDefine:[function(e,a,t){"use strict";cc._RF.push(a,"3240ehvR6hL063gjjpfAYyj","pzaKDefine"),Object.defineProperty(t,"__esModule",{value:!0}),t.State=t.FavSpine=t.Pet=t.PropFrom=t.TokenType=t.BuffType=t.AudioName=t.PhoneType=t.NextEventType=t.Msg=void 0,function(e){e.showIosAlert="showIosAlert",e.favUpgrade="favUpgrade",e.showPrivacy="showPrivacy",e.closeLoading="closeLoading",e.step1done="step1done",e.step2done="step2done",e.step3done="step3done",e.step4done="step4done",e.mainRoundStart="mainRoundStart",e.propSet="propSet",e.propUpdate="propUpdate",e.plotChoose="plotChoose",e.spPlotChoose="spPlotChoose",e.talkChoose="talkChoose",e.addBuff="addBuff",e.onClick="onClick",e.toTalk="toTalk",e.adGet="adGet",e.addGem="addGem",e.addSoul="addSoul",e.addProp="addProp",e.addTreasure="addTreasure",e.addEffectTxt="addEffectTxt",e.showDiary="showDiary",e.addDrug="addDrug",e.gameOver="gameOver",e.gameOverBackMain="gameOverBackMain",e.miniGameOver="miniGameOver",e.selectTreasure="selectTreasure",e.abortBuy="abortBuy",e.battleEnd="battleEnd",e.sellTr="sellTr",e.sellDrug="sellDrug",e.propItemClick="propItemClick",e.gemAdd="gemAdd",e.djUpgrade="djUpgrade",e.petUpgrade="petUpgrade",e.tokenUse="tokenUse",e.tokenNotUse="tokenNotUse",e.selectTitle="selectTitle",e.getTitle="getTitle",e.allSoundLoaded="allSoundLoaded",e.lateLoaed="lateLoaed",e.phoneAlertDone="phoneAlertDone",e.recorderStart="recorderStart",e.recorderStop="recorderStop",e.recorderFail="recorderFail",e.recorderDone="recorderDone",e.showQA="showQA",e.showDrugBuy="showDrugBuy",e.dateSuc="dateSuc",e.dateFail="dateFail",e.videoSuc="videoSuc",e.shareMaxTimes="shareMaxTimes"}(t.Msg||(t.Msg={})),function(e){e[e.none=0]="none",e[e.checkDating=1]="checkDating",e[e.contacts=2]="contacts",e[e.jump=3]="jump",e[e.choose=4]="choose",e[e.trBuy=5]="trBuy",e[e.drugBuy=6]="drugBuy",e[e.diary=7]="diary",e[e.qa=8]="qa",e[e.petUpgrade=9]="petUpgrade",e[e.dead=10]="dead"}(t.NextEventType||(t.NextEventType={})),function(e){e[e.msg=1]="msg",e[e.social=2]="social",e[e.talk=3]="talk",e[e.dating=4]="dating"}(t.PhoneType||(t.PhoneType={})),function(e){e.bgm="bgm",e.wx="wx",e.main_bgm="main_bgm",e.click="click",e.upgrade="upgrade"}(t.AudioName||(t.AudioName={})),function(e){e.base="base",e.trBase="trBase",e.addWhenSub="addWhenSub",e.addWhenAdd="addWhenAdd",e.special="special"}(t.BuffType||(t.BuffType={})),function(e){e.trRefreshToken="trRefreshToken",e.petRefreshToken="petRefreshToken"}(t.TokenType||(t.TokenType={})),function(e){e.tr="tr",e.pet="pet",e.title="title",e.event="event",e.init="init",e.fav="fav",e.qa="qa",e.xingGe="xingGe",e.drug="drug"}(t.PropFrom||(t.PropFrom={})),function(e){e.tiger="\u767d\u864e",e.rosefinch="\u6731\u96c0"}(t.Pet||(t.Pet={})),function(e){e.J1="role1",e.J2="role2",e.J3="role3"}(t.FavSpine||(t.FavSpine={})),function(e){e.idle="idle",e.init="init",e.normal="normal",e.move="move",e.moving="moving",e.play="play",e.stop="stop",e.pause="pause",e.hurt="hurt",e.hurting="hurting",e.dead="dead",e.deading="deading",e.lock="lock",e.run="run",e.runing="runing"}(t.State||(t.State={})),cc._RF.pop()},{}],pzaKernelPult:[function(e,a,t){"use strict";cc._RF.push(a,"a554b9cVXhM/bC6YEkbOSS+","pzaKernelPult");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaKernelPult=void 0;var r=e("../../Common/pzaNodeManager"),p=e("../../Common/pzaSoundManager"),l=e("../../Load/pzaPreLoadManager"),s=e("../Bullet/pzaBulletAnimator"),c=e("../Data/pzaBuffData"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaAttackType"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.cornBulletPrefab=null,a.butterBulletPrefab=null,a.butterBullet=!1,a.atk1AniTime=1.4,a.atk2AniTime=1.4,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.kernelPultInit()},a.prototype.kernelPultInit=function(){this.node.zIndex=10*-this.baseData.yIndex-1,this.butterBullet=!1,this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack"),this.atk2AniTime=this.animation.getAnimationDuration("attack"),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=e.findAttackTarget();null==t?e.animation.playAnimation("idle",!1,a):e.butterBullet?(p.pzaSoundManager.playAudio("kernelpult"),e.animation.playAnimation("attack",!1,a,function(){e.attack(t)},e.atk2AniTime/e.atkInterval)):(p.pzaSoundManager.playAudio("kernelpult"),e.animation.playAnimation("attack",!1,a,function(){e.attack(t)},e.atk1AniTime/e.atkInterval))};a()},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<e.baseData.logicPos.x)&&!o.buffData.hasBuff(c.pzaBuffType.FLY)&&!o.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-e.baseData.logicPos.x;(-1==t||n<t)&&(a=o,t=n)}}),null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.attack=function(e){if(null!=e&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos&&null!=r.pzaNodeManager.getBulletNode()){var a=window.pzazombieManager.getZombie(e);null!=a&&null!=a.getZombieHeadWps(this.baseData.yIndex)&&this.hitZombie(e)}},a.prototype.hitZombie=function(e){u.pzaEffectManager.createEffect(l.pzaResourceUrl.KERNELHIT_EFFECT,e.logicPos);var a=window.pzazombieManager.getZombie(e);if(a&&Math.random()<=.25&&!e.buffData.hasBuff(c.pzaBuffType.IMM_CONTROL)&&!e.buffData.hasBuff(c.pzaBuffType.IMM_IMMOBILIZE)){var t=e.buffData.releaseBuff(c.pzaBuffType.IMMOBILIZE);null!=t?t.buffTime=5:(t=new c.pzaBuffInfo(c.pzaBuffType.IMMOBILIZE,5),e.buffData.addBuff(t),a.bePauseControl(),u.pzaEffectManager.createButterEffect(e,cc.v2(e.logicPos.x,e.logicPos.y+130),a.node.zIndex))}a&&a.hurt(this.baseData.atk,null,h.pzaAttackType.THROW_ATK)},a.prototype.getBulletAni=function(e){void 0===e&&(e=!1);var a=e?this.node.getChildByName("ButterAnimator"):this.node.getChildByName("NormalAnimator");return a.children[0].rotation=-25,a.getComponent(s.pzaBulletAnimator)},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([y({displayName:"\u7389\u7c73\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"cornBulletPrefab",void 0),i([y({displayName:"\u9ec4\u6cb9\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"butterBulletPrefab",void 0),i([z],a)}(m.pzaBasePlant);t.pzaKernelPult=g,cc._RF.pop()},{"../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Bullet/pzaBulletAnimator":"pzaBulletAnimator","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaKnockMiniGame:[function(e,a,t){"use strict";cc._RF.push(a,"98c84tgsCdGFqjTDhs5Kej4","pzaKnockMiniGame");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaKnockMiniGame=void 0;var r=e("../Achieve/pzaAchieve"),p=e("../Achieve/pzaAchieveMgr"),l=e("../Battle/Data/pzaBuffData"),s=e("../Battle/Data/pzaPlantEnum"),c=e("../Battle/Data/pzaZombieEnum"),u=e("../Battle/Plant/pzaAttackType"),d=e("../Battle/pzaGameState"),h=e("../Load/pzaBundleObjectPool"),m=e("../View/pzaCommonMask"),f=e("../utils/pzaChannel"),z=e("../utils/pzakc"),y=e("./pzaCollisionManager"),g=e("./pzaGameConfig"),v=e("./pzaGameManager"),b=e("./pzaGameMiniGame"),P=e("./pzaLocalData"),C=e("./pzaSoundManager"),E=e("./pzaStatisticsMgr"),S=e("./pzaUIManager"),_=e("./pzaUtil"),D=e("./pzaWorldEventManager"),M=cc._decorator,w=M.ccclass,T=(M.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.waveZombieDensity=null,a}var t;return n(a,e),t=a,a.prototype.preLoad=function(e,a,o){this.init();var n=v.pzaGameManager.getGame(d.pzaGameMode.MINIGAME_KNOCK,t).getConf(a);d.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),n.initSun,n.isnight,n.mapId),this.beforeLoad(e,a),d.pzaGameState.isGameEnd=!1,y.pzaCollisionManager.getInstance.setOn();var i=this.getResArr(e,a);S.pzaUIManager.showLoading(),this.initMapPlantZombie(e,a),C.pzaSoundManager.clearAllLoopAudio(),this.readData(e,a),h.pzaBundleObjectPool.preLoadSubResource(i,function(){S.pzaUIManager.hideLoading(o)},function(e){S.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*e)))}),d.pzaGameState.autoPickLock=!1},a.prototype.gameStart=function(a,t){e.prototype.resetTryPlant.call(this),P.pzaLocalData.gameStartTimeStamp=Date.now();var o=400+t;E.pzaStatisticsMgr.sendLevelEvent(t,E.pzaEventLevelType.start,0,0,d.pzaGameMode.MINIGAME),z.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(a,t),d.pzaGameState.sunLightCount=0,window.pzaMapManager.initMapPos(!1),d.pzaGameState.gameMode=d.pzaGameMode.MINIGAME_KNOCK,m.pzaCommonMask.hideMask(),window.pzaMapManager.miniGameinitMapTomb(function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),window.pzaMapManager.hideSunUI(),d.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2,C.pzaSoundManager.playBgm(C.pzaBGMName.BOWLING_BGM)})},a.prototype.refreshNextWave=function(e,a){var o=this;if(e.curWaveTime+=a,e.nextWaveTime-=a,!(e.lastWave||e.nextWaveTime>0)){e.wave++,D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.UPDATE_PART_PRO,null),1==e.wave&&C.pzaSoundManager.playAudio("awooga"),e.curWaveTime=0,e.preRefreshHp=0,e.hasShowRedTip=!1;var n=v.pzaGameManager.getGame(d.pzaGameMode.MINIGAME_KNOCK,t),i=n.getConf(d.pzaGameState.curPart);if(!(null==n||null==i||i.maxWave<e.wave)){i.maxWave==e.wave&&(e.lastWave=!0);var r=window.pzaMapManager.TombSet.size;if(this.waveZombieDensity=this.getConf(d.pzaGameState.curPart).waveZombieDensity,0==this.waveZombieDensity[e.wave]){e.nextWaveTime=2;var p=1;return r<5&&(p=5-r),window.pzaMapManager.randomCreateTomb(p),void(i.maxWave==e.wave+1&&e.showBigWaveTip(!0,!0))}if(e.nextWaveTime=1.4,0==r)return e.wave--,void window.pzaMapManager.randomCreateTomb(5);var s=this.getRandomWaveZombie(e.wave,!1,window.pzaMapManager.getIceYCount());if(null!=s){var c=Math.min(.4,.05*e.wave);if(e.lastWave)window.pzaMapManager.TombMap.forEach(function(a){if(null!=a&&null!=a.xIndex&&null!=a.yIndex&&!window.pzaplantManager.hasPlant(a.xIndex,a.yIndex)){var t=o.getRandomTombZombie(),n=e.createFixBlockZombieData(t,a.xIndex,a.yIndex);Math.random()<=c&&n.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.SPEED_UP,-1,3)),e.createZombie(n,!1,!0)}});else{var u=[];window.pzaMapManager.TombMap.forEach(function(e){null!=e&&null!=e.xIndex&&null!=e.yIndex&&(window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)||u.push(e))});for(var h=_.pzaUtil.getRandomArrayValue(u,s.length),m=0;m<s.length;m++){var f=h[m];if(null!=f&&null!=f.xIndex&&null!=f.yIndex){var z=e.createFixBlockZombieData(s[m],f.xIndex,f.yIndex);Math.random()<=c&&z.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.SPEED_UP,-1,3)),e.createZombie(z,!1,!0)}}}}}}},a.prototype.getRandomWaveZombie=function(e,a,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[];if(this.waveZombieDensity=this.getConf(d.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||e-1<0)return[c.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[e-1];if(null==r||r<=1)return[c.pzaZombieEnum.ZOMBIE];if(a&&e%10==0){i.push(c.pzaZombieEnum.FLAG_ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(c.pzaZombieEnum.FLAG_ZOMBIE);for(var p=Math.min(Math.floor(r/2),8),l=0;l<p;l++)i.push(c.pzaZombieEnum.ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(c.pzaZombieEnum.ZOMBIE)}var s=this.getConf(d.pzaGameState.curPart),u=s.maxWave,h=s.zombieTypes;for(e==u&&e>=10&&h.forEach(function(e){e!=c.pzaZombieEnum.ZOMBIE&&(i.push(e),r-=g.pzaGameConfig.getZombieLevel(e))});r>0;){var m=this.getRandomZombie1(r,e,t,o,n);if(null==m)break;if(m==c.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?t--:m==c.pzaZombieEnum.RED_GARGANTUAR&&e%10!=0&&n--,i.push(m),i.length>=50)break;r-=g.pzaGameConfig.getZombieLevel(m)}return i},a.prototype.getRandomZombie1=function(e,a,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[];if(this.getConf(d.pzaGameState.curPart).zombieTypes.forEach(function(t){if(null!=t){var p=g.pzaGameConfig.getZombieConfig(t);null==p||0==p.refrshWeight||p.refreshLevel>e||p.refrshMinWave>a||o>0&&t==c.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&a%10!=0||(i.push(t),r.push(p.refrshWeight))}}),t>0){var p=g.pzaGameConfig.getZombieConfig(c.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=p&&p.refreshLevel<=e&&(i.push(c.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(p.refrshWeight))}var l=_.pzaUtil.getRandomIndexByWeight(r);return i[l]},a.prototype.lastTombWaterZombie=function(e){var a=this;window.pzaMapManager.TombMap.forEach(function(t){if(null!=t&&null!=t.xIndex&&null!=t.yIndex&&!window.pzaplantManager.hasPlant(t.xIndex,t.yIndex)){var o=a.getRandomTombZombie(),n=e.createFixBlockZombieData(o,t.xIndex,t.yIndex);e.createZombie(n,!1,!0),e.curWaveZombieDatas.add(n)}})},a.prototype.getRandomTombZombie=function(){var e=[c.pzaZombieEnum.ZOMBIE,c.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,c.pzaZombieEnum.CONE_HEAD_ZOMBIE],a=[],t=this.getConf(d.pzaGameState.curPart).zombieTypes;return e.forEach(function(e){if(t.includes(e)){var o=g.pzaGameConfig.getZombieConfig(e);a.push(o.refrshWeight)}}),e[_.pzaUtil.getRandomIndexByWeight(a)]},a.prototype.onZombieDeath=function(e,a,t,o){if(Math.random()<=.1)for(var n=0;n<3;n++)window.pzaplantManager.plantCreateSun(cc.v2(a.logicPos.x+30*(n-1),a.logicPos.y),!0,!0);t&&!a.zombieData.hypnosis&&this.zombieDeathDrop(a),this.isLastWave(e)&&this.checkAllZombieDeath(e)&&(v.pzaGameManager.passPart(a.logicPos),o==u.pzaAttackType.CLEAN_CAR&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_13))},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=!1,a.skipPartBtn.active=!1,a.freePlantNode.active=!0,a.speedBtn.active=!0},a.prototype.showBattlePropButtons=function(e){e.freeSunNode.active=!1,f.pzaChannel.isConfRemote?e.cherryBombNode.active=!0:e.cherryBombNode.active=!1,e.autoPickNode.active=!0,e.clearCDNode.active=!1},a.prototype.isLastWave=function(e){var a=v.pzaGameManager.getGame(d.pzaGameMode.MINIGAME_KNOCK,t).getConf(d.pzaGameState.curPart);return e.wave==a.maxWave},a.prototype.initPartProcess=function(e){e.proLabel.node.active=!1;var a=v.pzaGameManager.getGame(d.pzaGameMode.MINIGAME_KNOCK,t).getConf(d.pzaGameState.curPart);e.maxWave=a.maxWave;for(var o=0;o<e.partFlags.length;o++)e.partFlags[o].active=!1;e.zombieHeadNode.setPosition(-15,37),e.partProNode.active=!1,e.partProgress.fillRange=0;var n=this.getConf(d.pzaGameState.curPart);e.partLabel.string=n.name+""},a.prototype.getAdPlantArr=function(){return[s.pzaPlantEnum.GATLING_PEA,s.pzaPlantEnum.GLOOM_SHROOM,s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.SPIKEROCK,s.pzaPlantEnum.COB_CANNON]},t=i([w],a)}(b.pzaGameMiniGame));t.pzaKnockMiniGame=T,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaLadderZombie:[function(e,a,t){"use strict";cc._RF.push(a,"1da57fq0vhB656A46n7VtJx","pzaLadderZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaLadderZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaPlantEnum"),c=e("../Data/pzaZombieEnum"),u=e("../pzaGameState"),d=e("./pzaBaseZombie"),h=e("./pzaZombieState"),m=e("./pzaZombieSlot"),f=e("../../utils/pzaResMgr"),z=cc._decorator,y=z.ccclass,g=(z.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=m.pzaZombieSlotType.ladder,a.putting=!1,a.directThrowHurt=!0,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,56.23,16.3,-84.22))]])},a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.putting=!1},a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=c.pzaZombieHurtCate.PENETRATE_HURT,a.zombieData.cate=c.pzaZombieCate.Ladder,this.loadNormalSpine(),this.loadLightSpine(function(e){t.animation.spineAnimation.skeletonData.name!=e.name&&(t.animation.spineAnimation.skeletonData=e,t.playMoveAnimation(),t.animation.setAnimationSkin(t.curSkinName))})},a.prototype.loadNormalSpine=function(e){f.pzaResMgr.instance().getSpineSync("Zombie/Zombie_ladder",function(a,t){a?console.error(a):e&&e(t)})},a.prototype.loadLightSpine=function(e){f.pzaResMgr.instance().getSpineSync("Zombie/Zombie_ladder_light",function(a,t){a?console.error(a):e&&e(t)})},a.prototype.attack=function(a,t){if(!this.putting){if(this.hasEquip&&null!=t&&null!=t.plantData){var o=!1;if(t.plantData.cate===s.pzaPlantCate.Nut&&(o=!0),!o){var n=""+t.xIndex+t.yIndex;window.pzaplantManager.pumpkinDataMap.get(n)&&(o=!0)}if(o)return void this.putLadder(t.xIndex,t.yIndex)}e.prototype.attack.call(this,a,t)}},a.prototype.updateMove=function(a){this.putting||e.prototype.updateMove.call(this,a)},a.prototype.putLadder=function(e,a){var t=this;this.hasEquip=!1,this.baseData.zombieData.equipHp=0,this.baseData.zombieData.equipType=c.pzaEquipType.NO_EQUIP,this.putting=!0,this.animation.playAnimation("put",!1,function(){t.equipDeath(!1),window.pzaMapManager.createLadder(e,a,function(){t&&t.body&&(t.putting=!1,t.body.curTarget=null,p.pzaSoundManager.playAudio("ladder_zombie"))})})},a.prototype.equipDeath=function(){var a=this;if(this&&this.baseData&&!this.baseData.isDead){if(e.prototype.equipDeath.call(this,!1),null!=this.baseData&&null!=this.baseData.zombieData){var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t}this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA),this.loadNormalSpine(function(e){a.animation.spineAnimation.skeletonData=e,a.playMoveAnimation(),a.animation.setAnimationSkin(a.curSkinName)})}},a.prototype.zombieHurtSound=function(a){this.hasEquip?p.pzaSoundManager.playAudio("ladderHurt"):e.prototype.zombieHurtSound.call(this,a)},a.prototype.changeMapRow=function(){var e=this;this.zombieState=h.pzaZombieState.EAT_ATK,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.GARLIC,-1)),this.animation.playAnimation("attack",!1,null,function(){if(e.baseData.buffData.removeBuff(l.pzaBuffType.GARLIC),Math.random()>.5){var a=e.changeToUpRow();e.changeTargetRow=a?e.baseData.yIndex+1:e.baseData.yIndex-1}else a=e.changeToDownRow(),e.changeTargetRow=a?e.baseData.yIndex-1:e.baseData.yIndex+1;var t=10*-e.changeTargetRow+5;e.node.zIndex=t})},a.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([y],a)}(d.pzaBaseZombie));t.pzaLadderZombie=g,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../utils/pzaResMgr":"pzaResMgr","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaLadder:[function(e,a,t){"use strict";cc._RF.push(a,"7842fvV5qpEkYd8Jnh+OIgm","pzaLadder");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaLadder=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.leftPortal=null,a.rightPortal=null,a.token=null,a.poolPrefab=null,a.xIndex=-1,a.yIndex=-1,a.logicPos=null,a.openDoorTime=0,a}return n(a,e),a.prototype.init=function(e,a,t){this.xIndex=e,this.yIndex=a,this.logicPos=t;var o=10*-a+2;this.node.zIndex=o,this.openDoorTime=0,this.token.active=!0,this.leftPortal.spineAnimation.node.active=!1,this.rightPortal.spineAnimation.node.active=!1},a.prototype.openDoor=function(){var e=this;this.openDoorTime>0?this.openDoorTime=5:(this.openDoorTime=5,this.token.active=!1,this.leftPortal.spineAnimation.node.active=!0,this.rightPortal.spineAnimation.node.active=!0,this.leftPortal.playAnimation("idle",!1,function(){e.leftPortal.playAnimation("idle2",!0,function(){})}),this.rightPortal.playAnimation("idle",!1,function(){e.rightPortal.playAnimation("idle2",!0,function(){})}))},a.prototype.closeDoor=function(){var e=this;this.leftPortal.playAnimation("idle3",!1,function(){e.token.active=!0,e.leftPortal.spineAnimation.node.active=!1,e.rightPortal.spineAnimation.node.active=!1})},a.prototype.logicUpdate=function(e){this.openDoorTime>0&&(this.openDoorTime-=e,this.openDoorTime<=0&&this.closeDoor());var a=""+this.xIndex+this.yIndex;window.pzaplantManager.plantDataMap.has(a)||window.pzaplantManager.pumpkinDataMap.has(a)||window.pzaMapManager.removeLadder(this.xIndex,this.yIndex)},i([c(p.pzaSpineController)],a.prototype,"leftPortal",void 0),i([c(p.pzaSpineController)],a.prototype,"rightPortal",void 0),i([c(cc.Node)],a.prototype,"token",void 0),i([c(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaLadder=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaLaserBean:[function(e,a,t){"use strict";cc._RF.push(a,"09d086Hq+hJmqQK5tKZqUF3","pzaLaserBean");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaLaserBean=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaBuffData"),s=e("../pzaGameState"),c=e("./pzaAttackType"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.attackCD=0,a.specialAtkCD=0,a}return n(a,e),a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.baseData.plantData.atkInterval=2.9,this.playNormalAni()},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.attackCD-=a,this.specialAtkCD-=a)},a.prototype.playNormalAni=function(){var e=this,a=function(){e.attackTarget(a)||(e.animation.node.scaleX=1,e.animation.playAnimation("idle",!1,a,null,1.6))};this.attackTarget(a)||this.animation.playAnimation("idle",!1,a,null,1.6)},a.prototype.attackTarget=function(e){var a=this;if(this.attackCD>0)return!1;var t=this.getCanAttackZombies(this.baseData,0,s.pzaGameState.map.getMapColumn()-1);if(t&&t.length>0){var o=p.pzaUtil.getRandomFloatNum(0,1),n=this.baseData.atk,i="attack1",l=1;.05>=o&&this.specialAtkCD<=0&&(n=400,i="attack2",l=1.8,this.specialAtkCD=20),"attack1"==i?r.pzaSoundManager.playAudio("laserNormal"):r.pzaSoundManager.playAudio("laserSpecial");var c=0,u=this;return this.animation.playAnimation(i,!1,e,function(){if(null==u.baseData||u.baseData.isDead)return!0;"attack2"==i&&(0==c?t=a.getCanAttackZombies(a.baseData,0,2):1==c?t=a.getCanAttackZombies(a.baseData,3,5):2==c&&(t=a.getCanAttackZombies(a.baseData,6,8))),c++,u.hurtZombies(t,n),u.attackCD=u.baseData.plantData.atkInterval},l),!0}},a.prototype.hurtZombies=function(e,a){var t=this;void 0===a&&(a=this.baseData.atk),null!=e&&e.forEach(function(e){if(null!=t.baseData){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(a,t.baseData,c.pzaAttackType.FLOOR_ASHES_ATK)}})},a.prototype.getCanAttackZombies=function(e,a,t){if(null==e||null==e.logicPos)return null;var o=[];return window.pzazombieManager.zombieDatas[e.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&e.xIndex+a<=n.xIndex&&e.xIndex+t>=n.xIndex&&o.push(n)}),o},i([h],a)}(u.pzaBasePlant));t.pzaLaserBean=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaLayeredAssembler:[function(e,a,t){"use strict";cc._RF.push(a,"2605eL/qGtPLZGTchPI+EoK","pzaLayeredAssembler");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var r=cc.RenderFlow.FLAG_RENDER|cc.RenderFlow.FLAG_POST_RENDER,p=cc.RenderFlow.FLAG_OPACITY|cc.RenderFlow.FLAG_WORLD_TRANSFORM,l=!0,s=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.fillBuffers=function(a,t){var o,n;if(e.prototype.fillBuffers.call(this,a,t),l){var s=[];this._layers=[s];var c=(t.worldMatDirty?cc.RenderFlow.FLAG_WORLD_TRANSFORM:0)|(t.parentOpacityDirty?cc.RenderFlow.FLAG_OPACITY_COLOR:0);a.node.__gtDirtyFlag=c;var u=[];u.push(a.node);for(var d,h=1,m=0;m<u.length;){var f=u[m++];c=f.__gtDirtyFlag;try{for(var z=(o=void 0,i(f.children)),y=z.next();!y.done;y=z.next()){var g=y.value;g._activeInHierarchy&&0!==g._opacity&&((d=g._renderFlag&r)>0&&(g.__gtRenderFlag=d,g._renderFlag&=~d,s.push(g)),g.__gtDirtyFlag=c|g._renderFlag&p,u.push(g))}}catch(v){o={error:v}}finally{try{y&&!y.done&&(n=z.return)&&n.call(z)}finally{if(o)throw o.error}}m==h&&(h=u.length,s=[],this._layers.push(s))}}},a.prototype.postFillBuffers=function(e,a){var t,o,n,r,p=a.worldMatDirty;if(l&&this._layers){var s,c;l=!1;try{for(var u=i(this._layers),d=u.next();!d.done;d=u.next()){var h=d.value;if(0!=h.length)try{for(var m=(n=void 0,i(h)),f=m.next();!f.done;f=m.next()){var z=f.value;s=z.__gtRenderFlag,c=z.__gtDirtyFlag,a.worldMatDirty=c>0?1:0,z._renderFlag|=s,cc.RenderFlow.flows[s]._func(z)}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}}}catch(g){t={error:g}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(t)throw t.error}}this._layers=null,l=!0,a.worldMatDirty=p}},a}(cc.Assembler);t.default=s,cc._RF.pop()},{}],pzaLayeredRootSprite:[function(e,a,t){"use strict";cc._RF.push(a,"20f3aEs40NPYZXiSjoceFHQ","pzaLayeredRootSprite");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaLayeredAssembler"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.node._renderFlag|=cc.RenderFlow.FLAG_POST_RENDER},a.prototype._resetAssembler=function(){this.setVertsDirty(),(this._assembler=new r.default).init(this)},i([l],a)}(cc.Sprite));t.default=s,cc._RF.pop()},{"./pzaLayeredAssembler":"pzaLayeredAssembler"}],pzaLilyPad:[function(e,a,t){"use strict";cc._RF.push(a,"6b830Fm1MRJB7qJldotUMJd","pzaLilyPad");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaLilyPad=void 0;var r=e("../pzaGameState"),p=e("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.up=!0,a.stayTime=0,a}return n(a,e),a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.7,cc.v2(0,5)),cc.delayTime(.1),cc.moveTo(.7,cc.v2()),cc.delayTime(.1))))},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.node.zIndex=-1,this.up=!0,this.stayTime=0,this.animation.playAnimation("idle",!0),r.pzaGameState.onlyBoomPlant=!1,r.pzaGameState.onlyShroomCofee=!1,r.pzaGameState.usePondPlant=!0},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.floatMove(a)},a.prototype.floatMove=function(e){this.stayTime-=e,this.stayTime>0||(this.baseData.floatY+=this.up?Math.abs(10-this.baseData.floatY)/10*.2:-.2*Math.abs(this.baseData.floatY+2)/10,this.baseData.floatY>5&&(this.up=!1),this.baseData.floatY<=0&&(this.up=!0,this.stayTime=.3))},a.prototype.logicLateUpdate=function(){if(e.prototype.logicLateUpdate.call(this),this.baseData){var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);null!=t&&(t.floatY=this.baseData.floatY+10);var o=window.pzaplantManager.pumpkinDataMap.get(a);null!=o&&(o.floatY=this.baseData.floatY+10)}},a.prototype.death=function(a,t){e.prototype.death.call(this,a,t,!1)},i([s],a)}(p.pzaBasePlant));t.pzaLilyPad=c,cc._RF.pop()},{"../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaLocalData:[function(e,a,t){"use strict";cc._RF.push(a,"4d625P7p1FM7rUmddZZbB7E","pzaLocalData"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaLocalData=t.pzaLocalBattleData=void 0;var o=e("../Achieve/pzaAchieve"),n=e("../Achieve/pzaAchieveMgr"),i=e("../Battle/Data/pzaPlantEnum"),r=e("../Battle/Data/pzaZombieEnum"),p=e("../Battle/pzaGameState"),l=e("../BattlePass/pzaBattlePassTaskMgr"),s=e("../Garden/pzaGardenMgr"),c=e("../LoginRewardView/pzaBeltHeroActivityMgr"),u=e("../LoginRewardView/pzaLoginRewardMgr"),d=e("../Shop/pzaShopConfig"),h=e("../Task/pzaTaskMgr"),m=e("../utils/pzaChannel"),f=e("../utils/pzakc"),z=e("./pzaBeltEquipConfig"),y=e("./pzaGameConfig"),g=e("./pzaGamePropConfig"),v=e("./pzaOperationMgr"),b=e("./pzaUtil"),P=e("./pzaWorldEventManager"),C=function(){function e(){this.survivalBattleData=[],this.endlessBattleData=[],this.zjEndlessBattleData=[],this.zombieEndlessData=null}return e.saveSurvivalBattleData=function(e){null!=e&&(this.data.survivalBattleData[e.chapter-1]=e,this.localSaveData())},e.saveEndlessBattleData=function(e){null!=e&&(this.data.endlessBattleData[e.chapter-1]=e,this.localSaveData())},e.clearSurvivalBattleData=function(e){this.data.survivalBattleData[e-1]=null,this.localSaveData()},e.clearEndlessBattleData=function(e){this.data.endlessBattleData[e-1]=null,this.localSaveData()},e.getJsonStr=function(){return JSON.stringify(this.data)},e.fixReplace=function(e){if(e)for(var a in e)a.startsWith("_")&&(e[a.substring(1)]=e[a],delete e[a])},e.fixOldBattleData=function(a){if(a)if("Array"!==a.constructor.name)e.fixReplace(a),e.fixOldBattleData(a.plantData),e.fixOldBattleData(a.plantEnvData),e.fixOldBattleData(a.pumpkinData),e.fixOldBattleData(a.noTargetData);else for(var t=0;t<a.length;t++){var o=a[t];e.fixOldBattleData(o)}},e.readLocalData=function(){try{var a=cc.sys.localStorage.getItem(this.DATA_SAVE_KEY);if(!a)return void console.log("\u65e0battle\u5b58\u6863");var t=JSON.parse(a);if(null==t)return;t.survivalBattleData&&(this.data.survivalBattleData=t.survivalBattleData,e.fixOldBattleData(this.data.survivalBattleData)),t.endlessBattleData&&(this.data.endlessBattleData=t.endlessBattleData,e.fixOldBattleData(this.data.endlessBattleData)),t.zjEndlessBattleData&&(this.data.zjEndlessBattleData=t.zjEndlessBattleData,e.fixOldBattleData(this.data.zjEndlessBattleData)),t.zombieEndlessData&&(this.data.zombieEndlessData=t.zombieEndlessData,e.fixOldBattleData(this.data.zombieEndlessData))}catch(o){console.error(o)}},e.localSaveData=function(){var e=this.getJsonStr();cc.sys.localStorage.setItem(this.DATA_SAVE_KEY,e)},e.DATA_SAVE_KEY="pza-battle-data",e.data=new e,e}();t.pzaLocalBattleData=C;var E=function(){function e(){this.saveTime=null,this.saveId=b.pzaUtil.uuid(),this.playerNick=null,this.playerAvatar=null,this.soundValue=.8,this.musicValue=.8,this.gameSound=!0,this.lastLoginTime=null,this.curChapter=1,this.curPart=1,this.passLastPart=!1,this.passWtLastPart=!1,this.plantSlotCount=6,this.coin=0,this.costCoinCount=0,this.adTicket=0,this.videoGetTokenCoinCount=0,this.unlockZombies=[1],this.ownPlants=[i.pzaPlantEnum.PEA_SHOOTER,i.pzaPlantEnum.SUN_FLOWER],this.partStar=[],this.curGuideType=null,this.firstPickCoinTip=!1,this.unlockShop=!1,this.unlockBook=!1,this.unlockAch=!1,this.unlockGarden=!1,this.unlockMoregame=!1,this.unlockSpeed=!1,this.gardenPlants=[],this.gardenToolNum={},this.gardenEnv={},this.achieves={},this.tasks={},this.gardenLastTime=0,this.snailSpeedUpTime=0,this.ownGoods=[],this.purchasedPos=[],this.gameProps=[],this.autoPickLeft=0,this.signDays=0,this.hasSign=!1,this.hasDoubleSign=!1,this.signDasyEnd=[],this.canMonthSign=!1,this.specailAchTime=0,this.maturePlantCount=0,this.hasGardenPlants=[],this.survivalPassChapter=0,this.survivalFlagCount=[],this.zombieTrophy=[],this.vaseTrophy=[],this.zombieFlagCount=0,this.zombieUnlock=1,this.vasePassChapter=0,this.vaseFlagCount=0,this.shareGiftRecIndex=[],this.shareBoomNutPop=!1,this.shareGiftGetAll=!1,this.gatlingAdCount=0,this.gloomShroomAdCount=0,this.cattailAdCount=0,this.spikerockAdCount=0,this.cobCannonAdCount=0,this.winterMelonAdCount=0,this.twinsFlowerAdCnt=0,this.slot8AdCount=0,this.selectPlants=null,this.imitaterPlant=null,this.modeUsePlants=[],this.imitaterUsePlant=[],this.reachPartTime=null,this.usedRedeemCode=[],this.adShareCount=0,this.freeCoinShareCount=0,this.autoPickShareCount=0,this.newGuide=!1,this.preOpenSurvival=!1,this.openPuzzleTip=!1,this.miniUnLockCnt=[],this.miniClickFlag=!0,this.miniFirstPassArr=[],this.monthSignDays=0,this.retroSignDays=0,this.isSignInMonth=!1,this.nowMonth=0,this.weekDayTime=null,this.miniGameNewFlagArr=[[13,1],[14,1],[15,1]],this.superChomperSwFirstIn=!0,this.luckWindmillCardList=null,this.newGameLevel=5,this.saveNewGameLevel=0,this.ttRegisterState=0,this.dataVersion=0,this.saveGameDataCnt=0,this.readGameDataCnt=0,this.canRefreshState=!1,this.plantTrial={},this.hasInGame=!1,this.hasKillYeti=!1,this.weekTwoOpenTip1=!0,this.weekTwoOpenTip2=!0,this.dropPlantArr=[],this.weekTwoStartTip=!0,this.getPowerLeftTime=1800,this.power=20,this.tryPlantCountArrayNormal=[0,0,0,0,0,0,0,0,0,0,0,0],this.watchADTryPlantCountNormal=0,this.tryPlantCountArrayEndLess=[0,0,0,0,0,0,0,0,0,0,0,0],this.watchADTryPlantCountEndLess=0,this.hasBeginGift=!1,this.showBeginViewCount=0,this.showBeginViewMax=99,this.getDaveGiftCount=0,this.showDaveViewCount=0,this.showDaveViewMax=99,this.hasDaveGift=!1,this.getRseGiftCount=0,this.showResViewCount=0,this.getGardenGiftCount=0,this.showGardenViewCount=0,this.showGardenViewMax=99,this.hasGardenGift=!1,this.DelayShowCancelBtnTime=0,this.isShowVideoIcon=!1,this.isFreeDaveTre=!1,this.isSignDouble=!1,this.hasRePortReward=!1,this.showBangJar=!1,this.everyDayShareRwdCurrent=0,this.everyDayShareRwdMax=5,this.shareGiftArray=[],this.noADPlayerUid="",this.vaseEndLessLevelIndex=0,this.vaseEndLessSunCount=0,this.localUID=null,this.normalClickTips=!0,this.testUserId=null,this.resetBpDataTime=null,this.battlePassVer=0,this.battlePassLv=0,this.battlePassExp=0,this.bpHighAdsCnt=0,this.bpDayLoginCnt=1,this.bpDayPlantCnt=0,this.bpDayPassPartCnt=0,this.bpDayWatchAdCnt=0,this.bpDayCostPowerCnt=0,this.bpWeekLoginCnt=1,this.bpWeekCostPowerCnt=0,this.bpWeekUsePropCnt=0,this.bpWeekWatchAdCnt=0,this.bpWeekPassPartCnt=0,this.bpWeekPlantCnt=0,this.bpWeekZombieDeathCnt=0,this.bpWeekGetGoldCnt=0,this.bpWeekSunCnt=0,this.bpWeekEndlessPass=0,this.bpWeekRecordLogin=null,this.bpDayTaskStates={},this.bpWeekTaskStates={},this.bpNormalRewards={},this.bpHighRewards={},this.newPlayerSameDay="",this.newPlayerLoginCnt=0,this.newPlayerUsePropCnt=0,this.newPlayerGetGoldCnt=0,this.newPlayerWatchAdCnt=0,this.newPlayerStep=0,this.passEndlessCnt=0,this.stepStates=Array.from({length:7},function(){return{0:0,1:0,2:0,3:0}}),this.stepRewardStates={0:0,1:0,2:0,3:0,4:0,5:0,6:0},this.newPlayerBtnState=1,this.newPlayerTaskOver=!1,this.newPlayerStartTime=0,this.daysGap=-1,this.beltRiderCoin={},this.beltsCoin={},this.loginRewardStates={1:{normal:0,high:0},2:{normal:0,high:0},3:{normal:0,high:0},4:{normal:0,high:0},5:{normal:0,high:0},6:{normal:0,high:0},7:{normal:0,high:0}},this.loginDays=0,this.watchAdCnt=0,this.watchAdStates={1:0,2:0,3:0,4:0},this.prizeAmounts=[],this.riderPieceAmounts={},this.resetSummonPieceTime=null,this.loginRiderWatchAdRed=!1,this.beltPieceAmounts={},this.riderFallPrizeAmounts=[],this.riderFallTasksOriginal={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},this.riderFallTasks=this.riderFallTasksOriginal,this.riderFallTaskPro={login:1,zombie:0,coin:0,sun:0,passpart:0,ad:0},this.riderFallTry=!0,this.riderFallRedPoint=!0,this.passLastPartCnt=0,this.newPlayerTask_EndTime=null,this.loginActivity_EndTime=null,this.beltEquipData={slotList:[],hasEquipList:{}},this.beltSlotData={slotStateList:{},slotProgressList:{}},this.showHomeGoActLocal=!0,this.redPointPlants={},this.activitiySave={everyDay_ShowOnce:{}},this.gardenShareRwdCount=3,this.shareJarViewRedPoint=!0,this.preUnlockChalleng=!1,this.preUnlockJar=!1,this.recruitDrawArr=[],this.recruitRefreshed=!1,this.recruitDrawCount=0,this.showJarRedPoint=!1,this.showZombieEnemyRedPoint=!1,this.showEndLessRedPoint=!1,this.showSpecialRedPoint=!1}return e.passPart=function(e,a,t){p.pzaGameState.firstPassCurPart=!1,null==this.data.partStar[e-1]&&(p.pzaGameState.firstPassCurPart=!0,this.data.partStar[e-1]=[],this.addDirty("partStar"));var i=this.data.partStar[e-1][a-1];return null==i&&(p.pzaGameState.firstPassCurPart=!0),(null==i||i<t)&&(this.data.partStar[e-1][a-1]=t,this.addDirty("partStar"),h.default.instance().checkStar(this.getAllStar(!0)),n.default.instance().checkAddAchieve(o.pzaAchieveType.ACH_41,this.getAllStar(!0))),e==this.data.curChapter&&a==this.data.curPart&&(v.pzaOperationMgr.setNewPlayerEndTime(e,a),v.pzaOperationMgr.setLoginActivityEndTime(e,a),h.default.instance().checkWhenPassRank(e,a),e>=5&&a>=10&&(this.data.passLastPart=!0,this.addDirty("passLastPart")),e>=10&&a>=10?(this.data.passWtLastPart=!0,this.addDirty("passWtLastPart"),!0):a>=10?(this.data.curChapter++,this.data.curPart=1,this.data.reachPartTime=Date.now(),this.addDirty("curChapter","curPart","reachPartTime"),!0):(this.data.curPart++,this.data.reachPartTime=Date.now(),this.addDirty("curPart","reachPartTime"),!0))},e.getPassPart=function(e){return e==this.data.curChapter?this.data.curPart-1:e>this.data.curChapter?0:-1},e.getPartStar=function(e,a){var t=this.data.partStar[e-1];if(null==t)return 0;var o=t[a-1];return null==o?0:o},e.getAllStar=function(e){void 0===e&&(e=!1);var a=0;e&&(a=5);for(var t=0,o=a;o<this.data.partStar.length;o++){var n=this.data.partStar[o];if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];null!=r&&(t+=r)}}return t>=231&&(t=231),t},e.hasUnlockZombie=function(e){return null!=e&&this.data.unlockZombies.indexOf(e)>=0},e.unlockZombie=function(e){null!=e&&(this.data.unlockZombies.indexOf(e)>=0||this.data.unlockZombies.push(e))},e.passSurvival=function(e){return!(this.data.survivalPassChapter>=e||(this.data.survivalPassChapter=e,this.addDirty("survivalPassChapter"),0))},e.passMiniGame=function(e){return this.data.miniFirstPassArr[e]},e.getSurvivalFlagCount=function(e){if(null==e||e<0)return 0;var a=this.data.survivalFlagCount[e-1];return null==a?0:a},e.passSurvivalEndless=function(e,a){var t=this.data.survivalFlagCount[e-1];(null==t||t<a)&&(this.data.survivalFlagCount[e-1]=a,this.addDirty("survivalFlagCount"))},e.passZombieMode=function(e){return 1!=this.data.zombieTrophy[e-1]&&(this.data.zombieTrophy[e-1]=1,this.addDirty("zombiePassChapter"),!0)},e.passVaseMode=function(a){return e.rfRecordPassPart(),1!=this.data.vaseTrophy[a-1]&&(this.data.vaseTrophy[a-1]=1,this.addDirty("passVaseMode"),!0)},e.getTrophy=function(){return this.data.survivalPassChapter+this.getZombieTrophy()+this.getVaseTrophy()+this.getMiniGameTrophy()},e.getVaseTrophy=function(){if(null==this.data.vaseTrophy||this.data.vaseTrophy.length<=0)return 0;var e=0;return this.data.vaseTrophy.forEach(function(a){1==a&&e++}),e},e.getMiniGameTrophy=function(){for(var e=0,a=0;a<this.data.miniFirstPassArr.length;a++)1==this.data.miniFirstPassArr[a]&&8!=a&&e++;return e>13&&(e=13),e},e.getZombieTrophy=function(){if(null==this.data.zombieTrophy||this.data.zombieTrophy.length<=0)return 0;var e=0;return this.data.zombieTrophy.forEach(function(a){1==a&&e++}),e},e.getMaxTrophy=function(){return 5+e.vaseAllTrophy},e.setPower=function(a){this.data.power+=a,e.addDirty("power"),P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.UPDATE_POWER,null),a<0&&(this.data.bpWeekCostPowerCnt-=a,l.default.instance().checkWeekTask(2,this.data.bpWeekCostPowerCnt),this.data.bpDayCostPowerCnt-=a,l.default.instance().checkDayTask(4,this.data.bpDayCostPowerCnt),e.addDirty("bpWeekCostPowerCnt","bpDayCostPowerCnt"))},e.shareGetCoin=function(){},e.getJsonStr=function(){return JSON.stringify(this.data)},e.costCoin=function(a){e.data.coin-=a,e.data.costCoinCount+=a,e.addDirty("costCoinCount")},e.parseFromData=function(a){if(null==a)return this.data.lastLoginTime=Date.now(),this.data.reachPartTime=Date.now(),cc.audioEngine.setEffectsVolume(this.data.soundValue),void this.addAllDirty();if(null!=a.soundValue&&(this.data.soundValue=a.soundValue),null!=a.musicValue&&(this.data.musicValue=a.musicValue),null!=a.lastLoginTime&&(this.data.lastLoginTime=a.lastLoginTime),null!=a.curChapter&&(this.data.curChapter=a.curChapter),null!=a.curPart&&(this.data.curPart=a.curPart),null!=a.passLastPart&&(this.data.passLastPart=a.passLastPart),null!=a.passWtLastPart&&(this.data.passWtLastPart=a.passWtLastPart),null!=a.plantSlotCount&&(this.data.plantSlotCount=a.plantSlotCount),null!=a.coin&&(this.data.coin=a.coin),null!=a.costCoinCount&&(this.data.costCoinCount=a.costCoinCount),null!=a.adTicket&&(this.data.adTicket=a.adTicket),null!=a.videoGetTokenCoinCount&&(this.data.videoGetTokenCoinCount=a.videoGetTokenCoinCount),null!=a.unlockZombies&&(this.data.unlockZombies=a.unlockZombies),null!=a.ownPlants&&(this.data.ownPlants=a.ownPlants),null!=a.partStar&&(this.data.partStar=a.partStar),null!=a.curGuideType&&(this.data.curGuideType=a.curGuideType),null!=a.firstPickCoinTip&&(this.data.firstPickCoinTip=a.firstPickCoinTip),null!=a.unlockShop&&(this.data.unlockShop=a.unlockShop),null!=a.unlockAch&&(this.data.unlockAch=a.unlockAch),null!=a.unlockBook&&(this.data.unlockBook=a.unlockBook),null!=a.unlockMoregame&&(this.data.unlockMoregame=a.unlockMoregame),null!=a.unlockGarden&&(this.data.unlockGarden=a.unlockGarden),null!=a.unlockSpeed&&(this.data.unlockSpeed=a.unlockSpeed),null!=a.ownGoods&&(this.data.ownGoods=a.ownGoods),null!=a.purchasedPos&&(this.data.purchasedPos=a.purchasedPos),null!=a.gameProps&&(this.data.gameProps=a.gameProps),null!=a.autoPickLeft&&(this.data.autoPickLeft=a.autoPickLeft),null!=a.gardenPlants&&(this.data.gardenPlants=a.gardenPlants),null!=a.gardenToolNum&&(this.data.gardenToolNum=a.gardenToolNum),null!=a.gardenEnv&&(this.data.gardenEnv=a.gardenEnv),null!=a.purchasedPos&&(this.data.purchasedPos=a.purchasedPos),null!=a.signDays&&(this.data.signDays=a.signDays),null!=a.hasSign&&(this.data.hasSign=a.hasSign),null!=a.hasDoubleSign&&(this.data.hasDoubleSign=a.hasDoubleSign),null!=a.signDasyEnd&&(this.data.signDasyEnd=a.signDasyEnd),null!=a.canMonthSign&&(this.data.canMonthSign=a.canMonthSign),null!=a.specailAchTime&&(this.data.specailAchTime=a.specailAchTime),null!=a.maturePlantCount&&(this.data.maturePlantCount=a.maturePlantCount),null!=a.hasGardenPlants&&(this.data.hasGardenPlants=a.hasGardenPlants),this.data.gardenLastTime=a.gardenLastTime,null!=a.snailSpeedUpTime&&(this.data.snailSpeedUpTime=a.snailSpeedUpTime),this.data.achieves=a.achieves||{},this.data.achieves)for(var t=38;t<50;t++)if(e.data.achieves[""+t]&&1==e.data.achieves[""+t]){e.data.achieves[""+t];break}this.data.tasks=a.tasks||{},null!=a.survivalPassChapter&&(this.data.survivalPassChapter=a.survivalPassChapter),null!=a.survivalFlagCount&&(this.data.survivalFlagCount=a.survivalFlagCount),null!=a.zombieTrophy&&(this.data.zombieTrophy=a.zombieTrophy),null!=a.vaseTrophy&&(this.data.vaseTrophy=a.vaseTrophy),null!=a.zombieUnlock&&(this.data.zombieUnlock=a.zombieUnlock),null!=a.zombieFlagCount&&(this.data.zombieFlagCount=a.zombieFlagCount),null!=a.vasePassChapter&&(this.data.vasePassChapter=a.vasePassChapter),null!=a.vaseFlagCount&&(this.data.vaseFlagCount=a.vaseFlagCount),null!=a.saveId&&(this.data.saveId=a.saveId),null!=a.saveTime&&(this.data.saveTime=a.saveTime),null!=a.shareGiftRecIndex&&(this.data.shareGiftRecIndex=a.shareGiftRecIndex),null!=a.shareBoomNutPop&&(this.data.shareBoomNutPop=a.shareBoomNutPop),null!=a.shareGiftGetAll&&(this.data.shareGiftGetAll=a.shareGiftGetAll),null!=a.playerNick&&(this.data.playerNick=a.playerNick),null!=a.playerAvatar&&(this.data.playerAvatar=a.playerAvatar),null!=a.gatlingAdCount&&(this.data.gatlingAdCount=a.gatlingAdCount),null!=a.gloomShroomAdCount&&(this.data.gloomShroomAdCount=a.gloomShroomAdCount),null!=a.cattailAdCount&&(this.data.cattailAdCount=a.cattailAdCount),null!=a.spikerockAdCount&&(this.data.spikerockAdCount=a.spikerockAdCount),null!=a.cobCannonAdCount&&(this.data.cobCannonAdCount=a.cobCannonAdCount),null!=a.winterMelonAdCount&&(this.data.winterMelonAdCount=a.winterMelonAdCount),null!=a.twinsFlowerAdCnt&&(this.data.twinsFlowerAdCnt=a.twinsFlowerAdCnt),null!=a.slot8AdCount&&(this.data.slot8AdCount=a.slot8AdCount),null!=a.modeUsePlants&&(this.data.modeUsePlants=a.modeUsePlants),null!=a.imitaterUsePlant&&(this.data.imitaterUsePlant=a.imitaterUsePlant),null!=a.reachPartTime?this.data.reachPartTime=a.reachPartTime:this.data.reachPartTime=Date.now(),null!=a.usedRedeemCode&&(this.data.usedRedeemCode=a.usedRedeemCode),null!=a.adShareCount&&(this.data.adShareCount=a.adShareCount),null!=a.freeCoinShareCount&&(this.data.freeCoinShareCount=a.freeCoinShareCount),null!=a.autoPickShareCount&&(this.data.autoPickShareCount=a.autoPickShareCount),null!=a.dataVersion&&(this.data.dataVersion=a.dataVersion),null!=a.newGuide&&(this.data.newGuide=a.newGuide),null!=a.preOpenSurvival&&(this.data.preOpenSurvival=a.preOpenSurvival),null!=a.openPuzzleTip&&(this.data.openPuzzleTip=a.openPuzzleTip),null!=a.miniUnLockCnt&&(this.data.miniUnLockCnt=a.miniUnLockCnt),null!=a.miniClickFlag&&(this.data.miniClickFlag=a.miniClickFlag),null!=a.miniFirstPassArr&&(this.data.miniFirstPassArr=a.miniFirstPassArr),null!=a.monthSignDays&&(this.data.monthSignDays=a.monthSignDays),null!=a.retroSignDays&&(this.data.retroSignDays=a.retroSignDays),null!=a.isSignInMonth&&(this.data.isSignInMonth=a.isSignInMonth),null!=a.nowMonth&&(this.data.nowMonth=a.nowMonth),null!=a.ttRegisterState&&(this.data.ttRegisterState=a.ttRegisterState),null!=a.saveGameDataCnt&&(this.data.saveGameDataCnt=a.saveGameDataCnt),null!=a.readGameDataCnt&&(this.data.readGameDataCnt=a.readGameDataCnt),null!=a.canRefreshState&&(this.data.canRefreshState=a.canRefreshState),null!=a.plantTrial&&(this.data.plantTrial=a.plantTrial),null!=a.hasInGame&&(this.data.hasInGame=a.hasInGame),null!=a.hasKillYeti&&(this.data.hasKillYeti=a.hasKillYeti),null!=a.weekTwoOpenTip1&&(this.data.weekTwoOpenTip1=a.weekTwoOpenTip1),null!=a.weekTwoOpenTip2&&(this.data.weekTwoOpenTip2=a.weekTwoOpenTip2),null!=a.dropPlantArr&&(this.data.dropPlantArr=a.dropPlantArr),null!=a.weekTwoStartTip&&(this.data.weekTwoStartTip=a.weekTwoStartTip),null!=a.getPowerLeftTime&&(this.data.getPowerLeftTime=a.getPowerLeftTime),null!=a.power&&(this.data.power=a.power),null!=a.noADPlayerUid&&(this.data.noADPlayerUid=a.noADPlayerUid),null!=a.saveNewGameLevel&&(this.data.saveNewGameLevel=a.saveNewGameLevel),null!=a.weekDayTime&&(this.data.weekDayTime=a.weekDayTime),null!=a.miniGameNewFlagArr&&a.miniGameNewFlagArr.length==this.data.miniGameNewFlagArr.length&&(this.data.miniGameNewFlagArr=a.miniGameNewFlagArr),null!=a.superChomperSwFirstIn&&(this.data.superChomperSwFirstIn=a.superChomperSwFirstIn),null!=a.luckWindmillCardList&&(this.data.luckWindmillCardList=a.luckWindmillCardList),null!=a.hasBeginGift&&(this.data.hasBeginGift=a.hasBeginGift),null!=a.showBeginViewCount&&(this.data.showBeginViewCount=a.showBeginViewCount),null!=a.getDaveGiftCount&&(this.data.getDaveGiftCount=a.getDaveGiftCount),null!=a.getRseGiftCount&&(this.data.getRseGiftCount=a.getRseGiftCount),null!=a.showDaveViewCount&&(this.data.showDaveViewCount=a.showDaveViewCount),null!=a.showResViewCount&&(this.data.showResViewCount=a.showResViewCount),null!=a.hasDaveGift&&(this.data.hasDaveGift=a.hasDaveGift),null!=a.getGardenGiftCount&&(this.data.getGardenGiftCount=a.getGardenGiftCount),null!=a.showGardenViewCount&&(this.data.showGardenViewCount=a.showGardenViewCount),null!=a.hasGardenGift&&(this.data.hasGardenGift=a.hasGardenGift),null!=a.shareGiftArray&&(this.data.shareGiftArray=a.shareGiftArray),null!=a.isFreeDaveTre&&(this.data.isFreeDaveTre=a.isFreeDaveTre),null!=a.hasRePortReward&&(this.data.hasRePortReward=a.hasRePortReward),null!=a.showBangJar&&(this.data.showBangJar=a.showBangJar),null!=a.everyDayShareRwdCurrent&&(this.data.everyDayShareRwdCurrent=a.everyDayShareRwdCurrent),null!=a.tryPlantCountArrayNormal&&(this.data.tryPlantCountArrayNormal=a.tryPlantCountArrayNormal),null!=a.watchADTryPlantCountNormal&&(this.data.watchADTryPlantCountNormal=a.watchADTryPlantCountNormal),null!=a.tryPlantCountArrayEndLess&&(this.data.tryPlantCountArrayEndLess=a.tryPlantCountArrayEndLess),null!=a.watchADTryPlantCountEndLess&&(this.data.watchADTryPlantCountEndLess=a.watchADTryPlantCountEndLess),null!=a.vaseEndLessLevelIndex&&(this.data.vaseEndLessLevelIndex=a.vaseEndLessLevelIndex),null!=a.vaseEndLessSunCount&&(this.data.vaseEndLessSunCount=a.vaseEndLessSunCount),null!=a.normalClickTips&&(this.data.normalClickTips=a.normalClickTips),null!=a.beltEquipData&&(this.data.beltEquipData=a.beltEquipData),null!=a.beltSlotData&&(this.data.beltSlotData=a.beltSlotData),null!=a.localUID&&(this.data.localUID=a.localUID),null!=a.testUserId&&(this.data.testUserId=a.testUserId),null!=a.resetBpDataTime&&(this.data.resetBpDataTime=a.resetBpDataTime),null!=a.battlePassVer&&(this.data.battlePassVer=a.battlePassVer),null!=a.battlePassLv&&(this.data.battlePassLv=a.battlePassLv),null!=a.battlePassExp&&(this.data.battlePassExp=a.battlePassExp),null!=a.bpHighAdsCnt&&(this.data.bpHighAdsCnt=a.bpHighAdsCnt),null!=a.bpDayLoginCnt&&(this.data.bpDayLoginCnt=a.bpDayLoginCnt),null!=a.bpDayPlantCnt&&(this.data.bpDayPlantCnt=a.bpDayPlantCnt),null!=a.bpDayPassPartCnt&&(this.data.bpDayPassPartCnt=a.bpDayPassPartCnt),null!=a.bpDayWatchAdCnt&&(this.data.bpDayWatchAdCnt=a.bpDayWatchAdCnt),null!=a.bpDayCostPowerCnt&&(this.data.bpDayCostPowerCnt=a.bpDayCostPowerCnt),null!=a.bpWeekLoginCnt&&(this.data.bpWeekLoginCnt=a.bpWeekLoginCnt),null!=a.bpWeekCostPowerCnt&&(this.data.bpWeekCostPowerCnt=a.bpWeekCostPowerCnt),null!=a.bpWeekUsePropCnt&&(this.data.bpWeekUsePropCnt=a.bpWeekUsePropCnt),null!=a.bpWeekWatchAdCnt&&(this.data.bpWeekWatchAdCnt=a.bpWeekWatchAdCnt),null!=a.bpWeekPassPartCnt&&(this.data.bpWeekPassPartCnt=a.bpWeekPassPartCnt),null!=a.bpWeekPlantCnt&&(this.data.bpWeekPlantCnt=a.bpWeekPlantCnt),null!=a.bpWeekZombieDeathCnt&&(this.data.bpWeekZombieDeathCnt=a.bpWeekZombieDeathCnt),null!=a.bpWeekGetGoldCnt&&(this.data.bpWeekGetGoldCnt=a.bpWeekGetGoldCnt),null!=a.bpWeekSunCnt&&(this.data.bpWeekSunCnt=a.bpWeekSunCnt),null!=a.bpWeekEndlessPass&&(this.data.bpWeekEndlessPass=a.bpWeekEndlessPass),null!=a.bpWeekRecordLogin&&(this.data.bpWeekRecordLogin=a.bpWeekRecordLogin),null!=a.newPlayerSameDay&&(this.data.newPlayerSameDay=a.newPlayerSameDay),null!=a.newPlayerLoginCnt&&(this.data.newPlayerLoginCnt=a.newPlayerLoginCnt),null!=a.newPlayerUsePropCnt&&(this.data.newPlayerUsePropCnt=a.newPlayerUsePropCnt),null!=a.newPlayerGetGoldCnt&&(this.data.newPlayerGetGoldCnt=a.newPlayerGetGoldCnt),null!=a.newPlayerWatchAdCnt&&(this.data.newPlayerWatchAdCnt=a.newPlayerWatchAdCnt),null!=a.newPlayerStep&&(this.data.newPlayerStep=a.newPlayerStep),null!=a.passEndlessCnt&&(this.data.passEndlessCnt=a.passEndlessCnt),null!=a.newPlayerTaskOver&&(this.data.newPlayerTaskOver=a.newPlayerTaskOver),null!=a.newPlayerBtnState&&(this.data.newPlayerBtnState=a.newPlayerBtnState),null!=a.newPlayerStartTime&&(this.data.newPlayerStartTime=a.newPlayerStartTime),null!=a.daysGap&&(this.data.daysGap=a.daysGap),null!=a.loginDays&&(this.data.loginDays=a.loginDays),null!=a.watchAdCnt&&(this.data.watchAdCnt=a.watchAdCnt),null!=a.prizeAmounts&&(this.data.prizeAmounts=a.prizeAmounts),null!=a.resetSummonPieceTime&&(this.data.resetSummonPieceTime=a.resetSummonPieceTime),null!=a.loginRiderWatchAdRed&&(this.data.loginRiderWatchAdRed=a.loginRiderWatchAdRed),null!=a.riderFallPrizeAmounts&&(this.data.riderFallPrizeAmounts=a.riderFallPrizeAmounts),null!=a.riderFallTry&&(this.data.riderFallTry=a.riderFallTry),null!=a.riderFallRedPoint&&(this.data.riderFallRedPoint=a.riderFallRedPoint),null!=a.passLastPartCnt&&(this.data.passLastPartCnt=a.passLastPartCnt),null!=a.showHomeGoActLocal&&(this.data.showHomeGoActLocal=a.showHomeGoActLocal),null!=a.redPointPlants&&(this.data.redPointPlants=a.redPointPlants),null!=a.activitiySave&&(this.data.activitiySave=a.activitiySave),null!=a.newPlayerTask_EndTime&&(this.data.newPlayerTask_EndTime=a.newPlayerTask_EndTime),null!=a.loginActivity_EndTime&&(this.data.loginActivity_EndTime=a.loginActivity_EndTime),null!=a.gardenShareRwdCount&&(this.data.gardenShareRwdCount=a.gardenShareRwdCount),null!=a.shareJarViewRedPoint&&(this.data.shareJarViewRedPoint=a.shareJarViewRedPoint),a.stepStates&&0!==Object.keys(a.stepStates).length?this.data.stepStates=a.stepStates:this.data.stepStates=Array.from({length:7},function(){return{0:0,1:0,2:0,3:0}}),null!=a.recruitDrawArr&&(this.data.recruitDrawArr=a.recruitDrawArr),null!=a.recruitRefreshed&&(this.data.recruitRefreshed=a.recruitRefreshed),null!=a.recruitDrawCount&&(this.data.recruitDrawCount=a.recruitDrawCount),null!=a.preUnlockChalleng&&(this.data.preUnlockChalleng=a.preUnlockChalleng),null!=a.preUnlockJar&&(this.data.preUnlockJar=a.preUnlockJar),null!=a.showJarRedPoint&&(this.data.showJarRedPoint=a.showJarRedPoint),null!=a.showZombieEnemyRedPoint&&(this.data.showZombieEnemyRedPoint=a.showZombieEnemyRedPoint),null!=a.showEndLessRedPoint&&(this.data.showEndLessRedPoint=a.showEndLessRedPoint),null!=a.showSpecialRedPoint&&(this.data.showSpecialRedPoint=a.showSpecialRedPoint),this.data.stepRewardStates=a.stepRewardStates||{0:0,1:0,2:0,3:0,4:0,5:0,6:0},this.data.loginRewardStates=a.loginRewardStates||{1:{normal:0,high:0},2:{normal:0,high:0},3:{normal:0,high:0},4:{normal:0,high:0},5:{normal:0,high:0},6:{normal:0,high:0},7:{normal:0,high:0}},this.data.watchAdStates=a.watchAdStates||{1:0,2:0,3:0,4:0},this.data.riderFallTasks=a.riderFallTasks||this.data.riderFallTasksOriginal,null==this.data.riderFallTasks[7]&&(this.data.riderFallTasks=this.data.riderFallTasksOriginal),this.data.riderFallTaskPro=a.riderFallTaskPro||{login:0,zombie:0,coin:0,sun:0,passpart:0,ad:0},this.data.riderPieceAmounts=a.riderPieceAmounts||{},this.data.beltPieceAmounts=a.beltPieceAmounts||{},this.data.beltRiderCoin=a.beltRiderCoin||{},this.data.beltsCoin=a.beltsCoin||{},this.data.bpDayTaskStates=a.bpDayTaskStates||{},this.data.bpWeekTaskStates=a.bpWeekTaskStates||{},this.data.bpNormalRewards=a.bpNormalRewards||{},this.data.bpHighRewards=a.bpHighRewards||{},cc.audioEngine.setEffectsVolume(this.data.soundValue),this.resetData(),C.readLocalData(),a.survivalBattleData&&a.length>0&&(C.data.survivalBattleData=a.survivalBattleData,C.localSaveData()),a.endlessBattleData&&a.endlessBattleData.length>0&&(C.data.endlessBattleData=a.endlessBattleData,C.localSaveData()),a.selectPlants&&(this.data.modeUsePlants[0]=a.selectPlants,this.addDirty("modeUsePlants"),a.imitaterPlant&&(this.data.imitaterUsePlant[0]=a.imitaterPlant,this.addDirty("imitaterUsePlant"))),"my"!=m.pzaChannel.instance().channel&&m.pzaChannel.getRemoteTime(function(){if(e.data.saveTime){var a=Math.floor((e.serverTime-e.data.saveTime)/1e3);if(a<0)return;if(e.data.power>=e.maxPower)return;var t=Math.floor(a/1800);if(e.data.power=e.data.power+t>=e.maxPower?e.maxPower:e.data.power+t,e.data.power<e.maxPower){var o=a-1800*t;e.data.getPowerLeftTime=t>0?1800-o:e.data.getPowerLeftTime-o,e.data.getPowerLeftTime<0&&(e.data.getPowerLeftTime=10)}}})},e.resetData=function(){var e=Date.now();b.pzaUtil.isSameDay(e,this.data.lastLoginTime)||(this.data.lastLoginTime=e,this.data.purchasedPos=[],this.data.hasSign=!1,this.data.hasDoubleSign=!1,this.data.unlockSpeed=!1,this.data.adShareCount=0,this.data.freeCoinShareCount=0,this.data.autoPickShareCount=0,this.data.miniClickFlag=!0,this.data.saveGameDataCnt=0,this.data.readGameDataCnt=0,this.data.hasInGame=!1,this.data.getPowerLeftTime=1800,this.data.getDaveGiftCount=0,this.data.getRseGiftCount=0,this.data.showBeginViewCount=0,this.data.showDaveViewCount=0,this.data.showResViewCount=0,this.data.getGardenGiftCount=0,this.data.showGardenViewCount=0,"my"==m.pzaChannel.instance().channel&&(this.data.isFreeDaveTre=!0),this.data.everyDayShareRwdCurrent=0,this.data.everyDayShareRwdCurrent=0,this.data.bpDayLoginCnt=1,this.data.bpDayPlantCnt=0,this.data.bpDayPassPartCnt=0,this.data.bpDayWatchAdCnt=0,this.data.bpDayCostPowerCnt=0,this.data.bpDayTaskStates={},this.data.gardenShareRwdCount=3,this.data.shareJarViewRedPoint=!0,this.data.activitiySave.everyDay_ShowOnce={},this.data.plantTrial[i.pzaPlantEnum.GABY+""]&&(this.data.plantTrial[i.pzaPlantEnum.GABY+""]-=1,this.data.plantTrial[i.pzaPlantEnum.GABY+""]<=0&&(delete this.data.plantTrial[""+i.pzaPlantEnum.GABY],this.data.ownPlants=this.data.ownPlants.filter(function(e){return e!==i.pzaPlantEnum.GABY}))),this.addDirty("getPowerLeftTime","getPowerLeftTime","power","lastLoginTime","purchasedPos","hasSign","hasDoubleSign","unlockSpeed","adShareCount","freeCoinShareCount","autoPickShareCount","saveGameDataCnt","readGameDataCnt","hasInGame","getDaveGiftCount","getRseGiftCount","showBeginViewCount","showDaveViewCount","showResViewCount","getGardenGiftCount","showGardenViewCount","everyDayShareRwdCurrent","showSkinView","bpDayLoginCnt","bpDayPlantCnt","bpDayPassPartCnt","bpDayWatchAdCnt","bpDayCostPowerCnt","bpDayTaskStates","plantTrial","activitiySave","gardenShareRwdCount","shareJarViewRedPoint"))},e.testData=function(){this.testMode=!0},e.unlockChapter=function(){v.pzaOperationMgr.setNewPlayerEndTime(null,null,!0),v.pzaOperationMgr.setLoginActivityEndTime(null,null,!0),this.data.shareGiftRecIndex=[],this.data.survivalPassChapter=5,this.data.curChapter=10,this.data.curPart=10,this.data.passLastPart=!0,this.data.playerNick=null,this.data.playerAvatar=null,this.data.survivalFlagCount=[1,1,1,1,1],this.data.plantSlotCount=7,this.data.gardenPlants=[],this.data.gardenToolNum={},e.data.gardenToolNum[""+s.pzaGardenToolType.sell]||s.default.instance().addGardenTool(s.pzaGardenToolType.sell,1,!1),this.data.partStar=[],this.data.coin=1e6,this.data.curGuideType=null,this.data.plantSlotCount=9,this.data.partStar=[],this.data.unlockBook=!0,this.data.unlockShop=!0,this.data.unlockGarden=!0,this.data.achieves={},this.data.canMonthSign=!0,z.pzaBeltEquipConfig.getBeltEquip(z.pzaBeltEquipEnum.DianWang),z.pzaBeltEquipConfig.getBeltEquip(z.pzaBeltEquipEnum.ShuangQi),z.pzaBeltEquipConfig.getBeltEquip(z.pzaBeltEquipEnum.WuQi);for(var a=[],t=i.pzaPlantEnum.PEA_SHOOTER;t<=i.pzaPlantEnum.IMITATER;t++)this.data.redPointPlants[t]="1",a.push(t);a.push(i.pzaPlantEnum.FIGHTKING),a.push(i.pzaPlantEnum.GABY),a.push(i.pzaPlantEnum.Phoenix),a.push(i.pzaPlantEnum.Gene_SnowPea),this.data.ownPlants=a,this.data.battlePassLv=60,this.addAllDirty();for(var o=r.pzaZombieEnum.ZOMBIE;o<=r.pzaZombieEnum.DR_ZOMBOSS;o++)this.unlockZombie(o);f.default.newPlayerJudgeDay()},e.clearBpData=function(a){void 0===a&&(a=!1);var t=new Date,o=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();e.data.bpWeekCostPowerCnt=0,e.data.bpWeekUsePropCnt=0,e.data.bpWeekPlantCnt=0,e.data.bpWeekZombieDeathCnt=0,e.data.bpWeekGetGoldCnt=0,e.data.bpWeekSunCnt=0,e.data.bpWeekEndlessPass=0,e.data.bpWeekTaskStates={},e.data.bpWeekPassPartCnt=0,e.data.bpWeekWatchAdCnt=0,e.data.bpWeekRecordLogin==o&&!0!==a||(e.data.bpWeekRecordLogin=o,e.data.bpWeekLoginCnt=1),e.addDirty("bpWeekWatchAdCnt","bpWeekPassPartCnt","bpWeekCostPowerCnt","bpWeekUsePropCnt","bpWeekPlantCnt","bpWeekZombieDeathCnt","bpWeekGetGoldCnt","bpWeekSunCnt","bpWeekEndlessPass","bpWeekTaskStates","bpWeekRecordLogin","bpWeekLoginCnt")},e.bpCreatePlant=function(){e.data.bpDayPlantCnt++,e.data.bpWeekPlantCnt++,l.default.instance().checkDayTask(3,e.data.bpDayPlantCnt),l.default.instance().checkWeekTask(6,e.data.bpWeekPlantCnt),e.addDirty("bpDayPlantCnt","bpWeekPlantCnt")},e.bpPassPart=function(){e.updateRedPoint(),e.data.bpDayPassPartCnt++,e.data.bpWeekPassPartCnt++,l.default.instance().checkDayTask(2,e.data.bpDayPassPartCnt),l.default.instance().checkWeekTask(5,e.data.bpWeekPassPartCnt),e.addDirty("bpDayPassPartCnt","bpWeekPassPartCnt")},e.bpWatchAd=function(){e.data.bpDayWatchAdCnt++,e.data.bpWeekWatchAdCnt++,l.default.instance().checkDayTask(5,e.data.bpDayWatchAdCnt),l.default.instance().checkWeekTask(4,e.data.bpWeekWatchAdCnt),e.data.newPlayerWatchAdCnt++,e.data.watchAdCnt++,e.riderFallLeftDay>0&&(e.data.riderFallTaskPro.ad++,u.default.instance().checkRiderFallTask(6,e.data.riderFallTaskPro.ad)),e.addDirty("bpDayWatchAdCnt","bpWeekWatchAdCnt","newPlayerWatchAdCnt","watchAdCnt","riderFallTaskPro")},e.bpUseProp=function(){e.data.bpWeekUsePropCnt++,l.default.instance().checkWeekTask(3,e.data.bpWeekUsePropCnt),e.data.newPlayerUsePropCnt++,e.addDirty("bpWeekUsePropCnt","newPlayerUsePropCnt")},e.bpZombieDie=function(){e.data.bpWeekZombieDeathCnt++,l.default.instance().checkWeekTask(7,e.data.bpWeekZombieDeathCnt),e.riderFallLeftDay>0&&(e.data.riderFallTaskPro.zombie++,u.default.instance().checkRiderFallTask(2,e.data.riderFallTaskPro.zombie)),e.addDirty("bpWeekZombieDeathCnt","riderFallTaskPro")},e.bpGetGold=function(a){e.data.bpWeekGetGoldCnt+=a,e.data.newPlayerGetGoldCnt+=a,l.default.instance().checkWeekTask(8,e.data.bpWeekGetGoldCnt),e.riderFallLeftDay>0&&(e.data.riderFallTaskPro.coin+=a,u.default.instance().checkRiderFallTask(3,e.data.riderFallTaskPro.coin)),e.addDirty("bpWeekGetGoldCnt","newPlayerGetGoldCnt","riderFallTaskPro")},e.bpGetSun=function(a){e.data.bpWeekSunCnt+=a,e.riderFallLeftDay>0&&(e.data.riderFallTaskPro.sun+=a,u.default.instance().checkRiderFallTask(4,e.data.riderFallTaskPro.sun)),e.addDirty("bpWeekSunCnt","riderFallTaskPro"),l.default.instance().checkWeekTask(9,e.data.bpWeekSunCnt)},e.bpEndlessPassPart=function(a){e.data.bpWeekEndlessPass++,e.addDirty("bpWeekEndlessPass"),l.default.instance().checkWeekTask(10,e.data.bpWeekEndlessPass),a>e.data.passEndlessCnt&&(e.data.passEndlessCnt=p.pzaGameState.curPart,e.addDirty("passEndlessCnt"))},e.rfRecordPassPart=function(){e.riderFallLeftDay>0&&(e.data.riderFallTaskPro.passpart++,e.addDirty("riderFallTaskPro")),u.default.instance().checkRiderFallTask(5,e.data.riderFallTaskPro.passpart)},e.updateRedPoint=function(){(p.pzaGameState.isMainMode()||p.pzaGameState.gameMode==p.pzaGameMode.BELT)&&(1==e.data.curChapter&&6==e.data.curPart&&(e.data.showJarRedPoint=!0,e.addDirty("showJarRedPoint")),6==e.data.curChapter&&1==e.data.curPart&&(e.data.showEndLessRedPoint=!0,e.addDirty("showEndLessRedPoint")))},e.obtainGoods=function(e,a){if(null!=e&&null!=a){var t=this.data.ownGoods[e];this.data.ownGoods[e]=null==t?a:a+t,this.addDirty("ownGoods")}},e.consumeGoods=function(e,a){if(null==e||null==a)return!1;var t=this.data.ownGoods[e];return!(null==t||t<a||(this.data.ownGoods[e]=Math.max(0,t-a),this.addDirty("ownGoods"),0))},e.getGoodsCount=function(e){if(null==e)return 0;var a=this.data.ownGoods[e];return null==a?0:a},e.getPlantIdByActivityRewardId=function(e){var a=0,t=c.default.instance().allRewardMap.get(e).activityRewardId;return 1==t?(a=c.default.instance().activityRewardMap.get(t).plantid,""==this.loginActivityNameObj.coinname&&(this.loginActivityNameObj.coinname=c.default.instance().activityRewardMap.get(t).name,this.loginActivityNameObj.piecename=c.default.instance().activityRewardMap.get(t).name2)):2==t&&(a=c.default.instance().activityRewardMap.get(t).plantid,""==this.riderFallNameObj.coinname&&(this.riderFallNameObj.coinname=c.default.instance().activityRewardMap.get(t).name,this.riderFallNameObj.piecename=c.default.instance().activityRewardMap.get(t).name2)),a},e.getPlayerTestId=function(){var a=null;return e.data.testUserId&&e.data.testUserId.length>0?a=e.data.testUserId:(a=p.pzaGameState.testUserId+Math.floor(100*Math.random()),e.data.testUserId=a,e.addDirty("testUserId")),a},e.obtainProp=function(a,t,o){if(void 0===o&&(o=!0),null!=a&&null!=t){var n=this.data.gameProps[a];if(a===g.pzaGamePropEnum.PROP_COIN)return this.data.coin+=t||0,void(o&&this.addDirty("coin"));if(a!=g.pzaGamePropEnum.BELT_ACTIVITY_COIN)if(a!=g.pzaGamePropEnum.HERO_ACTIVITY_COIN){if(a==g.pzaGamePropEnum.PROP_POWER){var i=e.data.power+(t||0);return e.data.power=i,e.addDirty("power"),void P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.UPDATE_POWER,null)}if(a==g.pzaGamePropEnum.PROP_AD_TICKET)return this.data.adTicket+=t||0,this.addDirty("adTicket"),void P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.UPDATE_ADTICKET,null);a!=g.pzaGamePropEnum.RANDOM_GIFT&&(this.data.gameProps[a]=null==n?t:t+n,o&&this.addDirty("gameProps"))}else{var r=this.getPlantIdByActivityRewardId(a);r>0&&(l=e.data.beltRiderCoin[""+r]||0,e.data.beltRiderCoin[""+r]=l+t,e.addDirty("beltRiderCoin"))}else{var p=this.getPlantIdByActivityRewardId(a);if(p>0){var l=e.data.beltsCoin[""+p]||0;e.data.beltsCoin[""+p]=l+t,e.addDirty("beltsCoin")}}}},e.consumeProp=function(e,a){if(void 0===a&&(a=1),null!=e&&null!=a){var t=this.data.gameProps[e];null!=t&&(this.data.gameProps[e]=Math.max(0,t-a),this.addDirty("gameProps"))}},e.getPropCount=function(e){if(null==e)return 0;var a=this.data.gameProps[e];return null==a?0:a},e.hasNutHealing=function(){var e=this.data.ownGoods[d.pzaShopItemType.NUT_HEALING];return null!=e&&e>0},e.getAdvancedPlant=function(){var e=0;return this.data.ownPlants.forEach(function(a){var t=y.pzaGameConfig.getPlantConfig(a);t&&t.rareLevel>1&&e++}),e},e.hasPass12=function(){return this.data.curChapter>1||1==this.data.curChapter&&this.data.curPart>1},e.addAllDirty=function(){e.hasDirty=!0},e.addDirty=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];e.hasDirty=!0},e.readLocalData=function(){return cc.sys.localStorage.getItem(this.DATA_SAVE_KEY)},e.localSaveData=function(){e.hasDirty=!1,this.data.saveTime=Date.now();var a=this.getJsonStr();cc.sys.localStorage.setItem(this.DATA_SAVE_KEY,a)},e.clearData=function(){e.data=new e,localStorage.removeItem(this.DATA_SAVE_KEY),localStorage.removeItem("pza2-battle-data")},e.setLanfeiToken=function(e){cc.sys.localStorage.setItem("lanfeiToken",e)},e.getLanfeiToken=function(){return cc.sys.localStorage.getItem("lanfeiToken")},e.data_verison=1,e.DATA_SAVE_KEY="pza-data-2",e.hasDirty=!1,e.data=new e,e.testMode=!1,e.gardenGuiding=!1,e.isNewUser=0,e.maxAdShareCount=0,e.maxShareRwdCount=3,e.isShowSaveView=!1,e.vaseAllTrophy=0,e.serverTime=0,e.loadingIsOver=!1,e.isPopReviveView=!1,e.hasUseProp=!1,e.gameStartTimeStamp=0,e.isWeekTwo=!1,e.maxPower=20,e.normalPowerCost=2,e.endLessPowerCost=5,e.addPowerValue=5,e.isShowPowerGift=!0,e.isShowGift=!0,e.isNoShareAct=!1,e.isNoShareVideoSwap=!1,e.isShowRecruit=!1,e.isTrailPlant=!1,e.beltPieceType=0,e.riderFallLeftDay=0,e.riderFallLeftTime=null,e.riderPieceType=0,e.loginActivityNameObj={coinname:"",piecename:""},e.riderFallNameObj={coinname:"",piecename:""},e.beltSlotCount=5,e.showHomeGoAct=!0,e.disablePostFn=!1,e.canGetSideRwd=!1,e.challengPage=null,e}();t.pzaLocalData=E,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","../BattlePass/pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr","../Garden/pzaGardenMgr":"pzaGardenMgr","../LoginRewardView/pzaBeltHeroActivityMgr":"pzaBeltHeroActivityMgr","../LoginRewardView/pzaLoginRewardMgr":"pzaLoginRewardMgr","../Shop/pzaShopConfig":"pzaShopConfig","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBeltEquipConfig":"pzaBeltEquipConfig","./pzaGameConfig":"pzaGameConfig","./pzaGamePropConfig":"pzaGamePropConfig","./pzaOperationMgr":"pzaOperationMgr","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaLoginActivityConf:[function(e,a,t){"use strict";cc._RF.push(a,"d313copVCJHqbe+AwL0dCua","pzaLoginActivityConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaActivityTypeEnum=t.pzaLoginActivityConf=void 0;t.pzaLoginActivityConf=function(e){this.id=0,this.normal_rewards="",this.high_rewards="",this.id=e.id,this.normal_rewards=e.rewards||"",this.high_rewards=e.rewards2||""},function(e){e.LOGIN_REWARDER="loginrewarder",e.RIDER_FALL="riderfall",e.NEWPLAYER_TASK="NEWPLAYER_TASK"}(t.pzaActivityTypeEnum||(t.pzaActivityTypeEnum={})),cc._RF.pop()},{}],pzaLoginActivityItem:[function(e,a,t){"use strict";cc._RF.push(a,"36809uAjbNIyrjhkrK3cKLx","pzaLoginActivityItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGamePropConfig"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaRewardManager"),s=e("../Common/pzaSpriteFrameManager"),c=e("../Common/pzaStatisticsMgr"),u=e("../Common/pzaWorldEventManager"),d=e("../utils/pzaChannel"),h=e("../View/pzaPropNameTip"),m=e("./pzaLoginRewardMgr"),f=cc._decorator,z=f.ccclass,y=(f.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_day=null,a.comped=null,a.uncomp=null,a.line=null,a.line2=null,a.id=0,a.btnState=0,a.normalRwdConfArr=[],a.highRwdConfArr=[],a}return n(a,e),a.prototype.onDisable=function(){h.pzaPropNameTip.hideTip()},a.prototype.bindData=function(e){this.line=this.node.getChildByName("line"),this.line2=this.node.getChildByName("line2"),this.comped=this.node.getChildByName("comped"),this.uncomp=this.node.getChildByName("unComp"),this.line.active=p.pzaLocalData.data.loginDays>=e,this.line2.active=!1,(p.pzaLocalData.data.loginDays==e||p.pzaLocalData.data.loginDays>=7&&7==e)&&(this.line2.active=!0),this.comped.active=this.line.active,this.uncomp.active=!this.line.active,this.lab_day=this.node.getChildByName("level").getComponent(cc.Label),this.normalRwdConfArr=[],this.highRwdConfArr=[],this.id=e,this.setReward(),this.setMask()},a.prototype.checkGetNormalRwd=function(){return this.line.active&&0==p.pzaLocalData.data.loginRewardStates[this.id+""].normal},a.prototype.checkGetHighRwd=function(){return this.line.active&&0==p.pzaLocalData.data.loginRewardStates[this.id+""].high},a.prototype.setReward=function(){var e=this,a=m.default.instance().loginActivityMap.get(this.id);this.lab_day.string=this.id+"";for(var t=a.normal_rewards,o=t.split(","),n=function(a){var t="normalItem"+a,n=i.node.getChildByName(t),p=o[a].split("_"),l=i.checkRwdIsGot();i.setItem(parseInt(p[0]),parseInt(p[1]),i.node.getChildByName(t)),i.setItemState(n,l);var s=new r.pzaRewardPropData(parseInt(p[0]),parseInt(p[1]));i.normalRwdConfArr.push(s),n.on(cc.Node.EventType.TOUCH_START,function(){if(0==e.checkGetNormalRwd()){var a=n.convertToWorldSpaceAR(cc.v2(0,0));return h.pzaPropNameTip.showTip(a,parseInt(p[0]),50,.8),!1}u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.UPDATE_VIEW,"clickNormalBtn")})},i=this,p=0;p<o.length;p++)n(p);t=a.high_rewards,o=t.split(",");var l=function(a){var t=o[a].split("_"),n="highItem"+a,i=s.node.getChildByName(n);i.active=!0;var p=s.checkRwdIsGot(!0);0==a?i.x=o.length>=3?16:42:1==a?i.x=o.length>=3?108:170:2==a&&(i.x=o.length>=3?202:-1),s.setItem(parseInt(t[0]),parseInt(t[1]),i),s.setItemState(i,p);var l=new r.pzaRewardPropData(parseInt(t[0]),parseInt(t[1]));s.highRwdConfArr.push(l),i.on(cc.Node.EventType.TOUCH_START,function(){if(!1===e.getHighRewards()){var a=i.convertToWorldSpaceAR(cc.v2(0,0));h.pzaPropNameTip.showTip(a,parseInt(t[0]),50,.8)}})},s=this;for(p=0;p<o.length;p++)l(p)},a.prototype.setItem=function(e,a,t){var o=t.getChildByName("num").getComponent(cc.Label),n=t.getChildByName("propImg").getComponent(cc.Sprite);n.node.scale=.6,o.string=""+a,s.pzaSpriteFrameManager.loadCommonImg(e.toString(),n);var i=t.getChildByName("ad_icon");i&&(i.active=this.line.active)},a.prototype.checkRwdIsGot=function(e){void 0===e&&(e=!1);var a=!0===e?"high":"normal";return 2==p.pzaLocalData.data.loginRewardStates[this.id+""][a]},a.prototype.setItemState=function(e,a){e.getChildByName("got").active=a},a.prototype.setMask=function(){this.node.getChildByName("mask").active=!this.line.active},a.prototype.getNormalRewards=function(){if(0==this.checkGetNormalRwd())return!1;c.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:5}),p.pzaLocalData.data.loginRewardStates[this.id+""].normal=2,p.pzaLocalData.addDirty("loginRewardStates");for(var e=0;e<this.normalRwdConfArr.length;e++){var a=this.node.getChildByName("normalItem"+e);a&&this.setItemState(a,!0)}return this.setMask(),this.normalRwdConfArr},a.prototype.getHighRewards=function(){var e=this;if(0==this.checkGetHighRwd())return!1;c.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:5}),d.pzaChannel.instance().showVideo({sucCall:function(){p.pzaLocalData.data.loginRewardStates[e.id+""].high=2,p.pzaLocalData.addDirty("loginRewardStates"),l.pzaRewardManager.recieveRewards(e.highRwdConfArr);for(var a=0;a<e.highRwdConfArr.length;a++){var t=e.node.getChildByName("highItem"+a);t&&e.setItemState(t,!0)}e.setMask(),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.UPDATE_VIEW,"loginActivity")},failCall:function(){},endCall:function(){},posName:"\u767b\u5f55\u8c6a\u793c\u9886\u53d6"})},i([z],a)}(cc.Component));t.default=y,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaPropNameTip":"pzaPropNameTip","../utils/pzaChannel":"pzaChannel","./pzaLoginRewardMgr":"pzaLoginRewardMgr"}],pzaLoginActivityView:[function(e,a,t){"use strict";cc._RF.push(a,"655efqaAPxMA7XgcjvAqihA","pzaLoginActivityView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Common/pzaRewardManager"),l=e("../Common/pzaWorldEventManager"),s=e("../View/pzaPropNameTip"),c=e("./pzaLoginActivityItem"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.getNormalBtn=null,a.getHighBtn=null,a.node_content=null,a.pre_item=null,a.scroll=null,a.isScrolling=!1,a.itemList=[],a}return n(a,e),a.prototype.onEnable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_VIEW,this.updateView,this),this.node_content.height=900;for(var e=1;e<=7;e++){var a=cc.instantiate(this.pre_item);a.parent=this.node_content,a.getComponent(c.default).bindData(e),this.itemList.push(a.getComponent(c.default))}this.scroll.node.on("scrolling",this.scrolling,this),this.scroll.node.on("scroll-ended",this.scrollEnd,this),this.checkGetNormalRwd(),this.checkGetHighRwd(),this.node_content.getComponent(cc.Layout).verticalDirection=cc.Layout.VerticalDirection.TOP_TO_BOTTOM},a.prototype.updateView=function(e){"loginActivity"===e?(this.checkGetNormalRwd(),this.checkGetHighRwd()):"clickNormalBtn"===e&&this.clickGetNormalRwd()},a.prototype.scrolling=function(){this.isScrolling||(this.isScrolling=!0,s.pzaPropNameTip.hideTip())},a.prototype.scrollEnd=function(){this.isScrolling=!1},a.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_VIEW,this.updateView,this),this.scroll.node.off("scrolling",this.scrolling,this),this.scroll.node.off("scroll-ended",this.scrollEnd,this)},a.prototype.checkGetNormalRwd=function(){var e,a;this.getNormalBtn.active=!1;try{for(var t=r(this.itemList),o=t.next();!o.done;o=t.next()){var n=o.value;if(n&&n.checkGetNormalRwd()){this.getNormalBtn.active=!0;break}}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.checkGetHighRwd=function(){var e,a;this.getHighBtn.active=!1;try{for(var t=r(this.itemList),o=t.next();!o.done;o=t.next()){var n=o.value;if(n&&n.checkGetHighRwd()){this.getHighBtn.active=!0;break}}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.clickGetNormalRwd=function(){var e,a,t,o,n=[];try{for(var i=r(this.itemList),s=i.next();!s.done;s=i.next()){var c=s.value;if(c&&c.checkGetNormalRwd()){var u=c.getNormalRewards();if(u)try{for(var d=(t=void 0,r(u)),h=d.next();!h.done;h=d.next()){var m=h.value;n.push(m)}}catch(f){t={error:f}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(t)throw t.error}}}}}catch(z){e={error:z}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}n.length>0&&p.pzaRewardManager.recieveRewards(n),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_VIEW,"loginActivity")},a.prototype.clickGetHighRwd=function(){var e,a;try{for(var t=r(this.itemList),o=t.next();!o.done;o=t.next()){var n=o.value;if(n&&n.checkGetHighRwd()){n.getHighRewards();break}}}catch(i){e={error:i}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},i([h({type:cc.Node})],a.prototype,"getNormalBtn",void 0),i([h({type:cc.Node})],a.prototype,"getHighBtn",void 0),i([h({displayName:"item\u5bb9\u5668",type:cc.Node})],a.prototype,"node_content",void 0),i([h({displayName:"item\u5956\u52b1\u9884\u8bbe",type:cc.Prefab})],a.prototype,"pre_item",void 0),i([h({displayName:"\u6eda\u52a8\u5bb9\u5668",type:cc.ScrollView})],a.prototype,"scroll",void 0),i([d],a)}(cc.Component);t.default=m,cc._RF.pop()},{"../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaPropNameTip":"pzaPropNameTip","./pzaLoginActivityItem":"pzaLoginActivityItem"}],pzaLoginRewardMgr:[function(e,a,t){"use strict";cc._RF.push(a,"ccb95mitIpGbLmU7rcODBYb","pzaLoginRewardMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../Common/pzaLocalData"),i=e("../utils/pzakc"),r=e("./pzaLoginActivityConf"),p=e("./pzaPieceSummonConf"),l=e("./pzaRiderFallTaskConf"),s=cc._decorator,c=s.ccclass,u=(s.property,function(){function e(){this.loginActivityMap=new Map,this.pieceSummonMap=new Map,this.riderFallPieceMap=new Map,this.riderFallTaskMap=new Map}var a;return a=e,e.instance=function(){return a._me||(a._me=new a),a._me},e.prototype.initLoginActivityRewards=function(e){if(!n.pzaLocalData.disablePostFn){for(var a=0;a<e.length;a++){var t=new r.pzaLoginActivityConf(e[a]);this.loginActivityMap.set(t.id,t)}i.default.log("\u767b\u5f55\u6d3b\u52a8\u5956\u52b1map: ",this.loginActivityMap)}},e.prototype.initPieceSummon=function(e){if(!n.pzaLocalData.disablePostFn){for(var a=0;a<e.length;a++){var t=new p.pzaPieceSummonConf(e[a]);this.pieceSummonMap.set(t.id,t)}0==n.pzaLocalData.data.prizeAmounts.length&&(this.pieceSummonMap.forEach(function(e){n.pzaLocalData.data.prizeAmounts.push(e.prizeAmount)}),n.pzaLocalData.addDirty("prizeAmounts"))}},e.prototype.resetPrizeAmounts=function(){n.pzaLocalData.disablePostFn||(n.pzaLocalData.data.prizeAmounts=[],this.pieceSummonMap.forEach(function(e){n.pzaLocalData.data.prizeAmounts.push(e.prizeAmount)}),n.pzaLocalData.addDirty("prizeAmounts"))},e.prototype.initRiderFallPieceRate=function(e){if(!n.pzaLocalData.disablePostFn){for(var a=0;a<e.length;a++){var t=new p.pzaPieceSummonConf(e[a]);this.riderFallPieceMap.set(t.id,t)}0==n.pzaLocalData.data.riderFallPrizeAmounts.length&&(this.riderFallPieceMap.forEach(function(e){n.pzaLocalData.data.riderFallPrizeAmounts.push(e.prizeAmount)}),n.pzaLocalData.addDirty("riderFallPrizeAmounts"))}},e.prototype.resetRiderFallPrizeAmounts=function(){n.pzaLocalData.disablePostFn||(n.pzaLocalData.data.riderFallPrizeAmounts=[],this.riderFallPieceMap.forEach(function(e){n.pzaLocalData.data.riderFallPrizeAmounts.push(e.prizeAmount)}),n.pzaLocalData.addDirty("riderFallPrizeAmounts"))},e.prototype.initRiderFallTask=function(e){if(!n.pzaLocalData.disablePostFn)for(var a=0;a<e.length;a++){var t=new l.pzaRiderFallTaskConf(e[a]);this.riderFallTaskMap.set(t.id,t)}},e.prototype.checkRiderFallTask=function(e,a){n.pzaLocalData.disablePostFn||2!=n.pzaLocalData.data.riderFallTasks[e+""]&&a>=this.riderFallTaskMap.get(e).condNum&&!n.pzaLocalData.data.riderFallTasks[e+""]&&(n.pzaLocalData.data.riderFallTasks[e+""]=1,n.pzaLocalData.addDirty("riderFallTasks"))},e._me=null,a=o([c],e)}());t.default=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../utils/pzakc":"pzakc","./pzaLoginActivityConf":"pzaLoginActivityConf","./pzaPieceSummonConf":"pzaPieceSummonConf","./pzaRiderFallTaskConf":"pzaRiderFallTaskConf"}],pzaLoginRewardView:[function(e,a,t){"use strict";cc._RF.push(a,"d15efUilt5Kcoqjm4NFMszO","pzaLoginRewardView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaCommonPopView"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGamePropConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaStatisticsMgr"),u=e("../View/pzaPropNameTip"),d=e("../View/pzaRecruitView"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.btn_loginReward=null,a.btn_mRider=null,a.lab_loginReward=null,a.lab_mRider=null,a.btn_adReward=null,a.node_content=null,a.pre_loginReward=null,a.pre_Rider=null,a.red_loginActivity=null,a.red_riderActivity=null,a.spris_select=[],a.redCheckTime=0,a.activityType=0,a.recruitView=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.btn_adReward.active=!1,this.btn_loginReward.on(cc.Node.EventType.TOUCH_END,this.clickLoginBtn,this),this.btn_mRider.on(cc.Node.EventType.TOUCH_END,this.clickMaskRider,this),this.btn_adReward.on(cc.Node.EventType.TOUCH_END,this.clickAdReward,this),this.clickLoginBtn(),this.redCheckTime=1,s.pzaLocalData.beltPieceType<0&&(this.btn_mRider.active=!1),this.refreshRedTip(),this.checkTask(),c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"23"},{name:"adname",value:"\u767b\u5f55\u8c6a\u793c\u5e7f\u544a\u53ec\u5524"})},a.prototype.refreshRedTip=function(){this.red_loginActivity.active=!1,cc.tween(this.red_loginActivity).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start(),this.red_riderActivity.active=!1,cc.tween(this.red_riderActivity).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()},a.prototype.onDisable=function(){this.btn_loginReward.off(cc.Node.EventType.TOUCH_END,this.clickLoginBtn,this),this.btn_mRider.off(cc.Node.EventType.TOUCH_END,this.clickMaskRider,this),this.btn_adReward.off(cc.Node.EventType.TOUCH_END,this.clickAdReward,this)},a.prototype.clickLoginBtn=function(){1!=this.activityType&&(this.recruitView&&this.recruitView.isDrawing||(this.activityType=1,this.checkRiderRedState(),this.red_loginActivity.active=!1,this.node_content.removeAllChildren(),cc.instantiate(this.pre_loginReward).parent=this.node_content,this.btn_loginReward.getComponent(cc.Sprite).spriteFrame=this.spris_select[1],this.btn_mRider.getComponent(cc.Sprite).spriteFrame=this.spris_select[0],this.lab_loginReward.node.getComponent(cc.LabelOutline).color=cc.Color.fromHEX(cc.color(),"#e57100"),this.lab_loginReward.enableBold=!0,this.lab_mRider.node.getComponent(cc.LabelOutline).color=cc.Color.fromHEX(cc.color(),"#08486d"),this.lab_mRider.enableBold=!1))},a.prototype.clickMaskRider=function(){if(!(2==this.activityType||this.recruitView&&this.recruitView.isDrawing)){this.activityType=2,u.pzaPropNameTip.hideTip(),this.checkLoginActivity(),this.red_riderActivity.active=!1,this.node_content.removeAllChildren();var e=cc.instantiate(this.pre_Rider);e.parent=this.node_content,this.recruitView=e.getComponent(d.pzaRecruitView),this.btn_loginReward.getComponent(cc.Sprite).spriteFrame=this.spris_select[0],this.btn_mRider.getComponent(cc.Sprite).spriteFrame=this.spris_select[1],this.lab_mRider.node.getComponent(cc.LabelOutline).color=cc.Color.fromHEX(cc.color(),"#e57100"),this.lab_mRider.enableBold=!0,this.lab_loginReward.node.getComponent(cc.LabelOutline).color=cc.Color.fromHEX(cc.color(),"#08486d"),this.lab_loginReward.enableBold=!1}},a.prototype.clickAdReward=function(){this.node_content.removeAllChildren()},a.prototype.update=function(e){this.redCheckTime-=e,this.redCheckTime<=0&&(this.redCheckTime=3,this.checkTask())},a.prototype.checkLoginActivity=function(){for(var e=!1,a=1;a<=7;a++)if(2!=s.pzaLocalData.data.loginRewardStates[a+""].normal&&a<=s.pzaLocalData.data.loginDays){e=!0;break}this.red_loginActivity.active=!!e},a.prototype.checkRiderRedState=function(){for(var e=!1,a=1;a<=4;a++)if(1==s.pzaLocalData.data.watchAdStates[a+""]){e=!0;break}if(0==e&&(e=s.pzaLocalData.data.loginRiderWatchAdRed),0==e){var t=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.BELT_ACTIVITY_COIN);t>0&&(s.pzaLocalData.data.beltsCoin[""+t]||0)>=10&&(e=!0)}this.red_riderActivity.active=!!e},a.prototype.checkTask=function(){2==this.activityType&&this.checkLoginActivity(),1==this.activityType&&this.checkRiderRedState()},a.prototype.close=function(){this.recruitView&&this.recruitView.isDrawing||p.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u767b\u5f55\u8c6a\u793c\u6309\u94ae",type:cc.Node})],a.prototype,"btn_loginReward",void 0),i([f({displayName:"\u5047\u9762\u6309\u94ae",type:cc.Node})],a.prototype,"btn_mRider",void 0),i([f({displayName:"\u767b\u5f55\u8c6a\u793c\u6309\u94ae\u6587\u5b57",type:cc.Label})],a.prototype,"lab_loginReward",void 0),i([f({displayName:"\u9a91\u58eb\u964d\u4e34\u6309\u94ae\u6587\u5b57",type:cc.Label})],a.prototype,"lab_mRider",void 0),i([f({displayName:"\u5e7f\u544a\u6709\u793c\u6309\u94ae",type:cc.Node})],a.prototype,"btn_adReward",void 0),i([f({displayName:"\u5b50\u9884\u8bbe\u7236\u5bb9\u5668",type:cc.Node})],a.prototype,"node_content",void 0),i([f({displayName:"\u767b\u5f55\u8c6a\u793c\u9884\u8bbe\u4f53",type:cc.Prefab})],a.prototype,"pre_loginReward",void 0),i([f({displayName:"\u5047\u9762\u6d3b\u52a8\u9884\u8bbe\u4f53",type:cc.Prefab})],a.prototype,"pre_Rider",void 0),i([f({displayName:"\u767b\u5f55\u6d3b\u52a8\u7ea2\u70b9",type:cc.Node})],a.prototype,"red_loginActivity",void 0),i([f({displayName:"\u5047\u9762\u6d3b\u52a8\u7ea2\u70b9",type:cc.Node})],a.prototype,"red_riderActivity",void 0),i([f({displayName:"\u6309\u94ae\u9009\u4e2d\u56fe\u7247",type:[cc.SpriteFrame]})],a.prototype,"spris_select",void 0),i([m],a)}(r.default);t.default=z,cc._RF.pop()},{"../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../View/pzaPropNameTip":"pzaPropNameTip","../View/pzaRecruitView":"pzaRecruitView"}],pzaLoginRiderHelpView:[function(e,a,t){"use strict";cc._RF.push(a,"fd60fzXu4xPyrOfcGKxAbH5","pzaLoginRiderHelpView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaCommonPopView"),p=e("../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_tip=null,a.activityType=0,a}return n(a,e),a.prototype.bindData=function(e){this.activityType=e,1==this.activityType?this.lab_tip.string="1.\u6bcf\u65e5\u767b\u5f55\u53ef\u9886\u53d6\u53ec\u5524\u9053\u5177\u5956\u52b1\u3002\n2.\u6d88\u80171\u4e2a\u76d6\u4e9a\u8bb0\u5fc6\u4f53\xb7\u738b\u724c\u53ec\u55241\u6b21\uff0c\u53ef\u83b7\u5f971-5\u4e2a\u53cc\u9a91\xb7\u75be\u98ce\u738b\u724c\u8170\u5e26\u788e\u7247\u3002\n3.\u6d88\u801710\u4e2a\u76d6\u4e9a\u8bb0\u5fc6\u4f53\xb7\u738b\u724c\u53ec\u552410\u6b21\uff0c\u53ef\u83b7\u5f9710-50\u4e2a\u53cc\u9a91\xb7\u75be\u98ce\u738b\u724c\u8170\u5e26\u788e\u7247\u3002\n4.\u53ec\u5524\u6982\u7387\uff1a1\u4e2a\u788e\u724732%\uff0c2\u4e2a\u788e\u724722%,3\u4e2a\u788e\u724715%\uff0c4\u4e2a\u788e\u72479%\uff0c5\u4e2a\u788e\u72476%\uff0c\u9a91\u58eb\u5e0116%\u3002\n5.\u8170\u5e26\u788e\u7247\u6570\u91cf\u8fbe\u5230300\u65f6\uff0c\u81ea\u52a8\u5408\u6210\u4e3a\u6210\u54c1\u8170\u5e26":2==this.activityType&&(this.lab_tip.string="1.\u5b8c\u6210\u4efb\u52a1\u53ef\u9886\u53d6\u53ec\u5524\u9053\u5177\u5956\u52b1\u3002\n2.\u6d88\u80171\u4e2a\u66b4\u9f99\u5f69\u86cb\u53ec\u55241\u6b21\uff0c\u53ef\u83b7\u5f971-5\u4e2a\u5229\u7ef4\u65af\xb7\u7834\u58f3\u66b4\u9f99\u788e\u7247\u3002\n3.\u6d88\u801710\u4e2a\u66b4\u9f99\u5f69\u86cb\u53ec\u552410\u6b21\uff0c\u53ef\u83b7\u5f9710-50\u4e2a\u5229\u7ef4\u65af\xb7\u7834\u58f3\u66b4\u9f99\u788e\u7247\u3002\n4.\u53ec\u5524\u6982\u7387\uff1a1\u4e2a\u788e\u724730%\uff0c2\u4e2a\u788e\u724721%\uff0c3\u4e2a\u788e\u724714%\uff0c4\u4e2a\u788e\u72478%\uff0c5\u4e2a\u788e\u72475%\uff0c\u9a91\u58eb\u5e0111%\uff0c\u4f53\u529b11%\u3002\n5.\u82f1\u96c4\u788e\u7247\u6570\u91cf\u8fbe\u5230200\u65f6\uff0c\u81ea\u52a8\u5408\u6210\u4e3a\u6210\u54c1\u82f1\u96c4\u3002")},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u63d0\u793a\u6587\u5b57",type:cc.Label})],a.prototype,"lab_tip",void 0),i([s],a)}(r.default);t.default=u,cc._RF.pop()},{"../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaLoginRiderView:[function(e,a,t){"use strict";cc._RF.push(a,"90819drg91I3K8xWMnGnqZs","pzaLoginRiderView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Common/pzaBeltEquipConfig"),l=e("../Common/pzaGamePropConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaRewardManager"),u=e("../Common/pzaSpriteFrameManager"),d=e("../Common/pzaStatisticsMgr"),h=e("../Common/pzaTipManager"),m=e("../Common/pzaUIManager"),f=e("../Common/pzaUtil"),z=e("../Common/pzaWorldEventManager"),y=e("../Load/pzaPreLoadManager"),g=e("../utils/pzaChannel"),v=e("../utils/pzakc"),b=e("./pzaExchangeView"),P=e("./pzaLoginRewardMgr"),C=e("./pzaLoginRiderHelpView"),E=cc._decorator,S=E.ccclass,_=E.property,D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.node_proParent=null,a.node_pro=null,a.mask_pro=null,a.lab_adCnts=[],a.nodes_Get=[],a.nodes_red=[],a.node_summonAd=null,a.node_cloverSummon=null,a.btn_help=null,a.lab_piece=null,a.btn_exchange=null,a.lab_cloverCnt=null,a.red_watchAd=null,a.red_summonTen=null,a.spris_watchAd=[],a.props_watchAd=[],a.lab_countDown=null,a.img_belt=null,a.tipsBubble=null,a.beltPieceChangeNum=300,a.cloverGetCnts=[0,20,30,40,50],a}return n(a,e),a.prototype.onEnable=function(){var e=this;d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:11}),this.lab_countDown.string=v.default.getActivityEndTime(s.pzaLocalData.data.loginActivity_EndTime),this.nodes_red.forEach(function(e){e.active=!1}),this.refreshWatchAdPro(),this.refreshWatchAdState(),this.node_summonAd.on(cc.Node.EventType.TOUCH_END,this.summonByAd,this),this.node_cloverSummon.on(cc.Node.EventType.TOUCH_END,this.summonByClover,this),this.btn_exchange.on(cc.Node.EventType.TOUCH_END,this.clickExchange,this);for(var a=function(a){t.nodes_Get[a].on(cc.Node.EventType.TOUCH_END,function(){e.clickGetBtn(a)},t)},t=this,o=0;o<4;o++)a(o);this.btn_help.on(cc.Node.EventType.TOUCH_END,this.clickHelp,this),s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]||(s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]=0,s.pzaLocalData.addDirty("beltPieceAmounts")),this.lab_piece.string=s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]+"";var n=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.BELT_ACTIVITY_COIN),i=0;n>0&&(i=s.pzaLocalData.data.beltsCoin[""+n]||0),this.lab_cloverCnt.string=i+"",this.refreshRedTip(),u.pzaSpriteFrameManager.loadBeltCard("belt_"+s.pzaLocalData.beltPieceType,this.img_belt),this.checkBubbleTips()},a.prototype.onDisable=function(){var e=this;this.node_summonAd.off(cc.Node.EventType.TOUCH_END,this.summonByAd,this),this.node_cloverSummon.off(cc.Node.EventType.TOUCH_END,this.summonByClover,this),this.btn_exchange.off(cc.Node.EventType.TOUCH_END,this.clickExchange,this);for(var a=function(a){t.nodes_Get[a].off(cc.Node.EventType.TOUCH_END,function(){e.clickGetBtn(a)},t)},t=this,o=0;o<4;o++)a(o);this.btn_help.off(cc.Node.EventType.TOUCH_END,this.clickHelp,this)},a.prototype.checkBubbleTips=function(){this.tipsBubble.active=!1===p.pzaBeltEquipConfig.hasBeltEquip(p.pzaBeltEquipEnum.ShuangQi)},a.prototype.refreshRedTip=function(){s.pzaLocalData.data.loginRiderWatchAdRed?(this.red_watchAd.active=!0,cc.tween(this.red_watchAd).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()):this.red_watchAd.active=!1;var e=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.BELT_ACTIVITY_COIN),a=0;e>0&&(a=s.pzaLocalData.data.beltsCoin[""+e]||0),a>=10?(this.red_summonTen.active=!0,cc.tween(this.red_summonTen).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()):this.red_summonTen.active=!1},a.prototype.refreshWatchAdPro=function(){var e,a,t=[{min:40,max:1/0,startWidth:this.node_proParent.width,endWidth:this.node_proParent.width,activeStates:4},{min:30,max:40,startWidth:425,endWidth:570,activeStates:3},{min:20,max:30,startWidth:280,endWidth:425,activeStates:2},{min:10,max:20,startWidth:145,endWidth:280,activeStates:1},{min:0,max:10,startWidth:0,endWidth:145,activeStates:0}],o=s.pzaLocalData.data.watchAdCnt;try{for(var n=r(t),i=n.next();!i.done;i=n.next()){var p=i.value;if(o>=p.min&&o<p.max){this.updateWatchAdStates(p.activeStates);var l=(o-p.min)/(p.max-p.min),c=(p.endWidth-p.startWidth)*l;this.mask_pro.width=p.startWidth+c;break}}}catch(u){e={error:u}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}},a.prototype.updateWatchAdStates=function(e){for(var a=!1,t=1;t<=e;t++){var o=t.toString();2!==s.pzaLocalData.data.watchAdStates[o]&&1!==s.pzaLocalData.data.watchAdStates[o]&&(s.pzaLocalData.data.watchAdStates[o]=1,a=!0)}a&&s.pzaLocalData.addDirty("watchAdStates")},a.prototype.refreshWatchAdState=function(){for(var e=1;e<=4;e++)2==s.pzaLocalData.data.watchAdStates[e+""]?(this.lab_adCnts[e-1].string="\u5df2\u9886\u53d6",this.nodes_red[e-1].active=!1,this.nodes_Get[e-1].getComponent(cc.Sprite).spriteFrame=this.spris_watchAd[1],f.pzaUtil.switchGraySprite(this.props_watchAd[e-1],!1)):1==s.pzaLocalData.data.watchAdStates[e+""]?(this.lab_adCnts[e-1].string="\u9886\u53d6",this.nodes_red[e-1].active=!0,cc.tween(this.nodes_red[e-1]).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start(),this.nodes_Get[e-1].getComponent(cc.Sprite).spriteFrame=this.spris_watchAd[0],f.pzaUtil.switchGraySprite(this.props_watchAd[e-1],!1)):f.pzaUtil.switchGraySprite(this.props_watchAd[e-1],!0)},a.prototype.clickGetBtn=function(e){var a=this,t=e+1;if(1==s.pzaLocalData.data.watchAdStates[t+""]){s.pzaLocalData.data.watchAdStates[t+""]=2,s.pzaLocalData.addDirty("watchAdStates"),this.refreshWatchAdState();var o=this.cloverGetCnts[t],n=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.BELT_ACTIVITY_COIN);n>0&&s.pzaLocalData.data.beltsCoin[""+n],this.refreshRedTip();var i=[],r=new l.pzaRewardPropData(l.pzaGamePropEnum.BELT_ACTIVITY_COIN,o);i.push(r),c.pzaRewardManager.recieveRewards(i,function(){a.lab_cloverCnt.string=s.pzaLocalData.data.beltsCoin[""+n]+""})}},a.prototype.summonByAd=function(){var e=this;g.pzaChannel.instance().showVideo({sucCall:function(){e.summonPiece(1),e.refreshWatchAdPro(),e.refreshWatchAdState(),s.pzaLocalData.data.loginRiderWatchAdRed&&(s.pzaLocalData.data.loginRiderWatchAdRed=!1,s.pzaLocalData.addDirty("loginRiderWatchAd"),e.refreshRedTip())},failCall:function(){},endCall:function(){},posName:"\u767b\u5f55\u8c6a\u793c\u5e7f\u544a\u53ec\u5524",adsid:"23"})},a.prototype.summonByClover=function(){var e=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.BELT_ACTIVITY_COIN),a=0;e>0&&(a=s.pzaLocalData.data.beltsCoin[""+e]||0),a<10?h.pzaTipManager.showHomeTip("\u6d3b\u52a8\u62bd\u5956\u4ee3\u5e01\u4e0d\u8db3",null,2):(s.pzaLocalData.data.beltsCoin[""+e]=a-10,s.pzaLocalData.addDirty("beltsCoin"),this.summonPiece(10),this.lab_cloverCnt.string=s.pzaLocalData.data.beltsCoin[""+e]+"",this.refreshRedTip())},a.prototype.summonPiece=function(e){var a=this;void 0===e&&(e=1),d.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:6});for(var t=[],o=function(){var e=[],a=[];P.default.instance().pieceSummonMap.forEach(function(t,o){0==s.pzaLocalData.data.prizeAmounts[o-1]?e.push(0):e.push(t.weight),a.push(o)}),v.default.log("\u53ec\u5524\u7269\u54c1\u6743\u91cd: ",e);var o=f.pzaUtil.getRandomIndexByWeight(e),n=a[o],i=P.default.instance().pieceSummonMap.get(n);s.pzaLocalData.data.prizeAmounts[o]-=1,s.pzaLocalData.addDirty("prizeAmounts"),v.default.log("\u53ec\u5524\u5956\u52b1\u7c7b\u578b: ",i,o);for(var r=0,p=0;p<s.pzaLocalData.data.prizeAmounts.length;p++)r+=s.pzaLocalData.data.prizeAmounts[p];r<=0&&P.default.instance().resetPrizeAmounts();var c=new l.pzaRewardPropData(i.rewardType,i.amount);i.rewardType==l.pzaGamePropEnum.BELT_PIECE&&(c.riderId=s.pzaLocalData.beltPieceType),t.push(c)},n=0;n<e;n++)o();c.pzaRewardManager.recieveRewards(t,function(){a.showRwdUI(t)},!1,null,!1)},a.prototype.showRwdUI=function(e){if(s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]<this.beltPieceChangeNum)c.pzaRewardManager.recieveRewards(e,function(){},!0,null,!0);else{var a=[];if(a.push(new l.pzaRewardPropData(l.pzaGamePropEnum.EQUIP_BELT,1,p.pzaBeltEquipEnum.ShuangQi)),!1===p.pzaBeltEquipConfig.hasBeltEquip(p.pzaBeltEquipEnum.ShuangQi)&&s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]>=this.beltPieceChangeNum){var t=s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]-this.beltPieceChangeNum;if(t>0){s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]=this.beltPieceChangeNum;var o=new l.pzaRewardPropData(l.pzaGamePropEnum.PROP_COIN,200*t);a.push(o)}}c.pzaRewardManager.recieveRewards(a,this.changeBelt.bind(this))}this.lab_piece.string=s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]+""},a.prototype.changeBelt=function(){s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]-=this.beltPieceChangeNum,s.pzaLocalData.addDirty("beltPieceAmounts"),this.lab_piece.string=s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]+"",p.pzaBeltEquipConfig.getBeltEquip(p.pzaBeltEquipEnum.ShuangQi),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.REFRESH_BELTVIEW,null),this.checkBubbleTips()},a.prototype.clickHelp=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.RIDERHELP_VIEW,function(e){(e&&e.getComponent(C.default)).bindData(1)})},a.prototype.clickExchange=function(){var e=this;m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.EXCHANGE_VIEW,function(a){var t=a&&a.getComponent(b.default);t.bindData(1),t.setCloseCall(function(){e.lab_piece.string=s.pzaLocalData.data.beltPieceAmounts[""+s.pzaLocalData.beltPieceType]+""})})},i([_({displayName:"\u8fdb\u5ea6\u6761\u7236\u8282\u70b9",type:cc.Node})],a.prototype,"node_proParent",void 0),i([_({displayName:"\u8fdb\u5ea6\u6761\u8282\u70b9",type:cc.Node})],a.prototype,"node_pro",void 0),i([_({displayName:"\u8fdb\u5ea6\u6761mask\u8282\u70b9",type:cc.Node})],a.prototype,"mask_pro",void 0),i([_({displayName:"\u5e7f\u544a\u6b21\u6570\u63cf\u8ff0",type:[cc.Label]})],a.prototype,"lab_adCnts",void 0),i([_({displayName:"\u5e7f\u544a\u9886\u53d6\u8282\u70b9",type:[cc.Node]})],a.prototype,"nodes_Get",void 0),i([_({displayName:"\u5e7f\u544a\u9886\u53d6\u7ea2\u70b9\u63d0\u793a",type:[cc.Node]})],a.prototype,"nodes_red",void 0),i([_({displayName:"\u770b\u5e7f\u544a\u53ec\u5524",type:cc.Node})],a.prototype,"node_summonAd",void 0),i([_({displayName:"\u56db\u53f6\u8349\u53ec\u5524",type:cc.Node})],a.prototype,"node_cloverSummon",void 0),i([_({displayName:"\u5e2e\u52a9\u6309\u94ae",type:cc.Node})],a.prototype,"btn_help",void 0),i([_({displayName:"\u73b0\u6709\u788e\u7247",type:cc.Label})],a.prototype,"lab_piece",void 0),i([_({displayName:"\u788e\u7247\u5151\u6362\u6309\u94ae",type:cc.Node})],a.prototype,"btn_exchange",void 0),i([_({displayName:"\u73b0\u6709\u56db\u53f6\u8349\u6570\u91cf",type:cc.Label})],a.prototype,"lab_cloverCnt",void 0),i([_({displayName:"\u89c2\u770b\u5e7f\u544a\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"red_watchAd",void 0),i([_({displayName:"\u53ec\u552410\u6b21\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"red_summonTen",void 0),i([_({displayName:"\u770b\u5e7f\u544a\u9886\u53d6\u5e95\u6846\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"spris_watchAd",void 0),i([_({displayName:"\u770b\u5e7f\u544a\u9886\u53d6\u9053\u5177\u56fe",type:[cc.Sprite]})],a.prototype,"props_watchAd",void 0),i([_({displayName:"\u6d3b\u52a8\u7ed3\u675f\u65f6\u95f4",type:cc.Label})],a.prototype,"lab_countDown",void 0),i([_({displayName:"\u8170\u5e26\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_belt",void 0),i([_({type:cc.Node})],a.prototype,"tipsBubble",void 0),i([S],a)}(cc.Component);t.default=D,cc._RF.pop()},{"../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaExchangeView":"pzaExchangeView","./pzaLoginRewardMgr":"pzaLoginRewardMgr","./pzaLoginRiderHelpView":"pzaLoginRiderHelpView"}],pzaLoginView:[function(e,a,t){"use strict";cc._RF.push(a,"a869cKVNxBEKqiDj0spxsx2","pzaLoginView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaLoginView=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaLocalData"),l=e("../../utils/pzaChannel"),s=e("../../utils/pzakc"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.uidNode=null,a.uidEdit=null,a.tips=null,a.nextLogic=null,a.setClickBtnCD=5e3,a.ableClickSetBtn=!0,a}return n(a,e),a.prototype.onEnable=function(){if(this.uidNode.active=!1,l.pzaChannel.instance().getChannel().channelUserId){this.uidNode.active=!0;var e=l.pzaChannel.instance().getChannel().channelUserId;e.length>8&&(e=this.getFirstFiveChars(e)+"..."),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=e}else this.uidNode.active=!1;this.uidEdit.node.active=!1,this.uidEdit.node.parent.active=!1,"noAD"!=l.pzaChannel.instance().channel||l.pzaChannel.isConfRemote||(this.uidNode.active=!0,this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=p.pzaLocalData.data.noADPlayerUid,this.uidEdit.node.active=!0,this.uidEdit.node.parent.active=!0,this.uidEdit.string=p.pzaLocalData.data.noADPlayerUid)},a.prototype.getFirstFiveChars=function(e){return e.substring(0,5)},a.prototype.clickCopy=function(){l.pzaChannel.instance().copyToClip(l.pzaChannel.instance().getChannel().channelUserId,function(e){s.default.log("content: ",e)})},a.prototype.clickSetUidBtn=function(){var e=this;this.ableClickSetBtn&&(this.ableClickSetBtn=!1,setTimeout(function(){e.ableClickSetBtn=!0},this.setClickBtnCD),p.pzaLocalData.data.noADPlayerUid=this.uidEdit.string,p.pzaLocalData.addDirty("noADPlayerUid"),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=p.pzaLocalData.data.noADPlayerUid,console.log("pzaLocalData.data.noADPlayerUid ",p.pzaLocalData.data.noADPlayerUid),s.default.jpost("https://ga.gamejym.com/fcm/gameApi/noAdLogin",{uid:p.pzaLocalData.data.noADPlayerUid,gameId:l.pzaChannel.gameName},function(a,t){if(console.log("login resp: ",t),!a&&t){var o=l.pzaChannel.instance().channelMap.get("noAD");t.data&&t.data.isWhite?(o.isWhite=t.data.isWhite,e.nextLogic&&e.nextLogic()):(e.tips.active=!0,setTimeout(function(){e.tips.active=!1},2e3))}else s.default.err(a)}))},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u767d\u540d\u5355\u8282\u70b9",type:cc.Node})],a.prototype,"uidNode",void 0),i([d({displayName:"uid\u7f16\u8f91\u6846",type:cc.EditBox})],a.prototype,"uidEdit",void 0),i([d(cc.Node)],a.prototype,"tips",void 0),i([u],a)}(cc.Component);t.pzaLoginView=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc"}],pzaMachineGargantuar:[function(e,a,t){"use strict";cc._RF.push(a,"34486Ul/U9GRJcBZQQASocE","pzaMachineGargantuar");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaGargantuar=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../Plant/pzaAttackType"),u=e("./pzaBaseZombie"),d=e("./pzaZombieState"),h=e("./pzaZombieSlot"),m=e("../pzaSpineTool"),f=cc._decorator,z=f.ccclass,y=(f.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=h.pzaZombieSlotType.MachineHead,a.garlicSkinName=null,a.isMoving=!0,a.weaponIndex=1,a.deathPlayingOver=!1,a.deathCallBack=null,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[h.pzaZombieSlotType.butter,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.butter).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.butter,-34.23,90.46))],[h.pzaZombieSlotType.MachineHead,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.MachineHead).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.MachineHead+"1",658,4,0)).addState(new h.pzaZombieSlotAtt(2,h.pzaZombieSlotType.MachineHead+"2",260,6,0))]])},a.prototype.getZombieHeadWps=function(){return this&&this.baseData&&this.baseData.zombieData?this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2(-20,150)):cc.v2(0,0):this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0)},a.prototype.updateEquipState=function(e,a){if(e){this.slotMap||this.initEquips();var t=this.slotMap.get(e);t?t.updateState(a):console.log("updateEquipState\u672a\u5b9a\u4f4d\u5230slot",this.baseData.zombieData.zombieType,e)}},a.prototype.preview=function(a,t,o){this.idleAniName[0]="idle",e.prototype.preview.call(this,a,t,o)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.zombieData.cate=s.pzaZombieCate.Gargantuar,this.isMoving=!1,this.playMoveAnimation(),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1)),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE,-1))},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(e):(this.updateMove(e),this.rollingPlant()):this.changeRowMove(e))}},a.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var e,a=this.findTarget();e=a?""+a.xIndex+a.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var t=window.pzaplantManager.plantDataMap.get(e);if(null!=t){var o=window.pzaplantManager.getPlantByData(t);o&&o.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(e);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(e);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(e);if(null!=l){var s=window.pzaplantManager.getPlantByData(l);s&&s.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}}},a.prototype.hurt=function(a,t,o){void 0===o&&(o=c.pzaAttackType.FLOOR_ATK),this.baseData&&e.prototype.hurt.call(this,a,t,o)},a.prototype.zombieHurtSound=function(){var e="shieldhit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)},a.prototype.playMoveAnimation=function(){var e=this;this.zombieState=d.pzaZombieState.MOVE,this.isMoving=!0,this.animation.playAnimation("move",!0,function(){e.isMoving=!1},function(){},.7)},a.prototype.playDeathAnimation=function(e){var a=this;this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=s.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.deathCallBack=e;var t=!1;this.scheduleOnce(function(){r.pzaSoundManager.playAudio("gargantuar_thump")},.95/p.pzaUtil.getGameSpeed()),this.animation.playAnimation("death",!1,function(){a.scheduleOnce(function(){r.pzaSoundManager.playAudio("cherrybomb")},.15/p.pzaUtil.getGameSpeed()),a.animation.playAnimation("death2",!1,function(){t||(t=!0,a.deathCallBack())})}),this.refreshFrostState(!1),this.zombieFallSound()},a.prototype.equipDeath=function(){this.equipHurtState=s.pzaHurtStateEnum.DEAD,this.hasEquip=!1,m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0)},a.prototype.zombieDying=function(){e.prototype.zombieDying.call(this),this.changeSkin("skin3"),this.hasEquip||(m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0))},a.prototype.zombieHurt=function(){e.prototype.zombieHurt.call(this),this.changeSkin("skin2"),this.hasEquip||(m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0))},a.prototype.zombieIntact=function(){e.prototype.zombieIntact.call(this),this.changeSkin("skin1"),this.hasEquip||(m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0))},a.prototype.zombieScream=function(){},a.prototype.death=function(){var a=this;this.playDeathAnimation(function(){e.prototype.death.call(a,!1)})},a.prototype.ashesDeath=function(e,a){this.baseData.zombieDie(),this.death(!1,a)},a.prototype.changeMapRow=function(){e.prototype.changeMapRow.call(this)},i([z],a)}(u.pzaBaseZombie));t.pzaGargantuar=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaMagnetShroom:[function(e,a,t){"use strict";cc._RF.push(a,"ee7788Nq0hJyLUTPjE/LN6f","pzaMagnetShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMagnetShroom=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaZombieEnum"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.blinkTime=3,a.restTime=0,a.drawTime=0,a.resting=!1,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.restTime=0,this.resting=!1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.useShroom=!0,u.pzaGameState.onlyBoomPlant=!1,this.baseData.plantData.sleeping&&this.sleep()},a.prototype.playNormalAni=function(){var e=this,a=function(){if(e.drawTime>0)e.animation.playAnimation("attack",!1,a);else{if(e.restTime<=0&&!e.baseData.plantData.sleeping){if(e.resting)return e.resting=!1,void e.animation.playAnimation("back",!1,a);var t=e.findTarget(),o=e.findLaddyTarget();if(null!=t)return e.restTime=15,e.resting=!0,e.absorbIronEquip(t),p.pzaSoundManager.playAudio("MagnetShroom"),void e.animation.playAnimation("go",!1,function(){e.drawTime=9,e.animation.playAnimation("attack",!1,a)});null!=o&&(e.restTime=15,e.resting=!0,e.absorbLabby(o),p.pzaSoundManager.playAudio("MagnetShroom"),e.attacking=!0,e.animation.playAnimation("T_go",!1,function(){e.drawTime=9,e.animation.playAnimation(r.pzaPlantSkName.COMMON.T_attack,!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle4",!0)})}))}if(e.blinkTime>0)return e.restTime>0?void e.animation.playAnimation("idle4",!1,a):void e.animation.playAnimation(e.baseData.plantData.sleeping?"idle3":"idle",!1,a,null,e.baseData.plantData.sleeping?0:1);e.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),e.restTime>0?e.animation.playAnimation("idle4",!1,a):e.animation.playAnimation(e.baseData.plantData.sleeping?"idle3":"idle",!1,a,null,e.baseData.plantData.sleeping?0:1)}};this.animation.playAnimation(this.baseData.plantData.sleeping?"idle3":"idle",!1,a,null,this.baseData.plantData.sleeping?0:1)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.blinkTime-=a,this.restTime-=a,this.drawTime-=a},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this)))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},a.prototype.findTarget=function(){var e=this;if(null!=this.baseData&&!this.baseData.isDead){var a=null,t=-1,o=3*u.pzaGameState.map.getBlockWidth();return window.pzazombieManager.zombieMap.forEach(function(n,i){if(null!=i&&null!=i.zombieData&&(!(i.zombieData.equipType!=s.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp<=0)||i.zombieData.toolType==s.pzaEquipType.IRON_EQUIP)){var r=i.logicPos.sub(e.baseData.logicPos).len();r<=o&&(-1==t||r<t)&&(a=i,t=r)}}),a}},a.prototype.findLaddyTarget=function(){var e=this,a=null,t=3*u.pzaGameState.map.getBlockWidth(),o=-1;return null==a&&window.pzaMapManager.LadderMap.forEach(function(n){var i=n.logicPos.sub(e.baseData.logicPos).len();i<=t&&(-1==o||i<o)&&(a=n,o=i)}),a},a.prototype.absorbIronEquip=function(e){if(null!=this.baseData&&!this.baseData.isDead&&null!=e&&null!=e.zombieData&&!e.isDead){var a,t=s.pzaHurtStateEnum.INTACT;e.zombieData.zombieType==s.pzaZombieEnum.POGO_ZOMBIE?t=(a=e.hp/e.maxHp)<=1/3?s.pzaHurtStateEnum.DYING:a<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT:0!=e.zombieData.maxEquipHp&&(t=(a=e.zombieData.equipHp/e.zombieData.maxEquipHp)<=1/3?s.pzaHurtStateEnum.DYING:a<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT),e.destroyIronEquip(),c.pzaEffectManager.createAbsorbIronEquip(this.baseData,e,t)}},a.prototype.absorbLabby=function(e){null==this.baseData||this.baseData.isDead||c.pzaEffectManager.createLaddyEff(this.baseData,e)},i([m],a)}(d.pzaBasePlant));t.pzaMagnetShroom=f,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMapManager:[function(e,a,t){"use strict";cc._RF.push(a,"2ae8cyvWMVGZ5KducPAy6fC","pzaMapManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMapManager=t.pzaBlockType=void 0;var p,l=e("../Battle/Data/pzaZombieEnum"),s=e("../Battle/Effect/pzaLadder"),c=e("../Battle/Effect/pzaPitchFork"),u=e("../Battle/Effect/pzaPortalDoor"),d=e("../Battle/Effect/pzaRoofPreEffect"),h=e("../Battle/Effect/pzaSpeedBlinkEffect"),m=e("../Battle/pzaCleanCar"),f=e("../Battle/pzaEffectManager"),z=e("../Battle/pzaGameState"),y=e("../Battle/pzaTomb"),g=e("../Load/pzaBundleObjectPool"),v=e("../Load/pzaPreLoadManager"),b=e("../Shop/pzaShopConfig"),P=e("../View/Battle/pzaBattleDownView"),C=e("../View/Battle/pzaBattleUpView"),E=e("./pzaGameConfig"),S=e("./pzaGameManager"),_=e("./pzaGamePartConfig"),D=e("./pzaKnockMiniGame"),M=e("./pzaLocalData"),w=e("./pzaNodeManager"),T=e("./pzaSoundManager"),A=e("./pzaSpriteFrameManager"),B=e("./pzaTipManager"),G=e("./pzaUtil"),I=cc._decorator,O=I.ccclass,N=I.property;(function(e){e[e.BLANK=0]="BLANK",e[e.GRASS=1]="GRASS",e[e.POND=2]="POND",e[e.ROOF=3]="ROOF",e[e.ICE=4]="ICE",e[e.DOOM_HOLE=5]="DOOM_HOLE",e[e.HOLE=6]="HOLE",e[e.TRACK=7]="TRACK"})(p=t.pzaBlockType||(t.pzaBlockType={}));var L=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.mapSprite=null,a.preMapSprite=null,a.inDoorSprite=null,a.previewZombieNode=null,a.previewShadowNode=null,a.plantTouchNode=null,a.battleUpView=null,a.battleDownView=null,a.redLine=null,a.blinkAni=null,a.mapOriPos=null,a.BlockTypeMap=new Map,a.trackBlockMap=new Map,a.TombSet=new Set,a.TombMap=new Map,a.PreviewZombies=new Set,a.IceGroundSet=new Set,a.DoomHoleSet=new Set,a.GoldHoleSet=new Set,a.ZombieHoleSet=new Set,a.PortalMap=new Map,a.LadderMap=new Map,a.DropCoinSet=new Set,a.CleanCar=new Set,a.fog=null,a.roofPreBg=null,a.mapId=1,a.lockAction=!1,a.enableColdWind=!1,a.coldWindTimer=0,a.coldWindCD=0,a.waysWeight=[100,100,100,100,100],a.noWaterWayInMap=new Map([[3,[2,3]],[4,[0,1,4,5]]]),a.waterWayInMap=new Map([[3,[0,1,4,5]],[4,[2,3]]]),a.DoorByMapId=new Map([[0,1],[1,1],[2,2],[3,3],[4,4],[7,7],[10,2],[14,1],[13,3],[17,17],[20,3]]),a.preImgByMapId=new Map([[0,1],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[10,2],[11,11],[12,12],[13,3],[14,1],[15,1],[17,17],[19,19],[20,3]]),a}return n(a,e),a.prototype.onLoad=function(){window.pzaMapManager=this,this.mapOriPos=cc.v2(this.mapSprite.node.position.x,this.mapSprite.node.position.y)},a.prototype.init=function(e,a,t){this.battleDownView.node.active=!1,this.battleUpView.node.active=!1,this.redLine.active=!1,this.inDoorSprite.node.active=!1,this.preMapSprite.node.active=!1,this.blinkAni.node.active=!1,this.mapId=t,A.pzaSpriteFrameManager.loadMap(this.mapSprite,this.mapId);var o=z.pzaGameState.map.getMapOriPos();null!=o&&this.plantTouchNode.setPosition(o.clone()),this.BlockTypeMap.clear(),this.trackBlockMap.clear(),this.TombSet.clear(),this.TombMap.clear(),this.PreviewZombies.clear(),this.IceGroundSet.clear(),this.DoomHoleSet.clear(),this.GoldHoleSet.clear(),this.ZombieHoleSet.clear(),this.LadderMap.clear(),this.DropCoinSet.clear(),this.PortalMap.clear(),this.fog=null,this.roofPreBg=null,this.initMapPos(!0),3==t?(f.pzaEffectManager.createWaterLightEffect(cc.v2(0,-220)),f.pzaEffectManager.createWaterLightEffect(cc.v2(0,220))):4==t&&f.pzaEffectManager.createWaterLightEffect(cc.v2()),E.pzaGameConfig.setBlockTypeMap(t),this.setExtraBlock(),this.setHoleBlock(),this.setColdWind(),this.setProtectBlock(),z.pzaGameState.gameMode==z.pzaGameMode.NORMAL&&1==e&&1==a&&E.pzaGameConfig.setBlockTypeMap(0)},a.prototype.setColdWind=function(){var e;switch(this.coldWindTimer=0,this.enableColdWind=!1,z.pzaGameState.gameMode){case z.pzaGameMode.NORMAL:case z.pzaGameMode.NORMAL_WEEKTWO:case z.pzaGameMode.ZOM_BOSS:e=z.pzaGameState.hasMainConf();break;case z.pzaGameMode.SURVIVAL:case z.pzaGameMode.SUR_ENDLESS:e=z.pzaGameState.survivalConfig}e&&e.coldWindCD&&e.coldWindCD>0&&(this.enableColdWind=!0,this.coldWindCD=e.coldWindCD)},a.prototype.setExtraBlock=function(){var e,a,t,o,n=!1,i=z.pzaGameState.hasMainConf();if(i&&i.ablemove)try{for(var l=r(i.ablemoveData),s=l.next();!s.done;s=l.next()){var c=s.value;if(i.protect)try{for(var u=(t=void 0,r(i.protectPlant)),d=u.next();!d.done;d=u.next()){var h=d.value;if(h.xIndex==c.xIndex&&h.yIndex==c.yIndex){n=!0;break}}}catch(b){t={error:b}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(t)throw t.error}}for(var m=c.xIndex,y=c.yIndex,g=c.height,v=0;v<g;v++)f.pzaEffectManager.createTrackBlock(m,y+v,v,g,0==v,n),this.BlockTypeMap.delete(""+m+(y+v)),this.BlockTypeMap.set(""+m+(y+v),p.TRACK)}}catch(P){e={error:P}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(e)throw e.error}}},a.prototype.setHoleBlock=function(){var e,a,t=z.pzaGameState.hasMainConf();if(t&&t.holeBlock)try{for(var o=r(t.holeBlockMap),n=o.next();!n.done;n=o.next()){var i=n.value[1];i?(f.pzaEffectManager.createHoleBlock(i.xIndex,i.yIndex),this.BlockTypeMap.delete(""+i.xIndex+i.yIndex),this.BlockTypeMap.set(""+i.xIndex+i.yIndex,p.HOLE)):console.warn("holeBlock \u914d\u7f6e\u5f02\u5e38")}}catch(l){e={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}},a.prototype.setProtectBlock=function(){var e,a,t=z.pzaGameState.hasMainConf();if(t&&t&&t.protect)try{for(var o=r(t.protectPlant),n=o.next();!n.done;n=o.next()){var i=n.value,l=""+i.xIndex+i.yIndex;if(this.BlockTypeMap.get(l)!=p.TRACK){var s=i.xIndex,c=i.yIndex,u=z.pzaGameState.map.getXInterval(s)/2,d=z.pzaGameState.map.getYInterval(c)/3;z.pzaGameState.isRoofMode()&&(d=z.pzaGameState.map.getYInterval(c)/6);var h=z.pzaGameState.map.getBlockLogicPos(s,c,u,d);f.pzaEffectManager.createProtectBlock(h)}}}catch(m){e={error:m}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}},a.prototype.getRandomWayIndex=function(e,a,t,o){if(null==a||null==t||t.length<=0)return 0;var n,i=t[e%t.length];if(a==l.pzaZombieEnum.GARGANTUAR&&i==t.length-1)return G.pzaUtil.getRandomValueFromArray([0,1]);if(z.pzaGameState.isMainMode()||z.pzaGameState.gameMode==z.pzaGameMode.SMALL_ZOMBIE||z.pzaGameState.gameMode==z.pzaGameMode.BELT?n=_.pzaGamePartConfig.getPartConfig(z.pzaGameState.curChapter,z.pzaGameState.curPart):z.pzaGameState.isSurvival()&&(n=z.pzaGameState.survivalConfig),E.pzaGameConfig.isAllWayZombie(a)&&o>=n.minWaterWave)return i;var r=E.pzaGameConfig.isWaterZombie(a),p=this.isInWaterWay(i);return p&&r||!p&&!r?i:r?this.getRandomWaterWay()||i:this.getRandomNoWaterWay()},a.prototype.getRandomNoWaterWay=function(){var e=this.noWaterWayInMap.get(z.pzaGameState.mapId);return e?G.pzaUtil.getRandomValueFromArray(e):G.pzaUtil.getRandomValueFromArray([0,1,2,3,4])},a.prototype.getRandomWaterWay=function(){var e=this.waterWayInMap.get(z.pzaGameState.mapId);return e?G.pzaUtil.getRandomValueFromArray(e):null},a.prototype.isInWaterWay=function(e){var a=this.waterWayInMap.get(z.pzaGameState.mapId);return!!(a&&a.indexOf(e)>=0)},a.prototype.getRowBlockType=function(e){var a="0"+e;return this.BlockTypeMap.get(a)},a.prototype.getBlockType=function(e,a){var t=e+""+a;return this.BlockTypeMap.get(t)},a.prototype.getPlantBlockType=function(e,a){var t=!1;if(this.DoomHoleSet.forEach(function(o){null!=o&&o.mapXIndex==e&&o.mapYIndex==a&&(t=!0)}),t)return p.DOOM_HOLE;if(this.GoldHoleSet.forEach(function(o){null!=o&&o.mapXIndex==e&&o.mapYIndex==a&&(t=!0)}),this.ZombieHoleSet.forEach(function(o){null!=o&&o.mapXIndex==e&&o.mapYIndex==a&&(t=!0)}),t)return p.HOLE;var o=!1;if(this.IceGroundSet.forEach(function(t){t.containBlock(e,a)&&(o=!0)}),o)return p.ICE;var n=""+e+a;return this.BlockTypeMap.get(n)},a.prototype.hasTomb=function(e,a){var t=""+e+a;return this.TombSet.has(t)},a.prototype.initMapTomb=function(e,a,t){var o,n=this;switch(z.pzaGameState.gameMode){case z.pzaGameMode.NORMAL:case z.pzaGameMode.NORMAL_WEEKTWO:case z.pzaGameMode.ZOM_BOSS:o=z.pzaGameState.hasMainConf();break;case z.pzaGameMode.SURVIVAL:case z.pzaGameMode.SUR_ENDLESS:o=z.pzaGameState.survivalConfig}if(null==o||o.tombCount<=0)t&&t();else{for(var i=o.tombCount,r=z.pzaGameState.map.getMapRow(),p=z.pzaGameState.map.getMapColumn(),l=[],s=o.tombMinRow-1;s<p;s++)for(var c=0;c<r;c++){var u=""+s+c;this.BlockTypeMap.get(u),l.push(u)}var d=G.pzaUtil.getRandomArrayValue(l,i);null!=d&&d.forEach(function(e){n.TombSet.add(e)});var h=function(){--i<=0&&t&&t()},m=!1;for(s=0;s<p;s++)for(c=0;c<r;c++)u=""+s+c,this.TombSet.has(u)&&(this.createTomb(s,c,h),m=!0);m&&T.pzaSoundManager.playAudio("tombCreate")}},a.prototype.randomCreateTomb=function(e,a){var t,o=this;if(void 0===a&&(a=0),null!=(t=_.pzaGamePartConfig.getPartConfig(z.pzaGameState.curChapter,z.pzaGameState.curPart))){var n=z.pzaGameState.map.getMapRow(),i=z.pzaGameState.map.getMapColumn(),r=t.tombMinRow;a>0&&(r=a);for(var p=[],l=[],s=r-1;s<i;s++)for(var c=0;c<n;c++){var u=""+s+c;this.TombSet.has(u)||(p.push(u),window.pzaplantManager.hasPlant(s,c)||l.push(u))}var d=null;(d=G.pzaUtil.getRandomArrayValue(l,e)).length<e&&(d=G.pzaUtil.getRandomArrayValue(p,e)),d.forEach(function(e){o.TombSet.add(e)});var h=!1;for(s=0;s<i;s++)for(c=0;c<n;c++)u=""+s+c,-1!=d.indexOf(u)&&(this.createTomb(s,c,null),window.pzaplantManager.hasPlant(s,c)&&(window.pzaplantManager.removeNormalPlant(s,c),window.pzaplantManager.removePumpkin(s,c),window.pzaplantManager.removeEnvPlant(s,c)),h=!0);h&&T.pzaSoundManager.playAudio("tombCreate")}},a.prototype.createTomb=function(e,a,t,o){var n=this;void 0===o&&(o=!1);var i=w.pzaNodeManager.getDownEffectNode();if(null!=i){var r=cc.v2(z.pzaGameState.map.getXPos(e)+z.pzaGameState.map.getMapOriPos().x+z.pzaGameState.map.getXInterval(e)/2,z.pzaGameState.map.getYPos(a)+.2*z.pzaGameState.map.getYInterval(a)+z.pzaGameState.map.getMapOriPos().y);g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.TOMB,!1,function(p,l){if(null==p&&null!=l){l.setParent(i),l.setPosition(r);var s=l.getComponent(y.pzaTomb);s&&s.init(e,a,t,o);var c=""+e+a;n.TombMap.set(c,s)}else console.error(p)})}},a.prototype.removeTomb=function(e,a){var t=""+e+a,o=this.TombMap.get(t);o&&o.close(),this.TombMap.delete(t),this.TombSet.delete(t)},a.prototype.initCleanCar=function(){var e=this,a=z.pzaGameState.map.getMapRow(),t=w.pzaNodeManager.getPlantZombieNode();if(null!=t)for(var o=function(a){var o=window.pzaMapManager.getRowBlockType(a),n=1;if(o==p.BLANK)return"continue";if(z.pzaGameState.map.skewColumn>0){if(n=3,M.pzaLocalData.getGoodsCount(b.pzaShopItemType.ROOF_CART)<=0)return"continue"}else o==p.POND&&M.pzaLocalData.getGoodsCount(b.pzaShopItemType.POOL_CLEAN_CAR)>0&&(n=2);g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.CLEANER_CAR,!1,function(o,i){if(null==o&&null!=i){i.setParent(t);var r=i.getComponent(m.pzaCleanCar);r&&r.init(n,a),e.CleanCar.add(r)}else console.error(o)})},n=0;n<a;n++)o(n)},a.prototype.recoverMap=function(e){this.recoverCleanCar(e),this.recoverTomb(e),this.recoverLadder(e),this.recoverDoomHole(e),this.recoverGoldHole(e),this.recoverZombieHole(e)},a.prototype.recoverCleanCar=function(e){var a=this;if(null!=e&&null!=e.cleanCarState){var t=w.pzaNodeManager.getPlantZombieNode();if(null!=t)for(var o=function(o){var n=e.cleanCarState[o];if(null==n||0==n)return"continue";g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.CLEANER_CAR,!1,function(e,i){if(null==e&&null!=i){i.setParent(t);var r=i.getComponent(m.pzaCleanCar);r&&r.recover(n,o),a.CleanCar.add(r)}else console.error(e)})},n=0;n<6;n++)o(n)}},a.prototype.recoverTomb=function(e){var a=this;null!=e&&null!=e.TombMap&&e.TombMap.forEach(function(e){var t=e.xIndex,o=e.yIndex,n=""+t+o;a.TombSet.add(n),a.createTomb(t,o,null,!0)})},a.prototype.recoverLadder=function(e){var a=this;null!=e&&null!=e.LadderMap&&e.LadderMap.forEach(function(e){var t=e.xIndex,o=e.yIndex;a.createLadder(t,o,null)})},a.prototype.recoverDoomHole=function(e){null!=e&&null!=e.DoomHoleMap&&e.DoomHoleMap.forEach(function(e){var a=e.xIndex,t=e.yIndex,o=z.pzaGameState.map.getXInterval(a)/2,n=z.pzaGameState.map.getYInterval(t)/3;z.pzaGameState.isRoofMode()&&(n=z.pzaGameState.map.getYInterval(t)/6);var i=z.pzaGameState.map.getBlockLogicPos(a,t,o,n);f.pzaEffectManager.createDoomHoleEffect(i,a,t,!0,e.time,e.step)})},a.prototype.recoverGoldHole=function(e){null!=e&&null!=e.GoldHoleMap&&e.GoldHoleMap.forEach(function(e){var a=e.xIndex,t=e.yIndex,o=z.pzaGameState.map.getXInterval(a)/2,n=z.pzaGameState.map.getYInterval(t)/3,i=z.pzaGameState.map.getBlockLogicPos(a,t,o,n);f.pzaEffectManager.createGoldHoleEffect(i,a,t,!0,e.time,e.step)})},a.prototype.recoverZombieHole=function(e){null!=e&&null!=e.ZombieHoleMap&&e.ZombieHoleMap.forEach(function(e){var a=e.xIndex,t=e.yIndex,o=z.pzaGameState.map.getXInterval(a)/2,n=z.pzaGameState.map.getYInterval(t)/3,i=z.pzaGameState.map.getBlockLogicPos(a,t,o,n);f.pzaEffectManager.createZombieHoleEffect(i,a,t,!0,e.time,e.step)})},a.prototype.hasCleanCar=function(e){var a=!1;return this.CleanCar.forEach(function(t){null!=t&&t.yIndex==e&&(a=!0)}),a},a.prototype.getCleanCarState=function(){var e=[];return this.CleanCar.forEach(function(a){null==a||a.hasTrigger||(e[a.yIndex]=a.carType)}),e},a.prototype.createRoofPreEffect=function(){var e=this,a=w.pzaNodeManager.getUpBgNode();null!=a&&g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.ROOF_PRE_EFFECT,!1,function(t,o){null==t&&null!=o?(o.setParent(a),e.roofPreBg=o.getComponent(d.pzaRoofPreEffect)):console.error(t)})},a.prototype.addIceGround=function(e){this.IceGroundSet.add(e)},a.prototype.removeIceGround=function(e){this.IceGroundSet.delete(e)},a.prototype.removeRowIceGround=function(e){this.IceGroundSet.forEach(function(a){null!=a&&a.yIndex==e&&a.close()})},a.prototype.removeColRowIceGround=function(e,a){this.IceGroundSet.forEach(function(t){null==t||t.xIndex!=e&&t.yIndex!=a||t.close()})},a.prototype.removeAllIceGround=function(){this.IceGroundSet.forEach(function(e){e&&e.close()})},a.prototype.getIceGround=function(e){var a=[];return this.IceGroundSet.forEach(function(t){null!=t&&t.yIndex==e&&a.push(t)}),a},a.prototype.getIceYCount=function(){var e=new Set;return window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||e.has(a.yIndex)||e.add(a.yIndex)}),e.size},a.prototype.addDoomHole=function(e){this.DoomHoleSet.add(e)},a.prototype.removeDoomHole=function(e){this.DoomHoleSet.delete(e)},a.prototype.fogEnter=function(e,a){var t;switch(void 0===a&&(a=!1),z.pzaGameState.gameMode){case z.pzaGameMode.NORMAL:case z.pzaGameMode.NORMAL_WEEKTWO:case z.pzaGameMode.ZOM_BOSS:t=z.pzaGameState.hasMainConf();break;case z.pzaGameMode.MINIGAME:t=z.pzaGameState.miniGameConfig;break;case z.pzaGameMode.SURVIVAL:case z.pzaGameMode.SUR_ENDLESS:t=z.pzaGameState.survivalConfig}!1!==a||4!=z.pzaGameState.curChapter||2!=z.pzaGameState.curPart?null==t||t.minFogColumn<=0?e&&e():f.pzaEffectManager.createFogEffect(t.minFogColumn,e):e&&e()},a.prototype.blowFog=function(e){void 0===e&&(e=0),null!=this.fog&&this.fog.blowFog(e)},a.prototype.planternScatterFog=function(e){null!=this.fog&&this.fog.addPlantern(e)},a.prototype.planternRemove=function(e){null!=this.fog&&this.fog.removePlantern(e)},a.prototype.removeFog=function(){null!=this.fog&&(this.fog.close(),this.fog=null)},a.prototype.createLadder=function(e,a,t){var o=this,n=w.pzaNodeManager.getPlantZombieNode();if(null!=n){var i=""+e+a;if(this.LadderMap.get(i))t&&t();else{var r=z.pzaGameState.map.getXInterval(e),p=z.pzaGameState.map.getYInterval(a)/3;z.pzaGameState.isRoofMode()&&(p=z.pzaGameState.map.getYInterval(a)/6);var l=z.pzaGameState.map.getBlockLogicPos(e,a,r,p);g.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.LADDER,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(l);var p=r.getComponent(s.pzaLadder);p&&p.init(e,a,l);var c=""+e+a;o.LadderMap.set(c,p),t&&t()}else console.error(i)})}}},a.prototype.createPitchFork=function(){if(!z.pzaGameState.isRoofMode()&&M.pzaLocalData.consumeGoods(b.pzaShopItemType.PITCHFORK,1)){var e=7,a=[0,1,2,3,4];4==z.pzaGameState.curChapter&&5==z.pzaGameState.curPart?e=5:3!=z.pzaGameState.curChapter&&4!=z.pzaGameState.curChapter||(a=[0,1,4,5]);var t=G.pzaUtil.getRandomValueFromArray(a),o=w.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=z.pzaGameState.map.getXInterval(e),i=z.pzaGameState.map.getBlockLogicPos(e,t,n,0);g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.PITCHFORK,!1,function(e,a){if(null==e&&null!=a){a.setParent(o),a.setPosition(i),a.zIndex=10*-t;var n=a.getComponent(c.pzaPitchFork);n&&n.init(t)}else console.error(e)})}}},a.prototype.hasLadder=function(e,a){var t=""+e+a;return this.LadderMap.has(t)},a.prototype.removeLadder=function(e,a){var t=""+e+a,o=this.LadderMap.get(t);null!=o&&(o.close(),this.LadderMap.delete(t))},a.prototype.clearLadder=function(){this.LadderMap.forEach(function(e){e&&e.close()}),this.LadderMap.clear()},a.prototype.closePreviewZombie=function(){this.PreviewZombies.forEach(function(e){e&&e.previewClose()}),this.PreviewZombies.clear()},a.prototype.previewMap=function(e,a){var t=this;S.pzaGameManager.getCurrentGame().createPreviewZombie(this,z.pzaGameState.curChapter,z.pzaGameState.curPart),this.node.stopAllActions(),this.lockAction=!0;var o=this.mapSprite.node.width*(1-this.mapSprite.node.anchorX)-(1280+(cc.winSize.width-1280)/2);z.pzaGameState.isRoofMode()&&(o-=250);var n=function(){t.node.runAction(cc.sequence(cc.delayTime(a?.1:1.5),cc.callFunc(function(){t.roofPreBg&&t.roofPreBg.hideTree()}),cc.moveTo(1.5,cc.v2(-o,0)).easing(cc.easeSineIn()),cc.callFunc(function(){t.lockAction=!1,e&&e()})))};if(!a)return n();B.pzaTipManager.showPreviewTip(z.pzaGameState.curChapter,z.pzaGameState.curPart,z.pzaGameState.gameMode,n)},a.prototype.cancelPreviewMap=function(e,a){var t=this;this.createPitchFork(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){t.roofPreBg&&t.roofPreBg.showTree()}),cc.moveTo(1.5,cc.v2()),cc.delayTime(.3),cc.callFunc(function(){t.closePreviewZombie(),a&&a()})))},a.prototype.lookLawn=function(e){this.node.stopAllActions(),this.roofPreBg&&this.roofPreBg.showTree(),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2()),cc.delayTime(.3),cc.callFunc(function(){e&&e()})))},a.prototype.cancelLookLawn=function(e){this.node.stopAllActions();var a=this.mapSprite.node.width*(1-this.mapSprite.node.anchorX)-(1280+(cc.winSize.width-1280)/2);z.pzaGameState.isRoofMode()&&(a-=250),this.roofPreBg&&this.roofPreBg.hideTree(),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2(-a,0)).easing(cc.easeSineIn()),cc.callFunc(function(){e&&e()})))},a.prototype.trampleShakeMap=function(){this.lockAction||(this.node.stopAllActions(),this.node.runAction(cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-2,-5)),cc.moveTo(.05,cc.v2())),3)))},a.prototype.shakeMap=function(){this.lockAction||(this.node.stopAllActions(),this.node.runAction(cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-2,5)),cc.moveTo(.05,cc.v2())),3)))},a.prototype.failShowInfactMap=function(e){void 0===e&&(e=null),this.node.stopAllActions();var a=this.mapSprite.node.width*this.mapSprite.node.anchorX-(cc.winSize.width-1280)/2;a=Math.max(0,a),this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){e&&e()}),cc.moveTo(1.5,cc.v2(a,0)),cc.callFunc(function(){z.pzaGameState.finishShowWinShowMap=!0})))},a.prototype.initMapPos=function(e){if(this.node.stopAllActions(),e){var a=this.mapSprite.node.width*this.mapSprite.node.anchorX-(cc.winSize.width-1280)/2;a=Math.max(0,a),this.node.setPosition(cc.v2(a,0))}else this.node.setPosition(cc.v2())},a.prototype.openBattleUI=function(){this.battleUpView.node.active=!0,this.battleDownView.node.active=!0},a.prototype.closeBattleUI=function(){this.battleUpView.node.active=!1,this.battleDownView.node.active=!1},a.prototype.showSunUI=function(){this.battleDownView.showSunUI(),z.pzaGameState.showSunUI=!0},a.prototype.hideSunUI=function(){this.battleDownView.hideSunUI(),z.pzaGameState.showSunUI=!1},a.prototype.showCoinUI=function(){this.battleUpView.showCoinNode()},a.prototype.blink=function(e){0==e?this.blinkAni.blinkGreen():1==e?this.blinkAni.blinkRed():2==e&&this.blinkAni.blinkWhite()},a.prototype.transitionAni=function(e){this.blinkAni.playTransition(e)},a.prototype.showRedLine=function(e){this.redLine.active=!0,this.redLine.x=-440+z.pzaGameState.map.getXPos(e)},a.prototype.showPauseBtn=function(){this.battleDownView.showPauseBtn()},a.prototype.hidePauseBtn=function(){this.battleDownView.hidePauseBtn()},a.prototype.openDoor=function(){this.preMapSprite.node.active=!0;var e=this.preImgByMapId.get(this.mapId);e&&A.pzaSpriteFrameManager.loadPreMap(e,this.preMapSprite),1==e?this.preMapSprite.node.setPosition(cc.v2(-701,-10)):2==e||10==e?this.preMapSprite.node.setPosition(cc.v2(-701,-10)):3==e||20==e?this.preMapSprite.node.setPosition(cc.v2(-707,-42)):4==e?this.preMapSprite.node.setPosition(cc.v2(-707,-42)):5==e||6==e?this.preMapSprite.node.setPosition(cc.v2(-703.8,-55)):this.preMapSprite.node.active=!1},a.prototype.createPortalDoor=function(e,a,t,o,n){var i=this,r=w.pzaNodeManager.getPlantZombieNode();null!=r&&g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.PORTAL_DOOR,!1,function(p,l){null==p&&null!=l?g.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.PORTAL_DOOR,!1,function(p,s){if(null!=p||null==s)return l.destroy(),void console.error(p);l.setParent(r);var c=l.getComponent(u.pzaPortalDoor);s.setParent(r);var d=s.getComponent(u.pzaPortalDoor);c&&c.init(d,e,a,t),d&&d.init(c,e,o,n),i.PortalMap.set(""+a+t,c),i.PortalMap.set(""+o+n,d)}):console.error(p)})},a.prototype.miniGameinitMapTomb=function(e){var a=this,t=S.pzaGameManager.getGame(z.pzaGameMode.MINIGAME_KNOCK,D.pzaKnockMiniGame).getConf(z.pzaGameState.curPart);if(!(null==t||t.tombstone<=0)){for(var o=t.tombstone,n=z.pzaGameState.map.getMapRow(),i=z.pzaGameState.map.getMapColumn(),r=[],l=t.tombstonemini-1;l<i;l++)for(var s=0;s<n;s++){var c=""+l+s,u=this.BlockTypeMap.get(c);u!=p.GRASS&&u!=p.ROOF||r.push(c)}var d=G.pzaUtil.getRandomArrayValue(r,o);null!=d&&d.forEach(function(e){a.TombSet.add(e)});var h=function(){--o<=0&&e&&e()},m=!1;for(l=0;l<i;l++)for(s=0;s<n;s++)c=""+l+s,this.TombSet.has(c)&&(this.createTomb(l,s,h),m=!0);m&&T.pzaSoundManager.playAudio("tombCreate")}},a.prototype.update=function(e){z.pzaGameState.gamePause||z.pzaGameState.gameWin||this.enableColdWind&&(this.coldWindTimer+=e,this.coldWindTimer>=this.coldWindCD&&(this.coldWindTimer=0,f.pzaEffectManager.createEffect(v.pzaResourceUrl.COLDWIND_EFFECT,cc.v2())))},i([N({displayName:"\u5730\u56fe",type:cc.Sprite})],a.prototype,"mapSprite",void 0),i([N({displayName:"\u5730\u56fe\u524d\u666f",type:cc.Sprite})],a.prototype,"preMapSprite",void 0),i([N({displayName:"\u5f00\u95e8",type:cc.Sprite})],a.prototype,"inDoorSprite",void 0),i([N({displayName:"\u5730\u56fe\u9884\u89c8\u50f5\u5c38\u8282\u70b9",type:cc.Node})],a.prototype,"previewZombieNode",void 0),i([N({displayName:"\u5730\u56fe\u9884\u89c8\u5f71\u5b50\u8282\u70b9",type:cc.Node})],a.prototype,"previewShadowNode",void 0),i([N({displayName:"\u5730\u56fe\u79cd\u690d\u8282\u70b9",type:cc.Node})],a.prototype,"plantTouchNode",void 0),i([N({displayName:"\u5730\u56fe\u4e0a\u5c42UI",type:C.pzaBattleUpView})],a.prototype,"battleUpView",void 0),i([N({displayName:"\u5730\u56fe\u4e0b\u5c42UI",type:P.pzaBattleDownView})],a.prototype,"battleDownView",void 0),i([N({displayName:"\u7ea2\u7ebf",type:cc.Node})],a.prototype,"redLine",void 0),i([N({displayName:"\u95ea\u5c4f\u52a8\u753b",type:h.pzaSpeedBlinkEffect})],a.prototype,"blinkAni",void 0),i([O],a)}(cc.Component);t.pzaMapManager=L,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Effect/pzaLadder":"pzaLadder","../Battle/Effect/pzaPitchFork":"pzaPitchFork","../Battle/Effect/pzaPortalDoor":"pzaPortalDoor","../Battle/Effect/pzaRoofPreEffect":"pzaRoofPreEffect","../Battle/Effect/pzaSpeedBlinkEffect":"pzaSpeedBlinkEffect","../Battle/pzaCleanCar":"pzaCleanCar","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Battle/pzaTomb":"pzaTomb","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/Battle/pzaBattleDownView":"pzaBattleDownView","../View/Battle/pzaBattleUpView":"pzaBattleUpView","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaKnockMiniGame":"pzaKnockMiniGame","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaSoundManager":"pzaSoundManager","./pzaSpriteFrameManager":"pzaSpriteFrameManager","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil"}],pzaMarigold:[function(e,a,t){"use strict";cc._RF.push(a,"9267fAJVONNm59HBZWdHpJe","pzaMarigold");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMarigold=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaDropType"),l=e("../pzaEffectManager"),s=e("../pzaGameState"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.createCoinAct=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.animation.playAnimation("idle",!0,null),this.baseData.plantData.atkInterval=24,s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1},a.prototype.logicUpdate=function(a){var t=this;e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||s.pzaGameState.maxMarigold<=0||window.pzazombieManager.lastWave||this.createCoinAct||(this.baseData.plantData.atkInterval-=a,this.baseData.plantData.atkInterval>0||(this.createCoinAct=!0,this.animation.playAnimation("idle2",!1,function(){t.createCoinAct=!1,t.animation.playAnimation("idle",!0,null),t.baseData.plantData.atkInterval=24},function(e,a){console.log("pzaMarigold event ",a),r.pzaSoundManager.playAudio("Marigold");var o=null;Math.random()>.9?(o=p.pzaDropType.GOLD_COIN,s.pzaGameState.maxMarigold-=50):(o=p.pzaDropType.SILVER_COIN,s.pzaGameState.maxMarigold-=10),l.pzaEffectManager.createDropCoin(o,t.baseData.logicPos)})))},i([d],a)}(c.pzaBasePlant));t.pzaMarigold=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMelonBullet:[function(e,a,t){"use strict";cc._RF.push(a,"b5ebbvpGcdCgqK2pACZPlcL","pzaMelonBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMelonBullet=void 0;var r=e("../Data/pzaBuffData"),p=e("../Data/pzaZombieEnum"),l=e("../Plant/pzaAttackType"),s=e("../pzaGameState"),c=e("./pzaRotateBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.colliderZombie=function(e){if(e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&!(e.zombieData&&e.zombieData.hypnosis||e.buffData.hasBuff(r.pzaBuffType.FLY)||e.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||e.buffData.hasBuff(r.pzaBuffType.DIVE))){var a=window.pzazombieManager.getZombie(e);if(null!=a){a.hurt(this.atk,null,l.pzaAttackType.THROW_ATK);for(var t=[],o=e.yIndex-1;o<=e.yIndex+1;o++)o<0||o>=s.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[o].forEach(function(a){null!=a&&a!=e&&a.xIndex==e.xIndex&&(a.buffData.hasBuff(r.pzaBuffType.FLY)||a.buffData.hasBuff(r.pzaBuffType.DIVE)||a.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||t.push(a))});t.forEach(function(e){var a=window.pzazombieManager.getZombie(e);null!=a&&a.hurt(26)}),this.close(),this.playHitEffect(e)}}},i([d],a)}(c.pzaRotateBullet));t.pzaMelonBullet=h,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaRotateBullet":"pzaRotateBullet"}],pzaMelonPult:[function(e,a,t){"use strict";cc._RF.push(a,"64a61e7cCtKGIFerGr5ltkK","pzaMelonPult");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMelonPult=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNameConf"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../Bullet/pzaThrowBullet"),u=e("../Data/pzaBuffData"),d=e("../pzaGameState"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.atkAniTime=1.4,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.melonDataInit()},a.prototype.melonDataInit=function(){this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration(p.pzaPlantSkName.MELON_PULT.attack),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=e.findAttackTarget();if(null!=t)return s.pzaSoundManager.playAudio("melonimpact"),void e.animation.playAnimation(p.pzaPlantSkName.MELON_PULT.attack,!1,a,function(){e.attack(t)},e.atkAniTime/e.atkInterval);e.animation.playAnimation(p.pzaPlantSkName.MELON_PULT.idle,!1,a)};a()},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<e.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-e.baseData.logicPos.x;(-1==t||n<t)&&(a=o,t=n)}}),null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.attack=function(e){if(null!=e&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=l.pzaNodeManager.getBulletNode();if(null!=a){var t=window.pzazombieManager.getZombie(e);if(null!=t){var o=t.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=a.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var p=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(a);var s=cc.v2(p.x+this.baseData.logicPos.x+16,p.y+this.baseData.logicPos.y+57);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(this.getBulletAni(),!1,this.baseData.yIndex,this.baseData.atk,e,n),u.hasSpatter=!0)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([f],a)}(h.pzaBasePlant);t.pzaMelonPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMenuView:[function(e,a,t){"use strict";cc._RF.push(a,"2ba1170aStGH6sXVabAjldb","pzaMenuView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMenuView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaCommonPopView"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaLocalData"),u=e("../../Common/pzaSoundManager"),d=e("../../Common/pzaTipManager"),h=e("../../Common/pzaUIManager"),m=e("../../Common/pzaUtil"),f=e("../../Common/pzaWorldEventManager"),z=e("../../Load/pzaPreLoadManager"),y=e("../../utils/pzaChannel"),g=e("../pzaHandbookView"),v=e("../pzaWarningView"),b=e("./pzaAssessView"),P=e("./pzaOptionView"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.assessNode=null,a.menuNode=null,a.optionNode=null,a.handBookNode=null,a.backNode=null,a.restartNode=null,a.backGameCall=null,a.needSaveGame=!1,a.curTouchBtn=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),u.pzaSoundManager.playAudio("pause"),r.pzaGameState.isMenuShow=!0,this.curTouchBtn=null,this.assessNode.on(cc.Node.EventType.TOUCH_START,this.clickAssessStart,this),this.assessNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickAssess,this),this.assessNode.on(cc.Node.EventType.TOUCH_END,this.clickAssess,this),this.menuNode.on(cc.Node.EventType.TOUCH_START,this.clickMainMenuStart,this),this.menuNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickMainMenu,this),this.menuNode.on(cc.Node.EventType.TOUCH_END,this.clickMainMenu,this),this.optionNode.on(cc.Node.EventType.TOUCH_START,this.clickOptionStart,this),this.optionNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickOption,this),this.optionNode.on(cc.Node.EventType.TOUCH_END,this.clickOption,this),this.handBookNode.on(cc.Node.EventType.TOUCH_START,this.clickHandbookStart,this),this.handBookNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickHandbook,this),this.handBookNode.on(cc.Node.EventType.TOUCH_END,this.clickHandbook,this),this.backNode.on(cc.Node.EventType.TOUCH_START,this.clickBackGameStart,this),this.backNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickBackGame,this),this.backNode.on(cc.Node.EventType.TOUCH_END,this.clickBackGame,this),this.restartNode.on(cc.Node.EventType.TOUCH_START,this.clickRestartStart,this),this.restartNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickRestart,this),this.restartNode.on(cc.Node.EventType.TOUCH_END,this.clickRestart,this),y.pzaChannel.instance().showInter()},a.prototype.onDisable=function(){r.pzaGameState.isMenuShow=!1,this.curTouchBtn=null,y.pzaChannel.instance().closeBanner(),this.assessNode.off(cc.Node.EventType.TOUCH_START,this.clickAssessStart,this),this.assessNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickAssess,this),this.assessNode.off(cc.Node.EventType.TOUCH_END,this.clickAssess,this),this.menuNode.off(cc.Node.EventType.TOUCH_START,this.clickMainMenuStart,this),this.menuNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickMainMenu,this),this.menuNode.off(cc.Node.EventType.TOUCH_END,this.clickMainMenu,this),this.optionNode.off(cc.Node.EventType.TOUCH_START,this.clickOptionStart,this),this.optionNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickOption,this),this.optionNode.off(cc.Node.EventType.TOUCH_END,this.clickOption,this),this.handBookNode.off(cc.Node.EventType.TOUCH_START,this.clickHandbookStart,this),this.handBookNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickHandbook,this),this.handBookNode.off(cc.Node.EventType.TOUCH_END,this.clickHandbook,this),this.backNode.off(cc.Node.EventType.TOUCH_START,this.clickBackGameStart,this),this.backNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickBackGame,this),this.backNode.off(cc.Node.EventType.TOUCH_END,this.clickBackGame,this),this.restartNode.off(cc.Node.EventType.TOUCH_START,this.clickRestartStart,this),this.restartNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickRestart,this),this.restartNode.off(cc.Node.EventType.TOUCH_END,this.clickRestart,this)},a.prototype.init=function(e,a){this.backGameCall=function(){u.pzaSoundManager.resumeMusic(),e&&e()},this.needSaveGame=a},a.prototype.clickAssessStart=function(){this.curTouchBtn||(this.curTouchBtn=this.assessNode.uuid)},a.prototype.clickAssess=function(){var e=this;this.curTouchBtn===this.assessNode.uuid&&(this.curTouchBtn=null,h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.GAME_ASSESS_VIEW,function(a){var t=a&&a.getComponent(b.pzaAssessView);t&&t.bindBackGameCall(e.backGameCall),e.close()}))},a.prototype.clickMainMenuStart=function(){this.curTouchBtn||(this.curTouchBtn=this.menuNode.uuid)},a.prototype.clickMainMenu=function(){var e=this;this.curTouchBtn===this.menuNode.uuid&&(this.curTouchBtn=null,c.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,c.pzaLocalData.addDirty("autoPickLeft"),this.needSaveGame?h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(v.pzaWarningView),o=!0,n="\u4f60\u60f3\u8981\u56de\u5230\u4e3b\u83dc\u5355\u5417\uff1f\n\n\u4f60\u7684\u6e38\u620f\u5df2\u50a8\u5b58\u3002";r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)&&(n="\u4f60\u60f3\u8981\u56de\u5230\u4e3b\u83dc\u5355\u5417\uff1f",o=!1),t&&t.show(n,"\u79bb\u5f00","\u53d6\u6d88",function(){window.pzaGuideManager.guidePlant=null,window.pzaGuideManager.guideType=null,o&&(r.pzaGameState.midOut=!0),m.pzaUtil.changeGameSpeed(1),h.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),e.close(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.BACK_HOMEVIEW,null),0==o&&(f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI())},null,"\u79bb\u5f00\u6e38\u620f\uff1f")}):(s.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUtil.changeGameSpeed(1),h.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),this.close(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.BACK_HOMEVIEW,null)))},a.prototype.clickOptionStart=function(){this.curTouchBtn||(this.curTouchBtn=this.optionNode.uuid)},a.prototype.clickOption=function(){var e=this;this.curTouchBtn===this.optionNode.uuid&&(this.curTouchBtn=null,h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.GAME_OPTION_VIEW,function(a){var t=a&&a.getComponent(P.pzaOptionView);t&&t.init(!0,e.backGameCall),e.close()}))},a.prototype.clickHandbookStart=function(){this.curTouchBtn||(this.curTouchBtn=this.handBookNode.uuid)},a.prototype.clickHandbook=function(){this.curTouchBtn===this.handBookNode.uuid&&(this.curTouchBtn=null,c.pzaLocalData.data.unlockBook?h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.HANDBOOK_VIEW,function(e){var a=e&&e.getComponent(g.pzaHandbookView);a&&a.jdInit()}):h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(v.pzaWarningView);a&&a.show("\u5728\u5192\u9669\u6a21\u5f0f\u4e2d\u5b8c\u6210\u66f4\u591a\u5173\u5361\n\u89e3\u9501\u5927\u56fe\u9274\u3002","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")}))},a.prototype.clickBackGameStart=function(){this.curTouchBtn||(this.curTouchBtn=this.backNode.uuid)},a.prototype.clickBackGame=function(){this.curTouchBtn===this.backNode.uuid&&(this.curTouchBtn=null,this.backGameCall&&this.backGameCall(),this.close())},a.prototype.clickRestartStart=function(){this.curTouchBtn||(this.curTouchBtn=this.restartNode.uuid)},a.prototype.clickRestart=function(){var e=this;if(this.curTouchBtn===this.restartNode.uuid){this.curTouchBtn=null;var a=!1,t=c.pzaLocalData.endLessPowerCost;(s.pzaGameManager.getCurrentGame().isMainMode()||r.pzaGameState.judgeIsMini(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsVase(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsZombie(r.pzaGameState.gameMode))&&(t=c.pzaLocalData.normalPowerCost),c.pzaLocalData.isShowPowerGift||(t=0),r.pzaGameState.isTryMode(r.pzaGameState.curChapter,r.pzaGameState.curPart)&&(t=0,a=!0),h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(v.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){if(c.pzaLocalData.data.power<t)return d.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void h.pzaUIManager.showPowerView();c.pzaLocalData.setPower(-t),window.pzaplantManager.clearAllPlant(),c.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,c.pzaLocalData.addDirty("autoPickLeft"),s.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUtil.changeGameSpeed(1),s.pzaGameManager.getCurrentGame().gameRestart(),e.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1,!1,0,!a,t,!1,1)})}},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node),this.curTouchBtn=null},i([S({displayName:"\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],a.prototype,"assessNode",void 0),i([S({displayName:"\u4e3b\u83dc\u5355\u8282\u70b9",type:cc.Node})],a.prototype,"menuNode",void 0),i([S({displayName:"\u9009\u9879\u8282\u70b9",type:cc.Node})],a.prototype,"optionNode",void 0),i([S({displayName:"\u56fe\u9274\u8282\u70b9",type:cc.Node})],a.prototype,"handBookNode",void 0),i([S({displayName:"\u8fd4\u56de\u8282\u70b9",type:cc.Node})],a.prototype,"backNode",void 0),i([S({displayName:"\u91cd\u65b0\u5f00\u59cb\u8282\u70b9",type:cc.Node})],a.prototype,"restartNode",void 0),i([E],a)}(p.default);t.pzaMenuView=_,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaCommonPopView":"pzaCommonPopView","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaHandbookView":"pzaHandbookView","../pzaWarningView":"pzaWarningView","./pzaAssessView":"pzaAssessView","./pzaOptionView":"pzaOptionView"}],pzaMiniGameConf:[function(e,a,t){"use strict";cc._RF.push(a,"5af1652cu9KdaPvDGA0qgi7","pzaMiniGameConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMiniGameConf=void 0;var o=e("../Battle/Data/pzaZombieEnum"),n=e("../Battle/pzaGameState"),i=e("../Common/pzaGameConfig"),r=e("../Common/pzaGameManager"),p=e("../Common/pzaGameMiniGame"),l=e("../Common/pzaUtil"),s=function(){function e(e,a,t,o,n,i,r,p,l,s,c,u,d,h,m,f,z,y,g,v,b,P){void 0===i&&(i=1),void 0===r&&(r=0),this.id=0,this.name="",this.maxWave=0,this.waveZombieDensity=[],this.zombieTypes=[],this.magnification=1,this.flowerPotColumn=0,this.initialCards=[],this.plantCardsId=[],this.plantCardsWeight=[],this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.initSun=0,this.bossHp=0,this.tombstone=0,this.tombstonemini=0,this.lastWaterWaveMinColumn=0,this.lastWaterWaveZombie=0,this.minWaterWave=0,this.minFogColumn=0,this.mapId=0,this.isnight=0,this.id=e,this.name=a,this.maxWave=t,this.waveZombieDensity=o,this.zombieTypes=n,this.magnification=i,this.flowerPotColumn=r,this.initialCards=p,this.plantCardsId=l,this.plantCardsWeight=s,this.lastBungeeMinColumn=c,this.lastBungeeZombie=u,this.initSun=d,this.bossHp=h,this.tombstone=m,this.tombstonemini=f,this.lastWaterWaveMinColumn=z,this.lastWaterWaveZombie=y,this.minWaterWave=g,this.minFogColumn=v,this.mapId=b,this.isnight=P}return e.getRandomWayIndex=function(e,a,t,s){if(null==a||null==t||t.length<=0)return 0;var c=t[e%t.length];if(a==o.pzaZombieEnum.GARGANTUAR&&c==t.length-1)return l.pzaUtil.getRandomValueFromArray([0,1]);var u=r.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,p.pzaGameMiniGame).getConf(n.pzaGameState.curPart);if(i.pzaGameConfig.isAllWayZombie(a)&&s>=u.minWaterWave)return c;var d=i.pzaGameConfig.isWaterZombie(a),h=window.pzaMapManager.isInWaterWay(c);if(h&&d||!h&&!d)return c;if(d){var m=window.pzaMapManager.getRandomWaterWay();return null==m?c:m}return window.pzaMapManager.getRandomNoWaterWay()},e}();t.pzaMiniGameConf=s,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameMiniGame":"pzaGameMiniGame","../Common/pzaUtil":"pzaUtil"}],pzaMiniGameItem:[function(e,a,t){"use strict";cc._RF.push(a,"d5afcbz1DpFm4ycnNaxYrDg","pzaMiniGameItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMiniGameItem=void 0;var r=e("../Battle/pzaGameState"),p=e("../Common/pzaGameManager"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSpriteFrameManager"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaUIManager"),d=e("../Common/pzaUtil"),h=e("../Common/pzaWorldEventManager"),m=e("../Load/pzaPreLoadManager"),f=e("../utils/pzaChannel"),z=e("../utils/pzakc"),y=e("./pzaCommonMask"),g=e("./pzaWarningView"),v=cc._decorator,b=v.ccclass,P=v.property,C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.trophyNode=null,a.lockNode=null,a.bg=null,a.starNode=null,a.starCount=null,a.starPro=null,a.tokenCoinNode=null,a.trophySpriArr=[],a.imgBgSprArr=[],a.gameImg=null,a.newFlagNode=null,a.rewardUsedTip=null,a.startGameNode=null,a.titleSp=null,a.boardSpf=[],a.videoUnlockBtn=null,a.shareUnlockBtn=null,a.gameMode=null,a.unlockRequest=156,a.curPart=0,a.unlock=!1,a.startGameCall=null,a.refreshCall=null,a.costPower=l.pzaLocalData.normalPowerCost,a.gameDelayTime=1.5,a}return n(a,e),a.prototype.onEnable=function(){this.startGameNode.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},a.prototype.onDisable=function(){this.startGameNode.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},a.prototype.bindData=function(e,a,t,o){this.startGameNode&&(this.startGameNode.getChildByName("rightPower").getChildByName("rightPowercost").getComponent(cc.Label).string="X"+l.pzaLocalData.normalPowerCost),this.newFlagNode.active=!1,this.rewardUsedTip.active=!1,7==a.id?e=r.pzaGameMode.MINIGAME_KNOCK:8==a.id&&(e=r.pzaGameMode.MINIGAME_SMALL),this.gameMode=e,this.curPart=a.id,this.startGameCall=t,this.refreshCall=o;var n=this.curPart+"";s.pzaSpriteFrameManager.loadGuanKaImg("MiniIcon/mini_icon_"+n,this.bg.getComponent(cc.Sprite)),s.pzaSpriteFrameManager.loadGuanKaImg("MiniIcon/mini_title_"+n,this.titleSp),this.refreshItem();for(var i=0;i<l.pzaLocalData.data.miniGameNewFlagArr.length;i++)l.pzaLocalData.data.miniGameNewFlagArr[i][0]==this.curPart&&1==l.pzaLocalData.data.miniGameNewFlagArr[i][1]&&(this.newFlagNode.active=!0,this.newFlagNode.angle=0,cc.Tween.stopAllByTarget(this.newFlagNode),z.default.ani_JitterNode(this.newFlagNode,.4,15,3,!0));l.pzaLocalData.isShowPowerGift||(this.costPower=0,this.gameDelayTime=0,this.startGameNode.active=!1)},a.prototype.refreshItem=function(){null==l.pzaLocalData.data.miniUnLockCnt[this.curPart-1]&&(l.pzaLocalData.data.miniUnLockCnt[this.curPart-1]=0),null==l.pzaLocalData.data.miniFirstPassArr[this.curPart-1]&&(l.pzaLocalData.data.miniFirstPassArr[this.curPart-1]=0),this.starCount.string=l.pzaLocalData.getAllStar()+"/"+this.unlockRequest,this.starPro.width=l.pzaLocalData.getAllStar()/this.unlockRequest*150>=150?150:l.pzaLocalData.getAllStar()/this.unlockRequest*150,this.unlock=l.pzaLocalData.getAllStar()>=this.unlockRequest,this.unlock||(this.unlock=l.pzaLocalData.data.miniUnLockCnt[this.curPart-1]>0),9==this.curPart&&(this.unlock=!0),this.setUnlockBtn(),this.starNode.active=!this.unlock,this.lockNode.active=!this.unlock,this.startGameNode.active=this.unlock,this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#333333ff"),this.bg.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#333333ff"),this.node.getComponent(cc.Sprite).spriteFrame=this.unlock?this.boardSpf[0]:this.boardSpf[1],this.titleSp.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#333333ff"),d.pzaUtil.switchGraySprite(this.bg.getComponent(cc.Sprite),0==this.unlock),d.pzaUtil.switchGraySprite(this.titleSp,0==this.unlock),this.trophyNode.active=!1,l.pzaLocalData.data.miniFirstPassArr[this.curPart-1]&&(this.trophyNode.active=!0),9==this.curPart?(this.trophyNode.active=!0,this.trophyNode.getComponent(cc.Sprite).spriteFrame=this.trophySpriArr[1],this.tokenCoinNode.active=!0,this.starNode.active=!1,this.trophyNode.setPosition(cc.v2(-67,72))):(this.trophyNode.getComponent(cc.Sprite).spriteFrame=this.trophySpriArr[0],this.tokenCoinNode.active=!1,this.starNode.active=0==this.unlock),l.pzaLocalData.isShowPowerGift||(this.costPower=0,this.gameDelayTime=0,this.startGameNode.active=!1)},a.prototype.setUnlockBtn=function(){this.shareUnlockBtn.active=!1,this.videoUnlockBtn.active=!1,1!=this.unlock&&(l.pzaLocalData.maxShareRwdCount>0&&l.pzaLocalData.data.autoPickShareCount<l.pzaLocalData.maxShareRwdCount?this.shareUnlockBtn.active=!0:this.videoUnlockBtn.active=!0)},a.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},a.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},a.prototype.clickItem=function(){var e=this;if(!r.pzaGameState.miniGameIsClickBack){l.pzaLocalData.isWeekTwo=!1;for(var a=0;a<l.pzaLocalData.data.miniGameNewFlagArr.length;a++)l.pzaLocalData.data.miniGameNewFlagArr[a][0]==this.curPart&&1==l.pzaLocalData.data.miniGameNewFlagArr[a][1]&&(this.newFlagNode.active=!1,cc.Tween.stopAllByTarget(this.newFlagNode),l.pzaLocalData.data.miniGameNewFlagArr[a][1]=2,l.pzaLocalData.addDirty("miniGameNewFlagArr"));this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),this.unlock?this.startGame():u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){!l.pzaLocalData.isNoShareVideoSwap&&l.pzaLocalData.maxShareRwdCount>0&&l.pzaLocalData.data.autoPickShareCount<l.pzaLocalData.maxShareRwdCount||(l.pzaLocalData.data.miniClickFlag=!1);var t=a&&a.getComponent(g.pzaWarningView);t&&t.show("\u4f60\u9700\u8981\u5728\u5192\u9669\u6a21\u5f0f\u6536\u96c6\u661f\u7ea7\u8fbe\u5230"+e.unlockRequest+"\n\u89e3\u9501\u672c\u5173\u5361\u3002","\u63d0\u524d\u89e3\u9501","\u8fd4\u56de",function(){e.clickShareBtn()},function(){e.node.color=cc.Color.fromHEX(cc.color(),"#939393")},"\u672a\u89e3\u9501\uff01",!l.pzaLocalData.data.miniClickFlag,l.pzaLocalData.data.miniClickFlag)})}},a.prototype.startGame=function(){var e=this,a=this.getGameScene();if(r.pzaGameState.midOut)r.pzaGameState.gameMode===this.gameMode&&r.pzaGameState.curPart===this.curPart?(this.startGameCall&&this.startGameCall(),console.log("recover"),p.pzaGameManager.getCurrentGame().gameRecover(a,this.curPart,null)):(console.log("midOutStart"),p.pzaGameManager.midOutStart(this.gameMode,a,this.curPart,this.startGameCall.bind(this)));else{if(l.pzaLocalData.data.power<this.costPower)return c.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void u.pzaUIManager.showPowerView();l.pzaLocalData.setPower(-this.costPower),z.default.sendMsg("powerani"),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),y.pzaCommonMask.showMask(),this.scheduleOnce(function(){y.pzaCommonMask.hideMask(),e.startGameCall&&e.startGameCall(),u.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(e.gameMode,a,e.curPart)},this.gameDelayTime)}},a.prototype.getGameScene=function(){var e=0;return 1==this.curPart?e=5:2==this.curPart?e=2:3==this.curPart?e=5:4==this.curPart?e=5:5==this.curPart?e=1:6==this.curPart?e=1:7==this.curPart?e=2:8==this.curPart?e=3:9==this.curPart?e=5:10==this.curPart?e=3:11==this.curPart?e=3:12==this.curPart?e=5:13==this.curPart?e=4:14==this.curPart?e=1:15==this.curPart?e=1:16==this.curPart&&(e=3),e},a.prototype.clickVideoBtn=function(){var e=this;f.pzaChannel.instance().showVideo({sucCall:function(){l.pzaLocalData.data.miniUnLockCnt[e.curPart-1]++,l.pzaLocalData.data.miniClickFlag=!1,l.pzaLocalData.addDirty("miniUnLockCnt","miniClickFlag"),e.refreshCall&&e.refreshCall()},failCall:function(){e.node.color=cc.Color.fromHEX(cc.color(),"#939393")},endCall:function(){},posName:"\u8ff7\u4f60\u6e38\u620f\u63d0\u524d\u89e3\u9501"})},a.prototype.clickShareBtn=function(){var e=this;f.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"24"},function(){l.pzaLocalData.data.miniUnLockCnt[e.curPart-1]++,l.pzaLocalData.data.miniClickFlag=!1,l.pzaLocalData.data.autoPickShareCount++,l.pzaLocalData.addDirty("miniUnLockCnt","miniClickFlag","autoPickShareCount"),e.refreshCall&&e.refreshCall()})},i([P({displayName:"\u5956\u676f",type:cc.Node})],a.prototype,"trophyNode",void 0),i([P({displayName:"\u9501",type:cc.Node})],a.prototype,"lockNode",void 0),i([P({displayName:"\u573a\u666f",type:cc.Node})],a.prototype,"bg",void 0),i([P({displayName:"\u661f\u7ea7\u8282\u70b9",type:cc.Node})],a.prototype,"starNode",void 0),i([P({displayName:"\u661f\u661f\u6570\u91cf",type:cc.Label})],a.prototype,"starCount",void 0),i([P({displayName:"\u661f\u661f\u8fdb\u5ea6\u6761",type:cc.Node})],a.prototype,"starPro",void 0),i([P({displayName:"\u4ee3\u5e01\u8282\u70b9",type:cc.Node})],a.prototype,"tokenCoinNode",void 0),i([P({displayName:"\u9650\u65f6\u6389\u843d\u548c\u5956\u676f\u7cbe\u7075",type:[cc.SpriteFrame]})],a.prototype,"trophySpriArr",void 0),i([P({displayName:"\u6e38\u620f\u80cc\u666f\u56fe\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"imgBgSprArr",void 0),i([P({displayName:"\u6e38\u620f\u80cc\u666f\u56fe",type:cc.Sprite})],a.prototype,"gameImg",void 0),i([P({displayName:"\u65b0\u6e38\u620f\u6807\u8bc6",type:cc.Node})],a.prototype,"newFlagNode",void 0),i([P({displayName:"\u5956\u52b1\u7528\u5c3d\u63d0\u793a",type:cc.Node})],a.prototype,"rewardUsedTip",void 0),i([P({displayName:"\u5f00\u59cb\u6e38\u620f\u8282\u70b9",type:cc.Node})],a.prototype,"startGameNode",void 0),i([P({type:cc.Sprite})],a.prototype,"titleSp",void 0),i([P([cc.SpriteFrame])],a.prototype,"boardSpf",void 0),i([P({type:cc.Node})],a.prototype,"videoUnlockBtn",void 0),i([P({type:cc.Node})],a.prototype,"shareUnlockBtn",void 0),i([b],a)}(cc.Component);t.pzaMiniGameItem=C,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaMiniGameView:[function(e,a,t){"use strict";cc._RF.push(a,"597c4RGxHpOPqXq7zBKdhw8","pzaMiniGameView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMiniGameView=void 0;var r=e("../Battle/pzaGameState"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGameManager"),s=e("../Common/pzaGameMiniGame"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSoundManager"),d=e("../Common/pzaTipManager"),h=e("../Common/pzaUIManager"),m=e("../Common/pzaUtil"),f=e("../Common/pzaWorldEventManager"),z=e("../Load/pzaPreLoadManager"),y=e("../utils/pzaChannel"),g=e("./pzaCommonMask"),v=e("./pzaMiniGameItem"),b=e("./pzaPowerView"),P=e("./pzaRankView"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.coinCount=null,a.trophyCount=null,a.scrollView=null,a.partPre=null,a.itemContent=null,a.rankWidget=null,a.items=[],a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.node.x=0,this.coinCount.string=m.pzaUtil.getCurrencyStr(c.pzaLocalData.data.coin),this.trophyCount.string=c.pzaLocalData.getMiniGameTrophy()+"/13";for(var a=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,t=0;t<a;t++)if(0!=t){var o=p.pzaGameCommonPool.requestInstant(this.partPre);o.setParent(this.itemContent);var n=o.getComponent(v.pzaMiniGameItem),i=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).getConfById(t);n&&n.bindData(r.pzaGameMode.MINIGAME,i,function(){e.close()},this.refreshItem.bind(this)),this.items.push(n)}this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){u.pzaSoundManager.playAudio("chapterdown")}))),this.scrollView.scrollToLeft(0),this.rankWidget.updateAlignment(),r.pzaGameState.miniGameIsClickBack=!1},a.prototype.refreshItem=function(){for(var e=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,a=0;a<e;a++){var t=this.items[a];t&&t.refreshItem()}},a.prototype.clickBack=function(){var e=this;y.pzaChannel.instance().closeBanner(),u.pzaSoundManager.playSFX(),r.pzaGameState.miniGameIsClickBack=!0,this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.CHALLENGE_VIEW,function(){g.pzaCommonMask.showMask(),e.node.parent.stopAllActions(),e.node.parent.x=-1680,e.node.x=1680,e.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){g.pzaCommonMask.hideMask(),e.close()})))})},a.prototype.clickRankBtn=function(){"hw"!=y.pzaChannel.instance().channel&&"oppo"!=y.pzaChannel.instance().channel&&"vivo"!=y.pzaChannel.instance().channel?this.createWxUserInfoButton(!0,function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.RANK_VIEW,function(e){var a=e&&e.getComponent(P.pzaRankView);a&&a.init(0)})}):d.pzaTipManager.showHomeTip("\u6682\u672a\u5f00\u653e",this.node,2)},a.prototype.createWxUserInfoButton=function(e,a){var t=this,o=y.pzaChannel.instance().getChannel();"tt"!=o.channel?"wx"!==o.channel||null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar?a&&a():o.wxCheckPrivacySetting(function(n){var i=function(){var e=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+t.rankWidget.node.x-60)/n.width*e.width,top:(.5*n.height-t.rankWidget.node.y-60)/n.height*e.height,width:120/n.width*e.width,height:120/n.height*e.height};o.getUserInfo(function(){null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),a&&a())},i,!1)};if(n)return e?void o.wxPrivacyAuthorize(i,null):void(a&&a());i()},null):o.getUserInfo(function(){a()})},a.prototype.clickPower=function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.POWER_VIEW,function(e){var a=e&&e.getComponent(b.pzaPowerView);a&&a.bindData("\u8865\u5145\u4f53\u529b",function(){var e;e=c.pzaLocalData.data.power+c.pzaLocalData.addPowerValue,c.pzaLocalData.data.power=e,c.pzaLocalData.addDirty("power"),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.UPDATE_POWER,null)},null)})},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var e=y.pzaChannel.instance().getChannel();"wx"==e.channel&&e.destroyAuthorizationButton()},i([S({displayName:"\u91d1\u5e01",type:cc.Label})],a.prototype,"coinCount",void 0),i([S({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],a.prototype,"trophyCount",void 0),i([S({displayName:"scrollView",type:cc.ScrollView})],a.prototype,"scrollView",void 0),i([S({displayName:"\u7ae0\u8282\u9884\u8bbe",type:cc.Prefab})],a.prototype,"partPre",void 0),i([S({displayName:"\u7ae0\u8282\u5217\u8868\u7236\u8282\u70b9",type:cc.Node})],a.prototype,"itemContent",void 0),i([S({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],a.prototype,"rankWidget",void 0),i([E],a)}(cc.Component);t.pzaMiniGameView=_,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameMiniGame":"pzaGameMiniGame","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaMiniGameItem":"pzaMiniGameItem","./pzaPowerView":"pzaPowerView","./pzaRankView":"pzaRankView"}],pzaMiniVaseConf:[function(e,a,t){"use strict";cc._RF.push(a,"1575aeEzhlHRYkKpWfMkcZ0","pzaMiniVaseConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMiniVaseConf=void 0;t.pzaMiniVaseConf=function(e){this.id=0,this.name="",this.plant="",this.zombie="",this.min=0,this.max=0,this.green=0,this.unlockChapter=0,this.unlockPart=0,this.endless=0,this.id=e.id,this.name=e.name||"",this.plant=e.plant||"",this.zombie=e.zombie||"",this.min=e.min||0,this.max=e.max||0,this.green=e.green||0;var a=e.unlock.trim().split("-");this.unlockChapter=parseInt(a[0]),this.unlockPart=parseInt(a[1]),this.endless=e.endless||0},cc._RF.pop()},{}],pzaMissile:[function(e,a,t){"use strict";cc._RF.push(a,"882fcmpMIZMmIdlEDKuC1tu","pzaMissile");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMissile=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaSoundManager"),s=e("../../Common/pzaWorldEventManager"),c=e("../../Load/pzaPreLoadManager"),u=e("../Data/pzaBaseData"),d=e("../Data/pzaBuffData"),h=e("../Data/pzaPlantEnum"),m=e("../Effect/pzaBungeeTarget"),f=e("../pzaEffectManager"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.targetPrefab=null,a.earth=null,a.redPoint=null,a.targetPos=null,a.logicPos=null,a.moveSpeed=1200,a.atk=0,a.up=!0,a.isRotate=!1,a.xIndex=null,a.yIndex=null,a.inGround=!1,a.boomTime=3,a.bungeeTarget=null,a.scaleState=0,a.delayDownTime=3,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.ICE_SHROOM_BOOM,this.death,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.MISSILE_DEATH,this.death,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.ICE_SHROOM_BOOM,this.death,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.MISSILE_DEATH,this.death,this)},a.prototype.init=function(e,a,t,o,n){this.baseData=new u.pzaBaseData(null,null,!1),this.atk=e,this.logicPos=a,this.targetPos=t,this.node.scaleY=1,this.up=!0,this.isRotate=!1,this.xIndex=o,this.yIndex=n,this.delayDownTime=3,this.createTarget()},a.prototype.createTarget=function(){this.baseData.xIndex=this.xIndex,this.baseData.yIndex=this.yIndex,this.baseData.logicPos=this.targetPos;var e=p.pzaGameCommonPool.requestInstant(this.targetPrefab);e.setParent(this.node.parent),this.bungeeTarget=e&&e.getComponent(m.pzaBungeeTarget),this.bungeeTarget&&this.bungeeTarget.bindData(this.baseData,!1)},a.prototype.logicUpdate=function(e){if(this.isRotate)return this.logicPos.y+=e*this.moveSpeed*1,this.node.angle+=1e3*e,this.node.setPosition(this.logicPos),void(this.logicPos.y>=600&&this.close());if(this.inGround){if(this.redPointAni(e),this.boomTime-=e,this.boomTime<=0){this.boomTime=999,l.pzaSoundManager.playAudio("cherrybomb",1),f.pzaEffectManager.createFrameEffect(c.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.logicPos.x,this.logicPos.y),null,1.5),this.close();for(var a=this.xIndex-1;a<=this.xIndex+1;a++)for(var t=this.yIndex+1;t>=this.yIndex-1;t--)window.pzaplantManager.absorbPlant(a,t,this.atk,this.baseData)}}else this.delayDownTime-=e,this.delayDownTime>0||(this.logicPos.y+=e*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.inGroundState())},a.prototype.redPointAni=function(e){1==this.scaleState&&this.redPoint.scale>=1.2&&(this.scaleState=0),0==this.scaleState&&this.redPoint.scale<=.5&&(this.scaleState=1),0==this.scaleState?this.redPoint.scale-=3*e:this.redPoint.scale+=3*e,this.redPoint.scale>=1.2&&(this.redPoint.scale=1.2),this.redPoint.scale<=.5&&(this.redPoint.scale=.5)},a.prototype.inGroundState=function(){this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.inGround=!0,this.redPoint.active=!0,this.earth.active=!0;for(var e=this.xIndex-1;e<=this.xIndex+1;e++)for(var a=this.yIndex+1;a>=this.yIndex-1;a--){var t=""+e+a,o=window.pzaplantManager.plantDataMap.get(t);if(null!=o&&!o.isDead&&!o.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)&&o.plantData.plantType==h.pzaPlantEnum.UMBRELLA_LEAF){var n=window.pzaplantManager.getPlantByData(o);return n&&n.ricochetBullet(o,null),void(this.isRotate=!0)}}window.pzaplantManager.absorbPlant(this.xIndex,this.yIndex,this.atk,this.baseData)},a.prototype.close=function(){e.prototype.close.call(this),this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null},a.prototype.death=function(){f.pzaEffectManager.createIceBoomEffect(this.logicPos),this.close()},i([g({displayName:"\u9776\u5b50\u9884\u8bbe",type:cc.Prefab})],a.prototype,"targetPrefab",void 0),i([g({type:cc.Node})],a.prototype,"earth",void 0),i([g({type:cc.Node})],a.prototype,"redPoint",void 0),i([y],a)}(r.pzaBaseComponent);t.pzaMissile=v,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Effect/pzaBungeeTarget":"pzaBungeeTarget","../pzaEffectManager":"pzaEffectManager"}],pzaMonthSignConf:[function(e,a,t){"use strict";cc._RF.push(a,"dc1c0j6pk5BXLVxMRzCb1Ny","pzaMonthSignConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaMonthSignConf=void 0;var o=e("../Common/pzaGamePropConfig");t.pzaMonthSignConf=function(e){this.day=0,this.name="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex="",this.day=e.iD,this.name=e.name||"",this.rewardType=e.rewardType,this.rewardCount=parseInt(e.rewardValue),this.recFun=e.aDClaim,this.iconIndex=e.icon},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaMonthSignItem:[function(e,a,t){"use strict";cc._RF.push(a,"77020VSUuFDqYJdUgLxx3Zt","pzaMonthSignItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGameConfig"),p=e("../Common/pzaGamePropConfig"),l=e("../Common/pzaItemTips"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaSpriteFrameManager"),u=e("../utils/pzakc"),d=e("./pzaMonthSignMgr"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hasGetNode=null,a.coinIcon=null,a.plantFrames=[],a.plantCardNode=null,a.plantCardBgSprArr=[],a.desc=null,a.propCount=null,a.canGetLight=null,a.daysLab=null,a.prop_sun=null,a.prop_magnet=null,a.prop_cherryBomb=null,a.day=null,a}return n(a,e),a.prototype.refresh=function(e){this.hasGetNode.active=!1,this.canGetLight.active=!1,this.coinIcon.node.active=!1,this.prop_sun.active=!1,this.prop_magnet.active=!1,this.prop_cherryBomb.active=!1,this.propCount.node.active=!1,this.plantCardNode.active=!1,this.daysLab.string=e.toString();var a=d.default.instance().getConf(e);switch(this.day=e,e<=s.pzaLocalData.data.monthSignDays?(this.hasGetNode.active=!0,this.desc.string="\u5df2\u9886\u53d6"):this.desc.string=a.name,s.pzaLocalData.data.isSignInMonth?u.default.getCurrentDay()-s.pzaLocalData.data.monthSignDays>0&&s.pzaLocalData.data.monthSignDays+1==e&&(this.canGetLight.active=!0):e==s.pzaLocalData.data.monthSignDays+1&&(this.canGetLight.active=!0),this.desc.node.active=!0,this.node.addComponent(l.default).bindData(a.rewardType,a.rewardCount),a.rewardType){case p.pzaGamePropEnum.PROP_COIN:case p.pzaGamePropEnum.RANDOM_GIFT:case p.pzaGamePropEnum.PROP_POWER:this.coinIcon.node.active=!0,this.propCount.node.active=!0,this.propCount.string="X"+a.rewardCount,c.pzaSpriteFrameManager.loadCommonImg(""+a.iconIndex,this.coinIcon);break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:case p.pzaGamePropEnum.PROP_FREE_SUN:case p.pzaGamePropEnum.PROP_AUTO_PICK:this.showProAni(a),this.coinIcon.node.active=!0,c.pzaSpriteFrameManager.loadCommonImg(""+a.iconIndex,this.coinIcon);break;case p.pzaGamePropEnum.PROP_PLANTE:case p.pzaGamePropEnum.PROP_FERTILIZER:case p.pzaGamePropEnum.PROP_SECRET_FLOWER:case p.pzaGamePropEnum.PROP_GOLD_FLOWER:case p.pzaGamePropEnum.PROP_PESTICIDE:this.showPlant(a,p.pzaGamePropEnum.PROP_PESTICIDE)}a.rewardType==p.pzaGamePropEnum.PROP_FERTILIZER?this.coinIcon.node.x=-1:this.coinIcon.node.x=0},a.prototype.showGardenGift=function(e,a){this.coinIcon.node.active=!0,this.propCount.node.active=!0,this.desc.string=e.name,this.propCount.string="X"+e.rewardCount,a==p.pzaGamePropEnum.PROP_GOLD_FLOWER?c.pzaSpriteFrameManager.loadGoldPlant(31,this.coinIcon):a==p.pzaGamePropEnum.PROP_SECRET_FLOWER&&c.pzaSpriteFrameManager.loadGoldPlant(28,this.coinIcon)},a.prototype.showProAni=function(e){this.propCount.node.active=!0,this.desc.string=e.name,this.propCount.string="X"+e.rewardCount},a.prototype.showPlant=function(e){if(this.coinIcon.node.active=!0,this.propCount.node.active=!0,this.desc.string=e.name,e.rewardType==p.pzaGamePropEnum.PROP_PLANTE){this.propCount.string="";var a=r.pzaGameConfig.getPlantConfig(e.rewardCount);a&&(this.plantCardNode.getComponent(cc.Sprite).spriteFrame=this.plantCardBgSprArr[a.rareLevel-1]),c.pzaSpriteFrameManager.loadPlantWholeCard(e.rewardCount+"",this.coinIcon)}else{this.propCount.string="X"+e.rewardCount;var t=p.pzaGamePropConfig.PorpConfigMap.get(e.rewardType);t.itemicon>0&&c.pzaSpriteFrameManager.loadCommonGoodsIcon(t.itemicon,this.coinIcon)}},i([f({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],a.prototype,"hasGetNode",void 0),i([f({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],a.prototype,"coinIcon",void 0),i([f({displayName:"\u690d\u7269\u80a5\u6599\u6740\u866b\u56fe",type:[cc.SpriteFrame]})],a.prototype,"plantFrames",void 0),i([f({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],a.prototype,"plantCardNode",void 0),i([f({displayName:"\u690d\u7269\u5361\u7247\u7b49\u7ea7\u80cc\u666f\u56fe",type:[cc.SpriteFrame]})],a.prototype,"plantCardBgSprArr",void 0),i([f({displayName:"\u63cf\u8ff0",type:cc.Label})],a.prototype,"desc",void 0),i([f({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"propCount",void 0),i([f({displayName:"\u53ef\u4ee5\u9886\u53d6\u6807\u8bc6\u6846",type:cc.Node})],a.prototype,"canGetLight",void 0),i([f({displayName:"\u5f53\u524d\u5929\u6570",type:cc.Label})],a.prototype,"daysLab",void 0),i([f(cc.Node)],a.prototype,"prop_sun",void 0),i([f(cc.Node)],a.prototype,"prop_magnet",void 0),i([f(cc.Node)],a.prototype,"prop_cherryBomb",void 0),i([m],a)}(cc.Component);t.default=z,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../utils/pzakc":"pzakc","./pzaMonthSignMgr":"pzaMonthSignMgr"}],pzaMonthSignMgr:[function(e,a,t){"use strict";cc._RF.push(a,"c2d87H04CxNiJ5zi/DIh4PN","pzaMonthSignMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var n=e("./pzaMonthSignConf"),i=cc._decorator,r=i.ccclass,p=(i.property,function(){function e(){this.monthSignMap=new Map,this.monthSignNewMap=new Map,this.useNewData=!1}var a;return a=e,e.instance=function(){return a._me||(a._me=new a),a._me},e.prototype.init=function(e){for(var a=0;a<e.length;a++){var t=new n.pzaMonthSignConf(e[a]);this.monthSignMap.set(t.day,t)}},e.prototype.resetInit=function(e){for(var a=0;a<e.length;a++){var t=new n.pzaMonthSignConf(e[a]);this.monthSignNewMap.set(t.day,t)}},e.prototype.getConf=function(e){return this.useNewData?this.monthSignNewMap.get(e):this.monthSignMap.get(e)},e._me=null,a=o([r],e)}());t.default=p,cc._RF.pop()},{"./pzaMonthSignConf":"pzaMonthSignConf"}],pzaMonthSignView:[function(e,a,t){"use strict";cc._RF.push(a,"0aec2nHXplDK5gwBP65hwLM","pzaMonthSignView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Battle/Data/pzaDropType"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGamePropConfig"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaRewardManager"),d=e("../Common/pzaSoundManager"),h=e("../Common/pzaStatisticsMgr"),m=e("../Common/pzaTipManager"),f=e("../Common/pzaUIManager"),z=e("../Load/pzaPreLoadManager"),y=e("../utils/pzaChannel"),g=e("../utils/pzakc"),v=e("../View/Battle/pzaNewPlantView"),b=e("./pzaMonthSignItem"),P=e("./pzaMonthSignMgr"),C=cc._decorator,E=C.ccclass,S=C.property,_=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.content=null,a.item1Pre=null,a.item2Pre=null,a.video=null,a.desc=null,a.tip=null,a.getNode=null,a.getAllNode=null,a.canClick=!1,a.list=[],a}return n(a,e),a.prototype.onEnable=function(){this.list=[],this.canClick=!1,this.tip.node.active=!1,this.getAllNode.active=!1,this.content.removeAllChildren(),this.init(),this.refreshUi(),h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:8})},a.prototype.init=function(){for(var e=g.default.getMonthDays(),a=1;a<=e;a++)this.createMonthItem(a);this.content.height=e<=28?514:645},a.prototype.refreshUi=function(e){var a,t;if(void 0===e&&(e=!1),this.tip.node.active=!1,this.video.active=!1,c.pzaLocalData.data.isSignInMonth)if(g.default.getCurrentDay()-c.pzaLocalData.data.monthSignDays>0){this.canClick=!0,this.desc.string="\u8865\u7b7e",this.tip.node.active=!0,this.video.active=!0;var o=g.default.getCurrentDay()-c.pzaLocalData.data.monthSignDays,n=c.pzaLocalData.data.retroSignDays;this.tip.string="\u672c\u6708\u53ef\u8865\u7b7e<color=#ffe659>"+o+"</c>\u5929\u5df2\u8865\u7b7e<color=#ffe659>"+n+"</c>\u5929",h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"2"},{name:"adname",value:"\u6708\u7b7e\u5230\u8865\u7b7e"})}else this.canClick=!1,this.desc.string="\u5df2\u9886\u53d6";else this.canClick=!0,this.desc.string="\u7b7e\u5230";if("noAD"!=y.pzaChannel.instance().channel||y.pzaChannel.isConfRemote||(c.pzaLocalData.data.monthSignDays!=P.default.instance().monthSignNewMap.size?this.getAllNode.active=!0:(this.getAllNode.active=!1,this.tip.node.active=!1),this.getNode.active=!1),e&&this.list.length>0)try{for(var i=r(this.list),p=i.next();!p.done;p=i.next()){var l=p.value;l.refresh(l.day)}}catch(s){a={error:s}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}},a.prototype.createMonthItem=function(e){var a;a=e%7==0?this.item2Pre:this.item1Pre;var t=l.pzaGameCommonPool.requestInstant(a,!1);if(null!=t){t.setParent(this.content);var o=t.getComponent(b.default);null!=o&&(o.refresh(e),this.list.push(o))}},a.prototype.start=function(){},a.prototype.close=function(){d.pzaSoundManager.playSFX(),l.pzaGameCommonPool.returnInstant(this.node)},a.prototype.clickRec=function(){var e=this;if(this.canClick){d.pzaSoundManager.playSFX();var a=function(){var a=P.default.instance().getConf(c.pzaLocalData.data.monthSignDays+1);if(null!=a){c.pzaLocalData.data.monthSignDays++,c.pzaLocalData.data.isSignInMonth=!0,c.pzaLocalData.addDirty("monthSignDays","isSignInMonth");var t=new s.pzaRewardPropData(a.rewardType,a.rewardCount);a.rewardType==s.pzaGamePropEnum.PROP_PLANTE&&c.pzaLocalData.data.ownPlants.indexOf(a.rewardCount)<0?(u.pzaRewardManager.recieveRewards([t],function(){},!1,null,!1),f.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.NEW_PLANT_VIEW,function(e){(e&&e.getComponent(v.pzaNewPlantView)).showView(p.pzaDropType.PLANT_CARD,a.rewardCount,!1)})):u.pzaRewardManager.recieveRewards([t],function(){}),e.refreshUi(!0)}};this.video.active?y.pzaChannel.instance().showVideo({sucCall:function(){c.pzaLocalData.data.retroSignDays++,c.pzaLocalData.addDirty("retroSignDays"),a()},failCall:function(){},endCall:function(){},posName:"\u6708\u7b7e\u5230\u8865\u7b7e",adsid:"2"}):a()}else console.log("can not click")},a.prototype.monthSighGetAll=function(){if("noAD"==y.pzaChannel.instance().channel&&!y.pzaChannel.isConfRemote){for(var e=0;e<P.default.instance().monthSignNewMap.size;e++){var a=P.default.instance().getConf(e+1);if(null==a)return;var t=[new s.pzaRewardPropData(a.rewardType,a.rewardCount)];u.pzaRewardManager.recieveRewardData(t)}c.pzaLocalData.data.monthSignDays=P.default.instance().monthSignNewMap.size,c.pzaLocalData.data.isSignInMonth=!0,c.pzaLocalData.addDirty("monthSignDays","isSignInMonth"),m.pzaTipManager.showHomeTip("\u6708\u7b7e\u5230\u9886\u53d6\u6210\u529f!",null,2),this.refreshUi(!0)}},a.show=function(){},i([S({displayName:"\u5bb9\u5668",type:cc.Node})],a.prototype,"content",void 0),i([S({displayName:"\u5b50\u9884\u8bbe1",type:cc.Prefab})],a.prototype,"item1Pre",void 0),i([S({displayName:"\u5b50\u9884\u8bbe2",type:cc.Prefab})],a.prototype,"item2Pre",void 0),i([S({displayName:"\u89c6\u9891\u6807\u8bc6",type:cc.Node})],a.prototype,"video",void 0),i([S({displayName:"\u63cf\u8ff0",type:cc.Label})],a.prototype,"desc",void 0),i([S({displayName:"\u8865\u7b7e\u63d0\u793a",type:cc.RichText})],a.prototype,"tip",void 0),i([S({displayName:"\u6b63\u5e38\u7b7e\u5230\u8282\u70b9",type:cc.Node})],a.prototype,"getNode",void 0),i([S({displayName:"\u4e00\u952e\u7b7e\u5230",type:cc.Node})],a.prototype,"getAllNode",void 0),i([E],a)}(cc.Component);t.default=_,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaMonthSignItem":"pzaMonthSignItem","./pzaMonthSignMgr":"pzaMonthSignMgr"}],pzaNameConf:[function(e,a,t){"use strict";cc._RF.push(a,"4748eeJ6+FF5pfuE3T7fo19","pzaNameConf");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieSkName=t.pzaPlantSkName=void 0;var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function e(){}return e.COMMON={idle:"idle",attack:"attack",T_idle:"T_idle",T_attack:"T_attack",blow:"blow"},e.SUN_FLOWER={sunLight:"Sunlight"},e.CHERRY_BOMB={blow:"attack",ad_blow:"attack2"},e.WALL_NUT={SKIN:{intact:"skin_1",hurt:"skin_2",dying:"skin_3"},idle:"idle",hurt:"idle2"},e.POTATO_MINE={idle:"idle",blow:"blow",breakGround:"idle2",ready_idle:"idle3"},e.CHOMPER={strong_idle:"idle",thin_idle:"idle2",big:"idle3",T_strong_idle:"T_idle",T_thin_idle:"T_idle2",T_big:"T_idle3"},e.SUN_SHROOM={small_sunlight:"Sunlight",big_sunlight:"Sunlight2"},e.SCAREDY_SHROOM={idle:"idle",scaredy_start:"scared1",scaredy_end:"scared2",scaredy_idle:"scared_idle"},e.DOOM_SHROOM={idle:"idle",blow:"attack"},e.LILY_PAD={idle:"idle"},e.JALAPENO={idle:"idle",blow:"attack"},e.TALL_NUT={SKIN:{intact:"body_1",hurt:"body_2",dying:"body_3"},idle:"idle"},e.CACTUS={idle:"idle",attack:"attack",attack_top:"attack2"},e.BLOVER={idle:"idle",attack:"attack",attack2:"attack2"},e.SPLIT_PEA={idle:"idle",rightAttack:"attack",leftAttack:"attack2",twoAttack:"attack3"},e.PUMPKIN={SKIN:{intact:"A1",hurt:"A2",dying:"A3"},BACK_SKIN:{intact:"B1",hurt:"B2",dying:"B3"},idle:"idle"},e.FLOWER_POT={idle:"idle",idle_light:"idle3",idle5:"idle5"},e.UMBRELLA_LEAF={attack:"attack",idle:"idle"},e.MARIGOLD={idle:"idle",createCoin:"idle2"},e.MELON_PULT={idle:"idle",attack:"attack"},e.TWIN_SUNFLOWER={sunLight:"idle2"},e.COB_CANNON={reLoadingIdle:"idle",normalIdle:"idle3",lightIdle:"idle2",loadingComplete:"out",sendAttack:"attack",shellDropLeft:"attack3",shellDropRight:"attack2"},e.Phoenix={speAttack:"attack2"},o([i],e)}());t.pzaPlantSkName=r;var p=function(){function e(){}return e.COMMON={SKIN:{intact:"zombie_1",hurt:"zombie_1_1"},idle:"idle",attack:"attack",death:"death",blow:"blow",move:"move"},e.ZOMBONI={SKIN:{intact:"skin1",hurt:"skin2",dying:"skin3"},intactMove:"move",hurtMove:"move2"},e.BALLOON_ZOMBIE={flyIdle:"idle",flyMove:"move",walkMove:"move2",drop:"bao"},e.POGO_ZOMBIE={jump:"jump"},e.LADDER_ZOMBIE={SKIN:{intact:"zombie_1",hurt:"zombie_1_1"}},e.Cream_Pea={attack:"attack",death:"death",idle:"idle",move:"move",moveAtk:"move2"},e.COB_CANNON={reLoadingIdle:"idle",normalIdle:"idle3",lightIdle:"idle2",loadingComplete:"out",sendAttack:"attack",shellDropLeft:"attack3",shellDropRight:"attack2"},o([i],e)}();t.pzaZombieSkName=p,cc._RF.pop()},{}],pzaNativeInterAd:[function(e,a,t){"use strict";cc._RF.push(a,"0f2baGLC15CGZPjOXrqHPIN","pzaNativeInterAd");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNativeInterAd=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaUtil"),l=e("../Common/pzaWorldEventManager"),s=e("./pzaChannel"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.title=null,a.source=null,a.clickBtnTxt=null,a.picUri=null,a.bg=null,a.adid=null,a}return n(a,e),a.prototype.init=function(e,a,t,o,n){"hw"==s.pzaChannel.instance().channel&&(this.node.scale=.7,this.node.y=100),this.title.string=t,this.source.string=o,this.clickBtnTxt.string=n,this.adid=e,this.bg.on(cc.Node.EventType.TOUCH_END,this.clickAd,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.REPORT_AD_SHOW,this.reportAdShow,this),this.reportAdShow(),this.loadPics(a)},a.prototype.onDisable=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.clickAd,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.REPORT_AD_SHOW,this.reportAdShow,this)},a.prototype.reportAdShow=function(){this.adid&&s.pzaChannel.instance().reportAdShow(this.adid,this.node)},a.prototype.clickAd=function(){this.adid&&s.pzaChannel.instance().reportAdClick(this.adid),this.close()},a.prototype.loadPics=function(e){var a=e;-1!=a.indexOf(".png")||-1!=a.indexOf(".jpg")||a.indexOf(".jpeg");var t=this,o=new Image;o.src=a,o.crossOrigin="anonymous",o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),t.picUri.spriteFrame=new cc.SpriteFrame(e)}},a.prototype.close=function(){var e=p.pzaUtil.getRandomFloatNum(0,1),a=.1*s.pzaChannel.instance().getCtrl("p18");console.log("\u5173\u95ed\u540e\u6982\u7387: ",e,a),a>=e&&setTimeout(function(){s.pzaChannel.instance().showInter()},3e3),r.pzaGameCommonPool.returnInstant(this.node)},i([d(cc.Label)],a.prototype,"title",void 0),i([d(cc.Label)],a.prototype,"source",void 0),i([d(cc.Label)],a.prototype,"clickBtnTxt",void 0),i([d(cc.Sprite)],a.prototype,"picUri",void 0),i([d(cc.Node)],a.prototype,"bg",void 0),i([u],a)}(cc.Component);t.pzaNativeInterAd=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaChannel":"pzaChannel"}],pzaNewBeltView:[function(e,a,t){"use strict";cc._RF.push(a,"06f69n5OFhKFLqPPcfBnWm8","pzaNewBeltView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNewBeltView=void 0;var r=e("../../Common/pzaBeltEquipConfig"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaSpriteFrameManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_beltName=null,a.lab_beltDesc=null,a.img_belt=null,a.node_close=null,a}return n(a,e),a.prototype.onEnable=function(){this.node_close.on(cc.Node.EventType.TOUCH_END,this.close,this)},a.prototype.bindData=function(e,a){this.call=a;var t=r.pzaBeltEquipConfig.getConfig().get(e);this.lab_beltName.string=t.name,this.lab_beltDesc.string=t.desc,l.pzaSpriteFrameManager.loadBeltCard("beltbig_"+e,this.img_belt)},a.prototype.onDisable=function(){this.node_close.off(cc.Node.EventType.TOUCH_END,this.close,this)},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u8170\u5e26\u540d\u79f0",type:cc.Label})],a.prototype,"lab_beltName",void 0),i([u({displayName:"\u8170\u5e26\u63cf\u8ff0",type:cc.Label})],a.prototype,"lab_beltDesc",void 0),i([u({displayName:"\u8170\u5e26\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_belt",void 0),i([u({displayName:"\u5173\u95ed\u8282\u70b9",type:cc.Node})],a.prototype,"node_close",void 0),i([c],a)}(cc.Component);t.pzaNewBeltView=d,cc._RF.pop()},{"../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaNewPlantView:[function(e,a,t){"use strict";cc._RF.push(a,"f9afcKJigNB0qIcbc5rtBY4","pzaNewPlantView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNewPlantView=void 0;var p=e("../../Battle/Data/pzaDropType"),l=e("../../Battle/Data/pzaPlantEnum"),s=e("../../Battle/Plant/pzaBasePlant"),c=e("../../Battle/pzaGameState"),u=e("../../Common/pzaBeltEquipConfig"),d=e("../../Common/pzaGameCommonPool"),h=e("../../Common/pzaGameConfig"),m=e("../../Common/pzaGameManager"),f=e("../../Common/pzaLocalData"),z=e("../../Common/pzaOperationMgr"),y=e("../../Common/pzaSoundManager"),g=e("../../Common/pzaSpineController"),v=e("../../Common/pzaSpriteFrameManager"),b=e("../../Common/pzaStatisticsMgr"),P=e("../../Common/pzaUIManager"),C=e("../../Common/pzaUtil"),E=e("../../Common/pzaWorldEventManager"),S=e("../../Load/pzaBundleObjectPool"),_=e("../../Load/pzaPreLoadManager"),D=e("../../utils/pzaChannel"),M=e("../pzaCommonMask"),w=e("../pzaHandbookView"),T=cc._decorator,A=T.ccclass,B=T.property,G=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.newPlantView=null,a.newItemView=null,a.light=null,a.plantName=null,a.bgSprite=null,a.tagLayout=null,a.tag=null,a.plantCG=null,a.bgSPF=[],a.plantAniParent=null,a.shadow=null,a.professParent=null,a.plantDesc=null,a.shovel=null,a.handbookNode=null,a.baconic=null,a.taco=null,a.sprinkler=null,a.trophy=null,a.beltEquip=null,a.leftActNode=[],a.rightActNode=[],a.itemName=null,a.desc=null,a.btnTxt=null,a.node_continue=null,a.node_nextpart=null,a.cardFrame=null,a.cardItem=null,a.shareBtn=null,a.showAudio=null,a.typeofItem=[l.pzaPlantEnum.POTATO_MINE,l.pzaPlantEnum.SPIKEROCK,l.pzaPlantEnum.PLANTERN,l.pzaPlantEnum.PUMPKIN,l.pzaPlantEnum.FLOWER_POT,l.pzaPlantEnum.COFFEE_BEAN,l.pzaPlantEnum.UMBRELLA_LEAF,l.pzaPlantEnum.SPIKEWEED,l.pzaPlantEnum.LILY_PAD],a.rewardBubble=null,a.dropType=null,a.inGameGet=!0,a.playAudioCD=!1,a}return n(a,e),a.prototype.onEnable=function(){c.pzaGameState.shareAble=!1},a.prototype.showView=function(e,a,t){var o,n,i,s,c=this;if(void 0===t&&(t=!0),this.showPlantType=a,this.posFix(),this.newPlantView.active=!1,this.newItemView.active=!0,this.inGameGet=t,y.pzaSoundManager.playBgm(y.pzaBGMName.NEWPLANT_BGM),this.rewardBubble=null,z.pzaOperationMgr.showShareBubble(this.shareBtn,function(e){e?c.rewardBubble=e:c.node.getChildByName("btn_next_part").x=0}),this.dropType=e,this.shovel.active=e==p.pzaDropType.SHOVEL,this.handbookNode.active=e==p.pzaDropType.HAND_BOOK,this.baconic.active=e==p.pzaDropType.BACONIC,this.taco.active=e==p.pzaDropType.TACO,this.sprinkler.active=e==p.pzaDropType.SPRINKLER,this.trophy.active=e>=p.pzaDropType.SURVIVAL_TROPHY,this.beltEquip.active=e==p.pzaDropType.BELT_EQUIP,this.node_continue.x=0,this.node_nextpart.active=!1,this.light.runAction(cc.repeatForever(cc.rotateBy(4,360)).clone()),e==p.pzaDropType.SHOVEL)return this.itemName.string="\u7a7a\u767d\u9a91\u58eb\u5361",this.desc.string="\u8ba9\u4f60\u8f6c\u79fb\u9a91\u58eb\u4ee5\u4fbf\u7ed9\u5176\u4ed6\u9a91\u58eb\u817e\u51fa\u7a7a\u95f4",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.HAND_BOOK)return this.node_continue.x=-180,this.node_nextpart.x=180,this.node_nextpart.active=!0,this.itemName.string="\u5047\u9762\u9a91\u58eb\u56fe\u9274",this.desc.string="\u8bb0\u8f7d\u4f60\u83b7\u5f97\u7684\u9a91\u58eb\u5361\u7247\u548c\u9047\u5230\u7684\u602a\u4eba\u8d44\u6599",void(this.btnTxt.string="\u67e5\u770b\u56fe\u9274");if(e==p.pzaDropType.BACONIC)return this.itemName.string="\u7834\u635f\u7684\u91ce\u72fc\u7a81\u51fb\u79d8\u94a5",this.desc.string="\u8fd9\u4e2a\u6709\u4ec0\u4e48\u4f5c\u7528?",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.TACO)return this.itemName.string="\u7a81\u51fb\u91ce\u72fc\u5bc6\u94a5",this.desc.string="\u83b7\u53d6\u540e\u7528\u6765\u5347\u7ea7\u5546\u5e97\u6a21\u5757\u5427\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.BELT_EQUIP)return this.itemName.string="\u7535\u738b\u8170\u5e26\xb7\u5723\u5251",this.desc.string="\u606d\u559c\u60a8\u627e\u5230\u4e86\u7535\u738b\u8170\u5e26\xb7\u5723\u5251\uff0c\u6765\u8ba9\u6211\u4eec\u4e00\u8d77\u53bb\u9a91\u58eb\u6bbf\u5802\u770b\u770b\u5427\uff01",this.btnTxt.string="\u7ee7\u7eed",this.trophy.active=!1,void u.pzaBeltEquipConfig.getBeltEquip(u.pzaBeltEquipEnum.DianWang,!1,!1);if(e==p.pzaDropType.SPRINKLER)return this.itemName.string="\u6536\u85cf\u5ba4\u94a5\u5319",this.desc.string="\u606d\u559c\u60a8\u627e\u5230\u4e86\u6536\u85cf\u5ba4\u94a5\u5319\uff0c\u6765\u8ba9\u6211\u4eec\u4e00\u8d77\u53bb\u6536\u85cf\u5ba4\u770b\u770b\u5427\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.SURVIVAL_TROPHY)return this.itemName.string="\u5956\u676f",f.pzaLocalData.data.survivalPassChapter>=5?this.desc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.desc.string="\u4f60\u89e3\u9501\u4e86\u65b0\u7684\u751f\u5b58\u6a21\u5f0f",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.ZOMBIE_TROPHY)return this.itemName.string="\u5956\u676f",f.pzaLocalData.getZombieTrophy()>=9?this.desc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.desc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.VASE_TROPHY)return this.itemName.string="\u5956\u676f",f.pzaLocalData.getVaseTrophy()>=f.pzaLocalData.vaseAllTrophy?this.desc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.desc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(e==p.pzaDropType.MINIGAME_TROPHY)return this.itemName.string="\u5956\u676f",f.pzaLocalData.getMiniGameTrophy()>=14?this.desc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.desc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(e!=p.pzaDropType.DROP_KEY){this.plantDesc.node.active=!0;var d=h.pzaGameConfig.getPlantConfig(a);if(null!=d){this.plantName.string=d.name,this.setProfessIcon(d.profession),this.createTags(d.tagArray);var m=h.pzaGameConfig.PlantBookMap.get(a).desc;this.plantDesc.string=m,this.showAudio.node.active=d.isPlayShowAudio,!0===d.isPlayShowAudio&&this.clickPlayShowAudio()}else this.plantDesc.node.active=!1;this.light.stopAllActions(),this.newPlantView.active=!0,this.newItemView.active=!1;var g=C.pzaUtil.getRandomNum(0,this.bgSPF.length-1);this.bgSprite.spriteFrame=this.bgSPF[g];try{for(var b=r(this.rightActNode),P=b.next();!P.done;P=b.next())P.value.opacity=0}catch(D){o={error:D}}finally{try{P&&!P.done&&(n=b.return)&&n.call(b)}finally{if(o)throw o.error}}try{for(var E=r(this.leftActNode),S=E.next();!S.done;S=E.next())S.value.opacity=0}catch(w){i={error:w}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}M.pzaCommonMask.showMask(!0,!1);var _=this.plantCG;this.cardFrame.node.active=!1,_.node.x=300,_.node.y=-360,_.node.scale=.9,this.typeofItem.indexOf(a)>=0&&(_=this.cardItem,this.cardFrame.node.active=!0,_.node.x=4,_.node.y=37,_.node.scale=.7),a==l.pzaPlantEnum.CATTAIL?_.node.x=260:a==l.pzaPlantEnum.BLOVER?(_.node.x=200,_.node.y=-270):a==l.pzaPlantEnum.MAGNET_SHROOM&&(_.node.x=190,_.node.scale=1),v.pzaSpriteFrameManager.loadPlantCG(a,_,function(){var e,t,o,n;try{for(var i=r(c.rightActNode),p=i.next();!p.done;p=i.next())p.value.opacity=255}catch(d){e={error:d}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}try{for(var s=r(c.leftActNode),u=s.next();!u.done;u=s.next())u.value.opacity=255}catch(h){o={error:h}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}M.pzaCommonMask.hideMask(),c.showAni(),c.node.on(cc.Node.EventType.TOUCH_END,function(){c.clickNext()}),a==l.pzaPlantEnum.FLOWER_POT?(c.cardItem.node.x=10,c.cardItem.node.scale=.5):a==l.pzaPlantEnum.COFFEE_BEAN&&(c.cardItem.node.scale=.5)}),this.createPlant(a)}else this.itemName.string="\u5468\u5e74\u793c\u5305"},a.prototype.posFix=function(){this.professParent.x=cc.winSize.width/2-136},a.prototype.setProfessIcon=function(e){var a,t;try{for(var o=r(this.professParent.children),n=o.next();!n.done;n=o.next())n.value.active=!1}catch(i){a={error:i}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}e&&(this.professParent.children[e-1].active=!0)},a.prototype.createPlant=function(e){var a=this,t=_.pzaPreLoadManager.getPlantUrl(e);S.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(t,o){if(null==t&&null!=o){o.setParent(a.plantAniParent),o.zIndex=0,o.setPosition(cc.v2()),e==l.pzaPlantEnum.FLOWER_POT&&(o.y+=35);var n=o.getComponent(s.pzaBasePlant);null!=n&&(n.uiShow(),n.needShadow&&(a.shadow.active=!0,a.shadow.setPosition(cc.v2(n.shadowOffset.x,n.shadowOffset.y)),a.shadow.setScale(n.shadowScale)))}else console.error(t)})},a.prototype.createTags=function(e){var a,t;try{for(var o=r(e),n=o.next();!n.done;n=o.next()){var i=n.value,p=cc.instantiate(this.tag);p.parent=this.tagLayout,p.getChildByName("str").getComponent(cc.Label).string=i}}catch(l){a={error:l}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}},a.prototype.clickNext=function(){this.close(),0!=this.inGameGet&&(this.dropType==p.pzaDropType.HAND_BOOK?(m.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),P.pzaUIManager.baseShowPopUI(_.pzaResourceUrl.HANDBOOK_VIEW,function(e){var a=e&&e.getComponent(w.pzaHandbookView);a&&a.jdInit(),a&&a.bindCloseCall(function(){m.pzaGameManager.getCurrentGame().partWin()})})):m.pzaGameManager.getCurrentGame().partWin())},a.prototype.clickNextPart=function(){this.close(),m.pzaGameManager.getCurrentGame().partWin()},a.prototype.showAni=function(){var e,a,t,o,n=0;try{for(var i=r(this.leftActNode),p=i.next();!p.done;p=i.next()){var l=(d=p.value).position,s=cc.v2(l.x-2e3,l.y);"spineView"==d.name&&(s=cc.v2(l.x,l.y-1e3)),this.moveAct(d,s,cc.v2(l),.2*n),n++}}catch(h){e={error:h}}finally{try{p&&!p.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}n=0;try{for(var c=r(this.rightActNode),u=c.next();!u.done;u=c.next()){var d;l=(d=u.value).position,s=cc.v2(l.x+2e3,l.y),this.moveAct2(d,s,cc.v2(l),.2*n),n++}}catch(m){t={error:m}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}},a.prototype.moveAct=function(e,a,t,o){e.setPosition(a);var n=cc.moveTo(.5+o,t).easing(cc.easeInOut(3));e.runAction(n.clone())},a.prototype.moveAct2=function(e,a,t,o){e.setPosition(a);var n=cc.moveTo(.7+o,t).easing(cc.easeInOut(3));e.runAction(n.clone())},a.prototype.clickShare=function(){var e=this;D.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("newPlantView share sucess"),e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null,b.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:6},{name:"ShareR",value:1})},function(){b.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:6},{name:"ShareR",value:0})})},a.prototype.clickPlayShowAudio=function(){var e=this;if(!this.playAudioCD){this.playAudioCD=!0;var a="show_"+this.showPlantType;y.pzaSoundManager.getAudioByName(a,function(a){e.cdTimer=setTimeout(function(){e.playAudioCD=!1,e.showAudio.playAnimation("jingyin",!1)},1e3*a.duration)}),y.pzaSoundManager.playAudio(a),this.showAudio.playAnimation("bofang",!0)}},a.prototype.close=function(){this.cdTimer&&clearTimeout(this.cdTimer),d.pzaGameCommonPool.returnInstant(this.node)},i([B(cc.Node)],a.prototype,"newPlantView",void 0),i([B(cc.Node)],a.prototype,"newItemView",void 0),i([B(cc.Node)],a.prototype,"light",void 0),i([B({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],a.prototype,"plantName",void 0),i([B(cc.Sprite)],a.prototype,"bgSprite",void 0),i([B(cc.Node)],a.prototype,"tagLayout",void 0),i([B(cc.Node)],a.prototype,"tag",void 0),i([B(cc.Sprite)],a.prototype,"plantCG",void 0),i([B([cc.SpriteFrame])],a.prototype,"bgSPF",void 0),i([B(cc.Node)],a.prototype,"plantAniParent",void 0),i([B(cc.Node)],a.prototype,"shadow",void 0),i([B(cc.Node)],a.prototype,"professParent",void 0),i([B(cc.Label)],a.prototype,"plantDesc",void 0),i([B({displayName:"\u94f2\u5b50",type:cc.Node})],a.prototype,"shovel",void 0),i([B({displayName:"\u56fe\u9274",type:cc.Node})],a.prototype,"handbookNode",void 0),i([B({displayName:"\u57f9\u6839",type:cc.Node})],a.prototype,"baconic",void 0),i([B({displayName:"\u7389\u7c73\u5377",type:cc.Node})],a.prototype,"taco",void 0),i([B({displayName:"\u6c34\u58f6",type:cc.Node})],a.prototype,"sprinkler",void 0),i([B({displayName:"\u5956\u676f",type:cc.Node})],a.prototype,"trophy",void 0),i([B({type:cc.Node})],a.prototype,"beltEquip",void 0),i([B([cc.Node])],a.prototype,"leftActNode",void 0),i([B([cc.Node])],a.prototype,"rightActNode",void 0),i([B(cc.Label)],a.prototype,"itemName",void 0),i([B(cc.Label)],a.prototype,"desc",void 0),i([B(cc.Label)],a.prototype,"btnTxt",void 0),i([B({displayName:"\u7ee7\u7eed\u6309\u94ae",type:cc.Node})],a.prototype,"node_continue",void 0),i([B({displayName:"\u4e0b\u4e00\u5173\u6309\u94ae",type:cc.Node})],a.prototype,"node_nextpart",void 0),i([B(cc.Sprite)],a.prototype,"cardFrame",void 0),i([B(cc.Sprite)],a.prototype,"cardItem",void 0),i([B(cc.Node)],a.prototype,"shareBtn",void 0),i([B(g.pzaSpineController)],a.prototype,"showAudio",void 0),i([A],a)}(cc.Component);t.pzaNewPlantView=G,cc._RF.pop()},{"../../Battle/Data/pzaDropType":"pzaDropType","../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/Plant/pzaBasePlant":"pzaBasePlant","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaCommonMask":"pzaCommonMask","../pzaHandbookView":"pzaHandbookView"}],pzaNewPlayTaskConf:[function(e,a,t){"use strict";cc._RF.push(a,"3e1e04fY9dOTZAcoxbRXdnF","pzaNewPlayTaskConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNewPlayTaskConf=void 0;var o=e("../Common/pzaGamePropConfig");t.pzaNewPlayTaskConf=function(e){this.id=0,this.taskname="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.tasktype="",this.condStr="",this.taskname=e.taskname||"";var a=e.reward.split("_");this.rewardType=parseInt(a[0]),this.rewardCount=parseInt(a[1]),this.tasktype=e.tasktype,this.condStr=e.condStr},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaNewPlayTaskMgr:[function(e,a,t){"use strict";cc._RF.push(a,"d2f8eeOT6FGoquY2i/4ExiH","pzaNewPlayTaskMgr");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../Common/pzaLocalData"),i=e("./pzaNewPlayerStepConf"),r=e("./pzaNewPlayTaskConf"),p=cc._decorator,l=p.ccclass,s=(p.property,function(){function e(){this.newPlayerTaskMap=new Map,this.allNewPlayerTaskArr=[],this.stepRewardMap=new Map}var a;return a=e,e.instance=function(){return a._me||(a._me=new a),a._me},e.prototype.initNewPlayerTask=function(e){if(!n.pzaLocalData.disablePostFn){for(var a=0;a<e.length;a++){var t=e[a].iD.split("_"),o=new r.pzaNewPlayTaskConf(e[a]);o.id=parseInt(t[1]),this.allNewPlayerTaskArr[t[0]]||(this.allNewPlayerTaskArr[t[0]]=[]),this.allNewPlayerTaskArr[t[0]].push(o)}for(a=0;a<this.allNewPlayerTaskArr.length;a++){var i=this.allNewPlayerTaskArr[a];i&&this.newPlayerTaskMap.set(a,i)}}},e.prototype.initStepRewardTask=function(e){if(!n.pzaLocalData.disablePostFn)for(var a=0;a<e.length;a++){var t=new i.pzaNewPlayerStepConf(e[a]);this.stepRewardMap.set(t.id,t)}},e.prototype.checkNewPlayerStepTask=function(e,a){if(!n.pzaLocalData.disablePostFn&&n.pzaLocalData.data.stepStates){var t=n.pzaLocalData.data.stepStates[e-1];if(2==t[a+""])return;var o=this.newPlayerTaskMap.get(e)[a],i=o.tasktype;if("normal"==i){var r=[function(){return n.pzaLocalData.data.curChapter>1},function(){return n.pzaLocalData.data.curChapter>2},function(){return n.pzaLocalData.data.curChapter>3},function(){return n.pzaLocalData.data.curChapter>4},function(){return n.pzaLocalData.data.passLastPart}];e>=1&&e<=r.length&&r[e-1]()&&(t[a+""]=1)}else"endless"==i?n.pzaLocalData.data.passEndlessCnt>=parseInt(o.condStr)&&(t[a+""]=1):"login"==i?n.pzaLocalData.data.newPlayerLoginCnt>=parseInt(o.condStr)&&(t[a+""]=1):"gold"==i?n.pzaLocalData.data.newPlayerGetGoldCnt>=parseInt(o.condStr)&&(t[a+""]=1):"prop"==i?n.pzaLocalData.data.newPlayerUsePropCnt>=parseInt(o.condStr)&&(t[a+""]=1):"ad"==i?n.pzaLocalData.data.newPlayerWatchAdCnt>=parseInt(o.condStr)&&(t[a+""]=1):"ad"==i?n.pzaLocalData.data.newPlayerWatchAdCnt>=parseInt(o.condStr)&&(t[a+""]=1):"slot7"==i?n.pzaLocalData.data.plantSlotCount>=7&&(t[a+""]=1):"slot8"==i?n.pzaLocalData.data.plantSlotCount>=8&&(t[a+""]=1):"costCoin"==i&&n.pzaLocalData.data.costCoinCount>=parseInt(o.condStr)&&(t[a+""]=1);n.pzaLocalData.addDirty("stepStates")}},e._me=null,a=o([l],e)}());t.default=s,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaNewPlayTaskConf":"pzaNewPlayTaskConf","./pzaNewPlayerStepConf":"pzaNewPlayerStepConf"}],pzaNewPlayerStepConf:[function(e,a,t){"use strict";cc._RF.push(a,"6e06eDIY7NI3qVIP6K981i/","pzaNewPlayerStepConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNewPlayerStepConf=void 0;var o=e("../Common/pzaGamePropConfig");t.pzaNewPlayerStepConf=function(e){this.id=0,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.icon="",this.id=e.id;var a=e.reward.split("_");this.rewardType=parseInt(a[0]),this.rewardCount=parseInt(a[1]),this.icon=e.icon},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaNewPlayerTaskItem:[function(e,a,t){"use strict";cc._RF.push(a,"8dcf1r70nNEG5jMRMsMYnpk","pzaNewPlayerTaskItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGamePropConfig"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaStatisticsMgr"),c=e("../Common/pzaUIManager"),u=e("../Load/pzaPreLoadManager"),d=e("../Shop/pzaShopConfig"),h=e("../utils/pzaChannel"),m=e("../View/pzaBuyConfirmView"),f=e("../View/pzaPropNameTip"),z=e("../View/pzaShopView"),y=e("../View/pzaWarningView"),g=e("./pzaNewPlayTaskMgr"),v=cc._decorator,b=v.ccclass,P=v.property,C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_taskName=null,a.lab_taskPro=null,a.ani_prop=null,a.spris_prop=[],a.img_reward=null,a.lab_rewardCnt=null,a.node_task=null,a.lab_btn=null,a.sprites_arr=[],a.sprites_btns=[],a.btn_propIcon=null,a.idx=0,a.newPlayerTaskCfg=null,a.btnState=0,a.step=0,a.rewardType=0,a.rewardCount=0,a.newPlayerTaskView=null,a.propName="",a}return n(a,e),a.prototype.onEnable=function(){this.node_task.on(cc.Node.EventType.TOUCH_END,this.clickBtn,this),this.btn_propIcon.on(cc.Node.EventType.TOUCH_END,this.clickPropItem,this)},a.prototype.bindData=function(e,a,t,o,n){g.default.instance().checkNewPlayerStepTask(a,t),this.call=n,this.newPlayerTaskView=e,this.ani_prop.node.active=!1,this.img_reward.node.active=!1,this.step=a,this.btnState=0,this.idx=t,this.newPlayerTaskCfg=o,this.lab_taskName.string=this.newPlayerTaskCfg.taskname,this.lab_rewardCnt.string="X"+this.newPlayerTaskCfg.rewardCount,this.refreshBtnState(),"normal"==this.newPlayerTaskCfg.tasktype?this.lab_taskPro.node.active=!1:(this.lab_taskPro.node.active=!0,this.refreshTaskPro()),this.refreshItem(),this.rewardType=this.newPlayerTaskCfg.rewardType,this.rewardCount=this.newPlayerTaskCfg.rewardCount;var i=r.pzaGamePropConfig.PorpConfigMap.get(this.rewardType);this.propName=i.propName},a.prototype.refreshItem=function(){var e=this.newPlayerTaskCfg;switch(e.rewardType){case r.pzaGamePropEnum.PROP_COIN:this.img_reward.node.active=!0,this.img_reward.spriteFrame=this.sprites_arr[0];break;case r.pzaGamePropEnum.PROP_POWER:this.img_reward.node.active=!0,this.img_reward.spriteFrame=this.sprites_arr[1];break;case r.pzaGamePropEnum.RANDOM_GIFT:this.img_reward.node.active=!0,this.img_reward.spriteFrame=this.sprites_arr[2];break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_FREE_SUN:case r.pzaGamePropEnum.PROP_AUTO_PICK:this.ani_prop.node.active=!0,e.rewardType==r.pzaGamePropEnum.PROP_CHERRY_BOMB?this.ani_prop.spriteFrame=this.spris_prop[0]:e.rewardType==r.pzaGamePropEnum.PROP_AUTO_PICK?this.ani_prop.spriteFrame=this.spris_prop[2]:e.rewardType==r.pzaGamePropEnum.PROP_FREE_SUN&&(this.ani_prop.spriteFrame=this.spris_prop[1])}},a.prototype.refreshBtnState=function(){this.node_task.active=!0;var e=p.pzaLocalData.data.stepStates[this.step-1];e[this.idx+""]?1==e[this.idx+""]?(this.btnState=1,this.lab_btn.string="\u9886\u53d6",this.node_task.getComponent(cc.Sprite).spriteFrame=this.sprites_btns[1]):2==e[this.idx+""]&&(this.btnState=2,this.lab_btn.string="\u5df2\u9886\u53d6",this.node_task.getComponent(cc.Sprite).spriteFrame=this.sprites_btns[2]):(this.btnState=0,this.lab_btn.string="\u524d\u5f80",this.node_task.getComponent(cc.Sprite).spriteFrame=this.sprites_btns[0],this.node_task.active="login"!=this.newPlayerTaskCfg.tasktype)},a.prototype.refreshTaskPro=function(){if("login"==this.newPlayerTaskCfg.tasktype)this.lab_taskPro.string=p.pzaLocalData.data.newPlayerLoginCnt+"/"+this.newPlayerTaskCfg.condStr;else if("gold"==this.newPlayerTaskCfg.tasktype)this.lab_taskPro.string=p.pzaLocalData.data.newPlayerGetGoldCnt+"/"+this.newPlayerTaskCfg.condStr;else if("prop"==this.newPlayerTaskCfg.tasktype)this.lab_taskPro.string=p.pzaLocalData.data.newPlayerUsePropCnt+"/"+this.newPlayerTaskCfg.condStr;else if("ad"==this.newPlayerTaskCfg.tasktype)this.lab_taskPro.string=p.pzaLocalData.data.newPlayerWatchAdCnt+"/"+this.newPlayerTaskCfg.condStr;else if("endless"==this.newPlayerTaskCfg.tasktype)this.lab_taskPro.string=p.pzaLocalData.data.passEndlessCnt+"/"+this.newPlayerTaskCfg.condStr;else if("slot7"==this.newPlayerTaskCfg.tasktype){var e=p.pzaLocalData.data.plantSlotCount>=7?1:0;this.lab_taskPro.string=e+"/"+this.newPlayerTaskCfg.condStr}else"slot8"==this.newPlayerTaskCfg.tasktype?(e=p.pzaLocalData.data.plantSlotCount>=8?1:0,this.lab_taskPro.string=e+"/"+this.newPlayerTaskCfg.condStr):"costCoin"==this.newPlayerTaskCfg.tasktype&&(this.lab_taskPro.string=p.pzaLocalData.data.costCoinCount+"/"+this.newPlayerTaskCfg.condStr)},a.prototype.clickBtn=function(){var e=this;if(1==this.btnState){l.pzaSoundManager.playSFX();var a=this.newPlayerTaskCfg.rewardType,t=this.newPlayerTaskCfg.rewardCount;p.pzaLocalData.data.stepStates[this.step-1][this.idx+""]=2,p.pzaLocalData.addDirty("stepStates"),this.refreshBtnState(),this.call&&this.call(a,t),s.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:1})}else if(0==this.btnState)if("ad"==this.newPlayerTaskCfg.tasktype)h.pzaChannel.instance().showVideo({sucCall:function(){g.default.instance().checkNewPlayerStepTask(e.step,e.idx),e.refreshBtnState(),e.refreshTaskPro()},failCall:function(){},endCall:function(){},posName:"\u70b9\u51fb\u524d\u5f80\u76f4\u63a5\u770b\u5e7f\u544a"});else if("gold"==this.newPlayerTaskCfg.tasktype)c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(m.pzaBuyConfirmView);t&&t.bindData(d.pzaShopItemType.DAVE_COIN,null,null),t&&t.setCloseCall(function(){g.default.instance().checkNewPlayerStepTask(e.step,e.idx),e.refreshBtnState(),e.refreshTaskPro()})});else if("normal"==this.newPlayerTaskCfg.tasktype)this.newPlayerTaskView.judgeToNormal();else if("endless"==this.newPlayerTaskCfg.tasktype)this.newPlayerTaskView.judgeToEndless();else if("prop"==this.newPlayerTaskCfg.tasktype)p.pzaLocalData.data.passLastPart?this.newPlayerTaskView.judgeToEndless():this.newPlayerTaskView.judgeToNormal();else if("slot7"==this.newPlayerTaskCfg.tasktype)c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(m.pzaBuyConfirmView);t&&t.bindData(d.pzaShopItemType.CARD_SLOT_7,null,null),t&&t.setCloseCall(function(){g.default.instance().checkNewPlayerStepTask(e.step,e.idx),e.refreshBtnState(),e.refreshTaskPro()})});else if("slot8"==this.newPlayerTaskCfg.tasktype)c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(m.pzaBuyConfirmView);t&&t.bindData(d.pzaShopItemType.CARD_SLOT_8,null,null),t&&t.setCloseCall(function(){g.default.instance().checkNewPlayerStepTask(e.step,e.idx),e.refreshBtnState(),e.refreshTaskPro()})});else if("costCoin"==this.newPlayerTaskCfg.tasktype){if(p.pzaLocalData.data.curChapter<2||2==p.pzaLocalData.data.curChapter&&p.pzaLocalData.data.curPart<=4)return void c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(y.pzaWarningView);a&&a.show("\u5192\u9669\u6a21\u5f0f\u901a\u51732-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501")});c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.SHOP_VIEW,function(e){var a=e&&e.getComponent(z.pzaShopView);a&&a.bindCloseCall(!0,null);var t=a&&a.getfirstPage();a&&a.showShopItem(t)})}},a.prototype.clickAllReward=function(){p.pzaLocalData.data.stepStates[this.step-1][this.idx+""]=2,p.pzaLocalData.addDirty("stepStates"),this.refreshBtnState()},a.prototype.clickPropItem=function(){var e=this.btn_propIcon.convertToWorldSpaceAR(cc.v2(0,0));f.pzaPropNameTip.showTip(e,this.rewardType,this.btn_propIcon.height,.8)},a.prototype.onDisable=function(){this.node_task.off(cc.Node.EventType.TOUCH_END,this.clickBtn,this),this.btn_propIcon.off(cc.Node.EventType.TOUCH_END,this.clickPropItem,this),f.pzaPropNameTip.hideTip()},i([P({displayName:"\u65b0\u624b\u4efb\u52a1\u540d\u79f0",type:cc.Label})],a.prototype,"lab_taskName",void 0),i([P({displayName:"\u4efb\u52a1\u8fdb\u5ea6Lab",type:cc.Label})],a.prototype,"lab_taskPro",void 0),i([P({displayName:"\u9053\u5177\u52a8\u753b\u56fe\u7247",type:cc.Sprite})],a.prototype,"ani_prop",void 0),i([P({displayName:"\u9053\u5177\u52a8\u753b\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"spris_prop",void 0),i([P({displayName:"\u5956\u52b1\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_reward",void 0),i([P({displayName:"\u5956\u52b1\u6570\u91cf",type:cc.Label})],a.prototype,"lab_rewardCnt",void 0),i([P({displayName:"\u4efb\u52a1\u6309\u94ae\u8282\u70b9",type:cc.Node})],a.prototype,"node_task",void 0),i([P({displayName:"\u6309\u94ae\u540d\u79f0",type:cc.Label})],a.prototype,"lab_btn",void 0),i([P({displayName:"\u56fe\u7247\u7cbe\u7075",type:[cc.SpriteFrame]})],a.prototype,"sprites_arr",void 0),i([P({displayName:"\u6309\u94ae\u56fe\u7247\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"sprites_btns",void 0),i([P({displayName:"\u9053\u5177\u56fe\u6807\u6309\u94ae",type:cc.Node})],a.prototype,"btn_propIcon",void 0),i([b],a)}(cc.Component);t.default=C,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/pzaBuyConfirmView":"pzaBuyConfirmView","../View/pzaPropNameTip":"pzaPropNameTip","../View/pzaShopView":"pzaShopView","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","./pzaNewPlayTaskMgr":"pzaNewPlayTaskMgr"}],pzaNewPlayerTaskView:[function(e,a,t){"use strict";cc._RF.push(a,"a9f85VRyClNnYosLU/TaBrV","pzaNewPlayerTaskView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Battle/Data/pzaDropType"),l=e("../Battle/Data/pzaPlantEnum"),s=e("../Common/pzaCommonPopView"),c=e("../Common/pzaGameCommonPool"),u=e("../Common/pzaGameConfig"),d=e("../Common/pzaGamePropConfig"),h=e("../Common/pzaLocalData"),m=e("../Common/pzaRewardManager"),f=e("../Common/pzaSoundManager"),z=e("../Common/pzaSpriteFrameManager"),y=e("../Common/pzaStatisticsMgr"),g=e("../Common/pzaUIManager"),v=e("../Common/pzaWorldEventManager"),b=e("../Load/pzaPreLoadManager"),P=e("../utils/pzaChannel"),C=e("../utils/pzakc"),E=e("../View/Battle/pzaNewPlantView"),S=e("../View/pzaPreOpenView"),_=e("../View/pzaPropNameTip"),D=e("./pzaNewPlayerTaskItem"),M=e("./pzaNewPlayTaskMgr"),w=cc._decorator,T=w.ccclass,A=w.property,B=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.btn_stepArr=[],a.node_lockArr=[],a.node_stepSelect=null,a.node_getAll=null,a.content_task=null,a.lab_step=null,a.lab_stepRewardName=null,a.img_stepPlantReward=null,a.img_stepReward=null,a.spris_stepBtns=[],a.lab_stepBtn=null,a.lab_stepRewardCnt=null,a.sprs_stepReward=[],a.node_trial=null,a.node_proMask=null,a.pre_item=null,a.node_close=null,a.nodes_redTip=[],a.node_redGetAll=null,a.title_txt=[],a.allItems=[],a.step=0,a.rightBtnState=0,a.allRewards=[],a.checkTimes=3,a.maskWidthArr=[35,115,200,285,370,455,545],a}return n(a,e),a.prototype.onEnable=function(){var a=this;e.prototype.onEnable.call(this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.UPDATE_VIEW,this.updateView,this),this.nodes_redTip.forEach(function(e){e.active=!1}),this.checkTimes=.1,0==h.pzaLocalData.data.newPlayerLoginCnt&&(h.pzaLocalData.data.newPlayerLoginCnt=1,h.pzaLocalData.addDirty("newPlayerLoginCnt")),this.node_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.node_getAll.on(cc.Node.EventType.TOUCH_END,this.clickGetAll,this);for(var t=function(e){e<h.pzaLocalData.data.newPlayerStep&&o.btn_stepArr[e].on(cc.Node.EventType.TOUCH_END,function(){var t,o;f.pzaSoundManager.playSFX();try{for(var n=(t=void 0,r(a.title_txt)),i=n.next();!i.done;i=n.next())i.value.color=cc.color(86,143,183)}catch(p){t={error:p}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}a.title_txt[e].color=cc.color(179,84,0),a.clickStep(e+1)},o)},o=this,n=0;n<this.btn_stepArr.length;n++)t(n);for(this.refreshStepBtns(),this.clickStep(1),this.refreshTaskPro(),cc.Tween.stopAllByTarget(this.node_redGetAll),C.default.ani_JitterNode(this.node_redGetAll,.4,15,3,!0),n=0;n<this.nodes_redTip.length;n++)cc.tween(this.nodes_redTip[n]).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start();this.checkRedShow(),y.pzaStatisticsMgr.sendEvent("System",{name:"system",value:5})},a.prototype.updateView=function(e){e&&"newPlayerTask"==e&&this.clickStep(this.step)},a.prototype.refreshStepBtns=function(){for(var e=0;e<this.node_lockArr.length;e++)e<h.pzaLocalData.data.newPlayerStep?this.node_lockArr[e].active=!1:this.node_lockArr[e].active=!0},a.prototype.onDisable=function(){var e=this;this.node_getAll.off(cc.Node.EventType.TOUCH_END,this.clickGetAll,this);for(var a=function(a){a<h.pzaLocalData.data.newPlayerStep&&t.btn_stepArr[a].off(cc.Node.EventType.TOUCH_END,function(){e.clickStep(a+1)},t)},t=this,o=0;o<this.btn_stepArr.length;o++)a(o);this.node_close.off(cc.Node.EventType.TOUCH_END,this.close,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.UPDATE_VIEW,this.updateView,this)},a.prototype.clickStep=function(e){var a=this;_.pzaPropNameTip.hideTip(),this.step=e;var t=M.default.instance().newPlayerTaskMap.get(e);this.content_task.removeAllChildren(),this.allItems=[];for(var o=0;o<t.length;o++){var n=cc.instantiate(this.pre_item);n.parent=this.content_task,n.getComponent(D.default).bindData(this,this.step,o,t[o],function(e,t){a.getItemRewardCall(e,t)}),this.allItems.push(n.getComponent(D.default))}this.node_stepSelect.y=this.btn_stepArr[e-1].y,this.refreshRightMsg(),this.refreshRightBtn(),this.refreshGetAllBtn()},a.prototype.getItemRewardCall=function(e,a){if(this.allRewards=[],e==d.pzaGamePropEnum.RANDOM_GIFT)m.pzaRewardManager.checkRandomGift(a,this.allRewards);else{var t=new d.pzaRewardPropData(e,a);this.allRewards.push(t)}var o=h.pzaLocalData.data.stepStates[this.step-1],n=0;this.allItems.forEach(function(e){2==o[""+e.idx]&&(n+=1)}),4==n&&this.getRightStepRewards(),this.getFinalReward(),this.getRewards(),this.refreshStepRewardStates(),this.refreshGetAllBtn(),this.refreshTaskPro()},a.prototype.getRightStepRewards=function(){y.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:2}),h.pzaLocalData.data.stepRewardStates[this.step-1+""]=2,h.pzaLocalData.addDirty("stepRewardStates"),this.refreshRightBtn();var e=M.default.instance().stepRewardMap.get(this.step);if(e.rewardType==d.pzaGamePropEnum.RANDOM_GIFT)m.pzaRewardManager.checkRandomGift(e.rewardCount,this.allRewards);else{var a=new d.pzaRewardPropData(e.rewardType,e.rewardCount);1==this.step&&(a.limitGet=1),this.allRewards.push(a)}},a.prototype.refreshStepRewardStates=function(){this.refreshRightBtn()},a.prototype.refreshRightBtn=function(){var e=h.pzaLocalData.data.stepStates[this.step-1],a=0;this.allItems.forEach(function(t){2==e[""+t.idx]&&(a+=1)}),this.lab_stepBtn.active=4==a},a.prototype.refreshRightMsg=function(){this.node_trial.active=!1,this.lab_stepRewardCnt.node.active=!1,this.lab_step.string=""+this.step;var e=M.default.instance().stepRewardMap.get(this.step);switch(1==this.step?(this.img_stepPlantReward.node.active=!0,this.img_stepReward.node.active=!1,this.lab_stepRewardCnt.node.color=new cc.Color(255,255,255)):(this.img_stepPlantReward.node.active=!1,this.img_stepReward.node.active=!0,this.lab_stepRewardCnt.node.color=new cc.Color(254,244,82)),e.rewardType){case d.pzaGamePropEnum.PROP_PLANTE:this.node_trial.active=!0,this.lab_stepRewardName.string=""+u.pzaGameConfig.getPlantConfig(l.pzaPlantEnum.GABY).name,this.img_stepPlantReward.spriteFrame=this.sprs_stepReward[3],this.img_stepReward.spriteFrame=this.sprs_stepReward[3];break;default:var a=d.pzaGamePropConfig.PorpConfigMap.get(e.rewardType);this.lab_stepRewardName.string=a.propName,this.lab_stepRewardCnt.node.active=!0,this.lab_stepRewardCnt.string="X"+e.rewardCount,z.pzaSpriteFrameManager.loadCommonImg(e.icon,this.img_stepReward)}},a.prototype.refreshGetAllBtn=function(){this.node_getAll.active=!0;var e=h.pzaLocalData.data.stepStates[this.step-1],a=0,t=0;this.allItems.forEach(function(o){2==e[""+o.idx]&&(a+=1),1==e[""+o.idx]&&(t+=1)}),a>=4&&(this.node_getAll.active=!1),0==t&&(this.node_getAll.active=!1)},a.prototype.clickGetAll=function(){var e=this;this.allRewards=[];var a=h.pzaLocalData.data.stepStates[this.step-1];this.allItems.forEach(function(t){if(1==a[""+t.idx]){if(t.rewardType==d.pzaGamePropEnum.RANDOM_GIFT)m.pzaRewardManager.checkRandomGift(t.rewardCount,e.allRewards);else{var o=new d.pzaRewardPropData(t.rewardType,t.rewardCount);e.allRewards.push(o)}t.clickAllReward()}});var t=0;this.allItems.forEach(function(e){2==a[""+e.idx]&&(t+=1)}),4==t&&this.getRightStepRewards(),this.getFinalReward(),this.refreshStepRewardStates(),this.getRewards(),this.refreshGetAllBtn(),this.refreshTaskPro()},a.prototype.getFinalReward=function(){for(var e=0,a=0;a<7;a++)2==h.pzaLocalData.data.stepRewardStates[a+""]&&e++;if(e>=7){var t=new d.pzaRewardPropData(d.pzaGamePropEnum.PROP_PLANTE,52);this.allRewards.push(t),h.pzaLocalData.data.newPlayerTaskOver=!0,h.pzaLocalData.addDirty("newPlayerTaskOver"),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.NEWPLAYER_TASK_OVER,null)}},a.prototype.refreshTaskPro=function(){for(var e=0,a=0;a<7;a++)h.pzaLocalData.data.stepRewardStates[a+""]>=1&&(e+=1);e>0&&(this.node_proMask.width=this.maskWidthArr[e-1])},a.prototype.judgeToNormal=function(){g.pzaUIManager.aniShowPopUI(b.pzaResourceUrl.PART_SELECT_VIEW,null),this.close()},a.prototype.judgeToEndless=function(){var e=this,a=function(){g.pzaUIManager.aniShowPopUI(b.pzaResourceUrl.SURVIVAL_VIEW,null),e.close()};h.pzaLocalData.data.passLastPart?(h.pzaLocalData.data.preOpenSurvival&&(h.pzaLocalData.data.preOpenSurvival=!1,h.pzaLocalData.addDirty("preOpenSurvival")),a()):g.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.PRE_OPEN_VIEW,function(e){var t=e&&e.getComponent(S.pzaPreOpenView);t&&t.show(function(){P.pzaChannel.instance().showVideo({sucCall:function(){h.pzaLocalData.data.preOpenSurvival=!0,h.pzaLocalData.addDirty("preOpenSurvival"),a()},failCall:function(){},endCall:function(){},posName:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"16"})})})},a.prototype.getRewards=function(){if(this.allRewards.length>0){var e=null;this.allRewards.forEach(function(a){a.propType==d.pzaGamePropEnum.PROP_PLANTE&&(e=a.propCount)}),m.pzaRewardManager.recieveRewards(this.allRewards,function(){e&&g.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(E.pzaNewPlantView)).showView(p.pzaDropType.PLANT_CARD,e,!1)})})}},a.prototype.update=function(e){this.checkTimes>0&&(this.checkTimes-=e,this.checkTimes<=0&&(this.checkTimes=2,this.checkRedShow()))},a.prototype.checkRedShow=function(){for(var e=0;e<h.pzaLocalData.data.newPlayerStep;e++){for(var a=h.pzaLocalData.data.stepStates[e],t=0,o=0;o<4;o++)1==a[""+o]&&t++;this.nodes_redTip[e].active=t>0}},a.prototype.close=function(){_.pzaPropNameTip.hideTip(),c.pzaGameCommonPool.returnInstant(this.node)},i([A({displayName:"\u9636\u6bb5\u6309\u94ae",type:[cc.Node]})],a.prototype,"btn_stepArr",void 0),i([A({displayName:"\u9636\u6bb5\u9501\u56fe\u7247\u7ec4",type:[cc.Node]})],a.prototype,"node_lockArr",void 0),i([A({displayName:"\u9636\u6bb5\u9009\u4e2d\u56fe",type:cc.Node})],a.prototype,"node_stepSelect",void 0),i([A({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"node_getAll",void 0),i([A({displayName:"\u65b0\u4eba\u4efb\u52a1\u5bb9\u5668",type:cc.Node})],a.prototype,"content_task",void 0),i([A({displayName:"\u9636\u6bb5lab",type:cc.Label})],a.prototype,"lab_step",void 0),i([A({displayName:"\u9636\u6bb5\u5956\u52b1\u540d\u79f0",type:cc.Label})],a.prototype,"lab_stepRewardName",void 0),i([A({displayName:"\u9636\u6bb5\u5956\u52b1\u690d\u7269\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_stepPlantReward",void 0),i([A({displayName:"\u9636\u6bb5\u5956\u52b1\u9053\u5177\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_stepReward",void 0),i([A({displayName:"\u9636\u6bb5\u5956\u52b1\u6309\u94ae\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"spris_stepBtns",void 0),i([A({displayName:"\u9636\u6bb5\u6309\u94ae\u6587\u5b57\u8282\u70b9",type:cc.Node})],a.prototype,"lab_stepBtn",void 0),i([A({displayName:"\u9636\u6bb5\u5956\u52b1\u6570\u91cf",type:cc.Label})],a.prototype,"lab_stepRewardCnt",void 0),i([A({displayName:"\u5956\u52b1\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"sprs_stepReward",void 0),i([A({displayName:"\u8bd5\u7528\u4e00\u5929\u8282\u70b9",type:cc.Node})],a.prototype,"node_trial",void 0),i([A({displayName:"\u4efb\u52a1\u5b8c\u6210\u8fdb\u5ea6\u6761\u906e\u7f69",type:cc.Node})],a.prototype,"node_proMask",void 0),i([A({displayName:"item\u9884\u8bbe",type:cc.Prefab})],a.prototype,"pre_item",void 0),i([A({displayName:"\u5173\u95ed\u6309\u94ae",type:cc.Node})],a.prototype,"node_close",void 0),i([A({displayName:"\u7ea2\u70b9\u63d0\u793a\u7ec4",type:[cc.Node]})],a.prototype,"nodes_redTip",void 0),i([A({displayName:"\u5168\u90e8\u9886\u53d6\u7ea2\u70b9",type:cc.Node})],a.prototype,"node_redGetAll",void 0),i([A({displayName:"",type:[cc.Node]})],a.prototype,"title_txt",void 0),i([T],a)}(s.default);t.default=B,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../View/pzaPreOpenView":"pzaPreOpenView","../View/pzaPropNameTip":"pzaPropNameTip","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaNewPlayTaskMgr":"pzaNewPlayTaskMgr","./pzaNewPlayerTaskItem":"pzaNewPlayerTaskItem"}],pzaNewZombieView:[function(e,a,t){"use strict";cc._RF.push(a,"065d6jtpVlEi5hTXXQxVRdB","pzaNewZombieView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNewZombieView=void 0;var r=e("../../Battle/Data/pzaGuideType"),p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/Data/pzaZombieEnum"),s=e("../../Battle/pzaGameState"),c=e("../../Common/pzaGameCommonPool"),u=e("../../Common/pzaGameConfig"),d=e("../../Common/pzaSpriteFrameManager"),h=e("../../Common/pzaWorldEventManager"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.zombieName=null,a.zombieDesc=null,a.zombieSP=null,a.nodes_rider=[],a.spris_cardBg=[],a.sprs_rider=[],a.labs_rider=[],a.profess_rider=[],a.node_recommend=null,a.frames_profess=[],a.cardBoardFrames=[],a.maskNode=null,a.boardNode=null,a.plantsMap=new Map([[l.pzaZombieEnum.CONE_HEAD_ZOMBIE,[p.pzaPlantEnum.PEA_SHOOTER,p.pzaPlantEnum.WALL_NUT]],[l.pzaZombieEnum.POLEVAULTING_ZOMBIE,[p.pzaPlantEnum.PEA_SHOOTER]],[l.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,[p.pzaPlantEnum.CHOMPER]],[l.pzaZombieEnum.NEWSPAPER_ZOMBIE,[p.pzaPlantEnum.PUFF_SHROOM]],[l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,[p.pzaPlantEnum.FUME_SHROOM]],[l.pzaZombieEnum.FOOTBALL_ZOMBIE,[p.pzaPlantEnum.HYPNO_SHROOM]],[l.pzaZombieEnum.DANCING_ZOMBIE,[p.pzaPlantEnum.ICE_SHROOM]],[l.pzaZombieEnum.SNORKEL_ZOMBIE,[p.pzaPlantEnum.TANGLE_KELP]],[l.pzaZombieEnum.ZOMBONI,[p.pzaPlantEnum.JALAPENO,p.pzaPlantEnum.SPIKEWEED]],[l.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,[p.pzaPlantEnum.TALL_NUT]],[l.pzaZombieEnum.BALLOON_ZOMBIE,[p.pzaPlantEnum.CACTUS,p.pzaPlantEnum.BLOVER]],[l.pzaZombieEnum.DIGGER_ZOMBIE,[p.pzaPlantEnum.SPLIT_PEA,p.pzaPlantEnum.STAR_FRUIT]],[l.pzaZombieEnum.POGO_ZOMBIE,[p.pzaPlantEnum.TALL_NUT,p.pzaPlantEnum.MAGNET_SHROOM]],[l.pzaZombieEnum.CATAPULT_ZOMBIE,[p.pzaPlantEnum.UMBRELLA_LEAF]],[l.pzaZombieEnum.LADDER_ZOMBIE,[p.pzaPlantEnum.CABBAGE_PULT,p.pzaPlantEnum.KERNEL_PULT]]]),a}return n(a,e),a.prototype.onEnable=function(){setTimeout(function(){s.pzaGameState.gamePause=!0},100)},a.prototype.onDisable=function(){},a.prototype.showNewZombie=function(e,a){var t=this,o=u.pzaGameConfig.getZombieConfig(e);if(null!=a&&null!=o){this.boardNode.active=!1,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SET_GROVEOPACITY,40),this.node.getComponent(cc.Widget).updateAlignment();var n=cc.v2(0,50);e==l.pzaZombieEnum.BALLOON_ZOMBIE&&(n=cc.v2(0,100)),this.maskAct(a,function(){t.boardNode.active=!0,t.nodes_rider.forEach(function(e){e.active=!1});var a=t.plantsMap.get(e);if(a){t.node_recommend.active=!0;for(var n=0;n<a.length;n++){t.nodes_rider[n].active=!0,t.labs_rider[n].string=""+s.pzaGameState.getPlantPrice(a[n]);var i=u.pzaGameConfig.getPlantConfig(a[n]);t.profess_rider[n].spriteFrame=t.frames_profess[i.profession-1],d.pzaSpriteFrameManager.loadPlantCard(a[n],t.sprs_rider[n]),t.spris_cardBg[n].spriteFrame=t.cardBoardFrames[i.rareLevel]}}else t.node_recommend.active=!1;d.pzaSpriteFrameManager.loadZombieCard(e,t.zombieSP),e==l.pzaZombieEnum.ZOMBONI?(t.zombieSP.node.scale=.7,t.zombieSP.node.y=-50):(t.zombieSP.node.scale=1.5,t.zombieSP.node.y=-100),t.zombieName.string=o.name;var r=u.pzaGameConfig.ZombieDescMap.get(e);null!=r&&(t.zombieDesc.string=r)},n)}else this.close()},a.prototype.maskAct=function(e,a,t){void 0===t&&(t=cc.v2());var o=this.node.convertToNodeSpaceAR(e);o.x+=t.x,o.y+=t.y,this.maskNode.runAction(cc.sequence(cc.spawn(cc.moveTo(1,o).easing(cc.easeInOut(3)),cc.scaleTo(1,1)),cc.callFunc(function(){setTimeout(function(){a&&a()},300)}))),this.maskNode.setPosition(cc.v2(750,-500)),this.maskNode.scale=1.2},a.prototype.clickConfirm=function(){this.close()},a.prototype.close=function(){s.pzaGameState.gamePause=!1,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_RESUME,null),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SET_GROVEOPACITY,255),c.pzaGameCommonPool.returnInstant(this.node),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_1_8),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_2_3),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_2_6),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_2_8),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_3_3),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_3_6),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_3_8),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_4_3),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_4_6),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_4_8),window.pzaGuideManager.checkGuideStart(r.pzaGuideType.WEAK_GUIDE_5_6)},i([z({displayName:"\u50f5\u5c38\u540d\u79f0",type:cc.Label})],a.prototype,"zombieName",void 0),i([z({displayName:"\u50f5\u5c38\u4ecb\u7ecd",type:cc.RichText})],a.prototype,"zombieDesc",void 0),i([z({type:cc.Sprite})],a.prototype,"zombieSP",void 0),i([z({displayName:"\u9a91\u58eb\u8282\u70b9\u7ec4",type:[cc.Node]})],a.prototype,"nodes_rider",void 0),i([z({displayName:"\u5361\u7247\u80cc\u666f\u7ec4",type:[cc.Sprite]})],a.prototype,"spris_cardBg",void 0),i([z({displayName:"\u9a91\u58eb\u56fe\u7247\u7ec4",type:[cc.Sprite]})],a.prototype,"sprs_rider",void 0),i([z({displayName:"\u9a91\u58eb\u4ef7\u683clabel",type:[cc.Label]})],a.prototype,"labs_rider",void 0),i([z({displayName:"\u9a91\u58eb\u804c\u4e1a\u56fe\u7247",type:[cc.Sprite]})],a.prototype,"profess_rider",void 0),i([z({displayName:"\u63a8\u8350\u8282\u70b9",type:cc.Node})],a.prototype,"node_recommend",void 0),i([z({displayName:"\u804c\u4e1a\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"frames_profess",void 0),i([z({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],a.prototype,"cardBoardFrames",void 0),i([z({displayName:"\u900f\u660e\u906e\u7f69",type:cc.Node})],a.prototype,"maskNode",void 0),i([z({type:cc.Node})],a.prototype,"boardNode",void 0),i([f],a)}(cc.Component);t.pzaNewZombieView=y,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaNewspaperZombie:[function(e,a,t){"use strict";cc._RF.push(a,"d1e17eiULxA2714SgSPTN3g","pzaNewspaperZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNewspaperZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../pzaGameState"),u=e("./pzaBaseZombie"),d=e("./pzaZombieState"),h=e("./pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.directThrowHurt=!0,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[h.pzaZombieSlotType.butter,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.butter).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.butter,-2.19,49.04))]])},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=s.pzaZombieHurtCate.PENETRATE_HURT},a.prototype.equipDeath=function(){var e=this;this.equipHurtState=s.pzaHurtStateEnum.DEAD,this.hasEquip=!1,null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.zombieData.moveSpd=0),this.isPlayEquipDeath=!0,this.changeSkin("zombie_2"),this.animation.playAnimation("idle",!1,function(){if(e.updateEquipState(e.equip1Slot,0),null!=e.baseData&&null!=e.baseData.zombieData){var a=r.pzaGameConfig.getZombieSpecialSpeed(e.baseData.zombieData.zombieType);e.baseData.zombieData.moveSpd=c.pzaGameState.map.getBlockWidth()/a}e.playMoveAnimation(),p.pzaSoundManager.playAudio("newspaper_angel"),e.isPlayEquipDeath=!1}),p.pzaSoundManager.playAudio("newspaper_fall"),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA)},a.prototype.playMoveAnimation=function(){this.zombieState=d.pzaZombieState.MOVE;var e=this.hasEquip?"move":"move2";this.animation.playAnimation(e,!0,null,null,1)},i([f],a)}(u.pzaBaseZombie));t.pzaNewspaperZombie=z,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaNodeManager:[function(e,a,t){"use strict";cc._RF.push(a,"df721QfqtJH6ISch33dy7N5","pzaNodeManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNodeManager=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bgNode=null,a.grassNode=null,a.battleUINode=null,a.downEffectNode=null,a.plantZombieNode=null,a.bulletNode=null,a.upEffectNode=null,a.upBgNode=null,a.cards=null,a.extraBlock=null,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){t.instance=this},a.getCardsNode=function(){return null==this.instance?null:this.instance.cards},a.getGrassNode=function(){return null==this.instance?null:this.instance.grassNode},a.getPlantZombieNode=function(){return null==this.instance?null:this.instance.plantZombieNode},a.getBulletNode=function(){return null==this.instance?null:this.instance.bulletNode},a.getDownEffectNode=function(){return null==this.instance?null:this.instance.downEffectNode},a.getUpEffectNode=function(){return null==this.instance?null:this.instance.upEffectNode},a.getUpBgNode=function(){return null==this.instance?null:this.instance.upBgNode},a.getBattleUINode=function(){return null==this.instance?null:this.instance.battleUINode},a.getExtraBlockNode=function(){return null==this.instance?null:this.instance.extraBlock},a.instance=null,i([l({displayName:"\u80cc\u666f\u8282\u70b9",type:cc.Node})],a.prototype,"bgNode",void 0),i([l({displayName:"\u8349\u5730\u8282\u70b9",type:cc.Node})],a.prototype,"grassNode",void 0),i([l({displayName:"\u6218\u6597UI\u8282\u70b9",type:cc.Node})],a.prototype,"battleUINode",void 0),i([l({displayName:"\u4e0b\u5c42\u7279\u6548\u8282\u70b9",type:cc.Node})],a.prototype,"downEffectNode",void 0),i([l({displayName:"\u690d\u7269\u50f5\u5c38\u8282\u70b9",type:cc.Node})],a.prototype,"plantZombieNode",void 0),i([l({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"bulletNode",void 0),i([l({displayName:"\u4e0a\u5c42\u7279\u6548\u8282\u70b9",type:cc.Node})],a.prototype,"upEffectNode",void 0),i([l({displayName:"\u4e0a\u5c42\u80cc\u666f\u8282\u70b9",type:cc.Node})],a.prototype,"upBgNode",void 0),i([l({displayName:"\u6389\u51fa\u7684\u5361",type:cc.Node})],a.prototype,"cards",void 0),i([l({type:cc.Node})],a.prototype,"extraBlock",void 0),t=i([p],a)}(cc.Component);t.pzaNodeManager=s,cc._RF.pop()},{}],pzaNormalZombie:[function(e,a,t){"use strict";cc._RF.push(a,"939b5ISX1BN+oTtVwQEGr8m","pzaNormalZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNormalZombie=void 0;var r=e("../Data/pzaGuideType"),p=e("../Data/pzaZombieEnum"),l=e("./pzaBaseZombie"),s=e("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName="zombie_head_1",a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]])},a.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.death=function(a,t,o){e.prototype.death.call(this,a,t,o),[r.pzaGuideType.FORCE_GUIDE_1_4,r.pzaGuideType.FORCE_GUIDE_5_1].includes(window.pzaGuideManager.guideType)&&window.pzaGuideManager.guideStepNext()},i([u],a)}(l.pzaBaseZombie));t.pzaNormalZombie=d,cc._RF.pop()},{"../Data/pzaGuideType":"pzaGuideType","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNutZombie:[function(e,a,t){"use strict";cc._RF.push(a,"139ffPnPSJJXaRS/prJ5GYG","pzaNutZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaNutZombie=void 0;var r=e("./pzaConeHeadZombie"),p=e("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=p.pzaZombieSlotType.head_nut,a.equip2Slot=p.pzaZombieSlotType.hat,a.hatType=p.pzaZombieSlotType.head_nut,a.isNut=!0,a.garlicSkinName="",a.eq2Pos1=[0,0,0],a.eq2Pos2=[0,0,0],a.eq2Pos3=[0,0,0],a.eq2Name=null,a}return n(a,e),a.prototype.initEquips=function(){this.baseData&&this.baseData.zombieData&&(this.slotMap=new Map([]),this.slotMap.set(p.pzaZombieSlotType.head_nut,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.head_nut).addState(new p.pzaZombieSlotAtt(1,this.hatType+"1",198,2.55,-90)).addState(new p.pzaZombieSlotAtt(2,this.hatType+"2",197.5,2.55,-90)).addState(new p.pzaZombieSlotAtt(3,this.hatType+"3",197.5,2.55,-90))),this.baseData.zombieData.zombieType)},a.prototype.bindData=function(a,t){e.prototype.bindData.call(this,a,t)},a.prototype.updateMove=function(a){e.prototype.updateMove.call(this,a)},a.prototype.ashesDeath=function(a,t){e.prototype.ashesDeath.call(this,a,t,this.hasInWater?"blow_2pant_duck":"blow_2pant")},i([s],a)}(r.pzaConeHeadZombie));t.pzaNutZombie=c,cc._RF.pop()},{"./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaOperationMgr:[function(e,a,t){"use strict";cc._RF.push(a,"5b08f87WtFCFphu37lPDXdu","pzaOperationMgr"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaOperationType=t.pzaOperationMgr=void 0;var o,n=e("../Battle/Data/pzaPlantEnum"),i=e("../Battle/pzaGameState"),r=e("../BattlePass/pzaBattlePassMgr"),p=e("../BattlePass/pzaBattlePassTaskMgr"),l=e("../Load/pzaBundleObjectPool"),s=e("../Load/pzaPreLoadManager"),c=e("../utils/pzaChannel"),u=e("../utils/pzakc"),d=e("../utils/pzaResMgr"),h=e("../View/pzaBubbleItem"),m=e("../View/pzaBubbleTips"),f=e("../View/pzaCommonMask"),z=e("../View/pzaVideoGiftView"),y=e("./pzaGiftConfig"),g=e("./pzaLocalData"),v=e("./pzaUIManager"),b=e("./pzaWorldEventManager"),P=function(){function e(){}return e.showNewPlayerView=function(){g.pzaLocalData.data.newPlayerBtnState=2,g.pzaLocalData.addDirty("newPlayerBtnState")},e.showResGift=function(e){if(g.pzaLocalData.isShowGift)if(g.pzaLocalData.data.hasBeginGift){var a=g.pzaLocalData.data.getDaveGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Dave).getCount&&g.pzaLocalData.data.showDaveViewCount<g.pzaLocalData.data.showDaveViewMax;0==a&&(this.lastGiftType=y.pzaGiftID.Res);var t=g.pzaLocalData.data.getRseGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Res).getCount&&g.pzaLocalData.data.showResViewCount<g.pzaLocalData.data.showDaveViewMax;0==t&&(this.lastGiftType=y.pzaGiftID.Dave),a&&this.lastGiftType==y.pzaGiftID.Dave?(g.pzaLocalData.data.showDaveViewCount++,g.pzaLocalData.addDirty("showDaveViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(z.pzaVideoGiftView);t&&t.bindData(y.pzaGiftID.Dave,function(){e&&e()},function(){e&&e()})})):t&&this.lastGiftType==y.pzaGiftID.Res?(g.pzaLocalData.data.showResViewCount++,g.pzaLocalData.addDirty("showResViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(z.pzaVideoGiftView);t&&t.bindData(y.pzaGiftID.Res,function(){e&&e()},function(){e&&e()})})):v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(z.pzaVideoGiftView);t&&t.bindData(y.pzaGiftID.Random,function(){e&&e()},function(){e&&e()})})}else g.pzaLocalData.data.showBeginViewCount<g.pzaLocalData.data.showBeginViewMax?(g.pzaLocalData.data.showBeginViewCount++,g.pzaLocalData.addDirty("showBeginViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(z.pzaVideoGiftView);t&&t.bindData(y.pzaGiftID.Begin,function(){e&&e()},function(){e&&e()})})):e&&e();else e&&e()},e.showNormalGameGift=function(e){var a=function(a){v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(t){var o=t&&t.getComponent(z.pzaVideoGiftView);o&&o.bindData(a,null,null),e&&e()})};if(g.pzaLocalData.isShowGift)if(10*g.pzaLocalData.data.curChapter+g.pzaLocalData.data.curPart<=13)e&&e();else if(this.gamewinGiftIndex++,1==this.gamewinGiftIndex||this.gamewinGiftIndex%5==0)if(g.pzaLocalData.data.hasBeginGift){console.log("pzaLocalData.data.getDaveGiftCount ",g.pzaLocalData.data.getDaveGiftCount);var t=g.pzaLocalData.data.getDaveGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Dave).getCount&&g.pzaLocalData.data.showDaveViewCount<g.pzaLocalData.data.showDaveViewMax;0==t&&(this.lastGiftType=y.pzaGiftID.Res);var o=g.pzaLocalData.data.getRseGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Res).getCount&&g.pzaLocalData.data.showResViewCount<g.pzaLocalData.data.showDaveViewMax;0==o&&(this.lastGiftType=y.pzaGiftID.Dave),t&&this.lastGiftType==y.pzaGiftID.Dave?(g.pzaLocalData.data.showDaveViewCount++,g.pzaLocalData.addDirty("showDaveViewCount"),a(y.pzaGiftID.Dave)):o&&this.lastGiftType==y.pzaGiftID.Res?(g.pzaLocalData.data.showResViewCount++,g.pzaLocalData.addDirty("showResViewCount"),a(y.pzaGiftID.Res)):a(y.pzaGiftID.Random)}else g.pzaLocalData.data.showBeginViewCount<g.pzaLocalData.data.showBeginViewMax&&(g.pzaLocalData.data.showBeginViewCount++,g.pzaLocalData.addDirty("showBeginViewCount"),a(y.pzaGiftID.Begin));else e&&e();else e&&e()},e.showMiniGameGift=function(){g.pzaLocalData.isShowGift&&5==i.pzaGameState.curChapter&&9==i.pzaGameState.curPart&&this.showResGift(null)},e.showFailGameGift=function(e,a,t){if(g.pzaLocalData.isShowGift){if(!(10*g.pzaLocalData.data.curChapter+g.pzaLocalData.data.curPart<=13))if(g.pzaLocalData.data.hasBeginGift){var o=g.pzaLocalData.data.getDaveGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Dave).getCount&&g.pzaLocalData.data.showDaveViewCount<g.pzaLocalData.data.showDaveViewMax,n=g.pzaLocalData.data.getRseGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Res).getCount&&g.pzaLocalData.data.showResViewCount<g.pzaLocalData.data.showDaveViewMax;o?(g.pzaLocalData.data.showDaveViewCount++,g.pzaLocalData.addDirty("showDaveViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Dave,function(){t&&t()},function(){t&&t()})})):n?(g.pzaLocalData.data.showResViewCount++,g.pzaLocalData.addDirty("showResViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Res,function(){t&&t()},function(){t&&t()})})):v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Random,function(){t&&t()},function(){t&&t()})})}else g.pzaLocalData.data.showBeginViewCount<g.pzaLocalData.data.showBeginViewMax?(g.pzaLocalData.data.showBeginViewCount++,g.pzaLocalData.addDirty("showBeginViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Begin,function(){t&&t()},function(){t&&t()})})):t&&t()}else t&&t()},e.showCreativeVaseModeGift=function(e){g.pzaLocalData.isShowGift?this.showResGift(e):e&&e()},e.showZombieModeGift=function(e){g.pzaLocalData.isShowGift?this.showResGift(e):e&&e()},e.showTrophyGift=function(){if(c.pzaChannel.instance().showInter(!0),g.pzaLocalData.isShowGift)if(g.pzaLocalData.data.hasBeginGift){var e=g.pzaLocalData.data.getDaveGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Dave).getCount&&g.pzaLocalData.data.showDaveViewCount<g.pzaLocalData.data.showDaveViewMax;0==e&&(this.lastGiftType=y.pzaGiftID.Res);var a=g.pzaLocalData.data.getRseGiftCount<y.pzaGiftConfig.getGiftData(y.pzaGiftID.Res).getCount&&g.pzaLocalData.data.showResViewCount<g.pzaLocalData.data.showDaveViewMax;0==a&&(this.lastGiftType=y.pzaGiftID.Dave),e&&this.lastGiftType==y.pzaGiftID.Dave?(g.pzaLocalData.data.showDaveViewCount++,g.pzaLocalData.addDirty("showDaveViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Dave,null,null)})):a&&this.lastGiftType==y.pzaGiftID.Res?(g.pzaLocalData.data.showResViewCount++,g.pzaLocalData.addDirty("showResViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Res,null,null)})):v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Random,null,null)})}else i.pzaGameState.gameMode!=i.pzaGameMode.NORMAL&&g.pzaLocalData.data.showBeginViewCount<g.pzaLocalData.data.showBeginViewMax&&(g.pzaLocalData.data.showBeginViewCount++,g.pzaLocalData.addDirty("showBeginViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Begin,null,null)}))},e.showGardenGift=function(e){g.pzaLocalData.isShowGift&&e<=0&&0==g.pzaLocalData.gardenGuiding&&!g.pzaLocalData.data.hasGardenGift&&g.pzaLocalData.data.showGardenViewCount<g.pzaLocalData.data.showGardenViewMax&&(g.pzaLocalData.data.showGardenViewCount++,g.pzaLocalData.addDirty("showGardenViewCount"),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.VIDEO_GIFT_VIEW,function(e){var a=e&&e.getComponent(z.pzaVideoGiftView);a&&a.bindData(y.pzaGiftID.Garden,null,null)}))},e.showShareBubble=function(e,a){if("oppo"==c.pzaChannel.instance().channel||"my"==c.pzaChannel.instance().channel)return e.active=!1,void(a&&a(null));g.pzaLocalData.data.everyDayShareRwdCurrent<5&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BUBBLE_ITEM,!1,function(t,o){null==t&&null!=o?e&&(o.setParent(e),o.getComponent(h.pzaBubbleItem).showReward(),a&&a(o.getComponent(h.pzaBubbleItem))):console.error(t)})},e.showChangeTipsBubble=function(a,t,o,n,r){void 0===o&&(o=5),void 0===r&&(r=!1),"qq"!=c.pzaChannel.instance().channel&&(e.BubbleNode||!a.active||a.opacity<=20||i.pzaGameState.gameWin||!r&&i.pzaGameState.gameMode==i.pzaGameMode.NORMAL&&(1==i.pzaGameState.curChapter&&1==i.pzaGameState.curPart||1==i.pzaGameState.curChapter&&2==i.pzaGameState.curPart)||(this.isShowedChangeSpeedTips=!0,e.showTips(a,0,0,t,h.pzaBubbleType.speed,o,n)))},e.showSunTipsBubble=function(a,t,o,n){void 0===o&&(o=5),"qq"!=c.pzaChannel.instance().channel&&(e.BubbleNode||!e.sunTipIntervalTimeOver||!a.active||a.opacity<=20||(e.sunTipTimer&&clearTimeout(e.sunTipTimer),e.sunTipIntervalTimeOver=!1,e.sunTipTimer=setTimeout(function(){e.sunTipIntervalTimeOver=!0},e.sunTipIntervalTimeMax),e.showTips(a,0,0,t,h.pzaBubbleType.sun,o,n)))},e.isShowChangeSpeedTips=function(){1==i.pzaGameState.curChapter&&1==i.pzaGameState.curPart||1==i.pzaGameState.curChapter&&2==i.pzaGameState.curPart||this.isShowedChangeSpeedTips||1!=cc.gameSpeed||(console.log("isShowChangeSpeedTips ",window.pzazombieManager.wave),0==window.pzazombieManager.wave&&b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.SHOW_BUBBLE_TIPS,null))},e.startTipsDetect=function(){"qq"!=c.pzaChannel.instance().channel&&(this.TipsDetectTimer||(this.TipsDetectTimer=setInterval(function(){if(!e.BubbleNode&&e.cherryTipIntervalTimeOver){var a=window.pzazombieManager.zombieMap;a&&a.size>0&&a.forEach(function(a){a&&a.baseData&&-1!=a.baseData.xIndex&&a.baseData.xIndex<=1&&(e.cherryTipTimer&&clearTimeout(e.cherryTipTimer),e.cherryTipIntervalTimeOver=!1,e.cherryTipTimer=setTimeout(function(){e.cherryTipIntervalTimeOver=!0},e.sunTipIntervalTimeMax),b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.SHOW_BUBBLE_ARROW,5))})}},500)))},e.stopTipsDetect=function(){this.TipsDetectTimer&&clearInterval(this.TipsDetectTimer),this.TipsDetectTimer=null,e.cherryTipIntervalTimeOver=!0,e.cherryTipTimer&&clearTimeout(e.cherryTipTimer),e.sunTipIntervalTimeOver=!0,e.sunTipTimer&&clearTimeout(e.sunTipTimer)},e.showTips=function(a,t,o,n,i,r,p,c){void 0===t&&(t=0),void 0===o&&(o=0),void 0===r&&(r=5),void 0===c&&(c=3),e.BubbleNode||!a||!a.active||a.opacity<=20||l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BUBBLE_ITEM,!1,function(l,s){if(null==l&&null!=s){if(a){s.setParent(a),s.x+=t,s.y+=o,s.getComponent(h.pzaBubbleItem).type=i,s.getComponent(h.pzaBubbleItem).showTips(),s.getComponent(h.pzaBubbleItem).setTipText(n),s.getComponent(h.pzaBubbleItem).setCloseTime({type:i,setTime:r}),s.getComponent(h.pzaBubbleItem).tipTxtHideTime=c,e.BubbleNode=s,p&&p(s.getComponent(h.pzaBubbleItem));var u=a.convertToWorldSpaceAR(s.getPosition());s.setParent(a.parent.parent);var d=a.parent.parent.convertToNodeSpaceAR(u);s.zIndex=999,s.setPosition(d)}}else console.error(l)})},e.moveTips=function(a,t,o){void 0===t&&(t=0),void 0===o&&(o=0),e.BubbleNode&&(e.BubbleNode.setParent(a),e.BubbleNode.x=t,e.BubbleNode.y=o,e.BubbleNode.getComponent(h.pzaBubbleItem).resumeSelf())},e.closeTips=function(e){void 0===e&&(e=0),b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:h.pzaBubbleType.tips,setTime:e})},e.hideTips=function(){e.BubbleNode&&(e.BubbleNode.destroy(),e.BubbleNode=null)},e.showBubbleTips=function(e,a,t){void 0===t&&(t={x:-50,y:100}),l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BUBBLE_TIPS,!1,function(o,n){null==o&&null!=n?e&&(n.setParent(e),n.x+=t.x,n.y+=t.y,n.getComponent(m.pzaBubbleTips).showTips(a)):console.error(o)})},e.setLoginActivityEndTime=function(e,a,t){if(void 0===t&&(t=!1),t){var o=8;return(n=new Date).setTime(n.getTime()+864e5*o),void(g.pzaLocalData.data.loginActivity_EndTime=n.getTime())}var n;1==e&&4==a&&g.pzaLocalData.data.curChapter==e&&g.pzaLocalData.data.curPart==a&&(o=8,(n=new Date).setTime(n.getTime()+864e5*o),g.pzaLocalData.data.loginActivity_EndTime=n.getTime())},e.setNewPlayerEndTime=function(e,a,t){if(void 0===t&&(t=!1),t){var o=15;return(n=new Date).setTime(n.getTime()+864e5*o),void(g.pzaLocalData.data.newPlayerTask_EndTime=n.getTime())}var n;1==e&&4==a&&g.pzaLocalData.data.curChapter==e&&g.pzaLocalData.data.curPart==a&&(o=15,(n=new Date).setTime(n.getTime()+864e5*o),g.pzaLocalData.data.newPlayerTask_EndTime=n.getTime())},e.checkNewPlayerTask=function(a,t){0!=e.isUnlockOperaFN(o.newPlayerTask)&&null!=g.pzaLocalData.data.newPlayerTask_EndTime?(c.pzaChannel.isConfRemote||null==g.pzaLocalData.serverTime?(new Date).getTime():g.pzaLocalData.serverTime)>=g.pzaLocalData.data.newPlayerTask_EndTime?t&&t():a&&a():t&&t()},e.checkLoginReward=function(a,t){0!=e.isUnlockOperaFN(o.loginActivity)&&null!=g.pzaLocalData.data.loginActivity_EndTime?(c.pzaChannel.isConfRemote||null==g.pzaLocalData.serverTime?(new Date).getTime():g.pzaLocalData.serverTime)>=g.pzaLocalData.data.loginActivity_EndTime?t&&t():a&&a():t&&t()},e.checkRiderFall=function(a,t){if(0!=e.isUnlockOperaFN(o.riderFall)){var n=c.pzaChannel.acviveGetId.get(c.pzaChannel.instance().channel).riderFall;null!=n?c.pzaChannel.activGet(n,function(o,n,i){if(0!=o)if(0==i)if(e.getTime()>=n)t&&t();else{var r=new Date(n-864e5);g.pzaLocalData.riderFallLeftTime=r,g.pzaLocalData.riderFallLeftDay=u.default.showLeftDay(n)-1,a&&a()}else t&&t();else t&&t()}):console.error("gameId is null")}else t&&t()},e.isClearBpProcess=function(e,a){var t=(new Date).getTime(),o=u.default.getData(e+a,null);if(null==o)return g.pzaLocalData.clearBpData(!0),void u.default.saveData(e+a,t+"");o=parseInt(o),u.default.getDaysDifference(t,o)>=i.pzaGameState.battleCircleDay&&(g.pzaLocalData.clearBpData(!0),u.default.saveData(e+a,t+""))},e.setBpRwdConf=function(e){var a="1"==e?"a23":"a33",t="1"==e?"a24":"a34";r.default.instance().normalRewardInit(d.pzaResMgr.instance().getConf(a)),r.default.instance().highRewardInit(d.pzaResMgr.instance().getConf(t))},e.checkBpTask=function(e,a){var t=this,o=c.pzaChannel.acviveGetId.get(c.pzaChannel.instance().channel).battlePass;null!=o?c.pzaChannel.activGet(o,function(o,n,i){0!=o?(t.setBpRwdConf("1"),e&&e(),g.pzaLocalData.data.battlePassVer!=i&&(g.pzaLocalData.data.battlePassVer=i,g.pzaLocalData.clearBpData(),g.pzaLocalData.data.bpDayTaskStates={},g.pzaLocalData.data.bpWeekTaskStates={},g.pzaLocalData.data.bpNormalRewards={},g.pzaLocalData.data.bpHighRewards={},g.pzaLocalData.data.battlePassLv=0,g.pzaLocalData.data.battlePassExp=0,g.pzaLocalData.addDirty("bpDayTaskStates","bpWeekTaskStates","bpNormalRewards","bpHighRewards","battlePassLv","battlePassExp","battlePassVer"))):a&&a()}):console.error("gameId is null")},e.everyDayShowOperaView=function(e){var a=this,t=g.pzaLocalData.data.activitiySave.everyDay_ShowOnce[e];!this.isUnlockOperaFN(e)||null!=t&&0!=t||(e==o.sign?this.showSign():e==o.riderFall?this.checkRiderFall(function(){a.showRiderFall()}):e==o.newPlayerTask?this.showNewPlayerTask():e==o.loginActivity&&this.showLoginActivity(),null==t?g.pzaLocalData.data.activitiySave.everyDay_ShowOnce[e]=1:g.pzaLocalData.data.activitiySave.everyDay_ShowOnce[e]++,g.pzaLocalData.addDirty("activitiySave"))},e.isUnlockOperaFN=function(e){var a=10*g.pzaLocalData.data.curChapter+g.pzaLocalData.data.curPart;switch(e){case o.shareGift:case o.battlePass:return!0;case o.sign:return a>12;case o.newPlayerTask:return a>14;case o.riderBeltEquip:case o.loginActivity:return a>19;case o.moreChalleng:return a>15;case o.riderFall:return a>13;default:return!1}},e.showSign=function(){g.pzaLocalData.data.canMonthSign?v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.MONTH_SIGN_VIEW,null):v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.DAY_SIGN_VIEW,null)},e.showLoginActivity=function(){(c.pzaChannel.isConfRemote||null==g.pzaLocalData.serverTime?(new Date).getTime():g.pzaLocalData.serverTime)>=g.pzaLocalData.data.loginActivity_EndTime||(f.pzaCommonMask.showMask(!0),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.LOGINREWARD_VIEW,function(){f.pzaCommonMask.hideMask()}))},e.showRiderFall=function(){f.pzaCommonMask.showMask(!0),null!=c.pzaChannel.acviveGetId.get(c.pzaChannel.instance().channel).riderFall?(g.pzaLocalData.riderPieceType=n.pzaPlantEnum.Gene_SnowPea,v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.RIDERFALL_PARENT_VIEW,function(){f.pzaCommonMask.hideMask()})):console.error("gameId is null")},e.showNewPlayerTask=function(e){if(void 0===e&&(e=!1),!((c.pzaChannel.isConfRemote||null==g.pzaLocalData.serverTime?(new Date).getTime():g.pzaLocalData.serverTime)>=g.pzaLocalData.data.newPlayerTask_EndTime))return e?(f.pzaCommonMask.showMask(!0),void v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.NEWPLAYERTASK_VIEW,function(){f.pzaCommonMask.hideMask()})):void this.checkNewPlayerTask(function(){f.pzaCommonMask.showMask(!0),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.NEWPLAYERTASK_VIEW,function(){f.pzaCommonMask.hideMask()})})},e.showBattlePass=function(){setTimeout(function(){f.pzaCommonMask.showMask(!0,!0)},1);var e=c.pzaChannel.acviveGetId.get(c.pzaChannel.instance().channel).battlePass;null!=e?c.pzaChannel.activGet(e,function(e,a,t){0!=e&&(g.pzaLocalData.data.battlePassVer!=t&&(console.error("\u6e05\u6218\u4ee4\u5b58\u6863"),g.pzaLocalData.data.battlePassVer=t,g.pzaLocalData.clearBpData(),g.pzaLocalData.data.bpDayTaskStates={},g.pzaLocalData.data.bpWeekTaskStates={},g.pzaLocalData.data.bpNormalRewards={},g.pzaLocalData.data.bpHighRewards={},g.pzaLocalData.data.battlePassLv=0,g.pzaLocalData.data.battlePassExp=0,g.pzaLocalData.addDirty("bpDayTaskStates","bpWeekTaskStates","bpNormalRewards","bpHighRewards","battlePassLv","battlePassExp","battlePassVer"),p.default.instance().checkDayTask(1,g.pzaLocalData.data.bpDayLoginCnt)),i.pzaGameState.bpResetLeftDay=u.default.showLeftDay(a),v.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.BATTLEPASS_VIEW,function(){}))}):console.error("gameId is null")},e.testActivGet=function(){var e=c.pzaChannel.acviveGetId.get(c.pzaChannel.instance().channel).battlePass;null!=e?c.pzaChannel.activGet(e,function(e,a,t){console.error("open: ",e),console.error("endTime: ",a),console.error("ver: ",t)}):console.error("gameId is null")},e.getTime=function(){var e;return 0==(e=c.pzaChannel.isConfRemote||null==g.pzaLocalData.serverTime?(new Date).getTime():g.pzaLocalData.serverTime)?1/0:e},e.lastGiftType=y.pzaGiftID.Dave,e.gamewinGiftIndex=0,e.isShowedChangeSpeedTips=!1,e.TipsDetectTimer=null,e.BubbleNode=null,e.sunTipIntervalTimeOver=!0,e.sunTipIntervalTimeMax=3e4,e.sunTipTimer=null,e.cherryTipIntervalTimeOver=!0,e.cherryTipIntervalTimeMax=3e4,e.cherryTipTimer=null,e}();t.pzaOperationMgr=P,function(e){e[e.sign=0]="sign",e[e.shareGift=1]="shareGift",e[e.riderBeltEquip=2]="riderBeltEquip",e[e.battlePass=3]="battlePass",e[e.newPlayerTask=4]="newPlayerTask",e[e.loginActivity=5]="loginActivity",e[e.riderFall=6]="riderFall",e[e.moreChalleng=7]="moreChalleng"}(o=t.pzaOperationType||(t.pzaOperationType={})),cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../BattlePass/pzaBattlePassMgr":"pzaBattlePassMgr","../BattlePass/pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaBubbleItem":"pzaBubbleItem","../View/pzaBubbleTips":"pzaBubbleTips","../View/pzaCommonMask":"pzaCommonMask","../View/pzaVideoGiftView":"pzaVideoGiftView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGiftConfig":"pzaGiftConfig","./pzaLocalData":"pzaLocalData","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaOptionView:[function(e,a,t){"use strict";cc._RF.push(a,"d0d58cuEPJPcoHhY3EJvkOz","pzaOptionView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaOptionView=void 0;var r=e("../../Battle/Data/pzaPlantEnum"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaCommonPopView"),s=e("../../Common/pzaGameCommonPool"),c=e("../../Common/pzaGameManager"),u=e("../../Common/pzaGamePropConfig"),d=e("../../Common/pzaLocalData"),h=e("../../Common/pzaRewardManager"),m=e("../../Common/pzaSoundManager"),f=e("../../Common/pzaTipManager"),z=e("../../Common/pzaUIManager"),y=e("../../Common/pzaUtil"),g=e("../../Common/pzaWorldEventManager"),v=e("../../Load/pzaPreLoadManager"),b=e("../../utils/pzaChannel"),P=e("../../utils/pzakc"),C=e("../pzaCommonMask"),E=e("../pzaWarningView"),S=cc._decorator,_=S.ccclass,D=S.property,M=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.soundTxt=null,a.soundTag=null,a.soundBtn=null,a.musicTxt=null,a.musicTag=null,a.musicBtn=null,a.backTxt=null,a.backBtn=null,a.reBtn=null,a.redeemEdixBox=null,a.uidNode=null,a.privacyNode=null,a.uidEdit=null,a.setUID=null,a.backGameCall=null,a.setClickBtnCD=5e3,a.ableClickSetBtn=!0,a}return n(a,e),a.prototype.onEnable=function(){if(e.prototype.onEnable.call(this),this.uidNode.active=!1,this.soundBtn.on(cc.Node.EventType.TOUCH_START,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_MOVE,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_END,this.soundTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_START,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_MOVE,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_END,this.musicTouch,this),this.redeemEdixBox.string="",b.pzaChannel.instance().getChannel().channelUserId){this.uidNode.active=!0;var a=b.pzaChannel.instance().getChannel().channelUserId;a.length>8&&(a=this.getFirstFiveChars(a)+"..."),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=a}else this.uidNode.active=!1;this.uidEdit.node.active=!1,this.uidEdit.node.parent.active=!1,this.setUID.active=!1,"noAD"==b.pzaChannel.instance().channel&&b.pzaChannel.isConfRemote&&(this.uidNode.active=!0,this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=d.pzaLocalData.data.noADPlayerUid,this.uidEdit.node.active=!0,this.uidEdit.node.parent.active=!0,this.setUID.active=!0,this.uidEdit.string=d.pzaLocalData.data.noADPlayerUid),console.log("now channel: ",b.pzaChannel.instance().channel),"ks"!=b.pzaChannel.instance().channel&&"qq"!=b.pzaChannel.instance().channel||(this.uidNode.active=!1),this.privacyNode.active="qq"==b.pzaChannel.instance().channel||"oppo"==b.pzaChannel.instance().channel||"vivo"==b.pzaChannel.instance().channel||"hw"==b.pzaChannel.instance().channel||"mi"==b.pzaChannel.instance().channel||b.pzaChannel.isConfRemote,b.pzaChannel.instance().showInter(),b.pzaChannel.instance().closeBanner()},a.prototype.getFirstFiveChars=function(e){return e.substring(0,5)},a.prototype.onDisable=function(){this.soundBtn.off(cc.Node.EventType.TOUCH_START,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_MOVE,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_END,this.soundTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_START,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_MOVE,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_END,this.musicTouch,this)},a.prototype.init=function(e,a,t){void 0===t&&(t="\u8fd4\u56de\u6e38\u620f"),this.backGameCall=a,this.backTxt.string=t,e?(this.reBtn.active=!0,this.backBtn.x=-204):(this.reBtn.active=!1,this.backBtn.x=0),this.soundTag.progress=d.pzaLocalData.data.soundValue,this.musicTag.progress=d.pzaLocalData.data.musicValue},a.prototype.soundTouch=function(e){var a=e&&e.getLocation();if(null!=a){var t=this.soundBtn.convertToNodeSpaceAR(a),o=cc.misc.clampf(t.x+180,0,360);this.setSound(o/360)}},a.prototype.musicTouch=function(e){var a=e&&e.getLocation();if(null!=a){var t=this.musicBtn.convertToNodeSpaceAR(a),o=cc.misc.clampf(t.x+180,0,360);this.setMusic(o/360)}},a.prototype.setSound=function(e){this.soundTag.progress=e,d.pzaLocalData.data.soundValue=e,d.pzaLocalData.addDirty("soundValue"),cc.audioEngine.setEffectsVolume(e)},a.prototype.setMusic=function(e){this.musicTag.progress=e,d.pzaLocalData.data.musicValue=e,d.pzaLocalData.addDirty("musicValue"),m.pzaSoundManager.setMusicVolume(e,!0)},a.prototype.clickBackGame=function(){m.pzaSoundManager.playSFX(),this.backGameCall&&this.backGameCall(),this.close()},a.prototype.clickRestart=function(){var e=this;console.log("pzaGameState.gameMode ",p.pzaGameState.gameMode);var a=d.pzaLocalData.endLessPowerCost,t=!0;(c.pzaGameManager.getCurrentGame().isMainMode()||p.pzaGameState.judgeIsMini(p.pzaGameState.gameMode)||p.pzaGameState.judgeIsVase(p.pzaGameState.gameMode)||p.pzaGameState.judgeIsZombie(p.pzaGameState.gameMode))&&(a=d.pzaLocalData.normalPowerCost),d.pzaLocalData.isShowPowerGift||(a=0),p.pzaGameState.isTryMode(p.pzaGameState.curChapter,p.pzaGameState.curPart)&&(a=0,t=!1),z.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(E.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){if(d.pzaLocalData.data.power<a)return f.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void z.pzaUIManager.showPowerView();d.pzaLocalData.setPower(-a),d.pzaLocalData.data.autoPickLeft=p.pzaGameState.autoPickLeft,d.pzaLocalData.addDirty("autoPickLeft"),c.pzaGameManager.removeBattleUI(),g.pzaWorldEventManager.triggerEvent(g.pzaWorldEventType.GAME_OVER,null),y.pzaUtil.changeGameSpeed(1),c.pzaGameManager.getCurrentGame().gameRestart(),e.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1,!1,0,t,a,!1,1)})},a.prototype.clickCopy=function(){this.createWxUserInfoButton(!0,function(){console.log("copyToClip==="),b.pzaChannel.instance().copyToClip(b.pzaChannel.instance().getChannel().channelUserId,function(e){P.default.log("content: ",e)})})},a.prototype.clickComfirmRedeemCode=function(){var e=this.redeemEdixBox.string;if(null==e||e.length<=0)f.pzaTipManager.showHomeTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801~",null,3);else if(d.pzaLocalData.data.usedRedeemCode.includes(e.toUpperCase()))f.pzaTipManager.showHomeTip("\u5151\u6362\u7801\u5df2\u4f7f\u7528~",null,3);else{C.pzaCommonMask.showMask();var a=b.pzaChannel.instance().getChannel().channelUserId;b.pzaChannel.isConfRemote&&(a=d.pzaLocalData.getPlayerTestId()),b.pzaChannel.redeem("\u5047\u9762\u9a91\u58eb",a,e,function(a){if(C.pzaCommonMask.hideMask(),null!=a){var t=[];a.forEach(function(e){var a=new u.pzaRewardPropData(parseInt(e.key),parseInt(e.val));parseInt(e.val)==r.pzaPlantEnum.SUPER_CHOMPER&&(a.limitGet=1),t.push(a)}),h.pzaRewardManager.recieveRewards(t),d.pzaLocalData.data.usedRedeemCode.push(e.toUpperCase()),d.pzaLocalData.addDirty("usedRedeemCode")}else f.pzaTipManager.showHomeTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801~",null,3)})}},a.prototype.clickShowPrivacy=function(){b.pzaChannel.instance().getChannel().showPrivacy(this.node,null,!0)},a.prototype.clickSetUidBtn=function(){var e=this;this.ableClickSetBtn&&(d.pzaLocalData.disablePostFn||(this.ableClickSetBtn=!1,setTimeout(function(){e.ableClickSetBtn=!0},this.setClickBtnCD),d.pzaLocalData.data.noADPlayerUid=this.uidEdit.string,d.pzaLocalData.addDirty("noADPlayerUid"),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=d.pzaLocalData.data.noADPlayerUid,console.log("pzaLocalData.data.noADPlayerUid ",d.pzaLocalData.data.noADPlayerUid),P.default.jpost("https://ga.gamejym.com/fcm/gameApi/noAdLogin",{uid:d.pzaLocalData.data.noADPlayerUid},function(e,a){if(console.log("login resp: ",a),!e&&a){var t=b.pzaChannel.instance().channelMap.get("noAD");a.data&&a.data.isWhite?(t.isWhite=a.data.isWhite,f.pzaTipManager.showHomeTip("\u8bbe\u7f6e\u6210\u529f\uff0c\u5df2\u8fdb\u5165\u767d\u540d\u5355\uff01",null,2)):(t.isWhite=!1,f.pzaTipManager.showHomeTip("\u8bbe\u7f6e\u6210\u529f\uff0c\u672a\u8fdb\u5165\u767d\u540d\u5355\uff01",null,2))}else P.default.err(e)})))},a.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},a.prototype.createWxUserInfoButton=function(e,a){var t=b.pzaChannel.instance().getChannel();"tt"!=t.channel?"wx"===t.channel?(console.log("wxCheckPrivacySetting==="),console.log("wxPrivacyAuthorize==="),t.wxPrivacyAuthorize(a,null)):a&&a():t.getUserInfo(function(){a()})},i([D({displayName:"\u97f3\u6548\u6587\u672c",type:cc.Label})],a.prototype,"soundTxt",void 0),i([D({displayName:"\u97f3\u6548\u6807\u8bb0",type:cc.ProgressBar})],a.prototype,"soundTag",void 0),i([D({displayName:"\u97f3\u6548\u6309\u94ae",type:cc.Node})],a.prototype,"soundBtn",void 0),i([D({displayName:"\u97f3\u4e50\u6587\u672c",type:cc.Label})],a.prototype,"musicTxt",void 0),i([D({displayName:"\u97f3\u4e50\u6807\u8bb0",type:cc.ProgressBar})],a.prototype,"musicTag",void 0),i([D({displayName:"\u97f3\u4e50\u6309\u94ae",type:cc.Node})],a.prototype,"musicBtn",void 0),i([D({displayName:"\u8fd4\u56de\u6309\u94ae\u6587\u672c",type:cc.Label})],a.prototype,"backTxt",void 0),i([D({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],a.prototype,"backBtn",void 0),i([D({displayName:"\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",type:cc.Node})],a.prototype,"reBtn",void 0),i([D({displayName:"\u5151\u6362\u7801\u8f93\u5165\u6846",type:cc.EditBox})],a.prototype,"redeemEdixBox",void 0),i([D({displayName:"\u767d\u540d\u5355\u8282\u70b9",type:cc.Node})],a.prototype,"uidNode",void 0),i([D({displayName:"\u9690\u79c1\u653f\u7b56\u6309\u94ae",type:cc.Node})],a.prototype,"privacyNode",void 0),i([D({displayName:"uid\u7f16\u8f91\u6846",type:cc.EditBox})],a.prototype,"uidEdit",void 0),i([D({displayName:"\u8bbe\u7f6euid",type:cc.Node})],a.prototype,"setUID",void 0),i([_],a)}(l.default);t.pzaOptionView=M,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaCommonPopView":"pzaCommonPopView","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaRewardManager":"pzaRewardManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaCommonMask":"pzaCommonMask","../pzaWarningView":"pzaWarningView"}],pzaParseCond:[function(e,a,t){"use strict";cc._RF.push(a,"9bcafcyHHxJ6IInsPwGIrzq","pzaParseCond"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaParseCond=void 0;var o=e("./pzakc"),n=function(){function e(){}return e.condMap={">":function(e,a){return e>a},"<":function(e,a){return e<a},">=":function(e,a){return e>=a},"<=":function(e,a){return e<=a},"==":function(e,a){return e==a},"=":function(e,a){return e==a},"!=":function(e,a){return e!=a},"!":function(e,a){return!a}},e.orAndMap={"&":function(e,a){return e&&a},"&&":function(e,a){return e&&a},"|":function(e,a){return e||a},"||":function(e,a){return e||a}},e.parseVar=function(e,a){if("number"==typeof e||!isNaN(Number(e)))return Number(e);var t=a[e];if(void 0===t||"number"!=typeof t)throw"parseVar\u5931\u8d25,\u672a\u77e5\u53d8\u91cf:"+e;return Number(t)},e.scanBracketEnd=function(e){for(var a=0,t=-1,o=e.length,n=0;n<o;n++){var i=e[n];if("("===i)a++;else if(")"===i&&0==--a){t=n;break}}if(t<0)throw"[ERR]scanBracketEnd\u5931\u8d25:"+e;return{outStr:e.substring(1,t),endPos:t}},e.scanOrAndNext=function(a){for(var t=-1,o=a.length,n=0;n<o;n++){var i=a[n];if("|"===i&&"|"===a[n+1]||"&"===i&&"&"===a[n+1]){t=n;break}"("===i&&(n=e.scanBracketEnd(a.substring(n)).endPos+1)}return t<0?{outStr:a,endPos:o-1}:{outStr:a.substring(0,t),endPos:t}},e.parseCond=function(a,t){for(var n="",i=null,r="",p=-1,l=null,s=0,c=a.length;s<c;s++){var u=a[s],d=e.condMap[u];if(d)s+1!==c&&e.condMap[u+a[s+1]]&&(u+=a[s+1],d=e.condMap[u],s++),p=1,i=d;else{var h=e.orAndMap[u];if(h){if(s+1!==c&&e.orAndMap[u+a[s+1]]&&(u+=a[s+1],h=e.orAndMap[u],s++),s+1>=c||p<0&&null===l)throw"[ERR]parseCond\u5931\u8d25,\u65e0\u6548orAnd\u4f4d\u7f6e:"+s+"|"+a;var m=e.scanOrAndNext(a.substring(s+1));p>0&&(l=i(e.parseVar(n,t),e.parseVar(r,t)),n="",r="",i=null),l=h(l,e.parseCond(m.outStr,t)),s=s+m.endPos+1,p=-1}else if("("!==u)p<0?n+=u:p>0&&(r+=u);else{var f=e.scanBracketEnd(a.substring(s));if(f.endPos+2===c)return p>0&&i?i(n,e.parseCond(f.outStr,t)):e.parseCond(f.outStr,t);l=e.parseCond(f.outStr,t),p>0&&i&&(l=i(n,e.parseCond(f.outStr,t))),p=-1,s=s+f.endPos+1}}}return p<0||!i?null!==l?l:(o.default.err("[ERR]parseCond\u5931\u8d25:"+a,t),null):i(e.parseVar(n,t),e.parseVar(r,t))},e.condParse=function(a,t){return!a||(a=a.replace(/\s/g,""),e.parseCond(a,t))},e.test=function(){o.default.log("[realRe]=====",!1),o.default.log("[parseCond]=====",e.condParse("a1 > b1 || !((b1 < a1 || c1 > f1) || b1 > a1 )",{a1:12,b1:23,c1:2,d1:3,e1:5,f1:15,g1:20}))},e}();t.pzaParseCond=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaPartDataView:[function(e,a,t){"use strict";cc._RF.push(a,"4a5c11xFZ5LnIRH+4/YzLXt","pzaPartDataView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPartDataView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaBaseComponent"),l=e("../../Common/pzaWorldEventManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.dataLB=null,a.updateTime=0,a.killTimeList=[],a}return n(a,e),a.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.ONZOMBIEKILLED,this.addKill,this),this.conf=r.pzaGameState.hasMainConf(),this.killTimeList=[]},a.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.ONZOMBIEKILLED,this.addKill,this)},a.prototype.addKill=function(){if(this.conf&&this.conf.kill){if(r.pzaGameState.competeKill)return;this.killTimeList.push(this.conf.killData.killTime),this.killTimeList.length>=this.conf.killData.killCount&&(r.pzaGameState.competeKill=!0)}},a.prototype.setKillTime=function(e){if(this.conf&&this.conf.kill){if(r.pzaGameState.competeKill)return;for(var a=0;a<this.killTimeList.length;a++)this.killTimeList[a]-=e,this.killTimeList[a]<=0&&(this.killTimeList.splice(a,1),a--)}},a.prototype.logicLateUpdate=function(e){r.pzaGameState.gamePause||(this.setKillTime(e),this.updateTime+=e,this.updateTime>=.3&&(this.updateTime=0,this.updateView()))},a.prototype.updateView=function(){this.conf&&(this.conf.need_sun?(this.node.opacity=255,this.dataLB.string="\u6536\u96c6\u80fd\u91cf\uff1a"+r.pzaGameState.pickSunCount+"/"+this.conf.need_sun):this.conf.dontuse_sun?(this.node.opacity=255,this.dataLB.string="\u6d88\u8017\u80fd\u91cf\uff1a"+r.pzaGameState.costSunCount+"/"+this.conf.dontuse_sun):this.conf.kill?(this.node.opacity=255,r.pzaGameState.competeKill?this.dataLB.string="\u8fde\u7eed\u51fb\u8d25\u602a\u4eba\uff1a\u5b8c\u6210":this.dataLB.string="\u8fde\u7eed\u51fb\u8d25\u602a\u4eba\uff1a"+this.killTimeList.length+"/"+this.conf.killData.killCount):this.node.opacity=0)},i([u({type:cc.Label})],a.prototype,"dataLB",void 0),i([c],a)}(p.pzaBaseComponent);t.pzaPartDataView=d,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaPartSelectView:[function(e,a,t){"use strict";cc._RF.push(a,"bba8c5B9RRFXqNBbFGtKCA0","pzaPartSelectView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaGameConfig"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaStatisticsMgr"),u=e("../Common/pzaUIManager"),d=e("../Common/pzaUtil"),h=e("../Common/pzaWorldEventManager"),m=e("../Load/pzaPreLoadManager"),f=e("../utils/pzaChannel"),z=e("../utils/pzakc"),y=e("./pzaGuanKaItemView"),g=e("./pzaHandbookView"),v=e("./pzaPowerView"),b=e("./pzaWarningView"),P=e("../Common/pzaSpineController"),C=e("./pzaCommonMask"),E=cc._decorator,S=E.ccclass,_=E.property,D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.chapterBtnNode=[],a.starCount=null,a.partItem=[],a.scrollView=null,a.scrollViewContent=null,a.bookBtn=null,a.part_Bg1=null,a.part_Bg2=null,a.partSprite=null,a.lv_ImgFh=null,a.star_bg=null,a.record_btn=null,a.weekTwoTipNode=null,a.coinCount=null,a.powerNode=null,a.areaTitle=null,a.spineWeek=null,a.selectedFrame=null,a.weekBtn=null,a.actPage=null,a.btnSpine_chapter=[],a.scrollBeiginOffset=null,a.isTouchUp=!1,a.curChapter=1,a.curPart=1,a.isChangeOver=!0,a.scrollTime=null,a}return n(a,e),a.prototype.jumpView=function(e){"challenge"==e&&this.close()},a.prototype.onEnable=function(){var e=this;h.pzaWorldEventManager.addListener(h.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),this.part_Bg2.active=!0,this.coinCount.string=d.pzaUtil.getCurrencyStr(l.pzaLocalData.data.coin),this.partInit(),this.bookBtn.active=l.pzaLocalData.data.unlockBook,this.starCount.string=l.pzaLocalData.getAllStar()+"/"+p.pzaGameConfig.getAllPartStar(),this.curChapter=l.pzaLocalData.data.curChapter,this.curPart=l.pzaLocalData.data.curPart,h.pzaWorldEventManager.addListener(h.pzaWorldEventType.PARTVIEW_SCROLLTOCENTER,this.scrollToCenter,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_START,this.touchChapter1,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter1,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_END,this.clickChapter1,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_START,this.touchChapter2,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter2,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_END,this.clickChapter2,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_START,this.touchChapter3,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter3,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_END,this.clickChapter3,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_START,this.touchChapter4,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter4,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_END,this.clickChapter4,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_START,this.touchChapter5,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter5,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_END,this.clickChapter5,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_START,this.touchWeek1,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek1,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_END,this.clickWeek1,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_START,this.touchWeek2,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek2,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_END,this.clickWeek2,this),this.weekTwoTipNode.active=!1,this.weekBtn.active=l.pzaLocalData.data.passLastPart,l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.weekTwoOpenTip2&&(this.weekTwoTipNode.active=!0,this.weekTwoTipNode.angle=0,cc.Tween.stopAllByTarget(this.weekTwoTipNode),z.default.ani_JitterNode(this.weekTwoTipNode,.4,15,3,!0)),l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.weekTwoOpenTip2?(this.chapterCommon(null,5,10),this.initChapterNode(5,!1)):(this.chapterCommon(null,this.curChapter,this.curPart),this.initChapterNode(this.curChapter>5?this.curChapter-5:this.curChapter,!1)),this.playSwitchWeek(function(){},!1),this.scrollView.node.on("scrolling",function(){e.scrollView.isScrolling()&&(clearTimeout(e.scrollTime),e.scrollTime=setTimeout(function(){e.scrollEvent(null,9),e.scrollView.stopAutoScroll()},1500))})},a.prototype.onDisable=function(){h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.PARTVIEW_SCROLLTOCENTER,this.scrollToCenter,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_START,this.touchChapter1,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter1,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_END,this.clickChapter1,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_START,this.touchChapter2,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter2,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_END,this.clickChapter2,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_START,this.touchChapter3,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter3,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_END,this.clickChapter3,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_START,this.touchChapter4,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter4,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_END,this.clickChapter4,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_START,this.touchChapter5,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter5,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_END,this.clickChapter5,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_START,this.touchWeek1,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek1,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_END,this.clickWeek1,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_START,this.touchWeek2,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek2,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_END,this.clickWeek2,this),f.pzaChannel.instance().closeBanner()},a.prototype.partInit=function(){l.pzaLocalData.data.weekTwoOpenTip2?(this.part_Bg2.active=!0,this.part_Bg1.active=!1):(l.pzaLocalData.isWeekTwo=!0,this.part_Bg2.active=!1,this.part_Bg1.active=!0),this.spineWeek.playAnimation(l.pzaLocalData.isWeekTwo?"1zhoumu":"2zhoumu",!0)},a.prototype.scrollEvent=function(e,a){if(9!=a){var t=this.scrollView.getContentPosition();for(i=0;i<this.partItem.length;i++)(l=this.partItem[i])&&l.scrollMove(t.x)}else{for(var o=this.scrollView.getContentPosition(),n=-1,i=0;i<this.partItem.length;i++){var r=950-214.6*i,p=Math.abs(o.x-r);(-1==n||p<n)&&(n=p,this.curPart=i+1)}for(i=0;i<this.partItem.length;i++){var l;(l=this.partItem[i])&&l.updateStartGameNode(this.curPart)}this.scrollView.setContentPosition(cc.v2(950-214.6*(this.curPart-1),200))}},a.prototype.touchMove=function(){var e=this.scrollView.getScrollOffset();if(null!=e&&null!=this.scrollBeiginOffset){var a=e.x-this.scrollBeiginOffset.x;if(this.scrollBeiginOffset=null,!(Math.abs(a)<10)){var t=this.curPart;this.curPart=a>0?this.curPart-1:this.curPart+1,this.curPart<1&&(this.curPart=1),this.curPart>=10&&(this.curPart=10),this.scrollView.setContentPosition(cc.v2(950-214.6*(this.curPart-1),200));var o=this.partItem[t-1];o&&o.updateUI(this.curPart);var n=this.partItem[this.curPart-1];n&&n.updateUI(this.curPart)}}},a.prototype.selectChapter=function(e){var a=this;this.curChapter!=e?(s.pzaSoundManager.playAudio("gravebutton"),this.curChapter=e,this.curPart=1,this.initChapterNode(e>5?e-5:e),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,660)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){for(var e=0;e<a.partItem.length;e++){var t=a.partItem[e];t&&t.bindData(a.curChapter,e+1,a.curPart,e)}a.scrollView.setContentPosition(cc.v2(950-214.6*(a.curPart-1),200))}),cc.delayTime(.1),cc.callFunc(function(){s.pzaSoundManager.playAudio("chapterdown")}),cc.moveTo(.2,cc.v2(0,145)).easing(cc.easeCubicActionOut())))):this.initChapterNode(e>5?e-5:e)},a.prototype.clickHandBookBtn=function(){s.pzaSoundManager.playSFX(),u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.HANDBOOK_VIEW,function(e){var a=e&&e.getComponent(g.pzaHandbookView);a&&a.jdInit()})},a.prototype.initChapterNode=function(e,a){void 0===a&&(a=!0);var t=this.areaTitle.children[e-1];t&&(this.selectedFrame.parent=t,this.selectedFrame.rotation=0,this.selectedFrame.setPosition(-6,7),this.selectedFrame.active=t.active);for(var o=0;o<this.areaTitle.children.length;o++){var n=this.areaTitle.children[o];l.pzaLocalData.isWeekTwo?(n.children[0].active=!l.pzaLocalData.data.passWtLastPart&&l.pzaLocalData.data.curChapter==o+6,n.active=!(l.pzaLocalData.data.curChapter<o+6)):(n.children[0].active=!l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.curChapter==o+1,n.active=!(l.pzaLocalData.data.curChapter<o+1))}this.setBGAtta(e,a)},a.prototype.touchChapter1=function(){this.isChangeOver},a.prototype.clickChapter1=function(){if(this.isChangeOver){var e=l.pzaLocalData.isWeekTwo?6:1;this.selectChapter(e)}},a.prototype.touchChapter2=function(){this.isChangeOver},a.prototype.clickChapter2=function(){if(this.isChangeOver){var e=l.pzaLocalData.isWeekTwo?7:2;l.pzaLocalData.data.curChapter<e||this.selectChapter(e)}},a.prototype.touchChapter3=function(){this.isChangeOver},a.prototype.clickChapter3=function(){if(this.isChangeOver){var e=l.pzaLocalData.isWeekTwo?8:3;l.pzaLocalData.data.curChapter<e||this.selectChapter(e)}},a.prototype.touchChapter4=function(){this.isChangeOver},a.prototype.clickChapter4=function(){if(this.isChangeOver){var e=l.pzaLocalData.isWeekTwo?9:4;l.pzaLocalData.data.curChapter<e||this.selectChapter(e)}},a.prototype.touchChapter5=function(){this.isChangeOver},a.prototype.clickChapter5=function(){if(this.isChangeOver){var e=l.pzaLocalData.isWeekTwo?10:5;l.pzaLocalData.data.curChapter<e||this.selectChapter(e)}},a.prototype.touchWeek1=function(){},a.prototype.clickWeek1=function(){var e=this;this.isChangeOver=!1,l.pzaLocalData.isWeekTwo=!1,this.imgDiss(),this.playSwitchWeek(function(){e.imgShow(),e.initChapterNode(5),e.chapterCommon(function(){e.part_Bg2.active=!0,e.isChangeOver=!0,e.selectedFrame.active=!0},5,10,!0)}),this.spineWeek.playAnimation("2zhoumu",!0)},a.prototype.touchWeek2=function(){l.pzaLocalData.data.passLastPart||u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(b.pzaWarningView);a&&a.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-10\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},a.prototype.clickWeek2=function(){var e=this;l.pzaLocalData.data.passLastPart&&(this.isChangeOver=!1,this.weekTwoTipNode.active&&(this.weekTwoTipNode.active=!1,l.pzaLocalData.data.weekTwoOpenTip2=!1,l.pzaLocalData.addDirty("weekTwoOpenTip2")),l.pzaLocalData.isWeekTwo=!0,this.imgDiss(),c.pzaStatisticsMgr.sendEvent("System",{name:"system",value:1}),this.playSwitchWeek(function(){e.curChapter=l.pzaLocalData.data.curChapter,e.curPart=l.pzaLocalData.data.curPart,e.imgShow(),e.initChapterNode(e.curChapter>5?e.curChapter-5:e.curChapter),e.chapterCommon(function(){e.part_Bg1.active=!0,e.isChangeOver=!0,e.selectedFrame.active=!0},e.curChapter,e.curPart,!0)}),this.spineWeek.playAnimation("1zhoumu",!0))},a.prototype.playSwitchWeek=function(e,a){var t=this;if(void 0===a&&(a=!0),this.areaTitle.runAction(cc.fadeTo(.1,0)).clone(),this.selectedFrame.active=!0,this.selectedFrame.runAction(cc.fadeTo(.1,0)).clone(),a){for(var o=function(e){var a=n.btnSpine_chapter[e],t=e+1+"idle1",o=e+1+"idle3";a.playAnimation(l.pzaLocalData.isWeekTwo?"bg2":"bg1",!1,function(){a.playAnimation(o,!1);var e=a.spineAnimation.setAnimation(0,t,!1);e.animationStart=0,e.animationEnd=0},null,.5)},n=this,i=0;i<this.btnSpine_chapter.length;i++)o(i);this.btnSpine_bottom.playAnimation(l.pzaLocalData.isWeekTwo?"bg2":"bg1",!1,function(){},null,.5),this.btnSpine_bg.playAnimation(l.pzaLocalData.isWeekTwo?"bg2":"bg1",!1,function(){t.areaTitle.runAction(cc.fadeTo(.1,255)),t.selectedFrame.runAction(cc.fadeTo(.1,255)).clone(),e&&e()},null,.5)}else this.areaTitle.runAction(cc.fadeTo(.1,255)),this.selectedFrame.active=!0,this.selectedFrame.runAction(cc.fadeTo(.1,255)).clone(),e&&e()},a.prototype.setBGAtta=function(e,a){var t=this;if(void 0===a&&(a=!0),0==l.pzaLocalData.isWeekTwo){var o=!(l.pzaLocalData.data.curChapter<1),n=!(l.pzaLocalData.data.curChapter<2),i=!(l.pzaLocalData.data.curChapter<3),r=!(l.pzaLocalData.data.curChapter<4),p=!(l.pzaLocalData.data.curChapter<5);this.setAtta(this.btnSpine_chapter[0].spineAnimation,"1pr3",o),this.setAtta(this.btnSpine_chapter[1].spineAnimation,"1pr8",n),this.setAtta(this.btnSpine_chapter[2].spineAnimation,"1pr12",i),this.setAtta(this.btnSpine_chapter[3].spineAnimation,"1pr16",r),this.setAtta(this.btnSpine_chapter[4].spineAnimation,"1pr20",p)}else{var s=!(l.pzaLocalData.data.curChapter<6),c=!(l.pzaLocalData.data.curChapter<7),u=!(l.pzaLocalData.data.curChapter<8),d=!(l.pzaLocalData.data.curChapter<9),h=!(l.pzaLocalData.data.curChapter<10);this.setAtta(this.btnSpine_chapter[0].spineAnimation,"1pr3",s),this.setAtta(this.btnSpine_chapter[1].spineAnimation,"1pr8",c),this.setAtta(this.btnSpine_chapter[2].spineAnimation,"1pr12",u),this.setAtta(this.btnSpine_chapter[3].spineAnimation,"1pr16",d),this.setAtta(this.btnSpine_chapter[4].spineAnimation,"1pr20",h)}for(var m=function(o){var n=f.btnSpine_chapter[o],i=o+1+"idle1",r=o+1+"idle2",p=o+1+"idle3";if(o==e-1)C.pzaCommonMask.showMask(),a?f.btnSpine_chapter[e-1].playAnimation(i,!1,function(){C.pzaCommonMask.hideMask(),t.btnSpine_chapter[e-1].playAnimation(r,!0)}):f.btnSpine_chapter[e-1].playAnimation(r,!0),f.btnSpine_bottom.playAnimation(i,!1,function(){t.btnSpine_bottom.playAnimation(r,!0)});else if(n.spineAnimation.animation==r)if(a)n.playAnimation(p,!1);else{var l=n.spineAnimation.setAnimation(0,p,!1);l.animationStart=1,l.animationEnd=1}},f=this,z=0;z<this.btnSpine_chapter.length;z++)m(z)},a.prototype.setAtta=function(e,a,t){var o=e.findSlot(a),n=o.getAttachment();n.originWidth||(n.originWidth=n.width),n.originHeight||(n.originHeight=n.height),0==t?(n.width=0,n.height=0):(n.width=n.originWidth,n.height=n.originHeight),n.updateOffset(),o.setAttachment(n)},a.prototype.scrollToCenter=function(e){var a=e/(this.partItem.length-1);this.scrollView.scrollTo(cc.v2(a,0),.5)},a.prototype.chapterCommon=function(e,a,t,o){void 0===e&&(e=null),void 0===o&&(o=!1),this.scrollView.setContentPosition(cc.v2(950-214.6*(t-1),200)),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.sequence(cc.delayTime(o?0:.5),cc.moveTo(o?.1:.2,cc.v2(0,145)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){s.pzaSoundManager.playAudio("chapterdown"),e&&e()}))),l.pzaLocalData.isWeekTwo||(a=a>5?a-5:a),this.refreshItem(a,t)},a.prototype.refreshItem=function(e,a){for(var t=this,o=0;o<this.partItem.length;o++){var n=this.partItem[o];n&&(n.bindData(e,o+1,a,o),n.bindStartGameCall(function(){f.pzaChannel.instance().closeBanner(),t.close()}))}},a.prototype.bgMove=function(e,a,t){t()},a.prototype.imgDiss=function(){this.part_Bg1.active=!1,this.part_Bg2.active=!1,this.partSprite.active=!1,this.lv_ImgFh.active=!1,this.star_bg.active=!1,this.powerNode.active=!1,this.scrollView.node.y=660},a.prototype.imgShow=function(){this.partSprite.active=!0,this.lv_ImgFh.active=!0,this.star_bg.active=!0,this.powerNode.active=!0},a.prototype.clickback=function(){var e=this;f.pzaChannel.instance().closeBanner(),s.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.2,cc.v2(0,660))),z.default.sendMsg("backHome"),u.pzaUIManager.aniHidePopUI(function(){e.close(),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_RECORD_STATE,null),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.BACK_HOMEVIEW,null)})},a.prototype.clickPower=function(){u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.POWER_VIEW,function(e){var a=e&&e.getComponent(v.pzaPowerView);a&&a.bindData("\u8865\u5145\u4f53\u529b",function(){var e;e=l.pzaLocalData.data.power+l.pzaLocalData.addPowerValue,l.pzaLocalData.data.power=e,l.pzaLocalData.addDirty("power"),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_POWER,null)},null)})},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([_({displayName:"\u7ae0\u8282\u6309\u94ae\u8282\u70b9",type:[cc.Node]})],a.prototype,"chapterBtnNode",void 0),i([_({displayName:"\u661f\u661f\u6570\u91cf",type:cc.Label})],a.prototype,"starCount",void 0),i([_({displayName:"\u5173\u5361Item",type:[y.default]})],a.prototype,"partItem",void 0),i([_({displayName:"\u6eda\u52a8\u5bb9\u5668",type:cc.ScrollView})],a.prototype,"scrollView",void 0),i([_({displayName:"\u6eda\u52a8content",type:cc.Node})],a.prototype,"scrollViewContent",void 0),i([_({displayName:"\u56fe\u9274\u6309\u94ae",type:cc.Node})],a.prototype,"bookBtn",void 0),i([_(cc.Node)],a.prototype,"part_Bg1",void 0),i([_(cc.Node)],a.prototype,"part_Bg2",void 0),i([_(cc.Node)],a.prototype,"partSprite",void 0),i([_(cc.Node)],a.prototype,"lv_ImgFh",void 0),i([_(cc.Node)],a.prototype,"star_bg",void 0),i([_(cc.Node)],a.prototype,"record_btn",void 0),i([_(cc.Node)],a.prototype,"weekTwoTipNode",void 0),i([_({displayName:"\u91d1\u5e01",type:cc.Label})],a.prototype,"coinCount",void 0),i([_({displayName:"\u4f53\u529b\u8282\u70b9",type:cc.Node})],a.prototype,"powerNode",void 0),i([_(cc.Node)],a.prototype,"areaTitle",void 0),i([_(P.pzaSpineController)],a.prototype,"spineWeek",void 0),i([_(cc.Node)],a.prototype,"selectedFrame",void 0),i([_(cc.Node)],a.prototype,"weekBtn",void 0),i([_({displayName:"\u6d3b\u52a8\u8f6e\u64ad",type:cc.PageView})],a.prototype,"actPage",void 0),i([_({type:P.pzaSpineController})],a.prototype,"btnSpine_bg",void 0),i([_({type:P.pzaSpineController})],a.prototype,"btnSpine_bottom",void 0),i([_({type:[P.pzaSpineController]})],a.prototype,"btnSpine_chapter",void 0),i([S],a)}(cc.Component);t.default=D,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaGuanKaItemView":"pzaGuanKaItemView","./pzaHandbookView":"pzaHandbookView","./pzaPowerView":"pzaPowerView","./pzaWarningView":"pzaWarningView"}],pzaPeaBullet:[function(e,a,t){"use strict";cc._RF.push(a,"ff576r5pupJj4CweHFNsimX","pzaPeaBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPeaBullet=t.pzaBulletState=void 0;var r,p=e("../../Common/pzaGroupEnum"),l=e("../../Common/pzaSoundManager"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaZombieEnum"),u=e("../Plant/pzaPlantBody"),d=e("../Zombie/pzaZombieBody"),h=e("../pzaGameState"),m=e("./pzaBulletAnimator"),f=e("./pzaBaseBullet");(function(e){e[e.ice=0]="ice",e[e.normal=1]="normal",e[e.fire=2]="fire"})(r=t.pzaBulletState||(t.pzaBulletState={}));var z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.aniNode=null,a.bulletAni=null,a.bulletLevel=r.ice,a.colliderWoods=new Set,a}return n(a,e),a.prototype.init=function(a,t,o,n,i,r){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),e.prototype.init.call(this,a,t,o,n,i),this.bulletLevel=o,this.colliderWoods.clear(),i.x<0?this.node.scaleX=-1:this.node.scaleX=1,r&&(this.aniNode&&this.aniNode.destroy(),this.aniNode=cc.instantiate(r.node)),this.aniNode&&(this.aniNode.parent=this.node,this.aniNode.setPosition(0,0),this.bulletAni=this.aniNode.getComponent(m.pzaBulletAnimator),this.bulletAni.init(!0,o,this.rotateSpeed),this.refreshBulletState())},a.prototype.setRotateSpeed=function(e){this.rotateSpeed=e,this.bulletAni&&(this.bulletAni.rotateSpeed=e)},a.prototype.setSpeed=function(e){this.speed=e},a.prototype.onCollision=function(e){if(null!=e){if(e.node.group==p.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(d.pzaZombieBody);this.colliderZombie(a&&a.baseData)}e.node.group!=p.pzaGroupEnum.TORCHWOOD||this.colliderWoods.has(e)||this.colliderTorchWood(e)}},a.prototype.colliderTorchWood=function(e){var a=e&&e.node.getComponent(u.pzaPlantBody);null==a||null==a.baseData||a.baseData.isDead||this.bulletLevel>=r.fire||(this.bulletLevel==r.ice?this.bulletLevel=r.normal:this.bulletLevel===r.normal&&(this.bulletLevel=r.fire,l.pzaSoundManager.playAudio("Torchwood",.5)),this.colliderWoods.add(e),this.refreshBulletState())},a.prototype.refreshBulletState=function(){this.bulletAni&&this.bulletAni.setBulletState(this.bulletLevel)},a.prototype.colliderZombie=function(e){e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==c.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&(e.zombieData&&e.zombieData.hypnosis||!this.ignoreDive&&e.buffData.hasBuff(s.pzaBuffType.DIVE)||e.buffData.hasBuff(s.pzaBuffType.FLY)||e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||(this.bulletLevel==r.ice?this.frostColliderZombie(e):this.bulletLevel==r.normal?this.normalColliderZombie(e):this.fireColliderZombie(e)))},a.prototype.normalColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&(a.hurt(this.atk),2===this.node.scale&&a.pushBack(.2),this.close(),this.playHitEffect(e))},a.prototype.fireColliderZombie=function(e){var a=this,t=window.pzazombieManager.getZombie(e);if(2===this.node.scale?(t.pushBack(.2),t&&t.hurt(2*this.atk)):t&&t.hurt(40),e.buffData.removeBuff(s.pzaBuffType.FROST),e.buffData.removeBuff(s.pzaBuffType.FROZEN),this.close(),this.playHitEffect(e),l.pzaSoundManager.playAudio("firepeaHit",.5),!t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_SPATTER)){var o=window.pzazombieManager.findFixRangeZombies(e.logicPos,.5*h.pzaGameState.map.getBlockWidth());o&&o.forEach(function(t){null!=t&&t.baseData!=e&&(e.buffData.hasBuff(s.pzaBuffType.FLY)||!a.ignoreDive&&e.buffData.hasBuff(s.pzaBuffType.DIVE)||e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||t.hurt(13))})}},a.prototype.playHitEffect=function(e){this.bulletAni&&this.bulletAni.showPeaHitEffect(e)},a.prototype.setRotation=function(e){var a=this.bulletAni.getPlayingSP();a&&(a.node.rotation=e)},i([g({displayName:"\u5b50\u5f39\u52a8\u753b\u7ba1\u7406\u5668",type:cc.Node})],a.prototype,"aniNode",void 0),i([y],a)}(f.pzaBaseBullet);t.pzaPeaBullet=v,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState","./pzaBaseBullet":"pzaBaseBullet","./pzaBulletAnimator":"pzaBulletAnimator"}],pzaPeaFireBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"df00122vN9KZoblfqmpGDzr","pzaPeaFireBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPeaFireBaseBullet=void 0;var r=e("../../Common/pzaGroupEnum"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../pzaEffectManager"),u=e("../Zombie/pzaZombieBody"),d=e("./pzaBaseBullet"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.fireBall=null,a.iceFireBall=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.fireBall.active=!0,this.iceFireBall.active=!1},a.prototype.update=function(){this.fireBall.angle-=10},a.prototype.onCollision=function(e){if(null!=e&&!this.hasColl)if(e.node.group!=r.pzaGroupEnum.ZOMBIE);else{var a=e.node.getComponent(u.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){if(e&&!e.isDead)if(null!=e.zombieData){if(e.zombieData&&e.zombieData.hypnosis)this.close();else if(e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE))this.close();else if(!e.buffData.hasBuff(s.pzaBuffType.DIVE)){var a=window.pzazombieManager.getZombie(e);null!=a?(this.fireColliderZombie(e),a.hurt(this.atk),this.close()):this.close()}}else this.close()},a.prototype.fireColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&a.hurt(40),e.buffData.removeBuff(s.pzaBuffType.FROST),e.buffData.removeBuff(s.pzaBuffType.FROZEN),this.close(),this.playHitEffect(e),p.pzaSoundManager.playAudio("firepeaHit",.5),a.baseData.buffData.hasBuff(s.pzaBuffType.IMM_SPATTER)},a.prototype.playHitEffect=function(e){var a=cc.v2(this.node.x,this.node.y);null!=e&&(e.yIndex,a=cc.v2(e.logicPos.x,e.logicPos.y+70)),c.pzaEffectManager.createBoomFireEffect(5,0,a,null)},a.prototype.playFrozenSound=function(){var e="frozen_"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(e)},i([f({displayName:"\u91d1\u7b8d\u8282\u70b9",type:cc.Node})],a.prototype,"fireBall",void 0),i([f({displayName:"\u51b0\u706b\u91d1\u7b8d\u8282\u70b9",type:cc.Node})],a.prototype,"iceFireBall",void 0),i([m],a)}(d.pzaBaseBullet);t.pzaPeaFireBaseBullet=z,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaBaseBullet":"pzaBaseBullet"}],pzaPeaFireTrackBullet:[function(e,a,t){"use strict";cc._RF.push(a,"1fb6e3Jc+BJ05p0Khnl9gKX","pzaPeaFireTrackBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPeaFireTrackBullet=void 0;var r=e("../../Common/pzaGroupEnum"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../pzaEffectManager"),u=e("../Zombie/pzaZombieBody"),d=e("./pzaTrackBullet"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.fireBall=null,a.iceFireBall=null,a.isIceFireBall=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.isIceFireBall=!1,this.fireBall.active=!0,this.iceFireBall.active=!1},a.prototype.update=function(){this.isIceFireBall?this.iceFireBall.angle-=10:this.fireBall.angle-=10},a.prototype.onCollision=function(e){if(null!=e&&!this.hasColl)if(e.node.group!=r.pzaGroupEnum.ZOMBIE);else{var a=e.node.getComponent(u.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){if(e&&!e.isDead)if(null!=e.zombieData){if(e.zombieData&&e.zombieData.hypnosis)this.close();else if(e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE))this.close();else if(!e.buffData.hasBuff(s.pzaBuffType.DIVE)){var a=window.pzazombieManager.getZombie(e);null!=a?(this.isIceFireBall?this.iceFireColliderZombie(e):this.fireColliderZombie(e),a.hurt(this.atk),this.close()):this.close()}}else this.close()},a.prototype.fireColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&a.hurt(40),e.buffData.removeBuff(s.pzaBuffType.FROST),e.buffData.removeBuff(s.pzaBuffType.FROZEN),this.close(),this.playHitEffect(e),p.pzaSoundManager.playAudio("firepeaHit",.5),a.baseData.buffData.hasBuff(s.pzaBuffType.IMM_SPATTER)},a.prototype.iceFireColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&(a&&a.hurt(40),this.close(),this.playHitEffect(e),a.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(s.pzaBuffType.HARD_BODY)||a.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE_PEA)||(e.buffData.hasBuff(s.pzaBuffType.FROST)||this.playFrozenSound(),e.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,10,.5))))},a.prototype.playHitEffect=function(e){var a=cc.v2(this.node.x,this.node.y);null!=e&&(e.yIndex,a=cc.v2(e.logicPos.x,e.logicPos.y+70)),0==this.isIceFireBall?c.pzaEffectManager.createBoomFireEffect(5,0,a,null):this.isIceFireBall&&c.pzaEffectManager.createBoomFireEffect(5,0,a,null,!0)},a.prototype.playFrozenSound=function(){var e="frozen_"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(e)},i([f({displayName:"\u706b\u7403\u8282\u70b9",type:cc.Node})],a.prototype,"fireBall",void 0),i([f({displayName:"\u51b0\u706b\u7403\u8282\u70b9",type:cc.Node})],a.prototype,"iceFireBall",void 0),i([m],a)}(d.pzaTrackBullet);t.pzaPeaFireTrackBullet=z,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaTrackBullet":"pzaTrackBullet"}],pzaPeaTrackBullet:[function(e,a,t){"use strict";cc._RF.push(a,"84fc5q04nNCj7/0zllpnnRq","pzaPeaTrackBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPeaTrackBullet=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaGroupEnum"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../../Common/pzaUtil"),u=e("../Data/pzaBuffData"),d=e("../Effect/pzaBaseEffect"),h=e("../Plant/pzaPlantBody"),m=e("../Zombie/pzaZombieBody"),f=e("../pzaEffectManager"),z=e("../pzaGameState"),y=e("./pzaTrackBullet"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.frostBulletNode=null,a.frostEffect=null,a.normalBulletNode=null,a.fireBulletNode=null,a.snowHitPrefab=null,a.hitPrefab=null,a.fireBall=null,a.iceFireBall=null,a.bulletLevel=0,a.frozeTime=10,a.colliderWoods=new Set,a}return n(a,e),a.prototype.init=function(a,t,o,n){e.prototype.init.call(this,a,t,o,n),this.colliderWoods.clear(),this.refreshBulletState()},a.prototype.setBulletLevel=function(e){this.bulletLevel=e,this.refreshBulletState()},a.prototype.onCollision=function(e){if(null!=e&&!this.hasColl){if(e.node.group==p.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(m.pzaZombieBody);this.colliderZombie(a&&a.baseData)}e.node.group!=p.pzaGroupEnum.TORCHWOOD||this.colliderWoods.has(e)||this.colliderTorchWood(e)}},a.prototype.colliderTorchWood=function(e){var a=e&&e.node.getComponent(h.pzaPlantBody);null==a||null==a.baseData||a.baseData.isDead||this.bulletLevel>=2||(this.bulletLevel++,this.colliderWoods.add(e),this.refreshBulletState(),this.bulletLevel>=2&&s.pzaSoundManager.playAudio("Torchwood",.5))},a.prototype.refreshBulletState=function(){this.frostBulletNode.active=0==this.bulletLevel,this.frostEffect.active=0==this.bulletLevel,this.normalBulletNode.active=1==this.bulletLevel,this.fireBulletNode.active=2==this.bulletLevel,this.iceFireBall.active=3==this.bulletLevel},a.prototype.colliderZombie=function(e){e&&!e.isDead&&(e.zombieData&&e.zombieData.hypnosis||e.buffData.hasBuff(u.pzaBuffType.DIVE)||e.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(0==this.bulletLevel?this.frostColliderZombie(e):1==this.bulletLevel?this.normalColliderZombie(e):3==this.bulletLevel?this.iceFireColliderZombie(e):this.fireColliderZombie(e)))},a.prototype.normalColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&(a.hurt(this.atk),2===this.node.scale&&a.pushBack(.2),this.close(),this.playHitEffect(e))},a.prototype.frostColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&(a.hurt(this.atk),this.close(),this.playHitEffect(e),a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE_PEA)||(e.buffData.hasBuff(u.pzaBuffType.FROST)||this.playFrozenSound(),e.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,this.frozeTime,.5))))},a.prototype.fireColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);if(a&&a.hurt(40),e.buffData.removeBuff(u.pzaBuffType.FROST),e.buffData.removeBuff(u.pzaBuffType.FROZEN),this.close(),this.playHitEffect(e),s.pzaSoundManager.playAudio("firepeaHit",.5),!a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_SPATTER)){var t=window.pzazombieManager.findFixRangeZombies(e.logicPos,.5*z.pzaGameState.map.getBlockWidth());t&&t.forEach(function(a){null!=a&&a.baseData!=e&&(e.buffData.hasBuff(u.pzaBuffType.FLY)||e.buffData.hasBuff(u.pzaBuffType.DIVE)||e.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||a.hurt(13))})}},a.prototype.iceFireColliderZombie=function(e){var a=window.pzazombieManager.getZombie(e);a&&(2===this.node.scale?(a.pushBack(.2),a&&a.hurt(2*this.atk)):a&&a.hurt(40),this.close(),this.playHitEffect(e),a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||a.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE_PEA)||(e.buffData.hasBuff(u.pzaBuffType.FROST)||this.playFrozenSound(),e.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,10,.5))))},a.prototype.playHitEffect=function(e){var a=5,t=cc.v2(this.node.x,this.node.y);null!=e&&(a=10*-e.yIndex+5,t=cc.v2(e.logicPos.x,e.logicPos.y+70)),2==this.bulletLevel?f.pzaEffectManager.createBoomFireEffect(this.yIndex,0,t,null):3==this.bulletLevel&&f.pzaEffectManager.createBoomFireEffect(this.yIndex,0,t,null,!0);var o=l.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=r.pzaGameCommonPool.requestInstant2(0==this.bulletLevel?this.snowHitPrefab:this.hitPrefab);n.setParent(o),n.zIndex=a,n.setPosition(t);var i=n.getComponent(d.pzaBaseEffect);i&&i.showEffect(null,null)}},a.prototype.playFrozenSound=function(){var e="frozen_"+c.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(e)},a.prototype.update=function(){this.fireBulletNode.active&&(this.fireBall.angle-=10)},i([b({displayName:"\u51b0\u971c\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"frostBulletNode",void 0),i([b({displayName:"\u51b0\u971c\u5b50\u5f39\u7279\u6548",type:cc.Node})],a.prototype,"frostEffect",void 0),i([b({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"normalBulletNode",void 0),i([b({displayName:"\u706b\u7130\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"fireBulletNode",void 0),i([b({displayName:"\u51b0\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],a.prototype,"snowHitPrefab",void 0),i([b({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],a.prototype,"hitPrefab",void 0),i([b(cc.Node)],a.prototype,"fireBall",void 0),i([b({displayName:"\u51b0\u706b\u5b50\u5f39",type:cc.Node})],a.prototype,"iceFireBall",void 0),i([v],a)}(y.pzaTrackBullet);t.pzaPeaTrackBullet=P,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaTrackBullet":"pzaTrackBullet"}],pzaPeaZombie:[function(e,a,t){"use strict";cc._RF.push(a,"f2ddfXdJO5NHYe/+l4mt4b8","pzaPeaZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPeaZombie=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../Bullet/pzaZombieBaseBullet"),u=e("../Data/pzaPlantEnum"),d=e("../pzaGameState"),h=e("../pzaSpineTool"),m=e("./pzaNormalZombie"),f=e("./pzaZombieSlot"),z=e("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletPrefab=null,a.plantBltPre=null,a.equip1Slot=null,a.hatSlotMap=new Map([]),a.garlicSkinName=null,a}return n(a,e),a.prototype.bindData=function(a,t){e.prototype.bindData.call(this,a,t),this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var o=this.animation.findBone("aduck");this.hasUseSrAni?o&&(o.scaleX=.158,o.scaleY=.158):o&&(o.scaleX=0,o.scaleY=0)},a.prototype.initEquips=function(){if(this.slotMap)this.slotMap.forEach(function(e){e.updateState(0,!0)});else{if(!this.baseData||!this.baseData.zombieData)return;this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,61.81,13.02,-93.13))]]);var e=this.hatSlotMap.get(this.baseData.zombieData.zombieType);e&&(this.equip1Slot=e.slotName,this.slotMap.set(e.slotName,new f.pzaZombieSlot(this.animation.spineAnimation,e.slotName).addState(new f.pzaZombieSlotAtt(1,e.attNameArr[0],e.arr1[0],e.arr1[1],e.arr1[2])).addState(new f.pzaZombieSlotAtt(2,e.attNameArr[1],e.arr2[0],e.arr2[1],e.arr2[2])).addState(new f.pzaZombieSlotAtt(3,e.attNameArr[2],e.arr3[0],e.arr3[1],e.arr3[2]))))}},a.prototype.uiShow=function(){this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.refreshFrostState(!0),this.animation.playAnimation("idle",!0,null,null,.5),this.refreshHurtState(!0),this.randomZombieSkin()},a.prototype.playMoveAnimation=function(){var e=this,a=this.getMoveAniName();a!=this.animation.spineAnimation.animation&&(this.zombieState=z.pzaZombieState.MOVE,this.animation.playAnimation(a,!0,null,function(a,t){t&&"attack"==t.data.name&&e.shoot()},1))},a.prototype.playAttakAnimation=function(){var e=this;this.zombieState=z.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var a=e.findTarget();if(null!=a&&!a.isDead&&null!=a.plantData&&a.plantData.plantType==u.pzaPlantEnum.HYPNO_SHROOM&&!a.plantData.sleeping){l.pzaSoundManager.playAudio("floop"),l.pzaSoundManager.playAudio("mindcontrolled"),a.isDead=!0,window.pzazombieManager.zombieHypnosis(e.baseData);var t=window.pzaplantManager.getPlantByData(a);t&&t.close(),window.pzaplantManager.removePlant(a)}})},a.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(e){l.pzaSoundManager.playAudio("PeashooterAtk");var a=null;(a=this.baseData.zombieData.canAtkZombie?r.pzaGameCommonPool.requestInstant2(this.plantBltPre):r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)).setParent(e);var t=h.pzaSpineTool.findBonePos(this.animation.spineAnimation,"1head1",this.node),o=e.convertToNodeSpaceAR(t);o.y-=15,a.setPosition(o);var n=null;this.baseData.zombieData.canAtkZombie?(n=a.getComponent(s.pzaBaseBullet)).init(this.baseData.yIndex,20,1):(n=a.getComponent(c.pzaZombieBaseBullet)).init(this.baseData.yIndex,20);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}},a.prototype.updateMove=function(a){e.prototype.updateMove.call(this,a)},i([v(cc.Prefab)],a.prototype,"bulletPrefab",void 0),i([v(cc.Prefab)],a.prototype,"plantBltPre",void 0),i([g],a)}(m.pzaNormalZombie);t.pzaPeaZombie=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPeashooter:[function(e,a,t){"use strict";cc._RF.push(a,"136e0qMLeFJNLvOV19FzBd4","pzaPeashooter");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPeashooter=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../Bullet/pzaBaseBullet"),u=e("../Data/pzaBuffData"),d=e("../pzaGameState"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a}return n(a,e),a.prototype.playIdleAni=function(){var e=this,a=function(){window.pzazombieManager.hasCanAttackZombie(e.baseData)||e.findAttackTarget()?e.animation.playAnimation(r.pzaPlantSkName.COMMON.attack,!1,a,function(){s.pzaSoundManager.playAudio("PeashooterAtk"),e.shoot()}):e.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!1,a)};a()},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playIdleAni(),d.pzaGameState.usePeaPlant=!0,d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.onlyShroomCofee=!1},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=l.pzaNodeManager.getBulletNode();if(null!=e){var a=p.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},a.prototype.findAttackTarget=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:e.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([f],a)}(h.pzaBasePlant);t.pzaPeashooter=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPenetrateBullet:[function(e,a,t){"use strict";cc._RF.push(a,"772663ucSZBjbqxXMsRx8nq","pzaPenetrateBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPenetrateBullet=void 0;var r=e("../Data/pzaBuffData"),p=e("../Data/pzaZombieEnum"),l=e("../Plant/pzaAttackType"),s=e("./pzaBaseBullet"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(){},a.prototype.colliderZombie=function(e){if(e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&!e.buffData.hasBuff(r.pzaBuffType.DIVE)&&!e.buffData.hasBuff(r.pzaBuffType.UNABLE_SELECT)&&(this.isInAir||!e.buffData.hasBuff(r.pzaBuffType.FLY))&&(!this.isInAir||e.buffData.hasBuff(r.pzaBuffType.FLY))&&!(e.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||e.zombieData&&e.zombieData.hypnosis)){var a=window.pzazombieManager.getZombie(e);null!=a&&(a.hurt(this.atk,null,l.pzaAttackType.PENETRATE),this.penetrate||this.close(),this.penetrate&&this.penetrateCnt>0&&(this.penetrateCnt--,window.pzazombieManager.getZombie(e).pushBack(.15),this.penetrateCnt<=0&&(this.penetrate=!1,this.close())),this.playHitEffect(e))}},i([u],a)}(s.pzaBaseBullet));t.pzaPenetrateBullet=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseBullet":"pzaBaseBullet"}],pzaPhoenixBullet:[function(e,a,t){"use strict";cc._RF.push(a,"e0813oArHpPd7+5kxa/Q2mI","pzaPhoenixBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPhoenixBullet=void 0;var p=e("../Data/pzaBuffData"),l=e("../pzaEffectManager"),s=e("../pzaGameState"),c=e("./pzaThrowBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.init=function(a,t,o,n,i,r,p,l,s,c){if(e.prototype.init.call(this,a,t,o,n,i,r,p,l,s,c),this.bulletAni){this.bulletAni.node.stopAllActions();var u=cc.rotateTo(this.maxLifeTime,100).easing(cc.easeOut(2));this.bulletAni.node.runAction(u)}},a.prototype.setFire=function(e){this.pos=e},a.prototype.logicUpdate=function(e){if(this.lifeTime+=e,this.leftThrowTime-=e,this.lifeTime>=this.maxLifeTime)return this.hitZombie(),void this.close();this.updateMove(e)},a.prototype.close=function(){e.prototype.close.call(this)},a.prototype.createBoomFireEffect=function(e,a,t){if(!(e>s.pzaGameState.map.getMapColumn())){var o=s.pzaGameState.map.getBlockLogicPos(e,a,0,0);s.pzaGameState.map.fixMapYOffset(a,o,0),l.pzaEffectManager.createBoomFireEffect(a,t,o,null)}},a.prototype.hitZombie=function(){var e,a;this.createBoomFireEffect(this.pos.xIndex+1,this.pos.yIndex,.7),this.createBoomFireEffect(this.pos.xIndex+2,this.pos.yIndex,.7),this.createBoomFireEffect(this.pos.xIndex+3,this.pos.yIndex,.7);var t=this.getCanAttackZombies(0,2);try{for(var o=r(t),n=o.next();!n.done;n=o.next()){var i=n.value,p=window.pzazombieManager.getZombie(i);if(!p)return;p.hurt(this.atk)}}catch(l){e={error:l}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}},a.prototype.getCanAttackZombies=function(e,a){var t=this,o=s.pzaGameState.map.getXInterval(this.pos.xIndex)/2,n=s.pzaGameState.map.getYInterval(this.pos.yIndex)/3;s.pzaGameState.isRoofMode()&&(n=s.pzaGameState.map.getYInterval(this.pos.yIndex)/6);var i=s.pzaGameState.map.getBlockLogicPos(this.pos.xIndex,this.pos.yIndex,o,n),r=[];return window.pzazombieManager.zombieDatas[this.pos.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<i.x||o.buffData.hasBuff(p.pzaBuffType.DIVE)||o.buffData.hasBuff(p.pzaBuffType.FLY)||o.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)||!(o.xIndex<=-1)&&t.pos.xIndex+e<=o.xIndex&&t.pos.xIndex+a>=o.xIndex&&r.push(o)}),r},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.bulletAni&&this.bulletAni.node.resumeAllActions()},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.bulletAni&&this.bulletAni.node.pauseAllActions()},a.prototype.updateMove=function(a){e.prototype.updateMove.call(this,a)},a.prototype.colliderZombie=function(){},i([d],a)}(c.pzaThrowBullet));t.pzaPhoenixBullet=h,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaThrowBullet":"pzaThrowBullet"}],pzaPhoenix:[function(e,a,t){"use strict";cc._RF.push(a,"be7f9AmsxdNUYNlQqlXrKrp","pzaPhoenix");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPhoenix=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../Bullet/pzaPhoenixBullet"),s=e("./pzaAttackType"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attackCount=0,a.canSpeAtttack=!1,a.speAtkRequire=60,a}return n(a,e),a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playNormalAni(),this.attackCount=0},a.prototype.playNormalAni=function(){var e=this,a=function(){e.attackTarget(a)||e.animation.playAnimation("idle",!1,a)};this.attackTarget(a)||this.animation.playAnimation("idle",!1,a)},a.prototype.attackTarget=function(e){var a=this,t=window.pzazombieManager.getCanAttackZombies(this.baseData,2.5);return this.canSpeAtttack&&t&&t.length>0?(this.canSpeAtttack=!1,this.animation.playAnimation("attack2",!1,e,function(){if(console.log("phoenix speAttack"),null==a.baseData||a.baseData.isDead)return!0;a.shot(t[0])},1.5),!0):t&&t.length>0?(this.animation.playAnimation("attack",!1,e,function(){if(null==a.baseData||a.baseData.isDead)return!0;a.hurtZombies(t),a.attackCount++,a.attackCount%a.speAtkRequire==0&&(a.canSpeAtttack=!0)},1.5),!0):void 0},a.prototype.hurtZombies=function(e,a){var t=this;void 0===a&&(a=this.baseData.atk),null!=e&&e.forEach(function(e){if(null!=t.baseData){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(a,t.baseData,s.pzaAttackType.FLOOR_ATK)}})},a.prototype.shot=function(e){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=window.pzazombieManager.getZombie(e);if(null!=t){var o=t.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=a.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var s=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(a);var c=cc.v2(s.x+this.baseData.logicPos.x+16,s.y+this.baseData.logicPos.y+57);i.setPosition(c);var u=i.getComponent(l.pzaPhoenixBullet);null!=u&&(u.maxLifeTime=1,u.init(this.getBulletAni(),!1,this.baseData.yIndex,1800,e,n,-1,!0),u.setFire({xIndex:this.baseData.xIndex,yIndex:this.baseData.yIndex}),u.hasSpatter=!0,u.hasFrost=!0)}}}}}},i([h({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([h({type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([d],a)}(c.pzaBasePlant);t.pzaPhoenix=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaPhoenixBullet":"pzaPhoenixBullet","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPieceSummonConf:[function(e,a,t){"use strict";cc._RF.push(a,"b66e2jk0/5C9pmBlXpOJay2","pzaPieceSummonConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPieceSummonConf=void 0;t.pzaPieceSummonConf=function(e){this.id=0,this.name="",this.amount=0,this.weight=0,this.prizeAmount=0,this.rewardType=0,this.id=e.id,this.name=e.name||"",this.amount=e.amount||0,this.weight=e.weight||0,this.prizeAmount=e.prizeAmount||0,this.rewardType=e.rewardType||0},cc._RF.pop()},{}],pzaPitchFork:[function(e,a,t){"use strict";cc._RF.push(a,"1221fKj2XpJZoVlAQRLW44u","pzaPitchFork");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPitchFork=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGroupEnum"),s=e("../../Common/pzaSpineController"),c=e("../Data/pzaBuffData"),u=e("../Plant/pzaAttackType"),d=e("../Zombie/pzaZombieBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a.yIndex=-1,a.hasTrigger=!1,a.collider=null,a}return n(a,e),a.prototype.init=function(e){this.yIndex=e,this.hasTrigger=!1,this.ani.playAnimation("idle",!0),p.pzaCollisionManager.getInstance.addBulletByRow(this.yIndex,this)},a.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletByRow(this.yIndex,this),e.prototype.close.call(this)},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.onCollision=function(e){if(null!=e&&e.node.group==l.pzaGroupEnum.ZOMBIE){var a=e.node.getComponent(d.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){var a=this;this.hasTrigger||!e||e.isDead||-1!=this.yIndex&&this.yIndex!=e.yIndex||e.buffData.hasBuff(c.pzaBuffType.DIVE)||e.buffData.hasBuff(c.pzaBuffType.FLY)||e.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||e.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)||e.zombieData&&e.zombieData.hypnosis||(this.hasTrigger=!0,p.pzaCollisionManager.getInstance.delBulletByRow(this.yIndex,this),this.ani.playAnimation("attack",!1,function(){a.close()},function(){console.log("pitchfork attack event");var a=window.pzazombieManager.getZombie(e);a&&a.hurt(5e4,u.pzaAttackType.NORMAL_BOOM)}))},a.prototype.pauseSelf=function(){this.hasTrigger&&this.ani.pauseAnimation()},a.prototype.resumeSelf=function(){this.hasTrigger&&this.ani.resumeAnimation()},i([f({displayName:"\u53c9\u5b50\u52a8\u753b",type:s.pzaSpineController})],a.prototype,"ani",void 0),i([m],a)}(r.pzaBaseComponent);t.pzaPitchFork=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaPlantBeltView:[function(e,a,t){"use strict";cc._RF.push(a,"d48aaIGJ4JNFaarGyGIrRf1","pzaPlantBeltView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantBeltView=void 0;var r=e("../../Battle/Data/pzaPlantEnum"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaBeltConfig"),s=e("../../Common/pzaGameCommonPool"),c=e("../../Common/pzaUtil"),u=e("../../Common/pzaWorldEventManager"),d=e("../../Load/pzaPreLoadManager"),h=e("./pzaBeltCard"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.boardNode=null,a.belt1=null,a.belt2=null,a.cardContent=null,a.beltCardPre=null,a.beltSpeed=85,a.beltOriPos=null,a.beltCardList=[],a.createInterval=4,a.beltPause=!1,a.lastBeltPlant=null,a.totalCount=0,a}return n(a,e),a.prototype.onEnable=function(){u.pzaWorldEventManager.addListener(u.pzaWorldEventType.PLANT_PLANT,this.plantCall,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},a.prototype.onDisable=function(){this.clearBeltCard(),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.PLANT_PLANT,this.plantCall,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},a.prototype.onLoad=function(){this.beltOriPos=cc.v2(this.belt1.x,this.belt1.y)},a.prototype.showView=function(e){this.belt1.setPosition(this.beltOriPos.clone()),this.belt2.setPosition(cc.v2(this.beltOriPos.x,this.beltOriPos.y-this.belt1.height)),this.totalCount=0,this.beltPause=!1,this.lastBeltPlant=null,this.boardNode.stopAllActions(),this.boardNode.setPosition(cc.v2(-200,0)),this.boardNode.runAction(cc.sequence(cc.moveTo(.2,cc.v2()),cc.callFunc(function(){e&&e()})));var a=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);this.createInterval=null!=a?l.pzaBeltConfig.InitCardInterval:l.pzaBeltConfig.getFirstCardInterval(p.pzaGameState.curChapter,p.pzaGameState.curPart),d.pzaPreLoadManager.preLoadPrefabByPlantList(l.pzaBeltConfig.getBeltPlants(p.pzaGameState.curChapter,p.pzaGameState.curPart),function(){console.warn("\u9884\u52a0\u8f7d\u4f20\u9001\u5e26\u690d\u7269\u5b8c\u6210")})},a.prototype.update=function(e){if(!p.pzaGameState.gamePause&&!this.beltPause){var a=e*this.beltSpeed;this.belt1.y+=a,this.belt2.y+=a,this.belt1.y>=this.beltOriPos.y+740&&(this.belt1.y-=2*this.belt1.height),this.belt2.y>=this.beltOriPos.y+740&&(this.belt2.y-=2*this.belt1.height);for(var t=0;t<this.beltCardList.length;t++){var o=this.beltCardList[t],n=360-80*t;o.node.y>=n?8==t&&(this.beltPause=!0):o.node.y=Math.min(o.node.y+a,n)}this.createInterval-=e,this.createInterval<=0&&this.createCard()}},a.prototype.createCard=function(){if(!(this.beltCardList.length>=9)){var e=s.pzaGameCommonPool.requestInstant(this.beltCardPre);e.setParent(this.cardContent),e.setPosition(cc.v2(0,-360));var a=e.getComponent(h.pzaBeltCard);if(null!=a){var t=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);null==t&&(t=this.getRandomBeltPlant()),null!=t&&(a.bindData(t,this.clickCardCall.bind(this)),this.beltCardList.push(a)),this.totalCount++;var o=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);this.createInterval=null!=o?l.pzaBeltConfig.InitCardInterval:l.pzaBeltConfig.getNextCardInterval(p.pzaGameState.curChapter,p.pzaGameState.curPart,this.beltCardList.length),console.log("\u4e0b\u4e00\u5f20\u5361\u7247\u95f4\u9694\uff1a",this.createInterval)}}},a.prototype.getRandomBeltPlant=function(){var e=l.pzaBeltConfig.getBeltPlants(p.pzaGameState.curChapter,p.pzaGameState.curPart),a=l.pzaBeltConfig.getBeltPlantsWeight(p.pzaGameState.curChapter,p.pzaGameState.curPart);if(null==e||null==a)return null;for(var t=[],o=0;o<e.length;o++){var n=e[o],i=a[o],s=this.getBeltCardCount(n),u=i;if(n==r.pzaPlantEnum.GRAVE_BUSTER){var d=window.pzaplantManager.getPlantCount(n),h=window.pzaMapManager.TombMap.size;u=l.pzaBeltConfig.firstGraveBusterWeight(i,s+d,h)}else if(n==r.pzaPlantEnum.LILY_PAD)d=window.pzaplantManager.getPlantCount(n),u=l.pzaBeltConfig.firstLilypadWeight(i,s+d);else if(n==r.pzaPlantEnum.FLOWER_POT)d=window.pzaplantManager.getPlantCount(n),u=l.pzaBeltConfig.firstPotWeight(i,s+d);else if(n==r.pzaPlantEnum.MELON_PULT||n==r.pzaPlantEnum.CABBAGE_PULT){var m=window.pzaplantManager.getVoidPotCount();u=l.pzaBeltConfig.firstCabbageMelonWeight(i,m)}else n==r.pzaPlantEnum.KERNEL_PULT&&(m=window.pzaplantManager.getVoidPotCount(),u=l.pzaBeltConfig.firstKernelWeight(i,m));var f=l.pzaBeltConfig.sencondWeight(u,e.length,s,this.lastBeltPlant==n);n==r.pzaPlantEnum.FLOWER_POT&&p.pzaGameState.bangCaring&&(f=500),t.push(f)}return e[c.pzaUtil.getRandomIndexByWeight(t)]},a.prototype.getBeltCardCount=function(e){var a=0;return null==this.beltCardList?a:(this.beltCardList.forEach(function(t){null!=t&&t.plantType==e&&a++}),a)},a.prototype.selectCard=function(){p.pzaGameState.selectCard!=p.pzaSelectCardType.BELT_CARD&&this.clickCardCall()},a.prototype.clickCardCall=function(){null!=this.beltCardList&&this.beltCardList.forEach(function(e){e&&e.diselect()})},a.prototype.plantCall=function(){if(null!=this.beltCardList){this.beltCardList.length>=9&&(this.beltPause=!1);for(var e=0,a=0;a<this.beltCardList.length;a++){var t=this.beltCardList[a];null!=t&&t.hasSelect&&(t.close(),e=a,this.beltCardList.splice(e,1))}}},a.prototype.clearBeltCard=function(){null!=this.beltCardList&&(this.beltCardList.forEach(function(e){e&&e.close()}),this.beltCardList=[])},i([z({displayName:"\u9762\u677f\u8282\u70b9",type:cc.Node})],a.prototype,"boardNode",void 0),i([z({displayName:"\u4f20\u9001\u5e261",type:cc.Node})],a.prototype,"belt1",void 0),i([z({displayName:"\u4f20\u9001\u5e262",type:cc.Node})],a.prototype,"belt2",void 0),i([z({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],a.prototype,"cardContent",void 0),i([z({displayName:"\u4f20\u9001\u5e26\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],a.prototype,"beltCardPre",void 0),i([f],a)}(cc.Component);t.pzaPlantBeltView=y,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaBeltConfig":"pzaBeltConfig","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaBeltCard":"pzaBeltCard"}],pzaPlantBody:[function(e,a,t){"use strict";cc._RF.push(a,"96c396uvMtPhLUJFoRD9JmK","pzaPlantBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantBody=void 0;var r=e("../../Common/pzaCollisionManager"),p=e("../../Common/pzaGameConfig"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaPlantEnum"),c=e("../Data/pzaZombieEnum"),u=e("../pzaBaseBody"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.isSquashTorch=!1,a.fireBulletCnt=0,a.fireBulletAllCnt=60,a.ignoreTarget=new Set,a.yIndex=-1,a.collider=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.ignoreTarget.clear()},a.prototype.onDisable=function(){this.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a&&a.yIndex>-1?(this.yIndex=a.yIndex,r.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)):this.yIndex=-1},a.prototype.setPlantRow=function(e){var a=this.yIndex;this.yIndex=e,r.pzaCollisionManager.getInstance.plantChangeRow(this,a,e),this.baseData&&(this.baseData.yIndex=e)},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a,!1)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a,!0)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node.parent,this.collider):null},a.prototype.onCollisionExit=function(e){if(null!=e&&null!=this.curTarget){var a=e.node.getComponent(u.pzaBaseBody);null!=a&&a.baseData==this.curTarget&&(this.curTarget=null)}},a.prototype.onCollision=function(e){if(null!=e&&null==this.curTarget){var a=e.node.getComponent(u.pzaBaseBody);if(null!=a&&null!=a.baseData&&!a.baseData.isDead&&!this.ignoreTarget.has(a.baseData)&&!a.baseData.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)&&this.baseData.yIndex==a.baseData.yIndex)if(a.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))null!=this.baseData.plantData&&this.baseData.plantData.plantType==s.pzaPlantEnum.POTATO_MINE&&null!=a.baseData.zombieData&&a.baseData.zombieData.zombieType==c.pzaZombieEnum.DIGGER_ZOMBIE&&(this.curTarget=a.baseData);else if(null==this.baseData.plantData||this.baseData.plantData.plantType!=s.pzaPlantEnum.HYPNO_SHROOM||!a.baseData.buffData.hasBuff(l.pzaBuffType.IMM_HYPNOSIS))if(this.baseData.plantData.cate!=s.pzaPlantCate.Mine||a.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE||a.baseData.zombieData.toolType==c.pzaEquipType.NO_EQUIP){if(!p.pzaPlantConfigData.isTangleKelp(this.baseData.plantData.plantType)||!a.baseData.buffData.hasBuff(l.pzaBuffType.FLY))if(null==this.baseData.plantData||this.baseData.plantData.plantType!=s.pzaPlantEnum.POTATO_MINE&&!p.pzaPlantConfigData.isTangleKelp(this.baseData.plantData.plantType)){if(this.baseData&&this.baseData.logicPos){if(a.baseData.zombieData.direction>0){if(this.baseData.logicPos.x<a.baseData.logicPos.x)return}else if(this.baseData.logicPos.x>a.baseData.logicPos.x)return;this.curTarget=a.baseData}}else this.curTarget=a.baseData}else this.ignoreTarget.add(a.baseData)}},i([m({displayName:"\u662f\u5426\u4e3a\u51ac\u74dc\u706b\u70ac"})],a.prototype,"isSquashTorch",void 0),i([h],a)}(u.pzaBaseBody);t.pzaPlantBody=f,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameConfig":"pzaGameConfig","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaBaseBody":"pzaBaseBody"}],pzaPlantCard:[function(e,a,t){"use strict";cc._RF.push(a,"7c370pfHupJy6vC3j5aNppR","pzaPlantCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantCard=void 0;var r=e("../../Battle/Data/pzaGuideType"),p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/pzaGameState"),s=e("../../Common/pzaGameConfig"),c=e("../../Common/pzaGlobalMask"),u=e("../../Common/pzaLocalData"),d=e("../../Common/pzaOperationMgr"),h=e("../../Common/pzaSoundManager"),m=e("../../Common/pzaSpineController"),f=e("../../Common/pzaSpriteFrameManager"),z=e("../../Common/pzaUtil"),y=e("../../Common/pzaWorldEventManager"),g=e("../../utils/pzaChannel"),v=e("../pzaBubbleItem"),b=cc._decorator,P=b.ccclass,C=b.property,E=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardBoard=null,a.swIcon=null,a.cardIcon=null,a.priceLabel=null,a.cdStaticMask=null,a.cdMask=null,a.selectTag=null,a.guideMask=null,a.lockNode=null,a.professorSP=null,a.priceSP=null,a.curPlantType=null,a.imitaterPlant=!1,a.plantConfigData=null,a.videoIcon=null,a.clickCall=null,a.showGuideArrow=null,a.putPlantToBagCall=null,a.bagSelect=!1,a.curPlantPrice=0,a.guideState=!1,a.my_profession=null,a.copyPlantType=null,a.isExtraPlantCard=!1,a.blockTouch=!1,a.sharkTipsNode=null,a.plantIdx=0,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){this.initPos=this.node.position},a.prototype.onEnable=function(){this.videoIcon=this.node.getChildByName("ad_icon"),this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.UPDATE_PLANT_PRICE,this.updatePlantPrice,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.RESET_CARD_STATE,this.resetCardState,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GUIDE_TIPS,this.showGuideTips,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.FORCEGUIDE_CLICK,this.forceClickGuide,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.UPDATE_PLANT_PRICE,this.updatePlantPrice,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.RESET_CARD_STATE,this.resetCardState,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GUIDE_TIPS,this.showGuideTips,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.FORCEGUIDE_CLICK,this.forceClickGuide,this)},a.prototype.showGuideTips=function(e,a){var t="\u8bf7\u70b9\u51fb\u5361\u724c";if(window.pzaGuideManager.guideType==r.pzaGuideType.WEAK_GUIDE_2_1&&(t=null),this.curPlantType===e){if(a)return void d.pzaOperationMgr.showTips(this.node,60,0,t,v.pzaBubbleType.tips,a,null,a);d.pzaOperationMgr.showTips(this.node,60,0,t,v.pzaBubbleType.tips,3e4,null,3e4),this.guideState=!0,this.sharkTipsNode=new cc.Node("shark"),this.sharkTipsNode.anchorX=0,this.sharkTipsNode.parent=this.node,this.sharkTipsNode.color=cc.Color.BLACK,this.sharkTipsNode.width=136,this.sharkTipsNode.height=79;var o=this.sharkTipsNode.addComponent(cc.Sprite);o.sizeMode=cc.Sprite.SizeMode.CUSTOM,o.spriteFrame=this.cdMask.getComponent(cc.Sprite).spriteFrame;var n=cc.fadeTo(.5,0),i=cc.fadeTo(.5,255),p=cc.repeatForever(cc.sequence(n,i));this.sharkTipsNode.runAction(p).clone()}},a.prototype.forceClickGuide=function(e){e==this.curPlantType&&(l.pzaGameState.freePlantArr.push(e),this.updatePrice(),this.guideState=!0,c.pzaGlobalMask.showOperaArea(this.node),this.cdMask.fillRange=0,this.cdStaticMask.active=!1,window.pzaplantManager.setPlantCD(this.curPlantType,this.plantIdx,0))},a.prototype.resetCardState=function(){this.selectTag.active=!1},a.prototype.bagSelectPlant=function(e,a,t,o,n){void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),this.lockNode.active=n,this.bagSelect=!0,this.curPlantType=e,this.imitaterPlant=t,this.putPlantToBagCall=a,null!=this.curPlantType?(this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,t?(e=l.pzaGameState.curImitaterPlant,this.copyPlantType=e):this.copyPlantType=null,this.plantConfigData=s.pzaGameConfig.getPlantConfig(e),this.plantConfigData?(this.priceLabel.node.active=!0,this.curPlantPrice=l.pzaGameState.getPlantPrice(e,!0),l.pzaGameState.gameMode==l.pzaGameMode.SUR_ENDLESS&&s.pzaGameConfig.isAdvancePlant(e)?this.priceLabel.string=this.curPlantPrice+"+":this.priceLabel.string=""+this.curPlantPrice,z.pzaUtil.switchGraySprite(this.cardIcon,t),this.swIcon.active=!1,u.pzaLocalData.data.plantTrial[""+e]>=1&&u.pzaLocalData.data.plantTrial[""+e]<=10&&(this.swIcon.active=!0),o&&this.lockNode&&(this.lockNode.active=!0),this.setPlantCardSP(e)):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",e)):this.node.active=!1},a.prototype.bindData=function(e,a,t,o){void 0===o&&(o=0),this.imitaterPlant=!1,this.isExtraPlantCard=!1,this.bagSelect=!1,this.curPlantType=e,this.clickCall=a,this.showGuideArrow=t,null!=e?(e==p.pzaPlantEnum.IMITATER?(e=l.pzaGameState.curImitaterPlant,this.imitaterPlant=!0,this.copyPlantType=e):this.copyPlantType=null,this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,this.plantConfigData=s.pzaGameConfig.getPlantConfig(e),this.priceLabel.node.active=!0,this.curPlantPrice=l.pzaGameState.getPlantPrice(e),l.pzaGameState.gameMode==l.pzaGameMode.SUR_ENDLESS&&s.pzaGameConfig.isAdvancePlant(e),this.priceLabel.string=""+this.curPlantPrice,z.pzaUtil.switchGraySprite(this.cardIcon,!1),z.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.plantIdx=o+1,this.swIcon.active=!1,u.pzaLocalData.data.plantTrial[""+e]>=1&&u.pzaLocalData.data.plantTrial[""+e]<=10&&(this.swIcon.active=!0),this.setPlantCardSP(e)):this.node.active=!1},a.prototype.setPlantCardSP=function(e){this.plantConfigData=s.pzaGameConfig.getPlantConfig(e),this.plantConfigData?(f.pzaSpriteFrameManager.loadPlantCard(e,this.cardIcon),f.pzaSpriteFrameManager.loadPlantProfess(this.plantConfigData.profession,this.professorSP),f.pzaSpriteFrameManager.loadPlantCardSlotFrame(this.cardBoard,e,this.imitaterPlant),f.pzaSpriteFrameManager.loadPlantCardPriceFrame(this.priceSP.getComponent(cc.Sprite),e,this.imitaterPlant),t.fixCardStyle(this.priceSP.getComponent(cc.Sprite),this.priceLabel,this.cardIcon.node,this.professorSP.node,this.cdStaticMask.getComponent(cc.Sprite))):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",e)},a.prototype.clickCard=function(){var e=this;if(!this.blockTouch){window.pzaGuideManager.guideType==r.pzaGuideType.WEAK_GUIDE_2_1&&window.pzaGuideManager.guideStepNext();var a=function(){var a=e.curPlantType;if(e.curPlantType==p.pzaPlantEnum.IMITATER&&e.copyPlantType&&(a=e.copyPlantType),e.lockNode&&e.lockNode.active)y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SHOW_SELECTCARD_DESC,a);else if(null!=e.curPlantType){if(y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SHOW_SELECTCARD_DESC,a),e.bagSelect)return e.putPlantToBagCall&&e.putPlantToBagCall(e),void h.pzaSoundManager.playSFX();var t=l.pzaGameState.selectPlant,o=!1;e.clickCall&&(o=e.clickCall(e.curPlantType,e.isExtraPlantCard)),e.isExtraPlantCard&&(l.pzaGameState.clickExtraCardType=o?e.curPlantType:null),o||t!=e.curPlantType||(l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,l.pzaGameState.cobCannon=null,l.pzaGameState.selectIdx=0,window.pzaMapManager.battleUpView.gameStartBtnAni()),e.guideState&&(e.guideState=!1,d.pzaOperationMgr.closeTips(.3),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PLANT_1_1?window.pzaGuideManager.guideStepNext():window.pzaGuideManager.guideType&&window.pzaGuideManager.guideType.toString().match("FORCE_GUIDE")&&window.pzaGuideManager.guideStepNext(),e.sharkTipsNode&&(e.sharkTipsNode.stopAllActions(),e.sharkTipsNode.destroy(),e.sharkTipsNode=null))}};this.videoIcon&&!0===this.videoIcon.active?(this.curPlantType,g.pzaChannel.instance().showVideo({sucCall:function(){window.pzaplantManager.setPlantCD(e.curPlantType,e.plantIdx,0),l.pzaGameState.ExtraCardFreeCount++,e.updatePrice(),a()},failCall:function(){},endCall:function(){},posName:"\u5f31\u5f15\u5bfc\u5361\u724c\u8bd5\u7528"})):a()}},a.prototype.update=function(){if(null!=this.curPlantType&&!l.pzaGameState.gamePause){this.lockNode&&this.lockNode.active&&(this.lockNode.active=!1);var e=window.pzaplantManager.getPlantCD(this.curPlantType,this.plantIdx);if(this.videoIcon&&!0===this.videoIcon.active&&(e=0),e>0){this.selectTag.active=!1,this.cdStaticMask.active=!0,this.cdMask.node.active=!0;var a=this.plantConfigData.createCD;this.cdMask.fillRange=-e/a}else this.cdMask.node.active=!1,l.pzaGameState.sunLightCount>=this.curPlantPrice?(this.cdStaticMask.active=!1,this.refreshGuide()):this.cdStaticMask.active=!0}},a.prototype.select=function(){if(null!=this.curPlantType){if(window.pzaplantManager.getPlantCD(this.curPlantType,this.plantIdx)>0)return l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,l.pzaGameState.cobCannon=null,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SELECT_CARD,null),void h.pzaSoundManager.playAudio("sunlack");if(this.curPlantPrice>l.pzaGameState.sunLightCount)return y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.LACK_SUN,null),h.pzaSoundManager.playAudio("sunlack"),l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,l.pzaGameState.cobCannon=null,void y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SELECT_CARD,null);l.pzaGameState.selectCard=l.pzaSelectCardType.SLOT_CARD,l.pzaGameState.selectPlant=this.curPlantType,l.pzaGameState.selectIdx=this.plantIdx,l.pzaGameState.cobCannon=null,this.selectTag.active=!0,this.refreshGuide(),h.pzaSoundManager.playAudio("selectPlant"),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SELECT_CARD,null)}},a.prototype.diselect=function(){this.selectTag.active=!1,this.isExtraPlantCard&&(l.pzaGameState.clickExtraCardType=null)},a.prototype.refreshGuide=function(){if(!this.imitaterPlant){var e=this.curPlantType==window.pzaGuideManager.guidePlant&&null==l.pzaGameState.selectPlant;e?this.guideMask.active||(this.guideMask.active=!0,this.guideMask.stopAllActions(),this.guideMask.opacity=0,this.guideMask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,200),cc.fadeOut(.5)))),this.showGuideArrow&&this.showGuideArrow(cc.v2(this.node.x+63,this.node.y-100))):e||this.guideMask.active&&(this.guideMask.active=!1,this.showGuideArrow&&this.showGuideArrow(null))}},a.prototype.setExtraCardPrice=function(){this.curPlantPrice=0,l.pzaGameState.ExtraCardFreeCount>0?(this.videoIcon&&(this.videoIcon.active=!1),this.priceLabel.node.active=!0):(this.videoIcon&&(this.videoIcon.active=!0),this.priceLabel.node.active=!1)},a.prototype.updatePrice=function(){this.curPlantPrice=l.pzaGameState.getPlantPrice(this.curPlantType),this.isExtraPlantCard&&this.setExtraCardPrice(),this.priceLabel.string=""+this.curPlantPrice},a.prototype.updatePlantPrice=function(e){e==this.curPlantType&&(this.curPlantPrice=l.pzaGameState.getPlantPrice(e),this.isExtraPlantCard&&this.setExtraCardPrice(),this.priceLabel.string=""+this.curPlantPrice)},a.prototype.moveTo=function(e,a,t){null!=e&&this.node.runAction(cc.sequence(cc.moveTo(a,e),cc.callFunc(function(){t&&t()})))},a.prototype.setExtraPlantCard=function(){this.isExtraPlantCard=!0,this.updatePrice();var e=this.node.getChildByName("lightFrame");e&&(e.active=!0,e.getComponent(m.pzaSpineController).playAnimation("idle",!0))},a.fixCardStyle=function(e,a,t,o,n){e&&(e.enabled=!0,e.sizeMode=cc.Sprite.SizeMode.CUSTOM,e.node.width=137.6,e.node.height=71,e.node.x=65.3,e.node.y=0),a&&(a.node.x=127,a.node.y=-7.4,a.node.width=42.6,a.node.height=42.8),t&&(t.anchorX=0,t.anchorY=.5,t.x=-1,t.y=0),o&&(o.x=116,o.y=21.625),n&&(n.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.node.width=136,n.node.height=75)},a.prototype.playMoveAct=function(){var e=this;this.blockTouch=!0;var a=cc.v2(-461.091,313.196);this.node.runAction(cc.sequence(cc.moveTo(1,cc.v2(a)).easing(cc.easeBackIn()),cc.callFunc(function(){e.blockTouch=!1})))},i([C({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([C({displayName:"\u8bd5\u73a9\u89d2\u6807",type:cc.Node})],a.prototype,"swIcon",void 0),i([C({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([C({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],a.prototype,"priceLabel",void 0),i([C({displayName:"cd\u906e\u7f69\u9759\u6001",type:cc.Node})],a.prototype,"cdStaticMask",void 0),i([C({displayName:"cd\u906e\u7f69\u52a8\u6001",type:cc.Sprite})],a.prototype,"cdMask",void 0),i([C({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"selectTag",void 0),i([C({displayName:"\u5f15\u5bfc\u906e\u7f69",type:cc.Node})],a.prototype,"guideMask",void 0),i([C({displayName:"\u9501\u6807\u5fd7",type:cc.Node})],a.prototype,"lockNode",void 0),i([C({type:cc.Sprite})],a.prototype,"professorSP",void 0),i([C({type:cc.Node})],a.prototype,"priceSP",void 0),t=i([P],a)}(cc.Component);t.pzaPlantCard=E,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGlobalMask":"pzaGlobalMask","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel","../pzaBubbleItem":"pzaBubbleItem"}],pzaPlantCreateEffect:[function(e,a,t){"use strict";cc._RF.push(a,"98ebfkicb5Lra4tQGf/83/a","pzaPlantCreateEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantCreateEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../../Load/pzaPreLoadManager"),s=e("../pzaEffectManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine=null,a.aniName="",a}return n(a,e),a.prototype.showEffect=function(e,a){window.pzaplantManager.createEffectSet.add(this),this.spine&&(this.spine.node.active=!0),s.pzaEffectManager.createEffect(e?l.pzaResourceUrl.VALUE_EFFECT:l.pzaResourceUrl.VALUE_BULE_EFFECT,cc.v2(this.node.x,this.node.y),"1"),this.spine.playAnimation(this.aniName,!1,this.close.bind(this),function(e,t){"1"==t.data.name&&a&&a()})},a.prototype.pauseSelf=function(){this.spine.pauseAnimation()},a.prototype.resumeSelf=function(){this.spine.resumeAnimation()},a.prototype.aniDone=function(){this.close()},a.prototype.close=function(){window.pzaplantManager.createEffectSet.delete(this),this.node.destroy()},i([d({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"spine",void 0),i([d({displayName:"\u52a8\u753b\u540d\u79f0"})],a.prototype,"aniName",void 0),i([u],a)}(r.pzaBaseComponent);t.pzaPlantCreateEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../pzaEffectManager":"pzaEffectManager"}],pzaPlantDeathEffect:[function(e,a,t){"use strict";cc._RF.push(a,"783d133zCBM25FpiIFtngxA","pzaPlantDeathEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantDeathEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../../Load/pzaPreLoadManager"),s=e("../pzaEffectManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.plantSpine=null,a.closeTime=.5,a}return n(a,e),a.prototype.showEffect=function(e,a,t,o){void 0===t&&(t="idle"),void 0===o&&(o=null),a.parent=this.node,this.plantSpine.spineAnimation=a.getComponent(sp.Skeleton),this.plantSpine.playAnimation(t,!0),o&&this.plantSpine.setAnimationSkin(o),s.pzaEffectManager.createEffect(e?l.pzaResourceUrl.VALUE_EFFECT:l.pzaResourceUrl.VALUE_BULE_EFFECT,cc.v2(this.node.x,this.node.y),"2"),this.fadeOutAni()},a.prototype.logicUpdate=function(e){this.closeTime>0&&(this.closeTime-=e,this.closeTime<=0&&this.close())},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.plantSpine.pauseAnimation()},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.plantSpine.resumeAnimation()},a.prototype.aniDone=function(){this.close()},a.prototype.close=function(){this.node.destroy()},i([d({type:p.pzaSpineController})],a.prototype,"plantSpine",void 0),i([u],a)}(r.pzaBaseComponent);t.pzaPlantDeathEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../pzaEffectManager":"pzaEffectManager"}],pzaPlantEnum:[function(e,a,t){"use strict";cc._RF.push(a,"a65bb2FjL9ESa64+zIqKD9N","pzaPlantEnum"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantEnvEnum=t.pzaPlantCate=t.pzaPlantEnum=void 0,function(e){e[e.PEA_SHOOTER=1]="PEA_SHOOTER",e[e.SUN_FLOWER=2]="SUN_FLOWER",e[e.CHERRY_BOMB=3]="CHERRY_BOMB",e[e.WALL_NUT=4]="WALL_NUT",e[e.POTATO_MINE=5]="POTATO_MINE",e[e.SNOW_PEA=6]="SNOW_PEA",e[e.CHOMPER=7]="CHOMPER",e[e.REPEATER=8]="REPEATER",e[e.PUFF_SHROOM=9]="PUFF_SHROOM",e[e.SUN_SHROOM=10]="SUN_SHROOM",e[e.FUME_SHROOM=11]="FUME_SHROOM",e[e.GRAVE_BUSTER=12]="GRAVE_BUSTER",e[e.HYPNO_SHROOM=13]="HYPNO_SHROOM",e[e.SCAREDY_SHROOM=14]="SCAREDY_SHROOM",e[e.ICE_SHROOM=15]="ICE_SHROOM",e[e.DOOM_SHROOM=16]="DOOM_SHROOM",e[e.LILY_PAD=17]="LILY_PAD",e[e.SQUASH=18]="SQUASH",e[e.THREE_PEATER=19]="THREE_PEATER",e[e.TANGLE_KELP=20]="TANGLE_KELP",e[e.JALAPENO=21]="JALAPENO",e[e.SPIKEWEED=22]="SPIKEWEED",e[e.TORCHWOOD=23]="TORCHWOOD",e[e.TALL_NUT=24]="TALL_NUT",e[e.SEA_SHROOM=25]="SEA_SHROOM",e[e.PLANTERN=26]="PLANTERN",e[e.CACTUS=27]="CACTUS",e[e.BLOVER=28]="BLOVER",e[e.SPLIT_PEA=29]="SPLIT_PEA",e[e.STAR_FRUIT=30]="STAR_FRUIT",e[e.PUMPKIN=31]="PUMPKIN",e[e.MAGNET_SHROOM=32]="MAGNET_SHROOM",e[e.CABBAGE_PULT=33]="CABBAGE_PULT",e[e.FLOWER_POT=34]="FLOWER_POT",e[e.KERNEL_PULT=35]="KERNEL_PULT",e[e.COFFEE_BEAN=36]="COFFEE_BEAN",e[e.GARLIC=37]="GARLIC",e[e.UMBRELLA_LEAF=38]="UMBRELLA_LEAF",e[e.MARIGOLD=39]="MARIGOLD",e[e.MELON_PULT=40]="MELON_PULT",e[e.GATLING_PEA=41]="GATLING_PEA",e[e.TWIN_SUNFLOWER=42]="TWIN_SUNFLOWER",e[e.GLOOM_SHROOM=43]="GLOOM_SHROOM",e[e.CATTAIL=44]="CATTAIL",e[e.WINTER_MELON=45]="WINTER_MELON",e[e.GOLD_MAGNET=46]="GOLD_MAGNET",e[e.SPIKEROCK=47]="SPIKEROCK",e[e.COB_CANNON=48]="COB_CANNON",e[e.IMITATER=49]="IMITATER",e[e.SUPER_CHOMPER=151]="SUPER_CHOMPER",e[e.BOOM_NUT=152]="BOOM_NUT",e[e.CAIWEN=153]="CAIWEN",e[e.LaserBean=154]="LaserBean",e[e.FireBlover=155]="FireBlover",e[e.WALL_NUT_BOWLING=1e3]="WALL_NUT_BOWLING",e[e.BOOM_NUT_BOWLING=1001]="BOOM_NUT_BOWLING",e[e.TALL_NUT_BOWLING=1002]="TALL_NUT_BOWLING",e[e.REPEATER_REVERSE=50]="REPEATER_REVERSE",e[e.FIGHTKING=51]="FIGHTKING",e[e.GABY=52]="GABY",e[e.Phoenix=53]="Phoenix",e[e.Gene_SnowPea=55]="Gene_SnowPea"}(t.pzaPlantEnum||(t.pzaPlantEnum={})),function(e){e[e.Null=0]="Null",e[e.Nut=1]="Nut",e[e.Spike=2]="Spike",e[e.Gargantuar=3]="Gargantuar",e[e.Mine=4]="Mine"}(t.pzaPlantCate||(t.pzaPlantCate={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.SOIL=1]="SOIL",e[e.TOMB=2]="TOMB",e[e.POND=3]="POND",e[e.GRASS=4]="GRASS",e[e.ROOFBLANK=5]="ROOFBLANK",e[e.SHROOM=6]="SHROOM",e[e.ENV8=8]="ENV8",e[e.BOTH=9]="BOTH",e[e.HOLE=11]="HOLE",e[e.ENV13=13]="ENV13",e[e.ENV14=14]="ENV14",e[e.WithRoof=15]="WithRoof",e[e.ENV20=20]="ENV20"}(t.pzaPlantEnvEnum||(t.pzaPlantEnvEnum={})),cc._RF.pop()},{}],pzaPlantHandbookView:[function(e,a,t){"use strict";cc._RF.push(a,"e34a1VvNv1H9J5Da8DtogW6","pzaPlantHandbookView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantHandbookView=void 0;var p=e("../Battle/Data/pzaPlantEnum"),l=e("../Battle/Plant/pzaBasePlant"),s=e("../Common/pzaGameCommonPool"),c=e("../Common/pzaGameConfig"),u=e("../Common/pzaSoundManager"),d=e("../Common/pzaSpineController"),h=e("../Load/pzaBundleObjectPool"),m=e("../Load/pzaPreLoadManager"),f=e("./pzaHandbookCard"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardPrefab=null,a.cardContent=null,a.plantName=null,a.plantDesc=null,a.plantProp=null,a.special=null,a.bg1=null,a.bg2=null,a.plantCD=null,a.sunPrice=null,a.txtScroll=null,a.plantAniNode=null,a.shadow=null,a.cardScroll=null,a.nodes_allProfess=[],a.imgs_allProfess=[],a.showAudio=null,a.curPlant=null,a.plantCardList=null,a.plantAni=null,a.lastPlayAudio=null,a.closeCall=null,a.playAudioCD=!1,a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.plantCardList=[];for(var a=p.pzaPlantEnum.PEA_SHOOTER;a<=p.pzaPlantEnum.IMITATER;a++)if(a!=p.pzaPlantEnum.GOLD_MAGNET){var t=s.pzaGameCommonPool.requestInstant(this.cardPrefab);t.setParent(this.cardContent);var o=t.getComponent(f.pzaHandbookCard);null!=o&&(o.bindData(a,this.showPlant.bind(this)),this.plantCardList.push(o),a==p.pzaPlantEnum.PEA_SHOOTER&&o.showSelectAni())}[p.pzaPlantEnum.FIGHTKING,p.pzaPlantEnum.GABY,p.pzaPlantEnum.Phoenix,p.pzaPlantEnum.Gene_SnowPea,p.pzaPlantEnum.SUPER_CHOMPER,p.pzaPlantEnum.BOOM_NUT,p.pzaPlantEnum.CAIWEN,p.pzaPlantEnum.LaserBean,p.pzaPlantEnum.FireBlover].forEach(function(a){var t=s.pzaGameCommonPool.requestInstant(e.cardPrefab);t.setParent(e.cardContent);var o=t.getComponent(f.pzaHandbookCard);o.bindData(a,e.showPlant.bind(e)),e.plantCardList.push(o)}),this.txtScroll.node.active=!0,this.curPlant=null,this.showPlant(p.pzaPlantEnum.PEA_SHOOTER),this.cardScroll.scrollToTop(),this.showBtnAni(0,0)},a.prototype.onDisable=function(){null!=this.plantCardList&&this.plantCardList.forEach(function(e){e&&e.close()}),this.plantCardList=null,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null)},a.prototype.bindCloseCall=function(e){this.closeCall=e},a.prototype.showPlant=function(e){var a=this;if(this.curPlant!=e){this.lastPlayAudio&&cc.audioEngine.stopEffect(this.lastPlayAudio),this.playAudioCD=!1,clearTimeout(this.cdTimer),this.curPlant=e;var t=c.pzaGameConfig.getPlantConfig(e),o=c.pzaGameConfig.PlantBookMap.get(e);if(null!=t&&null!=o){this.plantName.string=t.name,this.plantDesc.node.active=null!=o.desc,null!=o.desc&&(this.plantDesc.string=o.desc),this.plantProp.node.active=null!=o.prop,null!=o.prop&&(this.plantProp.string=o.prop),this.special.node.active=null!=o.special,null!=o.special&&(this.special.string=o.special),this.bg1.node.active=null!=o.bg1,null!=o.bg1&&(this.bg1.string=o.bg1),this.bg2.node.active=null!=o.bg2,null!=o.bg2&&(this.bg2.string=o.bg2),this.plantCD.node.active=null!=o.cd,null!=o.cd&&(this.plantCD.string=o.cd),e==p.pzaPlantEnum.IMITATER?this.sunPrice.string="":this.sunPrice.string="<color=#47ecff>\u6d88\u8017\u80fd\u91cf\uff1a</c><color=#47ecff>"+t.getPrice()+"</color>",this.showAudio.node.active=t.isPlayShowAudio,!0===t.isPlayShowAudio&&this.clickPlayShowAudio(),this.txtScroll.scrollToTop(),this.shadow.active=!1,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null),e==p.pzaPlantEnum.FLOWER_POT?this.plantAniNode.y=80:this.plantAniNode.y=40;var n=m.pzaPreLoadManager.getPlantUrl(e);h.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,t){null==e&&null!=t?(t.setParent(a.plantAniNode),t.zIndex=0,t.setPosition(cc.v2()),null!=a.plantAni&&a.plantAni.close(),a.plantAni=t.getComponent(l.pzaBasePlant),null!=a.plantAni&&(a.plantAni.uiShow(),a.plantAni.needShadow&&(a.shadow.active=!0,a.shadow.setPosition(cc.v2(a.plantAni.shadowOffset.x,a.plantAni.shadowOffset.y)),a.shadow.setScale(a.plantAni.shadowScale)))):console.error(e)})}}},a.prototype.clickFilterBtn=function(e,a){var t,o;try{for(var n=r(this.plantCardList),i=n.next();!i.done;i=n.next()){var p=i.value;p&&p.setFilterByPro(parseInt(a))}}catch(s){t={error:s}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}var l=parseInt(a);this.showBtnAni(l,.1)},a.prototype.showBtnAni=function(e,a){for(var t=0;t<this.nodes_allProfess.length;t++)t==e?(this.nodes_allProfess[t].width=113,this.nodes_allProfess[t].height=69,cc.tween(this.imgs_allProfess[t]).to(a,{width:113,height:69},{easing:"sineInOut"}).start()):(this.nodes_allProfess[t].width=94,this.nodes_allProfess[t].height=57,cc.tween(this.imgs_allProfess[t]).to(a,{width:94,height:57},{easing:"sineInOut"}).start())},a.prototype.clickBack=function(){u.pzaSoundManager.playSFX(),this.close()},a.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},a.prototype.clickPlayShowAudio=function(){var e=this;if(!this.playAudioCD){this.playAudioCD=!0;var a="show_"+this.curPlant;u.pzaSoundManager.getAudioByName(a,function(a){e.cdTimer=setTimeout(function(){e.playAudioCD=!1,e.showAudio.playAnimation("jingyin",!1)},1e3*a.duration)}),u.pzaSoundManager.playAudio(a,null,function(a){e.lastPlayAudio=a}),this.showAudio.playAnimation("bofang",!0)}},a.prototype.close=function(){this.lastPlayAudio&&cc.audioEngine.stopEffect(this.lastPlayAudio),this.cdTimer&&clearTimeout(this.cdTimer),s.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],a.prototype,"cardPrefab",void 0),i([g({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],a.prototype,"cardContent",void 0),i([g({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],a.prototype,"plantName",void 0),i([g({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],a.prototype,"plantDesc",void 0),i([g({displayName:"\u690d\u7269\u5c5e\u6027",type:cc.RichText})],a.prototype,"plantProp",void 0),i([g({displayName:"\u7279\u6b8a",type:cc.RichText})],a.prototype,"special",void 0),i([g({displayName:"\u80cc\u666f\u63cf\u8ff01",type:cc.Label})],a.prototype,"bg1",void 0),i([g({displayName:"\u80cc\u666f\u63cf\u8ff02",type:cc.Label})],a.prototype,"bg2",void 0),i([g({displayName:"\u6062\u590d\u65f6\u95f4",type:cc.RichText})],a.prototype,"plantCD",void 0),i([g({displayName:"\u6d88\u8017\u9633\u5149",type:cc.RichText})],a.prototype,"sunPrice",void 0),i([g({displayName:"\u6587\u672cScroll",type:cc.ScrollView})],a.prototype,"txtScroll",void 0),i([g({displayName:"\u690d\u7269\u52a8\u753b\u8282\u70b9",type:cc.Node})],a.prototype,"plantAniNode",void 0),i([g({displayName:"\u690d\u7269\u5f71\u5b50",type:cc.Node})],a.prototype,"shadow",void 0),i([g({displayName:"\u5361\u7247Scroll",type:cc.ScrollView})],a.prototype,"cardScroll",void 0),i([g({displayName:"\u6240\u6709\u4e13\u4e1a\u6309\u94ae",type:[cc.Node]})],a.prototype,"nodes_allProfess",void 0),i([g({displayName:"\u6240\u6709\u4e13\u4e1a\u56fe\u7247",type:[cc.Node]})],a.prototype,"imgs_allProfess",void 0),i([g(d.pzaSpineController)],a.prototype,"showAudio",void 0),i([y],a)}(cc.Component);t.pzaPlantHandbookView=v,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Plant/pzaBasePlant":"pzaBasePlant","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaHandbookCard":"pzaHandbookCard"}],pzaPlantManager:[function(e,a,t){"use strict";cc._RF.push(a,"43616PuMRlF4ooGSkXeY6Ka","pzaPlantManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantManager=void 0;var p=e("../Achieve/pzaAchieve"),l=e("../Achieve/pzaAchieveMgr"),s=e("../Common/pzaBaseComponent"),c=e("../Common/pzaBeltEquipConfig"),u=e("../Common/pzaGameConfig"),d=e("../Common/pzaGameManager"),h=e("../Common/pzaGamePartConfig"),m=e("../Common/pzaGameSurEndless"),f=e("../Common/pzaGameSurvival"),z=e("../Common/pzaLocalData"),y=e("../Common/pzaMapManager"),g=e("../Common/pzaNodeManager"),v=e("../Common/pzaSoundManager"),b=e("../Common/pzaTipManager"),P=e("../Common/pzaUtil"),C=e("../Common/pzaWorldEventManager"),E=e("../Common/pzaZJPlantConf"),S=e("../Load/pzaBundleObjectPool"),_=e("../Load/pzaPreLoadManager"),D=e("../utils/pzaResMgr"),M=e("../View/pzaBubbleItem"),w=e("./Data/pzaBaseData"),T=e("./Data/pzaGuideType"),A=e("./Data/pzaPlantEnum"),B=e("./Plant/pzaAttackType"),G=e("./Plant/pzaBasePlant"),I=e("./Plant/pzaFlowerPotShadow"),O=e("./Plant/pzaJalapeno"),N=e("./Plant/pzaStarFruitShadow"),L=e("./pzaBrain"),R=e("./pzaEffectManager"),k=e("./pzaGameState"),U=e("./pzaJar"),x=e("./pzaSunLight"),F=cc._decorator,W=F.ccclass,Z=(F.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.plantDataMap=new Map,a.plantEnvDataMap=new Map,a.pumpkinDataMap=new Map,a.createEffectSet=new Set,a.holeMap=new Map,a.notTargetMap=new Map,a.plantMap=new Map,a.fireSquashMap=new Map,a.plantCdMap=new Map,a.AllSunLight=new Set,a.pzaJarMap=new Map,a.dropPlantCards=new Set,a.brainMap=new Map,a.curSelectPlants=null,a.starFruitMap=new Map,a.flowerPotShadowMap=new Map,a.sunAutoCount=0,a.sunAutoCD=0,a.twoBlockPlantMap=new Set([A.pzaPlantEnum.COB_CANNON]),a.flowerPotPart=[8,12],a.idxArr=[2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3,19e3,2e4,21e3],a}return n(a,e),a.prototype.onLoad=function(){window.pzaplantManager=this},a.prototype.init=function(){this.plantDataMap.clear(),this.plantEnvDataMap.clear(),this.pumpkinDataMap.clear(),this.holeMap.clear(),this.notTargetMap.clear(),this.plantMap.clear(),this.fireSquashMap.clear(),this.AllSunLight.clear(),this.pzaJarMap.clear(),this.dropPlantCards.clear(),this.brainMap.clear(),this.sunAutoCount=0,this.randomAutoSunCD(),this.starFruitMap.clear(),this.flowerPotShadowMap.clear()},a.prototype.logicUpdate=function(e){var a=this,t=[];this.plantCdMap.forEach(function(o,n){o-=e*(1+k.pzaGameState.cdReduceValue),a.plantCdMap.set(n,o),o<=0&&t.push(n)}),t.forEach(function(e){a.plantCdMap.delete(e)}),k.pzaGameState.guideSunPause||(this.sunAutoCD-=e,this.sunAutoCD<=0&&this.autoCreateSun())},a.prototype.plantChangeMapRow=function(e,a,t){var o=window.pzaplantManager.plantDataMap.get(""+e+a),n=window.pzaplantManager.plantEnvDataMap.get(""+e+a),i=window.pzaplantManager.pumpkinDataMap.get(""+e+a),r=k.pzaGameState.map.getXInterval(e)/2,p=k.pzaGameState.map.getYInterval(t)/3;k.pzaGameState.isRoofMode()&&(p=k.pzaGameState.map.getYInterval(t)/6);var l,s=k.pzaGameState.map.getBlockLogicPos(e,t,r,p);o&&((l=window.pzaplantManager.getPlantByData(o))&&(o.yIndex=t,o.logicPos=s,l.node.setPosition(s),l.body.setPlantRow(t),l.setZIndex(o),l.onRowChanged(e,a,t)),window.pzaplantManager.plantDataMap.delete(""+e+a),window.pzaplantManager.plantDataMap.set(""+e+t,o)),n&&((l=window.pzaplantManager.getPlantByData(n))&&(n.yIndex=t,n.logicPos=s,l.node.setPosition(s),l.body.setPlantRow(t),l.setZIndex(n),l.onRowChanged(e,a,t)),window.pzaplantManager.plantEnvDataMap.delete(""+e+a),window.pzaplantManager.plantEnvDataMap.set(""+e+t,n)),i&&((l=window.pzaplantManager.getPlantByData(i))&&(i.yIndex=t,i.logicPos=s,l.node.setPosition(s),l.body.setPlantRow(t),l.setZIndex(i),l.onRowChanged(e,a,t)),window.pzaplantManager.pumpkinDataMap.delete(""+e+a),window.pzaplantManager.pumpkinDataMap.set(""+e+t,i))},a.prototype.randomAutoSunCD=function(){if(1!=k.pzaGameState.curChapter||1!=k.pzaGameState.curPart&&2!=k.pzaGameState.curPart)if(this.sunAutoCount<=0)this.sunAutoCD=P.pzaUtil.getRandomFloatNum(6.25,9);else{var e=P.pzaUtil.getRandomFloatNum(4.25,7)+.1*this.sunAutoCount;this.sunAutoCD=Math.min(e,9.5)}else this.sunAutoCD=6.25},a.prototype.autoCreateSun=function(e){var a=this;if(void 0===e&&(e=!0),!k.pzaGameState.gameWin&&!k.pzaGameState.isNightScene&&!k.pzaGameState.pauseDropSunLight){var t=d.pzaGameManager.getCurrentGame();if(t&&t.isAutoCreateSun()&&!(k.pzaGameState.gameMode==k.pzaGameMode.SURVIVAL&&d.pzaGameManager.getGame(k.pzaGameMode.SURVIVAL,f.pzaGameSurvival).getSurvivalSunState()||k.pzaGameState.gameMode==k.pzaGameMode.SUR_ENDLESS&&d.pzaGameManager.getGame(k.pzaGameMode.SUR_ENDLESS,m.pzaGameSurEndless).getSurvivalSunState())){var o=g.pzaNodeManager.getUpBgNode();if(null!=o){this.randomAutoSunCD(),this.sunAutoCount++;var n=u.pzaGameConfig.getRandomSunPos();t.autoSunCreate?t.autoSunCreate(n):S.pzaBundleObjectPool.requestInstantByUrl2(_.pzaResourceUrl.SUN,function(t,i){if(null==t&&null!=i){i.setParent(o);var r=i.getComponent(x.pzaSunLight);r&&r.init(n,e,!0),a.AllSunLight.add(r)}else console.error(t)})}}}},a.prototype.plantCreateSun2=function(e,a,t){var o=this;void 0===t&&(t=0);var n=g.pzaNodeManager.getUpBgNode();null!=n&&null!=e&&S.pzaBundleObjectPool.requestInstantByUrl2(_.pzaResourceUrl.SUN,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(x.pzaSunLight);p&&p.init2(e,a,t,!1),t&&p&&(p.sunValue=t),o.AllSunLight.add(p)}else console.error(i)})},a.prototype.plantCreateSun=function(e,a,t,o,n){var i=this;void 0===t&&(t=!1),void 0===o&&(o=0),void 0===n&&(n=!1);var r=g.pzaNodeManager.getUpBgNode();null!=r&&null!=e&&S.pzaBundleObjectPool.requestInstantByUrl2(_.pzaResourceUrl.SUN,function(p,l){if(null==p&&null!=l){l.setParent(r);var s=l.getComponent(x.pzaSunLight);s&&s.init(e,!1,a,t),n&&s.showGuideTips("showSunTips"),o&&s&&(s.sunValue=o),i.AllSunLight.add(s)}else console.error(p)})},a.prototype.adCreateSun=function(){var e=g.pzaNodeManager.getBattleUINode();if(null!=e){k.pzaGameState.sunLightCount+=500,k.pzaGameState.pickSunCount+=500,k.pzaGameState.pickCoinCount+=500,l.default.instance().checkAddAchieve(p.pzaAchieveType.ACH_10,k.pzaGameState.pickCoinCount),z.pzaLocalData.bpGetSun(500);for(var a=[cc.v2(-120,265),cc.v2(-40,336),cc.v2(70,350),cc.v2(180,336),cc.v2(260,265)],t=function(t){S.pzaBundleObjectPool.requestInstantByUrl2(_.pzaResourceUrl.SUN,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=n.getComponent(x.pzaSunLight);i&&i.initAdSun(cc.v2(70,150),a[t])}else console.error(o)})},o=0;o<5;o++)t(o)}},a.prototype.initFlowerPot=function(){var e;if(!(null==(e=k.pzaGameState.isSurvival()?k.pzaGameState.survivalConfig:h.pzaGamePartConfig.getPartConfig(k.pzaGameState.curChapter,k.pzaGameState.curPart))||e.flowerPotColumn<=0))for(var a=k.pzaGameState.map.getMapRow(),t=0;t<e.flowerPotColumn;t++)for(var o=0;o<a;o++)this.createPlant(A.pzaPlantEnum.FLOWER_POT,t,o,!0)},a.prototype.createInitPlant=function(){var e;switch(k.pzaGameState.gameMode){case k.pzaGameMode.NORMAL:case k.pzaGameMode.NORMAL_WEEKTWO:case k.pzaGameMode.ZOM_BOSS:e=k.pzaGameState.hasMainConf();break;case k.pzaGameMode.SURVIVAL:case k.pzaGameMode.SUR_ENDLESS:e=k.pzaGameState.survivalConfig}if(e&&e.lily_col)for(var a=0,t=k.pzaGameState.map.getMapRow();e.lily_col>a;){for(var o=0;o<t;o++)window.pzaMapManager.getBlockType(a,o)==y.pzaBlockType.POND?this.createPlant(A.pzaPlantEnum.LILY_PAD,a,o,!0,!1):window.pzaMapManager.getBlockType(a,o)!=y.pzaBlockType.ROOF&&window.pzaMapManager.getBlockType(a,o)!=y.pzaBlockType.GRASS||5!=k.pzaGameState.curChapter&&10!=k.pzaGameState.curChapter||this.createPlant(A.pzaPlantEnum.FLOWER_POT,a,o,!0,!1);a++}},a.prototype.initSimulatePlant=function(e){null!=e&&e.forEach(function(e){null!=e&&null!=e.type&&window.pzaplantManager.createPlant(e.type,e.x,e.y,!0,!1,!1,!1)})},a.prototype.initBrain=function(){var e,a,t=this;if(this.brainMap.size>0){try{for(var o=r(this.brainMap),n=o.next();!n.done;n=o.next())n.value[1].close()}catch(c){e={error:c}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}this.brainMap.clear()}var i=k.pzaGameState.map.getMapRow(),p=g.pzaNodeManager.getPlantZombieNode();if(null!=p)for(var l=function(e){S.pzaBundleObjectPool.requestInstantByUrl(_.pzaResourceUrl.BRAIN,!1,function(a,o){if(null==a&&null!=o){o.setParent(p);var n=new w.pzaBaseData(null,null,!0);n.maxHp=n.hp=500,n.yIndex=e;var i=o.getComponent(L.pzaBrain);i&&i.bindData(n),t.brainMap.set(n,i)}else console.error(a)})},s=0;s<i;s++)l(s)},a.prototype.blinkBrain=function(e){this.brainMap.forEach(function(a){a&&a.blink(e)})},a.prototype.hasBrain=function(e){var a=!1;return this.brainMap.forEach(function(t,o){null!=o&&o.yIndex==e&&(a=!0)}),a},a.prototype.createPlant=function(e,a,t,o,n,i,r){var p=this;if(void 0===o&&(o=!1),void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===r&&(r=!1),u.pzaPlantConfigData.isBowling(e))this.createBowlingNut(e,a,t);else{e!=A.pzaPlantEnum.WALL_NUT&&e!=A.pzaPlantEnum.TALL_NUT||!z.pzaLocalData.hasNutHealing()||this.removeNormalPlant(a,t),e==A.pzaPlantEnum.PUMPKIN&&z.pzaLocalData.hasNutHealing()&&this.removePumpkin(a,t);var l=null;if(e==A.pzaPlantEnum.GATLING_PEA||e==A.pzaPlantEnum.TWIN_SUNFLOWER||e==A.pzaPlantEnum.GLOOM_SHROOM||e==A.pzaPlantEnum.WINTER_MELON||e==A.pzaPlantEnum.GOLD_MAGNET||e==A.pzaPlantEnum.SPIKEROCK||e==A.pzaPlantEnum.SUPER_CHOMPER||e==A.pzaPlantEnum.FIGHTKING){var h=""+a+t;l=this.plantDataMap.get(h),this.removeNormalPlant(a,t)}if(u.pzaPlantConfigData.isPotRecoverPlant(e)){var m=""+a+t,f=window.pzaplantManager.plantEnvDataMap.get(m);if(f){if(f.plantData.plantType==e)return;u.pzaPlantConfigData.isPotRecoverPlant(f.plantData.plantType)&&f.plantData.plantType!=e&&this.removeEnvPlant(a,t)}}if(e==A.pzaPlantEnum.COB_CANNON){this.removeNormalPlant(a,t);var b=""+(a+1)+t,P=this.pumpkinDataMap.get(b),E=this.plantDataMap.get(b),D=window.pzaMapManager.getBlockType(a+1,t),M=window.pzaMapManager.hasTomb(a+1,t);a<8&&null==P&&null==E&&D!=y.pzaBlockType.TRACK&&0==M?this.removeNormalPlant(a+1,t):(this.removeNormalPlant(a-1,t),a-=1)}else this.twoBlockPlantMap.has(e)&&(a=this.twoBlockPlantIndexCheck(a,t));var w=u.pzaGameConfig.getPlantConfig(e);if(null!=w&&null!=e){var B=this.createPlantData(e);B.xIndex=a,B.yIndex=t,B.fromInit=o,B.plantData&&i&&(B.plantData.isProtectPlant=!0),null!=l&&(B.plantData.sleeping=l.plantData.sleeping);var I=g.pzaNodeManager.getPlantZombieNode();if(u.pzaPlantConfigData.isLilyPad(e,!0)&&(I=g.pzaNodeManager.getDownEffectNode()),null!=I){var O=k.pzaGameState.map.getXInterval(a)/2,N=k.pzaGameState.map.getYInterval(t)/3;k.pzaGameState.isRoofMode()&&(N=k.pzaGameState.map.getYInterval(t)/6);var L=k.pzaGameState.map.getBlockLogicPos(a,t,O,N);B.logicPos=L;var U=""+a+t;if(e==A.pzaPlantEnum.IMITATER){var x=k.pzaGameState.curImitaterPlant;x!=A.pzaPlantEnum.WALL_NUT&&x!=A.pzaPlantEnum.TALL_NUT||!z.pzaLocalData.hasNutHealing()||this.removeNormalPlant(a,t),x==A.pzaPlantEnum.PUMPKIN&&z.pzaLocalData.hasNutHealing()&&this.removePumpkin(a,t),u.pzaPlantConfigData.isEnvPlant(x)?this.plantEnvDataMap.set(U,B):u.pzaPlantConfigData.isPumPkin(x)?this.pumpkinDataMap.set(U,B):x==A.pzaPlantEnum.COFFEE_BEAN||this.plantDataMap.set(U,B)}else if(u.pzaPlantConfigData.isEnvPlant(e))this.plantEnvDataMap.set(U,B);else if(u.pzaPlantConfigData.isPumPkin(e))this.pumpkinDataMap.set(U,B);else if(e==A.pzaPlantEnum.COFFEE_BEAN);else if(k.pzaGameState.isNoTargetMap(e))this.notTargetMap.set(U,B);else if(this.plantDataMap.set(U,B),this.twoBlockPlantMap.has(e)){B.secondXIndex=a+1,B.secondYIndex=t;var F=""+(a+1)+t;this.plantDataMap.set(F,B)}u.pzaPlantConfigData.isBuster(e)&&(L.x-=100);var W=function(a){var t=_.pzaPreLoadManager.getPlantUrl(e);S.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(e,t){if(null==e&&null!=t){var o=window.pzaMapManager.trackBlockMap.get(""+B.xIndex+B.yIndex);o&&r&&(o.fixedPosition=!1),t.setParent(I),t.setPosition(L);var n=function(){i&&i.bindData(B),a&&i.fadeInAni(),p.plantMap.set(B,i)},i=t.getComponent(s.pzaBaseComponent);a&&(i.node.opacity=0);var l=t.getComponent(G.pzaBasePlant);l?p.setPlantSpineData(B,l.animation,n):n()}else console.error(e)})};if(r&&!u.pzaPlantConfigData.notShowPortal(e)){var Z=window.pzaMapManager.trackBlockMap.get(""+B.xIndex+B.yIndex);Z&&r&&(Z.fixedPosition=!0),B.creating=!0,R.pzaEffectManager.createPlantPortalEffect(!u.pzaGameConfig.isShowBuleValueEffect(e),function(){W(!0)},B.logicPos,10*-B.yIndex)}else W(!1);if(o)return B;var j="show_"+e;if(w&&w.isPlayShowAudio&&v.pzaSoundManager.playAudio(j),k.pzaGameState.isWatchStarMode()&&this.starFruitMap.get(U)&&e==A.pzaPlantEnum.STAR_FRUIT)R.pzaEffectManager.createStarFruitEffect(B.logicPos);else{var V=window.pzaMapManager.getPlantBlockType(B.xIndex,B.yIndex);R.pzaEffectManager.createPlantEffect(B.logicPos,V,null)}if(k.pzaGameState.selectCard==k.pzaSelectCardType.DROP_CARD){var H=null;return this.dropPlantCards.forEach(function(e){e&&e.plant()&&(H=e)}),void this.dropPlantCards.delete(H)}if(e==A.pzaPlantEnum.IMITATER&&(w=u.pzaGameConfig.getPlantConfig(k.pzaGameState.curImitaterPlant)),null!=w&&w.createCD>0){var q=w.createCD,K=0;z.pzaLocalData.data.beltEquipData.slotList.includes(c.pzaBeltEquipEnum.TianDi)&&(K=c.pzaBeltEquipConfig.getGrowthValue(c.pzaBeltEquipEnum.TianDi)),(q-=K)<0&&(q=0),this.plantCdMap.set(e+this.idxArr[k.pzaGameState.selectIdx],q)}if(n){var Y=k.pzaGameState.getPlantPrice(e);k.pzaGameState.clickExtraCardType==k.pzaGameState.selectPlant&&k.pzaGameState.ExtraCardFreeCount>0&&(Y=0,k.pzaGameState.ExtraCardFreeCount--),k.pzaGameState.sunLightCount-=Y,k.pzaGameState.costSunCount+=Y;var X=k.pzaGameState.hasMainConf();X&&X.dontuse_sun&&k.pzaGameState.costSunCount>X.dontuse_sun&&d.pzaGameManager.specialFail("\u8bf7\u6ce8\u610f\uff0c\u4f7f\u7528\u7684\u80fd\u91cf\u4e0d\u53ef\u8d85\u8fc7"+X.dontuse_sun,!0)}if(k.pzaGameState.addPlant(e),C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.UPDATE_PLANT_PRICE,e),window.pzaGuideManager.guideType==T.pzaGuideType.GUIDE_PLANT_1_1&&(4!=window.pzaGuideManager.guideStep&&9!=window.pzaGuideManager.guideStep||window.pzaGuideManager.guideStepNext()),window.pzaGuideManager.guideType==T.pzaGuideType.GUIDE_NEW_PLANT_1_2){k.pzaGameState.guideZombiePause=!1;var J=this.getPlantCount(A.pzaPlantEnum.SUN_FLOWER);!window.pzaGuideManager.triggerExtraGuide&&J>=2&&window.pzaGuideManager.guideShowNeedMoreSun(),J>=3&&(window.pzaGuideManager.guidePlant=null,window.pzazombieManager.wave<=0&&(window.pzazombieManager.nextWaveTime=0))}return B}}}},a.prototype.setPlantSpineData=function(e,a,t){var o,n;if(!1!==k.pzaGameState.isZombieMode()||e&&e.plantData&&e.plantData.plantType!=A.pzaPlantEnum.CHERRY_BOMB){var i=u.pzaGameConfig.getPlantConfig(e.plantData.plantType);if(i&&!0===i.isRider){try{for(var p=r(window.pzaplantManager.plantDataMap),l=p.next();!l.done;l=p.next()){var s=l.value;if(s[1].plantData.plantType==e.plantData.plantType&&s[1].plantData.isPrototypePlant||k.pzaGameState.isZombieMode()){var c="Plant/BK/"+(e.plantData.plantType>=10?"":"0")+e.plantData.plantType+"_plant";return e.plantData.plantType==A.pzaPlantEnum.REPEATER_REVERSE&&(c="Plant/BK/08_plant"),"Plant/BK/30_plant"==c&&(c="Plant/BK/30plant"),void D.pzaResMgr.instance().getSpineSync(c,function(e,o){e?console.error(e):(a&&(a.spineAnimation.skeletonData=o),t&&t())})}}}catch(d){o={error:d}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(o)throw o.error}}e.plantData.isPrototypePlant=!0}t&&t()}else t&&t()},a.prototype.conTryPlantCount=function(){k.pzaGameState.isEndLess()?z.pzaLocalData.data.tryPlantCountArrayEndLess[k.pzaGameState.curTryPlantIndex]--:(z.pzaLocalData.data.tryPlantCountArrayNormal[k.pzaGameState.curTryPlantIndex]--,z.pzaLocalData.addDirty("tryPlantCountArrayNormal")),k.pzaGameState.curTryPlantIndex=null},a.prototype.createAdPlant=function(e,a,t,o){var n=this;if(void 0===o&&(o=!0),this.conTryPlantCount(),u.pzaPlantConfigData.isBowling(e))this.createBowlingNut(e,a,t,!0);else{if(e==A.pzaPlantEnum.GATLING_PEA||e==A.pzaPlantEnum.TWIN_SUNFLOWER||e==A.pzaPlantEnum.GLOOM_SHROOM||e==A.pzaPlantEnum.WINTER_MELON||e==A.pzaPlantEnum.GOLD_MAGNET||e==A.pzaPlantEnum.SPIKEROCK){var i=""+a+t;this.plantDataMap.get(i),this.removeNormalPlant(a,t)}if(e==A.pzaPlantEnum.COB_CANNON){var r=""+a+t;if(this.plantDataMap.get(r)){this.removeNormalPlant(a,t);var p=""+(a+1)+t,l=this.pumpkinDataMap.get(p),c=this.plantDataMap.get(p);a<8&&null==l&&null!=c&&null!=c.plantData&&c.plantData.plantType==A.pzaPlantEnum.KERNEL_PULT?this.removeNormalPlant(a+1,t):(this.removeNormalPlant(a-1,t),a-=1)}else a=this.twoBlockPlantIndexCheck(a,t,!0)}else this.twoBlockPlantMap.has(e)&&(a=this.twoBlockPlantIndexCheck(a,t,!0));var d=u.pzaGameConfig.getPlantConfig(e);if(null!=d&&null!=e){var h=this.createPlantData(e);h.xIndex=a,h.yIndex=t,h&&h.plantData&&(h.plantData.sleeping=!1);var m=g.pzaNodeManager.getPlantZombieNode();if(null!=m){var f=k.pzaGameState.map.getXInterval(a)/2,z=k.pzaGameState.map.getYInterval(t)/3;k.pzaGameState.isRoofMode()&&(z=k.pzaGameState.map.getYInterval(t)/6);var b=k.pzaGameState.map.getBlockLogicPos(a,t,f,z);h.logicPos=b;var P=""+h.xIndex+h.yIndex;if(k.pzaGameState.isNoTargetMap(e)?this.notTargetMap.set(P,h):this.plantDataMap.set(P,h),this.twoBlockPlantMap.has(e)){h.secondXIndex=a+1,h.secondYIndex=t;var E=""+(a+1)+t;this.plantDataMap.set(E,h)}var D=window.pzaMapManager.getPlantBlockType(a,t);if(D==y.pzaBlockType.ROOF||D==y.pzaBlockType.BLANK)null==this.plantEnvDataMap.get(P)&&this.createPlant(A.pzaPlantEnum.FLOWER_POT,a,t,!0,!1),-1!=h.secondXIndex&&-1!=h.secondYIndex&&null==this.plantEnvDataMap.get(""+h.secondXIndex+h.secondYIndex)&&(M=this.getEnvPlantByBlock(h.secondXIndex,h.secondYIndex))&&this.createPlant(M,h.secondXIndex,h.secondYIndex,!0);else if(D==y.pzaBlockType.POND)null==this.plantEnvDataMap.get(P)&&this.createPlant(A.pzaPlantEnum.LILY_PAD,a,t,!0),-1!=h.secondXIndex&&-1!=h.secondYIndex&&null==this.plantEnvDataMap.get(""+h.secondXIndex+h.secondYIndex)&&(M=this.getEnvPlantByBlock(h.secondXIndex,h.secondYIndex))&&this.createPlant(M,h.secondXIndex,h.secondYIndex,!0);else if(u.pzaGameConfig.isNeedFlowerInMap(e)&&D==y.pzaBlockType.GRASS){var M;null==this.plantEnvDataMap.get(P)&&this.createPlant(A.pzaPlantEnum.FLOWER_POT,a,t,!0),-1!=h.secondXIndex&&-1!=h.secondYIndex&&null==this.plantEnvDataMap.get(""+h.secondXIndex+h.secondYIndex)&&(M=this.getEnvPlantByBlock(h.secondXIndex,h.secondYIndex))&&this.createPlant(M,h.secondXIndex,h.secondYIndex,!0)}k.pzaGameState.addPlant(e),C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.UPDATE_PLANT_PRICE,e),C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.PLANT_AD_PLANT,null);var w=function(a){var t=_.pzaPreLoadManager.getPlantUrl(e);e==A.pzaPlantEnum.ICE_SHROOM&&h&&h.plantData&&(h.plantData.sleeping=!1),S.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(e,t){if(null==e&&null!=t){var i=window.pzaMapManager.trackBlockMap.get(""+h.xIndex+h.yIndex);i&&o&&(i.fixedPosition=!1),t.setParent(m),t.setPosition(b);var r=function(){p&&p.bindData(h),a&&p.fadeInAni(),n.plantMap.set(h,p)},p=t.getComponent(s.pzaBaseComponent);a&&(p.node.opacity=0);var l=t.getComponent(G.pzaBasePlant);l?n.setPlantSpineData(h,l.animation,r):r()}else console.error(e)}),R.pzaEffectManager.createPlantEffect(h.logicPos,D,null)},T="show_"+e;if(d&&d.isPlayShowAudio&&v.pzaSoundManager.playAudio(T),o&&!u.pzaPlantConfigData.notShowPortal(e)){var B=window.pzaMapManager.trackBlockMap.get(""+h.xIndex+h.yIndex);B&&o&&(B.fixedPosition=!0),h.creating=!0,R.pzaEffectManager.createPlantPortalEffect(!0,function(){w(!0)},h.logicPos,10*-h.yIndex)}else w(!1)}}}},a.prototype.createRandomPlant=function(e,a,t,o,n,i){var r=this;void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=null),e==A.pzaPlantEnum.PUMPKIN&&z.pzaLocalData.hasNutHealing()&&this.removePumpkin(a,t),this.twoBlockPlantMap.has(e)&&this.twoBlockPlantIndexCheck(a,t)&&(a=this.twoBlockPlantIndexCheck(a,t));var p=u.pzaGameConfig.getPlantConfig(e);if(null!=p&&null!=e){var l=this.createPlantData(e);l.xIndex=a,l.yIndex=t;var d=g.pzaNodeManager.getPlantZombieNode();if(u.pzaPlantConfigData.isLilyPad(e,!0)&&(d=g.pzaNodeManager.getDownEffectNode()),null!=d){var h=k.pzaGameState.map.getXInterval(a)/2,m=k.pzaGameState.map.getYInterval(t)/3;k.pzaGameState.isRoofMode()&&(m=k.pzaGameState.map.getYInterval(t)/6);var f=k.pzaGameState.map.getBlockLogicPos(a,t,h,m);l.logicPos=f;var y=""+a+t;if(u.pzaPlantConfigData.isEnvPlant(e))this.plantEnvDataMap.set(y,l);else if(u.pzaPlantConfigData.isPumPkin(e))this.pumpkinDataMap.set(y,l);else if(e==A.pzaPlantEnum.COFFEE_BEAN);else if(k.pzaGameState.isNoTargetMap(e))this.notTargetMap.set(y,l);else if(this.plantDataMap.has(y)||this.plantDataMap.set(y,l),this.twoBlockPlantMap.has(e)){l.secondXIndex=a+1,l.secondYIndex=t;var v=""+(a+1)+t;this.plantDataMap.has(v)||this.pumpkinDataMap.has(v)||this.plantDataMap.set(v,l)}var b=_.pzaPreLoadManager.getPlantUrl(e);S.pzaBundleObjectPool.requestInstantByUrl(b,!1,function(a,t){if(null!=a||null==t)return console.error(a),void console.log("\u690d\u7269\u9519\u8bef\u7c7b\u578b: ",e);t.setParent(d),t.setPosition(f);var o=t.getComponent(s.pzaBaseComponent);o&&o.bindData(l),n&&r.fireSquashMap.set(i,t.uuid),r.plantMap.set(l,o)});var P=window.pzaMapManager.getPlantBlockType(l.xIndex,l.yIndex);if(R.pzaEffectManager.createPlantEffect(l.logicPos,P,null),null!=p&&p.createCD>0){var E=p.createCD,D=0;z.pzaLocalData.data.beltEquipData.slotList.includes(c.pzaBeltEquipEnum.TianDi)&&(D=c.pzaBeltEquipConfig.getGrowthValue(c.pzaBeltEquipEnum.TianDi)),(E-=D)<0&&(E=0),this.plantCdMap.set(e+this.idxArr[k.pzaGameState.selectIdx],E)}C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.UPDATE_PLANT_PRICE,e)}}},a.prototype.createBowlingNut=function(e,a,t,o){var n=this;void 0===o&&(o=!1);var i=new w.pzaBaseData(e,null);i.xIndex=a,i.yIndex=t;var r=g.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=k.pzaGameState.map.getXInterval(a)/2,l=k.pzaGameState.map.getBlockLogicPos(a,t,p,0);i.logicPos=l;var c=_.pzaPreLoadManager.getPlantUrl(e);S.pzaBundleObjectPool.requestInstantByUrl(c,!1,function(e,a){if(null==e&&null!=a){a.setParent(r),a.setPosition(l);var t=a.getComponent(s.pzaBaseComponent);t&&t.bindData(i),n.plantMap.set(i,t)}else console.error(e)}),o?C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.PLANT_AD_PLANT,null):C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.PLANT_PLANT,null)}},a.prototype.createAdJalapeno=function(){C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:M.pzaBubbleType.cherry,setTime:1});for(var e=k.pzaGameState.map.getMapRow(),a=k.pzaGameState.map.getMapColumn(),t=0;t<e;t++)for(var o=function(e){var a=0!==e,o=n.createPlantData(A.pzaPlantEnum.JALAPENO);o.plantData.adClearPlant=!0,o.xIndex=e,o.yIndex=t;var i=k.pzaGameState.map.getXInterval(e)/2,r=k.pzaGameState.map.getYInterval(t)/3;k.pzaGameState.isRoofMode()&&(r=k.pzaGameState.map.getYInterval(t)/6);var p=k.pzaGameState.map.getBlockLogicPos(e,t,i,r);o.logicPos=p;var l=g.pzaNodeManager.getPlantZombieNode(),s=_.pzaPreLoadManager.getPlantUrl(A.pzaPlantEnum.JALAPENO);S.pzaBundleObjectPool.requestInstantByUrl(s,!1,function(e,t){if(null==e&&null!=t){t.setParent(l),t.setPosition(p);var n=t.getComponent(O.pzaJalapeno);n.isHideEff=a,n.bindData(o)}else console.error(e)});var c=window.pzaMapManager.getPlantBlockType(e,t);R.pzaEffectManager.createPlantEffect(o.logicPos,c,null)},n=this,i=0;i<a;i++)o(i)},a.prototype.createAdCherry=function(){C.pzaWorldEventManager.triggerEvent(C.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:M.pzaBubbleType.cherry,setTime:1});for(var e=k.pzaGameState.map.getMapRow(),a=k.pzaGameState.map.getMapColumn(),t=0;t<a;t++)for(var o=function(e){var a=n.createPlantData(A.pzaPlantEnum.CHERRY_BOMB);a.plantData.adClearPlant=!0,a.xIndex=t,a.yIndex=e;var o=k.pzaGameState.map.getXInterval(t)/2,i=k.pzaGameState.map.getYInterval(e)/3;k.pzaGameState.isRoofMode()&&(i=k.pzaGameState.map.getYInterval(e)/6);var r=k.pzaGameState.map.getBlockLogicPos(t,e,o,i);a.logicPos=r;var p=g.pzaNodeManager.getPlantZombieNode();if(null==p)return{value:void 0};var l=_.pzaPreLoadManager.getPlantUrl(A.pzaPlantEnum.CHERRY_BOMB);S.pzaBundleObjectPool.requestInstantByUrl(l,!1,function(e,t){if(null==e&&null!=t){t.setParent(p),t.setPosition(r);var o=t.getComponent(s.pzaBaseComponent);o&&o.bindData(a)}else console.error(e)});var c=window.pzaMapManager.getPlantBlockType(t,e);R.pzaEffectManager.createPlantEffect(a.logicPos,c,null)},n=this,i=0;i<e;i++){var r=o(i);if("object"==typeof r)return r.value}},a.prototype.recoverSurvivalPlant=function(e){var a=this;if(null!=e){var t=function(e){if(null!=e){var t=e.plantData.plantType,o=g.pzaNodeManager.getPlantZombieNode();if(u.pzaPlantConfigData.isLilyPad(t,!0)&&(o=g.pzaNodeManager.getDownEffectNode()),null!=o){var n=_.pzaPreLoadManager.getPlantUrl(t);S.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(t,n){if(null==t&&null!=n){n.setParent(o),n.setPosition(e.logicPos);var i=n.getComponent(s.pzaBaseComponent);i&&i.bindData(e),a.plantMap.set(e,i),i.pauseSelf()}else console.error(t)})}}};null!=e.plantEnvData&&e.plantEnvData.forEach(function(e){var o=w.pzaBaseData.clonePlantData(e),n=""+o.xIndex+o.yIndex;a.plantEnvDataMap.set(n,o),t(o)}),null!=e.plantData&&e.plantData.forEach(function(e){var o=w.pzaBaseData.clonePlantData(e),n=""+o.xIndex+o.yIndex;if(a.twoBlockPlantMap.has(o.plantData.plantType)){if(a.plantDataMap.has(n))return;var i=""+o.secondXIndex+o.secondYIndex;a.plantDataMap.set(i,o),a.plantDataMap.set(n,o)}else a.plantDataMap.set(n,o);t(o)}),null!=e.pumpkinData&&e.pumpkinData.forEach(function(e){var o=w.pzaBaseData.clonePlantData(e),n=""+o.xIndex+o.yIndex;a.pumpkinDataMap.set(n,o),t(o)}),null!=e.noTargetData&&e.noTargetData.forEach(function(e){var o=w.pzaBaseData.clonePlantData(e),n=""+o.xIndex+o.yIndex;a.notTargetMap.set(n,o),t(o)})}},a.prototype.createJar=function(e){var a=this;if(null!=e){var t=g.pzaNodeManager.getPlantZombieNode();if(null!=t){var o=k.pzaGameState.map.getMapOriPos(),n=cc.v2(o.x+115*e.xIndex+57.5,o.y+120*e.yIndex);S.pzaBundleObjectPool.requestInstantByUrl(_.pzaResourceUrl.JAR,!1,function(o,i){if(null==o&&null!=i){i.setParent(t),i.setPosition(n);var r=i.getComponent(U.pzaJar);r&&r.init(e,function(e){R.pzaEffectManager.createDropPlantCard(e,n,function(){a.pzaJarMap.size<=0&&window.pzazombieManager.zombieMap.size<=0&&(window.pzazombieManager.specialNextWaveTime=3)})});var p=""+e.xIndex+e.yIndex;a.pzaJarMap.set(p,r)}else console.error(o)})}}},a.prototype.bangJar=function(e,a){var t=""+e+a,o=this.pzaJarMap.get(t);return null!=o&&(o.bang(),window.pzaGuideManager.guideType==T.pzaGuideType.GUIDE_BANG_JAR_4_5&&1==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext(),!0)},a.prototype.shovelPlant=function(e,a){v.pzaSoundManager.playAudio("shovelPlant"),this.removeNormalPlant(e,a,!0)||this.removePumpkin(e,a)||this.removeNoTargetPlant(e,a)||this.removeEnvPlant(e,a)},a.prototype.removePlant=function(e){if(null!=e){var a=""+e.xIndex+e.yIndex;if(this.plantDataMap.get(a)==e&&(this.plantDataMap.delete(a),null!=e.plantData&&this.twoBlockPlantMap.has(e.plantData.plantType))){var t=""+e.secondXIndex+e.secondYIndex,o=this.plantDataMap.get(t);o&&o.plantData.plantType==e.plantData.plantType&&this.plantDataMap.delete(t)}this.pumpkinDataMap.get(a)==e&&this.pumpkinDataMap.delete(a),this.plantEnvDataMap.get(a)==e&&this.plantEnvDataMap.delete(a),this.plantMap.delete(e)}},a.prototype.removeNormalPlant=function(e,a,t){void 0===t&&(t=!1);var o=""+e+a,n=this.plantDataMap.get(o);if(null==n)return!1;if(n.plantData&&n.plantData.isProtectPlant){if(t){var i=window.pzaplantManager.getPlantByData(n);i&&i.createTipsBubble("\u88ab\u4fdd\u62a4\u9a91\u58eb\u65e0\u6cd5\u56de\u6536\uff01")}return!0}if(n.isDead=!0,this.plantDataMap.delete(o),null!=n.plantData&&this.twoBlockPlantMap.has(n.plantData.plantType)){var r=""+n.xIndex+n.yIndex,p=""+n.secondXIndex+n.secondYIndex;this.plantDataMap.delete(r),this.plantDataMap.delete(p)}var l=this.plantMap.get(n);return this.plantMap.delete(n),l&&l.close(),!0},a.prototype.removePumpkin=function(e,a){var t=""+e+a,o=this.pumpkinDataMap.get(t);if(null==o)return!1;o.isDead=!0,this.pumpkinDataMap.delete(t);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},a.prototype.removeEnvPlant=function(e,a){var t=""+e+a,o=this.plantEnvDataMap.get(t);if(null==o)return!1;o.isDead=!0,this.plantEnvDataMap.delete(t);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},a.prototype.removeNoTargetPlant=function(e,a){var t=""+e+a,o=this.notTargetMap.get(t);if(null==o)return!1;o.isDead=!0,this.notTargetMap.delete(t);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},a.prototype.bangPlant=function(e,a,t,o){var n=""+e+a,i=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(t,o,B.pzaAttackType.BANG)}var p=window.pzaplantManager.plantDataMap.get(n);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(t,o,B.pzaAttackType.BANG)}var s=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=s){var c=window.pzaplantManager.getPlantByData(s);c&&c.hurt(t,o,B.pzaAttackType.BANG)}},a.prototype.absorbPlant=function(e,a,t,o){var n=""+e+a,i=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(t,o,B.pzaAttackType.DEATH)}var p=window.pzaplantManager.plantDataMap.get(n);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(t,o,B.pzaAttackType.DEATH)}var s=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=s){var c=window.pzaplantManager.getPlantByData(s);c&&c.hurt(t,o,B.pzaAttackType.DEATH)}},a.prototype.hasPlant=function(e,a){var t=""+e+a;return!!(this.plantDataMap.has(t)||this.pumpkinDataMap.has(t)||this.notTargetMap.has(t)||this.plantEnvDataMap.has(t))},a.prototype.canPlant=function(e,a,t){var o=k.pzaGameState.selectPlant;if(o==A.pzaPlantEnum.IMITATER&&(o=k.pzaGameState.curImitaterPlant),u.pzaPlantConfigData.isBowling(o))return t&&e>2&&k.pzaGameState.warnLineTips&&(k.pzaGameState.warnLineTips=!1,b.pzaTipManager.showGameTip("\u4f60\u53ea\u80fd\u5728\u8b66\u6212\u7ebf\u5185\u53ec\u5524\u8f6e\u80ce\u6295\u5f71")),e<=2;var n=window.pzaMapManager.getPlantBlockType(e,a),i=u.pzaGameConfig.getPlantConfig(o),r=i&&i.env,p=""+e+a;if(k.pzaGameState.forceCreateXY&&(k.pzaGameState.forceCreateXY.xIndex!=e||k.pzaGameState.forceCreateXY.yIndex!=a))return!1;if(k.pzaGameState.isNoTargetMap(o))return!this.notTargetMap.has(p);if(this.pzaJarMap.has(p))return!1;var l=window.pzaMapManager.hasTomb(e,a);if(u.pzaPlantConfigData.isBuster(o)){if(!l)return t&&b.pzaTipManager.showSpecialPlantTip(o,i.name),!1}else if(l)return t&&!k.pzaGameState.tombTip&&(k.pzaGameState.tombTip=!0,b.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u5c06\u9a91\u58eb\u653e\u7f6e\u5728\u80fd\u91cf\u67f1\u4e0a")),!1;var s,c=this.plantDataMap.get(p);if((o==A.pzaPlantEnum.WALL_NUT||o==A.pzaPlantEnum.TALL_NUT)&&null!=c&&null!=c.plantData&&c.plantData.plantType==o&&z.pzaLocalData.hasNutHealing())return!0;if(u.pzaPlantConfigData.isPumPkin(o)&&z.pzaLocalData.hasNutHealing()&&null!=(m=this.pumpkinDataMap.get(p)))return!0;if(o==A.pzaPlantEnum.COFFEE_BEAN)return!(null==c||null==c.plantData||!c.plantData.sleeping||!u.pzaGameConfig.getPlantConfig(c.plantData.plantType).isNight)||(t&&b.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==A.pzaPlantEnum.CATTAIL){var d=this.plantEnvDataMap.get(p);return null==c&&null!=d&&null!=d.plantData&&u.pzaPlantConfigData.isLilyPad(d.plantData.plantType)?!c||!c.creating:(t&&b.pzaTipManager.showSpecialPlantTip(o,i.name),!1)}if(o==A.pzaPlantEnum.COB_CANNON){if(n==y.pzaBlockType.TRACK)return!1;var h=this.plantEnvDataMap.get(p),m=this.pumpkinDataMap.get(p),f=""+(e+1)+a;if(null==c&&null==m){if(n==y.pzaBlockType.GRASS||n==y.pzaBlockType.POND&&h&&h.plantData&&h.plantData.plantType==A.pzaPlantEnum.FLOWER_POT){var g=this.plantDataMap.get(f),v=this.plantEnvDataMap.get(f),P=this.pumpkinDataMap.get(f),C=window.pzaMapManager.getPlantBlockType(e+1,a),E=window.pzaMapManager.hasTomb(e+1,a);if(null==g&&null==P&&0==E&&(C==y.pzaBlockType.GRASS||C==y.pzaBlockType.ROOF&&v&&v.plantData&&v.plantData.plantType==A.pzaPlantEnum.FLOWER_POT))return!0;var S=""+(e-1)+a,_=this.plantEnvDataMap.get(f),D=this.plantDataMap.get(S),M=this.pumpkinDataMap.get(S),w=window.pzaMapManager.getPlantBlockType(e-1,a),T=window.pzaMapManager.hasTomb(e-1,a);return!(null!=D||null!=M||0!=T||!(w==y.pzaBlockType.GRASS||w==y.pzaBlockType.ROOF&&_&&_.plantData&&_.plantData.plantType==A.pzaPlantEnum.FLOWER_POT))}return!1}return!1}if(this.twoBlockPlantMap.has(o)){if(n==y.pzaBlockType.TRACK)return!1;if((m=this.pumpkinDataMap.get(p))||c)return!1;f=""+(e+1)+a,g=this.plantDataMap.get(f),P=this.pumpkinDataMap.get(f);var B=window.pzaMapManager.getPlantBlockType(e+1,a),G=window.pzaplantManager.plantEnvDataMap.get(f);if(P||g||this.holeMap.has(f)||e>=8||B!=y.pzaBlockType.GRASS&&!G){S=""+(e-1)+a,D=this.plantDataMap.get(S),M=this.pumpkinDataMap.get(S);var I=window.pzaMapManager.getPlantBlockType(e-1,a),O=window.pzaplantManager.plantEnvDataMap.get(S);if(0===e||M||D||this.holeMap.has(S)||I!=y.pzaBlockType.GRASS&&!O)return!1}}if(u.pzaPlantConfigData.isPotRecoverPlant(o)){var N=""+e+a;if(d=window.pzaplantManager.plantEnvDataMap.get(N)){if(d.plantData.plantType==o)return!1;if(u.pzaPlantConfigData.isPotRecoverPlant(d.plantData.plantType)&&d.plantData.plantType!=o)return!0}}if(n==y.pzaBlockType.TRACK){var L=window.pzaMapManager.trackBlockMap.get(p);if(L&&L.hasTram){if(u.pzaPlantConfigData.isNoTrackPlant(o))return t&&b.pzaTipManager.showGameTip(u.pzaGameConfig.getPlantConfig(A.pzaPlantEnum.DOOM_SHROOM).name+"\u4e0d\u53ef\u4ee5\u53ec\u5524\u5728\u79fb\u52a8\u683c\u5b50\u4e0a"),!1;n=y.pzaBlockType.GRASS}else t&&b.pzaTipManager.showGameTip("\u4e0d\u53ef\u4ee5\u53ec\u5524\u5728\u4f20\u9001\u5e26\u4e0a")}switch(n){case y.pzaBlockType.ICE:return k.pzaGameState.cantPlantTip=!0,b.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u653e\u7f6e\u5728\u8fd9\u91cc"),!1;case y.pzaBlockType.DOOM_HOLE:case y.pzaBlockType.HOLE:if(r!=A.pzaPlantEnvEnum.HOLE)return t&&b.pzaTipManager.showEnvPlantTip(n),!1;break;case y.pzaBlockType.TRACK:if(r!=A.pzaPlantEnvEnum.HOLE)return!1;break;case y.pzaBlockType.BLANK:if(r==A.pzaPlantEnvEnum.ENV14||r==A.pzaPlantEnvEnum.ENV8)break;if(r==A.pzaPlantEnvEnum.ENV20||r==A.pzaPlantEnvEnum.ROOFBLANK){if(this.plantEnvDataMap.has(p))return!1;break}if(this.plantEnvDataMap.has(p))break;return!1;case y.pzaBlockType.GRASS:if(r==A.pzaPlantEnvEnum.ENV8)break;if(r!=A.pzaPlantEnvEnum.NORMAL&&r!=A.pzaPlantEnvEnum.SOIL&&r!=A.pzaPlantEnvEnum.TOMB&&r!=A.pzaPlantEnvEnum.GRASS&&r!=A.pzaPlantEnvEnum.ROOFBLANK&&r!=A.pzaPlantEnvEnum.BOTH&&r!=A.pzaPlantEnvEnum.ENV14&&r!=A.pzaPlantEnvEnum.WithRoof&&r!=A.pzaPlantEnvEnum.ENV20)return t&&r==A.pzaPlantEnvEnum.POND&&b.pzaTipManager.showPondPlantTip(o,i.name),t&&r==A.pzaPlantEnvEnum.HOLE&&b.pzaTipManager.showGameTip("\u53ea\u80fd\u5728\u575a\u56fa\u7684\u5730\u9762\u53ec\u5524"),!1;if(o==A.pzaPlantEnum.FLOWER_POT&&this.plantEnvDataMap.has(p))return!1;break;case y.pzaBlockType.POND:if(r==A.pzaPlantEnvEnum.ENV14||r==A.pzaPlantEnvEnum.ENV8)break;if(r==A.pzaPlantEnvEnum.POND||r==A.pzaPlantEnvEnum.ENV20||r==A.pzaPlantEnvEnum.ENV13){if(this.plantEnvDataMap.has(p))return!1}else{if(r==A.pzaPlantEnvEnum.BOTH)break;if(t&&o==A.pzaPlantEnum.SPIKEWEED&&b.pzaTipManager.showSpecialPlantTip(o,i.name),r!=A.pzaPlantEnvEnum.NORMAL)return t&&o==A.pzaPlantEnum.POTATO_MINE?b.pzaTipManager.showSpecialPlantTip(o,i.name):t&&!k.pzaGameState.cantPlantTip&&(k.pzaGameState.cantPlantTip=!0,b.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u653e\u7f6e\u5728\u8fd9\u91cc")),!1;if(!(u.pzaPlantConfigData.isPumPkin(o)&&null!=c&&c.plantData.plantType==A.pzaPlantEnum.CATTAIL||this.plantEnvDataMap.has(p)))return t&&b.pzaTipManager.showGameTip("\u8bf7\u5148\u53ec\u5524"+u.pzaGameConfig.getPlantConfig(A.pzaPlantEnum.LILY_PAD).name),!1}break;case y.pzaBlockType.ROOF:if(r==A.pzaPlantEnvEnum.ENV14||r==A.pzaPlantEnvEnum.ENV8)break;if(r==A.pzaPlantEnvEnum.ROOFBLANK||r==A.pzaPlantEnvEnum.ENV20){if(this.plantEnvDataMap.has(p))return!1}else{if(t&&o==A.pzaPlantEnum.SPIKEWEED&&b.pzaTipManager.showSpecialPlantTip(o,i.name),r!=A.pzaPlantEnvEnum.NORMAL&&r!=A.pzaPlantEnvEnum.SOIL&&r!=A.pzaPlantEnvEnum.BOTH)return t&&r==A.pzaPlantEnvEnum.POND?b.pzaTipManager.showPondPlantTip(o,i.name):t&&!k.pzaGameState.cantPlantTip&&(k.pzaGameState.cantPlantTip=!0,b.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u653e\u7f6e\u5728\u8fd9\u91cc")),!1;if(!this.plantEnvDataMap.has(p))return t&&b.pzaTipManager.showEnvPlantTip(n),!1}break;default:return!1}return u.pzaPlantConfigData.isPumPkin(o)?!(null!=c&&this.twoBlockPlantMap.has(c.plantData.plantType)||this.pumpkinDataMap.has(p)):o==A.pzaPlantEnum.FLOWER_POT?!((s=this.plantDataMap.get(p))&&s.plantData&&u.pzaPlantConfigData.isSpikePlant(s.plantData.plantType)&&(t&&b.pzaTipManager.showGameTip(u.pzaGameConfig.getPlantConfig(s.plantData.plantType).name+"\u4e0d\u80fd\u4e0e"+u.pzaGameConfig.getPlantConfig(o).name+"\u5728\u540c\u4e00\u683c"),1)):u.pzaPlantConfigData.isSpikePlant(o)&&(s=this.plantEnvDataMap.get(p))&&s.plantData&&s.plantData.plantType==A.pzaPlantEnum.FLOWER_POT?(t&&b.pzaTipManager.showGameTip(u.pzaGameConfig.getPlantConfig(o).name+"\u4e0d\u80fd\u4e0e"+u.pzaGameConfig.getPlantConfig(s.plantData.plantType).name+"\u5728\u540c\u4e00\u683c"),!1):!this.plantDataMap.has(p)},a.prototype.adCanPlant=function(e,a,t){var o=function(e){t&&!k.pzaGameState.cantPlantTip&&(k.pzaGameState.cantPlantTip=!0,b.pzaTipManager.showGameTip(e||"\u4f60\u4e0d\u80fd\u653e\u7f6e\u5728\u8fd9\u91cc"))};if(this.pzaJarMap.has(""+e+a))return o(),!1;if(window.pzaMapManager.hasTomb(e,a))return o("\u4f60\u4e0d\u80fd\u5c06\u9a91\u58eb\u653e\u7f6e\u5728\u80fd\u91cf\u67f1\u4e0a"),!1;var n=k.pzaGameState.selectPlant;if(u.pzaPlantConfigData.isBowling(n))return e<=2;var i=window.pzaMapManager.getPlantBlockType(e,a);if(i==y.pzaBlockType.DOOM_HOLE||i==y.pzaBlockType.HOLE||i==y.pzaBlockType.ICE)return o(),!1;if(n==A.pzaPlantEnum.CATTAIL&&i!=y.pzaBlockType.POND)return o(),!1;if(n==A.pzaPlantEnum.SPIKEROCK&&i==y.pzaBlockType.POND)return o(),!1;if(n==A.pzaPlantEnum.SPIKEROCK&&i==y.pzaBlockType.ROOF)return o(),!1;if(u.pzaPlantConfigData.isSpikePlant(n)){var r=this.plantEnvDataMap.get(""+e+a);if(r&&r.plantData&&r.plantData.plantType==A.pzaPlantEnum.FLOWER_POT)return t&&b.pzaTipManager.showGameTip(u.pzaGameConfig.getPlantConfig(n).name+"\u4e0d\u80fd\u4e0e"+u.pzaGameConfig.getPlantConfig(r.plantData.plantType).name+"\u5728\u540c\u4e00\u683c"),!1}var p=""+e+a,l=this.plantDataMap.get(p);if(k.pzaGameState.isNoTargetMap(n))return!this.notTargetMap.has(p);if(this.twoBlockPlantMap.has(n)){if(i==y.pzaBlockType.TRACK)return!1;if(this.pumpkinDataMap.get(p)||l)return!1;var s=""+(e+1)+a,c=this.plantDataMap.get(s),d=this.pumpkinDataMap.get(s),h=window.pzaMapManager.getBlockType(e+1,a);if(d||c||this.holeMap.has(s)||e>=8||h==y.pzaBlockType.TRACK){var m=""+(e-1)+a,f=this.plantDataMap.get(m),z=this.pumpkinDataMap.get(m),g=window.pzaMapManager.getBlockType(e-1,a);if(0===e||z||f||this.holeMap.has(m)||g==y.pzaBlockType.TRACK)return!1}}else if(null!=l)return!1;if(i==y.pzaBlockType.TRACK){var v=window.pzaMapManager.trackBlockMap.get(p);if(!v||!v.hasTram)return t&&b.pzaTipManager.showGameTip("\u4e0d\u53ef\u4ee5\u53ec\u5524\u5728\u4f20\u9001\u5e26\u4e0a"),!1;if(u.pzaPlantConfigData.isNoTrackPlant(n))return t&&b.pzaTipManager.showGameTip(u.pzaGameConfig.getPlantConfig(A.pzaPlantEnum.DOOM_SHROOM).name+"\u4e0d\u53ef\u4ee5\u53ec\u5524\u5728\u79fb\u52a8\u683c\u5b50\u4e0a"),!1;i=y.pzaBlockType.GRASS}return A.pzaPlantEnum.FLOWER_POT,!0},a.prototype.getCanAttackPlant=function(e,a){var t=""+e+a,o=(this.plantEnvDataMap.get(t),this.pumpkinDataMap.get(t));return null==o&&(o=this.plantDataMap.get(t)),null==o&&(o=this.plantEnvDataMap.get(t)),this.plantMap.get(o)},a.prototype.getPlantByData=function(e){return this.plantMap.get(e)},a.prototype.getCanAttackPlantData=function(e,a,t){void 0===t&&(t=!1);var o=""+e+a;return t&&this.plantDataMap.has(o)?this.plantDataMap.get(o):this.pumpkinDataMap.has(o)?this.pumpkinDataMap.get(o):!t&&this.plantDataMap.has(o)?this.plantDataMap.get(o):this.plantEnvDataMap.get(o)},a.prototype.getRandomBlock=function(e,a){var t=new Set;if(e){var o=new Set;this.plantMap.forEach(function(e,n){if(null!=n){var i=n.xIndex+"-"+n.yIndex;o.has(i)||t.has(i)||null!=a&&a.includes(i)||t.add(i)}})}var n=Array.from(t);if(n.length<=0)for(var i=k.pzaGameState.map.getMapRow(),r=k.pzaGameState.map.getMapColumn(),p=0;p<r;p++)for(var l=0;l<i;l++){var s=p+"-"+l;null!=a&&a.includes(s)||n.push(s)}return P.pzaUtil.getRandomValueFromArray(n)},a.prototype.findFixRangePlants=function(e,a){if(null==e)return null;var t=[];return this.plantMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||P.pzaUtil.getDistance(e,n.logicPos)<=a&&t.push(o)}),t},a.prototype.createPlantData=function(e){var a=new w.pzaBaseData(e,null);if(null==a.plantData)return a;a.plantData.sleeping=k.pzaGameState.gameTimeType==k.pzaGameTimeType.DAY;var t=u.pzaGameConfig.getPlantConfig(e);return null==t?a:(a.hp=a.maxHp=t.hp,a.atk=t.atk,a.plantData.isNight=t.isNight,z.pzaLocalData.data.beltEquipData.slotList.includes(c.pzaBeltEquipEnum.DianWang)&&(a.atk+=c.pzaBeltEquipConfig.getGrowthValue(c.pzaBeltEquipEnum.DianWang)),z.pzaLocalData.data.beltEquipData.slotList.includes(c.pzaBeltEquipEnum.WuQi)&&(a.hp+=c.pzaBeltEquipConfig.getGrowthValue(c.pzaBeltEquipEnum.WuQi)),t instanceof E.pzaZJPlantConf&&(a.plantData.atk2Arr=t.atk2Arr,a.plantData.atkArr=t.atkArr,a.plantData.atkInterval2=t.atkCD2,a.plantData.atkInterval=t.atkCD),a)},a.prototype.getPlantCD=function(e,a){return k.pzaGameState.createPlantNoCD?0:this.plantCdMap.has(e+this.idxArr[a])?this.plantCdMap.get(e+this.idxArr[a]):0},a.prototype.setPlantCD=function(e,a,t){this.plantCdMap.has(e+this.idxArr[a])&&this.plantCdMap.set(e+this.idxArr[a],t)},a.prototype.clearAllCD=function(){var e=this;this.plantCdMap.forEach(function(a,t){e.plantCdMap.set(t,0)})},a.prototype.initPlantCD=function(e){var a=this;if(this.plantCdMap.clear(),null!=e){this.curSelectPlants=Array.from(e);var t=0;e.forEach(function(e){if(t++,e!=A.pzaPlantEnum.IMITATER||null==k.pzaGameState.curImitaterPlant){var o=u.pzaGameConfig.getPlantConfig(e);o&&o.initCD>0&&a.plantCdMap.set(e+a.idxArr[t],o.initCD)}else{var n=u.pzaGameConfig.getPlantConfig(k.pzaGameState.curImitaterPlant);n&&n.initCD>0&&a.plantCdMap.set(e+a.idxArr[t],n.initCD)}})}},a.prototype.getPlantCount=function(e){var a=0;return this.plantMap.forEach(function(t,o){null!=o&&null!=o.plantData&&o.plantData.plantType==e&&a++}),a},a.prototype.getAllPlant=function(e){var a=[];return this.plantMap.forEach(function(t,o){null!=o&&null!=o.plantData&&o.plantData.plantType==e&&a.push(o)}),a},a.prototype.getVoidPotCount=function(){var e=this,a=0;return this.plantMap.forEach(function(t,o){if(null!=o&&null!=o.plantData&&o.plantData.plantType==A.pzaPlantEnum.FLOWER_POT){var n=""+o.xIndex+o.yIndex,i=e.plantDataMap.get(n),r=e.pumpkinDataMap.get(n);null==i&&null==r&&a++}}),a},a.prototype.getAllPlantCount=function(){return this.plantMap.size},a.prototype.clearAllPlant=function(){this.plantDataMap.clear(),this.plantEnvDataMap.clear(),this.pumpkinDataMap.clear(),this.plantMap.forEach(function(e,a){a&&(a.isDead=!0),e&&e.close()}),this.plantMap.clear(),this.dropPlantCards.forEach(function(e){e&&e.close()}),this.dropPlantCards.clear(),this.pzaJarMap.forEach(function(e){e&&e.close()}),this.pzaJarMap.clear(),this.fireSquashMap.clear(),this.createEffectSet.forEach(function(e){e&&e.close()}),this.createEffectSet.clear()},a.prototype.createStarFruitShadow=function(e,a){var t=this,o=k.pzaGameState.map.getXInterval(e)/2,n=k.pzaGameState.map.getYInterval(a)/3,i=k.pzaGameState.map.getBlockLogicPos(e,a,o,n),r=g.pzaNodeManager.getPlantZombieNode(),p=""+e+a;S.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Plant/StarFruitShadow",!1,function(e,a){if(null==e&&null!=a){a.setParent(r),a.setPosition(i);var o=a.getComponent(N.pzaStarFruitShadow);t.starFruitMap.set(p,o)}else console.error(e)})},a.prototype.createFlowerPotShadow=function(e,a){var t=this,o=k.pzaGameState.map.getXInterval(e)/2,n=k.pzaGameState.map.getYInterval(a)/3,i=k.pzaGameState.map.getBlockLogicPos(e,a,o,n),r=g.pzaNodeManager.getPlantZombieNode(),p=""+e+a;S.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Plant/FlowerPotShadow",!1,function(a,o){if(null==a&&null!=o){o.setParent(r),o.setPosition(i),o.zIndex=200;var n=o.getComponent(I.pzaFlowerPotShadow);t.flowerPotShadowMap.set(p,n),3!=e&&n.hideNode()}else console.error(a)})},a.prototype.getEnvPlantByBlock=function(e,a){var t=window.pzaMapManager.getPlantBlockType(e,a);return t==y.pzaBlockType.POND?A.pzaPlantEnum.LILY_PAD:t==y.pzaBlockType.ROOF||t==y.pzaBlockType.BLANK?A.pzaPlantEnum.FLOWER_POT:u.pzaGameConfig.isNeedFlowerInMap()&&t==y.pzaBlockType.GRASS?A.pzaPlantEnum.FLOWER_POT:null},a.prototype.twoBlockPlantIndexCheck=function(e,a,t){if(void 0===t&&(t=!1),e>0){var o=""+(e+1)+a,n=this.pumpkinDataMap.get(o),i=this.plantDataMap.get(o),r=window.pzaMapManager.getPlantBlockType(e+1,a),p=window.pzaplantManager.plantEnvDataMap.get(o);if(n||i||this.holeMap.has(o)||e>=8||!t&&r!=y.pzaBlockType.GRASS&&!p||r==y.pzaBlockType.TRACK)return e-1}return e},i([W],a)}(cc.Component));t.pzaPlantManager=Z,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGameSurEndless":"pzaGameSurEndless","../Common/pzaGameSurvival":"pzaGameSurvival","../Common/pzaLocalData":"pzaLocalData","../Common/pzaMapManager":"pzaMapManager","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZJPlantConf":"pzaZJPlantConf","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaBubbleItem":"pzaBubbleItem","../utils/pzaResMgr":"pzaResMgr","./Data/pzaBaseData":"pzaBaseData","./Data/pzaGuideType":"pzaGuideType","./Data/pzaPlantEnum":"pzaPlantEnum","./Plant/pzaAttackType":"pzaAttackType","./Plant/pzaBasePlant":"pzaBasePlant","./Plant/pzaFlowerPotShadow":"pzaFlowerPotShadow","./Plant/pzaJalapeno":"pzaJalapeno","./Plant/pzaStarFruitShadow":"pzaStarFruitShadow","./pzaBrain":"pzaBrain","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState","./pzaJar":"pzaJar","./pzaSunLight":"pzaSunLight"}],pzaPlantSelectCardList:[function(e,a,t){"use strict";cc._RF.push(a,"1fd6bOvfHhGU7STqwU/NFaY","pzaPlantSelectCardList");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantSelectCardList=void 0;var r=e("../../Battle/pzaGameState"),p=e("./pzaPlantCard"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardList=[],a.oriPosArr=[],a.selectPlants=[],a}return n(a,e),a.prototype.onLoad=function(){for(var e=0;e<this.cardList.length;e++){var a=this.cardList[e];null!=a&&this.oriPosArr.push(cc.v2(a.node.position.x,a.node.position.y))}},a.prototype.init=function(){this.selectPlants=[],this.cardList.forEach(function(e){e&&e.bagSelectPlant(null,null)})},a.prototype.refreshAllSunVal=function(){for(var e=0;e<this.cardList.length;e++)this.cardList[e].updatePrice()},a.prototype.refreshOriPos=function(){this.oriPosArr=[];for(var e=0;e<9;e++){var a=this.cardList[e];null!=a&&this.oriPosArr.push(cc.v2(a.node.position.x,a.node.position.y))}},a.prototype.getNextVoidPos=function(){var e=this.oriPosArr[this.selectPlants.length];return null==e?null:this.node.convertToWorldSpaceAR(e)},a.prototype.getNextVoidCard=function(){for(var e=0;e<9;e++){var a=this.cardList[e];if(null!=a&&null==a.curPlantType)return a}return null},a.prototype.selectPlant=function(e,a,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=!1);var i=this.getNextVoidCard();if(null!=i){var r=this.oriPosArr[this.selectPlants.length-1];i.node.setPosition(r.clone()),i.bagSelectPlant(e,a,t,o,n)}},a.prototype.removeSelect=function(e){var a=this.selectPlants.indexOf(e);if(!(a<0)){for(var t=a+1;t<this.selectPlants.length;t++){var o=this.getCardByPlantType(this.selectPlants[t]);if(null!=o){var n=this.oriPosArr[t-1];o.moveTo(n,.1,null)}}this.selectPlants.splice(a,1)}},a.prototype.getCardByPlantType=function(e){for(var a=0;a<this.cardList.length;a++){var t=this.cardList[a];if(null!=t&&t.curPlantType==e)return t}return null},a.prototype.hasPlant=function(e){return null!=e&&null!=this.selectPlants&&(r.pzaGameState.curImitaterPlant==e||this.selectPlants.indexOf(e)>=0)},a.prototype.showNext=function(){for(var e=0;e<8;e++)this.cardList[e].node.active=!1;for(e=8;e<this.cardList.length;e++)this.cardList[e].node.active=!1},a.prototype.showPrev=function(){for(var e=0;e<8;e++)this.cardList[e].node.active=!0;for(e=8;e<this.cardList.length;e++)this.cardList[e].node.active=!1},i([c({displayName:"\u5361\u7247\u5217\u8868",type:[p.pzaPlantCard]})],a.prototype,"cardList",void 0),i([s],a)}(cc.Component);t.pzaPlantSelectCardList=u,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","./pzaPlantCard":"pzaPlantCard"}],pzaPlantSelectDesc:[function(e,a,t){"use strict";cc._RF.push(a,"aa4665pVtVDuZKb6o1e3lWj","pzaPlantSelectDesc");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantSelectDesc=void 0;var p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/Data/pzaZombieEnum"),s=e("../../Battle/DemoBattle/pzaDemoBaseComp"),c=e("../../Battle/DemoBattle/pzaDemoBasePlant"),u=e("../../Battle/DemoBattle/pzaDemoBaseZombie"),d=e("../../Battle/DemoBattle/pzaDemoConf"),h=e("../../Battle/DemoBattle/pzaDemoMgr"),m=e("../../Battle/pzaGameState"),f=e("../../Common/pzaGameCommonPool"),z=e("../../Common/pzaGameConfig"),y=e("../../Common/pzaSpineController"),g=e("../../Common/pzaSpriteFrameManager"),v=e("../../Common/pzaWorldEventManager"),b=e("../../utils/pzaResMgr"),P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.demoScene=null,a.plantIcon=null,a.plantName=null,a.plantDesc=null,a.profession=null,a.professionSPF=[],a.map=null,a.mapSPF=[],a.spine_1=null,a.spine_2=null,a.demoZombie=null,a.bagPlantCard=null,a.playPlantType=p.pzaPlantEnum.PEA_SHOOTER,a.startPos=cc.v2(200,50),a.blockWidth=120,a.blockHeight=120,a}return n(a,e),a.prototype.onEnable=function(){v.pzaWorldEventManager.addListener(v.pzaWorldEventType.BACK_HOMEVIEW,this.hideSelf,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.PLAY_DEMOSCENE,this.playDemoScene,this)},a.prototype.onDisable=function(){v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.BACK_HOMEVIEW,this.hideSelf,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.PLAY_DEMOSCENE,this.playDemoScene,this),m.pzaGameState.demoScene=null},a.prototype.update=function(e){m.pzaGameState.demoScene&&h.pzaDemoMgr.DemoLogicUpdate(e)},a.prototype.setScaleView=function(e){this.node.scale=e},a.prototype.hideSelf=function(){this.clearSceneContent(),this.node.active=!1,m.pzaGameState.demoScene=null},a.prototype.setView=function(e,a){this.node.active&&(h.pzaDemoMgr.zombieArr.clear(),this.bagPlantCard&&this.bagPlantCard.hideCheckTag(),a&&(a.showCheckTag(),this.bagPlantCard=a),h.pzaDemoMgr.clearRestarTimer(),m.pzaGameState.demoScene=this.demoScene,this.playPlantType=e,this.playDemoScene())},a.prototype.playDemoScene=function(){if(m.pzaGameState.demoScene){var e=this.playPlantType,a=z.pzaGameConfig.getPlantConfig(e);this.plantDesc.string=z.pzaGameConfig.PlantBookMap.get(e).desc,a.isNight||e==p.pzaPlantEnum.GRAVE_BUSTER?this.plantDesc.string+="\n\u767d\u5929\u88ab\u5c01\u5370":e==p.pzaPlantEnum.SPIKEROCK||e==p.pzaPlantEnum.SPIKEWEED?this.plantDesc.string+="\n\u53ef\u4ee5\u77ac\u95f4\u7834\u574f\u5f02\u7c7b\u9a70\u9a91":e==p.pzaPlantEnum.Gene_SnowPea&&(this.plantDesc.string+="\n\u8d25\u9000\u65f6\u51b0\u51bb3X3\u8303\u56f4\u7684\u602a\u4eba"),this.plantName.string=a.name,g.pzaSpriteFrameManager.loadDescPlantCG(e.toString(),this.plantIcon),this.clearSceneContent(),this.showMap(e),this.showProfessIcon(e),this.spine_1.node.active=!1;var t=!0;switch(e){case p.pzaPlantEnum.SUN_FLOWER:case p.pzaPlantEnum.TWIN_SUNFLOWER:case p.pzaPlantEnum.LILY_PAD:case p.pzaPlantEnum.COB_CANNON:case p.pzaPlantEnum.MARIGOLD:case p.pzaPlantEnum.PLANTERN:t=!1;break;case p.pzaPlantEnum.CHOMPER:case p.pzaPlantEnum.SUN_SHROOM:case p.pzaPlantEnum.GRAVE_BUSTER:case p.pzaPlantEnum.HYPNO_SHROOM:case p.pzaPlantEnum.ICE_SHROOM:case p.pzaPlantEnum.SQUASH:case p.pzaPlantEnum.TANGLE_KELP:case p.pzaPlantEnum.COFFEE_BEAN:case p.pzaPlantEnum.MAGNET_SHROOM:case p.pzaPlantEnum.TORCHWOOD:case p.pzaPlantEnum.SUN_SHROOM:case p.pzaPlantEnum.GARLIC:case p.pzaPlantEnum.BLOVER:return this.spine_1.node.active=!0,t=!1,void this.showAni(e);case p.pzaPlantEnum.STAR_FRUIT:return this.createDemoPlant(cc.v2(2,1)),this.createDemoZombie(cc.v2(4,0)),this.createDemoZombie(cc.v2(4,2)),void this.createDemoZombie(cc.v2(0,1));case p.pzaPlantEnum.GLOOM_SHROOM:return this.createDemoPlant(),this.createDemoZombie(cc.v2(3,1)),this.createDemoZombie(cc.v2(2,2)),void this.createDemoZombie(cc.v2(2,0));case p.pzaPlantEnum.THREE_PEATER:return this.createDemoPlant(),this.createDemoZombie(cc.v2(4,2)),this.createDemoZombie(cc.v2(4,1)),void this.createDemoZombie(cc.v2(4,0));case p.pzaPlantEnum.TALL_NUT:return this.createDemoPlant(),void this.createDemoZombie(cc.v2(2,1),!1).addComponent(u.pzaDemoJumpZombieLogic).init(this.playPlantType,l.pzaZombieEnum.POGO_ZOMBIE);case p.pzaPlantEnum.SPLIT_PEA:return this.createDemoPlant(cc.v2(2,1)),this.createDemoZombie(cc.v2(0,1)),void this.createDemoZombie(cc.v2(4,1));case p.pzaPlantEnum.PUMPKIN:this.createDemoPlant(cc.v2(1,1),p.pzaPlantEnum.PEA_SHOOTER);break;case p.pzaPlantEnum.FLOWER_POT:var o=this.createDemoPlant(cc.v2(2,1),p.pzaPlantEnum.PEA_SHOOTER,!1),n=o.addComponent(c.pzaDemoBasePlant);return n.init(p.pzaPlantEnum.PEA_SHOOTER),n.onFrozen(),void this.createDemoPlant(cc.v2(2,1)).getComponent(c.pzaDemoIdleLogic).setFlowerPotTarget(o.getComponent(c.pzaDemoBasePlant));case p.pzaPlantEnum.MELON_PULT:case p.pzaPlantEnum.WINTER_MELON:this.createDemoZombie(cc.v2(4,2)),this.createDemoZombie(cc.v2(4,0))}this.createDemoPlant(),t&&this.createDemoZombie()}},a.prototype.createDemoPlant=function(e,a,t){void 0===t&&(t=!0);var o=new cc.Node("plant");o.parent=this.demoScene;var n=this.playPlantType;a&&(n=a);var i=d.pzaDemoConf.getInitPlantPos(n);return e&&(i=e),o.setPosition(m.pzaGameState.getDemoLogicPos(i.x,i.y)),t&&d.pzaDemoConf.addPlantLogicComp(o,n),o},a.prototype.createDemoZombie=function(e,a){void 0===a&&(a=!0);var t=cc.instantiate(this.demoZombie);t.parent=this.demoScene;var o=d.pzaDemoConf.getInitZombiePos(this.playPlantType);if(e&&(o=e),t.setPosition(m.pzaGameState.getDemoLogicPos(o.x,o.y,cc.v2(-20,-m.pzaGameState.demo_blockHeight/5))),a){var n=d.pzaDemoConf.addZombieLogicComp(t,this.playPlantType);this.playPlantType!=p.pzaPlantEnum.SEA_SHROOM&&this.playPlantType!=p.pzaPlantEnum.CATTAIL||n&&n.showWaterEff()}return t},a.prototype.showAni=function(e){var a=this;if(e){var t="Plant/Desc/"+(e>=10?e.toString():"0"+e)+"_plant2";b.pzaResMgr.instance().getSpineSync(t,function(t,o){t?console.error(t):(a.reSetAniPos(e),a.spine_1.spineAnimation.skeletonData=o,a.spine_1.spineAnimation.premultipliedAlpha=!1,a.spine_1.playAnimation("attack4",!0))})}},a.prototype.reSetAniPos=function(e){e==p.pzaPlantEnum.CHOMPER?this.spine_1.node.setPosition(-207.41,0):e==p.pzaPlantEnum.PLANTERN?(this.spine_1.node.setPosition(0,0),this.spine_1.spineAnimation.premultipliedAlpha=!0):(this.spine_1.node.setPosition(0,0),this.spine_1.spineAnimation.premultipliedAlpha=!1)},a.prototype.clearSceneContent=function(){var e,a;try{for(var t=r(this.demoScene.children),o=t.next();!o.done;o=t.next()){var n=o.value;if(n){var i=n.getComponent(s.pzaDemoBaseComp);i&&i.close()}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},a.prototype.showProfessIcon=function(e){var a=z.pzaGameConfig.getPlantConfig(e);a&&a.profession&&(this.profession.spriteFrame=this.professionSPF[a.profession-1])},a.prototype.showMap=function(e){var a=z.pzaGameConfig.getPlantConfig(e);a&&(e==p.pzaPlantEnum.LILY_PAD||e==p.pzaPlantEnum.TANGLE_KELP||e==p.pzaPlantEnum.CATTAIL?this.map.spriteFrame=this.mapSPF[2]:e==p.pzaPlantEnum.SEA_SHROOM?this.map.spriteFrame=this.mapSPF[3]:e==p.pzaPlantEnum.FLOWER_POT||e==p.pzaPlantEnum.CABBAGE_PULT||e==p.pzaPlantEnum.KERNEL_PULT||e==p.pzaPlantEnum.MELON_PULT||e==p.pzaPlantEnum.WINTER_MELON?this.map.spriteFrame=this.mapSPF[4]:a.isNight||e==p.pzaPlantEnum.GRAVE_BUSTER||e==p.pzaPlantEnum.PLANTERN?this.map.spriteFrame=this.mapSPF[1]:this.map.spriteFrame=this.mapSPF[0])},a.prototype.close=function(){f.pzaGameCommonPool.returnInstant(this.node)},i([E(cc.Node)],a.prototype,"demoScene",void 0),i([E(cc.Sprite)],a.prototype,"plantIcon",void 0),i([E(cc.Label)],a.prototype,"plantName",void 0),i([E(cc.Label)],a.prototype,"plantDesc",void 0),i([E(cc.Sprite)],a.prototype,"profession",void 0),i([E([cc.SpriteFrame])],a.prototype,"professionSPF",void 0),i([E(cc.Sprite)],a.prototype,"map",void 0),i([E([cc.SpriteFrame])],a.prototype,"mapSPF",void 0),i([E(y.pzaSpineController)],a.prototype,"spine_1",void 0),i([E(y.pzaSpineController)],a.prototype,"spine_2",void 0),i([E(cc.Prefab)],a.prototype,"demoZombie",void 0),i([C],a)}(cc.Component);t.pzaPlantSelectDesc=S,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../../Battle/DemoBattle/pzaDemoBaseComp":"pzaDemoBaseComp","../../Battle/DemoBattle/pzaDemoBasePlant":"pzaDemoBasePlant","../../Battle/DemoBattle/pzaDemoBaseZombie":"pzaDemoBaseZombie","../../Battle/DemoBattle/pzaDemoConf":"pzaDemoConf","../../Battle/DemoBattle/pzaDemoMgr":"pzaDemoMgr","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaResMgr":"pzaResMgr"}],pzaPlantSelectView:[function(e,a,t){"use strict";cc._RF.push(a,"2968fkttspIT5a1kZ/KNhdN","pzaPlantSelectView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantSelectView=void 0;var p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/Data/pzaZombieEnum"),s=e("../../Battle/pzaGameState"),c=e("../../Common/pzaGameCommonPool"),u=e("../../Common/pzaGameConfig"),d=e("../../Common/pzaGameManager"),h=e("../../Common/pzaGamePartConfig"),m=e("../../Common/pzaLocalData"),f=e("../../Common/pzaSoundManager"),z=e("../../Common/pzaStatisticsMgr"),y=e("../../Common/pzaTipManager"),g=e("../../Common/pzaUIManager"),v=e("../../Common/pzaUtil"),b=e("../../Common/pzaWorldEventManager"),P=e("../../Load/pzaPreLoadManager"),C=e("../../utils/pzaChannel"),E=e("../pzaCommonMask"),S=e("../pzaHandbookView"),_=e("../pzaShopView"),D=e("../pzaWarningView"),M=e("./pzaBagPlantCard"),w=e("./pzaImitaterSelectView"),T=e("./pzaMenuView"),A=e("./pzaPlantSelectDesc"),B=e("./pzaPlantCard"),G=e("./pzaPlantSelectCardList"),I=e("../../utils/pzakc"),O=cc._decorator,N=O.ccclass,L=O.property,R=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardPrefab=null,a.cardBag=null,a.startBtn=null,a.bagNode=null,a.cardSelectList=null,a.cardSlotNode=null,a.cardSlotList=[],a.guideArrowNode=null,a.shopBtn=null,a.lookLawnBtn=null,a.bookBtn=null,a.imitaterNode=null,a.imitaterMask=null,a.imitaterSelectView=null,a.adSlot=null,a.slotAdCount=null,a.adSlotFrames=[],a.nextPage=null,a.nextArrow=null,a.trialPlant=null,a.trialPlantName=null,a.trialPlantDesc=null,a.trialPlantSp=null,a.trialPlantSpData=[],a.DaveDialog=null,a.clearCardBtn=null,a.skipPartNode=null,a.drawDescNode=null,a.trialPlantSprite=null,a.plantDesc=null,a.nodes_allProfess=[],a.imgs_allProfess=[],a.extraPlantCard=null,a.arrowIsDown=!0,a.bagCards=[],a.startGameCall=null,a}var t;return n(a,e),t=a,Object.defineProperty(a,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),a.prototype.onEnable=function(){this.extraPlantCard.node.active=!1,C.pzaChannel.instance().closeBanner(),this.shopBtn.active=m.pzaLocalData.data.unlockShop,this.bookBtn.active=m.pzaLocalData.data.unlockBook,this.imitaterNode.active=m.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.IMITATER),this.imitaterSelectView.node.active=!1,this.imitaterMask.active=!1,this.lookLawnBtn.active=!1,this.nextPage.active=!1,this.arrowIsDown=!0,this.DaveDialog.active=!1,b.pzaWorldEventManager.addListener(b.pzaWorldEventType.SELECT_CARD,this.selectCard,this),b.pzaWorldEventManager.addListener(b.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,this.updateCardsSunVal,this),b.pzaWorldEventManager.addListener(b.pzaWorldEventType.SET_CARDLIST,this.setCardsType,this),b.pzaWorldEventManager.addListener(b.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,this.showWeakGuide,this);var e=this.isFull();v.pzaUtil.switchGraySprite(this.startBtn,e),this.showBtnAni(0,0)},a.prototype.onDisable=function(){t._instance=null,this.clearBag(),b.pzaWorldEventManager.removeListener(b.pzaWorldEventType.SELECT_CARD,this.selectCard,this),b.pzaWorldEventManager.removeListener(b.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,this.updateCardsSunVal,this),b.pzaWorldEventManager.removeListener(b.pzaWorldEventType.SET_CARDLIST,this.setCardsType,this),b.pzaWorldEventManager.removeListener(b.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.showCardDesc,this),b.pzaWorldEventManager.removeListener(b.pzaWorldEventType.WEAKGUIDE_CLICKFREEBTN,this.showWeakGuide,this)},a.prototype.preLoadPlantPrefab=function(e,a){var t=function(){return 10*m.pzaLocalData.data.curChapter+m.pzaLocalData.data.curPart>10*s.pzaGameState.curChapter+s.pzaGameState.curPart},o=[];o=v.pzaUtil.deepCloneArray(e),!1===t()&&1==s.pzaGameState.curChapter&&6==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.CHOMPER):!1===t()&&1==s.pzaGameState.curChapter&&8==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.PUFF_SHROOM):!1===t()&&2==s.pzaGameState.curChapter&&3==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.FUME_SHROOM):!1===t()&&2==s.pzaGameState.curChapter&&6==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.HYPNO_SHROOM):!1===t()&&2==s.pzaGameState.curChapter&&8==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.ICE_SHROOM):!1===t()&&3==s.pzaGameState.curChapter&&3==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.TANGLE_KELP):!1===t()&&3==s.pzaGameState.curChapter&&6==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.SPIKEWEED):!1===t()&&3==s.pzaGameState.curChapter&&8==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.TALL_NUT):!1===t()&&4==s.pzaGameState.curChapter&&3==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.BLOVER):!1===t()&&4==s.pzaGameState.curChapter&&6==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.SPLIT_PEA):!1===t()&&4==s.pzaGameState.curChapter&&8==s.pzaGameState.curPart?o.push(p.pzaPlantEnum.MAGNET_SHROOM):!1===t()&&5==s.pzaGameState.curChapter&&6==s.pzaGameState.curPart&&o.push(p.pzaPlantEnum.UMBRELLA_LEAF),P.pzaPreLoadManager.preLoadPrefabByPlantList(o,function(){a&&a()})},a.prototype.showWeakGuide=function(e){this.extraPlantCard.node.active=!0,this.extraPlantCard.bindData(e,this.clickListCardCall.bind(this),this.showGuideArrow.bind(this),999),this.extraPlantCard.setExtraPlantCard(),this.extraPlantCard.node.setPosition(0,0)},a.prototype.playWeakGuideCardAct=function(){this.extraPlantCard&&this.extraPlantCard.playMoveAct()},a.prototype.showCardDesc=function(e,a){this.bagNode.active&&(this.plantDesc.node.active=!0,this.plantDesc.setView(e,a))},a.prototype.setCardsType=function(e){var a=e;this.cardSelectList.selectPlants=a,window.pzaplantManager.curSelectPlants=a,this.initPlant(a)},a.prototype.init=function(e,a){var o=this;if(void 0===e&&(e=null),void 0===a&&(a=null),b.pzaWorldEventManager.addListener(b.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.showCardDesc,this),t._instance=this,this.guideArrowNode.active=!1,this.nextPage.active=!1,this.drawDescNode.active=!1,s.pzaGameState.cardIsMove=!1,this.checkSkipBtnActive(),null!=e)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(e),this.bagNode.active=!1,this.cardSlotNode.active=!1,void this.preLoadPlantPrefab(e,a);s.pzaGameState.isSelectPlant=!0;var n=u.pzaGameConfig.getPartFixedPlant();if(n){this.startGameCall=a,this.initGameSetup(),n.forEach(function(e){o.cardSelectList.selectPlants.push(e),o.cardSelectList.selectPlant(e,o.putPlantToBagCall.bind(o),e==p.pzaPlantEnum.IMITATER,!1,!0),e==p.pzaPlantEnum.COFFEE_BEAN||e==p.pzaPlantEnum.IMITATER&&(o.imitaterMask.active=!0)}),this.bagCards.forEach(function(e){null==e||e.lock||(null!=e.curPlantType&&n.indexOf(e.curPlantType)>=0&&e.initSelect(),i&&e.selectFull(!0))});var i=this.isFull();v.pzaUtil.switchGraySprite(this.startBtn,i)}else if(m.pzaLocalData.isWeekTwo){this.startGameCall=a,this.initGameSetup(),this.weekTwoInit();var r=this.isFull();v.pzaUtil.switchGraySprite(this.startBtn,r)}else{if(s.pzaGameState.isSurvival()){var l=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];if(l&&l.length>0)for(var c=0;c<l.length;c++)m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode].splice(c)}this.startGameCall=a,this.initGameSetup(),this.initLastSelectPlants();var d=this.isFull();v.pzaUtil.switchGraySprite(this.startBtn,d)}},a.prototype.initGameSetup=function(){this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.cardSlotNode.active=!0;for(var e=0;e<this.cardSlotList.length;e++){var a=this.cardSlotList[e];null!=a&&(a.active=e<m.pzaLocalData.data.plantSlotCount)}this.trialPlant.active=!1,this.DaveDialog.active=!1,this.plantDesc.hideSelf()},a.prototype.updateCardsSunVal=function(){this.cardSelectList.refreshAllSunVal()},a.prototype.survivalInit=function(e,a){if(b.pzaWorldEventManager.addListener(b.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.showCardDesc,this),this.guideArrowNode.active=!1,this.nextPage.active=!1,s.pzaGameState.cardIsMove=!1,this.checkSkipBtnActive(),null!=e)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(e),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(this.cardSelectList.selectPlants),this.initPlant(),void(a&&a());this.startGameCall=a,this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!0;for(var t=0;t<this.cardSlotList.length;t++){var o=this.cardSlotList[t];null!=o&&(o.active=t<m.pzaLocalData.data.plantSlotCount)}this.initLastSelectPlants(),s.pzaGameState.hasPlantSelect=!0;var n=this.isFull();v.pzaUtil.switchGraySprite(this.startBtn,n)},a.prototype.miniGameInit=function(e,a){if(b.pzaWorldEventManager.addListener(b.pzaWorldEventType.SHOW_SELECTCARD_DESC,this.showCardDesc,this),this.guideArrowNode.active=!1,s.pzaGameState.cardIsMove=!1,this.checkSkipBtnActive(),null!=e)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(e),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(this.cardSelectList.selectPlants),this.initPlant(),void(a&&a());this.startGameCall=a,this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!1;for(var t=0;t<this.cardSlotList.length;t++){var o=this.cardSlotList[t];null!=o&&(o.active=t<m.pzaLocalData.data.plantSlotCount)}14!=s.pzaGameState.curPart?this.initLastSelectPlants():this.initStarFruit()},a.prototype.weekTwoInit=function(){var e=this,a=function(a){var t,o,n=u.pzaGameConfig.canChoosePlants(s.pzaGameState.curChapter);n=n.filter(function(e){return!a.includes(e)}),s.pzaGameState.weekTwoInitPlants.length<=0&&(s.pzaGameState.weekTwoInitPlants=v.pzaUtil.getRandomArrayValue(n,3));for(var i=function(e){var a,t,o=s.pzaGameState.weekTwoInitPlants[e],i=u.pzaGameConfig.getPlantConfig(o).relationTypeArr;if(!i)return"continue";try{for(var p=(a=void 0,r(i)),l=p.next();!l.done;l=p.next()){var c=l.value;if(c!=o&&s.pzaGameState.weekTwoInitPlants.indexOf(c)>=0){var d=n;d=d.filter(function(e){return!i.includes(e)});var h=v.pzaUtil.getRandomArrayValue(d,1);s.pzaGameState.weekTwoInitPlants[e]=h[0]}}}catch(m){a={error:m}}finally{try{l&&!l.done&&(t=p.return)&&t.call(p)}finally{if(a)throw a.error}}},l=0;l<s.pzaGameState.weekTwoInitPlants.length;l++)i(l);s.pzaGameState.weekTwoInitPlants.forEach(function(a){e.cardSelectList.selectPlants.push(a),e.cardSelectList.selectPlant(a,e.putPlantToBagCall.bind(e),a==p.pzaPlantEnum.IMITATER,!0)}),e.bagCards.forEach(function(e){null==e||e.lock||s.pzaGameState.weekTwoInitPlants.indexOf(e.curPlantType)>=0&&(e.selectFull(!0),e.isSelected=!0,e.weekTwoLock=!0,e.refreshRecommend(!1))});try{for(var c=r(s.pzaGameState.weekTwoInitPlants),d=c.next();!d.done;d=c.next()){var h=d.value;h&&e.checkPlantRelation(h)}}catch(m){t={error:m}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}},t=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];if(null==t||t.length<=0)a([]);else{t.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)>=0&&m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)<0&&(t=t.filter(function(e){return e!==p.pzaPlantEnum.SUPER_CHOMPER})),s.pzaGameState.curImitaterPlant=m.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode];for(var o=[],n=3;n<t.length;n++)o.push(t[n]);a(o),o=o.filter(function(e){var a,t,o,n,i=u.pzaGameConfig.getPlantConfig(e).relationTypeArr;if(i)try{for(var p=r(s.pzaGameState.weekTwoInitPlants),l=p.next();!l.done;l=p.next()){var c=l.value;try{for(var d=(o=void 0,r(i)),h=d.next();!h.done;h=d.next()){var m=h.value;if(c!=e&&c==m)return!1}}catch(f){o={error:f}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(o)throw o.error}}}}catch(z){a={error:z}}finally{try{l&&!l.done&&(t=p.return)&&t.call(p)}finally{if(a)throw a.error}}return!0}),this.createLastCards(o)}},a.prototype.initStarFruit=function(){this.cardSelectList.selectPlants.push(p.pzaPlantEnum.STAR_FRUIT),this.cardSelectList.selectPlant(p.pzaPlantEnum.STAR_FRUIT,this.putPlantToBagCall.bind(this),!1,!0),this.bagCards.forEach(function(e){null==e||e.lock||e.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&e.selectFull(!0)})},a.prototype.initLastSelectPlants=function(){var e=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];null==e||e.length<=0||(s.pzaGameState.isMiniMode()&&(e=[]),s.pzaGameState.isMainMode()&&m.pzaLocalData.data.curChapter==s.pzaGameState.curChapter&&m.pzaLocalData.data.curPart==s.pzaGameState.curPart&&1==s.pzaGameState.curPart&&(e=[]),s.pzaGameState.curImitaterPlant=m.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode],this.createLastCards(e))},a.prototype.disablePlant=function(e,a){-1!=e.indexOf(a)&&e.splice(e.indexOf(a)),s.pzaGameState.curImitaterPlant==a&&(s.pzaGameState.curImitaterPlant=null)},a.prototype.createLastCards=function(e){var a=this,t=!1;e.forEach(function(e){a.cardSelectList.selectPlants.push(e),a.cardSelectList.selectPlant(e,a.putPlantToBagCall.bind(a),e==p.pzaPlantEnum.IMITATER),e==p.pzaPlantEnum.COFFEE_BEAN?t=!0:e==p.pzaPlantEnum.IMITATER&&(a.imitaterMask.active=!0)});var o=this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;this.bagCards.forEach(function(a){null==a||a.lock||(null!=a.curPlantType&&e.indexOf(a.curPlantType)>=0&&a.initSelect(),t&&a.refreshRecommend(!0),o&&a.selectFull(!0))}),o=this.isFull(),v.pzaUtil.switchGraySprite(this.startBtn,o)},a.prototype.initBag=function(){for(var e=p.pzaPlantEnum.GATLING_PEA;e<=p.pzaPlantEnum.COB_CANNON;e++)m.pzaLocalData.data.ownPlants.indexOf(e)<0||this.createBagCard(e);for(m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.FIGHTKING)>=0&&this.createBagCard(p.pzaPlantEnum.FIGHTKING),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.GABY)>=0&&this.createBagCard(p.pzaPlantEnum.GABY),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.Phoenix)>=0&&this.createBagCard(p.pzaPlantEnum.Phoenix),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.Gene_SnowPea)>=0&&this.createBagCard(p.pzaPlantEnum.Gene_SnowPea),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)>=0&&this.createBagCard(p.pzaPlantEnum.SUPER_CHOMPER),e=p.pzaPlantEnum.PEA_SHOOTER;e<=p.pzaPlantEnum.MELON_PULT;e++)(s.pzaGameState.isMiniMode()||s.pzaGameState.isSurvival()||m.pzaLocalData.data.ownPlants.indexOf(e)>=0)&&this.createBagCard(e);if(!s.pzaGameState.isMiniMode())for(e=p.pzaPlantEnum.GATLING_PEA;e<=p.pzaPlantEnum.COB_CANNON;e++)m.pzaLocalData.data.ownPlants.indexOf(e)>=0||(m.pzaLocalData.isTrailPlant&&s.pzaGameState.isSurvival()?this.createBagCard(e,null,!0):this.createBagCard(e))},a.prototype.createBagCard=function(e,a,t){if(void 0===a&&(a=!1),void 0===t&&(t=!1),e!=p.pzaPlantEnum.GOLD_MAGNET){var o=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=o){o.setParent(this.cardBag);var n=o.getComponent(M.pzaBagPlantCard);if(null!=n)return n.bindData(e,this.clickBagCardCall.bind(this),null,a,t),this.bagCards.push(n),n}}},a.prototype.selectCard=function(){s.pzaGameState.selectCard!=s.pzaSelectCardType.SLOT_CARD&&this.clickListCardCall(null)},a.prototype.clickListCardCall=function(e,a){var t=s.pzaGameState.selectPlant;if(this.cardSelectList.cardList.forEach(function(e){null!=e&&0!=e.node.active&&e.diselect()}),a)return!1===this.extraPlantCard.selectTag.active?this.extraPlantCard.select():(s.pzaGameState.clickExtraCardType==t&&(s.pzaGameState.selectPlant=null),this.extraPlantCard.diselect()),!0;s.pzaGameState.clickExtraCardType==t&&(s.pzaGameState.selectPlant=null),this.extraPlantCard.diselect(),null!=e&&e!=t&&this.cardSelectList.cardList.forEach(function(a){null!=a&&a.curPlantType==e&&a.select()})},a.prototype.clickBagCardCall=function(e,a,t){var o=this;void 0===t&&(t=!1);var n=this.cardSelectList.getNextVoidPos();if(null!=a&&null!=n){var i=this.node.convertToNodeSpaceAR(n),r=this.node.convertToNodeSpaceAR(a);t?this.cardSelectList.selectPlants.push(p.pzaPlantEnum.IMITATER):this.cardSelectList.selectPlants.push(e);var l=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=l){l.setParent(this.node),l.setPosition(r);var u=l.getComponent(M.pzaBagPlantCard);u.bindData(e,null,t),E.pzaCommonMask.showMask(),u.moveTo(i,.2,function(){t?o.cardSelectList.selectPlant(p.pzaPlantEnum.IMITATER,o.putPlantToBagCall.bind(o),!0):o.cardSelectList.selectPlant(e,o.putPlantToBagCall.bind(o),!1),s.pzaGameState.cardIsMove=!1,E.pzaCommonMask.hideMask()}),e==p.pzaPlantEnum.COFFEE_BEAN&&this.bagCards.forEach(function(e){null==e||e.lock||e.refreshRecommend(!0)}),this.checkPlantRelation(e),this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount&&this.bagCards.forEach(function(e){null==e||e.lock||e.selectFull(!0)});var d=this.isFull();v.pzaUtil.switchGraySprite(this.startBtn,d)}else s.pzaGameState.cardIsMove=!1}else s.pzaGameState.cardIsMove=!1},a.prototype.putPlantToBagCall=function(e,a){var t,o,n=this;if(void 0===a&&(a=!0),null!=e){var i=e.imitaterPlant,l=null,d=null,h=null;if(i?(h=s.pzaGameState.curImitaterPlant,l=this.imitaterNode.convertToWorldSpaceAR(cc.v2())):(h=e.curPlantType,null!=(d=this.getBagCard(h))&&(l=d.node.convertToWorldSpaceAR(cc.v2()))),l){e.bagSelectPlant(null,null);var f=this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount,z=this.node.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.v2())),y=this.node.convertToNodeSpaceAR(l),g=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=g){g.setParent(this.node),g.setPosition(z);var b=g.getComponent(M.pzaBagPlantCard);b.bindData(h,null,i),E.pzaCommonMask.showMask(),b.moveTo(y,.2,function(){E.pzaCommonMask.hideMask(),i?(n.imitaterMask.active=!1,s.pzaGameState.curImitaterPlant=null):d&&d.disSelect();var e=n.isFull();v.pzaUtil.switchGraySprite(n.startBtn,e)}),h==p.pzaPlantEnum.COFFEE_BEAN&&this.bagCards.forEach(function(e){null==e||e.lock||e.refreshRecommend(!1)}),f&&this.bagCards.forEach(function(e){null==e||e.lock||m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(e.curPlantType)>=0||e.selectFull(!1)});var P=u.pzaGameConfig.getPlantConfig(h).relationTypeArr;if(P){var C=0;this.cardSelectList.selectPlants.forEach(function(e){null!=e&&(e==p.pzaPlantEnum.IMITATER&&(e=s.pzaGameState.curImitaterPlant),e==h&&C++)}),C<=1&&this.bagCards.forEach(function(e){null!=e&&e.curPlantType!=h&&P.indexOf(e.curPlantType)>=0&&e.setRelateState(!1)})}if(a){i?this.cardSelectList.removeSelect(p.pzaPlantEnum.IMITATER):this.cardSelectList.removeSelect(h);try{for(var S=r(this.cardSelectList.selectPlants),_=S.next();!_.done;_=S.next()){var D=_.value;console.log("card ",D)}}catch(w){t={error:w}}finally{try{_&&!_.done&&(o=S.return)&&o.call(S)}finally{if(t)throw t.error}}}}}}},a.prototype.getBagCard=function(e){var a=null;return this.bagCards.forEach(function(t){null==t||t.lock||t.curPlantType==e&&(a=t)}),a},a.prototype.isFull=function(){return this.cardSelectList.selectPlants.length<=0},a.prototype.ableChoseCardCount=function(){for(var e=0,a=0;a<this.bagCards.length;a++){var t=this.bagCards[a];null==t||t.lock||t.isSelected||e++}return e},a.prototype.clickImitater=function(){for(var e=this,a=0;a<this.cardSelectList.cardList.length;a++)if(this.cardSelectList.cardList[a].imitaterPlant)return;this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount||this.imitaterSelectView.init(function(){if(null!=s.pzaGameState.curImitaterPlant){e.imitaterMask.active=!0;var a=e.imitaterNode.convertToWorldSpaceAR(cc.v2());e.clickBagCardCall(s.pzaGameState.curImitaterPlant,a,!0)}})},a.prototype.clickHandBook=function(){this.plantDesc&&this.plantDesc.hideSelf(),f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.HANDBOOK_VIEW,function(e){var a=e&&e.getComponent(S.pzaHandbookView);a&&a.jdInit()})},a.prototype.clickShop=function(){var e=this;f.pzaSoundManager.playSFX();var a=this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHOP_VIEW,function(t){var o=t&&t.getComponent(_.pzaShopView);o&&o.bindCloseCall(!1,function(){e.refreshAdSlot();for(var t=0;t<e.cardSlotList.length;t++){var o=e.cardSlotList[t];null!=o&&(o.active=t<m.pzaLocalData.data.plantSlotCount)}var n=e.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;a&&!n&&e.bagCards.forEach(function(e){null==e||e.lock||m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(e.curPlantType)>=0||e.selectFull(!1)}),n=e.isFull(),v.pzaUtil.switchGraySprite(e.startBtn,n)},function(a){if(a==p.pzaPlantEnum.IMITATER)e.imitaterNode.active=!0;else{e.createBagCard(a).node.zIndex=-1;for(var t=0;t<e.bagCards.length;t++){var o=e.bagCards[t];if(null!=o&&null==o.curPlantType){var n=e.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;o.bindData(a,e.clickBagCardCall.bind(e)),n&&o.selectFull(!0);break}}}})})},a.prototype.clickMenu=function(){b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.GAME_PAUSE,null),f.pzaSoundManager.pausePlayMusic();var e=!1;s.pzaGameState.isSurvival()&&1!=s.pzaGameState.curPart&&(e=!0),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GAME_MENU_VIEW,function(a){var t=a&&a.getComponent(T.pzaMenuView);t&&t.init(function(){b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.GAME_RESUME,null)},e)})},a.prototype.clickLookLawn=function(){var e=this;this.bagNode.active=!1,window.pzaMapManager.lookLawn(function(){y.pzaTipManager.showGameTip("\u70b9\u51fb\u7ee7\u7eed\u6e38\u620f",function(){window.pzaMapManager.cancelLookLawn(function(){e.bagNode.active=!0})},!0)})},a.prototype.clickStart=function(){var e=this;f.pzaSoundManager.playSFX(),this.cardSelectList.selectPlants.length<=0?y.pzaTipManager.showHomeTip("\u8bf7\u70b9\u51fb\u9a91\u58eb\u5361\u7247\uff0c\u5c06\u5176\u6dfb\u52a0\u5230\u5de6\u4fa7\u7684\u9a91\u58eb\u5361\u69fd\u4e2d",null,2):this.checkPuffShroom(function(){e.checkBallZombie(function(){e.checkPongPlant(function(){e.checkFlowerPot(function(){e.checkSunPlant(function(){e.checkAdvancePlant(p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.REPEATER,function(){e.checkAdvancePlant(p.pzaPlantEnum.TWIN_SUNFLOWER,p.pzaPlantEnum.SUN_FLOWER,function(){e.checkAdvancePlant(p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.FUME_SHROOM,function(){e.checkAdvancePlant(p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.LILY_PAD,function(){e.checkAdvancePlant(p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.MELON_PULT,function(){e.checkAdvancePlant(p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.MAGNET_SHROOM,function(){e.checkAdvancePlant(p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.SPIKEWEED,function(){e.checkAdvancePlant(p.pzaPlantEnum.COB_CANNON,p.pzaPlantEnum.KERNEL_PULT,function(){e.checkAdvancePlant(p.pzaPlantEnum.SUPER_CHOMPER,p.pzaPlantEnum.CHOMPER,function(){if(e.clearBag(),e.bagNode.active=!1,e.adSlot.node.active=!1,s.pzaGameState.isSurvival()&&m.pzaLocalData.data.preOpenSurvival||(m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode]=e.cardSelectList.selectPlants,m.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode]=s.pzaGameState.curImitaterPlant,m.pzaLocalData.addDirty("modeUsePlants","imitaterUsePlant")),s.pzaGameState.isSurvival()){m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode]=e.cardSelectList.selectPlants;for(var a=0;a<m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode].length;a++){var t=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode][a];t>40&&!m.pzaLocalData.data.ownPlants.includes(t)&&(m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode].splice(a,1),a--)}m.pzaLocalData.addDirty("modeUsePlants")}m.pzaLocalData.addDirty("redPointPlants"),window.pzaplantManager.initPlantCD(e.cardSelectList.selectPlants),e.preLoadPlantPrefab(e.cardSelectList.selectPlants,e.startGameCall.bind(e)),s.pzaGameState.isSurvival()&&(s.pzaGameState.hasPlantSelect=!1),e.plantDesc.hideSelf(),b.pzaWorldEventManager.removeListener(b.pzaWorldEventType.SHOW_SELECTCARD_DESC,e.showCardDesc,e)})})})})})})})})})})})})})})},a.prototype.initPlant=function(){var e,a;if(this.cardSelectList){try{for(var t=r(this.cardSelectList.cardList),o=t.next();!o.done;o=t.next()){var n=o.value;n&&n.initPos&&(n.node.position=n.initPos,n.node.active=!1)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}for(var i=0;i<this.cardSelectList.selectPlants.length;i++){var p=this.cardSelectList.cardList[i],l=this.cardSelectList.selectPlants[i];null!=p&&null!=l&&p.bindData(l,this.clickListCardCall.bind(this),this.showGuideArrow.bind(this),i)}this.node.getComponent(cc.Widget).updateAlignment(),this.cardSlotNode.active=!1}},a.prototype.showGuideArrow=function(e){null!=e?(this.guideArrowNode.active=!0,this.guideArrowNode.stopAllActions(),this.guideArrowNode.setPosition(e),this.guideArrowNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(e.x,e.y+20)),cc.moveTo(.2,cc.v2(e.x,e.y)))))):this.guideArrowNode.active=!1},a.prototype.clearBag=function(){this.bagCards.forEach(function(e){e&&e.close()}),this.bagCards=[]},a.prototype.checkSunPlant=function(e){this.cardSelectList.hasPlant(p.pzaPlantEnum.SUN_FLOWER)?e&&e():this.cardSelectList.hasPlant(p.pzaPlantEnum.SUN_SHROOM)?e&&e():this.cardSelectList.hasPlant(p.pzaPlantEnum.TWIN_SUNFLOWER)?e&&e():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(D.pzaWarningView);t&&t.show("\u4f60\u6ca1\u6709\u643a\u5e26\u751f\u4ea7\u80fd\u91cf\u7684\u9a91\u58eb\uff0c\n\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",e,null),t&&t.setTipLineHeight(40)})},a.prototype.checkPuffShroom=function(e){s.pzaGameState.isSurvival()||2!=s.pzaGameState.curChapter||1!=s.pzaGameState.curPart?e&&e():this.cardSelectList.hasPlant(p.pzaPlantEnum.PUFF_SHROOM)?e&&e():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=u.pzaGameConfig.getPlantConfig(p.pzaPlantEnum.PUFF_SHROOM).name,o=a&&a.getComponent(D.pzaWarningView);o&&o.show("\u8fd9\u5173\u5982\u679c\u4e0d\u643a\u5e26"+t+"\u5c06\u4f1a\u5f88\u96be\u3002\n\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528"+t+"\u5417\uff1f","\u662f","\u91cd\u9009",e,null)})},a.prototype.checkPongPlant=function(e){3==s.pzaGameState.curChapter||4==s.pzaGameState.curChapter?this.cardSelectList.hasPlant(p.pzaPlantEnum.LILY_PAD)||this.cardSelectList.hasPlant(p.pzaPlantEnum.TANGLE_KELP)||this.cardSelectList.hasPlant(p.pzaPlantEnum.SEA_SHROOM)?e&&e():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=u.pzaGameConfig.getPlantConfig(p.pzaPlantEnum.LILY_PAD).name,o=a&&a.getComponent(D.pzaWarningView);s.pzaGameState.isSurvival()||3!=s.pzaGameState.curChapter||1!=s.pzaGameState.curPart?(o&&o.show("\u4f60\u6ca1\u6709\u643a\u5e26"+u.pzaGameConfig.getPlantConfig(p.pzaPlantEnum.LILY_PAD).name+"\u8fd9\u4f1a\u8ba9\u5173\u5361\u53d8\u5f97\u5f88\u96be\n\u4f60\u786e\u5b9a\u4e0d\u643a\u5e26\u5417\uff1f","\u662f","\u91cd\u9009",e,null),o&&o.setTipLineHeight(40)):(o&&o.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528"+t+"\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528"+t+"\u5417\uff1f","\u662f","\u91cd\u9009",e,null),o&&o.setTipLineHeight(40))}):e&&e()},a.prototype.checkBallZombie=function(e){var a=null;null==(a=s.pzaGameState.isSurvival()?s.pzaGameState.survivalConfig:h.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart))||a.zombieTypes.indexOf(l.pzaZombieEnum.BALLOON_ZOMBIE)<0?e&&e():this.cardSelectList.hasPlant(p.pzaPlantEnum.BLOVER)||this.cardSelectList.hasPlant(p.pzaPlantEnum.CACTUS)||this.cardSelectList.hasPlant(p.pzaPlantEnum.CATTAIL)?e&&e():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(D.pzaWarningView);t&&t.show("\u4f60\u6ca1\u6709\u9009\u62e9\u80fd\u5bf9\u4ed8\u6b27\u5c3c\u79d1\u9b54\u673a\u7684\u9a91\u58eb\uff0c\n\n\u4f60\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",e,null)})},a.prototype.checkFlowerPot=function(e){5!=s.pzaGameState.curChapter||1==s.pzaGameState.curPart&&!s.pzaGameState.isSurvival()?e&&e():this.cardSelectList.hasPlant(p.pzaPlantEnum.FLOWER_POT)?e&&e():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=u.pzaGameConfig.getPlantConfig(p.pzaPlantEnum.FLOWER_POT).name,o=a&&a.getComponent(D.pzaWarningView);o&&o.show("\u4f60\u6ca1\u6709\u643a\u5e26"+t+"\u8fd9\u4f1a\u8ba9\u5173\u5361\u53d8\u5f97\u975e\u5e38\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u643a\u5e26\u5417\uff1f","\u662f","\u91cd\u9009",e,null),o&&o.setTipLineHeight(40)})},a.prototype.checkAdvancePlant=function(e,a,t){t&&t()},a.prototype.checkSkipBtnActive=function(){0!=s.pzaGameState.isMainMode()?s.pzaGameState.isSurvival()||s.pzaGameState.curChapter<m.pzaLocalData.data.curChapter||s.pzaGameState.curChapter==m.pzaLocalData.data.curChapter&&s.pzaGameState.curPart<m.pzaLocalData.data.curPart?this.skipPartNode.active=!1:(this.skipPartNode.active=!0,z.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"6"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u8df3\u8fc7\u5173\u5361"})):this.skipPartNode.active=!1},a.prototype.refreshAdSlot=function(){this.adSlot.node.active=!1,7==m.pzaLocalData.data.plantSlotCount&&(this.adSlot.node.active=!0,this.adSlot.node.y=-584,this.adSlot.spriteFrame=this.adSlotFrames[1],this.adSlot.node.getChildByName("adTickIcon").y=10.917,this.slotAdCount.node.active=!0,this.slotAdCount.string="("+m.pzaLocalData.data.slot8AdCount+"/2)",z.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"11"},{name:"adname",value:"\u89e3\u9501\u5361\u69fd8"})),6==m.pzaLocalData.data.plantSlotCount&&(this.adSlot.node.active=!0,this.adSlot.node.y=-506,this.adSlot.spriteFrame=this.adSlotFrames[0],this.adSlot.node.getChildByName("adTickIcon").y=-2,this.slotAdCount.node.active=!1,z.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"10"},{name:"adname",value:"\u89e3\u9501\u5361\u69fd7"}))},a.prototype.clickAdSlot=function(){var e=this,a="10",t="\u89e3\u9501\u5361\u69fd7";7==m.pzaLocalData.data.plantSlotCount&&(a="11",t="\u89e3\u9501\u5361\u69fd8"),C.pzaChannel.instance().showVideo({sucCall:function(){if(7==m.pzaLocalData.data.plantSlotCount&&(m.pzaLocalData.data.slot8AdCount++,m.pzaLocalData.addDirty("slot8AdCount"),m.pzaLocalData.data.slot8AdCount<2))e.slotAdCount.string="("+m.pzaLocalData.data.slot8AdCount+"/2)";else{var a=e.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;m.pzaLocalData.data.plantSlotCount++,m.pzaLocalData.addDirty("plantSlotCount"),e.adSlot.node.active=!1;for(var t=0;t<e.cardSlotList.length;t++){var o=e.cardSlotList[t];null!=o&&(o.active=t<m.pzaLocalData.data.plantSlotCount)}a&&e.bagCards.forEach(function(e){null==e||e.lock||m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(e.curPlantType)>=0||e.selectFull(!1)});var n=e.isFull();v.pzaUtil.switchGraySprite(e.startBtn,n),e.refreshAdSlot()}},failCall:function(){},endCall:function(){},posName:t,adsid:a})},a.prototype.clickClear=function(){var e,a,t=this;f.pzaSoundManager.playSFX(),this.cardSelectList.cardList.forEach(function(e){if(null!=e&&null!=e.curPlantType){if(e.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&s.pzaGameState.isMiniMode()&&14==s.pzaGameState.curPart)return;if(m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(e.curPlantType)>=0)return;t.putPlantToBagCall(e,!1)}}),this.cardSelectList.selectPlants=[],s.pzaGameState.isMiniMode()&&14==s.pzaGameState.curPart&&this.cardSelectList.selectPlants.push(p.pzaPlantEnum.STAR_FRUIT);try{for(var o=r(this.bagCards),n=o.next();!n.done;n=o.next())n.value.setRelateState(!1)}catch(i){e={error:i}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}if(m.pzaLocalData.isWeekTwo)return s.pzaGameState.weekTwoInitPlants.forEach(function(e){t.checkPlantRelation(e),t.cardSelectList.selectPlants.push(e)}),void this.bagCards.forEach(function(e){null==e||e.lock||s.pzaGameState.weekTwoInitPlants.indexOf(e.curPlantType)>=0&&e.selectFull(!0)})},a.prototype.clickNextPage=function(){this.arrowIsDown=!this.arrowIsDown,this.arrowIsDown?(this.cardSelectList.showPrev(),this.nextArrow.angle=0):(this.nextArrow.angle=180,this.cardSelectList.showNext())},a.prototype.showBtnAni=function(e,a){for(var t=0;t<this.nodes_allProfess.length;t++)t==e?(this.nodes_allProfess[t].width=113,this.nodes_allProfess[t].height=69,cc.tween(this.imgs_allProfess[t]).to(a,{width:113,height:69},{easing:"sineInOut"}).start()):(this.nodes_allProfess[t].width=94,this.nodes_allProfess[t].height=57,cc.tween(this.imgs_allProfess[t]).to(a,{width:94,height:57},{easing:"sineInOut"}).start())},a.prototype.checkPlantRelation=function(e){var a=u.pzaGameConfig.getPlantConfig(e).relationTypeArr;a&&this.bagCards.forEach(function(t){null!=t&&t.curPlantType!=e&&a.indexOf(t.curPlantType)>=0&&t.setRelateState(!0)})},a.prototype.clickFilterBtn=function(e,a){var t,o;try{for(var n=r(this.bagCards),i=n.next();!i.done;i=n.next())i.value.setFilterByPro(parseInt(a))}catch(l){t={error:l}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}var p=parseInt(a);this.showBtnAni(p,.1)},a.prototype.clickDrawDescArrow=function(){f.pzaSoundManager.playSFX(),this.plantDesc&&this.plantDesc.setScaleView(1),this.drawDescNode.active=!1},a.prototype.clickHideDescArrow=function(){f.pzaSoundManager.playSFX(),this.plantDesc&&this.plantDesc.setScaleView(0),this.drawDescNode.active=!0},a.prototype.clickSkipPart=function(){g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(D.pzaWarningView),t=0==u.pzaGameConfig.AllPartStar[s.pzaGameState.curChapter-1][s.pzaGameState.curPart-1]?"\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u672c\u5173\uff1f":"\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u672c\u5173\uff1f\n\u6ce8\uff1a\u5feb\u901f\u8df3\u5173\u4ec5\u53ef\u83b7\u5f97\u4e00\u661f\u8bc4\u4ef7";a&&a.show(t,"\u8df3\u8fc7\u5173\u5361","\u8fd4\u56de\u6e38\u620f",function(){C.pzaChannel.instance().showVideo({sucCall:function(){d.pzaGameManager.removeBattleUI(),window.pzazombieManager.skipPassPart();var e=5*(s.pzaGameState.curChapter-1)+s.pzaGameState.curPart;I.default.eventReport(e+"\u5173\u5361\u6210\u529f(\u51c6\u5907\u754c\u9762\u8df3\u8fc7)")},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u9875\u9762\u8df3\u8fc7\u5173\u5361",adsid:"6"})},function(){},"\u63d0\u793a",!0)})},a._instance=null,i([L({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],a.prototype,"cardPrefab",void 0),i([L({displayName:"\u5361\u7247\u80cc\u5305\u5bb9\u5668",type:cc.Node})],a.prototype,"cardBag",void 0),i([L({displayName:"\u5f00\u59cb\u6309\u94ae",type:cc.Sprite})],a.prototype,"startBtn",void 0),i([L({displayName:"\u80cc\u5305\u8282\u70b9",type:cc.Node})],a.prototype,"bagNode",void 0),i([L({displayName:"\u5361\u7247\u9009\u62e9\u5217\u8868",type:G.pzaPlantSelectCardList})],a.prototype,"cardSelectList",void 0),i([L({displayName:"\u5361\u724c\u69fd\u8282\u70b9",type:cc.Node})],a.prototype,"cardSlotNode",void 0),i([L({displayName:"\u5361\u724c\u69fd",type:[cc.Node]})],a.prototype,"cardSlotList",void 0),i([L({displayName:"\u5361\u7247\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],a.prototype,"guideArrowNode",void 0),i([L({displayName:"\u5546\u5e97\u6309\u94ae",type:cc.Node})],a.prototype,"shopBtn",void 0),i([L({displayName:"\u770b\u8349\u576a\u6309\u94ae",type:cc.Node})],a.prototype,"lookLawnBtn",void 0),i([L({displayName:"\u56fe\u9274\u6309\u94ae",type:cc.Node})],a.prototype,"bookBtn",void 0),i([L({displayName:"\u53d8\u8eab\u8304\u5b50",type:cc.Node})],a.prototype,"imitaterNode",void 0),i([L({displayName:"\u8304\u5b50\u906e\u7f69",type:cc.Node})],a.prototype,"imitaterMask",void 0),i([L({displayName:"\u8304\u5b50\u9009\u62e9\u754c\u9762",type:w.pzaImitaterSelectView})],a.prototype,"imitaterSelectView",void 0),i([L({displayName:"\u5e7f\u544a\u5361\u69fd",type:cc.Sprite})],a.prototype,"adSlot",void 0),i([L({displayName:"\u5361\u69fd\u5e7f\u544a\u6b21\u6570",type:cc.Label})],a.prototype,"slotAdCount",void 0),i([L({displayName:"\u5e7f\u544a\u5361\u69fd\u56fe",type:[cc.SpriteFrame]})],a.prototype,"adSlotFrames",void 0),i([L({displayName:"\u4e0b\u4e00\u9875\u6309\u94ae",type:cc.Node})],a.prototype,"nextPage",void 0),i([L({displayName:"\u4e0b\u4e00\u9875\u7bad\u5934",type:cc.Node})],a.prototype,"nextArrow",void 0),i([L({displayName:"\u8bd5\u7528\u690d\u7269\u754c\u9762",type:cc.Node})],a.prototype,"trialPlant",void 0),i([L({displayName:"\u8bd5\u7528\u690d\u7269\u540d\u79f0",type:cc.Label})],a.prototype,"trialPlantName",void 0),i([L({displayName:"\u8bd5\u7528\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],a.prototype,"trialPlantDesc",void 0),i([L({type:cc.Sprite})],a.prototype,"trialPlantSp",void 0),i([L({type:[cc.SpriteFrame]})],a.prototype,"trialPlantSpData",void 0),i([L({displayName:"\u6234\u592b\u5bf9\u8bdd",type:cc.Node})],a.prototype,"DaveDialog",void 0),i([L(cc.Node)],a.prototype,"clearCardBtn",void 0),i([L(cc.Node)],a.prototype,"skipPartNode",void 0),i([L(cc.Node)],a.prototype,"drawDescNode",void 0),i([L(cc.Sprite)],a.prototype,"trialPlantSprite",void 0),i([L(A.pzaPlantSelectDesc)],a.prototype,"plantDesc",void 0),i([L({displayName:"\u6240\u6709\u4e13\u4e1a\u6309\u94ae",type:[cc.Node]})],a.prototype,"nodes_allProfess",void 0),i([L({displayName:"\u6240\u6709\u4e13\u4e1a\u56fe\u7247",type:[cc.Node]})],a.prototype,"imgs_allProfess",void 0),i([L({type:B.pzaPlantCard})],a.prototype,"extraPlantCard",void 0),t=i([N],a)}(cc.Component);t.pzaPlantSelectView=R,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePartConfig":"pzaGamePartConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaCommonMask":"pzaCommonMask","../pzaHandbookView":"pzaHandbookView","../pzaShopView":"pzaShopView","../pzaWarningView":"pzaWarningView","./pzaBagPlantCard":"pzaBagPlantCard","./pzaImitaterSelectView":"pzaImitaterSelectView","./pzaMenuView":"pzaMenuView","./pzaPlantCard":"pzaPlantCard","./pzaPlantSelectCardList":"pzaPlantSelectCardList","./pzaPlantSelectDesc":"pzaPlantSelectDesc"}],pzaPlantSkinCard:[function(e,a,t){"use strict";cc._RF.push(a,"8d707/V2b1IBKhbgH6Drmln","pzaPlantSkinCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantSkinCard=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaGameConfig"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaSpriteFrameManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardBoard=null,a.cardBoardFrames=[],a.cardIcon=null,a.voidSlot=null,a.select=null,a.lockNode=null,a.lockImg=null,a.plantType=null,a.clickCall=null,a.hasUnClock=!1,a}return n(a,e),a.prototype.bindData=function(e,a,t){this.select.active=!1,this.lockImg.active=!1,this.lockNode.active=!1,this.plantType=e,this.clickCall=t,this.hasUnClock=a,this.voidSlot.active=!1,this.cardBoard.node.active=!0,this.refreshCardImg();var o=p.pzaGameConfig.getPlantConfig(e);if(null!=o)return this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.hasUnClock?void 0:(this.voidSlot.active=!0,this.lockNode.active=!0,void(this.lockImg.active=!0))},a.prototype.refreshCardImg=function(){s.pzaSpriteFrameManager.loadPlantCard(this.plantType,this.cardIcon)},a.prototype.clickCard=function(){this.hasUnClock&&(l.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.plantType),this.select.active=!0)},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([d({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],a.prototype,"cardBoardFrames",void 0),i([d({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([d({displayName:"\u7a7a\u5361\u69fd",type:cc.Node})],a.prototype,"voidSlot",void 0),i([d({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"select",void 0),i([d({displayName:"\u672a\u89e3\u9501\u8282\u70b9",type:cc.Node})],a.prototype,"lockNode",void 0),i([d({displayName:"\u672a\u89e3\u9501\u6807\u5fd7",type:cc.Node})],a.prototype,"lockImg",void 0),i([u],a)}(cc.Component);t.pzaPlantSkinCard=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaPlantTouch:[function(e,a,t){"use strict";cc._RF.push(a,"86a4cwtXIlMSrXJ0lrmrlsK","pzaPlantTouch");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantTouch=void 0;var r=e("../Common/pzaGameConfig"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaNodeManager"),s=e("../Common/pzaTipManager"),c=e("../Common/pzaWorldEventManager"),u=e("../Common/pzaZombieEnermyPartCfg"),d=e("../Load/pzaBundleObjectPool"),h=e("../Load/pzaPreLoadManager"),m=e("./Data/pzaGuideType"),f=e("./Data/pzaZombieEnum"),z=e("./Effect/pzaShovelEffect"),y=e("./pzaEffectManager"),g=e("./pzaGameState"),v=cc._decorator,b=v.ccclass,P=v.property,C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.plantTouchNode=null,a.touchShowGraph=null,a.crossHair=null,a.curSelectXIndex=-1,a.curSelectYIndex=-1,a.shovelEffect=null,a.selectCobTime=0,a.startTouch={xIndex:-1,yIndex:-1,clickTrack:null},a}return n(a,e),a.prototype.onEnable=function(){this.plantTouchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.plantTouchNode._touchListener.setSwallowTouches(!1),this.touchShowGraph.clear(),this.crossHair.active=!1,this.selectCobTime=0},a.prototype.onDisable=function(){this.plantTouchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},a.prototype.clearGraph=function(){this.touchShowGraph.clear()},a.prototype.isCrossHairOff=function(){return null==g.pzaGameState.selectCard&&null==g.pzaGameState.cobCannon&&!(g.pzaGameState.gameMode==g.pzaGameMode.BANG_JAR||g.pzaGameState.gameMode==g.pzaGameMode.VASE||g.pzaGameState.gameMode==g.pzaGameMode.VASE_ENDLESS)},a.prototype.onTouchStart=function(e){if(!g.pzaGameState.gamePause||!g.pzaGameState.isSurvival()){var a=e&&e.getLocation(),t=this.node.convertToNodeSpaceAR(a);if(this.checkClickTrackBlock(t),this.isCrossHairOff()){if(this.crossHair.active=!1,g.pzaGameState.gameMode==g.pzaGameMode.KNOCK_ZOMBIE||g.pzaGameState.gameMode==g.pzaGameMode.KNOCK_ZOMBIE_MINIGAME||g.pzaGameState.gameMode==g.pzaGameMode.MINIGAME_KNOCK){if(g.pzaGameState.gamePause)return;return void this.showHammer(e,!1)}if(this.checkCobCannon(e),null==g.pzaGameState.cobCannon)return}null==a||a.y>=620||this.showTouchBlock(t)}},a.prototype.onTouchMove=function(e){if(!g.pzaGameState.isGameEnd&&!g.pzaGameState.isMenuShow){var a=e&&e.getLocation(),t=this.node.convertToNodeSpaceAR(a);this.hasAbleMoveBlock(t),this.isCrossHairOff()?this.crossHair.active=!1:null==a||a.y>=620||this.showTouchBlock(t)}},a.prototype.onTouchEnd=function(e){if(!g.pzaGameState.isGameEnd&&!g.pzaGameState.isMenuShow){var a=e&&e.getLocation();if(null==a||a.y>=620)this.reset();else if(null==g.pzaGameState.selectPlant){if(null!=g.pzaGameState.selectZombie)return this.curSelectXIndex>=0&&this.curSelectYIndex>=0&&(g.pzaGameState.selectZombie==f.pzaZombieEnum.BUNGEE_ZOMBIE?this.curSelectXIndex<u.pzaZombieEnermyPartCfg.getPlantColumn(g.pzaGameState.gameMode==g.pzaGameMode.ZOMBIE_ENDLESS?g.pzaGameState.zombieEndlessPart:g.pzaGameState.curPart)?(window.pzazombieManager.playerPutZombie(this.curSelectXIndex,this.curSelectYIndex,g.pzaGameState.selectZombie),g.pzaGameState.selectCard=null,g.pzaGameState.selectZombie=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null)):g.pzaGameState.putZombieTipLeft||(g.pzaGameState.putZombieTipLeft=!0,s.pzaTipManager.showGameTip("\u5728\u7ebf\u7684\u53f3\u8fb9\u624d\u80fd\u53ec\u5524\u98de\u8d3c\u50f5\u5c38")):this.curSelectXIndex>=u.pzaZombieEnermyPartCfg.getPlantColumn(g.pzaGameState.gameMode==g.pzaGameMode.ZOMBIE_ENDLESS?g.pzaGameState.zombieEndlessPart:g.pzaGameState.curPart)?(window.pzazombieManager.playerPutZombie(this.curSelectXIndex,this.curSelectYIndex,g.pzaGameState.selectZombie),g.pzaGameState.selectCard=null,g.pzaGameState.selectZombie=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null)):g.pzaGameState.putZombieTipRight||(g.pzaGameState.putZombieTipRight=!0,s.pzaTipManager.showGameTip("\u5728\u7ebf\u7684\u53f3\u8fb9\u624d\u80fd\u53ec\u5524\u602a\u4eba"))),void this.reset();if((g.pzaGameState.gameMode===g.pzaGameMode.BANG_JAR||g.pzaGameState.isVaseMode())&&window.pzaplantManager.bangJar(this.curSelectXIndex,this.curSelectYIndex)&&this.showHammer(e,!0),g.pzaGameState.selectCard==g.pzaSelectCardType.SHOVE_CARD)return this.curSelectXIndex>=0&&this.curSelectYIndex>=0&&window.pzaplantManager.hasPlant(this.curSelectXIndex,this.curSelectYIndex)?(window.pzaplantManager.shovelPlant(this.curSelectXIndex,this.curSelectYIndex),window.pzaGuideManager.guideType==m.pzaGuideType.GUIDE_SHOVEL_1_5&&(2!=window.pzaGuideManager.guideStep&&3!=window.pzaGuideManager.guideStep&&4!=window.pzaGuideManager.guideStep||window.pzaGuideManager.guideStepNext())):window.pzaGuideManager.guideType==m.pzaGuideType.GUIDE_SHOVEL_1_5&&2==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepPre(),g.pzaGameState.selectCard=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null),void this.reset();if(null!=g.pzaGameState.cobCannon&&Date.now()-this.selectCobTime>100){if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0){var t=this.plantTouchNode.convertToNodeSpaceAR(a);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.LAUNCH_COB_CANNON,{data:g.pzaGameState.cobCannon,pos:t,xIndex:this.curSelectXIndex,yIndex:this.curSelectYIndex})}g.pzaGameState.cobCannon=null}this.reset()}else{if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0)if(g.pzaGameState.selectCard==g.pzaSelectCardType.AD_CARD){if(window.pzaplantManager.canPlant(this.curSelectXIndex,this.curSelectYIndex,!1)||window.pzaplantManager.adCanPlant(this.curSelectXIndex,this.curSelectYIndex,!0)){if(g.pzaGameState.isPsdhMode())for(var o=g.pzaGameState.map.getMapRow(),n=0;n<o;n++)(window.pzaplantManager.canPlant(this.curSelectXIndex,n,!1)||window.pzaplantManager.adCanPlant(this.curSelectXIndex,n,!1))&&window.pzaplantManager.createAdPlant(g.pzaGameState.selectPlant,this.curSelectXIndex,n);else window.pzaGuideManager.onCreatePlant(g.pzaGameState.selectPlant),window.pzaplantManager.createAdPlant(g.pzaGameState.selectPlant,this.curSelectXIndex,this.curSelectYIndex);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.PLANT_PLANT,null),g.pzaGameState.selectCard=null,g.pzaGameState.selectPlant=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null),p.pzaLocalData.bpCreatePlant()}}else if(window.pzaplantManager.canPlant(this.curSelectXIndex,this.curSelectYIndex,!0)){if(g.pzaGameState.isPsdhMode()){o=g.pzaGameState.map.getMapRow();var i=!0;for(n=0;n<o;n++)window.pzaplantManager.canPlant(this.curSelectXIndex,n,!1)&&(window.pzaplantManager.createPlant(g.pzaGameState.selectPlant,this.curSelectXIndex,n,!1,i,!1,!0),i=!1)}else window.pzaGuideManager.onCreatePlant(g.pzaGameState.selectPlant),window.pzaplantManager.createPlant(g.pzaGameState.selectPlant,this.curSelectXIndex,this.curSelectYIndex,!1,!0,!1,!0);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.PLANT_PLANT,null),g.pzaGameState.selectCard=null,g.pzaGameState.selectPlant=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null),p.pzaLocalData.bpCreatePlant()}this.reset()}}},a.prototype.onTouchCancel=function(e){if(null!=g.pzaGameState.cobCannon&&Date.now()-this.selectCobTime>100){if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0){var a=e&&e.getLocation();if(null==a||a.y>=620)return void this.reset();var t=this.plantTouchNode.convertToNodeSpaceAR(a);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.LAUNCH_COB_CANNON,{data:g.pzaGameState.cobCannon,pos:t,xIndex:this.curSelectXIndex,yIndex:this.curSelectYIndex})}g.pzaGameState.cobCannon=null}this.reset()},a.prototype.reset=function(){this.curSelectXIndex=-1,this.curSelectYIndex=-1,this.touchShowGraph.clear(),this.crossHair.active=!1,this.selectCobTime=0,null!=this.shovelEffect&&(this.shovelEffect.close(),this.shovelEffect=null)},a.prototype.showTouchBlock=function(e){if(null!=e){var a=g.pzaGameState.map.getMapXIndex(null,e);if(a<0)return this.reset();var t=g.pzaGameState.map.getMapYIndex(null,e);if(t<0)return this.reset();if(a!=this.curSelectXIndex||t!=this.curSelectYIndex||(null!=g.pzaGameState.cobCannon&&this.showCrossHair(e),null!=g.pzaGameState.selectZombie)){if(this.touchShowGraph.clear(),null!=g.pzaGameState.selectPlant){if(g.pzaGameState.selectCard==g.pzaSelectCardType.AD_CARD){if(!window.pzaplantManager.canPlant(a,t,!1)&&!window.pzaplantManager.adCanPlant(a,t,!1))return this.curSelectXIndex=a,void(this.curSelectYIndex=t)}else if(!window.pzaplantManager.canPlant(a,t,!1))return this.curSelectXIndex=a,void(this.curSelectYIndex=t)}else if(null!=g.pzaGameState.selectZombie){if(this.curSelectXIndex=a,this.curSelectYIndex=t,g.pzaGameState.selectZombie==f.pzaZombieEnum.BUNGEE_ZOMBIE){if(a>=u.pzaZombieEnermyPartCfg.getPlantColumn(g.pzaGameState.gameMode==g.pzaGameMode.ZOMBIE_ENDLESS?g.pzaGameState.zombieEndlessPart:g.pzaGameState.curPart))return}else if(a<u.pzaZombieEnermyPartCfg.getPlantColumn(g.pzaGameState.gameMode==g.pzaGameMode.ZOMBIE_ENDLESS?g.pzaGameState.zombieEndlessPart:g.pzaGameState.curPart))return}else g.pzaGameState.selectCard==g.pzaSelectCardType.SHOVE_CARD&&(null==this.shovelEffect?this.createShovelEffect(a,t):this.shovelEffect.changeShovelPos(a,t));if(this.curSelectXIndex=a,this.curSelectYIndex=t,null!=g.pzaGameState.selectCard||null!=g.pzaGameState.cobCannon){var o=g.pzaGameState.map.getMapRow(),n=g.pzaGameState.map.getMapColumn(),i=g.pzaGameState.map.getMapSkewRadion(),r=g.pzaGameState.map.getMapSkewColumn(),p=g.pzaGameState.map.getBlockAllPos(a,0,0);this.touchShowGraph.moveTo(p.x,p.y);var l=g.pzaGameState.map.getBlockAllPos(a,0,1);this.touchShowGraph.lineTo(l.x,l.y);var s=g.pzaGameState.map.getBlockAllPos(a,t,1);if(this.touchShowGraph.lineTo(s.x,s.y),i>0&&r>0&&a<r-1){var c=g.pzaGameState.map.getBlockAllPos(r-1,t,1);this.touchShowGraph.lineTo(c.x,c.y)}var d=g.pzaGameState.map.getBlockAllPos(n-1,t,1);this.touchShowGraph.lineTo(d.x,d.y);var h=g.pzaGameState.map.getBlockAllPos(n-1,t,2);this.touchShowGraph.lineTo(h.x,h.y),i>0&&r>0&&a<r-1&&(c=g.pzaGameState.map.getBlockAllPos(r-1,t,2),this.touchShowGraph.lineTo(c.x,c.y));var m=g.pzaGameState.map.getBlockAllPos(a,t,2);this.touchShowGraph.lineTo(m.x,m.y);var z=g.pzaGameState.map.getBlockAllPos(a,o-1,2);this.touchShowGraph.lineTo(z.x,z.y);var y=g.pzaGameState.map.getBlockAllPos(a,o-1,3);this.touchShowGraph.lineTo(y.x,y.y);var v=g.pzaGameState.map.getBlockAllPos(a,t,3);this.touchShowGraph.lineTo(v.x,v.y),i>0&&r>0&&a>r-1&&(c=g.pzaGameState.map.getBlockAllPos(r,t,3),this.touchShowGraph.lineTo(c.x,c.y));var b=g.pzaGameState.map.getBlockAllPos(0,t,3);this.touchShowGraph.lineTo(b.x,b.y);var P=g.pzaGameState.map.getBlockAllPos(0,t,0);this.touchShowGraph.lineTo(P.x,P.y),i>0&&r>0&&a>r-1&&(c=g.pzaGameState.map.getBlockAllPos(r,t,0),this.touchShowGraph.lineTo(c.x,c.y));var C=g.pzaGameState.map.getBlockAllPos(a,t,0);this.touchShowGraph.lineTo(C.x,C.y),this.touchShowGraph.lineTo(p.x,p.y),this.touchShowGraph.fill(),null!=g.pzaGameState.cobCannon&&this.showCrossHair(e)}}}},a.prototype.checkCobCannon=function(e){var a=e&&e.getLocation();if(!(null==a||a.y>=620)&&g.pzaGameState.map){var t=this.node.convertToNodeSpaceAR(a),o=g.pzaGameState.map.getMapXIndex(null,t);if(!(o<0)){var n=g.pzaGameState.map.getMapYIndex(null,t);if(!(n<0)){var i=""+o+n,p=window.pzaplantManager.plantDataMap.get(i);null!=p&&null!=p.plantData&&r.pzaPlantConfigData.isCannonPlant(p.plantData.plantType)&&p.plantData.cobLoadFinish&&(g.pzaGameState.cobCannon=p,this.selectCobTime=Date.now())}}}},a.prototype.createShovelEffect=function(e,a){var t=this;if(-1!=e&&-1!=a){var o=l.pzaNodeManager.getBattleUINode();null!=o&&d.pzaBundleObjectPool.requestInstantByUrl(h.pzaResourceUrl.SHOVEL_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(z.pzaShovelEffect);r&&r.init(e,a),t.shovelEffect=r}else console.error(n)})}},a.prototype.showHammer=function(e,a){var t=e&&e.getLocation();if(!(null==t||t.y>=620)){var o=this.plantTouchNode.convertToNodeSpaceAR(t);y.pzaEffectManager.createHammerEffect(o,a)}},a.prototype.showCrossHair=function(e){this.crossHair.active=!0,this.crossHair.setPosition(e)},a.prototype.checkClickTrackBlock=function(e){var a=g.pzaGameState.map.getMapXIndex(null,e);if(!(a<0)){var t=g.pzaGameState.map.getMapYIndex(null,e);if(!(t<0)){var o=window.pzaMapManager.trackBlockMap.get(""+a+t);o&&o.hasTram&&!o.fixedPosition?(this.startTouch.clickTrack=o,this.startTouch.xIndex=a,this.startTouch.yIndex=t):(this.startTouch.clickTrack=null,this.startTouch.xIndex=-1,this.startTouch.yIndex=-1)}}},a.prototype.hasAbleMoveBlock=function(e){if(!g.pzaGameState.selectPlant&&(!g.pzaGameState.gamePause||window.pzaGuideManager.guideType==m.pzaGuideType.GUIDE_TRACK_2_3&&1==window.pzaGuideManager.guideStep)&&this.startTouch.clickTrack){var a=g.pzaGameState.map.getMapXIndex(null,e);if(!(a<0)){var t=g.pzaGameState.map.getMapYIndex(null,e);if(!(t<0)&&this.startTouch.clickTrack.checkAbleSwitchTram(a,t)){var o=window.pzaMapManager.trackBlockMap.get(""+a+t);this.startTouch.clickTrack=o,this.startTouch.xIndex=a,this.startTouch.yIndex=t}}}},i([P({displayName:"\u79cd\u690d\u89e6\u6478\u533a\u57df",type:cc.Node})],a.prototype,"plantTouchNode",void 0),i([P({displayName:"\u89e6\u6478\u663e\u793a\u7ed8\u5236",type:cc.Graphics})],a.prototype,"touchShowGraph",void 0),i([P({displayName:"\u51c6\u5fc3",type:cc.Node})],a.prototype,"crossHair",void 0),i([b],a)}(cc.Component);t.pzaPlantTouch=C,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaGuideType":"pzaGuideType","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaShovelEffect":"pzaShovelEffect","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaPlanternEffect:[function(e,a,t){"use strict";cc._RF.push(a,"753510nhkhGFaxmGbSPNYE+","pzaPlanternEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlanternEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=e("../Data/pzaPlantEnum"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.plantType==l.pzaPlantEnum.PLANTERN?this.ani.playAnimation("idle",!0):this.ani.playAnimation("idle2",!0)},a.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},a.prototype.pauseSelf=function(){this.ani.pauseAnimation()},a.prototype.resumeSelf=function(){this.ani.resumeAnimation()},i([u({displayName:"\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"ani",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaPlanternEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaPlantEnum":"pzaPlantEnum"}],pzaPlantern:[function(e,a,t){"use strict";cc._RF.push(a,"bb6aaesl+ZIn5FoUcBvWlno","pzaPlantern");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPlantern=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaPlantEnum"),l=e("../pzaEffectManager"),s=e("../pzaGameState"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lightEffect=null,a}return n(a,e),a.prototype.getAroundPos=function(){return this.baseData?[""+(this.baseData.xIndex-1)+(this.baseData.yIndex-1),""+this.baseData.xIndex+(this.baseData.yIndex-1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex-1),""+(this.baseData.xIndex-1)+this.baseData.yIndex,""+(this.baseData.xIndex+1)+this.baseData.yIndex,""+(this.baseData.xIndex-1)+(this.baseData.yIndex+1),""+this.baseData.xIndex+(this.baseData.yIndex+1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex+1)]:[]},a.prototype.checkPlanternAround=function(e,a){for(var t=[""+(e-1)+(a-1),""+e+(a-1),""+(e+1)+(a-1),""+(e-1)+a,""+(e+1)+a,""+(e-1)+(a+1),""+e+(a+1),""+(e+1)+(a+1)],o=0;o<t.length;o++){var n=t[o],i=window.pzaplantManager.plantDataMap.get(n);if(i&&i.plantData&&i.plantData.plantType===p.pzaPlantEnum.PLANTERN)return!1}return!0},a.prototype.onDisable=function(){if(e.prototype.onDisable.call(this),s.pzaGameState.isVaseMode())for(var a=this.getAroundPos(),t=0;t<a.length;t++){var o=a[t],n=window.pzaplantManager.pzaJarMap.get(o);n&&this.checkPlanternAround(n.jarData.xIndex,n.jarData.yIndex)&&n.lightOff()}},a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),window.pzaMapManager.planternScatterFog(a);var o=function(){t.animation.playAnimation("idle",!1,o)};if(this.animation.playAnimation("idle",!1,o),l.pzaEffectManager.createPlanternEffect(this.baseData,this.baseData.logicPos,function(e){t.lightEffect=e}),r.pzaSoundManager.playAudio("plantern_enter"),s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1,s.pzaGameState.usePlanternBlover=!0,s.pzaGameState.isVaseMode())for(var n=this.getAroundPos(),i=0;i<n.length;i++){var p=n[i],c=window.pzaplantManager.pzaJarMap.get(p);c&&c.lighted()}},a.prototype.close=function(){e.prototype.close.call(this),window.pzaMapManager.planternRemove(this.baseData)},a.prototype.onRowChanged=function(e,a,t){window.pzaMapManager.planternRemove(this.baseData),this.baseData.yIndex=t,window.pzaMapManager.planternScatterFog(this.baseData),this.lightEffect&&this.lightEffect.setPosition(this.baseData.logicPos)},i([d],a)}(c.pzaBasePlant));t.pzaPlantern=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPogoZombie:[function(e,a,t){"use strict";cc._RF.push(a,"27db4B0lNVCSYrTzm7645M2","pzaPogoZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPogoZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaPlantEnum"),c=e("../Data/pzaZombieEnum"),u=e("../pzaGameState"),d=e("./pzaBaseZombie"),h=e("./pzaZombieState"),m=e("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jump1Ani="jump",a.jump2Ani="jump2",a.jumping=!1,a.originSpeed=0,a}return n(a,e),a.prototype.updateAllSlot=function(){},a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,54.37,4.76,-99.18))]])},a.prototype.bindData=function(a){this.jumping=!1,e.prototype.bindData.call(this,a),this.originSpeed=this.baseData.zombieData.moveSpd,a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1))},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(e);else{if(this.hasTool)return 0==this.jumping&&(this.body&&this.body.curTarget?this.baseData.zombieData.moveSpd=this.originSpeed/3:this.baseData.zombieData.moveSpd=this.originSpeed),void this.updateMove(e);var a=this.findTarget();null==a||a.isDead?this.updateMove(e):this.attack(e,a)}else this.changeRowMove(e)}},a.prototype.findJumpTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;var e=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.zombieData)return null;if(this.body.curTarget.plantData){if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var a=window.pzaplantManager.pumpkinDataMap.get(e);return null==a||a.isDead?null:a}if(r.pzaPlantConfigData.isTallPlant(this.body.curTarget.plantData.plantType))return this.body.curTarget}var t=window.pzaplantManager.plantDataMap.get(e);return null==t||t.isDead||t.plantData.plantType!=s.pzaPlantEnum.TALL_NUT?this.body.curTarget:t},a.prototype.jump=function(){var e=this,a=this.findJumpTarget();if(null!=a){var t=!r.pzaPlantConfigData.isTallPlant(a.plantData.plantType);this.jumping=!0,t||(a.plantData.defJumpTarget=!0);var o=this.baseData.zombieData.moveSpd;this.baseData.zombieData.moveSpd=0,p.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation(this.jump2Ani,!1,function(){p.pzaSoundManager.playAudio("pogo_zombie");var a=e.animation.getAnimationDuration(e.jump1Ani);e.baseData.zombieData.moveSpd=100/a,e.animation.playAnimation(e.jump1Ani,!1,function(){e.baseData.zombieData.moveSpd=o,e.body.curTarget=null,e.jumping=!1,e.playMoveAnimation()},function(){t||(e.baseData.zombieData.moveSpd=o,e.jumping=!1,e.toolDeath(),p.pzaSoundManager.playAudio("bonk"))})})}else this.playMoveAnimation()},a.prototype.jumpGridHasPlant=function(e,a){if(e<0)return!1;var t=!1,o=""+e+a;return null!=window.pzaplantManager.pumpkinDataMap.get(o)&&(t=!0),null!=window.pzaplantManager.plantDataMap.get(o)&&(t=!0),null!=window.pzaplantManager.plantEnvDataMap.get(o)&&(t=!0),t},a.prototype.onChangeIndex=function(){},a.prototype.playMoveAnimation=function(){var e=this;this.zombieState=h.pzaZombieState.MOVE,this.hasTool?(p.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation(this.jump2Ani,!1,function(){e.jump()})):(this.updateAllSlot(0),this.animation.playAnimation("move",!0,null,null,1))},a.prototype.toolDeath=function(){e.prototype.toolDeath.call(this);var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/a,this.playMoveAnimation(),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL),this.slotMap.delete(m.pzaZombieSlotType.butter),this.butterSlot=m.pzaZombieSlotType.butter2,this.slotMap.set(m.pzaZombieSlotType.butter2,new m.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-28.23,87.93)))},a.prototype.zombieDying=function(){this.zombieHurtState=c.pzaHurtStateEnum.DYING,this.updateAllSlot(3)},a.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName),this.updateAllSlot(2)},a.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT,this.updateAllSlot(1)},i([y],a.prototype,"jump1Ani",void 0),i([y],a.prototype,"jump2Ani",void 0),i([z],a)}(d.pzaBaseZombie);t.pzaPogoZombie=g,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPolevaultingZombie:[function(e,a,t){"use strict";cc._RF.push(a,"26b45tyyhtNxoQDjmmxZDGZ","pzaPolevaultingZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPolevaultingZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaPlantEnum"),c=e("../Data/pzaZombieEnum"),u=e("../pzaGameState"),d=e("./pzaBaseZombie"),h=e("./pzaZombieState"),m=e("./pzaZombieSlot"),f=e("../../Common/pzaMapManager"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jumpBf_Ani="jump",a.jumpBf_SrAni="jump",a.jumpBf_SwAni="jump",a.jumping_Ani="jump2",a.jumping_SrAni="jump2",a.jumping_SwAni="jump2",a.jumpdone_Ani="jump4",a.jumpdone_SrAni="jump4",a.jumpdone_SwAni="jump4",a.garlicSkinName="zombie_2",a.hasJump=!1,a.jumping=!1,a.jumpOver=!1,a.jumpMsp=0,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,73.41,7.38,-92.77))],[m.pzaZombieSlotType.head_nut,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.head_nut).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.head_nut+"1",194.65,15.01,-88.24)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.head_nut+"2",194.65,15.01,-88.24)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.head_nut+"3",194.65,15.01,-88.24))]])},a.prototype.bindData=function(a){this.hasJump=!1,this.jumping=!1,this.jumpMsp=0,e.prototype.bindData.call(this,a),this.baseData.canJump=!0,this.body.changeBody(cc.v2(-10,75),110)},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead)if(this.jumpMsp>0)this.jumpMove(e);else if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(e);else if(this.jumping){var a=.1*u.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,a)}else if(this.hasJump){var t=this.findTarget();null==t||t.isDead?this.updateMove(e):this.attack(e,t)}else{var o=this.findJumpTarget();null!=o?this.jump(o):this.updateMove(e)}else this.changeRowMove(e)},a.prototype.calculateDistance=function(e,a,t,o){var n=t-e,i=o-a;return Math.sqrt(n*n+i*i)},a.prototype.findJumpTarget=function(){var e=this,a=null;if(1==u.pzaGameState.curChapter&&5==u.pzaGameState.curPart||6==u.pzaGameState.curChapter&&5==u.pzaGameState.curPart||u.pzaGameState.isMiniMode()&&1==u.pzaGameState.curChapter&&6==u.pzaGameState.curPart)return window.pzaplantManager.plantMap.forEach(function(t,o){(o.xIndex==e.baseData.xIndex-1||o.xIndex==e.baseData.xIndex-2)&&o.yIndex==e.baseData.yIndex&&e.calculateDistance(o.logicPos.x,o.logicPos.y,e.baseData.logicPos.x,e.baseData.logicPos.y)<=210&&(a=o)}),a;if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(this.body.curTarget.isBrain)return null;if(null==this.body.curTarget.zombieData){var t=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var o=window.pzaplantManager.pumpkinDataMap.get(t);return null==o||o.isDead?null:o}if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.TALL_NUT)return this.body.curTarget;var n=window.pzaplantManager.plantDataMap.get(t);if(n&&r.pzaPlantConfigData.isTallPlant(n.plantData.plantType))return n;var i=window.pzaplantManager.plantEnvDataMap.get(t);if(i&&r.pzaPlantConfigData.isTallPlant(i.plantData.plantType))return i;if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.COB_CANNON)return this.body.curTarget;var p=window.pzaplantManager.plantDataMap.get(t);return null==p||p.isDead||p.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&p.plantData.plantType!=s.pzaPlantEnum.COB_CANNON?this.body.curTarget:p}},a.prototype.jumpMove=function(e){this.baseData.logicPos.x-=e*this.jumpMsp},a.prototype.jumpDone=function(){this.jumping=!1,this.baseData.zombieData.toolType=c.pzaEquipType.NO_EQUIP,this.toolDeath();var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/e;var a=u.pzaGameState.map.getMapXIndex(this.baseData.logicPos);this.baseData.xIndex=a,this.hasJump=!0,this.baseData.canJump=!1,this.jumpOver?(this.playMoveAnimation(),this.body.curTarget=null):this.animation.playAnimation(this.getAttackAniName(),!0),this.body.changeBody(cc.v2(20,75),60),this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL),this.jumpMsp=0,this.setWaterState(this.baseData.xIndex,this.baseData.yIndex)},a.prototype.jump=function(e){var a=this;if(null!=e){var t=e.xIndex;this.jumping=!0;var o=this.animation.getAnimationDuration(this.getJumpBeforeAni());this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1)),e.plantData.plantType!=s.pzaPlantEnum.TALL_NUT_BOWLING&&(this.body.node.getComponent(cc.BoxCollider).enabled=!1),this.jumpOver=!r.pzaPlantConfigData.isTallPlant(e.plantData.plantType),this.jumpOver||(e.plantData.defJumpTarget=!0),this.setWaterState(this.baseData.xIndex,this.baseData.yIndex);var n=this.jumpOver?this.getJumpingAni():this.getJumpdoneAni();o+=this.animation.getAnimationDuration(n)+.1,this.scheduleOnce(function(){!a.jumping||a.baseData.buffData.hasBuff(l.pzaBuffType.FROZEN)||u.pzaGameState.gamePause||(a.body.node.getComponent(cc.BoxCollider).enabled=!0,a.baseData.isDead||a.jumpDone())},o),console.log("play jump1"),this.animation.playAnimation(this.getJumpBeforeAni(),!1,function(){if(a.body.curTarget=e,a.jumpOver){var o=u.pzaGameState.map.getXPos(t)+u.pzaGameState.map.getMapOriPos().x;a.jumpMsp=(a.baseData.logicPos.x-o)/.4,console.log("this.jumpMsp ",a.jumpMsp)}else o=u.pzaGameState.map.getXPos(t)+u.pzaGameState.map.getMapOriPos().x,a.jumpMsp=(a.baseData.logicPos.x-o+30)/.4,console.log("this.jumpMsp ",a.jumpMsp);a.setWaterState(a.baseData.xIndex,a.baseData.yIndex),a.animation.playAnimation(a.jumpOver?a.getJumpingAni():a.getJumpdoneAni(),!1,function(){a.jumpDone(),a.jumpOver||p.pzaSoundManager.playAudio("bonk")},function(){a.jumpMsp=0})},function(){p.pzaSoundManager.playAudio("poleland"),a.scheduleOnce(function(){p.pzaSoundManager.playAudio("polevault")},.1)},1)}},a.prototype.death=function(a,t){e.prototype.death.call(this,a,t),this.unscheduleAllCallbacks()},a.prototype.flaserDeath=function(){e.prototype.flaserDeath.call(this),this.unscheduleAllCallbacks()},a.prototype.onWaterEnter=function(){this.jumping||e.prototype.onWaterEnter.call(this)},a.prototype.onWaterExit=function(){this.jumping||e.prototype.onWaterExit.call(this)},a.prototype.getMoveAniName=function(){return this.hasJump?e.prototype.getMoveAniName.call(this):this.hasInWater?this.baseData.zombieData.zombieType==c.pzaZombieEnum.POLEVAULTING_ZOMBIE?this.hasJump?"move_duck2":"move2_duck2":"move_duck2":this.hasUseSrAni?"run_duck":"run"},a.prototype.getMoveAniNameArray=function(){var a=[];return this.hasJump?e.prototype.getMoveAniNameArray.call(this):(this.hasInWater?this.baseData.zombieData.zombieType==c.pzaZombieEnum.POLEVAULTING_ZOMBIE?a.push(this.hasJump?"move_duck2":"move2_duck2"):a.push("move_duck2"):this.hasUseSrAni?a.push("run_duck"):a.push("run"),a)},a.prototype.playMoveAnimation=function(){var e=this;this.zombieState=h.pzaZombieState.MOVE;for(var a=this.getMoveAniNameArray(),t=0;t<a.length;t++)if(a[t]==this.animation.spineAnimation.animation)return;this.animation.playAnimation(this.getMoveAniName(),!0,null,function(a,t){t&&"attack"==t.data.name&&e.shoot()},1)},a.prototype.shoot=function(){},a.prototype.zombieGoHome=function(){if(u.pzaGameState.isZombieMode()&&window.pzaplantManager.hasBrain(this.baseData.yIndex)){if(this.hasJump)return;this.hasJump=!0,this.baseData.canJump=!1;var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);return this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/a,void this.animation.playAnimation(this.moveAniName[0],!0,null,null,1)}e.prototype.zombieGoHome.call(this)},a.prototype.zombieWinMove=function(a){if(e.prototype.zombieWinMove.call(this,a),!this.hasJump){this.hasJump=!0,this.baseData.canJump=!1;var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t,this.animation.playAnimation(this.moveAniName[0],!0)}},a.prototype.ashesDeath=function(){this.jumping?this.death(!1):e.prototype.ashesDeath.call(this)},a.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),"zombie_2"==this.curSkinName&&(this.curSkinName="zombie_2_1"),this.changeSkin(this.curSkinName)},a.prototype.getJumpBeforeAni=function(){return this.hasInWater?this.jumpBf_SwAni:this.hasUseSrAni?this.jumpBf_SrAni:this.jumpBf_Ani},a.prototype.getJumpingAni=function(){var e=this.hypnosisState?1:-1,a=""+(u.pzaGameState.map.getMapXIndex(this.baseData.logicPos)+e)+u.pzaGameState.map.getMapYIndex(this.baseData.logicPos);return window.pzaMapManager.BlockTypeMap.get(a)==f.pzaBlockType.POND?this.jumping_SwAni:this.hasUseSrAni?this.jumping_SrAni:this.jumping_Ani},a.prototype.getJumpdoneAni=function(){return this.hasInWater?this.jumpdone_SwAni:this.hasUseSrAni?this.jumpdone_SrAni:this.jumpdone_Ani},i([g({displayName:"\u5730\u9762\u8df3\u8dc3\u524d"})],a.prototype,"jumpBf_Ani",void 0),i([g({displayName:"\u5730\u9762\u6cf3\u5708\u8df3\u8dc3\u524d"})],a.prototype,"jumpBf_SrAni",void 0),i([g({displayName:"\u6c34\u9762\u8df3\u8dc3\u524d"})],a.prototype,"jumpBf_SwAni",void 0),i([g({displayName:"\u5730\u9762\u8df3\u8dc3\u4e2d"})],a.prototype,"jumping_Ani",void 0),i([g({displayName:"\u5730\u9762\u6cf3\u5708\u8df3\u8dc3\u4e2d"})],a.prototype,"jumping_SrAni",void 0),i([g({displayName:"\u6c34\u9762\u8df3\u8dc3\u4e2d"})],a.prototype,"jumping_SwAni",void 0),i([g({displayName:"\u5730\u9762\u8df3\u8dc3\u540e"})],a.prototype,"jumpdone_Ani",void 0),i([g({displayName:"\u5730\u9762\u6cf3\u5708\u8df3\u8dc3\u540e"})],a.prototype,"jumpdone_SrAni",void 0),i([g({displayName:"\u6c34\u9762\u8df3\u8dc3\u540e"})],a.prototype,"jumpdone_SwAni",void 0),i([y],a)}(d.pzaBaseZombie);t.pzaPolevaultingZombie=v,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaMapManager":"pzaMapManager","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPortalDoorBody:[function(e,a,t){"use strict";cc._RF.push(a,"818f6ilajRJiprj06kx90Bg","pzaPortalDoorBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPortalDoorBody=void 0;var r,p=e("../Common/pzaCollisionManager");(function(e){e[e.light=0]="light",e[e.dark=1]="dark"})(r||(r={}));var l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.portal=null,a}return n(a,e),a.prototype.enable=function(e){this.portal=e,p.pzaCollisionManager.getInstance.addPortalByRow(this.portal.yIndex,this),this.node.active=!0},a.prototype.disable=function(){this.portal&&p.pzaCollisionManager.getInstance.delPortalByRow(this.portal.yIndex,this),this.node&&this.node.isValid&&(this.node.active=!1)},a.prototype.onCollisionStay=function(e,a){this.portal.onCollision(e,a)},a.prototype.onCollisionEnter=function(e,a){this.portal.onCollision(e,a)},a.prototype.getCollider=function(){if(!this.node||!this.node.isValid)return null;var e=this.node.getComponent(cc.Collider);return e.poSource=this.node.parent,e},i([s],a)}(cc.Component));t.pzaPortalDoorBody=c,cc._RF.pop()},{"../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaPortalDoor:[function(e,a,t){"use strict";cc._RF.push(a,"c5e344d8CVPerRKInjFoQLM","pzaPortalDoor");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPortalDoor=void 0;var r,p=e("../../Common/pzaBaseComponent"),l=e("../../Common/pzaCollisionManager"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaSpineController"),d=e("../../Common/pzaWorldEventManager"),h=e("../Bullet/pzaBaseBullet"),m=e("../Bullet/pzaThrowBullet"),f=e("../Data/pzaZombieEnum"),z=e("../pzaBaseBody"),y=e("../pzaGameState"),g=e("../pzaPortalDoorBody"),v=e("../Zombie/pzaZomboni"),b=e("./pzaIceGroundEffect");(function(e){e[e.light=0]="light",e[e.dark=1]="dark"})(r||(r={}));var P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.body=null,a.animation=null,a.targetPortalDoor=null,a.yIndex=-1,a.xIndex=-1,a}return n(a,e),a.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.BACK_HOME,this.close,this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.GAME_OVER,this.close,this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},a.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.BACK_HOME,this.close,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.GAME_OVER,this.close,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),this.body.disable()},a.prototype.init=function(e,a,t,o){var n=this;this.targetPortalDoor=e,this.xIndex=o,this.yIndex=t;var i=y.pzaGameState.map.getBlockLogicPos(o,t,0,0);i.x+=120,i.y+=20-2*this.xIndex,this.node.setPosition(i),y.pzaGameState.map.fixMapYOffset(o,i,0),a==r.light?this.animation.playAnimation("open1",!1,function(){n.animation.playAnimation(n.xIndex>=n.targetPortalDoor.xIndex?"idle1":"light1",!0,function(){})}):a==r.dark&&this.animation.playAnimation("open2",!1,function(){n.animation.playAnimation(n.xIndex>=n.targetPortalDoor.xIndex?"idle2":"light2",!0,function(){})}),this.body.enable(this);var p=10*-(this.yIndex+1)+12;this.node.zIndex=p},a.prototype.pauseSelf=function(){},a.prototype.resumeSelf=function(){},a.prototype.onCollision=function(e,a){if(null!=e)if(e.node.group==s.pzaGroupEnum.ZOMBIE||e.node.group==s.pzaGroupEnum.PLANT){var t=e.getComponent(z.pzaBaseBody);this.onZombieCollision(t,e.node.parent)}else e.node.group!=s.pzaGroupEnum.PLANT_BULLET&&e.node.group!=s.pzaGroupEnum.ZOMBIE_BULLET||this.onBulletCollision(e,a)},a.prototype.onZombieCollision=function(e){if(null!=e&&null!=e.baseData&&!e.baseData.isDead&&e.baseData.zombieData){if(e.baseData.zombieData.direction<0&&this.node.x<e.baseData.logicPos.x&&!e.baseData.portaled&&(c.pzaSoundManager.playAudio("portal",1),this.blinkTargetDoor(e,40),e.baseData.zombieData.cate==f.pzaZombieCate.IceCar)){var a=e.node.parent.getComponent(v.pzaZomboni);if(a&&a.baseData&&a.baseData.groundEffect){var t=a.baseData.groundEffect.getComponent(b.pzaIceGroundEffect);t&&(t.isBreak=!0),setTimeout(function(){a.createSpecialGround()},100)}}e.baseData.zombieData.direction>0&&this.node.x>e.baseData.logicPos.x&&!e.baseData.portaled&&this.blinkTargetDoor(e,80)}},a.prototype.onBulletCollision=function(e){var a=e.node.getComponent(h.pzaBaseBullet);if(a&&!a.isInAir&&!e.node.getComponent(m.pzaThrowBullet)){if(a.direction.x<0&&this.node.x<a.node.x){l.pzaCollisionManager.getInstance.delBulletByRow(a.bulletYIndex,a),l.pzaCollisionManager.getInstance.addBulletByRow(this.targetPortalDoor.yIndex,a),a.bulletYIndex=this.targetPortalDoor.yIndex;var t=y.pzaGameState.map.getXInterval(this.targetPortalDoor.xIndex)/2,o=.1*y.pzaGameState.map.getYInterval(this.targetPortalDoor.yIndex);(n=y.pzaGameState.map.getBlockLogicPos(this.targetPortalDoor.xIndex,this.targetPortalDoor.yIndex,t,o)).x+=40,n.y+=80,e.node.x=n.x,e.node.y=n.y,((i=y.pzaGameState.map.getMapSkewColumn())<=0||this.targetPortalDoor.xIndex>i-2)&&(a.maxPosX=null,a.yTargetPos=null)}var n,i;if(a.direction.x>0&&this.node.x>a.node.x)l.pzaCollisionManager.getInstance.delBulletByRow(a.bulletYIndex,a),l.pzaCollisionManager.getInstance.addBulletByRow(this.targetPortalDoor.yIndex,a),a.bulletYIndex=this.targetPortalDoor.yIndex,t=y.pzaGameState.map.getXInterval(this.targetPortalDoor.xIndex)/2,o=.1*y.pzaGameState.map.getYInterval(this.targetPortalDoor.yIndex),(n=y.pzaGameState.map.getBlockLogicPos(this.targetPortalDoor.xIndex,this.targetPortalDoor.yIndex,t,o)).x+=80,n.y+=80,e.node.x=n.x,e.node.y=n.y,((i=y.pzaGameState.map.getMapSkewColumn())<=0||this.targetPortalDoor.xIndex>i-2)&&(a.maxPosX=null,a.yTargetPos=null)}},a.prototype.blinkTargetDoor=function(e,a){e.baseData.zombieData.direction<0?window.pzazombieManager.zombieChangeMapRow(e,e.baseData,this.targetPortalDoor.yIndex):e.baseData.zombieData.direction>0&&e.baseData.zombieData.hypnosis&&l.pzaCollisionManager.getInstance.plantChangeRow(e,e.baseData.yIndex,this.targetPortalDoor.yIndex),e.baseData.xIndex=this.targetPortalDoor.xIndex,e.baseData.yIndex=this.targetPortalDoor.yIndex,e.baseData.portaled=!0;var t=y.pzaGameState.map.getXInterval(e.baseData.xIndex)/2,o=.1*y.pzaGameState.map.getYInterval(e.baseData.yIndex),n=y.pzaGameState.map.getBlockLogicPos(e.baseData.xIndex,e.baseData.yIndex,t,o);n.x+=a,e.baseData.logicPos=n;var i=window.pzazombieManager.getZombie(e.baseData);if(i){var r=10*-e.baseData.yIndex+5;i.node.zIndex=r}},a.prototype.close=function(){e.prototype.close.call(this)},i([E({type:g.pzaPortalDoorBody})],a.prototype,"body",void 0),i([E({type:u.pzaSpineController})],a.prototype,"animation",void 0),i([C],a)}(p.pzaBaseComponent);t.pzaPortalDoor=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZomboni":"pzaZomboni","../pzaBaseBody":"pzaBaseBody","../pzaGameState":"pzaGameState","../pzaPortalDoorBody":"pzaPortalDoorBody","./pzaIceGroundEffect":"pzaIceGroundEffect"}],pzaPortalEffect:[function(e,a,t){"use strict";cc._RF.push(a,"ce06ap+dYlC8rRKIMTQDOA7","pzaPortalEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPortalEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaSpineController"),s=e("../../Common/pzaUtil"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.animation=null,a.curReadyTime=0,a.readyTimer=0,a}return n(a,e),a.prototype.init=function(e,a){void 0===a&&(a=!0),this.call=e,this.readyTimer=s.pzaUtil.getRandomFloatNum(.1,1),this.node.opacity=0,!1===a&&(this.readyTimer=1/0,this.showEffect())},a.prototype.showEffect=function(){var e=this;this.node.opacity=255,p.pzaSoundManager.playAudio("portal",1),this.animation.playAnimation("open2",!1,function(){e.call&&e.call(),e.animation.playAnimation("0ff2",!1,function(){e.close()})})},a.prototype.logicUpdate=function(e){this.curReadyTime<this.readyTimer&&(this.curReadyTime+=e,this.curReadyTime>=this.readyTimer&&this.showEffect())},a.prototype.pauseSelf=function(){this.animation.pauseAnimation()},a.prototype.resumeSelf=function(){this.animation.resumeAnimation()},a.prototype.close=function(){e.prototype.close.call(this)},i([d({type:l.pzaSpineController})],a.prototype,"animation",void 0),i([u],a)}(r.pzaBaseComponent);t.pzaPortalEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil"}],pzaPotatoMine:[function(e,a,t){"use strict";cc._RF.push(a,"b1bfb8jog9M2q3U9xqelKMY","pzaPotatoMine");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPotatoMine=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaNameConf"),s=e("../../Common/pzaSoundManager"),c=e("../../Common/pzaUtil"),u=e("../Data/pzaBuffData"),d=e("../Data/pzaPlantEnum"),h=e("../Data/pzaZombieEnum"),m=e("../pzaGameState"),f=e("./pzaAttackType"),z=e("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,v=(y.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lifeTime=0,a.hasBomb=!1,a}return n(a,e),a.prototype.bindData=function(a){if(this.shadowOffset.y=15,e.prototype.bindData.call(this,a),a.plantData.canBeShoot=!1,a.plantData.cate=d.pzaPlantCate.Mine,m.pzaGameState.isZombieMode())return this.lifeTime=0,this.hasBomb=!1,a.plantData.hasBreakGround=!0,void this.animation.playAnimation(l.pzaPlantSkName.POTATO_MINE.ready_idle,!0);this.animation.playAnimation(l.pzaPlantSkName.POTATO_MINE.idle,!0),this.lifeTime=0,this.hasBomb=!1,m.pzaGameState.onlyShroomCofee=!1},a.prototype.logicUpdate=function(a){if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&!this.hasBomb){if(this.baseData&&this.baseData.buffData.hasBuff(u.pzaBuffType.FROZEN))return null;if(this.baseData.plantData.hasBreakGround){var t=this.findAttackTarget();if(null==t&&(t=this.findDrZomBoss()),null!=t&&t.isDead&&(t=null,this.body.curTarget=null),null!=t)return void this.attack(t)}this.baseData.isDead||(this.lifeTime+=a,this.lifeTime>=15&&!this.baseData.plantData.hasBreakGround&&this.breakGround())}},a.prototype.findAttackTarget=function(){return this.body.curTarget},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return this.baseData.xIndex>=7&&null!=e&&null!=e.baseData&&!e.baseData.isDead&&!e.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?e.baseData:null},a.prototype.breakGround=function(){var e=this;this.baseData.plantData.hasBreakGround=!0,s.pzaSoundManager.playAudio("PotatoMineGrow"),this.animation.playAnimation(l.pzaPlantSkName.POTATO_MINE.breakGround,!1,function(){e.animation.playAnimation(l.pzaPlantSkName.POTATO_MINE.ready_idle,!0)})},a.prototype.attack=function(e){var a=this;this.hasBomb=!0,this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),s.pzaSoundManager.playAudio("PotatoMineBoom"),this.animation.playAnimation(l.pzaPlantSkName.POTATO_MINE.blow,!1,function(){a.death()},function(){if(e&&!e.isDead){var t=new Set;t.add(e);var o=.6*m.pzaGameState.map.getBlockWidth();window.pzazombieManager.zombieDatas[a.baseData.yIndex].forEach(function(e){if(a.baseData&&null!=e&&(e.xIndex==a.baseData.xIndex||e.xIndex-1==a.baseData.xIndex)){if(c.pzaUtil.getDistance(a.baseData.logicPos,e.logicPos)>o)return;t.add(e)}});var n=0;t.forEach(function(e){if(a.baseData&&null!=e&&!e.isDead&&!e.buffData.hasBuff(u.pzaBuffType.FLY)&&(e.zombieData.zombieType==h.pzaZombieEnum.DIGGER_ZOMBIE||!e.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)&&!e.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))){var t=window.pzazombieManager.getZombie(e);t&&t.hurt(a.baseData.atk,a.baseData,f.pzaAttackType.NORMAL_BOOM),t.baseData.isDead&&n++}}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_2,n)}})},a.prototype.flaserDeath=function(){this.baseData.plantData.hasBreakGround||this.hasBomb||e.prototype.flaserDeath.call(this)},a.prototype.hurt=function(a,t,o){this.baseData&&this.baseData.plantData&&this.baseData.plantData.hasBreakGround||e.prototype.hurt.call(this,a,t,o)},a.prototype.death=function(a,t){e.prototype.death.call(this,a,t,!1)},a.prototype.close=function(){e.prototype.close.call(this)},i([g],a)}(z.pzaBasePlant));t.pzaPotatoMine=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPowerTime:[function(e,a,t){"use strict";cc._RF.push(a,"7e2dd8NenFK9otWvmc/4K8U","pzaPowerTime");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPowerTime=void 0;var r=e("../Common/pzaLocalData"),p=e("../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.recoverPower=1,a.saveTime=60,a}return n(a,e),a.prototype.update=function(e){r.pzaLocalData.data.getPowerLeftTime>=0&&r.pzaLocalData.data.power<20&&r.pzaLocalData.isShowPowerGift&&(r.pzaLocalData.data.getPowerLeftTime-=e,r.pzaLocalData.data.getPowerLeftTime<=0&&(r.pzaLocalData.data.getPowerLeftTime=1800,r.pzaLocalData.data.power<20&&(r.pzaLocalData.data.power=r.pzaLocalData.data.power+this.recoverPower>=r.pzaLocalData.maxPower?r.pzaLocalData.maxPower:r.pzaLocalData.data.power+this.recoverPower),r.pzaLocalData.addDirty("getPowerLeftTime","power"),p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.UPDATE_POWER,null))),r.pzaLocalData.data.snailSpeedUpTime>=0&&(r.pzaLocalData.data.snailSpeedUpTime-=e),this.saveTime-=e,this.saveTime<=0&&(this.saveTime=60,r.pzaLocalData.addDirty("getPowerLeftTime","power","snailSpeedUpTime"))},i([s],a)}(cc.Component));t.pzaPowerTime=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaPowerView:[function(e,a,t){"use strict";cc._RF.push(a,"dd17fwjDeBNMZ08JZXbVX8d","pzaPowerView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPowerView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaGamePropConfig"),l=e("../Common/pzaItemTips"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaStatisticsMgr"),d=e("../utils/pzaChannel"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tittle=null,a.confirmBtn=null,a.cancelBtn=null,a.closeBtn=null,a.poolPrefab=null,a.adIcon=null,a.comfirmTxt=null,a.toggle=null,a.confirmCall=null,a.cancelCall=null,a}return n(a,e),a.prototype.bindData=function(e,a,t){var o=this;if(this.tittle.string=e,this.confirmCall=a,this.cancelCall=t,this.cancelBtn.active=!1,d.pzaChannel.instance().channel.indexOf("my")>=0){this.closeBtn.active=!1;var n=d.pzaChannel.instance().getCtrl("p6");this.scheduleOnce(function(){o.cancelBtn.active=!0},n)}if(this.node.getChildByName("board")&&this.node.getChildByName("board").getChildByName("powerIcon")&&this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title")){var i=this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title").getComponent(cc.Label);i&&(i.string="X"+s.pzaLocalData.addPowerValue)}if(u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"15"},{name:"adname",value:"\u83b7\u53d6\u4f53\u529b"}),this.toggle.active=!1,this.node.getChildByName("board")&&this.node.getChildByName("board").getChildByName("powerIcon")&&this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title")){var r=this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title").getComponent(cc.Label);r&&(r.string="X"+s.pzaLocalData.addPowerValue)}this.node.getChildByName("board").getChildByName("powerIcon").addComponent(l.default).bindData(p.pzaGamePropEnum.PROP_POWER,-1)},a.prototype.showCloseBtn=function(){this.toggle.active=!1,this.closeBtn.active=!0},a.prototype.clickConfirm=function(){var e=this;c.pzaSoundManager.playSFX(),d.pzaChannel.instance().showVideo({sucCall:function(){e.confirmCall&&e.confirmCall(),e.close()},failCall:function(){},endCall:function(){},posName:"\u4f53\u529b\u83b7\u53d6",adsid:"15"})},a.prototype.clickCancel=function(){c.pzaSoundManager.playSFX(),this.cancelCall&&this.cancelCall(),this.close()},a.prototype.close=function(){this.poolPrefab?r.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):r.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u6807\u9898",type:cc.Label})],a.prototype,"tittle",void 0),i([f({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Node})],a.prototype,"confirmBtn",void 0),i([f({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],a.prototype,"cancelBtn",void 0),i([f({displayName:"\u5173\u95ed\u6309\u94ae",type:cc.Node})],a.prototype,"closeBtn",void 0),i([f(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([f(cc.Node)],a.prototype,"adIcon",void 0),i([f(cc.Label)],a.prototype,"comfirmTxt",void 0),i([f(cc.Node)],a.prototype,"toggle",void 0),i([m],a)}(cc.Component);t.pzaPowerView=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel"}],pzaPower:[function(e,a,t){"use strict";cc._RF.push(a,"ecd83JmX5VOKoHPwQkk0m/P","pzaPower");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPower=void 0;var r=e("../Common/pzaLocalData"),p=e("../Common/pzaUIManager"),l=e("../Common/pzaWorldEventManager"),s=e("../Load/pzaPreLoadManager"),c=e("../utils/pzakc"),u=e("./pzaPowerView"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.powerLab=null,a.powerAni=null,a.getPowerLeftLab=null,a.showCountDown=!0,a}return n(a,e),a.prototype.onEnable=function(){var e=this;r.pzaLocalData.isShowPowerGift?(l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_POWER,this.updatePower,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.POWER_ANI,this.showPowerAni,this),this.powerAni.active=!1,this.powerAni.opacity=255,this.powerLab.string=r.pzaLocalData.data.power+"/"+r.pzaLocalData.maxPower,this.schedule(function(){e.getPowerLeftLab.string=c.default.formatCountdown(r.pzaLocalData.data.getPowerLeftTime)},1,cc.macro.REPEAT_FOREVER),this.showCountDown||(this.getPowerLeftLab.node.active=!1,this.getPowerLeftLab.node.parent.active=!1),r.pzaLocalData.data.power>=20&&(this.getPowerLeftLab.node.active=!1,this.getPowerLeftLab.node.parent.active=!1)):this.node.active=!1},a.prototype.showPowerAni=function(e){this.powerAni.active=!0,this.powerAni.opacity=255,this.powerAni.stopAllActions(),this.powerAni.getChildByName("title").getComponent(cc.Label).string="-"+e.cost,this.powerAni.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,60)),cc.fadeOut(.3)))},a.prototype.updatePower=function(){this.powerLab.string=r.pzaLocalData.data.power+"/"+r.pzaLocalData.maxPower,this.showCountDown&&(r.pzaLocalData.data.power>=20?(this.getPowerLeftLab.node.active=!1,this.getPowerLeftLab.node.parent.active=!1):(this.getPowerLeftLab.node.active=!0,this.getPowerLeftLab.node.parent.active=!0))},a.prototype.clickPower=function(){p.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.POWER_VIEW,function(e){var a=e&&e.getComponent(u.pzaPowerView);a&&a.bindData("\u8865\u5145\u4f53\u529b",function(){var e;e=r.pzaLocalData.data.power+r.pzaLocalData.addPowerValue,r.pzaLocalData.data.power=e,r.pzaLocalData.addDirty("power"),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_POWER,null)},null)})},a.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_POWER,this.updatePower,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.POWER_ANI,this.showPowerAni,this)},i([m({displayName:"\u5f53\u524d\u4f53\u529b",type:cc.Label})],a.prototype,"powerLab",void 0),i([m({displayName:"\u4f53\u529b\u52a8\u753b",type:cc.Node})],a.prototype,"powerAni",void 0),i([m({displayName:"\u4f53\u529b\u83b7\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],a.prototype,"getPowerLeftLab",void 0),i([m({displayName:"\u662f\u5426\u663e\u793a\u5012\u8ba1\u65f6"})],a.prototype,"showCountDown",void 0),i([h],a)}(cc.Component);t.pzaPower=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./pzaPowerView":"pzaPowerView"}],pzaPreLoadManager:[function(e,a,t){"use strict";cc._RF.push(a,"d9bd6gq3PZCwoEpcfU9s174","pzaPreLoadManager");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPreLoadManager=t.pzaResourceUrl=t.pzaResourceDetail=t.pzaResourceType=void 0;var n,i=e("../Battle/Data/pzaPlantEnum"),r=e("../Battle/Data/pzaZombieEnum"),p=e("../Common/pzaGameConfig"),l=e("../utils/pzaResMgr"),s=e("../View/pzaCommonMask"),c=e("./pzaBundleObjectPool");(function(e){e[e.Prefab=0]="Prefab",e[e.PrefabDir=1]="PrefabDir",e[e.SpriteFrameDir=2]="SpriteFrameDir",e[e.Scene=3]="Scene"})(n=t.pzaResourceType||(t.pzaResourceType={}));var u,d=function(e,a){void 0===a&&(a=n.Prefab),this.url=null,this.resourceType=null,this.url=e,this.resourceType=a};t.pzaResourceDetail=d,function(e){e.MAIN_SCENE="main",e.ZOMBIE_ICON="resources/Texture/ZombieIcon/",e.PLANT_ICON="resources/Texture/PlantIcon/",e.PART_REWARD="resources/Texture/GuanKa/",e.SHOP_ITEM_ICON="resources/Texture/Goods",e.PLANT_SELECT_VIEW="resources/Prefab/View/PlantSelectView",e.PLANT_BELT_VIEW="resources/Prefab/View/PlantBeltView",e.GAME_FAIL_VIEW="resources/Prefab/View/GameFailView",e.GAME_WIN_VIEW="resources/Prefab/View/GameWinView",e.GameWinNoStarView="resources/Prefab/View/GameWinNoStarView",e.GET_ACHIEVE_VIEW="resources/Prefab/View/GetAchieveView",e.GUIDE_DIALOG_VIEW="resources/Prefab/View/GuideDialogView",e.GUIDE_VIEW="resources/Prefab/View/GuideView",e.NEW_ZOMBIE_VIEW="resources/Prefab/View/NewZombieView",e.NEW_PLANT_VIEW="resources/Prefab/View/NewPlantView",e.GAME_MENU_VIEW="resources/Prefab/View/MenuView",e.GAME_ASSESS_VIEW="resources/Prefab/View/AssessView",e.GAME_OPTION_VIEW="resources/Prefab/View/OptionView",e.GAME_REVIVE_VIEW="resources/Prefab/View/ReviveView",e.TRY_SELECT_VIEW="resources/Prefab/View/TrySelectView",e.CG_PAPER_VIEW="resources/Prefab/View/CGPaperView",e.HANDBOOK_VIEW="resources/Prefab/View/HandbookView",e.PLANT_HANDBOOK_VIEW="resources/Prefab/View/PlantHandbookView",e.ZOMBIE_HANDBOOK_VIEW="resources/Prefab/View/ZombieHandbookView",e.SHOP_VIEW="resources/Prefab/View/ShopView",e.BUY_CONFIRM_VIEW="resources/Prefab/View/BuyConfirmView",e.PART_SELECT_VIEW="resources/Prefab/View/PartSelectView",e.HOME_SELECT_VIEW="resources/Prefab/View/HomeView",e.SURVIVAL_VIEW="resources/Prefab/View/SurvivalView",e.PUZZLE_VIEW="resources/Prefab/View/PuzzleView",e.WARNING_VIEW="resources/Prefab/View/WarningView",e.GARDEN_VIEW="resources/Prefab/View/GardenView",e.DAY_SIGN_VIEW="resources/Prefab/View/SignView",e.MONTH_SIGN_VIEW="resources/Prefab/MonthSign/MonthSignView",e.COMMON_REWARD_VIEW="resources/Prefab/View/CommonRewardView",e.SAVE_VIEW="resources/Prefab/View/SaveView",e.SHARE_GIFT_VIEW="resources/Prefab/View/ShareGiftView",e.DAVE_TREASURE_VIEW="resources/Prefab/View/DaveTreasureView",e.RANK_VIEW="resources/Prefab/View/RankView",e.ZOMBIE_SELECT_VIEW="resources/Prefab/View/ZombieSelectView",e.PRE_OPEN_VIEW="resources/Prefab/View/PreOpenView",e.BYTE_SIDEBAR_VIEW="resources/Prefab/View/sideBarView",e.BYTE_RECORD_VIEW="resources/Prefab/View/RecordView",e.POWER_VIEW="resources/Prefab/View/PowerView",e.BATTLEPASS_VIEW="resources/Prefab/ActivityPre/BattlePassView",e.BATTLEPASSTASK_VIEW="resources/Prefab/ActivityPre/BattlePassTaskView",e.NEWPLAYERTASK_VIEW="resources/Prefab/ActivityPre/NewPlayerTaskView",e.LOGINREWARD_VIEW="resources/Prefab/ActivityPre/LoginRewardView",e.RIDERHELP_VIEW="resources/Prefab/ActivityPre/LoginRiderHelpView",e.EXCHANGE_VIEW="resources/Prefab/ActivityPre/ExchangeView",e.GIFT_VIEW="resources/Prefab/View/GiftView",e.VIDEO_GIFT_VIEW="resources/Prefab/View/VideoGiftView",e.VIDEO_PLANT_GIFT_VIEW="resources/Prefab/View/VideoPlantGiftView",e.BUBBLE_ITEM="resources/Prefab/View/BubbleItem",e.BUBBLE_TIPS="resources/Prefab/View/pzaBubbleTips",e.PRIVACY_Win="resources/Prefab/View/PrivacyWin",e.NATIVE_INTER_AD="resources/Prefab/View/NativeInterAd",e.WELFARE_TASK_VIEW="resources/Prefab/View/WelfareTaskView",e.GOTREWARDVIEW="resources/Prefab/View/GotRewardView",e.BELTEQUIPVIEW="resources/Prefab/View/beltEquipView/beltEquipView",e.RIDERFALL_PARENT_VIEW="resources/Prefab/ActivityPre/RiderFallParentView",e.COMIC_VIEW="resources/Prefab/View/ComicView",e.Belt_BianShen_View="resources/Prefab/View/beltEquipView/beltBianShenView",e.NEW_BELT_VIEW="resources/Prefab/View/NewBeltView",e.GARDEN_SHARE_VIEW="resources/Prefab/View/GardenShareView",e.SPEPART_TIPS_VIEW="resources/Prefab/View/SpecialTipsView",e.CHALLENGE_VIEW="resources/Prefab/View/ChallengeView",e.EGGANI_VIEW="resources/Prefab/View/eggAniView",e.PEA_SHOOTER="resources/Prefab/Plant/Peashooter",e.SUN_FLOWER="resources/Prefab/Plant/Sunflower",e.CHERRY_BOMB="resources/Prefab/Plant/CherryBomb",e.WALL_NUT="resources/Prefab/Plant/WallNut",e.POTATO_MINE="resources/Prefab/Plant/PotatoMine",e.SNOW_PEA="resources/Prefab/Plant/SnowPea",e.CHOMPER="resources/Prefab/Plant/Chomper",e.REPEATER="resources/Prefab/Plant/Repeater",e.SUN_SHROOM="resources/Prefab/Plant/SunShroom",e.PUFF_SHROOM="resources/Prefab/Plant/PuffShroom",e.FUME_SHROOM="resources/Prefab/Plant/FumeShroom",e.GRAVE_BUSTER="resources/Prefab/Plant/GraveBuster",e.HYPNO_SHROOM="resources/Prefab/Plant/HypnoShroom",e.SCAREDY_SHROOM="resources/Prefab/Plant/ScaredyShroom",e.ICE_SHROOM="resources/Prefab/Plant/IceShroom",e.DOOM_SHROOM="resources/Prefab/Plant/DoomShroom",e.LILY_PAD="resources/Prefab/Plant/LilyPad",e.SQUASH="resources/Prefab/Plant/Squash",e.THREE_PEATER="resources/Prefab/Plant/ThreePeater",e.TANGLE_KELP="resources/Prefab/Plant/TangleKelp",e.JALAPENO="resources/Prefab/Plant/Jalapeno",e.SPIKEWEED="resources/Prefab/Plant/Spikeweed",e.TORCHWOOD="resources/Prefab/Plant/Torchwood",e.TALL_NUT="resources/Prefab/Plant/TallNut",e.SEA_SHROOM="resources/Prefab/Plant/SeaShroom",e.PLANTERN="resources/Prefab/Plant/Plantern",e.CACTUS="resources/Prefab/Plant/Cactus",e.BLOVER="resources/Prefab/Plant/Blover",e.SPLIT_PEA="resources/Prefab/Plant/SplitPea",e.STAR_FRUIT="resources/Prefab/Plant/StarFruit",e.PUMPKIN="resources/Prefab/Plant/Pumpkin",e.MAGNET_SHROOM="resources/Prefab/Plant/MagnetShroom",e.CABBAGE_PULT="resources/Prefab/Plant/CabbagePult",e.FLOWER_POT="resources/Prefab/Plant/FlowerPot",e.KERNEL_PULT="resources/Prefab/Plant/KernelPult",e.COFFEE_BEAN="resources/Prefab/Plant/CoffeeBean",e.GARLIC="resources/Prefab/Plant/Garlic",e.UMBRELLA_LEAF="resources/Prefab/Plant/UmbrellaLeaf",e.MARIGOLD="resources/Prefab/Plant/Marigold",e.MELON_PULT="resources/Prefab/Plant/MelonPult",e.GATLING_PEA="resources/Prefab/Plant/GatlingPea",e.TWIN_SUNFLOWER="resources/Prefab/Plant/TwinSunflower",e.GLOOM_SHROOM="resources/Prefab/Plant/GloomShroom",e.CATTAIL="resources/Prefab/Plant/Cattail",e.WINTER_MELON="resources/Prefab/Plant/WinterMelon",e.GOLD_MAGNET="resources/Prefab/Plant/GoldMagnet",e.SPIKEROCK="resources/Prefab/Plant/Spikerock",e.COB_CANNON="resources/Prefab/Plant/CobCannon",e.IMITATER="resources/Prefab/Plant/Imitater",e.SUPER_CHOMPER="resources/Prefab/Plant/SuperChomper",e.BOOM_NUT="resources/Prefab/Plant/BoomNut",e.CAIWEN="resources/Prefab/Plant/CaiWen",e.LASERBEAN="resources/Prefab/Plant/LaserBean",e.FireBlover="resources/Prefab/Plant/FireBlover",e.REPEATER_REVERSE="resources/Prefab/Plant/RepeaterReverse",e.FightKing="resources/Prefab/Plant/FightKing",e.Gaby="resources/Prefab/Plant/Gaby",e.PHOENIX="resources/Prefab/Plant/Phoenix",e.Gene_SnowPea="resources/Prefab/Plant/GeneSnowPea",e.STAR_FRUIT_SHADOW="resources/Prefab/Plant/StarFruitShadow",e.WALL_NUT_BOWLING="resources/Prefab/Plant/WallNutBowling",e.BOOM_NUT_BOWLING="resources/Prefab/Plant/BoomNutBowling",e.TALL_NUT_BOWLING="resources/Prefab/Plant/TallNutBowling",e.ZOMBIE="resources/Prefab/Zombie/NormalZombie",e.FLAG_ZOMBIE="resources/Prefab/Zombie/FlagZombie",e.CONE_HEAD_ZOMBIE="resources/Prefab/Zombie/ConeHeadZombie",e.POLEVAULTING_ZOMBIE="resources/Prefab/Zombie/PolevaultingZombie",e.BUCKET_HEAD_ZOMBIE="resources/Prefab/Zombie/BucketHeadZombie",e.NEWSPAPER_ZOMBIE="resources/Prefab/Zombie/NewspaperZombie",e.SCREEN_DOOR_ZOMBIE="resources/Prefab/Zombie/ScreenDoorZombie",e.FOOTBALL_ZOMBIE="resources/Prefab/Zombie/FootballZombie",e.DANCING_ZOMBIE="resources/Prefab/Zombie/DancingZombie",e.BACKUP_DANCER="resources/Prefab/Zombie/BackupDancerZombie",e.DUCKY_TUBE_ZOMBIE="resources/Prefab/Zombie/DuckyTubeZombie",e.DUCKY_TUBE_CONE_ZOMBIE="resources/Prefab/Zombie/DuckyTubeConeZombie",e.DUCKY_TUBE_BUCKET_ZOMBIE="resources/Prefab/Zombie/DuckyTubeBucketZombie",e.SNORKEL_ZOMBIE="resources/Prefab/Zombie/SnorkelZombie",e.ZOMBONI="resources/Prefab/Zombie/Zomboni",e.ZOMBIE_BOBSLED_TEAM="resources/Prefab/Zombie/ZombieBobsledTeam",e.DOLPHIN_RIDER_ZOMBIE="resources/Prefab/Zombie/DolphinRiderZombie",e.JACK_ZOMBIE="resources/Prefab/Zombie/JackZombie",e.BALLOON_ZOMBIE="resources/Prefab/Zombie/BalloonZombie",e.DIGGER_ZOMBIE="resources/Prefab/Zombie/DiggerZombie",e.POGO_ZOMBIE="resources/Prefab/Zombie/PogoZombie",e.YETI_ZOMBIE="resources/Prefab/Zombie/YetiZombie",e.BUNGEE_ZOMBIE="resources/Prefab/Zombie/BungeeZombie",e.LADDER_ZOMBIE="resources/Prefab/Zombie/LadderZombie",e.CATAPULT_ZOMBIE="resources/Prefab/Zombie/CatapultZombie",e.GARGANTUAR="resources/Prefab/Zombie/Gargantuar",e.RED_GARGANTUAR="resources/Prefab/Zombie/Gargantuar",e.IMP="resources/Prefab/Zombie/Imp",e.DR_ZOMBOSS="resources/Prefab/Zombie/DrZomBoss",e.ZOMBIE_BOBSLED="resources/Prefab/Zombie/ZombieBobsled",e.Mac_GARGANTUAR="resources/Prefab/Zombie/MachineGargantuar",e.SQUASH_ZOMBIE="resources/Prefab/Zombie/SquashZombie",e.JALAPENO_ZOMBIE="resources/Prefab/Zombie/JalapenoZombie",e.GATLINGSHOOT_ZOMBIE="resources/Prefab/Zombie/GatlingShooterZombie",e.TALLNUT_ZOMBIE="resources/Prefab/Zombie/TallNutZombie",e.CREAM_NORMAL="resources/Prefab/Zombie/CreamNormal",e.CREAM_PEA="resources/Prefab/Zombie/CreamPea",e.SUN="resources/Prefab/Sun",e.CLEANER_CAR="resources/Prefab/CleanerCar",e.BRAIN="resources/Prefab/Brain",e.PITCHFORK="resources/Prefab/PitchFork",e.WORD_EFFECT="resources/Prefab/Effect/WordEffect",e.SHADOW="resources/Prefab/Effect/Shadow",e.WATERWAVEEFFECT="resources/Prefab/Effect/WaterWaveEffect",e.WARNLINE="resources/Prefab/Effect/WarnLine",e.WAKEUP_EFFECT="resources/Prefab/Effect/wakeUpEffect",e.Track="resources/Prefab/Effect/Track",e.HoleBlock="resources/Prefab/Effect/HoleBlock",e.ProtectBlock="resources/Prefab/Effect/ProtectBlock",e.valueTest="resources/Prefab/valueTest",e.SHOVEL_EFFECT="resources/Prefab/Effect/ShovelEffect",e.PLANT_EFFECT="resources/Prefab/Effect/PlantEffect",e.DROP_COIN="resources/Prefab/Effect/DropCoin",e.DROP_CARD="resources/Prefab/Effect/DropCard",e.DROP_PLANT_CARD="resources/Prefab/Effect/DropPlantCard",e.SHOW_GRASS_EFFECT="resources/Prefab/Effect/ShowGrassEffect",e.GROVE_EFFECT="resources/Prefab/Effect/GroveEffect",e.ROOF_PRE_EFFECT="resources/Prefab/Effect/RoofPreEffect",e.SMOKE_EFFECT="resources/Prefab/Effect/SmokeEffect",e.FOG_EFFECT="resources/Prefab/Effect/FogEffect",e.RAIN_NIGHT_EFFECT="resources/Prefab/Effect/RainNightEffect",e.RAIN_EFFECT="resources/Prefab/Effect/RainEffect",e.WATER_LIGHT_EFFECT="resources/Prefab/Effect/WaterLightEffect",e.WATER_FLOWER_EFFECT="resources/Prefab/Effect/WaterFlowerEffect",e.PLANT_WATER_EFFECT="resources/Prefab/Effect/PlantWaterEffect",e.TOMB="resources/Prefab/Effect/Tomb",e.JAR="resources/Prefab/Jar",e.HAMMER_EFFECT="resources/Prefab/Effect/HammerEffect",e.ICE_GROUND="resources/Prefab/Effect/IceGround",e.ABSORB_IRON_EQUIP="resources/Prefab/Effect/AbsorbIronEquip",e.NUT_BOOM_EFFECT="resources/Prefab/Effect/NutBoomEffect",e.CHERRY_BOOM_EFFECT="resources/Prefab/Effect/CherryBoomEffect",e.JACK_BOOM_EFFECT="resources/Prefab/Effect/JackBoomEffect",e.BOOM_FIRE_EFFECT="resources/Prefab/Effect/BoomFireEffect",e.JALAPENOBOOM_EFFECT="resources/Prefab/Effect/JalapenoBoomEffect",e.BOOM_BALL_EFFECT="resources/Prefab/Effect/FireBallEffect",e.TANGLEKELP_EFFECT="resources/Prefab/Effect/TangleKelpEffect",e.BACK_PUMPKIN="resources/Prefab/Effect/BackPumpkin",e.BACK_PUMPKINPURPLE="resources/Prefab/Effect/BackPumpkinPurple",e.DOOM_HOLE_EFFECT="resources/Prefab/Effect/DoomHoleEffect",e.PUMPKIN_LIGHT_DEF="resources/Prefab/Effect/PumpkinLightDef",e.GOLD_HOLE_EFFECT="resources/Prefab/Effect/GoldHoleEffect",e.ZOMBIE_HOLE_EFFECT="resources/Prefab/Effect/ZombieHoleEffect",e.DOOM_BOOM_EFFECT="resources/Prefab/Effect/DoomBoomEffect",e.ICE_BOOM_EFFECT="resources/Prefab/Effect/IceBoomEffect",e.ICE_BOOMREADY_EFFECT="resources/Prefab/Effect/IceBoomReadyEffect",e.FROZEN_EFFECT="resources/Prefab/Effect/FrozenEffect",e.FUME_SHROOM_EFFECT="resources/Prefab/Effect/FumeShroomEffect",e.GLOOM_SHROOM_EFFECT="resources/Prefab/Effect/GloomShroomEffect",e.LADDER="resources/Prefab/Effect/Ladder",e.BUTTER_EFFECT="resources/Prefab/Effect/ButterEffect",e.PLANTERN_EFFECT="resources/Prefab/Effect/PlanternEffect",e.SQUASH_EFFECT="resources/Prefab/Effect/SquashEffect",e.HYPNO_EFFECT="resources/Prefab/Effect/HypnoEffect",e.COB_BOOM_EFFECT="resources/Prefab/Effect/CobBoomEffect",e.COB_BOOM_HOLE="resources/Prefab/Effect/CobHoleEffect",e.IMITATER_EFFECT="resources/Prefab/Effect/ImitaterEffect",e.DR_ZOM_BALL="resources/Prefab/Effect/DrZomBall",e.BUNGEE_ZOMBIE_EFFECT="resources/Prefab/Effect/BungeeZombieEffect",e.RICOCHET_BULLET_EFFECT="resources/Prefab/Effect/RicochetBulletEffect",e.POCKET_EFFECT="resources/Prefab/Effect/YellowBrowPocketEffect",e.FIRE_EFFECT="resources/Prefab/Effect/FireEffect",e.PORTAL_DOOR="resources/Prefab/Effect/PortalDoor",e.ASHES_EFFECT="resources/Prefab/Effect/NormalAshesEffect",e.HITFLY_EFFECT="resources/Prefab/Effect/HitFlyEffect",e.COLDWIND_EFFECT="resources/Prefab/Effect/ColdWindEffect",e.PORTAL_EFFECT="resources/Prefab/Effect/PortalEffect",e.PLANTCREATE_EFFECT="resources/Prefab/Effect/PlantCreateEffect",e.VALUE_EFFECT="resources/Prefab/Effect/CreateValueEffect",e.VALUE_BULE_EFFECT="resources/Prefab/Effect/CreateBuleValueEffect",e.PLANTDEATH_EFFECT="resources/Prefab/Effect/PlantDeathEffect",e.SLEEPEFFECT="resources/Prefab/Effect/SleepEffect",e.KERNELHIT_EFFECT="resources/Prefab/Effect/HitEffect/KernelHitEffect",e.MAP_BG1="resources/Texture/Map/background1",e.PeaZombie="resources/Prefab/Zombie/PeaZombie",e.Nut_Zombie="resources/Prefab/Zombie/NutZombie",e.HoleNut_Zombie="resources/Prefab/Zombie/HoleNutZombie"}(u=t.pzaResourceUrl||(t.pzaResourceUrl={}));var h=function(){function e(){}return e.getSubResources=function(e){return this.SubResourceMap.get(e)},e.getPartSubResources=function(e,a){var t=e+"-"+a,o=this.PartSubResourceMap.get(t);return null!=o?o:(o=[new d(u.SUN),new d(u.CLEANER_CAR),new d(u.WORD_EFFECT),new d(u.SHADOW),new d(u.SHOVEL_EFFECT),new d(u.PLANT_EFFECT),new d(u.DROP_COIN),new d(u.DROP_CARD),new d(u.DROP_PLANT_CARD),new d(u.ASHES_EFFECT),new d(u.HITFLY_EFFECT),new d(u.SMOKE_EFFECT),new d(u.HOME_SELECT_VIEW),new d(u.GATLING_PEA),new d(u.TWIN_SUNFLOWER),new d(u.GLOOM_SHROOM),new d(u.CATTAIL),new d(u.MELON_PULT),new d(u.SPIKEROCK),new d(u.COB_CANNON),new d(u.PLANTCREATE_EFFECT),new d(u.VALUE_EFFECT),new d(u.VALUE_BULE_EFFECT)],1==e&&1==a&&o.push(new d(u.PEA_SHOOTER),new d(u.SUN_SHROOM)),1==e&&a<=4&&o.push(new d(u.SHOW_GRASS_EFFECT)),1==e&&2==a&&o.push(new d(u.MAP_BG1,n.SpriteFrameDir)),2==e&&(o.push(new d(u.TOMB)),5==a&&o.push(new d(u.HAMMER_EFFECT))),e<=4?o.push(new d(u.GROVE_EFFECT)):o.push(new d(u.ROOF_PRE_EFFECT)),4==e&&(o.push(new d(u.FOG_EFFECT)),5==a&&(o.push(new d(u.JAR)),o.push(new d(u.HAMMER_EFFECT))),10==a&&(o.push(new d(u.RAIN_NIGHT_EFFECT)),o.push(new d(u.RAIN_EFFECT)))),3==e||4==e?(o.push(new d(u.WATER_FLOWER_EFFECT)),o.push(new d(u.WATER_LIGHT_EFFECT)),o.push(new d(u.PLANT_WATER_EFFECT))):5==e&&(o.push(new d(u.BUNGEE_ZOMBIE)),o.push(new d(u.BUNGEE_ZOMBIE_EFFECT))),this.PartSubResourceMap.set(t,o),o)},e.getPlantUrl=function(a){return e.plantPrefabMap.get(a)},e.getZombieUrl=function(a){return e.zombiePrefabMap.get(a)},e.preLoadPrefabByPlantList=function(a,t){var i,r,p,l;try{for(var u=o(a),h=u.next();!h.done;h=u.next()){var m=h.value;this.preLoadPlantSpineData(m)}}catch(b){i={error:b}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}s.pzaCommonMask.showMask(!0,!0);var f=[];try{for(var z=o(a),y=z.next();!y.done;y=z.next()){m=y.value;var g=e.getPlantUrl(m);if(g){var v=new d(g,n.Prefab);f.push(v)}}}catch(P){p={error:P}}finally{try{y&&!y.done&&(l=z.return)&&l.call(z)}finally{if(p)throw p.error}}c.pzaBundleObjectPool.preLoadSubResource(f,function(){console.log("\u690d\u7269\u5217\u8868,\u9884\u52a0\u8f7d\u5b8c\u6210"),s.pzaCommonMask.hideMask(),t&&t()},function(){})},e.preLoadPlantSpineData=function(e){if(e&&e!=i.pzaPlantEnum.CHERRY_BOMB){var a=p.pzaGameConfig.getPlantConfig(e);if(a&&!0===a.isRider){var t="Plant/BK/"+(e>=10?"":"0")+e+"_plant";return e==i.pzaPlantEnum.REPEATER_REVERSE&&(t="Plant/BK/08_plant"),"Plant/BK/30_plant"==t&&(t="Plant/BK/30plant"),void l.pzaResMgr.instance().getSpineSync(t,function(e){e&&console.error(e)})}}},e.MainResourceMap=new Map([[u.MAIN_SCENE,new d(u.MAIN_SCENE,n.Scene)],[u.HOME_SELECT_VIEW,new d(u.HOME_SELECT_VIEW,n.Prefab)],[u.BATTLEPASS_VIEW,new d(u.BATTLEPASS_VIEW,n.Prefab)],[u.ASHES_EFFECT,new d(u.ASHES_EFFECT,n.Prefab)]]),e.SubResourceMap=new Map([[u.ZOMBIE_HANDBOOK_VIEW,[new d(u.ZOMBIE_ICON,n.SpriteFrameDir)]],[u.PLANT_HANDBOOK_VIEW,[new d(u.PLANT_ICON,n.SpriteFrameDir)]],[u.PLANT_SELECT_VIEW,[new d(u.PLANT_ICON,n.SpriteFrameDir)]],[u.PLANT_BELT_VIEW,[new d(u.PLANT_ICON,n.SpriteFrameDir)]],[u.PART_SELECT_VIEW,[new d(u.PART_REWARD,n.SpriteFrameDir)]],[u.SHOP_VIEW,[new d(u.SHOP_ITEM_ICON,n.SpriteFrameDir)]],[u.MAGNET_SHROOM,[new d(u.ABSORB_IRON_EQUIP)]],[u.BOOM_NUT_BOWLING,[new d(u.NUT_BOOM_EFFECT)]],[u.CHERRY_BOMB,[new d(u.CHERRY_BOOM_EFFECT)]],[u.JALAPENO,[new d(u.BOOM_FIRE_EFFECT)]],[u.TORCHWOOD,[new d(u.BOOM_FIRE_EFFECT)]],[u.TANGLE_KELP,[new d(u.TANGLEKELP_EFFECT)]],[u.PUMPKIN,[new d(u.BACK_PUMPKIN),new d(u.PUMPKIN_LIGHT_DEF)]],[u.DOOM_SHROOM,[new d(u.DOOM_BOOM_EFFECT),new d(u.DOOM_HOLE_EFFECT)]],[u.ICE_SHROOM,[new d(u.ICE_BOOM_EFFECT),new d(u.FROZEN_EFFECT)]],[u.FUME_SHROOM,[new d(u.FUME_SHROOM_EFFECT)]],[u.KERNEL_PULT,[new d(u.BUTTER_EFFECT)]],[u.PLANTERN,[new d(u.PLANTERN_EFFECT)]],[u.SQUASH,[new d(u.SQUASH_EFFECT)]],[u.HYPNO_SHROOM,[new d(u.HYPNO_EFFECT)]],[u.GLOOM_SHROOM,[new d(u.GLOOM_SHROOM_EFFECT)]],[u.COB_CANNON,[new d(u.COB_BOOM_EFFECT),new d(u.COB_BOOM_HOLE)]],[u.IMITATER,[new d(u.IMITATER_EFFECT)]],[u.ZOMBONI,[new d(u.ICE_GROUND),new d(u.ZOMBIE_BOBSLED_TEAM),new d(u.ZOMBIE_BOBSLED)]],[u.LADDER_ZOMBIE,[new d(u.LADDER)]],[u.DR_ZOMBOSS,[new d(u.DR_ZOM_BALL)]]]),e.PartSubResourceMap=new Map,e.plantPrefabMap=new Map([[i.pzaPlantEnum.PEA_SHOOTER,u.PEA_SHOOTER],[i.pzaPlantEnum.SUN_FLOWER,u.SUN_FLOWER],[i.pzaPlantEnum.CHERRY_BOMB,u.CHERRY_BOMB],[i.pzaPlantEnum.WALL_NUT,u.WALL_NUT],[i.pzaPlantEnum.POTATO_MINE,u.POTATO_MINE],[i.pzaPlantEnum.SNOW_PEA,u.SNOW_PEA],[i.pzaPlantEnum.CHOMPER,u.CHOMPER],[i.pzaPlantEnum.REPEATER,u.REPEATER],[i.pzaPlantEnum.SUN_SHROOM,u.SUN_SHROOM],[i.pzaPlantEnum.PUFF_SHROOM,u.PUFF_SHROOM],[i.pzaPlantEnum.FUME_SHROOM,u.FUME_SHROOM],[i.pzaPlantEnum.GRAVE_BUSTER,u.GRAVE_BUSTER],[i.pzaPlantEnum.HYPNO_SHROOM,u.HYPNO_SHROOM],[i.pzaPlantEnum.SCAREDY_SHROOM,u.SCAREDY_SHROOM],[i.pzaPlantEnum.ICE_SHROOM,u.ICE_SHROOM],[i.pzaPlantEnum.DOOM_SHROOM,u.DOOM_SHROOM],[i.pzaPlantEnum.LILY_PAD,u.LILY_PAD],[i.pzaPlantEnum.SQUASH,u.SQUASH],[i.pzaPlantEnum.THREE_PEATER,u.THREE_PEATER],[i.pzaPlantEnum.TANGLE_KELP,u.TANGLE_KELP],[i.pzaPlantEnum.JALAPENO,u.JALAPENO],[i.pzaPlantEnum.SPIKEWEED,u.SPIKEWEED],[i.pzaPlantEnum.TORCHWOOD,u.TORCHWOOD],[i.pzaPlantEnum.TALL_NUT,u.TALL_NUT],[i.pzaPlantEnum.SEA_SHROOM,u.SEA_SHROOM],[i.pzaPlantEnum.PLANTERN,u.PLANTERN],[i.pzaPlantEnum.CACTUS,u.CACTUS],[i.pzaPlantEnum.BLOVER,u.BLOVER],[i.pzaPlantEnum.SPLIT_PEA,u.SPLIT_PEA],[i.pzaPlantEnum.STAR_FRUIT,u.STAR_FRUIT],[i.pzaPlantEnum.PUMPKIN,u.PUMPKIN],[i.pzaPlantEnum.MAGNET_SHROOM,u.MAGNET_SHROOM],[i.pzaPlantEnum.CABBAGE_PULT,u.CABBAGE_PULT],[i.pzaPlantEnum.FLOWER_POT,u.FLOWER_POT],[i.pzaPlantEnum.KERNEL_PULT,u.KERNEL_PULT],[i.pzaPlantEnum.COFFEE_BEAN,u.COFFEE_BEAN],[i.pzaPlantEnum.GARLIC,u.GARLIC],[i.pzaPlantEnum.UMBRELLA_LEAF,u.UMBRELLA_LEAF],[i.pzaPlantEnum.MARIGOLD,u.MARIGOLD],[i.pzaPlantEnum.MELON_PULT,u.MELON_PULT],[i.pzaPlantEnum.GATLING_PEA,u.GATLING_PEA],[i.pzaPlantEnum.TWIN_SUNFLOWER,u.TWIN_SUNFLOWER],[i.pzaPlantEnum.GLOOM_SHROOM,u.GLOOM_SHROOM],[i.pzaPlantEnum.CATTAIL,u.CATTAIL],[i.pzaPlantEnum.WINTER_MELON,u.WINTER_MELON],[i.pzaPlantEnum.GOLD_MAGNET,u.GOLD_MAGNET],[i.pzaPlantEnum.SPIKEROCK,u.SPIKEROCK],[i.pzaPlantEnum.COB_CANNON,u.COB_CANNON],[i.pzaPlantEnum.IMITATER,u.IMITATER],[i.pzaPlantEnum.WALL_NUT_BOWLING,u.WALL_NUT_BOWLING],[i.pzaPlantEnum.BOOM_NUT_BOWLING,u.BOOM_NUT_BOWLING],[i.pzaPlantEnum.TALL_NUT_BOWLING,u.TALL_NUT_BOWLING],[i.pzaPlantEnum.SUPER_CHOMPER,u.SUPER_CHOMPER],[i.pzaPlantEnum.BOOM_NUT,u.BOOM_NUT],[i.pzaPlantEnum.CAIWEN,u.CAIWEN],[i.pzaPlantEnum.LaserBean,u.LASERBEAN],[i.pzaPlantEnum.FireBlover,u.FireBlover],[i.pzaPlantEnum.REPEATER_REVERSE,u.REPEATER_REVERSE],[i.pzaPlantEnum.FIGHTKING,u.FightKing],[i.pzaPlantEnum.GABY,u.Gaby],[i.pzaPlantEnum.Phoenix,u.PHOENIX],[i.pzaPlantEnum.Gene_SnowPea,u.Gene_SnowPea]]),e.zombiePrefabMap=new Map([[r.pzaZombieEnum.ZOMBIE,u.ZOMBIE],[r.pzaZombieEnum.FLAG_ZOMBIE,u.FLAG_ZOMBIE],[r.pzaZombieEnum.CONE_HEAD_ZOMBIE,u.CONE_HEAD_ZOMBIE],[r.pzaZombieEnum.POLEVAULTING_ZOMBIE,u.POLEVAULTING_ZOMBIE],[r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,u.BUCKET_HEAD_ZOMBIE],[r.pzaZombieEnum.NEWSPAPER_ZOMBIE,u.NEWSPAPER_ZOMBIE],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,u.SCREEN_DOOR_ZOMBIE],[r.pzaZombieEnum.FOOTBALL_ZOMBIE,u.FOOTBALL_ZOMBIE],[r.pzaZombieEnum.DANCING_ZOMBIE,u.DANCING_ZOMBIE],[r.pzaZombieEnum.BACKUP_DANCER,u.BACKUP_DANCER],[r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,u.DUCKY_TUBE_ZOMBIE],[r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE,u.DUCKY_TUBE_CONE_ZOMBIE],[r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE,u.DUCKY_TUBE_BUCKET_ZOMBIE],[r.pzaZombieEnum.SNORKEL_ZOMBIE,u.SNORKEL_ZOMBIE],[r.pzaZombieEnum.ZOMBONI,u.ZOMBONI],[r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,u.ZOMBIE_BOBSLED_TEAM],[r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,u.DOLPHIN_RIDER_ZOMBIE],[r.pzaZombieEnum.JACK_ZOMBIE,u.JACK_ZOMBIE],[r.pzaZombieEnum.BALLOON_ZOMBIE,u.BALLOON_ZOMBIE],[r.pzaZombieEnum.DIGGER_ZOMBIE,u.DIGGER_ZOMBIE],[r.pzaZombieEnum.POGO_ZOMBIE,u.POGO_ZOMBIE],[r.pzaZombieEnum.YETI_ZOMBIE,u.YETI_ZOMBIE],[r.pzaZombieEnum.BUNGEE_ZOMBIE,u.BUNGEE_ZOMBIE],[r.pzaZombieEnum.LADDER_ZOMBIE,u.LADDER_ZOMBIE],[r.pzaZombieEnum.CATAPULT_ZOMBIE,u.CATAPULT_ZOMBIE],[r.pzaZombieEnum.GARGANTUAR,u.GARGANTUAR],[r.pzaZombieEnum.RED_GARGANTUAR,u.RED_GARGANTUAR],[r.pzaZombieEnum.IMP,u.IMP],[r.pzaZombieEnum.IMP_MINI,u.IMP],[r.pzaZombieEnum.DR_ZOMBOSS,u.DR_ZOMBOSS],[r.pzaZombieEnum.ZOMBIE_BOBSLED,u.ZOMBIE_BOBSLED],[r.pzaZombieEnum.NormalPeaZombie,u.PeaZombie],[r.pzaZombieEnum.Nut_Zombie,u.Nut_Zombie],[r.pzaZombieEnum.Mac_GARGANTUAR,u.Mac_GARGANTUAR],[r.pzaZombieEnum.SQUASH_ZOMBIE,u.SQUASH_ZOMBIE],[r.pzaZombieEnum.JALAPENO_ZOMBIE,u.JALAPENO_ZOMBIE],[r.pzaZombieEnum.GATLINGSHOOT_ZOMBIE,u.GATLINGSHOOT_ZOMBIE],[r.pzaZombieEnum.TALLNUT_ZOMBIE,u.TALLNUT_ZOMBIE],[r.pzaZombieEnum.Cream_Normal,u.CREAM_NORMAL],[r.pzaZombieEnum.Cream_Pea,u.CREAM_PEA]]),e}();t.pzaPreLoadManager=h,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Common/pzaGameConfig":"pzaGameConfig","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaResMgr":"pzaResMgr","./pzaBundleObjectPool":"pzaBundleObjectPool"}],pzaPreOpenView:[function(e,a,t){"use strict";cc._RF.push(a,"6b42db5VpFESKI76+GXAAZl","pzaPreOpenView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPreOpenView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaStatisticsMgr"),s=e("../utils/pzaChannel"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.confirmTxt=null,a.adIcon=null,a.confirmBtn=null,a.confirmCall=null,a.cutDown=3,a}return n(a,e),a.prototype.show=function(e){this.confirmCall=e,this.cutDown=3,this.confirmBtn.interactable=!1,this.refreshBtnTxt(),s.pzaChannel.instance().closeBanner()},a.prototype.update=function(e){this.cutDown<=0||(this.cutDown-=e,this.refreshBtnTxt())},a.prototype.refreshBtnTxt=function(){if(this.cutDown<=0)return this.confirmBtn.interactable=!0,this.adIcon.active=!0,this.confirmTxt.string="\u63d0\u524d\u4f53\u9a8c",void l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"});this.adIcon.active=!1,this.confirmTxt.string=""+Math.ceil(this.cutDown)},a.prototype.clickConfirm=function(){p.pzaSoundManager.playSFX(),this.close(),this.confirmCall&&this.confirmCall()},a.prototype.clickCancel=function(){s.pzaChannel.instance().showBanner(),p.pzaSoundManager.playSFX(),this.close()},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u786e\u5b9a\u6309\u94ae\u6587\u6848",type:cc.Label})],a.prototype,"confirmTxt",void 0),i([d({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Node})],a.prototype,"adIcon",void 0),i([d({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Button})],a.prototype,"confirmBtn",void 0),i([u],a)}(cc.Component);t.pzaPreOpenView=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel"}],pzaPreviewTip:[function(e,a,t){"use strict";cc._RF.push(a,"f8bc1KUK1dFB62k9KmZdlgF","pzaPreviewTip");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPreviewTip=void 0;var r=e("./pzaGameCommonPool"),p=e("./pzaGameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.word=null,a.flagWord=null,a.chapterPreviewTips=["\u5b88\u62a4\u4f60\u7684\u57ce\u5e02","\u6e05\u626b\u9ed1\u591c\u7981\u533a","\u5b88\u536b\u6d77\u6ee9\u57ce\u9547","\u63a2\u7d22\u8ff7\u96fe\u5c9b\u5c7f","\u7a81\u7834\u51b0\u5c01\u96ea\u5c71","\u5b88\u62a4\u4f60\u7684\u57ce\u5e02","\u6e05\u626b\u9ed1\u591c\u7981\u533a","\u5b88\u536b\u6d77\u6ee9\u57ce\u9547","\u63a2\u7d22\u8ff7\u96fe\u5c9b\u5c7f","\u7a81\u7834\u51b0\u5c01\u96ea\u5c71"],a.survivalPreviewTips=["\u57ce\u5e02\u8857\u9053","\u9ed1\u591c\u7981\u533a","\u6d77\u6ee9\u57ce\u9547","\u8ff7\u96fe\u5c9b\u5c7f","\u51b0\u5c01\u96ea\u5c71","\u57ce\u5e02\u8857\u9053","\u9ed1\u591c\u7981\u533a","\u6d77\u6ee9\u57ce\u9547","\u8ff7\u96fe\u5c9b\u5c7f","\u51b0\u5c01\u96ea\u5c71"],a}return n(a,e),a.prototype.showTip=function(e,a,t,o){var n=this;p.pzaGameManager.getCurrentGame().showPreviewTip(this,e,a),this.word.node.stopAllActions(),this.word.node.opacity=255,null!=o&&this.word.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(o),cc.delayTime(.5),cc.fadeOut(.4),cc.callFunc(function(){n.close()})))},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u6587\u5b57",type:cc.Label})],a.prototype,"word",void 0),i([c({displayName:"\u65d7\u5e1c\u6587\u5b57",type:cc.Label})],a.prototype,"flagWord",void 0),i([s],a)}(cc.Component);t.pzaPreviewTip=u,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameManager":"pzaGameManager"}],pzaPrivacyWin:[function(e,a,t){"use strict";cc._RF.push(a,"a87761x8ORPppXOssBXcfCw","pzaPrivacyWin");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaChannel"),p=e("./pzaKDefine"),l=e("./pzakc"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.txt_main=null,a.bt_agree=null,a.bt_reject=null,a.win2=null,a.txt=null,a.bt_next=null,a.bt_pre=null,a.close=null,a.bt_type1=null,a.bt_type2=null,a.contentTxt=null,a.closeView=!1,a.pType=0,a.closeCallBack=null,a}return n(a,e),a.prototype.onLoad=function(){var e=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){e.closeDetail()}),this.bt_pre.on(cc.Node.EventType.TOUCH_END,function(){e.txt.string=r.pzaChannel.instance().privacyPrePage(e.pType)}),this.bt_next.on(cc.Node.EventType.TOUCH_END,function(){e.txt.string=r.pzaChannel.instance().privacyNextPage(e.pType)}),this.bt_type1.on(cc.Node.EventType.TOUCH_END,function(){e.pType=0,e.txt.string=r.pzaChannel.instance().privacyPage1(e.pType)}),this.bt_type2.on(cc.Node.EventType.TOUCH_END,function(){e.pType=1,e.txt.string=r.pzaChannel.instance().privacyPage1(e.pType)}),this.txt.string=r.pzaChannel.instance().privacyPage1(this.pType),this.bt_agree.on(cc.Node.EventType.TOUCH_END,function(){e.agree()}),this.bt_reject.on(cc.Node.EventType.TOUCH_END,function(){e.node.active=!1,r.pzaChannel.instance().privacyReject(),r.pzaChannel.instance().exit()}),this.txt_main.on(cc.Node.EventType.TOUCH_END,function(){e.showContent(),e.closeView=!1}),this.win2.active=!1;var a=this.contentTxt.string;a=a.replace("\u300a\u300b","\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b"),this.contentTxt.string=a},a.prototype.showContent=function(){this.win2.active=!0,this.closeView=!0,this.txt.string=r.pzaChannel.instance().privacyPrePage(this.pType),"qq"==r.pzaChannel.instance().channel&&(this.bt_type1.active=!0,this.bt_type1.x=-130,this.bt_type2.active=!0,this.bt_type2.x=130)},a.prototype.closeDetail=function(){this.win2.active=!1,this.closeView&&(this.node.active=!1)},a.prototype.agree=function(){r.pzaChannel.instance().privacyAgree(),this.node.active=!1,l.default.sendMsg(p.Msg.closeLoading),this.closeCallBack&&this.closeCallBack()},a.prototype.setCallBack=function(e){this.closeCallBack=e},i([u(cc.Node)],a.prototype,"txt_main",void 0),i([u(cc.Node)],a.prototype,"bt_agree",void 0),i([u(cc.Node)],a.prototype,"bt_reject",void 0),i([u(cc.Node)],a.prototype,"win2",void 0),i([u(cc.RichText)],a.prototype,"txt",void 0),i([u(cc.Node)],a.prototype,"bt_next",void 0),i([u(cc.Node)],a.prototype,"bt_pre",void 0),i([u(cc.Node)],a.prototype,"close",void 0),i([u(cc.Node)],a.prototype,"bt_type1",void 0),i([u(cc.Node)],a.prototype,"bt_type2",void 0),i([u(cc.RichText)],a.prototype,"contentTxt",void 0),i([c],a)}(cc.Component);t.default=d,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaPropNameTip:[function(e,a,t){"use strict";cc._RF.push(a,"4a89dOTPt9BMJaEG+QxivNF","pzaPropNameTip");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPropNameTip=void 0;var r=e("../Common/pzaGamePropConfig"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.node_tip=null,a.lab_prop=null,a.lab_desc=null,a.tipTime=0,a.showTip=!1,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){this.node_tip.active=!1,t.instance=this},a.prototype.update=function(e){this.showTip&&this.tipTime>0&&(this.tipTime-=e,this.tipTime<=0)&&t.hideTip()},a.showTip=function(e,a,o,n,i,p){void 0===n&&(n=1);var l=t.instance,s=r.pzaGamePropConfig.PorpConfigMap.get(a);if(s){var c=l.node_tip.parent.convertToNodeSpaceAR(e);l.node_tip.setPosition(c.add(cc.v2(0,o))),l.node_tip.active=!0,l.lab_prop.string=s.propName,l.lab_desc.string=s.propDesc,i&&(l.lab_desc.string=i),p&&(l.lab_prop.string=p),l.showTip=!0,l.tipTime=3,l.node_tip.scale=n}else l.node.active=!1},a.hideTip=function(){var e=t.instance;e.node_tip.active=!1,e.showTip=!1},a.instance=null,i([s({displayName:"\u63d0\u793a\u80cc\u666f",type:cc.Node})],a.prototype,"node_tip",void 0),i([s({displayName:"\u9053\u5177\u540d",type:cc.Label})],a.prototype,"lab_prop",void 0),i([s({displayName:"\u9053\u5177\u4ecb\u7ecd",type:cc.Label})],a.prototype,"lab_desc",void 0),t=i([l],a)}(cc.Component);t.pzaPropNameTip=c,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaPuffShroomPult:[function(e,a,t){"use strict";cc._RF.push(a,"c59dfBx2jxLaYJ/g2gaDy3Q","pzaPuffShroomPult");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPuffShroomPult=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../../Common/pzaUtil"),c=e("../Bullet/pzaBaseBullet"),u=e("../Bullet/pzaThrowBullet"),d=e("../Data/pzaBuffData"),h=e("../pzaGameState"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.shootNode1=null,a.bulletPrefab=null,a.bulletPrefab1=null,a.blinkTime=3,a.atkTime=0,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.atkTime=0,this.hasAwakePlant(this.baseData.xIndex,this.baseData.yIndex,a),a.plantData.sleeping?this.animation.playAnimation("idle2",!0,null,null,0):(this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),h.pzaGameState.onlyShroomCofee=!1,this.baseData.plantData.canBeShoot=!1},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),this.blinkTime-=a,this.atkTime-=a},a.prototype.playNormalAni=function(){var e=this;if(this.atkTime>0)return this.blinkTime>0?void this.animation.playAnimation("idle1",!1,this.playNormalAni.bind(this)):(this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),void this.animation.playAnimation("idle1_eye",!1,this.playNormalAni.bind(this)));var a=this.findAttackTarget();if(null!=a)return this.atkTime=this.atkInterval,l.pzaSoundManager.playAudio("CabbagePult"),void(-1==a.xIndex||Math.abs(this.baseData.xIndex-a.xIndex)>4?this.animation.playAnimation("attack2",!1,this.playNormalAni.bind(this),function(){e.attack(a)}):this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){e.attack(a),e.shoot()}));this.animation.playAnimation("idle1",!1,this.playNormalAni.bind(this))},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this)))},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<e.baseData.logicPos.x)&&!o.buffData.hasBuff(d.pzaBuffType.FLY)&&!o.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-e.baseData.logicPos.x;(-1==t||n<t)&&(a=o,t=n)}}),null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.attack=function(e){if(null!=e&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=window.pzazombieManager.getZombie(e);if(null!=t){var o=t.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=a.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(a);var s=cc.v2(l.x+this.baseData.logicPos.x+14,l.y+this.baseData.logicPos.y+42);i.setPosition(s);var c=i.getComponent(u.pzaThrowBullet);null!=c&&(c.init(null,!1,this.baseData.yIndex,this.baseData.atk,e,n),c.updateBulletAngel(90))}}}}}},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab1);if(null!=a){a.setParent(e);var t=this.shootNode1.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=h.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*h.pzaGameState.map.getBlockWidth())}}}}},i([y({displayName:"\u6295\u63b7\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([y({displayName:"\u76f4\u7ebf\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode1",void 0),i([y({displayName:"\u6295\u63b7\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([y({displayName:"\u76f4\u7ebf\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab1",void 0),i([z],a)}(m.pzaBasePlant);t.pzaPuffShroomPult=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPuffShroom:[function(e,a,t){"use strict";cc._RF.push(a,"ed4225QSM9JNoAv41wvq5Yv","pzaPuffShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPuffShroom=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNameConf"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../Bullet/pzaBaseBullet"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a.atkAniTime=1.4,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.sleeping?(this.sleep(),this.animation.playAnimation(p.pzaPlantSkName.COMMON.idle,!0,null,null,0)):this.playNormalAni(),u.pzaGameState.useShroom=!0,u.pzaGameState.onlyBoomPlant=!1,a.plantData.canBeShoot=!1},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation(p.pzaPlantSkName.COMMON.idle,!1,this.playNormalAni.bind(this)))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation(p.pzaPlantSkName.COMMON.idle,!0))},a.prototype.playNormalAni=function(){var e=this,a=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData,3))return s.pzaSoundManager.playAudio("PuffShroomAtk"),void e.animation.playAnimation(p.pzaPlantSkName.COMMON.attack,!1,a,function(){e.shoot()});e.animation.playAnimation(p.pzaPlantSkName.COMMON.idle,!1,a)};a()},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=l.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0),this.getBulletAni());var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([m],a)}(d.pzaBasePlant);t.pzaPuffShroom=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkinLightDef:[function(e,a,t){"use strict";cc._RF.push(a,"a600dIXngZEN6KRqY6FmhW1","pzaPumpkinLightDef");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPumpkinLightDef=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a.poolPrefab=null,a}return n(a,e),a.prototype.bindData=function(){var e=this;this.ani.node.active=!0,this.ani.playAnimation("idle",!1,function(){e.ani.playAnimation("idle2",!0,null,function(a,t){t&&"behind"==t.data.name&&(e.node.parent=p.pzaNodeManager.getDownEffectNode()),t&&"front"==t.data.name&&(e.node.parent=p.pzaNodeManager.getUpEffectNode())})})},a.prototype.setSkin=function(e){this.ani&&this.ani.setAnimationSkin(e)},a.prototype.pauseAni=function(){this.ani&&this.ani.pauseAnimation()},a.prototype.resumeAni=function(){this.ani&&this.ani.resumeAnimation()},a.prototype.close=function(){this.node.destroy()},i([u({displayName:"\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"ani",void 0),i([u(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaPumpkinLightDef=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSpineController":"pzaSpineController"}],pzaPumpkinPurple:[function(e,a,t){"use strict";cc._RF.push(a,"a3a14zYFAxPSbxBL0WRwsOU","pzaPumpkinPurple");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPumpkinPurple=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaSpineController"),l=e("../../Common/pzaUtil"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaPlantEnum"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaAttackType"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.backSpine=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.backSpine.node.active=!1},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.backSpine.setAnimationSkin("skin_4"),this.backSpine.node.active=!0},a.prototype.bindData=function(a){if(e.prototype.bindData.call(this,a),a.plantData.cate=c.pzaPlantCate.Nut,null!=a&&null!=a.yIndex){var t=10*-this.baseData.yIndex+1;this.node.zIndex=t,u.pzaEffectManager.createBackPumpkinPurple(a)}this.playNormalAni()},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=!1,o=1.7*d.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(a,n){null==a||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(s.pzaBuffType.DIVE)||n.buffData.hasBuff(s.pzaBuffType.FLY)||n.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(e.baseData.logicPos,n.logicPos)<o&&(t=!0)}),t||e.canJoinDrZomBoss(e.baseData)&&(t=!0),t)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void e.animation.playAnimation("attack",!1,a,function(){if(null!=e.baseData&&!e.baseData.isDead){var a=cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y+47);u.pzaEffectManager.createGloomShroomEffect(e.baseData.yIndex,a,null),e.hurtZombies()}});e.animation.playAnimation("idle",!1,a)};this.animation.playAnimation("idle",!1,a)},a.prototype.canJoinDrZomBoss=function(e){if(e.xIndex<5)return null;var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)?null:a.baseData},a.prototype.hurtZombies=function(){var e=this,a=1.7*d.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,o){null==t||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(s.pzaBuffType.DIVE)||o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(e.baseData.logicPos,o.logicPos)<a&&t&&t.hurt(e.baseData.atk,e.baseData,h.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var t=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(t);o&&o.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.PENETRATE)}},a.prototype.plantDying=function(){e.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},a.prototype.plantHurt=function(){e.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},a.prototype.plantIntact=function(){e.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([y({displayName:"\u80cc\u9762\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"backSpine",void 0),i([z],a)}(m.pzaBasePlant);t.pzaPumpkinPurple=g,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkin:[function(e,a,t){"use strict";cc._RF.push(a,"e8b25lxRy5Gm5x3+k2egv7w","pzaPumpkin");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPumpkin=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Load/pzaPreLoadManager"),l=e("../Data/pzaPlantEnum"),s=e("../pzaEffectManager"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lightDef1=null,a.lightDef2=null,a.lightDef3=null,a.backEffect=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this)},a.prototype.uiShow=function(){e.prototype.uiShow.call(this)},a.prototype.bindData=function(a){var t=this;if(e.prototype.bindData.call(this,a),a.plantData.cate=l.pzaPlantCate.Nut,this.animation.playAnimation(r.pzaPlantSkName.PUMPKIN.idle,!0,function(){t.backEffect&&t.backEffect.animation.playAnimation(r.pzaPlantSkName.PUMPKIN.idle,!0)},function(){t.showLight()}),null!=a&&null!=a.yIndex){var o=10*-this.baseData.yIndex+1;this.node.zIndex=o,this.createBackEff(a)}c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1},a.prototype.onRowChanged=function(a,t,o){e.prototype.onRowChanged.call(this,a,t,o),this.setLightDefPos()},a.prototype.setLightDefPos=function(){this.lightDef1.node.setPosition(this.baseData.logicPos),this.lightDef2.node.setPosition(this.baseData.logicPos),this.lightDef3.node.setPosition(this.baseData.logicPos)},a.prototype.showLight=function(){var e=this;s.pzaEffectManager.createPumpkinLightDef(this.baseData,function(a){e.lightDef1=a,e.lightDef1.node.setPosition(e.baseData.logicPos)})},a.prototype.showLight2=function(){var e=this;s.pzaEffectManager.createPumpkinLightDef(this.baseData,function(a){e.lightDef2=a,e.lightDef2.node.setPosition(e.baseData.logicPos)})},a.prototype.showLight3=function(){var e=this;s.pzaEffectManager.createPumpkinLightDef(this.baseData,function(a){e.lightDef3=a,e.lightDef3.node.setPosition(e.baseData.logicPos)})},a.prototype.createBackEff=function(e){var a=this;s.pzaEffectManager.createBackPumpkin(e,p.pzaResourceUrl.BACK_PUMPKIN,function(e){a.backEffect=e})},a.prototype.plantDying=function(){e.prototype.plantDying.call(this),this.lightDef2&&(this.lightDef2.close(),this.lightDef2=null),this.animation.setAnimationSkin(r.pzaPlantSkName.PUMPKIN.SKIN.dying),this.backEffect&&this.backEffect.animation.setAnimationSkin(r.pzaPlantSkName.PUMPKIN.BACK_SKIN.dying)},a.prototype.plantHurt=function(){e.prototype.plantHurt.call(this),this.lightDef1&&(this.lightDef1.close(),this.lightDef1=null),this.animation.setAnimationSkin(r.pzaPlantSkName.PUMPKIN.SKIN.hurt),this.backEffect&&this.backEffect.animation.setAnimationSkin(r.pzaPlantSkName.PUMPKIN.BACK_SKIN.hurt)},a.prototype.plantIntact=function(){e.prototype.plantIntact.call(this),this.animation.setAnimationSkin(r.pzaPlantSkName.PUMPKIN.SKIN.intact),this.backEffect&&this.backEffect.animation.setAnimationSkin(r.pzaPlantSkName.PUMPKIN.BACK_SKIN.intact)},a.prototype.onFrozen=function(a){e.prototype.onFrozen.call(this,a),this.backEffect&&(this.backEffect.animation.pauseAnimation(),this.backEffect.animation.spineAnimation.node.color=cc.color(55,149,255))},a.prototype.unFrozen=function(){e.prototype.unFrozen.call(this),this.backEffect&&(this.backEffect.animation.resumeAnimation(),this.backEffect.animation.spineAnimation.node.color=cc.color(255,255,255))},a.prototype.death=function(a,t){e.prototype.death.call(this,a,t,!1)},a.prototype.close=function(){e.prototype.close.call(this),this.lightDef1&&(this.lightDef1.close(),this.lightDef1=null),this.lightDef2&&(this.lightDef2.close(),this.lightDef2=null),this.lightDef3&&(this.lightDef3.close(),this.lightDef3=null)},i([h],a)}(u.pzaBasePlant));t.pzaPumpkin=m,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPuzzleItem:[function(e,a,t){"use strict";cc._RF.push(a,"152c6CDYKRKvqa11g13cl9O","pzaPuzzleItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPuzzleItem=void 0;var r=e("../Battle/pzaGameState"),p=e("../Common/pzaGameManager"),l=e("../Common/pzaGameVase"),s=e("../Common/pzaGameVaseEndless"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSoundManager"),d=e("../Common/pzaSpriteFrameManager"),h=e("../Common/pzaTipManager"),m=e("../Common/pzaUIManager"),f=e("../Common/pzaUtil"),z=e("../Common/pzaWorldEventManager"),y=e("../Common/pzaZombieEnermyPartCfg"),g=e("../Load/pzaPreLoadManager"),v=e("../utils/pzaChannel"),b=e("../utils/pzakc"),P=e("./pzaCommonMask"),C=e("./pzaWarningView"),E=cc._decorator,S=E.ccclass,_=E.property,D=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.trophyNode=null,a.lockNode=null,a.bg=null,a.flagNode=null,a.flagCount=null,a.preUnLock=null,a.startGameNode=null,a.costPowerLab=null,a.titleSp=null,a.starBarFrame=null,a.unlockTips=null,a.boardSpf=[],a.gameMode=null,a.curPart=1,a.unlock=!1,a.canPreUnlock=!1,a.startGameCall=null,a.refreshCall=null,a.costPower=c.pzaLocalData.endLessPowerCost,a.gameDelayTime=1.5,a}return n(a,e),a.prototype.onEnable=function(){this.startGameNode.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},a.prototype.onDisable=function(){this.startGameNode.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},a.prototype.bindData=function(e,a,t,o){this.curPart=a,this.startGameCall=t,this.refreshCall=o,this.gameMode=e,this.refreshItem(),c.pzaLocalData.isShowPowerGift||(this.startGameNode.active=!1,this.gameDelayTime=0,this.costPower=0)},a.prototype.refreshItem=function(){if(this.costPowerLab.string="X"+c.pzaLocalData.normalPowerCost,this.gameMode==r.pzaGameMode.ZOMBIE_ENERMY){if(this.canPreUnlock=!1,this.unlock=c.pzaLocalData.data.zombieUnlock>=this.curPart,this.trophyNode.active=1==c.pzaLocalData.data.zombieTrophy[this.curPart-1],null==(t=y.pzaZombieEnermyPartCfg.PartConfigMap.get(this.curPart)))return;var e=this.curPart+"";this.curPart>=10&&(e="endless"),"EnemyIcon/enemy_icon_2"==(a="EnemyIcon/enemy_icon_"+e)&&(a="EnemyIcon/enemy_icon_endless"),d.pzaSpriteFrameManager.loadGuanKaImg(a,this.bg),d.pzaSpriteFrameManager.loadGuanKaImg("EnemyIcon/enemy_title_"+e,this.titleSp),this.unlock||((c.pzaLocalData.data.curChapter>t.unlockChapter||c.pzaLocalData.data.curChapter==t.unlockChapter&&c.pzaLocalData.data.curPart>t.unlockPart)&&(this.unlock=!0,c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock")),this.unlockTips.string="\u901a\u5173"+t.unlockChapter+"-"+t.unlockPart+"\u89e3\u9501"),this.unlock||(this.canPreUnlock=this.curPart==c.pzaLocalData.data.zombieUnlock+1),this.canPreUnlock,this.flagNode.active=!1}else if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS)this.costPowerLab.string="X"+c.pzaLocalData.endLessPowerCost,d.pzaSpriteFrameManager.loadGuanKaImg("EnemyIcon/enemy_icon_endless",this.bg),d.pzaSpriteFrameManager.loadGuanKaImg("EnemyIcon/enemy_title_endless",this.titleSp),this.unlock=c.pzaLocalData.data.zombieUnlock>=this.curPart,this.unlock||((c.pzaLocalData.data.curChapter>5||5==c.pzaLocalData.data.curChapter&&c.pzaLocalData.data.curPart>8)&&(this.unlock=!0,c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock")),this.unlockTips.string="\u901a\u51735-8\u89e3\u9501"),this.unlock?(this.flagNode.active=!0,this.flagCount.string=""+c.pzaLocalData.data.zombieFlagCount):(this.canPreUnlock=this.curPart==c.pzaLocalData.data.zombieUnlock+1,this.flagNode.active=!1),this.canPreUnlock;else if(this.gameMode==r.pzaGameMode.VASE){if(this.canPreUnlock=!1,this.unlock=c.pzaLocalData.data.vasePassChapter+1>=this.curPart,this.trophyNode.active=1==c.pzaLocalData.data.vaseTrophy[this.curPart-1],null==(t=p.pzaGameManager.getGame(r.pzaGameMode.VASE,l.pzaGameVase).getConf(this.curPart)))return;var a="VaseIcon/vase_icon_"+(e=this.curPart+"");d.pzaSpriteFrameManager.loadGuanKaImg(a,this.bg),d.pzaSpriteFrameManager.loadGuanKaImg("VaseIcon/vase_title_"+e,this.titleSp),this.unlock||((c.pzaLocalData.data.curChapter>t.unlockChapter||c.pzaLocalData.data.curChapter==t.unlockChapter&&c.pzaLocalData.data.curPart>t.unlockPart)&&(this.unlock=!0,c.pzaLocalData.data.vasePassChapter++,c.pzaLocalData.addDirty("vasePassChapter")),this.unlockTips.string="\u901a\u5173"+t.unlockChapter+"-"+t.unlockPart+"\u89e3\u9501"),this.unlock||(this.canPreUnlock=this.curPart==c.pzaLocalData.data.vasePassChapter+2),this.canPreUnlock,this.flagNode.active=!1}else if(this.gameMode==r.pzaGameMode.VASE_ENDLESS){var t;if(this.costPowerLab.string="X"+c.pzaLocalData.endLessPowerCost,this.unlock=c.pzaLocalData.data.vasePassChapter+1>=this.curPart,this.flagNode.active=this.unlock,null==(t=p.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,l.pzaGameVase).getConf(this.curPart)))return;d.pzaSpriteFrameManager.loadGuanKaImg("VaseIcon/vase_icon_endless",this.bg),d.pzaSpriteFrameManager.loadGuanKaImg("VaseIcon/vase_title_endless",this.titleSp),this.unlock||((c.pzaLocalData.data.curChapter>t.unlockChapter||c.pzaLocalData.data.curChapter==t.unlockChapter&&c.pzaLocalData.data.curPart>t.unlockPart)&&(this.unlock=!0,c.pzaLocalData.data.vasePassChapter++,c.pzaLocalData.addDirty("vasePassChapter")),this.unlockTips.string="\u901a\u5173"+t.unlockChapter+"-"+t.unlockPart+"\u89e3\u9501"),this.unlock||15!=c.pzaLocalData.data.vasePassChapter||(this.unlock=!0),this.unlock?(this.flagCount.string=""+c.pzaLocalData.data.vaseFlagCount,this.canPreUnlock=!1):this.canPreUnlock=this.curPart==c.pzaLocalData.data.vasePassChapter+2}this.lockNode.active=!this.unlock,this.preUnLock.active=this.canPreUnlock,this.startGameNode.active=this.unlock,this.titleSp.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#333333ff"),this.bg.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#333333ff"),f.pzaUtil.switchGraySprite(this.bg,0==this.unlock),f.pzaUtil.switchGraySprite(this.titleSp,0==this.unlock),this.node.getComponent(cc.Sprite).spriteFrame=this.unlock?this.boardSpf[0]:this.boardSpf[1],c.pzaLocalData.isShowPowerGift||(this.startGameNode.active=!1,this.gameDelayTime=0,this.costPower=0),this.starBarFrame.active=0==this.unlock},a.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},a.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},a.prototype.clickItem=function(){var e=this;if((r.pzaGameState.judgeIsVase(this.gameMode)||r.pzaGameState.judgeIsZombie(this.gameMode))&&(this.costPower=c.pzaLocalData.normalPowerCost),c.pzaLocalData.isShowPowerGift||(this.costPower=0),!this.unlock){this.node.color=cc.Color.fromHEX(cc.color(),"#939393"),u.pzaSoundManager.playAudio("unlockpart");var a;return a=this.gameMode===r.pzaGameMode.VASE||this.gameMode===r.pzaGameMode.VASE_ENDLESS?p.pzaGameManager.getGame(r.pzaGameMode.VASE,l.pzaGameVase).getConf(this.curPart):y.pzaZombieEnermyPartCfg.PartConfigMap.get(this.curPart),void(this.canPreUnlock?m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(t){var o=t&&t.getComponent(C.pzaWarningView);o&&o.show("\u4f60\u5fc5\u987b\u5b8c\u6210\u5192\u9669\u6a21\u5f0f"+a.unlockChapter+"-"+a.unlockPart+"\u6765\u89e3\u9501\u672c\u5173\u5361","\u63d0\u524d\u89e3\u9501","\u8fd4\u56de",function(){v.pzaChannel.instance().showVideo({sucCall:function(){c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock"),e.refreshCall&&e.refreshCall()},failCall:function(){},endCall:function(){},posName:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"})},null,"\u672a\u89e3\u9501\uff01",!0)}):m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(C.pzaWarningView);a&&a.show("\u4f60\u5fc5\u987b\u5b8c\u6210\u5192\u9669\u6a21\u5f0f\uff1f\u6765\u89e3\u9501\u672c\u5173\u5361","\u8fd4\u56de",null,null,null,"\u672a\u89e3\u9501\uff01")}))}if(c.pzaLocalData.isWeekTwo=!1,this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),r.pzaGameState.midOut){if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS&&c.pzaLocalBattleData.data.zombieEndlessData)return p.pzaGameManager.removeBattleUI(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),m.pzaUIManager.removeBoardUI(),this.startGameCall&&this.startGameCall(),void p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart);r.pzaGameState.gameMode==this.gameMode&&r.pzaGameState.curPart==this.curPart?(this.startGameCall&&this.startGameCall(),p.pzaGameManager.getCurrentGame().gameRecover(2,this.curPart,null)):p.pzaGameManager.midOutStart(this.gameMode,r.pzaGameState.curChapter,this.curPart,this.startGameCall.bind(this))}else{if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS){if(c.pzaLocalBattleData.data.zombieEndlessData)return this.startGameCall&&this.startGameCall(),m.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart)}else if(this.gameMode==r.pzaGameMode.VASE_ENDLESS&&c.pzaLocalData.data.vaseEndLessLevelIndex&&c.pzaLocalData.data.vaseEndLessLevelIndex>0)return r.pzaGameState.sunLightCount=c.pzaLocalData.data.vaseEndLessSunCount,p.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,s.pzaGameVaseEndless).endLessRound=c.pzaLocalData.data.vaseEndLessLevelIndex,this.startGameCall&&this.startGameCall(),m.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart);if(c.pzaLocalData.data.power<this.costPower)return h.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void m.pzaUIManager.showPowerView();c.pzaLocalData.setPower(-this.costPower),b.default.sendMsg("powerani"),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),P.pzaCommonMask.showMask(),this.scheduleOnce(function(){P.pzaCommonMask.hideMask(),e.startGameCall&&e.startGameCall(),m.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(e.gameMode,r.pzaGameState.curChapter,e.curPart)},this.gameDelayTime)}},a.prototype.clickPreUnLock=function(){var e=this;v.pzaChannel.instance().showVideo({sucCall:function(){e.gameMode===r.pzaGameMode.VASE||e.gameMode===r.pzaGameMode.VASE_ENDLESS?(c.pzaLocalData.data.vasePassChapter++,c.pzaLocalData.addDirty("vasePassChapter")):(c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock")),e.refreshCall&&e.refreshCall()},failCall:function(){},endCall:function(){},posName:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"})},i([_({displayName:"\u5956\u676f",type:cc.Node})],a.prototype,"trophyNode",void 0),i([_({displayName:"\u9501",type:cc.Node})],a.prototype,"lockNode",void 0),i([_({displayName:"\u573a\u666f",type:cc.Sprite})],a.prototype,"bg",void 0),i([_({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],a.prototype,"flagNode",void 0),i([_({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],a.prototype,"flagCount",void 0),i([_({displayName:"\u63d0\u524d\u89e3\u9501\u6309\u94ae",type:cc.Node})],a.prototype,"preUnLock",void 0),i([_({displayName:"\u5f00\u59cb\u6e38\u620f\u8282\u70b9",type:cc.Node})],a.prototype,"startGameNode",void 0),i([_({displayName:"\u4f53\u529b\u6d88\u8017\u6570\u91cf",type:cc.Label})],a.prototype,"costPowerLab",void 0),i([_({type:cc.Sprite})],a.prototype,"titleSp",void 0),i([_({type:cc.Node})],a.prototype,"starBarFrame",void 0),i([_({type:cc.Label})],a.prototype,"unlockTips",void 0),i([_([cc.SpriteFrame])],a.prototype,"boardSpf",void 0),i([S],a)}(cc.Component);t.pzaPuzzleItem=D,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameVase":"pzaGameVase","../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaPuzzleView:[function(e,a,t){"use strict";cc._RF.push(a,"df561IB41BNuI3UzRT3y9Of","pzaPuzzleView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaPuzzleView=void 0;var r=e("../Battle/pzaGameState"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGameManager"),s=e("../Common/pzaGameMiniGame"),c=e("../Common/pzaGameVase"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaOperationMgr"),h=e("../Common/pzaSoundManager"),m=e("../Common/pzaUIManager"),f=e("../Common/pzaUtil"),z=e("../Common/pzaWorldEventManager"),y=e("../Load/pzaPreLoadManager"),g=e("../utils/pzaChannel"),v=e("../utils/pzaResMgr"),b=e("./pzaCommonMask"),P=e("./pzaMiniGameItem"),C=e("./pzaPowerView"),E=e("./pzaPuzzleItem"),S=e("./pzaRankView"),_=cc._decorator,D=_.ccclass,M=_.property,w=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.trophyCount=null,a.coinCount=null,a.scrollView=null,a.rankWidget=null,a.puzzleItem=null,a.miniItem=null,a.puzzleContent=null,a.miniContent=null,a.checkZombieNode=null,a.uncheckZombieNode=null,a.checkVaseNode=null,a.uncheckVaseNode=null,a.rankBtnNode=null,a.puzzleItems=[],a.miniItems=[],a.curPage=0,a}return n(a,e),a.prototype.jumpView=function(e){"challenge"==e&&this.close()},a.prototype.onEnable=function(){z.pzaWorldEventManager.addListener(z.pzaWorldEventType.JUMP_VIEW,this.jumpView,this);var e=!0;"ks"==g.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1),this.node.x=0,this.coinCount.string=f.pzaUtil.getCurrencyStr(u.pzaLocalData.data.coin),r.pzaGameState.gameMode==r.pzaGameMode.VASE||r.pzaGameState.gameMode==r.pzaGameMode.VASE_ENDLESS?e=!1:r.pzaGameState.gameMode!=r.pzaGameMode.ZOMBIE_ENERMY&&r.pzaGameState.gameMode!=r.pzaGameMode.ZOMBIE_ENDLESS||(e=!1),this.curPage=u.pzaLocalData.challengPage,2==this.curPage?(this.createMiniGameItem(),this.rankBtnNode.active=!1):(this.createPuzzleItem(),this.rankBtnNode.active=!0),this.showPage(this.curPage,!0,e),this.rankWidget.updateAlignment()},a.prototype.onDisable=function(){z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.JUMP_VIEW,this.jumpView,this)},a.prototype.createPuzzleItem=function(){var e=v.pzaResMgr.instance().getConf("a12");if(e&&!(this.puzzleContent.childrenCount>0))for(var a=0;a<e.length;a++){var t=p.pzaGameCommonPool.requestInstant(this.puzzleItem,!1);if(null==t)return;t.setParent(this.puzzleContent),this.puzzleItems.push(t.getComponent(E.pzaPuzzleItem))}},a.prototype.clickZombieBtn=function(){h.pzaSoundManager.playAudio("gravebutton"),this.showPage(0,!1)},a.prototype.clickVaseBtn=function(){h.pzaSoundManager.playAudio("gravebutton"),this.showPage(1,!1)},a.prototype.clickMiniBtn=function(){h.pzaSoundManager.playAudio("gravebutton"),this.showPage(2,!1)},a.prototype.showPage=function(e,a,t){var o=this;if(void 0===t&&(t=!0),a||this.curPage!=e){if(this.curPage=e,t&&(this.scrollView.node.stopAllActions(),this.scrollView.node.y=600,this.scrollView.node.runAction(cc.sequence(cc.delayTime(a?.5:.1),cc.moveTo(.2,cc.v2(0,100)).easing(cc.easeCubicActionOut())))),0==this.curPage){this.trophyCount.string=u.pzaLocalData.getZombieTrophy()+"/9";for(var n=1;n<=9;n++)(i=this.puzzleItems[n-1])&&i.bindData(r.pzaGameMode.ZOMBIE_ENERMY,n,function(){g.pzaChannel.instance().closeBanner(),o.close()},this.refreshItem.bind(this));for((p=this.puzzleItems[9])&&p.bindData(r.pzaGameMode.ZOMBIE_ENDLESS,10,function(){g.pzaChannel.instance().closeBanner(),o.close()},this.refreshItem.bind(this)),n=10;n<this.puzzleItems.length;n++)this.puzzleItems[n].node.active=!1}else if(1==this.curPage){for(this.trophyCount.string=u.pzaLocalData.getVaseTrophy()+"/"+u.pzaLocalData.vaseAllTrophy,n=1;n<l.pzaGameManager.getGame(r.pzaGameMode.VASE,c.pzaGameVase).endLessId;n++){var i;(i=this.puzzleItems[n-1]).node.active=!0,i&&i.bindData(r.pzaGameMode.VASE,n,function(){g.pzaChannel.instance().closeBanner(),o.close()},this.refreshItem.bind(this))}var p,s=l.pzaGameManager.getGame(r.pzaGameMode.VASE,c.pzaGameVase).endLessId;(p=this.puzzleItems[s-1]).node.active=!0,p&&p.bindData(r.pzaGameMode.VASE_ENDLESS,s,function(){o.close(),g.pzaChannel.instance().closeBanner()},this.refreshItem.bind(this))}this.scrollView.content=2==this.curPage?this.miniContent:this.puzzleContent,this.miniContent.active=2==this.curPage,this.puzzleContent.active=2!=this.curPage,this.puzzleContent.getComponent(cc.Layout).updateLayout(),this.scrollView.setContentPosition(cc.v2(this.puzzleContent.width/2,100)),this.checkZombieNode.active=0==e,this.uncheckZombieNode.active=1==e,this.checkVaseNode.active=1==e,this.uncheckVaseNode.active=0==e}},a.prototype.refreshMiniGameItem=function(){for(var e=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,a=0;a<e;a++){var t=this.miniItems[a];t&&t.refreshItem()}},a.prototype.refreshItem=function(){var e=10;1==this.curPage&&(e=v.pzaResMgr.instance().getConf("a12")&&v.pzaResMgr.instance().getConf("a12").length);for(var a=1;a<=e;a++){var t=this.puzzleItems[a-1];t&&t.refreshItem()}},a.prototype.createMiniGameItem=function(){var e=this;this.trophyCount.string=u.pzaLocalData.getMiniGameTrophy()+"/12";for(var a=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,t=0;t<a;t++){var o=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).getConfById(t);if(14!=o.id&&15!=o.id&&16!=o.id&&9!=o.id){var n=p.pzaGameCommonPool.requestInstant(this.miniItem);n.setParent(this.miniContent);var i=n.getComponent(P.pzaMiniGameItem);i&&i.bindData(r.pzaGameMode.MINIGAME,o,function(){e.close()},this.refreshMiniGameItem.bind(this)),this.miniItems.push(i)}}},a.prototype.clickBack=function(){var e=this;h.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,600)).easing(cc.easeCubicActionOut())),m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.CHALLENGE_VIEW,function(){b.pzaCommonMask.showMask(),e.node.parent.stopAllActions(),e.node.parent.x=-1680,e.node.x=1680,e.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){b.pzaCommonMask.hideMask(),e.close()})))})},a.prototype.clickRankBtn=function(){var e=this;h.pzaSoundManager.playSFX(),this.createWxUserInfoButton(!0,function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.RANK_VIEW,function(a){var t=a&&a.getComponent(S.pzaRankView);t&&t.init(e.curPage+1)})})},a.prototype.clickRiderFallBtn=function(){h.pzaSoundManager.playSFX(),d.pzaOperationMgr.showRiderFall()},a.prototype.createWxUserInfoButton=function(e,a){var t=this,o=g.pzaChannel.instance().getChannel();"tt"!=o.channel?"wx"!==o.channel||null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar?a&&a():o.wxCheckPrivacySetting(function(n){var i=function(){var e=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+t.rankWidget.node.x-60)/n.width*e.width,top:(.5*n.height-t.rankWidget.node.y-60)/n.height*e.height,width:120/n.width*e.width,height:120/n.height*e.height};o.getUserInfo(function(){null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),a&&a())},i,!1)};if(n)return e?void o.wxPrivacyAuthorize(i,null):void(a&&a());i()},null):o.getUserInfo(function(){a()})},a.prototype.clickPower=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.POWER_VIEW,function(e){var a=e&&e.getComponent(C.pzaPowerView);a&&a.bindData("\u8865\u5145\u4f53\u529b",function(){var e;e=u.pzaLocalData.data.power+u.pzaLocalData.addPowerValue,u.pzaLocalData.data.power=e,u.pzaLocalData.addDirty("power"),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.UPDATE_POWER,null)},null)})},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var e=g.pzaChannel.instance().getChannel();"wx"==e.channel&&e.destroyAuthorizationButton()},i([M({type:cc.Label})],a.prototype,"trophyCount",void 0),i([M({type:cc.Label})],a.prototype,"coinCount",void 0),i([M({type:cc.ScrollView})],a.prototype,"scrollView",void 0),i([M({type:cc.Widget})],a.prototype,"rankWidget",void 0),i([M({type:cc.Prefab})],a.prototype,"puzzleItem",void 0),i([M({type:cc.Prefab})],a.prototype,"miniItem",void 0),i([M({type:cc.Node})],a.prototype,"puzzleContent",void 0),i([M({type:cc.Node})],a.prototype,"miniContent",void 0),i([M(cc.Node)],a.prototype,"checkZombieNode",void 0),i([M(cc.Node)],a.prototype,"uncheckZombieNode",void 0),i([M(cc.Node)],a.prototype,"checkVaseNode",void 0),i([M(cc.Node)],a.prototype,"uncheckVaseNode",void 0),i([M(cc.Node)],a.prototype,"rankBtnNode",void 0),i([D],a)}(cc.Component);t.pzaPuzzleView=w,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameMiniGame":"pzaGameMiniGame","../Common/pzaGameVase":"pzaGameVase","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","./pzaCommonMask":"pzaCommonMask","./pzaMiniGameItem":"pzaMiniGameItem","./pzaPowerView":"pzaPowerView","./pzaPuzzleItem":"pzaPuzzleItem","./pzaRankView":"pzaRankView"}],pzaRainEffect:[function(e,a,t){"use strict";cc._RF.push(a,"3895fHlA39Djo2nQYtZMqsb","pzaRainEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRainEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../utils/pzaFrameAnim"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.anis=[],a.ani=null,a}return n(a,e),a.prototype.showAnim=function(e){var a=this;this.anis.forEach(function(e){e.node.active=!1}),this.ani=e?Math.random()>.5?this.anis[0]:this.anis[1]:this.anis[2],this.ani.node.active=!0,this.ani.setEndFn(function(){a.close()}),this.ani.reset(),this.ani.play()},a.prototype.logicUpdate=function(e){this.ani.updateFrame(e)},i([c({displayName:"\u96e8\u52a8\u753b",type:[p.default]})],a.prototype,"anis",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaRainEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../utils/pzaFrameAnim":"pzaFrameAnim"}],pzaRainNightEffect:[function(e,a,t){"use strict";cc._RF.push(a,"0789e0Ur+lOyI/rZddhfjTc","pzaRainNightEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRainNightEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaSpineController"),s=e("../../Common/pzaUtil"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.rainAni=null,a.mask=null,a.rainInterval=.5,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.rainAni.playAnimation("rain",!0),this.playBlinkAni(),this.rainInterval=.5},a.prototype.logicUpdate=function(e){this.rainInterval-=e,this.rainInterval>0||this.randomRain()},a.prototype.playBlinkAni=function(){var e=this;this.mask.stopAllActions();var a=s.pzaUtil.getRandomFloatNum(2.5,4);this.mask.runAction(cc.sequence(cc.callFunc(function(){e.mask&&(e.mask.color=cc.Color.fromHEX(cc.color(),"#000000"),e.mask.opacity=255)}),cc.delayTime(a),cc.callFunc(function(){e.mask&&(p.pzaSoundManager.playAudio("thunder"),e.mask.color=cc.Color.fromHEX(cc.color(),"#ffffff"))}),cc.fadeOut(1),cc.callFunc(function(){e.mask&&(e.mask.color=cc.Color.fromHEX(cc.color(),"#000000"),e.mask.opacity=25.5)}),cc.fadeTo(.2,76.5),cc.fadeTo(.2,51),cc.fadeTo(.2,102),cc.fadeTo(.2,51),cc.fadeTo(.2,127.5),cc.fadeTo(.15,51),cc.fadeTo(.15,76.5),cc.fadeTo(.13,51),cc.fadeTo(.13,102),cc.fadeTo(.11,51),cc.fadeTo(.11,127.5),cc.fadeTo(.13,204),cc.fadeTo(.16,127.5),cc.fadeTo(.14,229.5),cc.fadeTo(.17,127.5),cc.fadeTo(.15,229.5),cc.fadeTo(.18,127.5),cc.fadeTo(.2,229.5),cc.fadeTo(.2,127.5),cc.fadeTo(.2,1),cc.callFunc(function(){e.playBlinkAni()})))},a.prototype.pauseSelf=function(){this.rainAni.pauseAnimation(),this.mask.pauseAllActions()},a.prototype.resumeSelf=function(){this.rainAni.resumeAnimation(),this.mask.resumeAllActions()},a.prototype.randomRain=function(){this.rainInterval=.5,s.pzaUtil.getRandomArrayValue([0,1,2,3,4,5],2).forEach(function(e){var a=s.pzaUtil.getRandomArrayValue([0,1,2,3,4,5,6,7,8],3),t=u.pzaGameState.map.getYInterval(e);a.forEach(function(a){var o=u.pzaGameState.map.getXInterval(a),n=u.pzaGameState.map.getBlockLogicPos(a,e,0,0);n.x+=Math.random()*o,n.y+=Math.random()*t,c.pzaEffectManager.createRainEffect(n,2!=e&&3!=e)})})},i([m({displayName:"\u96e8\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"rainAni",void 0),i([m({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([h],a)}(r.pzaBaseComponent);t.pzaRainNightEffect=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaRankItem:[function(e,a,t){"use strict";cc._RF.push(a,"7d3a7Ws9V1NF5AmcmUXp4UN","pzaRankItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRankItem=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaSpriteFrameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.rankTag=null,a.rankTagFrames=[],a.rank=null,a.headIcon=null,a.nick=null,a.flagCount=null,a.curAvatarUrl=null,a}return n(a,e),a.prototype.bindData=function(e,a){var t=this;null!=e&&(a>3?(this.rankTag.node.active=!1,this.rank.node.active=!0,this.rank.string=""+a):(this.rankTag.node.active=!0,this.rank.node.active=!0,this.rank.string=a+"",this.rankTag.spriteFrame=this.rankTagFrames[a-1]),null==e.nickName||"\u672a\u77e5"==e.nickName?this.nick.string="\u73a9\u5bb6"+a:this.nick.string=e.nickName,this.headIcon.spriteFrame=null,this.curAvatarUrl=e.avatar,null==this.curAvatarUrl||""==this.curAvatarUrl?p.pzaSpriteFrameManager.showDefaultHead(this.headIcon):p.pzaSpriteFrameManager.showPlayerHeadImage(this.curAvatarUrl,function(e,a){t.curAvatarUrl==e&&(t.headIcon.spriteFrame=a)}),this.flagCount.string=""+e.score)},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u6392\u540d\u6807\u8bb0",type:cc.Sprite})],a.prototype,"rankTag",void 0),i([c({displayName:"\u6392\u540d\u6807\u8bb0\u56fe",type:[cc.SpriteFrame]})],a.prototype,"rankTagFrames",void 0),i([c({displayName:"\u6392\u540d",type:cc.Label})],a.prototype,"rank",void 0),i([c({displayName:"\u5934\u50cf",type:cc.Sprite})],a.prototype,"headIcon",void 0),i([c({displayName:"\u6635\u79f0",type:cc.Label})],a.prototype,"nick",void 0),i([c({displayName:"\u65d7\u5e1c\u6570",type:cc.Label})],a.prototype,"flagCount",void 0),i([s],a)}(cc.Component);t.pzaRankItem=u,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaRankMgr:[function(e,a,t){"use strict";cc._RF.push(a,"1fe3801F8RMkqdH3qC9KQ0T","pzaRankMgr"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRankMgr=void 0;var o=e("../utils/pzaChannel"),n=e("./pzaLocalData"),i=function(){function e(){}return Object.defineProperty(e,"Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"wx"!=a?a+e._Rank_Key:e._Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Zombie_Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"qq"==a?o.pzaChannel.instance().getChannel().channel+e._Zombie_Rank_Key:"wx"!=a?a+e._Zombie_Rank_Key:e._Zombie_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Vase_Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"qq"==a?o.pzaChannel.instance().getChannel().channel+e._Zombie_Rank_Key:"wx"!=a?a+e._Vase_Rank_Key:e._Vase_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(e,"zj_Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"qq"==a?o.pzaChannel.instance().getChannel().channel+e._Zombie_Rank_Key:"wx"!=a?a+e._zj_Rank_Key:e._zj_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(e,"treasure_Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"qq"==a?o.pzaChannel.instance().getChannel().channel+e._Zombie_Rank_Key:"wx"!=a?a+e._treasure_Rank_Key:e._treasure_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(e,"zfRandomBox_Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"qq"==a?o.pzaChannel.instance().getChannel().channel+e._Zombie_Rank_Key:"wx"!=a?a+e._zfRandomBox_Rank_Key:e._zfRandomBox_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(e,"luckWindmill_Rank_Key",{get:function(){var a=o.pzaChannel.instance().channel;return"qq"==a?o.pzaChannel.instance().getChannel().channel+e._Zombie_Rank_Key:"wx"!=a?a+e._luckWindmill_Rank_Key:e._luckWindmill_Rank_Key},enumerable:!1,configurable:!0}),e.syncOldRankData=function(){var e=o.pzaChannel.instance().getChannel().channelUserId;if(null!=e)for(var a=0;a<5;a++){var t=n.pzaLocalData.data.survivalFlagCount[a];if(!(null==t||t<=0)){var i=this.Rank_Key+(a+1);o.pzaChannel.leaderBoradUpdate(i,e,t,function(){})}}},e.queryMyRank=function(e,a){var t=this,i=this.Rank_Key+e,r=o.pzaChannel.instance().getChannel().channelUserId;o.pzaChannel.isConfRemote&&(r=n.pzaLocalData.getPlayerTestId()),null!=r?o.pzaChannel.leaderBoradRank(i,r,function(o){-1!=o?(o+=1,t.endlessRank[e-1]=o,a&&a()):a&&a()}):a&&a()},e.uploadEndlssScore=function(e,a,t){var i=n.pzaLocalData.data.survivalFlagCount[e-1],r="\u7b2c"+a+"\u5173\u5b8c\u6210";if(null!=i&&i>=a)return null!=i&&i>a&&(r+="\uff0c\u8ddd\u79bb\u5386\u53f2\u6700\u9ad8\u5173\u5361\u8fd8\u5dee"+(i-a)),void(t&&t(r));var p=this.Rank_Key+e,l=o.pzaChannel.instance().getChannel().channelUserId;o.pzaChannel.isConfRemote&&(l=n.pzaLocalData.getPlayerTestId()),null!=l?o.pzaChannel.leaderBoradUpdate(p,l,a,function(e){if(null!=e&&-1!=e.newRank){var a=-1==e.oldRank?e.newRank:Math.max(0,e.oldRank-e.newRank);e.newRank=e.newRank+1,e.newRank>9999?r+="\uff0c\u5168\u670d\u6392\u540d\u63d0\u5347 "+a+"\uff0c\u5f53\u524d 9999+ \u540d":r+="\uff0c\u5168\u670d\u6392\u540d\u63d0\u5347 "+a+"\uff0c\u5f53\u524d "+e.newRank+" \u540d",t&&t(r)}else t&&t(r)}):t&&t(r)},e.queryLeaderBoardRank=function(e,a){var t=o.pzaChannel.instance().getChannel().channel+"_"+e,i=o.pzaChannel.instance().getChannel().channelUserId;o.pzaChannel.isConfRemote&&(i=n.pzaLocalData.getPlayerTestId()),null!=i?o.pzaChannel.leaderBoradRank(t,i,function(e){-1!=e?a&&a(e+1):a&&a(null)}):a&&a(null)},e.uploadLeaderboardScore=function(e,a,t,i){var r="\u7b2c"+t+"\u5173\u5b8c\u6210";if(null!=a&&a>=t){var p=null;return null!=a&&a>t&&(p="\u8ddd\u79bb\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\u8fd8\u5dee"+(a-t)),void(i&&i(p))}var l=e,s=o.pzaChannel.instance().getChannel().channelUserId;o.pzaChannel.isConfRemote&&(s=n.pzaLocalData.getPlayerTestId()),null!=s?o.pzaChannel.leaderBoradUpdate(l,s,t,function(e){if(null!=e&&-1!=e.newRank){var a=-1==e.oldRank?e.newRank:Math.max(0,e.oldRank-e.newRank);e.newRank=e.newRank+1;var t="";e.newRank>9999?t+="\u5168\u670d\u6392\u540d\u63d0\u5347 "+a+"\uff0c\u5f53\u524d 9999+ \u540d":t+="\u5168\u670d\u6392\u540d\u63d0\u5347 "+a+"\uff0c\u5f53\u524d "+e.newRank+" \u540d",i&&i(t)}else i&&i(null)}):i&&i(r)},e.endlessRank=[],e._Rank_Key="mr_endless_rank_",e._Zombie_Rank_Key="mr_zombie_endless_rank",e._Vase_Rank_Key="mr_vase_endless_rank",e._zj_Rank_Key="mr_zj_endless_rank",e._treasure_Rank_Key="mr_treasure_endless_rank",e._zfRandomBox_Rank_Key="mr_zfRandomBox_Rank_Key",e._luckWindmill_Rank_Key="mr_luckWindmill_Rank_Key",e}();t.pzaRankMgr=i,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaRankView:[function(e,a,t){"use strict";cc._RF.push(a,"79949TBDxRMSY7yeG415W7n","pzaRankView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRankView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaOperationMgr"),l=e("../Common/pzaRankMgr"),s=e("../utils/pzaChannel"),c=e("./pzaCommonMask"),u=e("./pzaRankItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.itemPrefab=null,a.content=null,a.rankBtns=[],a.curSelectRank=null,a.curRankLabel=null,a.shareBtn=null,a.rankTips=null,a.rewardBubble=null,a.items=null,a.curRankId=null,a.rankType=0,a}return n(a,e),a.prototype.onEnable=function(){s.pzaChannel.instance().showBanner()},a.prototype.onDisable=function(){s.pzaChannel.instance().closeBanner()},a.prototype.init=function(e){var a=this,t=function(t){console.log("rankCB: ",t),t?(a.rankType=e,c.pzaCommonMask.showMask(),a.showRank(1),p.pzaOperationMgr.showShareBubble(a.shareBtn,function(e){a.rewardBubble=e})):a.clickClose()};"my"==s.pzaChannel.instance().channel||"my1"==s.pzaChannel.instance().channel?s.pzaChannel.instance().getChannel().sendUserInfoToWeb(t):t(!0)},a.prototype.showRank=function(e){var a=this;c.pzaCommonMask.showMask();var t=l.pzaRankMgr.Rank_Key+e;1==this.rankType?t=l.pzaRankMgr.Zombie_Rank_Key:2==this.rankType?t=l.pzaRankMgr.Vase_Rank_Key:3==this.rankType&&(t=l.pzaRankMgr.zj_Rank_Key,2==e?t=l.pzaRankMgr.treasure_Rank_Key:3==e?t=l.pzaRankMgr.zfRandomBox_Rank_Key:4==e&&(t=l.pzaRankMgr.luckWindmill_Rank_Key)),s.pzaChannel.getLeaderBorad(t,function(t){if(c.pzaCommonMask.hideMask(),null!=t){a.curRankId=e,a.clearItem(),a.items=[],a.rankTips.active=t.length<=0;for(var o=0;o<t.length;o++){var n=t[o],i=r.pzaGameCommonPool.requestInstant(a.itemPrefab);i.setParent(a.content);var p=i.getComponent(u.pzaRankItem);p&&p.bindData(n,o+1),a.items.push(p)}a.refreshRankBtn()}else a.rankTips.active=!0})},a.prototype.clearItem=function(){null!=this.items&&(this.items.forEach(function(e){e&&e.close()}),this.items=null)},a.prototype.refreshRankBtn=function(){if(1!=this.rankType)if(2!=this.rankType){if(3==this.rankType){for(a=4;a<5;a++)this.rankBtns[a].active=!1;return 1==this.curRankId?(this.curSelectRank.y=this.rankBtns[0].y,this.curRankLabel.string="\u62bd\u5956\u793c\u76d2"):2==this.curRankId?(this.curSelectRank.y=this.rankBtns[1].y,this.curRankLabel.string="\u65e0\u5c3d\u7684\u5b9d\u85cf"):3==this.curRankId?(this.curSelectRank.y=this.rankBtns[2].y,this.curRankLabel.string="\u81ea\u8d39\u793c\u76d2"):4==this.curRankId&&(this.curSelectRank.y=this.rankBtns[3].y,this.curRankLabel.string="\u65e0\u5c3d\u7684\u5e78\u8fd0"),this.rankBtns[0].getChildByName("txt").getComponent(cc.Label).string="\u62bd\u5956\u793c\u76d2",this.rankBtns[1].getChildByName("txt").getComponent(cc.Label).string="\u65e0\u5c3d\u7684\u5b9d\u85cf",this.rankBtns[2].getChildByName("txt").getComponent(cc.Label).string="\u81ea\u8d39\u793c\u76d2",void(this.rankBtns[3].getChildByName("txt").getComponent(cc.Label).string="\u65e0\u5c3d\u7684\u5e78\u8fd0")}for(a=0;a<5;a++){var e=a+1==this.curRankId;e&&(this.curSelectRank.y=this.rankBtns[a].y),this.rankBtns[a].active=!e}this.curRankLabel.string=["\u57ce\u5e02\u8857\u9053","\u9ed1\u591c\u7981\u533a","\u6d77\u6ee9\u57ce\u9547","\u8ff7\u96fe\u5c9b\u5c7f","\u51b0\u5c01\u96ea\u5c71"][this.curRankId-1]}else{for(var a=0;a<5;a++)this.rankBtns[a].active=!1;this.curRankLabel.string="\u661f\u8fb0\u8bd5\u70bc"}else{for(a=0;a<5;a++)this.rankBtns[a].active=!1;this.curRankLabel.string="\u5165\u4fb5\u6a21\u5f0f"}},a.prototype.clickRank1=function(){this.showRank(1)},a.prototype.clickRank2=function(){this.showRank(2)},a.prototype.clickRank3=function(){this.showRank(3)},a.prototype.clickRank4=function(){this.showRank(4)},a.prototype.clickRank5=function(){this.showRank(5)},a.prototype.clickShare=function(){var e=this,a=s.pzaChannel.instance().getChannel();"wx"==a.channel?a.shareByScreenShot("[\u6709\u4eba@\u4f60]\u5feb\u6765\u548c\u6211\u4e00\u8d77\u4f53\u9a8c\u5427",function(){e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null}):s.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"100"},function(){e.rewardBubble&&e.rewardBubble.getReward(),e.rewardBubble=null})},a.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"item\u9884\u8bbe",type:cc.Prefab})],a.prototype,"itemPrefab",void 0),i([m({displayName:"item\u5bb9\u5668",type:cc.Node})],a.prototype,"content",void 0),i([m({displayName:"\u6392\u884c\u699c\u6309\u94ae",type:[cc.Node]})],a.prototype,"rankBtns",void 0),i([m({displayName:"\u5f53\u524d\u9009\u4e2d\u6392\u884c\u699c\u663e\u793a",type:cc.Node})],a.prototype,"curSelectRank",void 0),i([m({displayName:"\u5f53\u524d\u9009\u4e2d\u6392\u884c\u699c\u540d\u79f0",type:cc.Label})],a.prototype,"curRankLabel",void 0),i([m({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],a.prototype,"shareBtn",void 0),i([m({type:cc.Node})],a.prototype,"rankTips",void 0),i([h],a)}(cc.Component);t.pzaRankView=f,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRankMgr":"pzaRankMgr","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaRankItem":"pzaRankItem"}],pzaRecordBtn:[function(e,a,t){"use strict";cc._RF.push(a,"4c598GgxydIZ4J/snCF5xab","pzaRecordBtn");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r,p=e("../Common/pzaUIManager"),l=e("../Common/pzaWorldEventManager"),s=e("../Load/pzaPreLoadManager"),c=e("../utils/pzaChannel"),u=e("../utils/pzaChannelTT"),d=e("../utils/pzaKDefine"),h=e("../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=m.property;(function(e){e[e.null=0]="null",e[e.lobby=1]="lobby",e[e.game=2]="game"})(r||(r={}));var y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bt_label=null,a.shareRewardNode=null,a.btnPos=r.null,a}return n(a,e),a.prototype.start=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_RECORD_STATE,this.onEnable,this)},a.prototype.onEnable=function(){var e=this;if(h.default.getData("shareData",{today:"",shareCount:"0"}).shareCount>=u.pzaChannelTT.shareMaxTimes)return console.log("\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"),void(this.node.active=!1);this.node.active=!0,"tt"==c.pzaChannel.instance().channel?(this.shareRewardNode.active=!1,this.updateUI(),h.default.regMsgReciever(d.Msg.recorderStart,function(){return e.updateUI(),!0}),h.default.regMsgReciever(d.Msg.recorderStop,function(){return e.updateUI(),!0}),h.default.regMsgReciever(d.Msg.recorderFail,function(){return e.updateUI(),!0}),h.default.regMsgReciever(d.Msg.recorderDone,function(){return e.updateUI(),!0}),h.default.regMsgReciever(d.Msg.shareMaxTimes,function(){return e.node.active=!1,!0})):this.node.active=!1},a.prototype.updateUI=function(){"idle"==u.pzaChannelTT.rState?(this.bt_label.string="\u5f55\u5236",this.shareRewardNode.active=!1):"recording"==u.pzaChannelTT.rState?(this.bt_label.string="\u5f55\u5236\u4e2d",this.shareRewardNode.active=!1):"recordEnd"==u.pzaChannelTT.rState&&(this.bt_label.string="\u5f55\u5236\u5b8c\u6bd5",this.btnPos==r.lobby&&(this.shareRewardNode.active=!0))},a.prototype.onClick=function(){"idle"==u.pzaChannelTT.rState?c.pzaChannel.instance().recorderStart():"recording"==u.pzaChannelTT.rState?c.pzaChannel.instance().recorderStop():"recordEnd"==u.pzaChannelTT.rState&&p.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.BYTE_RECORD_VIEW,function(){}),this.updateUI()},a.prototype.onDestroy=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_RECORD_STATE,this.onEnable,this),h.default.delMsgReciever(d.Msg.recorderStart),h.default.delMsgReciever(d.Msg.recorderStop),h.default.delMsgReciever(d.Msg.recorderFail),h.default.delMsgReciever(d.Msg.recorderDone),h.default.delMsgReciever(d.Msg.shareMaxTimes)},i([z({displayName:"\u6309\u94ae\u4e0a\u6587\u5b57",type:cc.Label})],a.prototype,"bt_label",void 0),i([z({displayName:"\u5206\u4eab\u5956\u52b1",type:cc.Node})],a.prototype,"shareRewardNode",void 0),i([z({type:cc.Enum(r),tooltip:"\u6309\u94ae\u6240\u5904\u4f4d\u7f6e"})],a.prototype,"btnPos",void 0),i([f],a)}(cc.Component);t.default=y,cc._RF.pop()},{"../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelTT":"pzaChannelTT","../utils/pzaKDefine":"pzaKDefine","../utils/pzakc":"pzakc"}],pzaRecordView:[function(e,a,t){"use strict";cc._RF.push(a,"501c98UqDNCh4VWbhSYgRLO","pzaRecordView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRecordView=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaGamePropConfig"),l=e("../../Common/pzaLocalData"),s=e("../../Common/pzaRewardManager"),c=e("../../utils/pzaChannel"),u=e("../../utils/pzaChannelTT"),d=e("../../utils/pzaKDefine"),h=e("../../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){"tt"==c.pzaChannel.instance().channel&&(this.node.getChildByName("board").getChildByName("desc").getComponent(cc.Label).string="\u8bb0\u5f55\u4e86\u4f60\u5728\u690d\u7269\u6d88\u9664\u50f5\u5c38\u4e2d\u5206\u7ad9\u7684\u7cbe\u5f69\u955c\u5934,\u5feb\u5206\u4eab\u7ed9\u597d\u53cb\u5427!")},a.prototype.clickShare=function(){var e=this,a=h.default.getData("shareData",{today:"",shareCount:"0"}),t=a.shareCount;t>=u.pzaChannelTT.shareMaxTimes?console.log("\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"):c.pzaChannel.instance().shareVideo(function(){t++,a.shareCount=t,h.default.saveData("shareData",a),l.pzaLocalData.data.coin+=200,l.pzaLocalData.addDirty("coin"),e.close(),t>=u.pzaChannelTT.shareMaxTimes&&h.default.sendMsg(d.Msg.shareMaxTimes);var o=[new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200)];s.pzaRewardManager.recieveRewards(o,function(){})})},a.prototype.clickAbandon=function(){this.close()},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f],a)}(cc.Component));t.pzaRecordView=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaRewardManager":"pzaRewardManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaChannelTT":"pzaChannelTT","../../utils/pzaKDefine":"pzaKDefine","../../utils/pzakc":"pzakc"}],pzaRecruitDrawConf:[function(e,a,t){"use strict";cc._RF.push(a,"50f0akPXLlEKZZoJv8QU6ct","pzaRecruitDrawConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRecruitDrawConf=void 0;var o=e("../utils/pzakc");t.pzaRecruitDrawConf=function(e){this.id=0,this.reward=[],this.probability=0,this.nb=0,this.id=e.id,this.probability=e.probability||0,this.reward=o.default.strArr(e.reward),this.nb=e.nb||0},cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaRecruitDrawItem:[function(e,a,t){"use strict";cc._RF.push(a,"14902jY3+ZG3pT7ZVTRpcGw","pzaRecruitDrawItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRecruitDrawItem=void 0;var r=e("../Common/pzaBeltEquipConfig"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGamePropConfig"),s=e("../Common/pzaItemTips"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSpriteFrameManager"),d=e("../Shop/pzaShopConfig"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.proIcon=null,a.propAmountLab=null,a.hasGet1=null,a.hasGet2=null,a.propSpr=null,a.spriArr=[],a.itemIdx=0,a.drawConf=null,a.propType=0,a.propAmount=0,a}return n(a,e),a.prototype.bindData=function(e,a,t,o){if(this.node.setPosition(e,a),this.itemIdx=t,this.drawConf=o,this.hasGet1.active=!1,this.hasGet2.active=!1,this.propSpr.spriteFrame=this.spriArr[o.nb],1==o.reward.length){var n=o.reward[0].split("-");this.propType=parseInt(n[0]),this.propAmount=parseInt(n[1])}else for(var i=0;i<o.reward.length&&(n=o.reward[i].split("-"),this.propType=parseInt(n[0]),this.propAmount=parseInt(n[1]),this.propType==l.pzaGamePropEnum.PROP_PLANTE&&c.pzaLocalData.data.ownPlants.includes(this.propAmount));i++);switch(this.proIcon.node.active=!0,this.propAmountLab.node.active=!0,this.node.addComponent(s.default).bindData(this.propType,this.propAmount),this.propType){case l.pzaGamePropEnum.PROP_PLANTE:this.propAmountLab.string="X1",u.pzaSpriteFrameManager.loadPlantCard(this.propAmount,this.proIcon);break;case l.pzaGamePropEnum.PROP_CHERRY_BOMB:case l.pzaGamePropEnum.PROP_AUTO_PICK:case l.pzaGamePropEnum.PROP_FREE_SUN:case l.pzaGamePropEnum.PROP_COIN:case l.pzaGamePropEnum.RANDOM_GIFT:case l.pzaGamePropEnum.PROP_POWER:var p=this.propType+"";this.propType==l.pzaGamePropEnum.PROP_COIN&&this.propAmount>=1e4&&(p="4_3"),u.pzaSpriteFrameManager.loadCommonImg(p,this.proIcon),this.propAmountLab.string="X"+this.propAmount;break;case l.pzaGamePropEnum.PROP_GOLD_FLOWER:u.pzaSpriteFrameManager.loadShopItemIcon(d.pzaShopItemType.GOLD_FLOWER_SEED,this.proIcon),this.propAmountLab.string="X"+this.propAmount;break;case l.pzaGamePropEnum.EQUIP_BELT:this.proIcon.node.scale=.8,u.pzaSpriteFrameManager.loadBeltCard("belt_"+this.propAmount,this.proIcon),this.propAmountLab.string=r.pzaBeltEquipConfig.getConfig().get(this.propAmount).name}c.pzaLocalData.data.recruitDrawArr[t-1]>=1&&(this.hasGet1.active=!0,this.hasGet2.active=!0)},a.prototype.refreshGet=function(){this.hasGet1.active=!0,this.hasGet2.active=!0},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],a.prototype,"proIcon",void 0),i([f({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"propAmountLab",void 0),i([f({displayName:"\u5df2\u7ecf\u9886\u53d6\u8282\u70b91",type:cc.Node})],a.prototype,"hasGet1",void 0),i([f({displayName:"\u5df2\u7ecf\u9886\u53d6\u8282\u70b92",type:cc.Node})],a.prototype,"hasGet2",void 0),i([f({displayName:"\u9053\u5177\u6846",type:cc.Sprite})],a.prototype,"propSpr",void 0),i([f({displayName:"\u9053\u5177\u6846\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"spriArr",void 0),i([m],a)}(cc.Component);t.pzaRecruitDrawItem=z,cc._RF.pop()},{"../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Shop/pzaShopConfig":"pzaShopConfig"}],pzaRecruitView:[function(e,a,t){"use strict";cc._RF.push(a,"38981VkotNFBqdZhUHYy+7B","pzaRecruitView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRecruitView=void 0;var r=e("../Battle/Data/pzaPlantEnum"),p=e("../Common/pzaBeltEquipConfig"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGamePropConfig"),c=e("../Common/pzaGameRecruitMgr"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaRewardManager"),h=e("../Common/pzaSoundManager"),m=e("../Common/pzaTipManager"),f=e("../Common/pzaUtil"),z=e("../Garden/pzaGardenMgr"),y=e("./pzaRecruitDrawItem"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.drawSelectNode=null,a.drawBtn=null,a.drawGridNode=null,a.drawItemPre=null,a.tokenCoinLabel=null,a.notClick=null,a.hasCoin=null,a.drawCost=10,a.gridNodes=[],a.drawSelectIdx=0,a.isDrawing=!1,a.drawTargetIdx=0,a.drawCnt=1,a.blinkTween=null,a.step=0,a}return n(a,e),a.prototype.onEnable=function(){this.drawBtn.on(cc.Node.EventType.TOUCH_END,this.clickDraw,this),this.showRecruitDrawView()},a.prototype.onDisable=function(){this.drawBtn.off(cc.Node.EventType.TOUCH_END,this.clickDraw,this)},a.prototype.setTokenCoin=function(e){var a=u.pzaLocalData.getPlantIdByActivityRewardId(s.pzaGamePropEnum.BELT_ACTIVITY_COIN);return null==u.pzaLocalData.data.beltsCoin[""+a]&&(u.pzaLocalData.data.beltsCoin[""+a]=0),!(e>u.pzaLocalData.data.beltsCoin[""+a])&&(u.pzaLocalData.data.beltsCoin[""+a]-=e,u.pzaLocalData.data.beltsCoin[""+a])},a.prototype.getTokenCoin=function(){var e=u.pzaLocalData.getPlantIdByActivityRewardId(s.pzaGamePropEnum.BELT_ACTIVITY_COIN),a=0;return e>0&&(a=u.pzaLocalData.data.beltsCoin[""+e]||0),a},a.prototype.refreshView=function(){this.tokenCoinLabel.string="x"+this.drawCost,this.hasCoin.string="x"+this.getTokenCoin()},a.prototype.showRecruitDrawView=function(){this.refreshView();for(var e=[],a=0;a<u.pzaLocalData.data.recruitDrawArr.length;a++)u.pzaLocalData.data.recruitDrawArr[a]>=1&&e.push(a);if(this.drawGridNode.childrenCount<=0)for(this.gridNodes=[],a=0;a<c.pzaGameRecruitMgr.instance().recruitDrawMap.size;a++){var t=l.pzaGameCommonPool.requestInstant(this.drawItemPre);t.setParent(this.drawGridNode);var o=t.getComponent(y.pzaRecruitDrawItem),n=this.calculateItemPosition(a),i=c.pzaGameRecruitMgr.instance().recruitDrawMap.get(a+1);o&&o.bindData(n.x,n.y,a+1,i),this.gridNodes.push(t)}this.updateDrawSelectBox()},a.prototype.calculateItemPosition=function(e){var a=[{row:0,col:0},{row:0,col:1},{row:0,col:2},{row:0,col:3},{row:0,col:4},{row:1,col:4},{row:2,col:4},{row:3,col:4},{row:3,col:3},{row:3,col:2},{row:3,col:1},{row:3,col:0},{row:2,col:0},{row:1,col:0}];if(a[e]){var t=a[e],o=t.row;return{x:170*t.col-400,y:100-110*o}}return{x:-400,y:100}},a.prototype.clickDraw=function(){if(!this.isDrawing){if(!1===this.setTokenCoin(this.drawCost))return m.pzaTipManager.showHomeTip("\u53cc\u9a91\u62bd\u5956\u5e01\u4e0d\u8db3",null,2);u.pzaLocalData.addDirty("tokenCoin"),this.drawSelectNode.active=!0,this.drawSelectNode.color=new cc.Color(255,255,255),this.blinkTween&&this.blinkTween.stop(),this.drawSelectIdx=0,this.isDrawing=!0,this.notClick.active=this.isDrawing;for(var e=[],a=0;a<c.pzaGameRecruitMgr.instance().recruitDrawMap.size;a++){var t=c.pzaGameRecruitMgr.instance().recruitDrawMap.get(a+1).probability;e.push(t),u.pzaLocalData.data.recruitDrawArr[a]||(u.pzaLocalData.data.recruitDrawArr[a]=0)}var o=[];for(a=0;a<u.pzaLocalData.data.recruitDrawArr.length;a++)1==u.pzaLocalData.data.recruitDrawArr[a]&&o.push(a);for(a=0;a<o.length;a++)e[o[a]]=0;u.pzaLocalData.addDirty("recruitDrawArr"),this.drawTargetIdx=f.pzaUtil.getRandomIndexByWeight(e),this.drawCnt=1,19==o.length&&(this.drawCnt=2),this.step=0,this.schedule(this.updateLottery,.1),this.updateDrawSelectBox()}},a.prototype.updateLottery=function(){this.drawSelectIdx=(this.drawSelectIdx+1)%this.gridNodes.length,this.updateDrawSelectBox(),this.step++,this.step>=20&&(this.drawCnt=2),this.drawSelectIdx===this.drawTargetIdx&&2==this.drawCnt&&(this.unschedule(this.updateLottery),this.isDrawing=!1,this.notClick.active=this.isDrawing,this.showResult())},a.prototype.updateDrawSelectBox=function(){var e=this.gridNodes[this.drawSelectIdx];this.drawSelectNode.setPosition(e.position)},a.prototype.showResult=function(){var e=this,a=function(a,t,o,n){var i=a+(t-a)*n,r=new cc.Color(i,i,i);return e.drawSelectNode.color=r,i};this.blinkTween=cc.tween({c:255}).repeat(3,cc.tween().to(.5,{c:40},{progress:a}).to(.5,{c:255},{progress:a})).call(function(){e.drawSelectNode.active=!1,e.blinkTween.stop()}),this.blinkTween.start();var t=c.pzaGameRecruitMgr.instance().recruitDrawMap.get(this.drawTargetIdx+1);if(t){var o=0,n=0,i=null;if(1==t.reward.length){var l=t.reward[0].split("-");o=parseInt(l[0]),n=parseInt(l[1])}else for(var h=0;h<t.reward.length&&(l=t.reward[h].split("-"),o=parseInt(l[0]),n=parseInt(l[1]),o==s.pzaGamePropEnum.PROP_PLANTE&&u.pzaLocalData.data.ownPlants.includes(n));h++);var m=new s.pzaRewardPropData(o,n);if(o==s.pzaGamePropEnum.PROP_GOLD_FLOWER){if(!u.pzaLocalData.data.unlockGarden||u.pzaLocalData.data.unlockGarden&&z.default.instance().getEmptyPos(z.pzaGardenEnv.normal)<0)m.propType=s.pzaGamePropEnum.PROP_COIN,m.propCount=5e4,m.trunToCoin=1,i=u.pzaLocalData.data.unlockGarden?"\u5f53\u524d\u82b1\u56ed\u5df2\u6ee1\uff0c\u5956\u52b1\u81ea\u52a8\u5151\u6362\u4e3a\u91d1\u5e01\u3002":"\u5f53\u524d\u672a\u89e3\u9501\u82b1\u56ed\uff0c\u5956\u52b1\u81ea\u52a8\u5151\u6362\u4e3a\u91d1\u5e01\u3002";else{var f=z.default.instance().randomGardenPlant(1);m.propCount=f,i="\u795e\u79d8\u7684\u9ec4\u91d1\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u6709100%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01"}d.pzaRewardManager.recieveRewards([m],function(){},!1,i)}else o==s.pzaGamePropEnum.EQUIP_BELT?p.pzaBeltEquipConfig.getBeltEquip(p.pzaBeltEquipEnum.ShuangQi):d.pzaRewardManager.recieveRewards([m],function(){n==r.pzaPlantEnum.TWIN_SUNFLOWER&&u.pzaLocalData.data.ownPlants.includes(n)&&(e.drawGridNode.removeAllChildren(),e.showRecruitDrawView())},!1,i)}u.pzaLocalData.data.recruitDrawArr[this.drawTargetIdx]+=1,u.pzaLocalData.addDirty("recruitDrawArr"),this.gridNodes[this.drawTargetIdx]&&this.gridNodes[this.drawTargetIdx].getComponent(y.pzaRecruitDrawItem).refreshGet(),this.refreshView()},a.prototype.onDestroy=function(){this.blinkTween&&this.blinkTween.stop()},a.prototype.close=function(){this.isDrawing||(this.blinkTween&&this.blinkTween.stop(),h.pzaSoundManager.playSFX(),l.pzaGameCommonPool.returnInstant(this.node))},i([b({displayName:"\u62bd\u5956\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"drawSelectNode",void 0),i([b({displayName:"\u62bd\u5956\u6309\u94ae",type:cc.Node})],a.prototype,"drawBtn",void 0),i([b({displayName:"\u62bd\u5956\u9884\u8bbe\u7236\u8282\u70b9",type:cc.Node})],a.prototype,"drawGridNode",void 0),i([b({displayName:"\u62bd\u5956\u9884\u8bbe",type:cc.Prefab})],a.prototype,"drawItemPre",void 0),i([b({type:cc.Label})],a.prototype,"tokenCoinLabel",void 0),i([b({type:cc.Node})],a.prototype,"notClick",void 0),i([b({type:cc.Label})],a.prototype,"hasCoin",void 0),i([v],a)}(cc.Component);t.pzaRecruitView=P,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaGameRecruitMgr":"pzaGameRecruitMgr","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","./pzaRecruitDrawItem":"pzaRecruitDrawItem"}],pzaRedPointMgr:[function(e,a,t){"use strict";cc._RF.push(a,"0c8c7sXsaRMZ4adaa2ij6aR","pzaRedPointMgr");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p,l=e("../Achieve/pzaAchieveMgr"),s=e("../Garden/pzaGardenMgr"),c=e("../Task/pzaTaskMgr"),u=e("../utils/pzakc"),d=e("./pzaGamePropConfig"),h=e("./pzaGiftConfig"),m=e("./pzaLocalData"),f=e("./pzaOperationMgr"),z=cc._decorator,y=z.ccclass,g=z.property;(function(e){e[e.null=0]="null",e[e.sign=1]="sign",e[e.monthsign=2]="monthsign",e[e.achieve=3]="achieve",e[e.garden=4]="garden",e[e.welfare=5]="welfare",e[e.sharegift=6]="sharegift",e[e.weektwo=7]="weektwo",e[e.gift=8]="gift",e[e.battlereward=9]="battlereward",e[e.battleexp=10]="battleexp",e[e.newplayer=11]="newplayer",e[e.loginreward=12]="loginreward",e[e.loginactivity=13]="loginactivity",e[e.riderfall=14]="riderfall",e[e.activity=15]="activity",e[e.riderbelt=16]="riderbelt",e[e.sidebar=17]="sidebar"})(p||(p={}));var v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.type=p.null,a.tipNode=null,a.endTime=new Date("2024-08-25 00:00:00").getTime(),a}return n(a,e),a.prototype.start=function(){var e=this;this.checkRed(),this.scheduleOnce(function(){m.pzaLocalData.loadingIsOver&&e.checkRed(),e.schedule(function(){m.pzaLocalData.loadingIsOver&&e.checkRed()},1.5,cc.macro.REPEAT_FOREVER)},1)},a.prototype.checkRed=function(){this.tipNode.active?this.getTipState(this.type)||(this.tipNode.active=!1):this.getTipState(this.type)&&(this.tipNode.active=!0,this.tipNode.angle=0,cc.Tween.stopAllByTarget(this.tipNode),u.default.ani_JitterNode(this.tipNode,.4,15,3,!0))},a.prototype.setRedType=function(e){this.type="riderfall"==e?p.riderfall:"loginreward"==e?p.loginreward:"newplayer"==e?p.newplayer:p.null},a.prototype.getTipState=function(e){var a=!1;switch(e){case p.sign:a=this.checkDaySign();break;case p.monthsign:a=this.checkMonthSign();break;case p.achieve:a=this.checkAchieve();break;case p.garden:a=this.checkGarden();break;case p.sharegift:a=m.pzaLocalData.data.showBangJar||m.pzaLocalData.data.shareJarViewRedPoint;break;case p.weektwo:(a=this.checkWeekTwo())||(this.node.active=!1);break;case p.welfare:(a=this.checkDaySign())||(a=this.checkMonthSign()),a||(a=this.checkWeekTwo()),a||(a=this.checkGift()),a||(a=m.pzaLocalData.data.showBangJar);break;case p.battlereward:0==(a=this.checkBpRewards())&&(a=this.checkBpExp());break;case p.battleexp:a=this.checkBpExp();break;case p.newplayer:a=this.checkNewPlayerTask();break;case p.gift:a=this.checkGift();break;case p.loginreward:0==(a=this.checkLoginActivity())&&(a=this.checkRiderState());break;case p.riderfall:a=this.checkRiderFall();break;case p.activity:0==(a=this.checkLoginActivity())&&(a=this.checkNewPlayerTask()),0==a&&(a=this.checkRiderState()),0==a&&(a=this.checkRiderFall());break;case p.riderbelt:a=this.checkRiderBelt();break;case p.sidebar:a=m.pzaLocalData.canGetSideRwd}return a},a.prototype.checkDaySign=function(){return!(m.pzaLocalData.data.canMonthSign||m.pzaLocalData.data.hasSign&&0!=m.pzaLocalData.data.hasDoubleSign)},a.prototype.checkMonthSign=function(){return!(m.pzaLocalData.data&&!m.pzaLocalData.data.canMonthSign||m.pzaLocalData.data.isSignInMonth)},a.prototype.checkAchieve=function(){var e=l.default.instance().getConf(),a=!1;try{for(var t in m.pzaLocalData.data.achieves)if(Object.prototype.hasOwnProperty.call(m.pzaLocalData.data.achieves,t)){var o=m.pzaLocalData.data.achieves[t],n=parseInt(t);if(e[n]&&1!=e[n].hide&&1==o){a=!0;break}}}catch(i){console.warn("checkAchieve error:",i)}return a},a.prototype.checkGarden=function(){return s.default.instance().canOperate()},a.prototype.checkWeekTwo=function(){var e=!1;if(!m.pzaLocalData.data.passLastPart||m.pzaLocalData.serverTime>this.endTime)return!1;var a=c.default.instance().getTaskList();if(!a)return!1;for(var t=0;t<a.length;t++)2==a[t].state&&(e=!0);return e||(e=m.pzaLocalData.data.weekTwoStartTip),e},a.prototype.checkGift=function(){var e,a,t=h.pzaGiftConfig.isUnlockGift(h.pzaGiftID.Begin),o=h.pzaGiftConfig.isUnlockGift(h.pzaGiftID.Dave),n=h.pzaGiftConfig.isUnlockGift(h.pzaGiftID.Garden),i=h.pzaGiftConfig.getGiftData(h.pzaGiftID.Dave),r=h.pzaGiftConfig.getGiftData(h.pzaGiftID.Garden);return i&&(e=m.pzaLocalData.data.getDaveGiftCount<h.pzaGiftConfig.getGiftData(h.pzaGiftID.Dave).getCount),r&&(a=m.pzaLocalData.data.getGardenGiftCount<h.pzaGiftConfig.getGiftData(h.pzaGiftID.Garden).getCount),!!(t&&!m.pzaLocalData.data.hasBeginGift||o&&e||n&&a)},a.prototype.checkBpRewards=function(){var e,a,t,o;if(!m.pzaLocalData.disablePostFn){var n=!1;try{for(var i=r(Object.keys(m.pzaLocalData.data.bpNormalRewards)),p=i.next();!p.done;p=i.next()){var l=p.value;if(1==m.pzaLocalData.data.bpNormalRewards[l])return n=!0,!0}}catch(u){e={error:u}}finally{try{p&&!p.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}if(n)return n;try{for(var s=r(Object.keys(m.pzaLocalData.data.bpHighRewards)),c=s.next();!c.done;c=s.next())if(l=c.value,1==m.pzaLocalData.data.bpHighRewards[l])return n=!0,!0}catch(d){t={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}return n}},a.prototype.checkBpExp=function(){var e,a,t,o;if(!m.pzaLocalData.disablePostFn){if(m.pzaLocalData.data.battlePassLv>=60)return!1;var n=!1;try{for(var i=r(Object.keys(m.pzaLocalData.data.bpDayTaskStates)),p=i.next();!p.done;p=i.next()){var l=p.value;if(1==m.pzaLocalData.data.bpDayTaskStates[l])return n=!0,!0}}catch(u){e={error:u}}finally{try{p&&!p.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}if(n)return n;try{for(var s=r(Object.keys(m.pzaLocalData.data.bpWeekTaskStates)),c=s.next();!c.done;c=s.next())if(l=c.value,1==m.pzaLocalData.data.bpWeekTaskStates[l])return n=!0,!0}catch(d){t={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}return n}},a.prototype.checkNewPlayerTask=function(){if(!m.pzaLocalData.disablePostFn){if(!1===f.pzaOperationMgr.isUnlockOperaFN(f.pzaOperationType.newPlayerTask))return!1;for(var e=!1,a=m.pzaLocalData.data.newPlayerStep>=7?7:m.pzaLocalData.data.newPlayerStep,t=1;t<=a;t++)for(var o=m.pzaLocalData.data.stepStates[t-1],n=0;n<4;n++)if(1==o[n+""])return!0;return e}},a.prototype.checkLoginActivity=function(){if(!m.pzaLocalData.disablePostFn){if(!1===f.pzaOperationMgr.isUnlockOperaFN(f.pzaOperationType.loginActivity))return!1;for(var e=!1,a=1;a<=7;a++)if(2!=m.pzaLocalData.data.loginRewardStates[a+""].normal&&a<=m.pzaLocalData.data.loginDays){e=!0;break}return e}},a.prototype.checkRiderState=function(){if(!m.pzaLocalData.disablePostFn){if(!1===f.pzaOperationMgr.isUnlockOperaFN(f.pzaOperationType.loginActivity))return!1;for(var e=!1,a=1;a<=4;a++)if(1==m.pzaLocalData.data.watchAdStates[a+""]){e=!0;break}if(0==e&&(e=m.pzaLocalData.data.loginRiderWatchAdRed),0==e){var t=m.pzaLocalData.getPlantIdByActivityRewardId(d.pzaGamePropEnum.BELT_ACTIVITY_COIN);t>0&&(m.pzaLocalData.data.beltsCoin[""+t]||0)>0&&(e=!0)}return e}},a.prototype.checkRiderFall=function(){if(!m.pzaLocalData.disablePostFn){if(1==m.pzaLocalData.data.riderFallRedPoint)return!0;for(var e=!1,a=1;a<=12;a++)if(1==m.pzaLocalData.data.riderFallTasks[a+""]){e=!0;break}if(0==e){var t=m.pzaLocalData.getPlantIdByActivityRewardId(d.pzaGamePropEnum.HERO_ACTIVITY_COIN);t>0&&(m.pzaLocalData.data.beltRiderCoin[""+t]||0)>0&&(e=!0)}return 0==e&&(e=m.pzaLocalData.data.riderFallTry),e}},a.prototype.checkRiderBelt=function(){var e,a;if(!m.pzaLocalData.disablePostFn){var t=!1;try{for(var o=r(Object.keys(m.pzaLocalData.data.beltEquipData.hasEquipList)),n=o.next();!n.done;n=o.next()){var i=n.value;if(1==m.pzaLocalData.data.beltEquipData.hasEquipList[i])return t=!0,!0}}catch(p){e={error:p}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}return t}},i([g({type:cc.Enum(p),tooltip:"\u7ea2\u70b9\u7c7b\u578b"})],a.prototype,"type",void 0),i([g({displayName:"\u63d0\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"tipNode",void 0),i([y],a)}(cc.Component);t.default=v,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Garden/pzaGardenMgr":"pzaGardenMgr","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzakc":"pzakc","./pzaGamePropConfig":"pzaGamePropConfig","./pzaGiftConfig":"pzaGiftConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr"}],pzaRepeaterReverse:[function(e,a,t){"use strict";cc._RF.push(a,"9be37kjKmdF3ZU5SBfgZOu+","pzaRepeaterReverse");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRepeaterReverse=void 0;var r=e("./pzaRepeater"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.dirX=-1},i([l],a)}(r.pzaRepeater));t.pzaRepeaterReverse=s,cc._RF.pop()},{"./pzaRepeater":"pzaRepeater"}],pzaRepeater:[function(e,a,t){"use strict";cc._RF.push(a,"084b5XksgtEvpNLAM4svCKL","pzaRepeater");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRepeater=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNameConf"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../Bullet/pzaBaseBullet"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a.atkAniTime=1.4,a.dirX=1,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),window.pzazombieManager.hasCanAttackZombie;var o=function(){t.findTargetZombie()?t.animation.playAnimation(p.pzaPlantSkName.COMMON.attack,!1,o,function(){t.shoot(),s.pzaSoundManager.playAudio("PeashooterAtk")}):t.animation.playAnimation(p.pzaPlantSkName.COMMON.idle,!1,o)};o(),u.pzaGameState.usePeaPlant=!0,u.pzaGameState.onlyBoomPlant=!1,u.pzaGameState.onlyShroomCofee=!1},a.prototype.findTargetZombie=function(){return this.dirX>0?window.pzazombieManager.hasCanAttackZombie.call(window.pzazombieManager,this.baseData):window.pzazombieManager.hasCanAttackBackZombie.call(window.pzazombieManager,this.baseData)},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=l.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){var t=1==this.dirX;a.setParent(e);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=e.convertToNodeSpaceAR(o);a.setPosition(n);var i=a.getComponent(c.pzaBaseBullet);if(null!=i){i.init(this.baseData.yIndex,this.baseData.atk,1,null,t?cc.v2(1,0):cc.v2(-1,0));var p=u.pzaGameState.map.getMapSkewColumn();p>0&&this.baseData.xIndex<=p-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([m],a)}(d.pzaBasePlant);t.pzaRepeater=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaResMgr:[function(e,a,t){"use strict";cc._RF.push(a,"bfe23rKP+xApq5lrOWvYJyF","pzaResMgr"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaResMgr=void 0;var o=e("../../start/pzaBundleController"),n=e("../Common/pzaGameCommonPool"),i=e("./pzaChannel"),r=e("./pzakc"),p=function(){function e(){this.cId=i.pzaChannel.verMap[i.pzaChannel.remoteVerKey].id,this.confCache=new Map}return e.instance=function(){return e._me||(e._me=new e),e._me},e.prototype.getConf=function(e){return this.confCache.get(e)},e.prototype.readDC=function(e){var a=JSON.parse(e);for(var t in a)this.confCache.set(t,a[t][t]);r.default.log("conf loaded:",this.confCache.size),r.default.log("ccv:"+this.getConf("a1")[0].ver,i.pzaChannel.remoteVerKey)},e.prototype.loadConf=function(e){var a=this;cc.resources.load("conf/conf",function(t,o){t?console.error(t):cc.assetManager.loadAny({url:o.nativeUrl,type:"binary"},function(t,o){if(t)r.default.err(t);else{var n=fflate.unzipSync(new Uint8Array(o),{filter:function(e){return"conf.txt"===e.name}}),p=fflate.strFromU8(n["conf.txt"]);a.readDC(p),i.pzaChannel.isConfRemote?r.default.jget("https://ga.gamejym.com/fcm199/zip/"+a.cId+".bin",function(t,o){if(t)e(t);else{var n=fflate.unzipSync(new Uint8Array(o),{filter:function(e){return"conf.txt"===e.name}}),i=fflate.strFromU8(n["conf.txt"]);a.readDC(i),e(null)}}):e(null)}})})},e.prototype.getSpineSync=function(e,a){if(n.pzaGameCommonPool.urlToSkeletonData.has(e))a(null,n.pzaGameCommonPool.urlToSkeletonData.get(e));else{var t=o.pzaBundleController.getBundle(o.pzaBundleType.Spine);if(!t)return a(new Error("\u65e0spineBundle"),null);t.load(e,sp.SkeletonData,function(t,o){t?a(t,null):(n.pzaGameCommonPool.urlToSkeletonData.set(e,o),a(null,o))})}},e._me=null,e}();t.pzaResMgr=p,cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaReviveView:[function(e,a,t){"use strict";cc._RF.push(a,"7b1d0A87u9CfKLGpAwdUwi5","pzaReviveView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaReviveView=void 0;var r=e("../../Battle/Plant/pzaAttackType"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGameManager"),c=e("../../Common/pzaGameVaseEndless"),u=e("../../Common/pzaLocalData"),d=e("../../Common/pzaSoundManager"),h=e("../../Common/pzaStatisticsMgr"),m=e("../../Common/pzaWorldEventManager"),f=e("../../utils/pzaChannel"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tip=null,a.videoNode=null,a.shareNode=null,a.btnState=!1,a.toggle=null,a.closeBtn=null,a.confirmCall=null,a.cancelCall=null,a.giveSun=!0,a}return n(a,e),a.prototype.init=function(e,a,t){void 0===t&&(t=!1),this.confirmCall=e,this.cancelCall=a,p.pzaGameState.isZombieMode()?this.tip.string="\u6ca1\u6709\u80fd\u91cf\u53ec\u5524\u602a\u4eba\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u83b7\u5f97500\u80fd\u91cf":p.pzaGameState.gameMode===p.pzaGameMode.VASE_ENDLESS?this.tip.string="\u602a\u4eba\u7a81\u7834\u9632\u7ebf\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u4fdd\u7559\u8bb0\u5f55\u4ece\u5f53\u524d\u5173\u5361\u91cd\u65b0\u5f00\u59cb\u3002":p.pzaGameState.isMiniMode()?(this.tip.string="\u602a\u4eba\u7a81\u7834\u9632\u7ebf\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u602a\u4eba",this.giveSun=!1):(this.giveSun=p.pzaGameState.isSurvival()||5!=p.pzaGameState.curPart&&10!=p.pzaGameState.curPart,this.tip.string=this.giveSun?"\u602a\u4eba\u7a81\u7834\u9632\u7ebf\u4f60\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6d88\u706d\u6240\u6709\u602a\u4eba\uff0c\u5e76\u8d60\u9001500\u80fd\u91cf\uff01":"\u602a\u4eba\u7a81\u7834\u9632\u7ebf\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u602a\u4eba"),t&&(this.tip.string="\u602a\u4eba\u7a81\u7834\u9632\u7ebf\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u8ba9Boss\u9000\u56de\u8d77\u70b9"),this.btnState=p.pzaGameState.reviveViewBtnState%2==1,"wx"!=f.pzaChannel.instance().channel&&(this.btnState=!1),this.shareNode.active=this.btnState,this.videoNode.active=!this.btnState,h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"12"},{name:"adname",value:"\u5173\u5361\u590d\u6d3b"}),d.pzaSoundManager.stopLoopAudio(),d.pzaSoundManager.stopLongAudio(),this.toggle.active=!1},a.prototype.showCloseBtn=function(){this.toggle.active=!1,this.closeBtn.active=!0},a.prototype.clickRevive=function(){var e=this,a=function(){e.close(),e.confirmCall&&e.confirmCall();var a=s.pzaGameManager.getCurrentGame();p.pzaGameState.gamePause=!1,p.pzaGameState.hadRevived=!0,m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_RESUME,null),p.pzaGameState.reviveViewBtnState++,p.pzaGameState.isZombieMode()?window.pzaplantManager.adCreateSun():p.pzaGameState.gameMode===p.pzaGameMode.VASE_ENDLESS?s.pzaGameManager.getGame(p.pzaGameMode.VASE_ENDLESS,c.pzaGameVaseEndless).doNextPart():(window.pzazombieManager.zombieMap.forEach(function(e,a){null!=e&&null!=a&&null!=a.logicPos&&null!=e.baseData&&e.baseData.logicPos.x<-157&&e.hurt(1e6,null,r.pzaAttackType.DEATH)}),a.createAdBomb(),e.giveSun&&window.pzaplantManager.adCreateSun())};this.videoNode.active&&f.pzaChannel.instance().showVideo({sucCall:a,failCall:function(){},endCall:function(){},posName:"\u5173\u5361\u590d\u6d3b",adsid:"12"}),this.shareNode.active&&f.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"12"},function(){a()})},a.prototype.clickClose=function(){this.close(),this.cancelCall&&this.cancelCall(),d.pzaSoundManager.resumeLoopAudio(),d.pzaSoundManager.resumeLongAudio()},a.prototype.close=function(){u.pzaLocalData.isPopReviveView=!1,l.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u63d0\u793a\u8bed",type:cc.Label})],a.prototype,"tip",void 0),i([g({displayName:"\u89c6\u9891\u6807\u8bc6\u8282\u70b9",type:cc.Node})],a.prototype,"videoNode",void 0),i([g({displayName:"\u5206\u4eab\u6807\u8bc6\u8282\u70b9",type:cc.Node})],a.prototype,"shareNode",void 0),i([g(cc.Node)],a.prototype,"toggle",void 0),i([g({type:cc.Node})],a.prototype,"closeBtn",void 0),i([y],a)}(cc.Component);t.pzaReviveView=v,cc._RF.pop()},{"../../Battle/Plant/pzaAttackType":"pzaAttackType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel"}],pzaRewardItem:[function(e,a,t){"use strict";cc._RF.push(a,"88504bcAuVIU6o/+NgxpLtt","pzaRewardItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRewardItem=void 0;var r=e("../Battle/Data/pzaGoodsEnum"),p=e("../Battle/Data/pzaPlantEnum"),l=e("../Common/pzaBeltEquipConfig"),s=e("../Common/pzaGameConfig"),c=e("../Common/pzaGamePropConfig"),u=e("../Common/pzaItemTips"),d=e("../Common/pzaLocalData"),h=e("../Common/pzaSpriteFrameManager"),m=e("../Load/pzaBundleObjectPool"),f=e("../utils/pzakc"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.proIcon=null,a.propAniImg=null,a.spris_prop=[],a.plantCardNode=null,a.plantIcon=null,a.propName=null,a.shopItemIcon=null,a.swIcon=null,a.beltRiderImg=null,a.professorSP=null,a.lab_giftChange=null,a.coin_path="Texture/BattleUI/coin_icon",a.taken_coin_path="Texture/MainView/RecruitView/recruitImg6",a}return n(a,e),a.prototype.init=function(e){var a=this;if(this.propName.node.y=-37,this.swIcon&&(this.swIcon.active=!1),null!=e){var t=e.propType,o=e.propCount;if(this.shopItemIcon.node.active=!1,this.beltRiderImg&&(this.beltRiderImg.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.proIcon.node.scale=1,this.lab_giftChange.active=!1,0!=e.giftChange){this.lab_giftChange.active=!0;var n=this.lab_giftChange.children[0];h.pzaSpriteFrameManager.loadPropIcon(e.giftChange,n.getComponent(cc.Sprite))}var i=c.pzaGamePropConfig.PorpConfigMap.get(t);switch(this.node.addComponent(u.default).bindData(t,o),t){case c.pzaGamePropEnum.PROP_COIN:this.proIcon.node.active=!0,this.proIcon.node.scale=1.5,this.propAniImg.node.active=!1,this.propName.string="\u9a91\u58eb\u5e01X"+o,m.pzaBundleObjectPool.requestSpriteFrameByUrl(this.coin_path,function(e,t){null==e?t?a.proIcon.spriteFrame=t:f.default.err("\u65e0tool\u56fe"):console.error(e)});break;case c.pzaGamePropEnum.PROP_CHERRY_BOMB:case c.pzaGamePropEnum.PROP_AUTO_PICK:case c.pzaGamePropEnum.PROP_FREE_SUN:this.proIcon.node.active=!1,this.propAniImg.node.active=!0,t==c.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAniImg.spriteFrame=this.spris_prop[0]:t==c.pzaGamePropEnum.PROP_AUTO_PICK?this.propAniImg.spriteFrame=this.spris_prop[2]:t==c.pzaGamePropEnum.PROP_FREE_SUN&&(this.propAniImg.spriteFrame=this.spris_prop[1]),this.propAniImg.node.scale=.8;var z=c.pzaGamePropConfig.PorpConfigMap.get(t);null!=z&&(this.propName.string=z.propName+"X"+o);break;case c.pzaGamePropEnum.PROP_PLANTE:this.propName.node.y=-50,this.plantIcon.node.y=-2,this.proIcon.node.active=!1,this.propAniImg.node.active=!1,this.plantCardNode&&(this.plantCardNode.active=!0);var y;null!=(y=42==o?s.pzaGameConfig.getPlantConfig(p.pzaPlantEnum.TWIN_SUNFLOWER):s.pzaGameConfig.getPlantConfig(o))&&(this.propName.string=y.name+"X1",h.pzaSpriteFrameManager.loadPlantCard(o,this.plantIcon)),1==e.limitGet&&(this.propName.string="\u514d\u8d39\u8bd5\u7528\u4e00\u5929",this.swIcon&&(this.swIcon.active=!0)),this.professorSP&&y&&h.pzaSpriteFrameManager.loadPlantProfess(y.profession,this.professorSP);break;case c.pzaGamePropEnum.PROP_FERTILIZER:this.proIcon.node.active=!1,this.propAniImg.node.active=!1,this.shopItemIcon.node.active=!0,this.propName.string="\u989c\u6599X"+o,h.pzaSpriteFrameManager.loadCommonGoodsIcon(i.itemicon,this.shopItemIcon);break;case c.pzaGamePropEnum.PROP_PESTICIDE:this.proIcon.node.active=!1,this.propAniImg.node.active=!1,this.shopItemIcon.node.active=!0,this.propName.string="\u51dd\u80f6X"+o,h.pzaSpriteFrameManager.loadCommonGoodsIcon(i.itemicon,this.shopItemIcon);break;case c.pzaGamePropEnum.EQUIP_BELT:this.proIcon.node.active=!1,this.propAniImg.node.active=!1,this.shopItemIcon.node.active=!0,h.pzaSpriteFrameManager.loadBeltCard("belt_"+e.targetID,this.shopItemIcon),this.propName.string=l.pzaBeltEquipConfig.getConfig().get(e.targetID).name;break;case c.pzaGamePropEnum.PROP_CHOCOLATES:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.propName.string="\u5de7\u514b\u529bX"+o,m.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/chocolate",function(e,t){null==e?t?a.proIcon.spriteFrame=t:f.default.err("\u65e0tool\u56fe"):console.error(e)});break;case c.pzaGamePropEnum.PROP_GOLD_FLOWER:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.propName.string="\u9ec4\u91d1\u793c\u5305X1",h.pzaSpriteFrameManager.loadCommonGoodsIcon(r.pzaGoodsEnum.GOLD_FLOWER_SEED,this.proIcon);break;case c.pzaGamePropEnum.PROP_SECRET_FLOWER:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.propName.string="\u795e\u79d8\u793c\u5305X"+o,h.pzaSpriteFrameManager.loadCommonGoodsIcon(r.pzaGoodsEnum.FLOWER_SEED,this.proIcon);break;case c.pzaGamePropEnum.PROP_BRONZE_FLOWE:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.propName.string="\u9752\u94dc\u793c\u5305X"+o,h.pzaSpriteFrameManager.loadCommonGoodsIcon(r.pzaGoodsEnum.BRONZE_FLOWER_SEED,this.proIcon);break;case c.pzaGamePropEnum.BELT_ACTIVITY_COIN:this.proIcon.spriteFrame=null,this.proIcon.node.active=!0,this.proIcon.node.scale=1,this.propAniImg.node.active=!1,this.propName.string=d.pzaLocalData.loginActivityNameObj.coinname+"X"+o,h.pzaSpriteFrameManager.loadCommonImg("17",this.proIcon);break;case c.pzaGamePropEnum.HERO_ACTIVITY_COIN:this.proIcon.spriteFrame=null,this.proIcon.node.scale=2,this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.propName.string=d.pzaLocalData.riderFallNameObj.coinname+"X"+o,h.pzaSpriteFrameManager.loadCommonImg("riderCoin",this.proIcon);break;case c.pzaGamePropEnum.BELT_PIECE:this.proIcon.node.active=!1,this.propAniImg.node.active=!1,this.beltRiderImg&&(this.beltRiderImg.node.active=!0),h.pzaSpriteFrameManager.loadBeltCard("belt_"+d.pzaLocalData.beltPieceType,this.beltRiderImg),this.propName.string=d.pzaLocalData.loginActivityNameObj.piecename+"X"+o,this.beltRiderImg.node.width=86.4,this.beltRiderImg.node.height=42.75;break;case c.pzaGamePropEnum.RIDER_PIECE:this.proIcon.node.active=!1,this.propAniImg.node.active=!1,this.beltRiderImg&&(this.beltRiderImg.node.active=!0),h.pzaSpriteFrameManager.loadPlantCard(d.pzaLocalData.riderPieceType,this.beltRiderImg),this.propName.string=d.pzaLocalData.riderFallNameObj.piecename+"X"+o;break;case c.pzaGamePropEnum.PROP_SILVER_FLOWE:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.propName.string="\u767d\u94f6\u624b\u529eX"+o,h.pzaSpriteFrameManager.loadGoldPlant(32,this.proIcon);break;case c.pzaGamePropEnum.PROP_ACHIEVE:break;case c.pzaGamePropEnum.PROP_POWER:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.proIcon.node.scale=.8,this.propName.string="\u4f53\u529bX"+o,h.pzaSpriteFrameManager.loadCommonImg("13",this.proIcon);break;case c.pzaGamePropEnum.PROP_AD_TICKET:this.proIcon.node.active=!0,this.propAniImg.node.active=!1,this.proIcon.node.scale=.8,this.propName.string="\u5e7f\u544a\u5238X"+o,h.pzaSpriteFrameManager.loadCommonImg("14",this.proIcon);break;case c.pzaGamePropEnum.RANDOM_GIFT:this.propAniImg.node.active=!1;break;case c.pzaGamePropEnum.EQUIP_BELT:this.proIcon.node.active=!0,h.pzaSpriteFrameManager.loadCommonGoodsIcon(r.pzaGoodsEnum.WITCH_KNIGHT_BELT,this.proIcon)}}},i([g({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],a.prototype,"proIcon",void 0),i([g({displayName:"\u9053\u5177\u52a8\u753b\u56fe\u7247",type:cc.Sprite})],a.prototype,"propAniImg",void 0),i([g({displayName:"\u9053\u5177\u52a8\u753b\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"spris_prop",void 0),i([g({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],a.prototype,"plantCardNode",void 0),i([g({displayName:"\u690d\u7269\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"plantIcon",void 0),i([g({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],a.prototype,"propName",void 0),i([g({displayName:"\u5546\u5e97\u7269\u54c1",type:cc.Sprite})],a.prototype,"shopItemIcon",void 0),i([g({displayName:"\u8bd5\u73a9\u8282\u70b9",type:cc.Node})],a.prototype,"swIcon",void 0),i([g({displayName:"\u8170\u5e26\u9a91\u58eb\u788e\u7247",type:cc.Sprite})],a.prototype,"beltRiderImg",void 0),i([g({type:cc.Sprite})],a.prototype,"professorSP",void 0),i([g({displayName:"\u793c\u5305\u8f6c\u6362\u63d0\u793a",type:cc.Node})],a.prototype,"lab_giftChange",void 0),i([y],a)}(cc.Component);t.pzaRewardItem=v,cc._RF.pop()},{"../Battle/Data/pzaGoodsEnum":"pzaGoodsEnum","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzakc":"pzakc"}],pzaRewardManager:[function(e,a,t){"use strict";cc._RF.push(a,"e44bdHqe5ZLuqradI8T/8b2","pzaRewardManager");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRewardManager=void 0;var n=e("../Achieve/pzaAchieveMgr"),i=e("../Garden/pzaGardenMgr"),r=e("../Load/pzaPreLoadManager"),p=e("../Shop/pzaShopConfig"),l=e("../View/pzaCommonRewardView"),s=e("./pzaBeltEquipConfig"),c=e("./pzaGamePropConfig"),u=e("./pzaLocalData"),d=e("./pzaUIManager"),h=e("./pzaUtil"),m=function(){function e(){}return e.recieveRewards=function(e,a,t,o,n){if(void 0===a&&(a=null),void 0===t&&(t=!1),void 0===o&&(o=null),void 0===n&&(n=!0),null!=e){for(var i=0;i<e.length;i++)e[i].propType==c.pzaGamePropEnum.RANDOM_GIFT&&this.checkRandomGift(e[i].propCount,e);e=e.filter(function(e){return e.propType!=c.pzaGamePropEnum.RANDOM_GIFT}),this.checkPiece(e),!t&&this.recieveRewardData(e),n?d.pzaUIManager.baseShowPopUI(r.pzaResourceUrl.COMMON_REWARD_VIEW,function(t){var n=t&&t.getComponent(l.pzaCommonRewardView);n&&n.bindData(e,a),o&&n&&n.setTip(o)}):a&&a()}},e.recieveRewardData=function(e){null!=e&&e.forEach(function(e){if(null!=e)if(e.propType==c.pzaGamePropEnum.PROP_PLANTE)if(u.pzaLocalData.data.ownPlants.includes(e.propCount)){if(1==e.limitGet)return u.pzaLocalData.data.plantTrial[""+e.propCount]+=1,void u.pzaLocalData.addDirty("plantTrial");if(u.pzaLocalData.data.plantTrial[""+e.propCount]&&u.pzaLocalData.data.plantTrial[""+e.propCount]<=10)return delete u.pzaLocalData.data.plantTrial[""+e.propCount],void u.pzaLocalData.addDirty("plantTrial");var a=p.pzaShopConfig.getPlantPrice(e.propCount);e.propType=c.pzaGamePropEnum.PROP_COIN,e.propCount=a,u.pzaLocalData.obtainProp(e.propType,e.propCount)}else{if(1==e.limitGet){var t=u.pzaLocalData.data.plantTrial[""+e.propCount]||0;u.pzaLocalData.data.plantTrial[""+e.propCount]=t+1,u.pzaLocalData.addDirty("plantTrial")}u.pzaLocalData.data.ownPlants.push(e.propCount),u.pzaLocalData.addDirty("ownPlants"),n.default.instance().obtainPlant()}else if(e.propType==c.pzaGamePropEnum.PROP_FERTILIZER)console.log("\u6dfb\u52a0\u80a5\u6599:",e.propCount),i.default.instance().addGardenTool(i.pzaGardenToolType.manure,e.propCount);else if(e.propType==c.pzaGamePropEnum.PROP_PESTICIDE)console.log("\u6dfb\u52a0\u6740\u866b\u5242: ",e.propCount),i.default.instance().addGardenTool(i.pzaGardenToolType.pesticide,e.propCount);else if(e.propType==c.pzaGamePropEnum.RIDER_PIECE){if(console.log("\u83b7\u53d6\u6d3b\u52a8\u9a91\u58eb\u788e\u7247: ",e.riderId),e.riderId){var o=u.pzaLocalData.data.riderPieceAmounts[""+e.riderId];u.pzaLocalData.data.riderPieceAmounts[""+e.riderId]=e.propCount+o,u.pzaLocalData.addDirty("riderPieceAmounts")}}else if(e.propType==c.pzaGamePropEnum.BELT_PIECE){if(console.log("\u83b7\u53d6\u6d3b\u52a8\u8170\u5e26\u788e\u7247"),e.riderId){var r=u.pzaLocalData.data.beltPieceAmounts[""+e.riderId];u.pzaLocalData.data.beltPieceAmounts[""+e.riderId]=e.propCount+r,u.pzaLocalData.addDirty("beltPieceAmounts")}}else if(e.propType==c.pzaGamePropEnum.PROP_CHOCOLATES)console.log("\u6dfb\u52a0\u5de7\u514b\u529b: ",e.propCount),i.default.instance().addGardenTool(i.pzaGardenToolType.chocolate,e.propCount);else if(e.propType==c.pzaGamePropEnum.PROP_GOLD_FLOWER){for(var l=0;l<e.propCount;l++){var s=i.default.instance().randomGardenPlant(1);u.pzaLocalData.data.dropPlantArr.push(s)}u.pzaLocalData.addDirty("dropPlantArr")}else if(e.propType==c.pzaGamePropEnum.PROP_SECRET_FLOWER||e.propType==c.pzaGamePropEnum.PROP_BRONZE_FLOWE||e.propType==c.pzaGamePropEnum.PROP_SILVER_FLOWE){var d=0;for(e.propType==c.pzaGamePropEnum.PROP_SECRET_FLOWER?d=0:e.propType==c.pzaGamePropEnum.PROP_BRONZE_FLOWE?d=.25:e.propType==c.pzaGamePropEnum.PROP_SILVER_FLOWE&&(d=.5),l=0;l<e.propCount;l++)s=i.default.instance().randomGardenPlant(d),u.pzaLocalData.data.dropPlantArr.push(s);u.pzaLocalData.addDirty("dropPlantArr")}else u.pzaLocalData.obtainProp(e.propType,e.propCount)})},e.checkRandomGift=function(e,a){for(var t=0,o=0,n=0,i=0;i<e;i++){var r=h.pzaUtil.getRandomValueFromArray([c.pzaGamePropEnum.PROP_AUTO_PICK,c.pzaGamePropEnum.PROP_FREE_SUN,c.pzaGamePropEnum.PROP_CHERRY_BOMB]);r==c.pzaGamePropEnum.PROP_AUTO_PICK?o++:r==c.pzaGamePropEnum.PROP_FREE_SUN?t++:r==c.pzaGamePropEnum.PROP_CHERRY_BOMB&&n++}return t>0&&a.push(new c.pzaRewardPropData(c.pzaGamePropEnum.PROP_FREE_SUN,t,0,c.pzaGamePropEnum.RANDOM_GIFT)),o>0&&a.push(new c.pzaRewardPropData(c.pzaGamePropEnum.PROP_AUTO_PICK,o,0,c.pzaGamePropEnum.RANDOM_GIFT)),n>0&&a.push(new c.pzaRewardPropData(c.pzaGamePropEnum.PROP_CHERRY_BOMB,n,0,c.pzaGamePropEnum.RANDOM_GIFT)),a},e.checkPiece=function(e){for(var a=0;a<e.length;a++){var t=e[a];t.propType==c.pzaGamePropEnum.BELT_PIECE&&s.pzaBeltEquipConfig.hasBeltEquip(s.pzaBeltEquipEnum.ShuangQi)&&(e[a]=new c.pzaRewardPropData(c.pzaGamePropEnum.PROP_COIN,200*t.propCount,0,c.pzaGamePropEnum.BELT_ACTIVITY_COIN))}},e.rerarrgeArray=function(e){var a,t,n,i,r=[];try{for(var p=o(e),l=p.next();!l.done;l=p.next()){var s=l.value,c=!0;try{for(var u=(n=void 0,o(r)),d=u.next();!d.done;d=u.next()){var h=d.value;if(h.propType==s.propType){h.propCount+=s.propCount,c=!1;break}}}catch(m){n={error:m}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}c&&r.push(s)}}catch(f){a={error:f}}finally{try{l&&!l.done&&(t=p.return)&&t.call(p)}finally{if(a)throw a.error}}return r},e}();t.pzaRewardManager=m,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/pzaCommonRewardView":"pzaCommonRewardView","./pzaBeltEquipConfig":"pzaBeltEquipConfig","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil"}],pzaRicochetBulletEffect:[function(e,a,t){"use strict";cc._RF.push(a,"f80fbJLm4FPkbsC+16mztX5","pzaRicochetBulletEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRicochetBulletEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletNode=null,a.poolPrefab=null,a}return n(a,e),a.prototype.init=function(e){var a=this;this.bulletNode.stopAllActions(),this.bulletNode.setPosition(cc.v2()),this.bulletNode.runAction(cc.sequence(cc.jumpTo(.7,cc.v2(100*Math.random()+80,0),50*Math.random()+70,1),cc.callFunc(function(){a.close()}))),e&&(this.bulletNode.getComponent(cc.Sprite).spriteFrame=e)},a.prototype.pauseSelf=function(){this.bulletNode.pauseAllActions()},a.prototype.resumeSelf=function(){this.bulletNode.resumeAllActions()},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"bulletNode",void 0),i([c(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaRicochetBulletEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaRiderFallParentView:[function(e,a,t){"use strict";cc._RF.push(a,"06036gssE5JWoUQsX2HaN3B","pzaRiderFallParentView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var p=e("../Common/pzaCommonPopView"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGamePropConfig"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaStatisticsMgr"),d=e("../Common/pzaWorldEventManager"),h=e("./pzaRiderFallView"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.btn_RiderFall=null,a.btn_task=null,a.lab_riderFall=null,a.lab_task=null,a.node_content=null,a.pre_RiderFall=null,a.pre_Task=null,a.red_RiderFall=null,a.red_Task=null,a.tagParent=null,a.spris_select=[],a.taskDecorate=[],a.pieceDecorate=[],a.activityType=1,a.redCheckTime=0,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),c.pzaLocalData.data.riderFallRedPoint=!1,c.pzaLocalData.addDirty("riderFallRedPoint"),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),this.btn_RiderFall.on(cc.Node.EventType.TOUCH_END,this.clickRiderFallBtn,this),this.btn_task.on(cc.Node.EventType.TOUCH_END,this.clickTask,this),this.tagParent.active=c.pzaLocalData.riderFallLeftDay>0,c.pzaLocalData.riderFallLeftDay<=0?this.clickRiderFallBtn():this.clickTask(),this.redCheckTime=1,this.refreshRedTip(),this.checkTask(),u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"24"},{name:"adname",value:"\u9a91\u58eb\u964d\u4e34\u5e7f\u544a\u53ec\u5524"})},a.prototype.jumpView=function(e){e&&"riderFall"==e&&this.close()},a.prototype.refreshRedTip=function(){this.red_RiderFall.active=!1,cc.tween(this.red_RiderFall).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start(),this.red_Task.active=!1,cc.tween(this.red_Task).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()},a.prototype.onDisable=function(){d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.JUMP_VIEW,this.jumpView,this),this.btn_RiderFall.off(cc.Node.EventType.TOUCH_END,this.clickRiderFallBtn,this),this.btn_task.off(cc.Node.EventType.TOUCH_END,this.clickTask,this)},a.prototype.setDecorate=function(){var e,a,t,o;try{for(var n=r(this.taskDecorate),i=n.next();!i.done;i=n.next())i.value.active=1==this.activityType}catch(s){e={error:s}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}try{for(var p=r(this.pieceDecorate),l=p.next();!l.done;l=p.next())l.value.active=2==this.activityType}catch(c){t={error:c}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(t)throw t.error}}},a.prototype.clickRiderFallBtn=function(){this.activityType=2,this.setDecorate(),this.checkRiderTask(),this.red_RiderFall.active=!1,this.node_content.removeAllChildren();var e=cc.instantiate(this.pre_RiderFall);e.getComponent(h.default).bindData(this),e.parent=this.node_content,this.btn_RiderFall.getComponent(cc.Sprite).spriteFrame=this.spris_select[1],this.btn_task.getComponent(cc.Sprite).spriteFrame=this.spris_select[0],this.lab_riderFall.node.color=cc.Color.fromHEX(cc.color(),"#A84B18"),this.lab_task.node.color=cc.Color.fromHEX(cc.color(),"#ffffffff")},a.prototype.clickTask=function(){this.activityType=1,this.setDecorate(),this.checkRiderFall(),this.red_Task.active=!1,this.node_content.removeAllChildren(),cc.instantiate(this.pre_Task).parent=this.node_content,this.btn_RiderFall.getComponent(cc.Sprite).spriteFrame=this.spris_select[0],this.btn_task.getComponent(cc.Sprite).spriteFrame=this.spris_select[1],this.lab_task.node.color=cc.Color.fromHEX(cc.color(),"#A84B18"),this.lab_riderFall.node.color=cc.Color.fromHEX(cc.color(),"#ffffffff")},a.prototype.checkRiderFall=function(){var e=!1;if(0==e){var a=c.pzaLocalData.getPlantIdByActivityRewardId(s.pzaGamePropEnum.HERO_ACTIVITY_COIN);a>0&&(c.pzaLocalData.data.beltRiderCoin[""+a]||0)>0&&(e=!0)}0==e&&(e=c.pzaLocalData.data.riderFallTry),this.red_RiderFall.active=!!e},a.prototype.checkRiderTask=function(){for(var e=!1,a=1;a<=12;a++)if(1==c.pzaLocalData.data.riderFallTasks[a+""]){e=!0;break}this.red_Task.active=!!e},a.prototype.checkTask=function(){1==this.activityType&&this.checkRiderFall(),2==this.activityType&&this.checkRiderTask()},a.prototype.update=function(e){this.redCheckTime-=e,this.redCheckTime<=0&&(this.redCheckTime=.5,this.checkTask())},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([z({displayName:"\u9a91\u58eb\u964d\u4e34\u6309\u94ae",type:cc.Node})],a.prototype,"btn_RiderFall",void 0),i([z({displayName:"\u8fbe\u6807\u6709\u5956\u6309\u94ae",type:cc.Node})],a.prototype,"btn_task",void 0),i([z({displayName:"\u9a91\u58eb\u964d\u4e34\u6587\u5b57",type:cc.Label})],a.prototype,"lab_riderFall",void 0),i([z({displayName:"\u8fbe\u6807\u6709\u5956\u6587\u5b57",type:cc.Label})],a.prototype,"lab_task",void 0),i([z({displayName:"\u5b50\u9884\u8bbe\u7236\u5bb9\u5668",type:cc.Node})],a.prototype,"node_content",void 0),i([z({displayName:"\u9a91\u58eb\u964d\u4e34\u9884\u8bbe\u4f53",type:cc.Prefab})],a.prototype,"pre_RiderFall",void 0),i([z({displayName:"\u8fbe\u6807\u6709\u5956\u9884\u8bbe\u4f53",type:cc.Prefab})],a.prototype,"pre_Task",void 0),i([z({displayName:"\u9a91\u58eb\u964d\u4e34\u7ea2\u70b9",type:cc.Node})],a.prototype,"red_RiderFall",void 0),i([z({displayName:"\u8fbe\u6807\u6709\u5956\u7ea2\u70b9",type:cc.Node})],a.prototype,"red_Task",void 0),i([z(cc.Node)],a.prototype,"tagParent",void 0),i([z({displayName:"\u6309\u94ae\u9009\u4e2d\u56fe\u7247",type:[cc.SpriteFrame]})],a.prototype,"spris_select",void 0),i([z({type:[cc.Node]})],a.prototype,"taskDecorate",void 0),i([z({type:[cc.Node]})],a.prototype,"pieceDecorate",void 0),i([f],a)}(p.default);t.default=y,cc._RF.pop()},{"../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaRiderFallView":"pzaRiderFallView"}],pzaRiderFallTaskConf:[function(e,a,t){"use strict";cc._RF.push(a,"746b5n8acdLhaQYanIYYCnn","pzaRiderFallTaskConf"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRiderFallTaskConf=void 0;t.pzaRiderFallTaskConf=function(e){this.id=0,this.taskname="",this.reward="",this.rewardType=0,this.rewardAmount=0,this.condNum=0,this.type=0,this.id=e.id,this.taskname=e.taskname||"",this.reward=e.reward||"";var a=this.reward.split("_");this.rewardType=parseInt(a[0]),this.rewardAmount=parseInt(a[1]),this.condNum=e.condNum||0,this.type=e.type},cc._RF.pop()},{}],pzaRiderFallTaskItem:[function(e,a,t){"use strict";cc._RF.push(a,"d68dbj+47pELZWJVvz9pxkr","pzaRiderFallTaskItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGamePropConfig"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaRewardManager"),s=e("../Common/pzaStatisticsMgr"),c=e("../Common/pzaUIManager"),u=e("../Common/pzaWorldEventManager"),d=e("../Load/pzaPreLoadManager"),h=e("../LoginRewardView/pzaLoginRewardMgr"),m=e("../Shop/pzaShopConfig"),f=e("../View/pzaBuyConfirmView"),z=e("../View/pzaHomeView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_taskName=null,a.lab_rewardCnt=null,a.node_getBtn=null,a.lab_getBtn=null,a.red_tip=null,a.img_getBtn=null,a.lab_taskPro=null,a.adIcon=null,a.spris_getBtn=[],a.idx=0,a.btnState=0,a}return n(a,e),a.prototype.onEnable=function(){this.node_getBtn.on(cc.Node.EventType.TOUCH_END,this.clickGet,this)},a.prototype.onDisable=function(){this.node_getBtn.off(cc.Node.EventType.TOUCH_END,this.clickGet,this)},a.prototype.bindData=function(e){this.idx=e;var a=h.default.instance().riderFallTaskMap.get(this.idx);this.lab_taskName.string=a.taskname,this.lab_rewardCnt.string="X"+a.rewardAmount,this.refreshBtnState(),this.refreshTaskPro(this.idx,a.condNum)},a.prototype.refreshTaskPro=function(e,a){1==e?this.lab_taskPro.string="("+p.pzaLocalData.data.riderFallTaskPro.login+"/"+a+")":2==e?this.lab_taskPro.string="("+p.pzaLocalData.data.riderFallTaskPro.zombie+"/"+a+")":3==e?this.lab_taskPro.string="("+p.pzaLocalData.data.riderFallTaskPro.coin+"/"+a+")":4==e?this.lab_taskPro.string="("+p.pzaLocalData.data.riderFallTaskPro.sun+"/"+a+")":5==e?this.lab_taskPro.string="("+p.pzaLocalData.data.riderFallTaskPro.passpart+"/"+a+")":6==e?this.lab_taskPro.string="("+p.pzaLocalData.data.riderFallTaskPro.ad+"/"+a+")":7==e?this.lab_taskPro.string="("+p.pzaLocalData.getVaseTrophy()+"/"+a+")":8==e?this.lab_taskPro.string="("+p.pzaLocalData.getVaseTrophy()+"/"+a+")":9==e?this.lab_taskPro.string="("+p.pzaLocalData.getVaseTrophy()+"/"+a+")":10==e?this.lab_taskPro.string="("+p.pzaLocalData.data.vaseFlagCount+"/"+a+")":11==e?this.lab_taskPro.string="("+p.pzaLocalData.data.vaseFlagCount+"/"+a+")":12==e&&(this.lab_taskPro.string="("+p.pzaLocalData.data.vaseFlagCount+"/"+a+")")},a.prototype.refreshBtnState=function(){this.img_getBtn.node.active=!0,this.img_getBtn.node.scale=.8,this.btnState=p.pzaLocalData.data.riderFallTasks[this.idx+""],0==this.btnState?(this.lab_getBtn.string="\u672a\u8fbe\u6210",this.red_tip.active=!1,this.img_getBtn.spriteFrame=this.spris_getBtn[0],p.pzaLocalData.riderFallLeftDay<=0&&(this.img_getBtn.node.active=!1),this.node.zIndex=1):1==this.btnState?(this.lab_getBtn.string="\u9886\u53d6",this.red_tip.active=!0,cc.tween(this.red_tip).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start(),this.img_getBtn.spriteFrame=this.spris_getBtn[1],this.node.zIndex=0):2==this.btnState&&(this.lab_getBtn.string="\u5df2\u9886\u53d6",this.red_tip.active=!1,this.img_getBtn.spriteFrame=this.spris_getBtn[2],this.img_getBtn.node.scale=.6,this.node.zIndex=2)},a.prototype.clickGet=function(){var e=this;if(0==this.btnState)switch(this.idx){case 2:case 4:case 5:u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.JUMP_VIEW,"riderFall"),z.default.jumpView("normalMode");break;case 6:case 3:c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(f.pzaBuyConfirmView);t&&t.bindData(m.pzaShopItemType.DAVE_COIN,null,null),t&&t.setCloseCall(function(){e.bindData(e.idx)})});break;case 7:case 8:case 9:case 10:case 11:case 12:u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.JUMP_VIEW,"riderFall"),z.default.jumpView("jarMode")}else if(1==this.btnState){s.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:7}),p.pzaLocalData.data.riderFallTasks[this.idx+""]=2,p.pzaLocalData.addDirty("riderFallTasks"),this.refreshBtnState();var a=h.default.instance().riderFallTaskMap.get(this.idx),t=a.rewardType,o=a.rewardAmount,n=[],i=new r.pzaRewardPropData(t,o);n.push(i),l.pzaRewardManager.recieveRewards(n),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.UPDATE_VIEW,"riderFallTask")}},i([v({displayName:"\u4efb\u52a1\u540d\u79f0",type:cc.Label})],a.prototype,"lab_taskName",void 0),i([v({displayName:"\u5956\u52b1\u6570\u91cf",type:cc.Label})],a.prototype,"lab_rewardCnt",void 0),i([v({displayName:"\u9886\u53d6\u6309\u94ae",type:cc.Node})],a.prototype,"node_getBtn",void 0),i([v({displayName:"\u9886\u53d6\u6309\u94ae\u6587\u5b57Lab",type:cc.Label})],a.prototype,"lab_getBtn",void 0),i([v({displayName:"\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"red_tip",void 0),i([v({displayName:"\u9886\u53d6\u6309\u94ae\u80cc\u666f",type:cc.Sprite})],a.prototype,"img_getBtn",void 0),i([v({displayName:"\u4efb\u52a1\u8fdb\u5ea6",type:cc.Label})],a.prototype,"lab_taskPro",void 0),i([v({displayName:"\u89c6\u9891\u6807\u8bc6",type:cc.Node})],a.prototype,"adIcon",void 0),i([v({displayName:"\u6309\u94ae\u72b6\u6001\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"spris_getBtn",void 0),i([g],a)}(cc.Component);t.default=b,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../LoginRewardView/pzaLoginRewardMgr":"pzaLoginRewardMgr","../Shop/pzaShopConfig":"pzaShopConfig","../View/pzaBuyConfirmView":"pzaBuyConfirmView","../View/pzaHomeView":"pzaHomeView"}],pzaRiderFallTaskView:[function(e,a,t){"use strict";cc._RF.push(a,"ff8a7tz0CVA9INe6IheLuvZ","pzaRiderFallTaskView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGamePropConfig"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaWorldEventManager"),s=e("../LoginRewardView/pzaLoginRewardMgr"),c=e("../utils/pzakc"),u=e("./pzaRiderFallTaskItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lab_leftTime=null,a.node_content=null,a.pre_item=null,a.dayTag=null,a.challengTag=null,a.itemCount=null,a.dayRedPoint=null,a.challengeRedPoint=null,a.curTag=0,a.unselectColor=cc.Color.fromHEX(cc.color(),"#ffffffff"),a.selectedColor=cc.Color.fromHEX(cc.color(),"#8B3B11"),a}return n(a,e),a.prototype.onEnable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_VIEW,this.updateView,this),this.checkTask(),p.pzaLocalData.riderFallLeftDay<=0?this.lab_leftTime.string=c.default.getActivityCloseTime(1)+"\u540e\u5165\u53e3\u5173\u95ed":this.lab_leftTime.string="\u7ed3\u675f\u65f6\u95f4:"+c.default.getLeaveDay(p.pzaLocalData.riderFallLeftTime),this.node_content.height=280,this.setTaskView(),this.refreshTag()},a.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_VIEW,this.updateView,this)},a.prototype.checkRedPoint=function(){if(0==this.curTag){this.dayRedPoint.active=!1;for(var e=7;e<13;e++)(a=p.pzaLocalData.data.riderFallTasks[e])&&1==a&&(this.challengeRedPoint.active=!0)}else if(1==this.curTag)for(this.challengeRedPoint.active=!1,e=1;e<7;e++){var a;(a=p.pzaLocalData.data.riderFallTasks[e])&&1==a&&(this.dayRedPoint.active=!0)}},a.prototype.updateView=function(e){"riderFallTask"==e&&this.setTaskView()},a.prototype.checkTask=function(){s.default.instance().checkRiderFallTask(7,p.pzaLocalData.getVaseTrophy()),s.default.instance().checkRiderFallTask(8,p.pzaLocalData.getVaseTrophy()),s.default.instance().checkRiderFallTask(9,p.pzaLocalData.getVaseTrophy()),s.default.instance().checkRiderFallTask(10,p.pzaLocalData.data.vaseFlagCount),s.default.instance().checkRiderFallTask(11,p.pzaLocalData.data.vaseFlagCount),s.default.instance().checkRiderFallTask(12,p.pzaLocalData.data.vaseFlagCount)},a.prototype.setTaskView=function(){var e=p.pzaLocalData.getPlantIdByActivityRewardId(r.pzaGamePropEnum.HERO_ACTIVITY_COIN),a=0;e>0&&(a=p.pzaLocalData.data.beltRiderCoin[""+e]||0),this.itemCount.string=a+"",this.node_content.removeAllChildren();for(var t=0;t<s.default.instance().riderFallTaskMap.size;t++){var o=s.default.instance().riderFallTaskMap.get(t+1);if(o&&this.curTag==o.type){var n=cc.instantiate(this.pre_item);n.getComponent(u.default).bindData(t+1),this.node_content.addChild(n)}}},a.prototype.refreshTag=function(){this.checkRedPoint();var e=this.dayTag.getChildByName("checked"),a=this.challengTag.getChildByName("checked"),t=this.dayTag.getChildByName("label"),o=this.challengTag.getChildByName("label");e.active=0==this.curTag,a.active=1==this.curTag,t.color=!0===e.active?this.selectedColor:this.unselectColor,o.color=!0===a.active?this.selectedColor:this.unselectColor},a.prototype.clickDayTag=function(){0!=this.curTag&&(this.curTag=0,this.refreshTag(),this.setTaskView())},a.prototype.clickChallengTag=function(){1!=this.curTag&&(this.curTag=1,this.refreshTag(),this.setTaskView())},i([m({displayName:"\u4efb\u52a1\u5269\u4f59\u65f6\u95f4Lab",type:cc.Label})],a.prototype,"lab_leftTime",void 0),i([m({displayName:"item\u5bb9\u5668",type:cc.Node})],a.prototype,"node_content",void 0),i([m({displayName:"item\u5bb9\u5668",type:cc.Prefab})],a.prototype,"pre_item",void 0),i([m({displayName:"\u6bcf\u65e5\u4efb\u52a1",type:cc.Node})],a.prototype,"dayTag",void 0),i([m({displayName:"\u6311\u6218\u4efb\u52a1",type:cc.Node})],a.prototype,"challengTag",void 0),i([m({type:cc.Label})],a.prototype,"itemCount",void 0),i([m(cc.Node)],a.prototype,"dayRedPoint",void 0),i([m(cc.Node)],a.prototype,"challengeRedPoint",void 0),i([h],a)}(cc.Component);t.default=f,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager","../LoginRewardView/pzaLoginRewardMgr":"pzaLoginRewardMgr","../utils/pzakc":"pzakc","./pzaRiderFallTaskItem":"pzaRiderFallTaskItem"}],pzaRiderFallView:[function(e,a,t){"use strict";cc._RF.push(a,"0dd79O3TzVNKL04LQPeDi1x","pzaRiderFallView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Battle/Data/pzaDropType"),p=e("../Common/pzaGameManager"),l=e("../Common/pzaGamePropConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaRewardManager"),u=e("../Common/pzaSpriteFrameManager"),d=e("../Common/pzaStatisticsMgr"),h=e("../Common/pzaTipManager"),m=e("../Common/pzaUIManager"),f=e("../Common/pzaUtil"),z=e("../Common/pzaWorldEventManager"),y=e("../Load/pzaPreLoadManager"),g=e("../LoginRewardView/pzaExchangeView"),v=e("../LoginRewardView/pzaLoginRewardMgr"),b=e("../LoginRewardView/pzaLoginRiderHelpView"),P=e("../utils/pzaChannel"),C=e("../utils/pzakc"),E=e("../View/Battle/pzaNewPlantView"),S=e("../View/pzaEggAniView"),_=cc._decorator,D=_.ccclass,M=_.property,w=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.node_summonAd=null,a.node_SummonTen=null,a.node_SummonOne=null,a.btn_help=null,a.lab_piece=null,a.btn_exchange=null,a.lab_riderFallCoin=null,a.node_try=null,a.red_summonOne=null,a.red_summonTen=null,a.red_try=null,a.img_rider=null,a.lab_countDown=null,a.lab_tips=null,a.riderPieceNum=200,a.ridefallParentView=null,a}return n(a,e),a.prototype.onEnable=function(){d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:12}),s.pzaLocalData.riderFallLeftDay<=0?this.lab_countDown.string=C.default.getActivityCloseTime(1)+"\u540e\u5165\u53e3\u5173\u95ed":this.lab_countDown.string="\u7ed3\u675f\u65f6\u95f4:"+C.default.getLeaveDay(s.pzaLocalData.riderFallLeftTime),this.node_summonAd.on(cc.Node.EventType.TOUCH_END,this.summonByAd,this),this.node_SummonTen.on(cc.Node.EventType.TOUCH_END,this.summonByTenCoin,this),this.node_SummonOne.on(cc.Node.EventType.TOUCH_END,this.summonByOneCoin,this),this.node_try.on(cc.Node.EventType.TOUCH_END,this.clickTry,this),this.btn_exchange.on(cc.Node.EventType.TOUCH_END,this.clickExchange,this),this.btn_help.on(cc.Node.EventType.TOUCH_END,this.clickHelp,this),s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]||(s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]=0,s.pzaLocalData.addDirty("riderPieceAmounts")),this.lab_piece.string=s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]+"";var e=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.HERO_ACTIVITY_COIN),a=0;e>0&&(a=s.pzaLocalData.data.beltRiderCoin[""+e]||0),this.lab_riderFallCoin.string=a+"",this.refreshRedTip(),this.refreshAdSummon(),this.refreshRiderPieceImg()},a.prototype.bindData=function(e){this.ridefallParentView=e},a.prototype.refreshRiderPieceImg=function(){u.pzaSpriteFrameManager.loadPlantCard(s.pzaLocalData.riderPieceType,this.img_rider)},a.prototype.onDisable=function(){this.node_summonAd.off(cc.Node.EventType.TOUCH_END,this.summonByAd,this),this.node_SummonTen.off(cc.Node.EventType.TOUCH_END,this.summonByTenCoin,this),this.node_SummonOne.off(cc.Node.EventType.TOUCH_END,this.summonByOneCoin,this),this.btn_exchange.off(cc.Node.EventType.TOUCH_END,this.clickExchange,this),this.node_try.off(cc.Node.EventType.TOUCH_END,this.clickTry,this),this.btn_help.off(cc.Node.EventType.TOUCH_END,this.clickHelp,this)},a.prototype.refreshAdSummon=function(){var e=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.HERO_ACTIVITY_COIN),a=0;e>0&&(a=s.pzaLocalData.data.beltRiderCoin[""+e]||0),a>0?(this.node_summonAd.parent.active=!1,this.node_SummonOne.parent.active=!0):(this.node_summonAd.parent.active=!0,this.node_SummonOne.parent.active=!1)},a.prototype.refreshRedTip=function(){var e=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.HERO_ACTIVITY_COIN),a=0;e>0&&(a=s.pzaLocalData.data.beltRiderCoin[""+e]||0),a>=10?(this.red_summonTen.active=!0,cc.tween(this.red_summonTen).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()):this.red_summonTen.active=!1,a>=0?(this.red_summonOne.active=!0,cc.tween(this.red_summonOne).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()):this.red_summonOne.active=!1,s.pzaLocalData.data.riderFallTry?(this.red_try.active=!0,cc.tween(this.red_try).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()):this.red_try.active=!1;var t=s.pzaLocalData.data.ownPlants.includes(s.pzaLocalData.riderPieceType);this.lab_tips.string=t?"\u9a91\u58eb\u5df2\u83b7\u53d6":this.riderPieceNum+"\u788e\u7247\u81ea\u52a8\u5408\u6210\u5229\u7ef4\u65af\xb7\u7834\u58f3\u66b4\u9f99"},a.prototype.showEggAni=function(e,a){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.EGGANI_VIEW,function(t){t.getComponent(S.pzaEggAniView).setView(e,a)})},a.prototype.summonByAd=function(){var e=this;P.pzaChannel.instance().showVideo({sucCall:function(){e.showEggAni(1,function(){e.summonPiece(1)})},failCall:function(){},endCall:function(){},posName:"\u9a91\u58eb\u964d\u4e34\u5e7f\u544a\u53ec\u5524",adsid:"24"})},a.prototype.summonByTenCoin=function(){var e=this,a=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.HERO_ACTIVITY_COIN),t=0;a>0&&(t=s.pzaLocalData.data.beltRiderCoin[""+a]||0),t<10&&!1===P.pzaChannel.isConfRemote?h.pzaTipManager.showHomeTip("\u6d3b\u52a8\u62bd\u5956\u4ee3\u5e01\u4e0d\u8db3",null,2):this.showEggAni(10,function(){s.pzaLocalData.data.beltRiderCoin[""+a]=t-10,s.pzaLocalData.addDirty("beltRiderCoin"),e.summonPiece(10),e.lab_riderFallCoin.string=s.pzaLocalData.data.beltRiderCoin[""+a]+"",e.refreshRedTip(),e.refreshAdSummon()})},a.prototype.summonByOneCoin=function(){var e=this,a=s.pzaLocalData.getPlantIdByActivityRewardId(l.pzaGamePropEnum.HERO_ACTIVITY_COIN),t=0;a>0&&(t=s.pzaLocalData.data.beltRiderCoin[""+a]||0),t<1?h.pzaTipManager.showHomeTip("\u6d3b\u52a8\u62bd\u5956\u4ee3\u5e01\u4e0d\u8db3",null,2):this.showEggAni(1,function(){s.pzaLocalData.data.beltRiderCoin[""+a]=t-1,s.pzaLocalData.addDirty("beltRiderCoin"),e.summonPiece(1),e.lab_riderFallCoin.string=s.pzaLocalData.data.beltRiderCoin[""+a]+"",e.refreshRedTip(),e.refreshAdSummon()})},a.prototype.summonPiece=function(e){var a=this;void 0===e&&(e=1),d.pzaStatisticsMgr.sendEvent("System",{name:"activity",value:8});for(var t=[],o=function(){var e=[],a=[];v.default.instance().riderFallPieceMap.forEach(function(t,o){0==s.pzaLocalData.data.riderFallPrizeAmounts[o-1]?e.push(0):e.push(t.weight),a.push(o)}),C.default.log("\u9a91\u58eb\u964d\u4e34\u7269\u54c1\u6743\u91cd: ",e);var o=f.pzaUtil.getRandomIndexByWeight(e),n=a[o],i=v.default.instance().riderFallPieceMap.get(n);s.pzaLocalData.data.riderFallPrizeAmounts[o]-=1,s.pzaLocalData.addDirty("riderFallPrizeAmounts"),C.default.log("\u53ec\u5524\u5956\u52b1\u7c7b\u578b: ",i,o);for(var r=0,p=0;p<s.pzaLocalData.data.riderFallPrizeAmounts.length;p++)r+=s.pzaLocalData.data.riderFallPrizeAmounts[p];r<=0&&v.default.instance().resetRiderFallPrizeAmounts();var c=new l.pzaRewardPropData(i.rewardType,i.amount);i.rewardType==l.pzaGamePropEnum.RIDER_PIECE&&(c.riderId=s.pzaLocalData.riderPieceType),t.push(c)},n=0;n<e;n++)o();c.pzaRewardManager.recieveRewards(t,function(){a.lab_piece.string=s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]+"",s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]>=a.riderPieceNum&&s.pzaLocalData.data.ownPlants.indexOf(s.pzaLocalData.riderPieceType)<0&&a.changeRider()})},a.prototype.changeRider=function(){var e=this,a=[],t=new l.pzaRewardPropData(l.pzaGamePropEnum.PROP_PLANTE,s.pzaLocalData.riderPieceType);a.push(t),c.pzaRewardManager.recieveRewards(a,function(){s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]-=e.riderPieceNum,s.pzaLocalData.addDirty("riderPieceAmounts"),e.lab_piece.string=s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]+""},!1,null,!1),m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.NEW_PLANT_VIEW,function(e){(e&&e.getComponent(E.pzaNewPlantView)).showView(r.pzaDropType.PLANT_CARD,s.pzaLocalData.riderPieceType,!1)})},a.prototype.clickTry=function(){s.pzaLocalData.data.riderFallTry&&(s.pzaLocalData.data.riderFallTry=!1,s.pzaLocalData.addDirty("riderFallTry"),this.refreshRedTip()),p.pzaGameManager.removeBattleUI(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),m.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(p.pzaGameManager.getGameMode(100,1),100,1),this.ridefallParentView.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.JUMP_VIEW,"challenge")},a.prototype.clickHelp=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.RIDERHELP_VIEW,function(e){(e&&e.getComponent(b.default)).bindData(2)})},a.prototype.clickExchange=function(){var e=this;m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.EXCHANGE_VIEW,function(a){var t=a&&a.getComponent(g.default);t.bindData(2),t.setCloseCall(function(){e.lab_piece.string=s.pzaLocalData.data.riderPieceAmounts[""+s.pzaLocalData.riderPieceType]+""})})},i([M({displayName:"\u770b\u5e7f\u544a\u53ec\u5524",type:cc.Node})],a.prototype,"node_summonAd",void 0),i([M({displayName:"\u4ee3\u5e0110\u6b21\u53ec\u5524",type:cc.Node})],a.prototype,"node_SummonTen",void 0),i([M({displayName:"\u4ee3\u5e011\u6b21\u53ec\u5524",type:cc.Node})],a.prototype,"node_SummonOne",void 0),i([M({displayName:"\u5e2e\u52a9\u6309\u94ae",type:cc.Node})],a.prototype,"btn_help",void 0),i([M({displayName:"\u73b0\u6709\u788e\u7247",type:cc.Label})],a.prototype,"lab_piece",void 0),i([M({displayName:"\u788e\u7247\u5151\u6362\u6309\u94ae",type:cc.Node})],a.prototype,"btn_exchange",void 0),i([M({displayName:"\u73b0\u6709\u6d3b\u52a8\u4ee3\u5e01Lab",type:cc.Label})],a.prototype,"lab_riderFallCoin",void 0),i([M({displayName:"\u8bd5\u73a9\u6309\u94ae",type:cc.Node})],a.prototype,"node_try",void 0),i([M({displayName:"\u53ec\u55241\u6b21\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"red_summonOne",void 0),i([M({displayName:"\u53ec\u552410\u6b21\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"red_summonTen",void 0),i([M({displayName:"\u8bd5\u73a9\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],a.prototype,"red_try",void 0),i([M({displayName:"\u9a91\u58eb\u56fe\u7247",type:cc.Sprite})],a.prototype,"img_rider",void 0),i([M({displayName:"\u6d3b\u52a8\u7ed3\u675f\u65f6\u95f4",type:cc.Label})],a.prototype,"lab_countDown",void 0),i([M({type:cc.Label})],a.prototype,"lab_tips",void 0),i([D],a)}(cc.Component);t.default=w,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../LoginRewardView/pzaExchangeView":"pzaExchangeView","../LoginRewardView/pzaLoginRewardMgr":"pzaLoginRewardMgr","../LoginRewardView/pzaLoginRiderHelpView":"pzaLoginRiderHelpView","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../View/pzaEggAniView":"pzaEggAniView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc"}],pzaRoofPreEffect:[function(e,a,t){"use strict";cc._RF.push(a,"cc08fOhbu9MfoyNMOPOI8P3","pzaRoofPreEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRoofPreEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tree=null,a.treeOcclusionImgs=[],a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.tree.stopAllActions(),p.pzaGameState.isNightScene?this.tree.getComponent(cc.Sprite).spriteFrame=this.treeOcclusionImgs[1]:this.tree.getComponent(cc.Sprite).spriteFrame=this.treeOcclusionImgs[0],this.tree.setPosition(cc.v2(796,-17))},a.prototype.showTree=function(){this.tree.stopAllActions(),this.tree.setPosition(cc.v2(-1200,-17)),this.tree.runAction(cc.moveTo(1.5,cc.v2(796,-17)).easing(cc.easeCubicActionOut()))},a.prototype.hideTree=function(){this.tree.stopAllActions(),this.tree.setPosition(cc.v2(796,-17)),this.tree.runAction(cc.moveTo(1.5,cc.v2(-1200,-17)).easing(cc.easeCubicActionOut()))},i([c({displayName:"\u6811",type:cc.Node})],a.prototype,"tree",void 0),i([c({displayName:"\u6811\u906e\u6321",type:[cc.SpriteFrame]})],a.prototype,"treeOcclusionImgs",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaRoofPreEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaRotateBullet:[function(e,a,t){"use strict";cc._RF.push(a,"85830j47eFFJb5jMljzmpXE","pzaRotateBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaRotateBullet=void 0;var r=e("./pzaBaseBullet"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.updateMove=function(a){e.prototype.updateMove.call(this,a)},i([l],a)}(r.pzaBaseBullet));t.pzaRotateBullet=s,cc._RF.pop()},{"./pzaBaseBullet":"pzaBaseBullet"}],pzaSaveView:[function(e,a,t){"use strict";cc._RF.push(a,"cacb6kS7VhEgZEyI4PwrDDj","pzaSaveView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSaveView=void 0;var r=e("../Common/pzaCommonPopView"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaStatisticsMgr"),u=e("../Common/pzaUIManager"),d=e("../Common/pzaUtil"),h=e("../Load/pzaPreLoadManager"),m=e("../utils/pzaChannel"),f=e("../utils/pzakc"),z=e("./pzaCommonMask"),y=e("./pzaWarningView"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.remoteTime=null,a.remotePart=null,a.remoteCoin=null,a.localTime=null,a.localPart=null,a.localCoin=null,a.deleteBtn=null,a.unlockChapter=null,a.saveBtn=null,a.remoteReadBtn=null,a.localReadBtn=null,a.remoteAd=null,a.saveAd=null,a.remoteTimeNode=null,a.remoteProNode=null,a.refreshOrReadLab=null,a.errTip=null,a.remoteData=null,a.canRefresh=!1,a}return n(a,e),a.prototype.init=function(e){m.pzaChannel.instance().showInter(),this.canRefresh=!1,this.remoteData=null,this.remoteData=e,this.localTime.string=d.pzaUtil.formatDateTime(l.pzaLocalData.data.saveTime),this.localPart.string="\u4e00\u5468\u76ee "+l.pzaLocalData.data.curChapter+"-"+l.pzaLocalData.data.curPart,l.pzaLocalData.data.curChapter>5&&(this.localPart.string="\u4e8c\u5468\u76ee "+(l.pzaLocalData.data.curChapter-5)+"-"+l.pzaLocalData.data.curPart),this.localCoin.string=d.pzaUtil.getCurrencyStr(l.pzaLocalData.data.coin),null==e?(this.remoteTime.string="\u65e0",this.remotePart.string="",this.remoteCoin.string=""):(this.remoteTime.string=d.pzaUtil.formatDateTime(e.saveTime),this.remotePart.string="\u4e00\u5468\u76ee "+e.curChapter+"-"+e.curPart,e.curChapter>5&&(this.remotePart.string="\u4e8c\u5468\u76ee "+(e.curChapter-5)+"-"+e.curPart),this.remoteCoin.string=d.pzaUtil.getCurrencyStr(e.coin)),this.remoteTimeNode.active=!0,this.remoteProNode.active=!0,this.saveAd.active=!1,this.remoteAd.active=!1,this.localReadBtn.active=!1,this.remoteReadBtn.active=!0,this.saveBtn.active=!0,l.pzaLocalData.data.readGameDataCnt>0&&(this.remoteAd.active=!0),this.errTip.node.active=!1,this.refreshOrReadLab.string="\u8bfb\u53d6","noAD"==m.pzaChannel.instance().channel?(this.saveBtn.active=!1,this.remoteReadBtn.active=!1,this.unlockChapter.active=m.pzaChannel.instance().getChannel().isWhite,this.saveBtn.active=!0,this.remoteReadBtn.active=!0,this.unlockChapter.active=!0):(this.deleteBtn.active=m.pzaChannel.isConfRemote,this.unlockChapter.active=m.pzaChannel.isConfRemote)},a.prototype.gameInit=function(e){this.canRefresh=!0,this.remoteData=null,this.remoteAd.active=!1,this.deleteBtn.active=!1,this.saveBtn.active=!1,this.remoteReadBtn.active=!0,this.localReadBtn.active=!0,this.remoteData=e,this.localTime.string=d.pzaUtil.formatDateTime(l.pzaLocalData.data.saveTime),this.localPart.string="\u4e00\u5468\u76ee "+l.pzaLocalData.data.curChapter+"-"+l.pzaLocalData.data.curPart,this.localCoin.string=d.pzaUtil.getCurrencyStr(l.pzaLocalData.data.coin),this.remoteTimeNode.active=!1,this.remoteProNode.active=!1,this.refreshOrReadLab.string="\u5237\u65b0",this.errTip.node.active=!0},a.prototype.clickReadLocal=function(){var e=this;u.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(y.pzaWarningView);t&&t.show("\u8bfb\u53d6\u672c\u5730\u5b58\u6863\u4f1a\u8986\u76d6\u4e91\u7aef\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u8bfb\u53d6","\u53d6\u6d88",function(){f.default.sendMsg("readGameData");var a=m.pzaChannel.instance().getChannel();m.pzaChannel.saveToRemote(a.channelUserId,l.pzaLocalData.data,!0),e.close()},null,"")})},a.prototype.clickReadRemote=function(){var e=this;if(this.canRefresh){z.pzaCommonMask.showMask();var a=m.pzaChannel.instance().getChannel();m.pzaChannel.loadFromRemote(a.channelUserId,function(a,t){a?z.pzaCommonMask.hideMask():(z.pzaCommonMask.hideMask(),e.init(t))})}else{var t=!!this.remoteAd.active;c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"14"},{name:"adname",value:"\u6e38\u620f\u5b58\u8bfb\u6863"}),u.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(a){var o=a&&a.getComponent(y.pzaWarningView);o&&o.show("\u8bfb\u53d6\u4e91\u7aef\u5b58\u6863\u4f1a\u8986\u76d6\u672c\u5730\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u8bfb\u53d6","\u53d6\u6d88",function(){var a=function(){l.pzaLocalData.parseFromData(e.remoteData),l.pzaLocalData.localSaveData(),f.default.sendMsg("readGameData"),l.pzaLocalData.data.readGameDataCnt=1,l.pzaLocalData.addDirty("readGameDataCnt"),e.close()};t?m.pzaChannel.instance().showVideo({sucCall:a,failCall:function(){},endCall:function(){},posName:"\u6e38\u620f\u5b58\u8bfb\u6863",adsid:"14"}):a()},null,"\u8b66\u544a",t)})}},a.prototype.clickSave=function(){var e=this;s.pzaSoundManager.playSFX(),this.saveAd.active,u.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(y.pzaWarningView);t&&t.show("\u4fdd\u5b58\u672c\u5730\u5b58\u6863\u4f1a\u8986\u76d6\u4e91\u7aef\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u4fdd\u5b58","\u53d6\u6d88",function(){(function(){l.pzaLocalData.data.saveGameDataCnt=1,l.pzaLocalData.addDirty("saveGameDataCnt");var a=m.pzaChannel.instance().getChannel();m.pzaChannel.saveToRemote(a.channelUserId,l.pzaLocalData.data,!0),e.close()})()},null,"\u8b66\u544a",!1)})},a.prototype.clickUnlockChapter=function(){s.pzaSoundManager.playSFX(),l.pzaLocalData.unlockChapter(),f.default.sendMsg("readGameData"),this.close()},a.prototype.clickClose=function(){var e=this;s.pzaSoundManager.playSFX(),this.canRefresh?u.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(y.pzaWarningView);t&&t.show("\u786e\u5b9a\u4ee5\u672c\u5730\u5b58\u6863\u8fdb\u5165\u6e38\u620f","\u786e\u8ba4","\u53d6\u6d88",function(){e.close()},null,"\u8b66\u544a")}):this.close()},a.prototype.clickDelete=function(){s.pzaSoundManager.playSFX(),l.pzaLocalData.clearData();var e=new l.pzaLocalData,a=m.pzaChannel.instance().getChannel();m.pzaChannel.saveToRemote(a.channelUserId,e),this.close()},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u4e91\u7aef\u8fdb\u5ea6\u65f6\u95f4",type:cc.Label})],a.prototype,"remoteTime",void 0),i([b({displayName:"\u4e91\u7aef\u5173\u5361\u8fdb\u5ea6",type:cc.Label})],a.prototype,"remotePart",void 0),i([b({displayName:"\u4e91\u7aef\u91d1\u5e01",type:cc.Label})],a.prototype,"remoteCoin",void 0),i([b({displayName:"\u672c\u5730\u8fdb\u5ea6\u65f6\u95f4",type:cc.Label})],a.prototype,"localTime",void 0),i([b({displayName:"\u672c\u5730\u5173\u5361\u8fdb\u5ea6",type:cc.Label})],a.prototype,"localPart",void 0),i([b({displayName:"\u672c\u5730\u91d1\u5e01",type:cc.Label})],a.prototype,"localCoin",void 0),i([b({displayName:"\u6e05\u6570\u636e\u6309\u94ae",type:cc.Node})],a.prototype,"deleteBtn",void 0),i([b({displayName:"\u5f00\u653e\u5173\u5361",type:cc.Node})],a.prototype,"unlockChapter",void 0),i([b({displayName:"\u4fdd\u5b58\u6309\u94ae",type:cc.Node})],a.prototype,"saveBtn",void 0),i([b({displayName:"\u8fdc\u7a0b\u8bfb\u53d6",type:cc.Node})],a.prototype,"remoteReadBtn",void 0),i([b({displayName:"\u672c\u5730\u8bfb\u53d6",type:cc.Node})],a.prototype,"localReadBtn",void 0),i([b({displayName:"\u8fdc\u7a0b\u8bfb\u53d6\u89c6\u9891\u6807\u8bc6",type:cc.Node})],a.prototype,"remoteAd",void 0),i([b({displayName:"\u4fdd\u5b58\u89c6\u9891\u6807\u8bc6",type:cc.Node})],a.prototype,"saveAd",void 0),i([b({displayName:"\u8fdc\u7aef\u65f6\u95f4\u8282\u70b9",type:cc.Node})],a.prototype,"remoteTimeNode",void 0),i([b({displayName:"\u8fdc\u7aef\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],a.prototype,"remoteProNode",void 0),i([b({displayName:"\u5237\u65b0\u6216\u8005\u8bfb\u53d6",type:cc.Label})],a.prototype,"refreshOrReadLab",void 0),i([b({displayName:"\u8bfb\u53d6\u4e91\u7aef\u5931\u8d25\u63d0\u793a",type:cc.Label})],a.prototype,"errTip",void 0),i([v],a)}(r.default);t.pzaSaveView=P,cc._RF.pop()},{"../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaScaredyShroom:[function(e,a,t){"use strict";cc._RF.push(a,"5b53daDLMZBKa9zrcCsOB5E","pzaScaredyShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaScaredyShroom=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.hiding=!1,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.hiding=!1,a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):this.playNormalAni(),c.pzaGameState.useShroom=!0,c.pzaGameState.onlyBoomPlant=!1},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this)))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=window.pzazombieManager.findFixRangeZombies(e.baseData.logicPos,1.5*c.pzaGameState.map.getBlockWidth());if(!(null!=t&&t.length>0))return e.hiding?(e.hiding=!1,void e.animation.playAnimation("scared2",!1,a)):window.pzazombieManager.hasCanAttackZombie(e.baseData)?(l.pzaSoundManager.playAudio("ScaredyShroomAtk"),void e.animation.playAnimation("attack",!1,a,function(){e.shoot()})):void e.animation.playAnimation("idle",!1,a);e.hiding?e.animation.playAnimation("scared_idle",!1,a):(e.hiding=!0,e.animation.playAnimation("scared1",!1,a))};a()},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0),this.getBulletAni());var i=c.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*c.pzaGameState.map.getBlockWidth())}}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([h],a)}(u.pzaBasePlant);t.pzaScaredyShroom=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaScreenDoorZombie:[function(e,a,t){"use strict";cc._RF.push(a,"380c7Jm5iRIh58Mj/TsP22t","pzaScreenDoorZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaScreenDoorZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaBuffData"),l=e("../Data/pzaZombieEnum"),s=e("../Plant/pzaAttackType"),c=e("./pzaNormalZombie"),u=e("./pzaZombieSlot"),d=e("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName="zombie_head_1",a.equip1Slot=u.pzaZombieSlotType.door,a.directThrowHurt=!0,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[u.pzaZombieSlotType.door,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.door).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.door+"1",.4,-11.81)).addState(new u.pzaZombieSlotAtt(2,u.pzaZombieSlotType.door+"2",.4,-11.81)).addState(new u.pzaZombieSlotAtt(3,u.pzaZombieSlotType.door+"3",.4,-12.81))]])},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=l.pzaZombieHurtCate.PENETRATE_HURT},a.prototype.equipDeath=function(){switch(e.prototype.equipDeath.call(this,!1),this.zombieState){case d.pzaZombieState.STAY:this.playStayAnimation();break;case d.pzaZombieState.MOVE:this.playMoveAnimation();break;case d.pzaZombieState.EAT_ATK:var a=this.findTarget();null==a||a.isDead?this.playMoveAnimation():this.playAttakAnimation()}this.baseData.buffData.removeBuff(p.pzaBuffType.IMM_ICE_PEA)},a.prototype.zombieHurtSound=function(a){this.hasEquip&&a!=s.pzaAttackType.PENETRATE?r.pzaSoundManager.playAudio("screenHurt"):e.prototype.zombieHurtSound.call(this,a)},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([m],a)}(c.pzaNormalZombie));t.pzaScreenDoorZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaSeaShroom:[function(e,a,t){"use strict";cc._RF.push(a,"5796ctByRNPe78i2kmko1Pi","pzaSeaShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSeaShroom=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.sleeping?(this.sleep(),this.animation.playAnimation("idle",!0,null,null,0)):this.playNormalAni(),c.pzaGameState.useShroom=!0,c.pzaGameState.onlyBoomPlant=!1,c.pzaGameState.usePondPlant=!0},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a)},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.playNormalAni())},a.prototype.playNormalAni=function(){var e=this,a=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData,3))return l.pzaSoundManager.playAudio("SeaShroomAtk"),void e.animation.playAnimation("attack",!1,a,function(){e.shoot()});e.animation.playAnimation("idle",!1,a)};a()},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(s.pzaBaseBullet);null!=n&&n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0),this.getBulletAni())}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([h],a)}(u.pzaBasePlant);t.pzaSeaShroom=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaShadowEffect:[function(e,a,t){"use strict";cc._RF.push(a,"5a5631Pu8pMi7fB/Bp6K4iY","pzaShadowEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShadowEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shadowSp=null,a.poolPrefab=null,a}return n(a,e),a.prototype.init=function(a,t,o){void 0===t&&(t=cc.v2(0,30)),void 0===o&&(o=1),e.prototype.bindData.call(this,a),this.shadowSp.stopAllActions(),null!=t&&this.shadowSp.setPosition(t),this.shadowSp.scale=o,this.showShadow(),this.updatePos()},a.prototype.update=function(){null!=this.baseData&&(this.baseData.isDead||this.baseData.hp<=0?this.close():this.updatePos())},a.prototype.pauseSelf=function(){this.shadowSp.pauseAllActions()},a.prototype.resumeSelf=function(){this.shadowSp.resumeAllActions()},a.prototype.updatePos=function(){null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY+this.baseData.offsetY))},a.prototype.followMove=function(e){e&&this.node&&this.node.setPosition(e)},a.prototype.hideShadow=function(){this.shadowSp.active=!1},a.prototype.showShadow=function(){this.shadowSp&&(this.shadowSp.active=!0)},a.prototype.scaleShadow=function(e,a){this.shadowSp.runAction(cc.scaleTo(e,a))},a.prototype.changeOffset=function(e){void 0===e&&(e=cc.v2(0,30)),null!=e&&this.shadowSp.setPosition(e)},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5f71\u5b50\u56fe",type:cc.Node})],a.prototype,"shadowSp",void 0),i([c(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaShadowEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaShareGiftConfig:[function(e,a,t){"use strict";cc._RF.push(a,"10176WQUUxB6YSqxxOpgxH0","pzaShareGiftConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShareGiftConfig=void 0;var o=e("./pzaGamePropConfig"),n=function(){function e(e,a,t){this.index=0,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.index=e,this.rewardType=a,this.rewardCount=t}return e.initGiftConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var o=parseInt(a.iD),n=new e(o,parseInt(a.rewardType),parseInt(a.rewardValue));t.ShareGiftConfigMap.set(o,n)}})},e.act="share_gift",e.ShareGiftConfigMap=new Map,e}();t.pzaShareGiftConfig=n,cc._RF.pop()},{"./pzaGamePropConfig":"pzaGamePropConfig"}],pzaShareGiftJar:[function(e,a,t){"use strict";cc._RF.push(a,"6ad9fmS+35NobPzmEvJo8an","pzaShareGiftJar");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShareGiftJar=void 0;var r=e("../Common/pzaLocalData"),p=e("../Common/pzaSpriteFrameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jar=null,a.jarFrames=[],a.headIcon=null,a.whileIcon=null,a.canBang=!1,a.curAvatarUrl=null,a}return n(a,e),a.prototype.init=function(e,a,t){var o=this;this.curAvatarUrl=t,null==t||""==t?null!=a?(p.pzaSpriteFrameManager.showDefaultHead(this.headIcon),this.whileIcon.active=!0):this.headIcon.spriteFrame=null:(this.headIcon.spriteFrame=null,p.pzaSpriteFrameManager.showPlayerHeadImage(t,function(e,a){o.curAvatarUrl==e&&(o.headIcon.spriteFrame=a,o.whileIcon.active=!0)}));var n=null!=r.pzaLocalData.data.shareGiftRecIndex[e];this.jar.spriteFrame=n?this.jarFrames[1]:this.jarFrames[0],this.jar.node.getChildByName("symbol").active=!n,this.canBang=!n},a.prototype.bang=function(){this.jar.spriteFrame=this.jarFrames[1],this.jar.node.getChildByName("symbol").active=!1,this.canBang=!1},i([c({displayName:"\u7f50\u5b50",type:cc.Sprite})],a.prototype,"jar",void 0),i([c({displayName:"\u7f50\u5b50\u56fe",type:[cc.SpriteFrame]})],a.prototype,"jarFrames",void 0),i([c({displayName:"\u5934\u50cf",type:cc.Sprite})],a.prototype,"headIcon",void 0),i([c(cc.Node)],a.prototype,"whileIcon",void 0),i([s],a)}(cc.Component);t.pzaShareGiftJar=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaShareGiftView:[function(e,a,t){"use strict";cc._RF.push(a,"63728q69AlKXoxl35G3xnhW","pzaShareGiftView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShareGiftView=void 0;var r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaPlantEnum"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGamePropConfig"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaRewardManager"),d=e("../Common/pzaShareGiftConfig"),h=e("../Common/pzaStatisticsMgr"),m=e("../Common/pzaSoundManager"),f=e("../Common/pzaUtil"),z=e("../utils/pzaChannel"),y=e("./pzaCommonMask"),g=e("./pzaShareGiftJar"),v=e("./pzaShareRewardItem"),b=cc._decorator,P=b.ccclass,C=b.property,E=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.rewardItems=[],a.jars=[],a.proBar=null,a.shareTag=null,a.hammerTag=null,a.shareTxt=null,a.hammerShowNode=null,a.hammer=null,a.hammerTip=null,a.leftArrow=null,a.rightArrow=null,a.shareBtn=null,a.videoBtn=null,a.shareRedPoint=null,a.showBangJar=!1,a.finishCount=0,a}return n(a,e),a.prototype.onEnable=function(){this.videoBtn.active=!1,this.shareRedPoint.active=!1,c.pzaLocalData.isNoShareAct?(this.jars.forEach(function(e){e.node.getChildByName("head_mask").active=!1,e.node.getChildByName("head_bg").active=!1}),this.proBar.node.active=!1):(this.shareRedPoint.active=c.pzaLocalData.data.shareJarViewRedPoint,c.pzaLocalData.data.shareJarViewRedPoint=!1,c.pzaLocalData.addDirty("shareJarViewRedPoint")),this.hammerShowNode.on(cc.Node.EventType.TOUCH_START,this.touchHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_MOVE,this.moveHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_CANCEL,this.endHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_END,this.endHammer,this)},a.prototype.onDisable=function(){this.hammerShowNode.off(cc.Node.EventType.TOUCH_START,this.touchHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_MOVE,this.moveHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_CANCEL,this.endHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_END,this.endHammer,this)},a.prototype.init=function(e){h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:9});for(var a=1;a<=5;a++){var t=this.rewardItems[a-1];t&&t.init(a)}this.finishCount=e?e.length:0;var o=0;for(this.finishCount>0&&(this.finishCount>=5?o=1:(o=this.finishCount/5-.2)<0&&(o=0)),this.proBar.progress=o,a=0;a<5;a++){var n=this.jars[a];if(null!=n){var i=e&&e[a]&&e[a].avatar,r=e&&e[a]&&e[a].nickName;n.init(a,r,i)}}this.refreshBtn(),this.hammerShowNode.active=!1},a.prototype.clcikShare=function(){if(this.shareRedPoint.active=!1,m.pzaSoundManager.playSFX(),this.showBangJar||c.pzaLocalData.data.showBangJar)return this.hammerShowNode.active=!0,this.hammerTip.active=!0,this.hammer.angle=0,this.hammer.setPosition(cc.v2(44,-49)),void this.showArrowAni();z.pzaChannel.instance().shareAppMessage({title:"",act:d.pzaShareGiftConfig.act,adsid:"101"},function(){h.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:1},{name:"ShareR",value:1})},function(){h.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:1},{name:"ShareR",value:0})})},a.prototype.clickClose=function(){m.pzaSoundManager.playSFX(),l.pzaGameCommonPool.returnInstant(this.node)},a.prototype.touchHammer=function(e){this.hammerTip.active=!1,this.updateHammerPos(e,!1)},a.prototype.moveHammer=function(e){this.updateHammerPos(e,!1)},a.prototype.endHammer=function(e){this.updateHammerPos(e,!0)},a.prototype.updateHammerPos=function(e,a){var t=e&&e.getLocation(),o=this.hammerShowNode.convertToNodeSpaceAR(t),n=cc.misc.clampf(o.x+69,-261,480);this.hammer.setPosition(cc.v2(n,-49)),a&&this.bangJar(n)},a.prototype.showArrowAni=function(){cc.Tween.stopAllByTarget(this.leftArrow),cc.Tween.stopAllByTarget(this.rightArrow),this.leftArrow.scaleX=-.5,cc.tween(this.leftArrow).repeatForever(cc.tween().to(1,{scaleX:-1}).to(1,{scaleX:-.5})).start(),this.rightArrow.scaleX=.5,cc.tween(this.rightArrow).repeatForever(cc.tween().to(1,{scaleX:1}).to(1,{scaleX:.5})).start()},a.prototype.bangJar=function(e){var a=this,t=cc.misc.clampf(Math.floor((549-e)/170),0,4),o=this.jars[t];if(null==o||!o.canBang)return this.hammerShowNode.active=!0,this.hammerTip.active=!0,this.hammer.angle=0,this.hammer.setPosition(cc.v2(44,-49)),void this.showArrowAni();y.pzaCommonMask.showMask(),this.hammer.stopAllActions(),this.hammer.runAction(cc.sequence(cc.rotateTo(.2,20),cc.rotateTo(.1,-30),cc.callFunc(function(){a.hammerShowNode.active=!1,o.bang(),a.recieveReward(t),a.refreshBtn(),y.pzaCommonMask.hideMask()})))},a.prototype.recieveReward=function(e){var a=[];d.pzaShareGiftConfig.ShareGiftConfigMap.forEach(function(e,t){c.pzaLocalData.data.shareGiftRecIndex.includes(t)||a.push(e)});var t=f.pzaUtil.getRandomValueFromArray(a);if(null!=t){c.pzaLocalData.data.showBangJar=!1,c.pzaLocalData.data.shareGiftRecIndex[e]=t.index,c.pzaLocalData.addDirty("shareGiftRecIndex","showBangJar");for(var o=!0,n=0;n<5;n++)if(null==c.pzaLocalData.data.shareGiftRecIndex[n]){o=!1;break}if(o){var i=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,p.pzaPlantEnum.TWIN_SUNFLOWER);u.pzaRewardManager.recieveRewardData([i]),r.default.instance().obtainPlant()}var l=new s.pzaRewardPropData(t.rewardType,t.rewardCount);u.pzaRewardManager.recieveRewards([l],function(){if(o){var e=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,p.pzaPlantEnum.TWIN_SUNFLOWER);u.pzaRewardManager.recieveRewards([e],null,!0)}});var h=this.rewardItems[t.index-1];h&&h.recieve()}},a.prototype.refreshBtn=function(){this.showBangJar=!1;for(var e=!1,a=0,t=0;t<5;t++)null==c.pzaLocalData.data.shareGiftRecIndex[t]?e=!0:a++;if(!e)return this.shareBtn.active=!1,void(c.pzaLocalData.isNoShareAct&&(this.videoBtn.active=!1,this.hammer.active=!1));this.shareBtn.active=!0,this.showBangJar=this.finishCount>a,this.showBangJar?(this.shareTag.active=!1,this.hammerTag.active=!0,this.shareTxt.string="\u7838\u7f50\u5b50"):(this.shareTag.active=!0,this.hammerTag.active=!1,this.shareTxt.string="\u5206\u4eab"),c.pzaLocalData.data.showBangJar=this.showBangJar,c.pzaLocalData.addDirty("showBangJar"),c.pzaLocalData.isNoShareAct&&(c.pzaLocalData.data.showBangJar?(this.shareTag.active=!1,this.videoBtn.active=!1,this.hammerTag.active=!0,this.shareTxt.string="\u7838\u7f50\u5b50"):(this.shareTag.active=!1,this.videoBtn.active=!0,h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"13"},{name:"adname",value:"\u7838\u7f50\u5b50"})))},a.prototype.clickVideoBtn=function(){var e=this;z.pzaChannel.instance().showVideo({sucCall:function(){var a={nickName:"user"+Date.now(),avatar:""};c.pzaLocalData.data.showBangJar=!0,c.pzaLocalData.data.shareGiftArray.push(a),c.pzaLocalData.addDirty("shareGiftArray","showBangJar"),e.init(c.pzaLocalData.data.shareGiftArray),e.hammer.active=!0},failCall:function(){},endCall:function(){},posName:"\u7838\u7f50\u5b50",adsid:"13"})},i([C({displayName:"\u5956\u52b1items",type:[v.pzaShareRewardItem]})],a.prototype,"rewardItems",void 0),i([C({displayName:"\u5956\u52b1\u7f50\u5b50",type:[g.pzaShareGiftJar]})],a.prototype,"jars",void 0),i([C({displayName:"\u8fdb\u5ea6\u6761",type:cc.ProgressBar})],a.prototype,"proBar",void 0),i([C({displayName:"\u5206\u4eab\u6309\u94ae\u56fe",type:cc.Node})],a.prototype,"shareTag",void 0),i([C({displayName:"\u9524\u5b50\u6309\u94ae\u56fe",type:cc.Node})],a.prototype,"hammerTag",void 0),i([C({displayName:"\u5206\u4eab\u6309\u94ae\u6587\u5b57",type:cc.Label})],a.prototype,"shareTxt",void 0),i([C({displayName:"\u9524\u5b50\u663e\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"hammerShowNode",void 0),i([C({displayName:"\u9524\u5b50",type:cc.Node})],a.prototype,"hammer",void 0),i([C({displayName:"\u9524\u5b50\u63d0\u793a\u8282\u70b9",type:cc.Node})],a.prototype,"hammerTip",void 0),i([C({displayName:"\u7bad\u5934\u5de6",type:cc.Node})],a.prototype,"leftArrow",void 0),i([C({displayName:"\u7bad\u5934\u53f3",type:cc.Node})],a.prototype,"rightArrow",void 0),i([C({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],a.prototype,"shareBtn",void 0),i([C({displayName:"\u89c6\u9891\u6309\u94ae",type:cc.Node})],a.prototype,"videoBtn",void 0),i([C(cc.Node)],a.prototype,"shareRedPoint",void 0),i([P],a)}(cc.Component);t.pzaShareGiftView=E,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaShareGiftJar":"pzaShareGiftJar","./pzaShareRewardItem":"pzaShareRewardItem"}],pzaShareRewardItem:[function(e,a,t){"use strict";cc._RF.push(a,"eb89604ollH6a3w00CzIq9A","pzaShareRewardItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShareRewardItem=void 0;var r=e("../Common/pzaGameConfig"),p=e("../Common/pzaGamePropConfig"),l=e("../Common/pzaItemTips"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaShareGiftConfig"),u=e("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.recedNode=null,a.coinIcon=null,a.propName=null,a.propCount=null,a.propNode=null,a.sunNode=null,a.cherryBombNode=null,a.magnetNode=null,a}return n(a,e),a.prototype.init=function(e){this.sunNode=this.propNode.getChildByName("sunNode"),this.cherryBombNode=this.propNode.getChildByName("cherryBombNode"),this.magnetNode=this.propNode.getChildByName("magnetNode"),this.recedNode.active=s.pzaLocalData.data.shareGiftRecIndex.includes(e),this.propCount.node.active=!1;var a=c.pzaShareGiftConfig.ShareGiftConfigMap.get(e);if(null!=a)switch(this.coinIcon.node.active=!1,this.propNode.active=!1,this.sunNode.active=!1,this.cherryBombNode.active=!1,this.magnetNode.active=!1,this.node.addComponent(l.default).bindData(a.rewardType,a.rewardCount),a.rewardType){case p.pzaGamePropEnum.PROP_COIN:this.coinIcon.node.active=!0,this.propCount.node.active=!0,this.propCount.string="x"+a.rewardCount,this.propName.string="\u9a91\u58eb\u5e01";break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:case p.pzaGamePropEnum.PROP_AUTO_PICK:case p.pzaGamePropEnum.PROP_FREE_SUN:this.propCount.node.active=!0,this.propCount.string="x"+a.rewardCount,this.propNode.active=!0,a.rewardType==p.pzaGamePropEnum.PROP_CHERRY_BOMB?this.cherryBombNode.active=!0:a.rewardType==p.pzaGamePropEnum.PROP_AUTO_PICK?this.magnetNode.active=!0:a.rewardType==p.pzaGamePropEnum.PROP_FREE_SUN&&(this.sunNode.active=!0);var t=p.pzaGamePropConfig.PorpConfigMap.get(a.rewardType);null!=t&&(this.propName.string=""+t.propName);break;case p.pzaGamePropEnum.PROP_PLANTE:var o;(o=r.pzaGameConfig.getPlantConfig(a.rewardCount))&&(this.propName.string=""+o.name,this.coinIcon.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(a.rewardCount,this.coinIcon))}},a.prototype.recieve=function(){this.recedNode.active=!0},i([m({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],a.prototype,"recedNode",void 0),i([m({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],a.prototype,"coinIcon",void 0),i([m({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],a.prototype,"propName",void 0),i([m({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],a.prototype,"propCount",void 0),i([m({type:cc.Node})],a.prototype,"propNode",void 0),i([h],a)}(cc.Component);t.pzaShareRewardItem=f,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaItemTips":"pzaItemTips","../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaShopConfig:[function(e,a,t){"use strict";cc._RF.push(a,"d2b36zP1kZHN4M7r1NAkwvE","pzaShopConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShopConfig=t.pzaShopItemType=void 0;var o,n=e("../Battle/Data/pzaPlantEnum");(function(e){e[e.CARD_SLOT_7=1]="CARD_SLOT_7",e[e.CARD_SLOT_8=2]="CARD_SLOT_8",e[e.CARD_SLOT_9=3]="CARD_SLOT_9",e[e.POOL_CLEAN_CAR=4]="POOL_CLEAN_CAR",e[e.PITCHFORK=5]="PITCHFORK",e[e.ROOF_CART=6]="ROOF_CART",e[e.GATLING_PEA=7]="GATLING_PEA",e[e.TWIN_SUNFLOWER=8]="TWIN_SUNFLOWER",e[e.GLOOM_SHROOM=9]="GLOOM_SHROOM",e[e.CATTAIL=10]="CATTAIL",e[e.SPIKEROCK=11]="SPIKEROCK",e[e.WINTER_MELON=12]="WINTER_MELON",e[e.COB_CANNON=13]="COB_CANNON",e[e.IMITATER=14]="IMITATER",e[e.NUT_HEALING=15]="NUT_HEALING",e[e.MARIGOLD_FLOWERPOT=16]="MARIGOLD_FLOWERPOT",e[e.GOLD_KETTLE=17]="GOLD_KETTLE",e[e.FERTILIZER=18]="FERTILIZER",e[e.PESTICIDE=19]="PESTICIDE",e[e.JUKEBOX=20]="JUKEBOX",e[e.GLOVE=21]="GLOVE",e[e.SHROOM_GARDEN=22]="SHROOM_GARDEN",e[e.AQUARIUM=23]="AQUARIUM",e[e.WHEELBARROW=24]="WHEELBARROW",e[e.SNAIL=25]="SNAIL",e[e.FLOWER_SEED=26]="FLOWER_SEED",e[e.BRONZE_FLOWER_SEED=27]="BRONZE_FLOWER_SEED",e[e.SILVER_FLOWER_SEED=28]="SILVER_FLOWER_SEED",e[e.GOLD_FLOWER_SEED=29]="GOLD_FLOWER_SEED",e[e.BELT_SLOT1=30]="BELT_SLOT1",e[e.BELT_SLOT2=31]="BELT_SLOT2",e[e.BELT_SLOT3=32]="BELT_SLOT3",e[e.BELT_SLOT4=33]="BELT_SLOT4",e[e.WITCH_KNIGHT_BELT=34]="WITCH_KNIGHT_BELT",e[e.DAVE_COIN=100]="DAVE_COIN",e[e.GOLD_MAGNET=999]="GOLD_MAGNET"})(o=t.pzaShopItemType||(t.pzaShopItemType={}));var i=function(){function e(e,a,t,o,n,i){var r=this;this.itemType=null,this.price=0,this.desc=null,this.unlockChapter=0,this.unlockPart=0,this.buyRequestArr=[],this.itemType=e,this.price=a,this.desc=t,this.unlockChapter=o,this.unlockPart=n,null!=i&&i.split(",").forEach(function(e){var a=parseInt(e);r.buyRequestArr.push(a)})}return e.initShopConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var o=parseInt(a.id),n=parseInt(a.gold),i=a.desc,r=a.new,p=0,l=0,s=a.request;if(null!=r){var c=r.split("-");p=parseInt(c[0]),l=parseInt(c[1])}var u=new e(o,n,i,p,l,s);t.SHOP_CONFIG.set(o,u)}})},e.getPlantTypeByItem=function(e){switch(e){case o.GATLING_PEA:return n.pzaPlantEnum.GATLING_PEA;case o.TWIN_SUNFLOWER:return n.pzaPlantEnum.TWIN_SUNFLOWER;case o.GLOOM_SHROOM:return n.pzaPlantEnum.GLOOM_SHROOM;case o.CATTAIL:return n.pzaPlantEnum.CATTAIL;case o.SPIKEROCK:return n.pzaPlantEnum.SPIKEROCK;case o.GOLD_MAGNET:return n.pzaPlantEnum.GOLD_MAGNET;case o.WINTER_MELON:return n.pzaPlantEnum.WINTER_MELON;case o.COB_CANNON:return n.pzaPlantEnum.COB_CANNON;case o.IMITATER:return n.pzaPlantEnum.IMITATER}return null},e.getPlantPrice=function(e){var a=null;switch(e){case n.pzaPlantEnum.GATLING_PEA:a=o.GATLING_PEA;break;case n.pzaPlantEnum.TWIN_SUNFLOWER:a=o.TWIN_SUNFLOWER;break;case n.pzaPlantEnum.GLOOM_SHROOM:a=o.GLOOM_SHROOM;break;case n.pzaPlantEnum.CATTAIL:a=o.CATTAIL;break;case n.pzaPlantEnum.WINTER_MELON:a=o.WINTER_MELON;break;case n.pzaPlantEnum.GOLD_MAGNET:a=o.GOLD_MAGNET;break;case n.pzaPlantEnum.SPIKEROCK:a=o.SPIKEROCK;break;case n.pzaPlantEnum.COB_CANNON:a=o.COB_CANNON;break;case n.pzaPlantEnum.IMITATER:a=o.IMITATER;break;case n.pzaPlantEnum.SUPER_CHOMPER:a=o.COB_CANNON}if(e==n.pzaPlantEnum.SUPER_CHOMPER)return 100;if(e==n.pzaPlantEnum.BOOM_NUT)return 5e3;if(e==n.pzaPlantEnum.CAIWEN||e==n.pzaPlantEnum.FireBlover||e==n.pzaPlantEnum.LaserBean)return 1e4;if(null==a)return 3e3;var t=this.SHOP_CONFIG.get(a);return null==t?3e3:t.price},e.SHOP_CONFIG=new Map,e}();t.pzaShopConfig=i,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum"}],pzaShopDave:[function(e,a,t){"use strict";cc._RF.push(a,"b5b2cEuGkdC97sMnawdSsxr","pzaShopDave");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShopDave=void 0;var r=e("../Battle/Data/pzaGuideType"),p=e("../Common/pzaSoundManager"),l=e("../Common/pzaSpineController"),s=e("../Common/pzaUtil"),c=e("../Common/pzaWorldEventManager"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.dave=null,a.dialogNode=null,a.word=null,a.continueNode=null,a.words=null,a.dialogEndCall=null,a.idleDave=!1,a.allPlantDave=!1,a.idleWords=["\u6211\u4eec\u7684\u4ef7\u683c\u5f88\u5b9e\u60e0\u5427\uff01","\u6742\u8d27\u5e97\u7684\u5546\u54c1\u90fd\u5df2\u7ecf\u4e0a\u67b6\u4e86\uff01\uff01","\u8ba9\u6211\u4eec\u4e00\u8d77\u52aa\u529b\u5427\uff01","\u6709\u4ec0\u4e48\u9700\u6c42\u5c31\u8ddf\u6211\u8bf4\u54e6\u3002"],a.lastIdleWord=null,a.idleInterval=0,a.hideDialogTime=0,a.plantDaveIndex=0,a.canContinue=!1,a}return n(a,e),a.prototype.onEnable=function(){c.pzaWorldEventManager.addListener(c.pzaWorldEventType.HIDE_DAVE_DIALOG,this.hideDaveDialog,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.HIDE_DAVE_DIALOG,this.showDaveDialog,this)},a.prototype.onDisable=function(){c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.HIDE_DAVE_DIALOG,this.hideDaveDialog,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.HIDE_DAVE_DIALOG,this.showDaveDialog,this)},a.prototype.hideDaveDialog=function(){this.allPlantDave||this.hideNormalDave(!0)},a.prototype.showDaveDialog=function(){this.allPlantDave||this.showNormalDave(!1)},a.prototype.showGuideDave=function(e,a){var t=this;this.idleDave=!1,this.allPlantDave=!1,this.dialogNode.active=!1,this.words=e,this.dialogEndCall=a,this.continueNode.active=!0,this.canContinue=!1,this.dave.playAnimation(r.pzaDaveAni.into,!1,function(){t.dave.playAnimation(r.pzaDaveAni.normal,!0),t.dialogNode.active=!0,t.canContinue=!0,t.showNextWord()}),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.node._touchListener.setSwallowTouches(!1)},a.prototype.showNormalDave=function(e){var a=this;void 0===e&&(e=!0),this.idleDave=!0,this.allPlantDave=!1,this.dialogNode.active=!1,this.continueNode.active=!1,this.idleInterval=5,this.hideDialogTime=0,this.lastIdleWord=null,this.canContinue=!0,e&&this.dave.playAnimation(r.pzaDaveAni.into,!1,function(){a.dave.playAnimation(r.pzaDaveAni.normal,!0)})},a.prototype.hideNormalDave=function(e){this.dialogNode.active=!1,this.idleInterval=5,this.hideDialogTime=0,e&&(this.idleDave=!0)},a.prototype.showCrazyDave=function(){var e=this;this.idleDave=!1,this.allPlantDave=!1,this.dialogNode.active=!0,this.continueNode.active=!0,this.canContinue=!0,this.words=null,this.dialogEndCall=function(){e.idleDave=!0,e.dialogNode.active=!1,e.continueNode.active=!1,e.idleInterval=5,e.hideDialogTime=0,e.lastIdleWord=null,e.dave.playAnimation(r.pzaDaveAni.normal,!0)},this.dave.playAnimation(r.pzaDaveAni.normal,!0),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.node._touchListener.setSwallowTouches(!1)},a.prototype.showNutWord=function(){var e=this;this.dialogNode.active=!0,this.word.string="\u73b0\u5728\u53ef\u4ee5\u5728\u9632\u5fa1\u578b\u9a91\u58eb\u76f4\u63a5\u653e\u7f6e\u65b0\u7684\u540c\u7c7b\u578b\u9a91\u58eb\u4e86\uff01",this.lastIdleWord=null,this.idleInterval=10,this.hideDialogTime=5,this.playShortSound(),this.dave.playAnimation(r.pzaDaveAni.suggest,!1,function(){e.dave.playAnimation(r.pzaDaveAni.normal,!0)})},a.prototype.showAllPlantWord=function(){this.idleDave=!1,this.allPlantDave=!0,this.dialogNode.active=!0,this.continueNode.active=!1,this.words=null,this.dialogEndCall=null,this.idleInterval=0,this.plantDaveIndex=0,this.showPlantDaveWord(this.plantDaveIndex),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this)},a.prototype.update=function(e){this.allPlantDave?this.updatePlantDave(e):this.idleDave&&(this.idleInterval-=e,this.idleInterval<=0?this.showIdleWord():this.hideDialogTime<=0||(this.hideDialogTime-=e,this.hideDialogTime<=0&&(this.dialogNode.active=!1)))},a.prototype.updatePlantDave=function(e){this.idleInterval<=0||(this.idleInterval-=e,this.idleInterval<=0&&this.showPlantDaveWord(this.plantDaveIndex))},a.prototype.showPlantDaveWord=function(e){var a=this;if(e>=5)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),void this.showNormalDave(!1);var t=[1,1,1,2,2];this.word.string=["\u4f60\u521a\u521a\u4e70\u5230\u4e86\u6700\u540e\u4e00\n\u4e2a\u9a91\u58eb\u624b\u529e\uff01","\u4f60\u73b0\u5728\u8fbe\u6210\u5168\u9a91\u58eb\u5236\u9738\u4e86\uff01","\u8fd9\u6837\u4e00\u4e2a\u6210\u5c31\u603b\u5f97\u6709\u4e2a\u540d\u5b57\u5427\uff1f","\u6709\u4e86\xb7\xb7\xb7","\u9a91\u58eb\u8fbe\u4eba\uff01\uff01\uff01"][e],e<=3?(this.playShortSound(),this.dave.playAnimation(r.pzaDaveAni.normal_talk,!1,function(){a.idleInterval=t[e],a.dave.playAnimation(r.pzaDaveAni.normal,!0)})):(this.playShortSound(),this.idleInterval=t[e],this.dave.playAnimation(r.pzaDaveAni.normal,!0)),this.plantDaveIndex++},a.prototype.showIdleWord=function(){for(var e=this,a=[],t=0;t<this.idleWords.length;t++)this.idleWords[t]!=this.lastIdleWord&&a.push(this.idleWords[t]);var o=s.pzaUtil.getRandomValueFromArray(a);this.dialogNode.active=!0,this.word.string=o,this.lastIdleWord=o,this.idleInterval=10,this.hideDialogTime=5,this.playShortSound();var n=o.match("\u5546\u54c1")||o.match("\u9700\u6c42")?r.pzaDaveAni.suggest_talk:r.pzaDaveAni.normal_talk;this.dave.playAnimation(n,!1,function(){e.dave.playAnimation(r.pzaDaveAni.normal,!0)})},a.prototype.clickNextWord=function(){this.allPlantDave||this.canContinue&&this.showNextWord()},a.prototype.showNextWord=function(){var e=this;if(null==this.words)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.dialogNode.active=!1,void(this.dialogEndCall&&this.dialogEndCall());var a=this.words.shift();if(null==a)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.dialogNode.active=!1,void(this.dialogEndCall&&this.dialogEndCall());this.word.string=a.word,a.event&&a.event(),this.playShortSound(),this.dave.playAnimation(r.pzaDaveAni.normal_talk,!1,function(){e.dave.playAnimation(r.pzaDaveAni.normal,!0)})},a.prototype.playShortSound=function(){p.pzaSoundManager.playAudio("daveshort")},i([h({displayName:"\u6234\u592b\u52a8\u753b",type:l.pzaSpineController})],a.prototype,"dave",void 0),i([h({displayName:"\u5bf9\u8bdd\u6846",type:cc.Node})],a.prototype,"dialogNode",void 0),i([h({displayName:"\u6587\u5b57",type:cc.Label})],a.prototype,"word",void 0),i([h({displayName:"\u7ee7\u7eed",type:cc.Node})],a.prototype,"continueNode",void 0),i([d],a)}(cc.Component);t.pzaShopDave=m,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaShopItem:[function(e,a,t){"use strict";cc._RF.push(a,"945eaXxxrdJMqWmnEpN5n5u","pzaShopItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShopItem=void 0;var r=e("../Achieve/pzaAchieveMgr"),p=e("../Battle/Data/pzaGuideType"),l=e("../Battle/Data/pzaPlantEnum"),s=e("../Common/pzaBeltEquipConfig"),c=e("../Common/pzaGameCommonPool"),u=e("../Common/pzaGlobalMask"),d=e("../Common/pzaLocalData"),h=e("../Common/pzaShareGiftConfig"),m=e("../Common/pzaSpriteFrameManager"),f=e("../Common/pzaUIManager"),z=e("../Common/pzaUtil"),y=e("../Common/pzaWorldEventManager"),g=e("../Garden/pzaGardenMgr"),v=e("../Load/pzaPreLoadManager"),b=e("../Shop/pzaShopConfig"),P=e("../utils/pzaChannel"),C=e("../utils/pzakc"),E=e("./pzaBuyConfirmView"),S=e("./pzaShareGiftView"),_=cc._decorator,D=_.ccclass,M=_.property,w=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.price=null,a.specialAd=null,a.adCountPro=null,a.itemIcon=null,a.plantIcon=null,a.plantCardBoardFrames=[],a.soldNode=null,a.comingNode=null,a.itemName=null,a.itemCount=null,a.idName=null,a.coin=null,a.redpoint=null,a.itemPosArr=[cc.v2(99,85),cc.v2(216,85),cc.v2(333,85),cc.v2(450,85),cc.v2(59,-58),cc.v2(176,-58),cc.v2(293,-58),cc.v2(410,-58)],a.slotArr=[b.pzaShopItemType.BELT_SLOT1,b.pzaShopItemType.BELT_SLOT2,b.pzaShopItemType.BELT_SLOT3,b.pzaShopItemType.BELT_SLOT4],a.itemType=null,a.sold=!1,a.shopPos=null,a.coming=!1,a.view=null,a.newPrice=null,a.buyCall=null,a}return n(a,e),a.prototype.onEnable=function(){y.pzaWorldEventManager.addListener(y.pzaWorldEventType.GUIDE_FREE_SHOPITEM,this.reSetPrice,this)},a.prototype.onDisable=function(){y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.GUIDE_FREE_SHOPITEM,this.reSetPrice,this)},a.prototype.reSetPrice=function(e,a){this.itemType==e&&null!=a&&(this.price.string=a+"",this.newPrice=a,d.pzaLocalData.gardenGuiding&&e==b.pzaShopItemType.FERTILIZER&&null!=a&&0==a&&u.pzaGlobalMask.showOperaArea(this.node))},a.prototype.bindData=function(e,a,t,o,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=null),this.newPrice=null,this.view=e,a==b.pzaShopItemType.CARD_SLOT_7)if(7==d.pzaLocalData.data.plantSlotCount)a=b.pzaShopItemType.CARD_SLOT_8;else if(8==d.pzaLocalData.data.plantSlotCount)a=b.pzaShopItemType.CARD_SLOT_9;else if(d.pzaLocalData.data.plantSlotCount>=9)return m.pzaSpriteFrameManager.loadShopItemIcon(b.pzaShopItemType.CARD_SLOT_9,this.itemIcon),this.sold=!0,this.soldNode.active=!0,void(this.itemCount.node.active=!1);this.plantIcon.node.scale=1,this.itemType=a,this.coming=n,this.buyCall=i,this.shopPos=t+"-"+o;var r=this.itemPosArr[o];null!=r&&this.node.setPosition(r),this.showRedpointTips();var p=b.pzaShopConfig.SHOP_CONFIG.get(a);null!=p&&(this.coin.active=!0,a==b.pzaShopItemType.TWIN_SUNFLOWER?(this.price.node.active=!0,this.specialAd.active=!1,this.price.string="\u6d3b\u52a8\u83b7\u53d6","ks"!=P.pzaChannel.instance().channel&&"tt"!=P.pzaChannel.instance().channel||(this.price.node.active=!1,this.specialAd.active=!0,this.adCountPro.string="("+d.pzaLocalData.data.twinsFlowerAdCnt+"/2)",this.coin.active=!1)):a==b.pzaShopItemType.GATLING_PEA?(this.price.node.active=!1,this.specialAd.active=!0,this.adCountPro.string="("+d.pzaLocalData.data.gatlingAdCount+"/2)",this.coin.active=!1):(this.price.node.active=!0,this.specialAd.active=!1,this.price.string=z.pzaUtil.getCurrencyStr(p.price),d.pzaLocalData.gardenGuiding&&a==b.pzaShopItemType.FERTILIZER&&(this.price.string="0")),this.comingNode.active=this.coming,this.itemName.node.active=!1,this.itemCount.node.active=!1,this.itemIcon.node.scale=1,a!=b.pzaShopItemType.AQUARIUM&&a!=b.pzaShopItemType.SHROOM_GARDEN||(this.itemIcon.node.scale=.7),a>=b.pzaShopItemType.CARD_SLOT_7&&a<=b.pzaShopItemType.CARD_SLOT_9?(this.itemIcon.node.active=!0,this.plantIcon.node.active=!1,m.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon)):a<b.pzaShopItemType.GATLING_PEA||a>b.pzaShopItemType.IMITATER?(this.itemIcon.node.active=!0,a==b.pzaShopItemType.WITCH_KNIGHT_BELT&&(this.itemIcon.node.scale=.8),this.plantIcon.node.active=!1,this.slotArr.indexOf(a)>=0?C.default.log("\u63d2\u69fd\u5546\u54c1\u56fe\u7247\u4e0d\u663e\u793a"):m.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),a!=b.pzaShopItemType.FERTILIZER&&a!=b.pzaShopItemType.PESTICIDE||(this.itemCount.node.active=!0)):(this.itemIcon.node.active=!1,this.plantIcon.node.active=!0,m.pzaSpriteFrameManager.loadPlantWholeCard(b.pzaShopConfig.getPlantTypeByItem(a)+"",this.plantIcon)),this.idName.string="ID: "+b.pzaShopConfig.SHOP_CONFIG.get(a).itemType,this.refreshPurchasedState())},a.prototype.refreshPurchasedState=function(){switch(this.sold=!1,this.itemType){case b.pzaShopItemType.GATLING_PEA:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.GATLING_PEA);break;case b.pzaShopItemType.TWIN_SUNFLOWER:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.TWIN_SUNFLOWER);break;case b.pzaShopItemType.GLOOM_SHROOM:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.GLOOM_SHROOM);break;case b.pzaShopItemType.CATTAIL:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.CATTAIL);break;case b.pzaShopItemType.SPIKEROCK:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.SPIKEROCK);break;case b.pzaShopItemType.GOLD_MAGNET:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.GOLD_MAGNET),this.node.active=!1;break;case b.pzaShopItemType.WINTER_MELON:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.WINTER_MELON);break;case b.pzaShopItemType.COB_CANNON:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.COB_CANNON);break;case b.pzaShopItemType.IMITATER:this.sold=d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.IMITATER);break;case b.pzaShopItemType.POOL_CLEAN_CAR:case b.pzaShopItemType.PITCHFORK:case b.pzaShopItemType.ROOF_CART:case b.pzaShopItemType.NUT_HEALING:this.sold=d.pzaLocalData.getGoodsCount(this.itemType)>0;break;case b.pzaShopItemType.SHROOM_GARDEN:this.sold=null!=d.pzaLocalData.data.gardenEnv[""+g.pzaGardenEnv.water];break;case b.pzaShopItemType.AQUARIUM:this.sold=null!=d.pzaLocalData.data.gardenEnv[""+g.pzaGardenEnv.night];break;case b.pzaShopItemType.SNAIL:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.snail]||0)>0;break;case b.pzaShopItemType.GOLD_KETTLE:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.goldWaterPot]||0)>0;break;case b.pzaShopItemType.JUKEBOX:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.phonograph]||0)>0;break;case b.pzaShopItemType.GLOVE:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.glove]||0)>0;break;case b.pzaShopItemType.WHEELBARROW:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.cart]||0)>0;break;case b.pzaShopItemType.FERTILIZER:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.manure]||0)>=999;break;case b.pzaShopItemType.PESTICIDE:this.sold=(d.pzaLocalData.data.gardenToolNum[""+g.pzaGardenToolType.pesticide]||0)>=999;break;case b.pzaShopItemType.MARIGOLD_FLOWERPOT:case b.pzaShopItemType.FLOWER_SEED:case b.pzaShopItemType.BRONZE_FLOWER_SEED:case b.pzaShopItemType.SILVER_FLOWER_SEED:case b.pzaShopItemType.GOLD_FLOWER_SEED:P.pzaChannel.isConfRemote?this.sold=!g.default.instance().isDropGardenPlant():this.sold=d.pzaLocalData.data.purchasedPos.includes(this.shopPos)||!g.default.instance().isDropGardenPlant();break;case b.pzaShopItemType.WITCH_KNIGHT_BELT:var e=d.pzaLocalData.data.beltEquipData.hasEquipList[s.pzaBeltEquipEnum.WuQi];this.sold=null!=e&&e!=s.pzaBeltEquipEnum.null;break;case b.pzaShopItemType.BELT_SLOT1:case b.pzaShopItemType.BELT_SLOT2:case b.pzaShopItemType.BELT_SLOT3:var a=void 0;this.itemType==b.pzaShopItemType.BELT_SLOT1?a=1:this.itemType==b.pzaShopItemType.BELT_SLOT2?a=2:this.itemType==b.pzaShopItemType.BELT_SLOT3&&(a=3),this.sold=1==d.pzaLocalData.data.beltSlotData.slotStateList[a],this.itemType!=b.pzaShopItemType.BELT_SLOT3&&(this.node.active=!this.sold);var t=this.itemPosArr[this.view.getCurPageIndex(this.itemType)];null!=t&&this.node.setPosition(t),this.sold||(this.node.active=this.view.isRequestUnlock(this.itemType))}this.soldNode.active=this.sold},a.prototype.click=function(){var e=this;if(!this.sold&&!this.coming){this.redpoint.active=!1;var a=function(){f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(E.pzaBuyConfirmView);t&&t.bindData(e.itemType,e.shopPos,function(){if(e.buyCall&&e.buyCall(e.itemType),e.itemType>=b.pzaShopItemType.CARD_SLOT_7&&e.itemType<=b.pzaShopItemType.CARD_SLOT_9)e.bindData(e.view,b.pzaShopItemType.CARD_SLOT_7,1,0,e.coming,e.buyCall);else{e.refreshPurchasedState(),!e.sold||e.itemType!==b.pzaShopItemType.FLOWER_SEED&&e.itemType!==b.pzaShopItemType.GOLD_FLOWER_SEED&&e.itemType!==b.pzaShopItemType.SILVER_FLOWER_SEED&&e.itemType!==b.pzaShopItemType.BRONZE_FLOWER_SEED&&e.itemType!==b.pzaShopItemType.BELT_SLOT1&&e.itemType!==b.pzaShopItemType.BELT_SLOT2&&e.itemType!==b.pzaShopItemType.BELT_SLOT3&&e.itemType!==b.pzaShopItemType.SHROOM_GARDEN&&e.itemType!==b.pzaShopItemType.AQUARIUM||C.default.sendMsg("refreshOtherItems",e.itemType);var a=b.pzaShopConfig.SHOP_CONFIG.get(e.itemType);a&&e.reSetPrice(e.itemType,a.price)}},e.newPrice)})};if(this.itemType!=b.pzaShopItemType.TWIN_SUNFLOWER)this.itemType!=b.pzaShopItemType.GATLING_PEA?a():(o=function(){d.pzaLocalData.data.gatlingAdCount++,d.pzaLocalData.addDirty("gatlingAdCount"),e.adCountPro.string="("+d.pzaLocalData.data.gatlingAdCount+"/2)",d.pzaLocalData.data.gatlingAdCount>=2&&a()},P.pzaChannel.instance().showVideo({sucCall:o,failCall:function(){},endCall:function(){},posName:"\u83b7\u53d6\u673a\u67aa\u5c04\u624b"}));else{var t=P.pzaChannel.instance().getChannel();if("tt"==t.channel||"ks"==t.channel){var o=function(){d.pzaLocalData.data.twinsFlowerAdCnt++,d.pzaLocalData.addDirty("twinsFlowerAdCnt"),e.adCountPro.string="("+d.pzaLocalData.data.twinsFlowerAdCnt+"/2)",d.pzaLocalData.data.twinsFlowerAdCnt>=2&&(d.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.TWIN_SUNFLOWER),d.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),e.refreshPurchasedState())};return void P.pzaChannel.instance().showVideo({sucCall:o,failCall:function(){},endCall:function(){},posName:"\u83b7\u53d6\u53cc\u5b50\u5411\u65e5\u8475"})}"wx"==t.channel?t.getShareResult(h.pzaShareGiftConfig.act,function(e){f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(S.pzaShareGiftView);t&&t.init(e)})}):"my"==t.channel&&t.getShareResult(h.pzaShareGiftConfig.act,function(e){f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(S.pzaShareGiftView);t&&t.init(e)})})}}},a.prototype.showRedpointTips=function(){var e=this,a=function(){e.redpoint.active=!0,e.redpoint.stopAllActions(),e.redpoint.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,125),cc.fadeTo(1,255))))},t=[b.pzaShopItemType.GLOOM_SHROOM,b.pzaShopItemType.CATTAIL];if(d.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_4_4&&t.includes(this.itemType))a();else{var o=[b.pzaShopItemType.ROOF_CART,b.pzaShopItemType.SPIKEROCK];if(d.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_5_1&&o.includes(this.itemType))a();else{var n=[b.pzaShopItemType.CARD_SLOT_7,b.pzaShopItemType.PITCHFORK,b.pzaShopItemType.POOL_CLEAN_CAR,b.pzaShopItemType.GATLING_PEA,b.pzaShopItemType.WITCH_KNIGHT_BELT,b.pzaShopItemType.BELT_SLOT1,b.pzaShopItemType.BELT_SLOT2];d.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_3_4&&n.includes(this.itemType)?a():this.redpoint.active=!1}}},a.prototype.close=function(){c.pzaGameCommonPool.returnInstant(this.node)},i([M({displayName:"\u4ef7\u683c",type:cc.Label})],a.prototype,"price",void 0),i([M({displayName:"\u7279\u6b8a\u5e7f\u544a",type:cc.Node})],a.prototype,"specialAd",void 0),i([M({displayName:"\u5e7f\u544a\u8fdb\u5ea6",type:cc.Label})],a.prototype,"adCountPro",void 0),i([M({displayName:"\u7269\u54c1\u56fe\u6807",type:cc.Sprite})],a.prototype,"itemIcon",void 0),i([M({displayName:"\u690d\u7269\u56fe\u7247",type:cc.Sprite})],a.prototype,"plantIcon",void 0),i([M({displayName:"\u690d\u7269\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],a.prototype,"plantCardBoardFrames",void 0),i([M({displayName:"\u5df2\u552e\u51fa",type:cc.Node})],a.prototype,"soldNode",void 0),i([M({displayName:"\u5373\u5c06\u63a8\u51fa",type:cc.Node})],a.prototype,"comingNode",void 0),i([M({displayName:"\u5546\u54c1\u540d\u79f0",type:cc.Label})],a.prototype,"itemName",void 0),i([M({displayName:"\u5546\u54c1\u6570\u91cf",type:cc.Label})],a.prototype,"itemCount",void 0),i([M({type:cc.Label})],a.prototype,"idName",void 0),i([M({type:cc.Node})],a.prototype,"coin",void 0),i([M({type:cc.Node})],a.prototype,"redpoint",void 0),i([D],a)}(cc.Component);t.pzaShopItem=w,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGlobalMask":"pzaGlobalMask","../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBuyConfirmView":"pzaBuyConfirmView","./pzaShareGiftView":"pzaShareGiftView"}],pzaShopView:[function(e,a,t){"use strict";cc._RF.push(a,"33f42AEVkRP07M+oYZJtsjF","pzaShopView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShopView=void 0;var p=e("../Battle/Data/pzaGuideType"),l=e("../Battle/Data/pzaPlantEnum"),s=e("../Common/pzaGameCommonPool"),c=e("../Common/pzaGlobalMask"),u=e("../Common/pzaLocalData"),d=e("../Common/pzaSoundManager"),h=e("../Common/pzaStatisticsMgr"),m=e("../Common/pzaUIManager"),f=e("../Common/pzaUtil"),z=e("../Common/pzaWorldEventManager"),y=e("../Load/pzaPreLoadManager"),g=e("../Shop/pzaShopConfig"),v=e("../Shop/pzaShopDave"),b=e("../utils/pzaChannel"),P=e("../utils/pzakc"),C=e("./pzaBuyConfirmView"),E=e("./pzaShopItem"),S=cc._decorator,_=S.ccclass,D=S.property,M=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.backCarNode=null,a.coin=null,a.mainBtnNode=null,a.mainBtn=null,a.itemPrefab=null,a.shopContent=null,a.leftLightBtn=null,a.rightLightBtn=null,a.dialogDave=null,a.diamond=null,a.lastCoinCount=null,a.shopItems=[],a.curPage=null,a.closeCall=null,a.buyPlantCall=null,a.words=null,a.maxPage=1,a.pageShops=[[g.pzaShopItemType.CARD_SLOT_7,g.pzaShopItemType.POOL_CLEAN_CAR,g.pzaShopItemType.PITCHFORK,g.pzaShopItemType.ROOF_CART,g.pzaShopItemType.GATLING_PEA,g.pzaShopItemType.GLOOM_SHROOM,g.pzaShopItemType.CATTAIL,g.pzaShopItemType.SPIKEROCK],[g.pzaShopItemType.WINTER_MELON,g.pzaShopItemType.COB_CANNON,g.pzaShopItemType.IMITATER,g.pzaShopItemType.NUT_HEALING],[g.pzaShopItemType.MARIGOLD_FLOWERPOT,g.pzaShopItemType.MARIGOLD_FLOWERPOT,g.pzaShopItemType.MARIGOLD_FLOWERPOT,g.pzaShopItemType.GOLD_KETTLE,g.pzaShopItemType.FERTILIZER,g.pzaShopItemType.PESTICIDE,g.pzaShopItemType.JUKEBOX,g.pzaShopItemType.GLOVE],[g.pzaShopItemType.SHROOM_GARDEN,g.pzaShopItemType.AQUARIUM,g.pzaShopItemType.WHEELBARROW,g.pzaShopItemType.SNAIL,g.pzaShopItemType.FLOWER_SEED,g.pzaShopItemType.BRONZE_FLOWER_SEED,g.pzaShopItemType.SILVER_FLOWER_SEED,g.pzaShopItemType.GOLD_FLOWER_SEED],[g.pzaShopItemType.WITCH_KNIGHT_BELT,g.pzaShopItemType.BELT_SLOT1,g.pzaShopItemType.BELT_SLOT2]],a.unlocks=[["3-4","3-4","3-4","5-1","3-4","4-4","4-4"],["5-1","5-1","5-10","5-10","5-10","5-10"],["5-10","5-10","5-10","2-4","2-4","2-4","2-4","2-4"],["2-4","2-4","2-4","2-4","2-4","2-4","2-4","2-4"],["3-4","3-4","3-4"]],a.allPageArr=[],a}return n(a,e),a.prototype.onEnable=function(){var e=this;z.pzaWorldEventManager.addListener(z.pzaWorldEventType.UPDATE_GARDEN_GUIDE,this.guideIndex,this),h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:14}),this.words=null,this.lastCoinCount=null,this.refreshCoinCount(),this.curPage=null,this.initMaxPage(),b.pzaChannel.instance().closeBanner(),u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_3_4||u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_4_4||u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_5_1||u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_GARDEN_5_4&&u.pzaLocalData.gardenGuiding?(this.bindCloseCall(!1,function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.PART_SELECT_VIEW,null)}),this.mainBtnNode.active=!0,u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_3_4?this.words=[new p.pzaDialog("\u53d1\u73b0\u53d7\u635f\u7684\u7a81\u51fb\u91ce\u72fc\u5bc6\u94a5\uff01"),new p.pzaDialog("\u5546\u5e97\u7cfb\u7edf\u53ef\u63d0\u4f9b\u4fee\u590d\u670d\u52a1"),new p.pzaDialog("\u7cfb\u7edf\u5956\u52b1\uff1a1000\u9a91\u58eb\u5e01"),new p.pzaDialog("\u65b0\u5546\u54c1\u5df2\u4e0a\u67b6\uff0c\u63a8\u8350\u8d2d\u4e70\u673a\u68b0\u9f99\u5377\u8005\u63d0\u5347\u60a8\u7684\u6c34\u8def\u9632\u5fa1\u7b49\u7ea7\u5427~",function(){e.showDiamondAni()}),new p.pzaDialog("\u89e3\u9501\u66f4\u591a\u7684\u9a91\u58eb\u529b\u91cf\uff01",function(){e.openCarDoor()})]:u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_4_4?this.words=[new p.pzaDialog("\u53d1\u73b0\u53d7\u635f\u7684\u7a81\u51fb\u91ce\u72fc\u5bc6\u94a5\uff01"),new p.pzaDialog("\u9a91\u58eb\u7cfb\u7edf\u53ef\u5438\u6536\u4ee5\u5347\u7ea7\u5546\u5e97\u6a21\u5757"),new p.pzaDialog("\u7cfb\u7edf\u5956\u52b1\uff1a1000\u9a91\u58eb\u5e01",function(){e.showDiamondAni()}),new p.pzaDialog("\u65b0\u5546\u54c1\u5df2\u4e0a\u67b6\uff0c\u5168\u65b0\u9a91\u58eb\u5361\u7247\u4ee5\u89e3\u9501~",function(){e.openCarDoor()},p.pzaDaveAni.suggest_talk)]:u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_5_1?this.words=[new p.pzaDialog("\u6218\u672f\u6a21\u5757\u66f4\u65b0\u5b8c\u6bd5"),new p.pzaDialog("\u63d0\u793a\uff1a\u65b0\u5546\u54c1\u5df2\u4e0a\u67b6\uff01")]:u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_GARDEN_5_4&&(this.mainBtnNode.active=!1,this.words=[new p.pzaDialog("\u6b22\u8fce\u6765\u5230\u5546\u5e97"),new p.pzaDialog("\u514d\u8d39\u63d0\u4f9b\u6e05\u6d01\u5242\u5957\u88c5",function(){e.openCarDoor(3)}),new p.pzaDialog("\u8bf7\u9009\u62e9\u60a8\u9700\u8981\u7684\u670d\u52a1",function(){},p.pzaDaveAni.suggest_talk)],this.bindCloseCall(!1,null)),this.show(u.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_4_4,!1)):(this.mainBtnNode.active=!0,this.show(!0,!0),this.bindCloseCall(!1,null),this.showShopItem(1)),P.default.regMsgReciever("refreshOtherItems",function(a){return console.log("refreshOtherItems!!!!",a),e.refreshOtherItems(a),!1})},a.prototype.onDisable=function(){z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.UPDATE_GARDEN_GUIDE,this.guideIndex,this),P.default.delMsgReciever("refreshOtherItems"),this.clearShopItem()},a.prototype.bindCloseCall=function(e,a,t){void 0===t&&(t=null),this.closeCall=a,this.buyPlantCall=t,this.mainBtn.string=e?"\u4e3b\u83dc\u5355":"\u7ee7\u7eed"},a.prototype.setCurPage=function(e){this.curPage=e},a.prototype.show=function(e,a){var t=this;e?a?(this.leftLightBtn.interactable=this.maxPage>1,this.rightLightBtn.interactable=this.maxPage>1):(this.leftLightBtn.node.active=!1,this.rightLightBtn.node.active=!1,this.leftLightBtn.interactable=!1,this.rightLightBtn.interactable=!1):a?(this.leftLightBtn.interactable=this.maxPage>1,this.rightLightBtn.interactable=this.maxPage>1):(this.leftLightBtn.interactable=!1,this.rightLightBtn.interactable=!1,this.leftLightBtn.node.active=!1,this.rightLightBtn.node.active=!1),null!=this.words?this.dialogDave.showGuideDave(this.words,function(){u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_SHOP_5_1?t.openCarDoor():u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_GARDEN_5_4&&z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_FREE_SHOPITEM,g.pzaShopItemType.FERTILIZER,0),u.pzaLocalData.data.curGuideType=null,u.pzaLocalData.addDirty("curGuideType"),t.dialogDave.showNormalDave(!1)}):this.dialogDave.showNormalDave()},a.prototype.update=function(){this.refreshCoinCount()},a.prototype.refreshCoinCount=function(){this.lastCoinCount!=u.pzaLocalData.data.coin&&(this.lastCoinCount=u.pzaLocalData.data.coin,this.coin.string=f.pzaUtil.getCurrencyStr(this.lastCoinCount))},a.prototype.clickMainView=function(){d.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall(),u.pzaLocalData.gardenGuiding&&c.pzaGlobalMask.hideMask()},a.prototype.clickBuyMoreCoin=function(){d.pzaSoundManager.playSFX(),m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.BUY_CONFIRM_VIEW,function(e){var a=e&&e.getComponent(C.pzaBuyConfirmView);a&&a.bindData(g.pzaShopItemType.DAVE_COIN,null,null)})},a.prototype.refreshOtherItems=function(e){for(var a=this.shopContent.children,t=0;t<a.length;t++){var o=a[t].getComponent(E.pzaShopItem);o.itemType!==e&&o.refreshPurchasedState()}},a.prototype.showShopItem=function(e){if(this.curPage!=e){this.curPage=e,this.clearShopItem();var a=this.pageShops[this.curPage-1];if(null!=a)for(var t=0;t<a.length;t++){var o=!1,n=a[t],i=g.pzaShopConfig.SHOP_CONFIG.get(n),r=i.unlockChapter+"-"+i.unlockPart;if(!this.hasUnlock(r)){if(n!=g.pzaShopItemType.MARIGOLD_FLOWERPOT)continue;o=!0}var p=s.pzaGameCommonPool.requestInstant(this.itemPrefab);p.setParent(this.shopContent);var l=p.getComponent(E.pzaShopItem);l&&l.bindData(this,n,this.curPage,t,o,this.buyCall.bind(this)),this.shopItems.push(l)}}},a.prototype.clearShopItem=function(){this.shopItems.forEach(function(e){e&&e.close()}),this.shopItems=[]},a.prototype.prePageIndex=function(e){if(this.allPageArr.indexOf(e)>=0)return e;var a=e-1;return a<1?a=this.maxPage:this.prePageIndex(a)},a.prototype.nextPageIndex=function(e){if(this.allPageArr.indexOf(e)>=0)return e;var a=e+1;return a>this.maxPage?a=this.allPageArr[0]:this.nextPageIndex(a)},a.prototype.clickPrePage=function(){var e=this.curPage-1;e=e<1?this.maxPage:this.prePageIndex(e),this.showChangeAni(e),d.pzaSoundManager.playAudio("hatchback_close")},a.prototype.clickNextPage=function(){var e=this.curPage+1;e=e>this.maxPage?this.allPageArr[0]:this.nextPageIndex(e),this.showChangeAni(e),this.dialogDave.hideNormalDave(!1),d.pzaSoundManager.playAudio("hatchback_close")},a.prototype.showChangeAni=function(e){this.showShopItem(e)},a.prototype.setBtnLab=function(e){this.mainBtn.string=e},a.prototype.openCarDoor=function(e){void 0===e&&(e=1),d.pzaSoundManager.playAudio("hatchback_open"),this.showShopItem(e)},a.prototype.showDiamondAni=function(){this.diamond.active=!0,this.diamond.getComponent(sp.Skeleton).setAnimation(0,"pr2",!0),this.diamond.stopAllActions(),this.diamond.setPosition(cc.v2(-390,-220)),this.diamond.opacity=255,this.diamond.runAction(cc.sequence(cc.moveTo(.5,cc.v2(500,300)),cc.callFunc(function(){u.pzaLocalData.data.coin+=1e3,u.pzaLocalData.addDirty("coin")}),cc.fadeOut(.3)))},a.prototype.initMaxPage=function(){for(var e=this,a=function(a){if(a>=3&&u.pzaLocalData.data.curGuideType==p.pzaGuideType.GUIDE_GARDEN_5_4)return"continue";t.unlocks[a-1].forEach(function(t){e.hasUnlock(t)&&(e.maxPage=a,e.allPageArr.indexOf(a)<0&&e.allPageArr.push(a))})},t=this,o=1;o<=this.unlocks.length;o++)a(o)},a.prototype.getfirstPage=function(){return this.allPageArr.length>0?this.allPageArr[0]:0},a.prototype.hasUnlock=function(e){if(u.pzaLocalData.data.passLastPart)return!0;if(null==e)return!1;var a=e.split("-"),t=parseInt(a[0]),o=parseInt(a[1]);return u.pzaLocalData.data.curChapter>t||u.pzaLocalData.data.curChapter==t&&u.pzaLocalData.data.curPart>o},a.prototype.buyCall=function(e){if(e==g.pzaShopItemType.NUT_HEALING)this.dialogDave.showNutWord();else if(e>=g.pzaShopItemType.GATLING_PEA&&e<=g.pzaShopItemType.IMITATER){u.pzaLocalData.data.ownPlants.length>=l.pzaPlantEnum.IMITATER&&this.dialogDave.showAllPlantWord();var a=g.pzaShopConfig.getPlantTypeByItem(e);this.buyPlantCall&&this.buyPlantCall(a)}},a.prototype.guideIndex=function(){u.pzaLocalData.gardenGuiding&&(this.mainBtnNode.active=!0,c.pzaGlobalMask.showOperaArea(this.mainBtnNode))},a.prototype.findShopItem=function(e){var a,t;try{for(var o=r(this.shopItems),n=o.next();!n.done;n=o.next()){var i=n.value;if(i.itemType==e)return i}}catch(p){a={error:p}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return null},a.prototype.isRequestUnlock=function(e){var a,t,o=!0,n=g.pzaShopConfig.SHOP_CONFIG.get(e).buyRequestArr;try{for(var i=r(n),p=i.next();!p.done;p=i.next()){var l=p.value,s=this.findShopItem(l);if(s&&0==s.sold){o=!1;break}}}catch(c){a={error:c}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},a.prototype.getCurPageIndex=function(e){for(var a=0,t=0;t<this.shopContent.children.length;t++){var o=this.shopContent.children[t];if(o.getComponent(E.pzaShopItem).itemType==e)return a;o.active&&a++}},a.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},i([D({displayName:"\u540e\u8f66\u8282\u70b9",type:cc.Node})],a.prototype,"backCarNode",void 0),i([D({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],a.prototype,"coin",void 0),i([D({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u8282\u70b9",type:cc.Node})],a.prototype,"mainBtnNode",void 0),i([D({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u6587\u672c",type:cc.Label})],a.prototype,"mainBtn",void 0),i([D({displayName:"\u5546\u54c1\u9884\u8bbe",type:cc.Prefab})],a.prototype,"itemPrefab",void 0),i([D({displayName:"\u5546\u54c1\u5bb9\u5668",type:cc.Node})],a.prototype,"shopContent",void 0),i([D({displayName:"\u5de6\u8f66\u706f\u6309\u94ae",type:cc.Button})],a.prototype,"leftLightBtn",void 0),i([D({displayName:"\u53f3\u8f66\u706f\u6309\u94ae",type:cc.Button})],a.prototype,"rightLightBtn",void 0),i([D({displayName:"\u6234\u592b\u5bf9\u8bdd",type:v.pzaShopDave})],a.prototype,"dialogDave",void 0),i([D({displayName:"\u94bb\u77f3",type:cc.Node})],a.prototype,"diamond",void 0),i([_],a)}(cc.Component);t.pzaShopView=M,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGlobalMask":"pzaGlobalMask","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../Shop/pzaShopDave":"pzaShopDave","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBuyConfirmView":"pzaBuyConfirmView","./pzaShopItem":"pzaShopItem"}],pzaShovelEffect:[function(e,a,t){"use strict";cc._RF.push(a,"180dahVd7hG1a5MYuVZoAx0","pzaShovelEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShovelEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaGameCommonPool"),l=e("../pzaGameState"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shovelNode=null,a}return n(a,e),a.prototype.init=function(e,a){var t=l.pzaGameState.map.getBlockLogicPos(e,a,0,0),o=l.pzaGameState.map.getXInterval(e),n=l.pzaGameState.map.getYInterval(a);t.x+=.5*o,t.y+=.5*n,this.node.setPosition(t)},a.prototype.changeShovelPos=function(e,a){if(null!=e&&null!=e){var t=l.pzaGameState.map.getBlockLogicPos(e,a,0,0),o=l.pzaGameState.map.getXInterval(e),n=l.pzaGameState.map.getYInterval(a);t.x+=.5*o,t.y+=.5*n,this.node.setPosition(t)}else this.close()},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u94f2\u5b50\u8282\u70b9",type:cc.Node})],a.prototype,"shovelNode",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaShovelEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../pzaGameState":"pzaGameState"}],pzaShovelPlantShooter:[function(e,a,t){"use strict";cc._RF.push(a,"ad3cdQBLg9CI5EtzTPP1zOF","pzaShovelPlantShooter");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShovelPlantShooter=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../Bullet/pzaPeaBullet"),s=e("../pzaGameState"),c=e("./pzaBaseShooter"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.showShooter=function(e){var a=2;e&&e[0]&&(a=(a=Math.floor(e[0]/25))<=0?1:a,a*=2),this.node.y+=50,this.shootAtk(a,e[1],e[2])},a.prototype.shootAtk=function(e,a,t){for(var o=this,n=p.pzaNodeManager.getBulletNode(),i=function(i){c.scheduleOnce(function(){var p=r.pzaGameCommonPool.requestInstant2(o.bulletPrefab1);p.setParent(n);var c=p.getComponent(l.pzaPeaBullet),u=o.node.getPosition();p.setPosition(u),c.setPeaBallType(),c.init(a,20),c.setSpeed(400);var d=s.pzaGameState.map.getMapSkewColumn();d>0&&t<=d-2&&(c.maxPosX=o.node.x+1.5*s.pzaGameState.map.getBlockWidth()),i==e&&o.close()},.05*i)},c=this,u=0;u<e;u++)i(u)},i([d],a)}(c.pzaBaseShooter));t.pzaShovelPlantShooter=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaPeaBullet":"pzaPeaBullet","../pzaGameState":"pzaGameState","./pzaBaseShooter":"pzaBaseShooter"}],pzaShowGrassEffect:[function(e,a,t){"use strict";cc._RF.push(a,"2b996IP4bdIDLNEomB4BUYn","pzaShowGrassEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShowGrassEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaWorldEventManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.BlackNode=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GUIDE_TIPS,this.showGuideTips,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GUIDE_TIPS,this.showGuideTips,this)},a.prototype.showGuideTips=function(e){this.BlackNode.children.forEach(function(e){e.opacity=0}),"showGrass"===e?(this.BlackNode.children[0].opacity=255,this.blankGrass()):"hideGrass"===e&&this.hideBlankGrass(),"showGrass2"===e?(this.BlackNode.children[1].opacity=255,this.blankGrass()):"hideGrass2"===e&&this.hideBlankGrass()},a.prototype.showStaticGrass=function(){this.BlackNode.active=!1},a.prototype.showGrass=function(e,a){this.BlackNode.active=!1,p.pzaSoundManager.playAudio("grassstep"),a&&a()},a.prototype.pauseSelf=function(){this.BlackNode.active&&this.BlackNode.pauseAllActions()},a.prototype.resumeSelf=function(){this.BlackNode.active&&this.BlackNode.resumeAllActions()},a.prototype.blankGrass=function(){this.BlackNode.stopAllActions(),this.BlackNode.active=!0,this.BlackNode.opacity=0,this.BlackNode.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4))))},a.prototype.hideBlankGrass=function(){this.BlackNode.active=!1},i([u({displayName:"\u8349\u5730\u9ed1\u52a8\u753b",type:cc.Node})],a.prototype,"BlackNode",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaShowGrassEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaShroomBullet:[function(e,a,t){"use strict";cc._RF.push(a,"19a8aAiKlJDp4KaQ+8abKdA","pzaShroomBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaShroomBullet=void 0;var r=e("./pzaBaseBullet"),p=e("./pzaBulletAnimator"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.aniNode=null,a.bulletAni=null,a}return n(a,e),a.prototype.init=function(a,t,o,n,i,r){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),e.prototype.init.call(this,a,t,o,n,i),r&&(this.aniNode&&this.aniNode.destroy(),this.aniNode=cc.instantiate(r.node)),this.aniNode.parent=this.node,this.aniNode.setPosition(0,0),this.bulletAni=this.aniNode.getComponent(p.pzaBulletAnimator),this.bulletAni.init(!1,o,this.rotateSpeed)},a.prototype.playHitEffect=function(e){this.bulletAni&&this.bulletAni.showShroomHitEffect(e,this.isMine)},a.prototype.setRotation=function(e){var a=this.bulletAni.getPlayingSP();a&&(a.node.rotation=e)},i([c({displayName:"\u5b50\u5f39\u52a8\u753b\u7ba1\u7406\u5668",type:cc.Node})],a.prototype,"aniNode",void 0),i([s],a)}(r.pzaBaseBullet);t.pzaShroomBullet=u,cc._RF.pop()},{"./pzaBaseBullet":"pzaBaseBullet","./pzaBulletAnimator":"pzaBulletAnimator"}],pzaSidebarView:[function(e,a,t){"use strict";cc._RF.push(a,"459adWyfklAsqz4rY8LOrdD","pzaSidebarView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaGamePropConfig"),l=e("../Common/pzaRewardManager"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaWorldEventManager"),u=e("../utils/pzaChannel"),d=e("../utils/pzakc"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.btnLabel=null,a.ttView=null,a.ksView=null,a.ks_titleP3=null,a.ks_appName=null,a.tt_rewardValue=null,a.hasGet=!1,a}return n(a,e),a.prototype.setView=function(){this.ksView.active=!1,this.ttView.active=!1,"tt"==u.pzaChannel.instance().channel?(this.ttView.active=!0,this.ttView.getChildByName("item2").getChildByName("byte_icon").getChildByName("New Label").getComponent(cc.LabelOutline).enabled=!1,this.ttView.getChildByName("item2").getChildByName("lab").getComponent(cc.Label).string="2.\u70b9\u51fb\u5047\u9762\u9a91\u58eb\uff1a\u82f1\u96c4\u96c6\u7ed3"):"ks"==u.pzaChannel.instance().channel&&(this.ksView.active=!0),this.ksView.getChildByName("item4")&&this.ksView.getChildByName("item4").getChildByName("lab")&&(this.ksView.getChildByName("item4").getChildByName("lab").getComponent(cc.Label).string="4.\u9886\u53d6\u5956\u52b1");var e=d.default.getData("firstGetSideRwd",null);e=null==e?1e3:500,this.tt_rewardValue.string="+"+e},a.prototype.onEnable=function(){c.pzaWorldEventManager.addListener(c.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,this.setBtnState,this),this.setBtnState(),this.setView()},a.prototype.onDisable=function(){c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,this.setBtnState,this)},a.prototype.setBtnState=function(){var e=d.default.getData("sidebar",{today:"",canGet:"-1"}),a=new Date,t=a.getUTCFullYear()+"-"+a.getUTCMonth()+"-"+a.getUTCDay();e.today==t?(this.hasGet=!0,this.btnLabel.string="\u5df2\u9886\u53d6",this.node.getChildByName("board").getChildByName("btn_2").active=!0):"1"==e.canGet?(this.hasGet=!1,this.btnLabel.string="\u9886\u53d6",this.node.getChildByName("board").getChildByName("btn_2").active=!0):(this.hasGet=!1,this.btnLabel.string="\u6253\u5f00\u4fa7\u8fb9\u680f","ks"==u.pzaChannel.instance().channel&&(this.node.getChildByName("board").getChildByName("btn_2").active=!1,this.btnLabel.string=""))},a.prototype.clickSidebar=function(){var e=this;s.pzaSoundManager.playSFX();var a=d.default.getData("sidebar",{today:"",canGet:"-1"}),t=new Date,o=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();if(this.hasGet)console.log("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6");else if("0"==a.canGet)u.pzaChannel.instance().getChannel().showSidebar(function(a){a&&(e.btnLabel.string="\u9886\u53d6")});else if(o==a.today)console.log("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6");else{this.hasGet=!0,a.today=o,d.default.saveData("sidebar",a);var n=d.default.getData("firstGetSideRwd",null);n=null==n?1e3:500,this.btnLabel.string="\u5df2\u9886\u53d6";var i=[new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,n)];l.pzaRewardManager.recieveRewards(i,function(){}),d.default.saveData("firstGetSideRwd",1)}},a.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f(cc.Label)],a.prototype,"btnLabel",void 0),i([f(cc.Node)],a.prototype,"ttView",void 0),i([f(cc.Node)],a.prototype,"ksView",void 0),i([f(cc.Label)],a.prototype,"ks_titleP3",void 0),i([f(cc.Label)],a.prototype,"ks_appName",void 0),i([f(cc.Label)],a.prototype,"tt_rewardValue",void 0),i([m],a)}(cc.Component);t.default=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc"}],pzaSleepEffect:[function(e,a,t){"use strict";cc._RF.push(a,"fcc4fQsTUBEwrWd7PG5VOL2","pzaSleepEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSleepEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.closing=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.sleepEffect=this},a.prototype.logicUpdate=function(){this.baseData?(this.node.setPosition(this.baseData.logicPos),!this.baseData.plantData||this.baseData.plantData.sleeping&&!this.baseData.isDead||this.death()):this.death()},a.prototype.death=function(){var e=this;this.closing||(this.closing=!0,this.fadeOutAni(),this.baseData.sleepEffect=null,setTimeout(function(){e.close()},500/p.pzaGameState.gameSpeed))},i([s],a)}(r.pzaBaseComponent));t.pzaSleepEffect=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaSmallMiniGame:[function(e,a,t){"use strict";cc._RF.push(a,"3c49fk+gI1F5KHZgGXMQrCh","pzaSmallMiniGame");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSmallMiniGame=void 0;var r=e("../Battle/Data/pzaBaseData"),p=e("../Battle/Data/pzaPlantEnum"),l=e("../Battle/Data/pzaZombieEnum"),s=e("../Battle/Zombie/pzaBaseZombie"),c=e("../Battle/pzaEffectManager"),u=e("../Battle/pzaGameState"),d=e("../Load/pzaBundleObjectPool"),h=e("../Load/pzaPreLoadManager"),m=e("../MiniGame/pzaMiniGameConf"),f=e("../View/Battle/pzaPlantBeltView"),z=e("../View/pzaCommonMask"),y=e("../utils/pzaChannel"),g=e("../utils/pzakc"),v=e("./pzaBeltConfig"),b=e("./pzaCollisionManager"),P=e("./pzaGameConfig"),C=e("./pzaGameManager"),E=e("./pzaGameMiniGame"),S=e("./pzaLocalData"),_=e("./pzaSoundManager"),D=e("./pzaStatisticsMgr"),M=e("./pzaUIManager"),w=e("./pzaUtil"),T=e("./pzaWorldEventManager"),A=cc._decorator,B=A.ccclass,G=(A.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.waveZombieDensity=null,a}var t;return n(a,e),t=a,a.prototype.preLoad=function(e,a,t){this.init();var o=this.getConf(a);u.pzaGameState.init(e,a,this.gameMode,this.skipPartStar(),0,o.isnight,o.mapId),this.beforeLoad(e,a),u.pzaGameState.isGameEnd=!1,b.pzaCollisionManager.getInstance.setOn();var n=this.getResArr(e,a);M.pzaUIManager.showLoading(),this.initMapPlantZombie(e,a),_.pzaSoundManager.clearAllLoopAudio(),this.readData(e,a),d.pzaBundleObjectPool.preLoadSubResource(n,function(){M.pzaUIManager.hideLoading(t)},function(e){M.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*e)))}),u.pzaGameState.autoPickLock=!1},a.prototype.gameStart=function(a,t){e.prototype.resetTryPlant.call(this),S.pzaLocalData.gameStartTimeStamp=Date.now();var o=400+t;D.pzaStatisticsMgr.sendLevelEvent(u.pzaGameState.curPart,D.pzaEventLevelType.start,0,0,u.pzaGameMode.MINIGAME),g.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),u.pzaGameState.gameMode=u.pzaGameMode.MINIGAME_SMALL,this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},a.prototype.beforeGameStart=function(a,t){e.prototype.beforeGameStart.call(this,a,t)},a.prototype.normalStartGameCall=function(){window.pzaMapManager.previewMap(function(){z.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){C.pzaGameManager.showBattleUI(h.pzaResourceUrl.PLANT_BELT_VIEW,function(e){var a=e&&e.getComponent(f.pzaPlantBeltView);a&&a.showView(function(){window.pzaMapManager.initCleanCar(),c.pzaEffectManager.createReadyWord(function(){z.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),u.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=8,v.pzaBeltConfig.initMiniSmallPlants(),T.pzaWorldEventManager.triggerEvent(T.pzaWorldEventType.GAME_RESUME,null),_.pzaSoundManager.playBgm(_.pzaBGMName.BOWLING_BGM)})})})})},!0)},a.prototype.createWave=function(a){e.prototype.createWave.call(this,a),a.nextWaveTime=P.pzaGameConfig.miniZombieWaveInterval;var t=this.getConf(u.pzaGameState.curPart);if(!(null==t||t.maxWave<a.wave)){t.maxWave==a.wave&&(a.lastWave=!0);var o=this.getRandomWaveZombie(a.wave,!0,window.pzaMapManager.getIceYCount(),0,u.pzaGameState.redLeft);if(null!=o){var n=[];window.pzaMapManager.IceGroundSet.forEach(function(e){null==e||e.xIndex<0||e.yIndex<0||n.indexOf(e.yIndex)>=0||n.push(e.yIndex)});for(var i=u.pzaGameState.map.getMapRow(),r=!0,p=[],s=[],c=0;c<i;c++)s.push(c);s.sort(function(){return Math.random()-.5});var d=0;o.forEach(function(e){var t=m.pzaMiniGameConf.getRandomWayIndex(d,e,s,a.wave);if(d++,e==l.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,p);if(null==o)return;p.push(o);var i=o.split("-"),c=a.createFixBlockZombieData(e,parseInt(i[0]),parseInt(i[1]));return a.createZombie(c),void a.curWaveZombieDatas.add(c)}e==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(t=n.shift());var h=a.createZombieData(e,t);!r&&h.logicPos&&(h.logicPos.x+=w.pzaUtil.getRandomFloatNum(.2,1)*u.pzaGameState.map.getBlockWidth()),a.createZombie(h),a.curWaveZombieDatas.add(h),r=!1})}}},a.prototype.createTombWaterWaveData=function(){},a.prototype.lastTombWaterZombie=function(){},a.prototype.getRandomDiveZombie=function(){var e=[l.pzaZombieEnum.DUCKY_TUBE_ZOMBIE],a=this.getConf(u.pzaGameState.curPart).zombieTypes;null!=a&&(a.indexOf(l.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE)>=0&&e.push(l.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),a.indexOf(l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE)>=0&&e.push(l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));var t=[];return e.forEach(function(e){var a=P.pzaGameConfig.getZombieConfig(e);t.push(a.refrshWeight)}),e[w.pzaUtil.getRandomIndexByWeight(t)]},a.prototype.getRandomWaveZombie=function(e,a,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[];if(this.waveZombieDensity=this.getConf(u.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||e-1<0)return[l.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[e-1];if(null==r||r<=1)return[l.pzaZombieEnum.ZOMBIE];if(a&&e%10==0){i.push(l.pzaZombieEnum.FLAG_ZOMBIE),r-=P.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.FLAG_ZOMBIE);for(var p=Math.min(Math.floor(r/2),8),s=0;s<p;s++)i.push(l.pzaZombieEnum.ZOMBIE),r-=P.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.ZOMBIE)}var c=this.getConf(u.pzaGameState.curPart),d=c.maxWave,h=c.zombieTypes;for(e==d&&e>=10&&h.forEach(function(e){e!=l.pzaZombieEnum.ZOMBIE&&(i.push(e),r-=P.pzaGameConfig.getZombieLevel(e))});r>0;){var m=this.getRandomZombie1(r,e,t,o,n);if(null==m)break;if(m==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?t--:m==l.pzaZombieEnum.RED_GARGANTUAR&&e%10!=0&&n--,i.push(m),i.length>=50)break;r-=P.pzaGameConfig.getZombieLevel(m)}return i},a.prototype.getRandomZombie1=function(e,a,t,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[];if(this.getConf(u.pzaGameState.curPart).zombieTypes.forEach(function(t){if(null!=t){var p=P.pzaGameConfig.getZombieConfig(t);null==p||0==p.refrshWeight||p.refreshLevel>e||p.refrshMinWave>a||o>0&&t==l.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&a%10!=0||(i.push(t),r.push(p.refrshWeight))}}),t>0){var p=P.pzaGameConfig.getZombieConfig(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=p&&p.refreshLevel<=e&&(i.push(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(p.refrshWeight))}var s=w.pzaUtil.getRandomIndexByWeight(r);return i[s]},a.prototype.createPreviewZombie=function(e,a){var t=w.pzaUtil.getRandomNum(13,14),o=P.pzaGameConfig.miniZombieScale,n=this.getPreviewZombies(t);if(null!=n){var i=this.getPreviewRandomPosList();i.sort(function(){return Math.random()-.5});for(var p=function(a,t){var n=h.pzaPreLoadManager.getZombieUrl(a);d.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(n,i){if(null==n&&null!=i){i.setParent(e.previewZombieNode),i.setPosition(t),i.zIndex=-t.y;var p=i.getComponent(s.pzaBaseZombie),l=new r.pzaBaseData(null,a);l.hp=1,l.logicPos=t,p&&p.preview(l,e.previewShadowNode,o),e.PreviewZombies.add(p)}else console.error(n)})},c=0;c<n.length;c++){var u=n[c],m=i[c];u==l.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==a?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),p(u,m)}_.pzaSoundManager.playBgm(_.pzaBGMName.PRE_BGM)}},a.prototype.showBattleDown=function(a){e.prototype.showBattleDown.call(this,a),a.sunUIShowNode.active=!1,a.skipPartBtn.active=!1,a.freePlantNode.active=!0,a.speedBtn.active=!0},a.prototype.getAdPlantArr=function(){return[p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.COB_CANNON]},a.prototype.showBattlePropButtons=function(e){e.freeSunNode.active=!1,y.pzaChannel.isConfRemote?e.cherryBombNode.active=!0:e.cherryBombNode.active=!1,e.autoPickNode.active=!0,e.clearCDNode.active=!1},a.prototype.isLastWave=function(e){var a=C.pzaGameManager.getGame(u.pzaGameMode.MINIGAME_SMALL,t).getConf(u.pzaGameState.curPart);return e.wave==a.maxWave},a.prototype.initPartProcess=function(e){e.proLabel.node.active=!1;var a=C.pzaGameManager.getGame(u.pzaGameMode.MINIGAME_SMALL,t).getConf(u.pzaGameState.curPart);e.maxWave=a.maxWave;for(var o=Math.floor(e.maxWave/10),n=0;n<e.partFlags.length;n++){var i=e.partFlags[n];n+1>o?i.active=!1:(i.active=!0,i.setPosition(-315*(n+1)/o-30,42))}e.zombieHeadNode.setPosition(-15,37),e.partProNode.active=!1,e.partProgress.fillRange=0;var r=this.getConf(u.pzaGameState.curPart).name;e.partLabel.string=r},t=i([B],a)}(E.pzaGameMiniGame));t.pzaSmallMiniGame=G,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniGame/pzaMiniGameConf":"pzaMiniGameConf","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBeltConfig":"pzaBeltConfig","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaSnorkelZombie:[function(e,a,t){"use strict";cc._RF.push(a,"17264xFfYRMaY/c70hgyGYu","pzaSnorkelZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSnorkelZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaBuffData"),l=e("../pzaEffectManager"),s=e("./pzaBaseZombie"),c=e("./pzaZombieState"),u=e("./pzaZombieSlot"),d=e("../Data/pzaZombieEnum"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.garlicSkinName="biaoqing2",a.diving=!1,a.isJumping=!1,a.eatTime=0,a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,-19.69,85.77))]])},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.animation.node.y=0},a.prototype.preview=function(a,t,o){e.prototype.preview.call(this,a,t,o),this.animation.node.y=0*this.zombieScale},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.diving=!1,this.baseData.waterYOffset=-15},a.prototype.updateMove=function(a){var t=this;if(!this.diving&&!this.isJumping){if(!this.hasInWater)return e.prototype.updateMove.call(this,a);var o=this.baseData.xIndex;if(this.garlicChangeR){if(o>=0&&!this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE))return this.diving=!0,this.curShadow&&this.curShadow.hideShadow(),void this.animation.playAnimation("down",!1,function(){t.diving=!1,t.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.DIVE,-1)),t.playMoveAnimation(),t.baseData.offsetY=-50});e.prototype.updateMove.call(this,a);var n=this.baseData.xIndex;o<0&&n>=0?(this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.DIVE,-1)),this.curShadow&&this.curShadow.hideShadow(),this.isJumping=!0,this.animation.playAnimation("jump",!1,function(){t.isJumping=!1,t.playMoveAnimation()},function(){r.pzaSoundManager.playAudio("zombie_entering_water"),l.pzaEffectManager.createWaterFlowerEffect(t.baseData.yIndex,t.baseData.logicPos,null)})):n<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),l.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.playAnimation("move",!0),this.baseData.offsetY=0,this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){t.curShadow&&t.curShadow.showShadow(),null!=t.mask&&(t.mask.enabled=!1)}))))}else e.prototype.updateMove.call(this,a)}},a.prototype.attack=function(a,t){var o=this;return this.hasInWater?this.diving?void 0:this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)?(this.diving=!0,r.pzaSoundManager.playAudio("zombie_leave_water"),void this.animation.playAnimation("up",!1,function(){o.diving=!1,o.baseData.buffData.removeBuff(p.pzaBuffType.DIVE)})):void e.prototype.attack.call(this,a,t):e.prototype.attack.call(this,a,t)},a.prototype.playMoveAnimation=function(){if(!this.hasInWater)return e.prototype.playMoveAnimation.call(this);this.zombieState=c.pzaZombieState.MOVE,this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)||!this.garlicChangeR?this.animation.playAnimation("move2",!0):this.animation.playAnimation("move",!0)},a.prototype.getAttackAniName=function(){return"attack"},a.prototype.getDeathAniName=function(){return"death"},a.prototype.zombieHurt=function(){this.zombieHurtState=d.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.onWaterEnter=function(){},a.prototype.onWaterExit=function(){this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)&&(r.pzaSoundManager.playAudio("zombie_leave_water"),this.baseData.buffData.removeBuff(p.pzaBuffType.DIVE))},i([m],a)}(s.pzaBaseZombie));t.pzaSnorkelZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaSnowBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"7c6fbo6q+BFrawlX/VV8KkB","pzaSnowBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSnowBaseBullet=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../Data/pzaBuffData"),s=e("../Effect/pzaBaseEffect"),c=e("./pzaBaseBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.colliderZombie=function(e){if(e&&!e.isDead)if(null!=e.zombieData){if(e.zombieData&&e.zombieData.hypnosis)this.close();else if(!e.buffData.hasBuff(l.pzaBuffType.DIVE)&&!e.buffData.hasBuff(l.pzaBuffType.FLY))if(e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var a=window.pzazombieManager.getZombie(e);if(null!=a){if(a.hurt(this.atk),this.close(),this.hitPrefab){var t=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(t);var i=n.getComponent(s.pzaBaseEffect);i&&i.showEffect(null,null),e.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||a.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||e.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5))}}else this.close()}}else this.close()},i([d],a)}(c.pzaBaseBullet));t.pzaSnowBaseBullet=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","./pzaBaseBullet":"pzaBaseBullet"}],pzaSnowPea:[function(e,a,t){"use strict";cc._RF.push(a,"d0858T0P0xCCbkWdXg2wTUe","pzaSnowPea");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSnowPea=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNameConf"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../Bullet/pzaBaseBullet"),u=e("../Data/pzaBuffData"),d=e("../pzaGameState"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(t.baseData))return s.pzaSoundManager.playAudio("SnowPeaAtk"),void t.animation.playAnimation(p.pzaPlantSkName.COMMON.attack,!1,o,function(){t.shoot()});t.animation.playAnimation(p.pzaPlantSkName.COMMON.idle,!1,o)};o(),d.pzaGameState.usePeaPlant=!0,d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.onlyShroomCofee=!1},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=l.pzaNodeManager.getBulletNode();if(null!=e){var a=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=a){a.setParent(e);var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=e.convertToNodeSpaceAR(t);a.setPosition(o);var n=a.getComponent(c.pzaBaseBullet);if(null!=n){n.setPeaBallType(),n.init(this.baseData.yIndex,this.baseData.atk);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},a.prototype.findAttackTarget=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:e.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([f],a)}(h.pzaBasePlant);t.pzaSnowPea=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSoundManager:[function(e,a,t){"use strict";cc._RF.push(a,"b22d3Pe1rVO/psEpbJ2xye9","pzaSoundManager");var o=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBGMName=t.pzaSoundManager=void 0;var i=e("../../start/pzaBundleController"),r=e("../Battle/pzaGameState"),p=e("../utils/pzaChannel"),l=e("./pzaLocalData"),s=function(){function e(){}return e.playAudio=function(e,a,t){var o=this;l.pzaLocalData.data.soundValue<=0||this.getAudioByName(e,function(e){if(null!=e){if(null!=a){var n=Date.now(),i=o.soundTimeMap.get(e);if(null!=i&&(n-i)/1e3<a)return;o.soundTimeMap.set(e,n)}if("qq"==p.pzaChannel.instance().channel)o.qqPlayAudio(e.nativeUrl);else{var r=cc.audioEngine.playEffect(e,!1);t&&t(r)}}})},e.getAudioByName=function(e,a){var t=this;if(null!=e){var o=this.gameSoundMap.get(e);null==o?cc.assetManager.loadBundle(i.pzaBundleType.Audio,function(o,n){!o&&n?n.load(e,cc.AudioClip,function(o,n){if(!o&&n){var i=t.gameSoundMap.get(e);null==i?(a&&a(n),t.gameSoundMap.set(e,n),p.pzaChannel.isConfRemote&&console.log("\u6210\u529f\u52a0\u8f7d\u97f3\u4e50",e)):a&&a(i)}else console.error(o)}):console.error(o)}):a&&a(o)}},e.playBattleAudio=function(e,a,t){l.pzaLocalData.data.soundValue<=0||this.playAudio(e,a,t)},e.stop=function(e){null!=e&&cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(e)},e.playBgm=function(e){var a=this,t=!1;if(!(r.pzaGameState.setBgmCount>10||(r.pzaGameState.setBgmCount++,null!=e&&e==this.lastbgmName&&cc.audioEngine.isMusicPlaying()||(null==e&&(e=this.lastbgmName),null==e||(e==this.lastbgmName&&(t=!0),this.lastbgmName=e,l.pzaLocalData.data.musicValue<=0))))){var o=this.gameSoundMap.get(e);if(o)return t?cc.audioEngine.resumeMusic():cc.audioEngine.playMusic(o,!0),void this.setMusicVolume(l.pzaLocalData.data.musicValue);this.getAudioByName(e,function(e){t?cc.audioEngine.resumeMusic():cc.audioEngine.playMusic(e,!0),a.setMusicVolume(l.pzaLocalData.data.musicValue)})}},e.stopBgm=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.stopMusic(),this.clearAllLoopAudio()},e.pausePlayMusic=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic()},e.setMusicVolume=function(e,a){void 0===a&&(a=!1),null==e||e<=0?this.stopBgm():a?cc.audioEngine.setMusicVolume(e):cc.audioEngine.isMusicPlaying()?cc.audioEngine.setMusicVolume(e):this.resumeMusic()},e.resumeMusic=function(){l.pzaLocalData.data.musicValue<=0||null==this.lastbgmName||cc.audioEngine.isMusicPlaying()||this.playBgm(this.lastbgmName)},e.playLongAudio=function(e,a,t,o){var n=this;l.pzaLocalData.data.soundValue<=0||this.getAudioByName(e,function(i){if(null!=i){if(null!=t){var r=Date.now(),p=n.soundTimeMap.get(i);if(null!=p&&(r-p)/1e3<t)return;n.soundTimeMap.set(i,r)}var l=cc.audioEngine.playEffect(i,!1),s=e+a;n.longAudioMap.set(s,l),n.longId2AudioIdMap.set(a,l),o&&o(l)}})},e.resumeLongAudio=function(){var e,a;if(this.longAudioMap.size>0)try{for(var t=o(this.longAudioMap),i=t.next();!i.done;i=t.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(p)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},e.stopLongAudio=function(){var e,a;if(this.longAudioMap.size>0)try{for(var t=o(this.longAudioMap),i=t.next();!i.done;i=t.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pause(p)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},e.deleteLongAudio=function(e,a){if(null!=e){var t=this.longId2AudioIdMap.get(a);cc.audioEngine.getState(t)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(t),this.longId2AudioIdMap.delete(a);var o=e+a;this.longAudioMap.delete(o)}},e.cleatAllLongAudio=function(){this.longAudioMap.forEach(function(e){cc.audioEngine.stop(e)}),this.longAudioMap.clear(),this.longId2AudioIdMap.clear()},e.playLoopAudio=function(e,a,t){var o=this;if(!(l.pzaLocalData.data.soundValue<=0||null==e||this.loopAudioNameArr.indexOf(e)>=0)){var n=this.loopSoundMap.get(e);cc.audioEngine.getState(n)!=cc.audioEngine.AudioState.PLAYING&&(this.getAudioByName(e,function(n){if(null!=n){var i=cc.audioEngine.playEffect(n,a);o.loopSoundMap.set(e,i),t&&t(i)}}),this.loopAudioNameArr.push(e))}},e.stopLoopAudio=function(){var e,a;try{for(var t=o(this.loopSoundMap),i=t.next();!i.done;i=t.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pause(p)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},e.resumeLoopAudio=function(){var e,a;try{for(var t=o(this.loopSoundMap),i=t.next();!i.done;i=t.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(p)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(a=t.return)&&a.call(t)}finally{if(e)throw e.error}}},e.deleteLoopAudioName=function(e){if(!(null==e||this.loopAudioNameArr.indexOf(e)<0)){var a=this.loopSoundMap.get(e);if(a){if(cc.audioEngine.getState(a)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(a),this.loopSoundMap.delete(e),this.loopAudioNameArr.indexOf(e)>=0){var t=this.loopAudioNameArr.indexOf(e);this.loopAudioNameArr.splice(t,1)}}else console.error("audioName\u4e0d\u5b58\u5728",e)}},e.clearAllLoopAudio=function(){this.loopSoundMap.forEach(function(e){cc.audioEngine.stop(e)}),this.loopSoundMap.clear(),this.loopAudioNameArr=[],this.cleatAllLongAudio()},e.playSFX=function(){var e=Math.random()>.5?"tap":"tap2";this.playAudio(e)},e.initQQPlayAudio=function(){},e.qqPlayAudio=function(e){if(e){var a=window.qq,t=this.qqAudioMap.get(e);t||((t=a.createInnerAudioContext()).onError(function(e){e&&e.errCode,t.offEnded(function(){}),t.offError(function(){}),t.destroy()}),this.qqAudioMap.set(e,t)),t&&(t.src=e,t.loop=!1,t.play())}},e.myPlayAudio=function(e,a){if(void 0===a&&(a=!1),e){var t=window.my.createInnerAudioContext();t&&(this.innerAudio=t,t.onEnded(function(){t.offEnded(function(){}),t.offError(function(){}),t.destroy()}),t.onError(function(e){e&&e.errCode,t.offEnded(function(){}),t.offError(function(){}),t.destroy()}),t.onCanPlay(function(){t.play()}),t.src=e,t.loop=a,t.play())}},e.loadAudio=function(e){var a=this;null!=e&&null==this.gameSoundMap.get(e)&&cc.assetManager.loadBundle(i.pzaBundleType.Audio,function(t,o){!t&&o?o.load(e,cc.AudioClip,function(t,o){!t&&o?null==a.gameSoundMap.get(e)&&a.gameSoundMap.set(e,o):console.error(t)}):console.error(t)})},e.gameSoundMap=new Map,e.soundTimeMap=new Map,e.loopSoundMap=new Map,e.loopAudioNameArr=[],e.longAudioMap=new Map,e.longId2AudioIdMap=new Map,e.lastbgmName=null,e.innerAudio=null,e.qqAudioMap=new Map,e}();t.pzaSoundManager=s,function(e){e.LOADING="loadingbgm",e.PRE_BGM="fightbeforebgm",e.CHAPTER_1="Grasswalk",e.CHAPTER_2="Moongrains",e.CHAPTER_3="WateryGraves",e.CHAPTER_4="RigorMormist",e.CHAPTER_5="GrazetheRoof",e.GARDEN="ZenGarden",e.BOWLING_BGM="BowlingBgm",e.BELT_BGM="BeltBgm",e.PUZZLE_BGM="PuzzleBgm",e.RAIN_BGM="rain",e.NEWPLANT_BGM="newplant",e.ZOMBIEBOSS_BGM="zombiebossbgm",e.chahua_BGM="chahuaBgm"}(t.pzaBGMName||(t.pzaBGMName={})),cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaSpecialTipsView:[function(e,a,t){"use strict";cc._RF.push(a,"89fb3ganxpDs4qzdw/90Txn","pzaSpecialTipsView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpecialTipsView=void 0;var p,l=e("../Battle/pzaGameState"),s=e("../Common/pzaCommonPopView"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property;(function(e){e[e.warnLine=0]="warnLine",e[e.protectPlant_dragTrack=1]="protectPlant_dragTrack",e[e.portalDoor=2]="portalDoor",e[e.sunLight_Cost=3]="sunLight_Cost",e[e.sunLight_Get=4]="sunLight_Get",e[e.dragTrack=5]="dragTrack"})(p||(p={}));var f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tips=null,a.iconFrame=null,a.layout=null,a.closeCall=null,a}return n(a,e),a.prototype.show=function(e,a){var t,o;this.tips.string=e,this.closeCall=a;var n=l.pzaGameState.hasMainConf();if(n.tipsIcon)try{for(var i=r(n.tipsIconArray),p=i.next();!p.done;p=i.next()){var s=p.value,c=cc.instantiate(this.iconFrame);c.parent=this.layout;var d=c.getChildByName("icon").getComponent(cc.Sprite);u.pzaSpriteFrameManager.showSpePartIcon(s,d)}}catch(h){t={error:h}}finally{try{p&&!p.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}},a.prototype.clickComfirmBtn=function(){c.pzaSoundManager.playSFX(),this.closeCall&&this.closeCall(),this.node.destroy()},i([m(cc.Label)],a.prototype,"tips",void 0),i([m(cc.Node)],a.prototype,"iconFrame",void 0),i([m(cc.Node)],a.prototype,"layout",void 0),i([h],a)}(s.default);t.pzaSpecialTipsView=f,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaSpeedBlinkEffect:[function(e,a,t){"use strict";cc._RF.push(a,"3ba1eDemKtOa7Hl1T9eYLkk","pzaSpeedBlinkEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpeedBlinkEffect=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a.mask=null,a.aniEvent=null,a}return n(a,e),a.prototype.playTransition=function(e){this.aniEvent=e,this.node.active=!0,this.ani.play("transitionAni")},a.prototype.onAniEvent=function(){this.aniEvent&&this.aniEvent()},a.prototype.blinkGreen=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#78db30"),this.ani.play("speed_blink")},a.prototype.blinkRed=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#ff865e"),this.ani.play("speed_blink")},a.prototype.blinkWhite=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#ffffff"),this.ani.play("speed_blink")},i([l({displayName:"\u52a8\u753b",type:cc.Animation})],a.prototype,"ani",void 0),i([l({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([p],a)}(cc.Component);t.pzaSpeedBlinkEffect=s,cc._RF.pop()},{}],pzaSpikerock:[function(e,a,t){"use strict";cc._RF.push(a,"fd1cd8QNDZCH6f0AV+eOBfD","pzaSpikerock");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpikerock=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaTipManager"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaPlantEnum"),u=e("../pzaGameState"),d=e("./pzaAttackType"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.cate=c.pzaPlantCate.Spike,a.plantData.canBeShoot=!1,this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!0,function(){}),u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1,this.baseData&&!this.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)&&this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_ICE,-1)),this.animation.spineAnimation.node.y=-30,3==u.pzaGameState.mapId&&2==this.baseData.yIndex?this.animation.spineAnimation.node.y=-22:3==u.pzaGameState.mapId&&3==this.baseData.yIndex&&(this.animation.spineAnimation.node.y=-35)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.isDead||this.baseData.buffData.hasBuff(s.pzaBuffType.FROZEN)||(this.baseData.plantData.atkInterval+=a,this.baseData.plantData.atkInterval<this.atkInterval||null!=this.findAttackTarget()&&this.attack())},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData)return null;var a=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){null==a&&(null==t||-1==t.xIndex||t.isDead||t.buffData.hasBuff(s.pzaBuffType.FLY)||t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||t.xIndex==e.baseData.xIndex&&(a=t))}),a},a.prototype.attack=function(){var e=this;p.pzaSoundManager.playAudio("Spikeweed"),null==this.baseData||this.baseData.isDead||(this.baseData.plantData.atkInterval=0,window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(a){if(e.baseData&&null!=a&&!a.isDead&&!a.buffData.hasBuff(s.pzaBuffType.FLY)&&!a.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&a.xIndex==e.baseData.xIndex){var t=window.pzazombieManager.getZombie(a);t&&t.hurt(e.baseData.atk,e.baseData,d.pzaAttackType.SPIKE)}}))},a.prototype.hurt=function(e,a,t){if(this.baseData)if(t==d.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(a),u.pzaGameState.partStar>0&&u.pzaGameState.lossPlantCount==u.pzaGameState.lossStarCount&&(l.pzaTipManager.showLossStarTip(!1,!0),u.pzaGameState.partStar--),u.pzaGameState.lossPlantCount++;else if(t==d.pzaAttackType.BANG){if(this.baseData.hurtPlanet(e),this.refreshHurtState(!1),!this.baseData.isDead)return;return window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()}},i([f],a)}(h.pzaBasePlant));t.pzaSpikerock=z,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikeweed:[function(e,a,t){"use strict";cc._RF.push(a,"4ecf2vQkM1HfaFg6WAuXHm/","pzaSpikeweed");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpikeweed=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaTipManager"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaPlantEnum"),u=e("../Data/pzaZombieEnum"),d=e("../pzaGameState"),h=e("./pzaAttackType"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.cate=c.pzaPlantCate.Spike,a.plantData.canBeShoot=!1,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1,this.baseData.plantData.atkInterval=this.atkInterval,this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!0),this.baseData&&!this.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)&&this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_ICE,-1)),this.animation.spineAnimation.node.y=-30,3==d.pzaGameState.mapId&&2==this.baseData.yIndex?this.animation.spineAnimation.node.y=-22:3==d.pzaGameState.mapId&&3==this.baseData.yIndex&&(this.animation.spineAnimation.node.y=-35)},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.isDead||this.baseData.buffData.hasBuff(s.pzaBuffType.FROZEN)||(this.baseData.plantData.atkInterval-=a,this.baseData.plantData.atkInterval>0||(this.baseData.plantData.atkInterval=this.atkInterval,this.attack()))},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData)return null;var a=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(null==a&&!(null==t||-1==t.xIndex||t.isDead||t.buffData.hasBuff(s.pzaBuffType.FLY)||t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT))){if(t.xIndex!=e.baseData.xIndex&&t.zombieData.cate!=u.pzaZombieCate.IceCar){var o=d.pzaGameState.map.getMapXIndex(t.logicPos,null,-15);if(t.xIndex!=o)return}t.zombieData.cate==u.pzaZombieCate.IceCar&&e.baseData.xIndex!=t.xIndex&&e.baseData.xIndex-1!=t.xIndex||(a=t)}}),a},a.prototype.attack=function(){var e=this;p.pzaSoundManager.playAudio("Spikeweed"),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(a){if(e.baseData&&a&&!a.isDead&&!a.buffData.hasBuff(s.pzaBuffType.FLY)&&!a.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)){if(a.xIndex!=e.baseData.xIndex&&a.zombieData.cate!=u.pzaZombieCate.IceCar){var t=d.pzaGameState.map.getMapXIndex(a.logicPos,null,30);if(e.baseData.xIndex!=t)return}if(a.zombieData.cate!=u.pzaZombieCate.IceCar||e.baseData.xIndex==a.xIndex||e.baseData.xIndex-1==a.xIndex){var o=window.pzazombieManager.getZombie(a);o&&o.hurt(e.baseData.atk,e.baseData,h.pzaAttackType.SPIKE)}}})},a.prototype.hurt=function(e,a,t){if(this.baseData)if(t==h.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),d.pzaGameState.partStar>0&&d.pzaGameState.lossPlantCount==d.pzaGameState.lossStarCount&&(l.pzaTipManager.showLossStarTip(!1,!0),d.pzaGameState.partStar--),d.pzaGameState.lossPlantCount++,this.death(a);else if(t==h.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},i([z],a)}(m.pzaBasePlant));t.pzaSpikeweed=y,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpineController:[function(e,a,t){"use strict";cc._RF.push(a,"261d4+Q1HdGA5w3tjdBw83c","pzaSpineController");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpineController=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spineAnimation=null,a.activeFlash=!1,a._material=null,a.flashTime=0,a.lightTime=0,a.currentTimeScale=1,a}return n(a,e),a.prototype.onLoad=function(){this.activeFlash&&(this._material=this.spineAnimation.getMaterial(0))},a.prototype.onEnable=function(){this.activeFlash&&(this._material.setProperty("u_rate",1),this.flashTime=0,this.lightTime=0)},a.prototype.setActiveFlash=function(e){this.activeFlash=!0,this.spineAnimation.setMaterial(0,e),this._material=this.spineAnimation.getMaterial(0)},a.prototype.playAnimation=function(e,a,t,o,n){void 0===o&&(o=null),void 0===n&&(n=1),t?this.spineAnimation.setCompleteListener(t):this.spineAnimation.setCompleteListener(null),o?this.spineAnimation.setEventListener(o):this.spineAnimation.setEventListener(null),this.spineAnimation.loop=a,this.spineAnimation.timeScale=n,this.currentTimeScale=n,this.spineAnimation.paused=!1,this.spineAnimation.animation=e},a.prototype.setAnimationSkin=function(e){null!=e&&""!=e&&this.spineAnimation.setSkin(e)},a.prototype.pauseAnimation=function(){this.spineAnimation.paused||(this.spineAnimation.paused=!0)},a.prototype.resumeAnimation=function(){this.spineAnimation.paused&&(this.spineAnimation.paused=!1)},a.prototype.changeAnimationTimeScale=function(e){var a=this.currentTimeScale*e;return this.spineAnimation.timeScale!==a&&(this.spineAnimation.timeScale=a,!0)},a.prototype.setColor=function(e,a){null==e.setFromString?(a="#"==a.charAt(0)?a.substr(1):a,e.r=parseInt(a.substr(0,2),16)/255,e.g=parseInt(a.substr(2,2),16)/255,e.b=parseInt(a.substr(4,2),16)/255,e.a=(8!=a.length?255:parseInt(a.substr(6,2),16))/255):e.setFromString(a)},a.prototype.getAnimationDuration=function(e){var a=this.spineAnimation.findAnimation(e);return null==a?.5:a.duration},a.prototype.findBone=function(e){return this.spineAnimation.findBone(e)},a.prototype.flashUpdate=function(e){if(this.activeFlash&&(this.lightTime>0&&(this.lightTime-=e,this.lightTime<=0&&this.hideLight()),!(this.flashTime<=0))){this.flashTime-=e;var a=(2-Math.max(this.flashTime/.1,0))/2;this._material.setProperty("u_rate",a)}},a.prototype.flash=function(){this.activeFlash&&(this.flashTime=.1)},a.prototype.closeFlash=function(){this.activeFlash&&this._material.setProperty("u_rate",1)},a.prototype.showLight=function(){this.activeFlash&&(this.lightTime=.3,this._material.setProperty("u_color",[1,252/255,87/255,1]),this._material.setProperty("u_rate",.5))},a.prototype.hideLight=function(){this.activeFlash&&this._material.setProperty("u_rate",1)},i([l({displayName:"spine\u52a8\u753b\u7ec4\u4ef6",type:sp.Skeleton})],a.prototype,"spineAnimation",void 0),i([l({displayName:"\u5f00\u542f\u95ea\u767d"})],a.prototype,"activeFlash",void 0),i([p],a)}(cc.Component);t.pzaSpineController=s,cc._RF.pop()},{}],pzaSpineTool:[function(e,a,t){"use strict";cc._RF.push(a,"54c87MgY1NI065puHBCk/Uy","pzaSpineTool"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpineTool=void 0;var o=function(){function e(){this.zombieAtlasSpine=null,this.atlasSlotAttMap=new Map}return e.instance=function(){return e._me||(e._me=new e),e._me},e.prototype.init=function(e){this.zombieAtlasSpine=e,this.initAtlasSlot()},e.prototype.initAtlasSlot=function(){this.zombieAtlasSpine.setSkin("skin1");for(var e=this.zombieAtlasSpine._skeleton.slots,a=0;a<e.length;a++){var t=e[a],o=t.getAttachment();o&&this.atlasSlotAttMap.set(t.data.name,o)}},e.prototype.copyAttr=function(e,a){var t=new sp.spine.RegionAttachment(e);return t.region=a.region,t.rendererObject=a.rendererObject,t.path=a.path,t.x=a.x,t.y=a.y,t.scaleX=a.scaleX,t.scaleY=a.scaleY,t.rotation=a.rotation,t.width=a.width,t.height=a.height,sp.spine.Utils.arrayCopy(a.uvs,0,t.uvs,0,8),sp.spine.Utils.arrayCopy(a.offset,0,t.offset,0,8),t.color.setFromColor(a.color),t},e.prototype.setSlotAtt=function(e,a,t,o,n,i){void 0===i&&(i=0);var r=e.findSlot(a);if(e&&!r){console.log("slot\u4e3a\u7a7a,\u4f7f\u7528\u539f\u59cb\u904d\u5386\u83b7\u53d6");for(var p=0;p<e.skeletonData._skeletonCache.slots.length;p++){var l=e.skeletonData._skeletonCache.slots[p];if(l.name==a){r=l;break}}}if(r)if(t){var s=this.atlasSlotAttMap.get(t);if(s){var c=this.copyAttr(t,s);return c.x=o,c.y=n,i&&(c.rotation=i),c.updateOffset(),r.setAttachment(c),r}console.log("atlasSlotName\u4e0d\u5b58\u5728",t)}else r.setAttachment(null);else console.log("targetSlotName\u4e0d\u5b58\u5728",a)},e.prototype.setSlotAttSize=function(e,a,t,o){var n=e.findSlot(a);if(n){var i=n.getAttachment();if(i){var r=this.copyAttr(a,i);return r.width=t,r.height=o,r.updateOffset(),n.setAttachment(r),n}console.log("targetSlotName\u4e0d\u5b58\u5728",a)}else console.log("targetSlotName\u4e0d\u5b58\u5728",a)},e.findBonePos=function(e,a,t){if(!a)return null;var o=e.findBone(a);if(!o)return console.log("findBonePos\u672a\u627e\u5230",a),null;var n=t.convertToWorldSpaceAR(e.node.getPosition());return n.x+=o.worldX,n.y+=o.worldY,n},e._me=null,e}();t.pzaSpineTool=o,cc._RF.pop()},{}],pzaSplitPea:[function(e,a,t){"use strict";cc._RF.push(a,"fe46bSZniRJ554OYK8IgKeB","pzaSplitPea");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSplitPea=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.lShootNode=null,a.rShootNode=null,a.bulletPrefab=null,a.attacking=!1,a.atkAniTime1=1.4,a.atkAniTime2=1.4,a.atkAniTime3=1.4,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playNormalAni(),c.pzaGameState.usePeaPlant=!0,c.pzaGameState.onlyBoomPlant=!1,c.pzaGameState.onlyShroomCofee=!1},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=window.pzazombieManager.hasCanAttackZombie(e.baseData),o=window.pzazombieManager.hasCanAttackBackZombie(e.baseData),n=window.pzazombieManager.hasZombieInBlock(e.baseData);if(!o||!t)return o?(n?e.lShootNode.setPosition(cc.v2(0,52)):e.lShootNode.setPosition(cc.v2(-90,52)),l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack2",!1,a,function(){e.shoot(!1)})):t?(l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,a,function(){e.shoot(!0)})):void e.animation.playAnimation("idle",!1,a);n?e.lShootNode.setPosition(cc.v2(0,52)):e.lShootNode.setPosition(cc.v2(-90,52)),l.pzaSoundManager.playAudio("PeashooterAtk");var i=0;e.animation.playAnimation("attack3",!1,a,function(){0==i&&e.shoot(!0),e.shoot(!1),i++})};a()},a.prototype.shoot=function(e){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var o=e?this.rShootNode.convertToWorldSpaceAR(cc.v2()):this.lShootNode.convertToWorldSpaceAR(cc.v2()),n=a.convertToNodeSpaceAR(o);t.setPosition(n);var i=t.getComponent(s.pzaBaseBullet);if(null!=i&&(i.init(this.baseData.yIndex,this.baseData.atk,1,null,e?cc.v2(1,0):cc.v2(-1,0)),e)){var l=c.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*c.pzaGameState.map.getBlockWidth())}}}}},i([m({displayName:"\u5de6\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"lShootNode",void 0),i([m({displayName:"\u53f3\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"rShootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([h],a)}(u.pzaBasePlant);t.pzaSplitPea=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSpriteFrameManager:[function(e,a,t){"use strict";cc._RF.push(a,"d13677cUm5Cm5ueL3UZ51Y4","pzaSpriteFrameManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSpriteFrameManager=void 0;var r=e("../Battle/Data/pzaZombieEnum"),p=e("../Load/pzaBundleObjectPool"),l=e("./pzaGameConfig"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.defaultHead=null,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){t.instance=this},a.loadZombieCard=function(e,a){e==r.pzaZombieEnum.IMP_MINI&&(e=r.pzaZombieEnum.IMP);var t="resources/Texture/ZombieIcon/ZombieIcon_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadPropIcon=function(e,a){null!=e&&p.pzaBundleObjectPool.requestSpriteFrameByAtlas("resources/Texture/PropIcon/propTP",e.toString(),function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadPlantCG=function(e,a,t){if(null!=e){var o="resources/Texture/PlantCG/PlantCG_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(o,function(e,o){null==e?null!=a&&(a.spriteFrame=o,t&&t()):console.error(e)})}},a.loadPlantCard=function(e,a){if(null!=e){var t="resources/Texture/PlantIcon/PlantIcon_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})}},a.loadPlantProfess=function(e,a){var t="resources/Texture/PlantCard/profess_small_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadPlantProfessBig=function(e,a){var t="resources/Texture/PlantCard/profess_big_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadSkinCard=function(e,a){if(e){var t="resources/Texture/SkinIcon/"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})}},a.loadPlantWholeCard=function(e,a){if(null!=e){var t="resources/Texture/wholePlantIcon/whole_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})}},a.loadBeltCard=function(e,a){if(null!=e){var t="resources/Texture/PropIcon/propTP";console.log("loadBeltCard url===>",t+"/"+e),p.pzaBundleObjectPool.requestSpriteFrameByAtlas(t,e,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})}},a.loadMap=function(e,a){var t="resources/Texture/Map/background"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(a,t){null==a?null!=e&&(e.spriteFrame=t):console.error(a)})},a.loadPreMapByType=function(e,a){var t="resources/Texture/Map/pre_bg_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadPreMap=function(e,a,t){void 0===t&&(t="");var o="resources/Texture/Map/pre_bg_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(o,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadInDoorByType=function(e,a){var t="resources/Texture/Map/indoor_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadInDoor=function(e,a){var t="resources/Texture/Map/indoor_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadGoldPlant=function(e,a){var t=3e3+e;this.loadCommonGoodsIcon(t,a)},a.loadShopItemIcon=function(e,a){var t=3e3+e;this.loadCommonGoodsIcon(t,a)},a.loadCommonGoodsIcon=function(e,a){e<3e3&&(e+=3e3);var t="resources/Texture/Goods/"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.warn(e)})},a.loadPlantImg=function(e,a){var t="resources/Texture/"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadGuanKaImg=function(e,a){var t="resources/Texture/GuanKa/"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadCommonImg=function(e,a){"4_2"==e?e="coin2":"4_3"==e?e="coin3":"13_2"==e&&(e="morePower"),p.pzaBundleObjectPool.requestSpriteFrameByAtlas("resources/Texture/PropIcon/propTP",e,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadAchieveIcon=function(e,a){var t=e;p.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/Achieve/achieveIcon/achieve_"+t,function(e,t){t&&(a.spriteFrame=t)})},a.showPlayerHeadImage=function(e,a){e&&"null"!=e&&cc.assetManager.loadRemote(e,{ext:".head"},function(t,o){if(!t&&o){var n=new cc.SpriteFrame(o);a&&a(e,n)}else a&&a(e,this.instance&&this.instance.defaultHead)})},a.showDefaultHead=function(e){null!=e&&(e.spriteFrame=this.instance&&this.instance.defaultHead)},a.showSpePartIcon=function(e,a){var t="resources/Texture/PartTipsIcon/PartTipsIcon_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})},a.loadDescPlantCG=function(e,a){if(null!=e){var t="resources/Texture/DescCG/DescCG_"+e;p.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(e,t){null==e?null!=a&&(a.spriteFrame=t):console.error(e)})}},a.loadSpriteFrame=function(e,a){p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(e,t){null==e?a&&a(t):console.error(e)})},a.loadPlantCardSlotFrame=function(e,a,t){void 0===t&&(t=!1);var o=l.pzaGameConfig.getPlantConfig(a);if(o&&o.rareLevel){var n=1==o.rareLevel?"1":"2";t&&(n="0");var i="resources/Texture/PlantCard/card_slot_"+n;this.loadSpriteFrame(i,function(a){e.spriteFrame=a})}},a.loadPlantCardPriceFrame=function(e,a,t){void 0===t&&(t=!1);var o=l.pzaGameConfig.getPlantConfig(a);if(o&&o.rareLevel){var n=1==o.rareLevel?"1":"2";t&&(n="0");var i="resources/Texture/PlantCard/card_price_"+n;this.loadSpriteFrame(i,function(a){e.spriteFrame=a})}},a.instance=null,i([u({displayName:"\u9ed8\u8ba4\u73a9\u5bb6\u5934\u50cf",type:cc.SpriteFrame})],a.prototype,"defaultHead",void 0),t=i([c],a)}(cc.Component);t.pzaSpriteFrameManager=d,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","./pzaGameConfig":"pzaGameConfig"}],pzaSquashZombie:[function(e,a,t){"use strict";cc._RF.push(a,"4f098TzwlZJGqAJJ4c5BCWS","pzaSquashZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSquashZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaSpineController"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../Plant/pzaAttackType"),u=e("../pzaEffectManager"),d=e("../pzaGameState"),h=e("./pzaNormalZombie"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jumpUpTime=0,a.speedX=0,a.jumpTarget=null,a.squashAni=null,a.hurtState=1,a.findPlant=!1,a}return n(a,e),a.prototype.initEquips=function(){e.prototype.initEquips.call(this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.findPlant=!1,this.hurtState=1,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,this.squashAni.node.setPosition(0,0),this.squashAni.node.active=!1,this.squashAni.node.scaleX-=.2,this.squashAni.node.scaleY-=.2,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var t=this.animation.findBone("aduck");this.hasUseSrAni?t&&(t.scaleX=.158,t.scaleY=.158):t&&(t.scaleX=0,t.scaleY=0)},a.prototype.logicUpdate=function(e){var a=this;if(this.jumpUpTime>0){if(this.jumpUpTime-=e,this.squashAni.node.x+=this.speedX*e,this.jumpUpTime<=0){var t=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);this.squashAni.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){t?r.pzaSoundManager.playAudio("zombiesplash"):r.pzaSoundManager.playAudio("gargantuar_thump"),a.squashAni.playAnimation("1plant/jumpdown_plant",!1,function(){t||u.pzaEffectManager.createSquashEffect(cc.v2(a.baseData.logicPos.x+a.squashAni.node.x,a.baseData.logicPos.y))})}),cc.spawn(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){a.removePlant()})),cc.moveTo(2/15,cc.v2(this.squashAni.node.x,-50)).easing(cc.easeBackIn())),cc.delayTime(t?0:.3),cc.callFunc(function(){a.squashAni.node.active=!1,a.death(!0)})))}}else if(!this.findPlant&&null!=this.baseData&&null!=this.baseData.zombieData&&(!this.isPlayEquipDeath||this.baseData.buffData.hasBuff(l.pzaBuffType.FROZEN))&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(e);else{var o=this.findTarget();(3==d.pzaGameState.curChapter||4==d.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(o=null),o&&!o.isDead?this.attack(e,o):this.updateMove(e)}else this.changeRowMove(e)}},a.prototype.updateMove=function(a){var t=this.baseData.xIndex;e.prototype.updateMove.call(this,a);var o=this.baseData.xIndex;t<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),u.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.curShadow&&this.curShadow.hideShadow()):o<0&&t>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},a.prototype.removePlant=function(){var e=""+this.jumpTarget.xIndex+this.jumpTarget.yIndex,a=window.pzaplantManager.pumpkinDataMap.get(e);if(null!=a){var t=window.pzaplantManager.getPlantByData(a);t&&t.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.BANG)}var o=window.pzaplantManager.plantDataMap.get(e);if(null!=o){var n=window.pzaplantManager.getPlantByData(o);n&&n.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.BANG)}var i=window.pzaplantManager.plantEnvDataMap.get(e);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.BANG)}var p=window.pzaplantManager.notTargetMap.get(e);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.BANG)}},a.prototype.attack=function(e,a){var t=this;this.jumpTarget=a,this.findPlant=!0;var o=this.animation.findBone("plant");o&&(o.scaleX=0,o.scaleY=0,o.active=!1),this.animation.playAnimation("jumpup1",!1),this.squashAni.node.active=!0,this.squashAni.playAnimation("1plant/jumpup1_plant",!1,function(){t.squashAni.playAnimation("1plant/jumpup2_plant",!1,function(){t.squashAni.playAnimation("1plant/jumpup3_plant",!1)});var e=t.animation.getAnimationDuration("1plant/jumpup2_plant");t.jumpUpTime=e;var o=10*-a.yIndex+6;t.node.zIndex=o;var n=a.logicPos.x-t.baseData.logicPos.x;t.speedX=n/e}),this.preventBreak()},a.prototype.zombieHurt=function(){this.zombieHurtState=s.pzaHurtStateEnum.HURT,this.curSkinName="1plant/1zombie_plant_1_2",this.hurtState=2,this.changeSkin(this.curSkinName)},a.prototype.death=function(a,t){void 0===t&&(t=null),e.prototype.death.call(this,a,null,!1)},a.prototype.ashesDeath=function(a,t){e.prototype.ashesDeath.call(this,a,t,this.hasInWater?"blow_1pant_duck":"blow_1pant")},i([z({displayName:"\u7a9d\u74dc\u52a8\u753b",type:p.pzaSpineController})],a.prototype,"squashAni",void 0),i([f],a)}(h.pzaNormalZombie);t.pzaSquashZombie=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie"}],pzaSquash:[function(e,a,t){"use strict";cc._RF.push(a,"81fc9M/dexOrq+atyCuJ59k","pzaSquash");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSquash=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaSoundManager"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaZombieEnum"),u=e("../pzaGameState"),d=e("./pzaAttackType"),h=e("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.jumpTarget=null,a.jumpUpTime=0,a.speedX=0,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.animation.node.stopAllActions(),this.animation.node.y=-5,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,this.baseData.isDead=!1,this.playNorAni(),this.body.node.getComponent(cc.BoxCollider).enabled=!0,u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1},a.prototype.logicUpdate=function(a){if(e.prototype.logicUpdate.call(this,a),this.jumpUpTime>0&&null!=this.jumpTarget&&null!=this.jumpTarget.logicPos)return this.jumpUpTime-=a,this.baseData.logicPos.x+=this.speedX*a,void this.jumpUpTime},a.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},a.prototype.findTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1,o=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null==o)return null;if(o.forEach(function(o){if(o&&!o.isDead&&o.logicPos&&!(o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.DIVE)&&o.zombieData.zombieType!=c.pzaZombieEnum.SNORKEL_ZOMBIE)){var n=Math.abs(e.baseData.logicPos.x-o.logicPos.x);-1!=t&&n>=t||o.logicPos.x<e.baseData.logicPos.x&&n>.5*u.pzaGameState.map.getBlockWidth()||o.logicPos.x>e.baseData.logicPos.x&&n>1.8*u.pzaGameState.map.getBlockWidth()||(t=n,a=o)}}),!a){var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&n.baseData&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&(a=window.pzazombieManager.drZomBoss.baseData)}return a},a.prototype.damageTarget=function(e){var a=this;if(null!=this.baseData&&null!=e){var t=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=t){var o=0;t.forEach(function(t){if(t&&!t.isDead&&t.logicPos&&!(Math.ceil(Math.abs(e.x-t.logicPos.x))>=u.pzaGameState.map.getBlockWidth())){var n=window.pzazombieManager.getZombie(t);n&&n.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BANG),t.isDead&&o++}});var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&n.baseData&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&n&&n.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_20,o)}}},a.prototype.playNorAni=function(){var e=this,a=this.findTarget();if(null!=a)return this.jumpTarget=a,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,void this.animation.playAnimation("attack",!1,function(){window.pzaMapManager.isInWaterWay(e.baseData.yIndex)?l.pzaSoundManager.playAudio("zombiesplash"):l.pzaSoundManager.playAudio("gargantuar_thump"),window.pzaplantManager.removePlant(e.baseData),e.death()},function(t,o){if(o){var n=e.animation.getAnimationDuration("jumpup2");e.jumpUpTime=n;var i=10*-a.yIndex+6;e.node.zIndex=i,e.damageTarget(e.jumpTarget.logicPos)}});this.animation.playAnimation("idle",!1,this.playNorAni.bind(this))},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.animation.node.pauseAllActions()},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.animation.node.resumeAllActions()},i([f],a)}(h.pzaBasePlant));t.pzaSquash=z,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaStarFruitShadow:[function(e,a,t){"use strict";cc._RF.push(a,"68b4f/6l2NC8IeaIP9jO6rZ","pzaStarFruitShadow");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaStarFruitShadow=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this),this.node.zIndex=-300},a.prototype.showNode=function(){this.node.opacity=120},a.prototype.hideNode=function(){this.node.opacity=0},a.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this)},a.prototype.closeNode=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],a)}(cc.Component));t.pzaStarFruitShadow=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaStarFruit:[function(e,a,t){"use strict";cc._RF.push(a,"16374wVFltJwqD9k1Th58af","pzaStarFruit");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaStarFruit=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaGameManager"),l=e("../../Common/pzaNodeManager"),s=e("../../Common/pzaSoundManager"),c=e("../../Common/pzaUtil"),u=e("../Bullet/pzaBaseBullet"),d=e("../Data/pzaBuffData"),h=e("../Data/pzaPlantEnum"),m=e("../pzaGameState"),f=e("./pzaAttackType"),z=e("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.playNormalAni(),m.pzaGameState.onlyShroomCofee=!1,m.pzaGameState.onlyBoomPlant=!1,this.checkFruitMode()},a.prototype.checkFruitMode=function(){if(!0!==m.pzaGameState.partWin&&m.pzaGameState.isWatchStarMode()){var e=""+this.baseData.xIndex+this.baseData.yIndex;window.pzaplantManager.starFruitMap.get(e)&&window.pzaplantManager.starFruitMap.get(e).hideNode();var a=0;window.pzaplantManager.starFruitMap.forEach(function(e,t){window.pzaplantManager.plantDataMap.get(t)&&window.pzaplantManager.plantDataMap.get(t).plantData.plantType==h.pzaPlantEnum.STAR_FRUIT&&a++}),a==window.pzaplantManager.starFruitMap.size&&(m.pzaGameState.partWin=!0,m.pzaGameState.isGameEnd=!0,p.pzaGameManager.passPart(this.baseData.logicPos),window.pzazombieManager.zombieMap.forEach(function(e,a){null!=e&&null!=a&&null!=a.logicPos&&null!=e.baseData&&e.hurt(1e6,null,f.pzaAttackType.DEATH_ANI)}),m.pzaGameState.starModeGameOver=!0)}},a.prototype.playNormalAni=function(){var e=this,a=function(){if(null!=e.findAttackTarget())return s.pzaSoundManager.playAudio("StarFruit"),void e.animation.playAnimation("attack",!1,a,function(){e.attack()});e.animation.playAnimation("idle",!1,a)};a()},a.prototype.findAttackTarget=function(){var e=this,a=null;return window.pzazombieManager.zombieMap.forEach(function(t,o){if(null==a&&null!=o&&!o.buffData.hasBuff(d.pzaBuffType.FLY)&&!o.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT))if(o.yIndex==e.baseData.yIndex&&o.logicPos.x<=e.baseData.logicPos.x)a=o;else if(o.xIndex!=e.baseData.xIndex){var n=cc.v2(e.baseData.logicPos.x+e.shootNode.x,e.baseData.logicPos.y+e.shootNode.y),i=o.logicPos.sub(n);if(e.baseData.logicPos.y<o.logicPos.y){var r=c.pzaUtil.getVectorsRadion(cc.v2(Math.sqrt(3)/2,.5),i),p=Math.sin(r)*i.len();if(p>=-30&&p<=30)return void(a=o)}var l=c.pzaUtil.getVectorsRadion(cc.v2(Math.sqrt(3)/2,-.5),i),s=Math.sin(l)*i.len();s>=-40&&s<=30&&(a=o)}else a=o}),null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.attack=function(){var e=this;if(null!=this.baseData&&!this.baseData.isDead){var a=[cc.v2(-1,0),cc.v2(0,1),cc.v2(Math.sqrt(3)/2,.5),cc.v2(Math.sqrt(3)/2,-.5),cc.v2(0,-1)],t=[180,-90,-40,45,90];a.forEach(function(a,o){e.shoot(a,t[o])})}},a.prototype.shoot=function(e,a){var t=l.pzaNodeManager.getBulletNode();if(null!=t){var o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=o){o.setParent(t);var n=this.shootNode.convertToWorldSpaceAR(cc.v2()),i=t.convertToNodeSpaceAR(n);o.setPosition(i);var p=o.getComponent(u.pzaBaseBullet);if(null!=p&&(p.init(-1,this.baseData.atk,1,null,e,this.getBulletAni()),p.setRotation(a),!(e.x<=0))){var s=m.pzaGameState.map.getMapSkewColumn();s>0&&this.baseData.xIndex<=s-2&&(p.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}},a.prototype.close=function(){e.prototype.close.call(this)},i([v({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([v({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([g],a)}(z.pzaBasePlant);t.pzaStarFruit=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaStateComponent:[function(e,a,t){"use strict";cc._RF.push(a,"9e2c0GREKJPX5OImvXLEtIa","pzaStateComponent");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=e("./pzaKDefine"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.state=r.State.idle,a.stateMap={idle:function(){}},a}return n(a,e),a.prototype.setState=function(e){cc.Tween.stopAllByTarget(this.node),this.state=e},a.prototype.regState=function(e,a){this.stateMap[e]=a},a.prototype.updateFrame=function(e){this.stateMap[this.state].call(this,e)},i([l],a)}(cc.Component));t.default=s,cc._RF.pop()},{"./pzaKDefine":"pzaKDefine"}],pzaStatisticsMgr:[function(e,a,t){"use strict";cc._RF.push(a,"a28a0oabexCVLrIFbs0weJy","pzaStatisticsMgr"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaStatisticsMgr=t.pzaEventLevelType=void 0;var o=e("../Battle/pzaGameState"),n=e("../utils/pzaChannel"),i=e("./pzaLocalData"),r=e("./pzaUtil");(function(e){e[e.failed=0]="failed",e[e.completed=1]="completed",e[e.start=2]="start"})(t.pzaEventLevelType||(t.pzaEventLevelType={}));var p=function(){function e(){}return e.init=function(e){"oppo"!==n.pzaChannel.instance().getChannel().channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel&&TDAnalytics.init(e)},e.login=function(e){"oppo"!==n.pzaChannel.instance().getChannel().channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel&&TDAnalytics.login(e)},e.setUserProp=function(){var e=n.pzaChannel.instance().getChannel();if(("wx"===e.channel||"tt"==n.pzaChannel.instance().channel)&&"oppo"!==e.channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel){var a={openid:e.channelUserId,gameid:6666,gameversion:n.pzaChannel.version,level:parseInt(i.pzaLocalData.data.curChapter+""+i.pzaLocalData.data.curPart),coins:i.pzaLocalData.data.coin};1==i.pzaLocalData.isNewUser?(a.tracetime=new Date,a.channel=e.reportChannel,TDAnalytics.userSetOnce({properties:a})):TDAnalytics.userSet({properties:a})}},e.setPubProp=function(){var e=n.pzaChannel.instance().getChannel();if(("wx"===e.channel||"tt"==n.pzaChannel.instance().channel)&&"oppo"!==e.channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel){var a=1;null!=i.pzaLocalData.data.reachPartTime&&(a=r.pzaUtil.getDayInterval(i.pzaLocalData.data.reachPartTime,Date.now())+1);var t={level:parseInt(i.pzaLocalData.data.curChapter+""+i.pzaLocalData.data.curPart),day:a,coins:i.pzaLocalData.data.coin,channel:e.reportChannel,openid:e.channelUserId,is_new:i.pzaLocalData.isNewUser};TDAnalytics.setSuperProperties(t)}},e.sendEvent=function(e){for(var a=[],t=1;t<arguments.length;t++)a[t-1]=arguments[t];console.log("\u53d1\u9001\u4e8b\u4ef6: name",e),console.log("\u53d1\u9001\u4e8b\u4ef6: props",a);var o=n.pzaChannel.instance().getChannel();if("noAD"!==o.channel&&"oppo"!==o.channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel){this.setPubProp();var i={};null!=a&&a.forEach(function(e){i[e.name]=e.value}),TDAnalytics.track({eventName:e,properties:i})}},e.sendLevelEvent=function(e,a,t,n,i){var r=-1;switch(i){case o.pzaGameMode.NORMAL:case o.pzaGameMode.NORMAL_WEEKTWO:r=1;break;case o.pzaGameMode.SURVIVAL:case o.pzaGameMode.SUR_ENDLESS:r=2;break;default:return}a&&2==a?(this.sendEvent("leveling",{name:"level",value:e},{name:"type",value:r}),this.sendEvent("level",{name:"level",value:e},{name:"is_Win",value:a},{name:"Use",value:t},{name:"time",value:n},{name:"type",value:r})):this.sendEvent("level",{name:"level",value:e},{name:"is_Win",value:a},{name:"Use",value:t},{name:"time",value:n},{name:"type",value:r})},e}();t.pzaStatisticsMgr=p,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaSunFlower:[function(e,a,t){"use strict";cc._RF.push(a,"a67d7VbSSNC2qvchm9+QwqV","pzaSunFlower");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSunFlower=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaUtil"),s=e("../../Common/pzaWorldEventManager"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=e("../Data/pzaGuideType"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.createGuideSun=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.GUIDE_TIPS,this.showGuideSun,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GUIDE_TIPS,this.showGuideSun,this)},a.prototype.showGuideSun=function(e){var a=this;"showCreateSunTips"===e?this.createGuideSun=!0:"createSunAndTips"===e&&this.animation.playAnimation(r.pzaPlantSkName.SUN_FLOWER.sunLight,!1,this.logicAniCom,function(){window.pzaplantManager.plantCreateSun(a.baseData.logicPos.clone(),!0,null,null)})},a.prototype.bindData=function(a){var t=this;if(e.prototype.bindData.call(this,a),c.pzaGameState.isZombieMode())this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!0);else{0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=l.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!c.pzaGameState.gameWin&&t.baseData.plantData.atkInterval<=0&&!c.pzaGameState.guideSunPause){if(t.baseData.plantData.atkInterval=0,null==t.baseData||t.baseData.isDead)return;return t.baseData.plantData.atkInterval=l.pzaUtil.getRandomFloatNum(23.5,25),p.pzaSoundManager.playAudio("SunShroom"),void t.animation.playAnimation(r.pzaPlantSkName.SUN_FLOWER.sunLight,!1,o,function(){window.pzaplantManager.plantCreateSun(t.baseData.logicPos.clone(),!0,null,null,t.createGuideSun),t.createGuideSun&&(t.createGuideSun=!1)})}t.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!1,o)};this.logicAniCom=o,this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!1,o),c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1}},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.baseData.plantData.atkInterval-=a)},a.prototype.hurt=function(a,t,o){var n=this.baseData.maxHp-this.baseData.hp;if(e.prototype.hurt.call(this,a,t,o),c.pzaGameState.isZombieMode())for(var i=this.baseData.maxHp-this.baseData.hp,r=Math.floor(i/37)-Math.floor(n/37),p=0;p<r;p++)window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0)},a.prototype.steal=function(){if(c.pzaGameState.isZombieMode())for(var e=this.baseData.maxHp-this.baseData.hp,a=this.baseData.hp,t=Math.floor(a/37)-Math.floor(e/37),o=0;o<t;o++)window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0)},a.prototype.death=function(a,t,o,n,i){e.prototype.death.call(this,a,t,o,n,i),window.pzaGuideManager.guideType==d.pzaGuideType.FORCE_GUIDE_1_4&&setTimeout(function(){window.pzaGuideManager.guideStepNext()},500)},i([m],a)}(u.pzaBasePlant));t.pzaSunFlower=f,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaGuideType":"pzaGuideType","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunLight:[function(e,a,t){"use strict";cc._RF.push(a,"42f77b1njtIFLkVhJG239kv","pzaSunLight");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSunLight=void 0;var r=e("../Achieve/pzaAchieve"),p=e("../Achieve/pzaAchieveMgr"),l=e("../Common/pzaBaseComponent"),s=e("../Common/pzaGameCommonPool"),c=e("../Common/pzaGameConfig"),u=e("../Common/pzaGameManager"),d=e("../Common/pzaGamePartConfig"),h=e("../Common/pzaLocalData"),m=e("../Common/pzaNodeManager"),f=e("../Common/pzaOperationMgr"),z=e("../Common/pzaSoundManager"),y=e("../Common/pzaSpineController"),g=e("../Common/pzaUtil"),v=e("../Common/pzaWorldEventManager"),b=e("../Load/pzaPreLoadManager"),P=e("../View/Battle/pzaPlantSelectView"),C=e("../View/pzaBubbleItem"),E=e("./Data/pzaGuideType"),S=e("./Data/pzaPlantEnum"),_=e("./pzaGameState"),D=cc._decorator,M=D.ccclass,w=D.property,T=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spineAnimation=null,a.poolPrefab=null,a.liveTime=0,a.disappearing=!1,a.picked=!1,a.leftDropDis=0,a.sunValue=0,a.guideState=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.spineAnimation.playAnimation("idle",!0),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.AUTO_PICK,this.autoPick,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.PASS_PICK,this.passPick,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.GUIDE_TIPS,this.showGuideTips,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.AUTO_PICK,this.autoPick,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.PASS_PICK,this.passPick,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.GUIDE_TIPS,this.showGuideTips,this)},a.prototype.init2=function(e,a,t,o){var n=this;if(void 0===o&&(o=!1),null!=e){var i=e.x,r=e.y;if(this.node.stopAllActions(),this.node.opacity=255,this.sunValue=t,this.node.scale=a,this.liveTime=0,this.disappearing=!1,this.picked=!1,o)return this.node.setPosition(cc.v2(i,r)),void(this.leftDropDis=c.pzaGameConfig.getRandomSunDis());this.leftDropDis=0;var p=a;r+=50*Math.random()*p,i>500&&(i=500),this.node.setPosition(cc.v2(i,r));var l=g.pzaUtil.getRandomFloatNum(-50,50)*p;this.node.runAction(cc.sequence(cc.jumpTo(.6*p,cc.v2(i+l,r),80*p,1),cc.callFunc(function(){n.autoPick()})))}else this.close()},a.prototype.init=function(e,a,t,o){var n=this;if(void 0===o&&(o=!1),null!=e){if(this.node.stopAllActions(),this.node.opacity=255,this.sunValue=t?c.pzaGameConfig.bigSunValue:c.pzaGameConfig.smallSunValue,this.node.scale=t?1:.5,this.liveTime=0,this.disappearing=!1,this.picked=!1,a)return this.node.setPosition(e),void(this.leftDropDis=c.pzaGameConfig.getRandomSunDis());this.leftDropDis=0;var i=t?1:.5;e.y+=50*Math.random()*i,this.node.setPosition(e);var r=o?0:g.pzaUtil.getRandomFloatNum(-50,50)*i;this.node.runAction(cc.sequence(cc.jumpTo(.6*i,cc.v2(e.x+r,e.y),80*i,1),cc.callFunc(function(){n.autoPick()})))}else this.close()},a.prototype.initAdSun=function(e,a){var t=this;this.node.stopAllActions(),this.node.opacity=255,this.sunValue=0,this.node.scale=1,this.liveTime=0,this.disappearing=!0,this.picked=!0,this.node.setPosition(e),this.node.runAction(cc.sequence(cc.moveTo(.5,a).easing(cc.easeQuarticActionOut()),cc.delayTime(.1),cc.callFunc(function(){t.moveToUI()})))},a.prototype.logicUpdate=function(e){this.disappearing||(this.liveTime+=e,this.liveTime>=c.pzaGameConfig.sunLiveTime?this.disappear():this.drop(e))},a.prototype.drop=function(e){if(!(this.leftDropDis<=0||this.guideState)){var a=e*c.pzaGameConfig.autoSunSpeed;a>this.leftDropDis&&(a=this.leftDropDis),this.leftDropDis-=a,this.node.y=this.node.y-a,this.node.y<=100&&this.autoPick()}},a.prototype.clickSun=function(){_.pzaGameState.gamePause||this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),z.pzaSoundManager.playAudio("getSun"),this.guideState&&(this.guideState=!1,f.pzaOperationMgr.closeTips(0)),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_PLANT_1_1&&(6!=window.pzaGuideManager.guideStep&&7!=window.pzaGuideManager.guideStep||window.pzaGuideManager.guideStepNext()))},a.prototype.autoPick=function(){_.pzaGameState.autoPickLeft<=0||this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),z.pzaSoundManager.playAudio("getSun"),this.guideState&&(this.guideState=!1,f.pzaOperationMgr.closeTips(0)),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_PLANT_1_1&&(6!=window.pzaGuideManager.guideStep&&7!=window.pzaGuideManager.guideStep||window.pzaGuideManager.guideStepNext()))},a.prototype.passPick=function(){this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),z.pzaSoundManager.playAudio("getSun"))},a.prototype.disappear=function(){window.pzaplantManager.AllSunLight.delete(this),this.disappearing=!0,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(this.close.bind(this))))},a.prototype.moveToUI=function(){var e=this;if(this.disappearing=!0,this.picked=!0,null==_.pzaGameState.sunMoveUIPos)return _.pzaGameState.sunLightCount+=this.sunValue,h.pzaLocalData.bpGetSun(this.sunValue),void this.close();var a=m.pzaNodeManager.getBattleUINode();if(this.node.setParent(a),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,_.pzaGameState.sunMoveUIPos).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),cc.callFunc(function(){_.pzaGameState.pickSunCount+=e.sunValue,_.pzaGameState.sunLightCount+=e.sunValue,_.pzaGameState.pickCoinCount+=e.sunValue,h.pzaLocalData.bpGetSun(e.sunValue),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_10,_.pzaGameState.pickCoinCount),e.close()}))),!_.pzaGameState.showSunUI){if(_.pzaGameState.isVaseMode())return window.pzaMapManager.showSunUI(),void u.pzaGameManager.showBattleUI(b.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){var a=e&&e.getComponent(P.pzaPlantSelectView);a&&a.init([S.pzaPlantEnum.CHERRY_BOMB],function(){a&&a.initPlant()})});if(_.pzaGameState.gameMode==_.pzaGameMode.KNOCK_ZOMBIE||_.pzaGameState.gameMode==_.pzaGameMode.KNOCK_ZOMBIE_MINIGAME||_.pzaGameState.gameMode==_.pzaGameMode.MINIGAME_KNOCK){window.pzaMapManager.showSunUI();var t;t=2==_.pzaGameState.curChapter&&7==_.pzaGameState.curPart?d.pzaGamePartConfig.getPartDefaultPlant(2,5):d.pzaGamePartConfig.getPartDefaultPlant(_.pzaGameState.curChapter,_.pzaGameState.curPart),u.pzaGameManager.showBattleUI(b.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){var a=e&&e.getComponent(P.pzaPlantSelectView);a&&a.init(t,null),a&&a.initPlant()})}}},a.prototype.pauseSelf=function(){this.picked||(this.spineAnimation.pauseAnimation(),this.node.pauseAllActions())},a.prototype.resumeSelf=function(){this.spineAnimation.resumeAnimation(),this.node.resumeAllActions()},a.prototype.showGuideTips=function(e){"showSunTips"===e?(this.guideState=!0,this.liveTime=-999999,this.spineAnimation.playAnimation("idle2",!0),f.pzaOperationMgr.showTips(this.node,0,0,"\u8bf7\u70b9\u51fb\u6536\u96c6\u80fd\u91cf",C.pzaBubbleType.tips,3e4,null,3e4)):"hideSunTips"===e&&(this.guideState=!1)},a.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([w({displayName:"spine\u52a8\u753b\u7ec4\u4ef6",type:y.pzaSpineController})],a.prototype,"spineAnimation",void 0),i([w(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([M],a)}(l.pzaBaseComponent);t.pzaSunLight=T,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaBubbleItem":"pzaBubbleItem","./Data/pzaGuideType":"pzaGuideType","./Data/pzaPlantEnum":"pzaPlantEnum","./pzaGameState":"pzaGameState"}],pzaSunShroom:[function(e,a,t){"use strict";cc._RF.push(a,"24255GcIXxBbJDyg2usbMpg","pzaSunShroom");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSunShroom=void 0;var r=e("../../Common/pzaNameConf"),p=e("../../Common/pzaSoundManager"),l=e("../Data/pzaBuffData"),s=e("../pzaGameState"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shadow=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=24),a.plantData.sleeping?(this.sleep(),this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!0,null,null,0)):this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!1,this.playIdleAni.bind(this)),s.pzaGameState.useShroom=!0,a.plantData.canBeShoot=!1,s.pzaGameState.onlyBoomPlant=!1},a.prototype.logicUpdate=function(a){var t=this;if(e.prototype.logicUpdate.call(this,a),!(null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||this.baseData.buffData.hasBuff(l.pzaBuffType.FROZEN)||(this.grow(a),this.baseData.plantData.atkInterval-=a,s.pzaGameState.gameWin||this.baseData.plantData.atkInterval>0))){this.baseData.plantData.atkInterval=24;var o=this.baseData.plantData.growStep>=1?r.pzaPlantSkName.SUN_SHROOM.big_sunlight:r.pzaPlantSkName.SUN_SHROOM.small_sunlight;this.animation.playAnimation(o,!1,function(){t.playIdleAni()},function(){window.pzaplantManager.plantCreateSun(t.baseData.logicPos.clone(),t.baseData.plantData.growStep>=1)}),p.pzaSoundManager.playAudio("SunShroom")}},a.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(e.prototype.wakeUp.call(this),this.baseData.plantData.sleeping=!1,this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!1,this.playIdleAni.bind(this)))},a.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation(r.pzaPlantSkName.COMMON.idle,!0))},a.prototype.grow=function(e){this.baseData.plantData.growTime+=e,this.baseData.plantData.growStep>=1||this.baseData.plantData.growTime<=120||(this.baseData.plantData.growStep=1)},a.prototype.playIdleAni=function(){this.animation.playAnimation(r.pzaPlantSkName.COMMON.idle,!1,this.playIdleAni.bind(this))},i([d],a)}(c.pzaBasePlant));t.pzaSunShroom=h,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSuperChomper:[function(e,a,t){"use strict";cc._RF.push(a,"40a3e3X5CxDVZCnOfVaBBMz","pzaSuperChomper");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSuperChomper=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaUtil"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../pzaGameState"),u=e("./pzaAttackType"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.eating=!1,a.isEat=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.eating=!1,this.animation.playAnimation(a.plantData.eatTime>0?"idle2":"idle1",!0),c.pzaGameState.onlyShroomCofee=!1},a.prototype.logicUpdate=function(a){var t=this;if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=a,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation("eat",!1,function(){t.eating=!1,t.animation.playAnimation("idle1",!0)})));if(!this.eating&&!this.isEat){var o=this.findAttackTarget();if(null!=o)if(Math.random()<.2){var n=this.findSpecialAttackTarget();n.length>0&&this.specialAttack(n)}else this.attack(o)}}},a.prototype.findAttackTarget=function(){var e=this;if(null!=this.baseData&&!this.baseData.isDead){var a=null,t=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=e.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,e.baseData.logicPos);if(o.logicPos.x<=e.baseData.logicPos.x)n<=.5*c.pzaGameState.map.getBlockWidth()&&(a=o,t=0);else if(!(n>1.8*c.pzaGameState.map.getBlockWidth()))return-1==t?(a=o,void(t=n)):void(t<=n||(a=o,t=n))}}),null==a){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(a=window.pzazombieManager.drZomBoss.baseData)}return a}},a.prototype.findSpecialAttackTarget=function(){var e=this,a=[];return window.pzazombieManager.zombieMap.forEach(function(t,o){null==t||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE)||(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType==s.pzaZombieEnum.BUNGEE_ZOMBIE&&o.xIndex==e.baseData.xIndex||e.baseData.yIndex==o.yIndex&&o.xIndex>=e.baseData.xIndex&&o.xIndex<=e.baseData.xIndex+3&&a.push(o))}),a},a.prototype.attack=function(e){var a=this;this.baseData.plantData.eatTime=20,this.isEat=!0,this.animation.playAnimation("attack1",!1,function(){a.animation.playAnimation(a.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(a.isEat=!1,a.baseData&&!a.baseData.isDead){var t=window.pzazombieManager.getZombie(e);null==t||null==t.baseData||t.baseData.isDead?a.baseData.plantData.eatTime=0:(t.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.HIT_FLY),null==e.zombieData||e.zombieData.cate!==s.pzaZombieCate.Gargantuar&&e.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(r.pzaSoundManager.playAudio("ChomperAtk"),e.isDead||(a.baseData.plantData.eatTime=0)):a.baseData.plantData.eatTime=0)}})},a.prototype.specialAttack=function(e){var a=this,t=0,o=0;this.isEat=!0,this.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation(a.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){a.isEat=!1,a.baseData&&!a.baseData.isDead&&(e.forEach(function(e){var n=window.pzazombieManager.getZombie(e);null==n||null==n.baseData||n.baseData.isDead?a.baseData.plantData.eatTime=0:null==e.zombieData||e.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(n.hurt(200*a.baseData.atk,a.baseData,u.pzaAttackType.DEATH),null!=e.zombieData&&e.zombieData.zombieType==s.pzaZombieEnum.GARGANTUAR?t+=20:null!=e.zombieData&&e.zombieData.zombieType==s.pzaZombieEnum.RED_GARGANTUAR?t+=40:o=(o+=5)>=20?20:o,r.pzaSoundManager.playAudio("ChomperAtk")):n.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.HIT_FLY)}),a.baseData.plantData.eatTime=t+o)})},i([m],a)}(d.pzaBasePlant));t.pzaSuperChomper=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSurvivalConfig:[function(e,a,t){"use strict";cc._RF.push(a,"029eafKdDNAf7+1SwbYKfUY","pzaSurvivalConfig");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSurvivalConfig=void 0;var r=e("../Battle/Data/pzaZombieEnum"),p=e("../Battle/pzaGameState"),l=e("./pzaGameConfig"),s=e("./pzaGamePartConfig"),c=e("./pzaUtil"),u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.minRandomTypeC=0,a.maxRandomTypeC=0,a.randomTypePool=[],a}return n(a,e),a.reSetConf=function(e){var a,t;if(1==e.mapId){e.p_wave="5-6,15-6,25-6,35-6,45-6";var o=e.p_wave.split(",");if(o)try{for(var n=i(o),r=n.next();!r.done;r=n.next()){var p=r.value,l=p.split("-")[0],s=p.split("-")[1];l&&s&&(e.p_waveData.waveList.push(parseInt(l)),e.p_waveData.colList.push(parseInt(s)))}}catch(c){a={error:c}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}}else 2==e.mapId?(e.tombCount=9,e.tombMinRow=5):3==e.mapId?(e.minWaterWave=2,e.lily_col=1):4==e.mapId?e.minFogColumn=6:5==e.mapId&&(e.coldWindCD=15);return e},a.initSurvivalConfig=function(e){var t=this;null!=e&&e.forEach(function(e){if(null!=e){var o=null;null!=e.density&&(o=e.density.split(",")).forEach(function(e,a){o[a]=parseInt(e)});var n=null;null!=e.type&&(n=e.type.split(",")).forEach(function(e,a){n[a]=parseInt(e)});var i=new a(e.Level,parseInt(e.wave),o,null,null,parseInt(e.multiple),parseInt(e.tombstone),parseInt(e.tombstonemini),parseInt(e.flowerpot),0,e.map,e.isnight,"",0);if(i.randomTypePool=n,null!=e.waterexit&&(i.minWaterWave=parseInt(e.waterexit)),null!=e.waterend){var r=e.waterend.split(",");null!=r&&(i.lastWaterWaveMinColumn=parseInt(r[0]),i.lastWaterWaveZombie=parseInt(r[1]))}if(null!=e.fall){var p=e.fall.split(",");null!=p&&(i.lastBungeeMinColumn=parseInt(p[0]),i.lastBungeeZombie=parseInt(p[1]))}if(null!=e.fog&&(i.minFogColumn=parseInt(e.fog)),null!=e.typenumber){var l=e.typenumber.split(",");null!=l&&null!=l[0]&&null!=l[1]&&(i.minRandomTypeC=parseInt(l[0]),i.maxRandomTypeC=parseInt(l[1]))}i=t.reSetConf(i),t.survivalConfigMap.set(e.Level,i)}})},a.prototype.createNewConfig=function(){var e=new a(this.part,this.maxWave,this.waveZombieDensity,this.zombieTypes,this.newZombieType,this.magnification,this.tombCount,this.tombMinRow,this.flowerPotColumn,this.initSun,this.mapId,this.isnight,this.partPlantType);if(e.minWaterWave=this.minWaterWave,e.lastWaterWaveMinColumn=this.lastWaterWaveMinColumn,e.lastWaterWaveZombie=this.lastWaterWaveZombie,e.lastBungeeMinColumn=this.lastBungeeMinColumn,e.lastBungeeZombie=this.lastBungeeZombie,e.minFogColumn=this.minFogColumn,e.zombieTypes=[],0==this.minRandomTypeC&&0==this.maxRandomTypeC)this.randomTypePool.forEach(function(a){e.zombieTypes.push(a)});else{e.zombieTypes.push(r.pzaZombieEnum.ZOMBIE),Math.random()>=.2?e.zombieTypes.push(r.pzaZombieEnum.CONE_HEAD_ZOMBIE):e.zombieTypes.push(r.pzaZombieEnum.NEWSPAPER_ZOMBIE);var t=c.pzaUtil.getRandomNum(this.minRandomTypeC,this.maxRandomTypeC),o=[];this.randomTypePool.forEach(function(a){a!=r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE&&a!=r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&a!=r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&e.zombieTypes.indexOf(a)<0&&o.push(a)});var n=c.pzaUtil.getRandomArrayValue(o,t);e.zombieTypes=e.zombieTypes.concat(n),this.randomTypePool.forEach(function(a){a!=r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE?a==r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&e.zombieTypes.indexOf(r.pzaZombieEnum.CONE_HEAD_ZOMBIE)>=0?e.zombieTypes.push(a):a==r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&e.zombieTypes.indexOf(r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE)>=0&&e.zombieTypes.push(a):e.zombieTypes.push(a)})}return e=a.reSetConf(e)},a.createEndlessConfig=function(e,t){var o=new a(e+"-"+t,20,this.createZombieDensity(t),[],null,1,0,0,0);if(2==e?(o.tombCount=9,o.tombMinRow=5):3==e?(o.minWaterWave=1==t?8:6,o.lastWaterWaveMinColumn=6,o.lastWaterWaveZombie=3):4==e?(o.minWaterWave=1==t?8:6,o.lastWaterWaveMinColumn=6,o.lastWaterWaveZombie=3,o.minFogColumn=6):5==e&&(o.flowerPotColumn=3,o.lastBungeeMinColumn=5,o.lastBungeeZombie=3),o.redLimit=Math.min(50,t-5),1==t)o.zombieTypes.push(r.pzaZombieEnum.ZOMBIE),o.zombieTypes.push(r.pzaZombieEnum.CONE_HEAD_ZOMBIE),o.zombieTypes.push(r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE),3!=e&&4!=e||(o.zombieTypes.push(r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),o.zombieTypes.push(r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),o.zombieTypes.push(r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));else{var n=[4,5,7,8,18,19,21,23,24,25];o.zombieTypes.push(r.pzaZombieEnum.ZOMBIE),Math.random()>=.2?(o.zombieTypes.push(r.pzaZombieEnum.CONE_HEAD_ZOMBIE),n.push(r.pzaZombieEnum.NEWSPAPER_ZOMBIE)):(o.zombieTypes.push(r.pzaZombieEnum.NEWSPAPER_ZOMBIE),n.push(r.pzaZombieEnum.CONE_HEAD_ZOMBIE)),3!=e&&4!=e||(n.push(r.pzaZombieEnum.SNORKEL_ZOMBIE),n.push(r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE)),2!=e&&t>4&&n.push(r.pzaZombieEnum.ZOMBONI),5!=e&&(n.push(r.pzaZombieEnum.DANCING_ZOMBIE),n.push(r.pzaZombieEnum.DIGGER_ZOMBIE)),t>4&&n.push(r.pzaZombieEnum.GARGANTUAR),t>10&&n.push(r.pzaZombieEnum.RED_GARGANTUAR);var i=Math.min(t,9),p=c.pzaUtil.getRandomArrayValue(n,i);o.zombieTypes=o.zombieTypes.concat(p),3!=e&&4!=e||(o.zombieTypes.push(r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),o.zombieTypes.indexOf(r.pzaZombieEnum.CONE_HEAD_ZOMBIE)>=0&&o.zombieTypes.push(r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),o.zombieTypes.indexOf(r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE)>=0&&o.zombieTypes.push(r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE))}return 1==e?o.mapId=1:3==e?o.mapId=3:5==e&&(o.mapId=5),a.reSetConf(o)},a.createZombieDensity=function(e){for(var a=[],t=1;t<=20;t++){var o=Math.floor(Math.floor(.8*(t+20*(e-1)-1))/2)+1;t%10==0&&(o=Math.floor(2.5*o)),a.push(o)}return a},a.getSurvivaliConfig=function(e,a){var t=this.survivalConfigMap.get(e+"-"+a);return null==t?(console.error("\u672a\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):t.createNewConfig()},a.getAllZombies=function(e){for(var a=[],t=1;t<=5;t++){var o=this.survivalConfigMap.get(e+"-"+t);null!=o&&null!=o.randomTypePool&&o.randomTypePool.forEach(function(e){a.indexOf(e)<0&&a.push(e)})}return a},a.getAllEndlessZombies=function(e){var a=[1,2,3,4,5,6,7,8,18,19,21,23,24,25,26,27];return 3!=e&&4!=e||(a.push(r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),a.push(r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),a.push(r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE),a.push(r.pzaZombieEnum.SNORKEL_ZOMBIE),a.push(r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE)),2!=e&&a.push(r.pzaZombieEnum.ZOMBONI),5!=e&&(a.push(r.pzaZombieEnum.DANCING_ZOMBIE),a.push(r.pzaZombieEnum.DIGGER_ZOMBIE)),a},a.prototype.getRandomWayIndex=function(e,a,t,o){if(null==a||null==t||t.length<=0)return 0;var n=t[e%t.length];if(a==r.pzaZombieEnum.GARGANTUAR&&n==t.length-1)return c.pzaUtil.getRandomValueFromArray([0,1]);var i=p.pzaGameState.survivalConfig;if(l.pzaGameConfig.isAllWayZombie(a)&&o>=i.minWaterWave)return n;var s=l.pzaGameConfig.isWaterZombie(a),u=window.pzaMapManager.isInWaterWay(n);if(u&&s||!u&&!s)return n;if(s){var d=window.pzaMapManager.getRandomWaterWay();return null==d?n:d}return window.pzaMapManager.getRandomNoWaterWay()},a.prototype.isShowPortalEffect=function(e){for(var a=p.pzaGameState.survivalConfig,t=0;t<a.p_waveData.waveList.length;t++){var o=a.p_waveData.waveList[t],n=a.p_waveData.colList[t];if(e==o)return n}},a.survivalConfigMap=new Map,a}(s.pzaGamePartConfig);t.pzaSurvivalConfig=u,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUtil":"pzaUtil"}],pzaSurvivalItem:[function(e,a,t){"use strict";cc._RF.push(a,"43c35UedddIXZJuEZQCzZjm","pzaSurvivalItem");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSurvivalItem=void 0;var r=e("../Battle/pzaGameState"),p=e("../Common/pzaGameManager"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaUIManager"),d=e("../Common/pzaWorldEventManager"),h=e("../Load/pzaPreLoadManager"),m=e("../utils/pzakc"),f=e("./pzaCommonMask"),z=e("./pzaWarningView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.trophyNode=null,a.lockNode=null,a.zombie=[],a.bg=null,a.flagNode=null,a.flagCount=null,a.startNode=null,a.curChapter=1,a.unlock=!1,a.startGameCall=null,a.costPower=l.pzaLocalData.endLessPowerCost,a.gameDelayTime=1.5,a}return n(a,e),a.prototype.onEnable=function(){this.startNode.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startNode.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},a.prototype.onDisable=function(){this.startNode.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startNode.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},a.prototype.bindData=function(e,a){this.curChapter=e,this.startGameCall=a,this.unlock=l.pzaLocalData.data.survivalPassChapter+1>=e||l.pzaLocalData.data.survivalPassChapter>=5||l.pzaLocalData.data.preOpenSurvival,this.trophyNode.active=e<=5&&l.pzaLocalData.data.survivalPassChapter>=e,this.lockNode.active=!this.unlock,this.startNode.active=this.unlock,this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.unlock?(this.zombie.forEach(function(e){e.color=cc.Color.fromHEX(cc.color(),"#FFFFFF")}),e>5&&(this.flagNode.active=!0,this.flagCount.string=""+l.pzaLocalData.getSurvivalFlagCount(e-5))):(this.zombie.forEach(function(e){e.color=cc.Color.fromHEX(cc.color(),"#939393")}),this.flagNode&&(this.flagNode.active=!1)),l.pzaLocalData.isShowPowerGift||(this.costPower=0,this.gameDelayTime=0,this.startNode.active=!1);var t=this.node.getChildByName("lv_imgSta").getChildByName("rightPower").getChildByName("rightPowercost");t&&(t.getComponent(cc.Label).string="X"+l.pzaLocalData.endLessPowerCost)},a.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},a.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},a.prototype.clickItem=function(){var e=this;if(!this.unlock)return this.node.color=cc.Color.fromHEX(cc.color(),"#939393"),s.pzaSoundManager.playAudio("unlockpart"),void u.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(e){var a=e&&e.getComponent(z.pzaWarningView);a&&a.show("\u901a\u5173\u524d\u7f6e\u5173\u5361\u540e\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u6682\u672a\u89e3\u9501")});this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF");var a=r.pzaGameState.gameMode,t=this.curChapter,o=r.pzaGameMode.SURVIVAL;if(this.curChapter>5&&(t=this.curChapter-5,o=r.pzaGameMode.SUR_ENDLESS),l.pzaLocalData.isWeekTwo=!1,r.pzaGameState.midOut){if(o==r.pzaGameMode.SUR_ENDLESS&&l.pzaLocalBattleData.data.endlessBattleData[t-1])return p.pzaGameManager.removeBattleUI(),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.GAME_OVER,null),this.startGameCall&&this.startGameCall(),u.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(o,t,1);console.log("newGameMode",o,"oldGameMode",a,"this.curChapter",this.curChapter,"curChapter",t),o===a&&r.pzaGameState.curChapter===t?(this.startGameCall&&this.startGameCall(),console.log("recover"),p.pzaGameManager.getCurrentGame().gameRecover(t,1,o===r.pzaGameMode.SURVIVAL?l.pzaLocalBattleData.data.survivalBattleData[t-1]:l.pzaLocalBattleData.data.endlessBattleData[t-1])):(console.log("midOutStart"),p.pzaGameManager.midOutStart(o,t,1,this.startGameCall.bind(this)))}else{if(o==r.pzaGameMode.SUR_ENDLESS&&l.pzaLocalBattleData.data.endlessBattleData[t-1])return this.startGameCall&&this.startGameCall(),u.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(o,t,1);if(l.pzaLocalData.data.power<this.costPower)return c.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void u.pzaUIManager.showPowerView();l.pzaLocalData.setPower(-this.costPower),m.default.sendMsg("powerani"),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),f.pzaCommonMask.showMask(),this.scheduleOnce(function(){f.pzaCommonMask.showMask(),e.startGameCall&&e.startGameCall(),u.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(o,t,1)},this.gameDelayTime)}},i([v({displayName:"\u5956\u676f",type:cc.Node})],a.prototype,"trophyNode",void 0),i([v({displayName:"\u9501",type:cc.Node})],a.prototype,"lockNode",void 0),i([v({displayName:"\u50f5\u5c38",type:[cc.Node]})],a.prototype,"zombie",void 0),i([v({displayName:"\u573a\u666f",type:cc.Node})],a.prototype,"bg",void 0),i([v({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],a.prototype,"flagNode",void 0),i([v({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],a.prototype,"flagCount",void 0),i([v({displayName:"\u5f00\u59cb\u6e38\u620f\u8282\u70b9",type:cc.Node})],a.prototype,"startNode",void 0),i([g],a)}(cc.Component);t.pzaSurvivalItem=b,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaSurvivalView:[function(e,a,t){"use strict";cc._RF.push(a,"dc77cBkXi5Pj6oAJ6X9XOtJ","pzaSurvivalView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaSurvivalView=void 0;var r=e("../Common/pzaGameCommonPool"),p=e("../Common/pzaLocalData"),l=e("../Common/pzaSoundManager"),s=e("../Common/pzaStatisticsMgr"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaUIManager"),d=e("../Common/pzaUtil"),h=e("../Common/pzaWorldEventManager"),m=e("../Load/pzaPreLoadManager"),f=e("../utils/pzaChannel"),z=e("./pzaPowerView"),y=e("./pzaRankView"),g=e("./pzaSurvivalItem"),v=cc._decorator,b=v.ccclass,P=v.property,C=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.coinCount=null,a.trophyCount=null,a.scrollView=null,a.items=[],a.rankWidget=null,a}return n(a,e),a.prototype.onEnable=function(){var e=this;this.node.x=0,this.coinCount.string=d.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),this.trophyCount.string=p.pzaLocalData.data.survivalPassChapter+"/5",this.scrollView.node.stopAllActions(),this.scrollView.node.y=120,this.scrollView.node.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.2,cc.v2(0,120)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){l.pzaSoundManager.playAudio("chapterdown")}))),p.pzaLocalData.data.survivalPassChapter<5?this.scrollView.scrollToLeft(0):this.scrollView.scrollToRight(0);for(var a=1;a<=10;a++){var t=this.items[a-1];t&&t.bindData(a,function(){f.pzaChannel.instance().closeBanner(),e.close()})}this.rankWidget.updateAlignment(),"ks"==f.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1),this.setBGAtta(),s.pzaStatisticsMgr.sendEvent("System",{name:"system",value:2})},a.prototype.clickBack=function(){var e=this;l.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,800)).easing(cc.easeCubicActionOut())),u.pzaUIManager.aniHidePopUI(function(){e.close(),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_RECORD_STATE,null),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.BACK_HOMEVIEW,null)})},a.prototype.clickRankBtn=function(){"hw"!=f.pzaChannel.instance().channel&&"oppo"!=f.pzaChannel.instance().channel&&"vivo"!=f.pzaChannel.instance().channel?this.createWxUserInfoButton(!0,function(){u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.RANK_VIEW,function(e){var a=e&&e.getComponent(y.pzaRankView);a&&a.init(0)})}):c.pzaTipManager.showHomeTip("\u6682\u672a\u5f00\u653e",this.node,2)},a.prototype.createWxUserInfoButton=function(e,a){var t=this,o=f.pzaChannel.instance().getChannel();"tt"!=o.channel?"wx"!==o.channel||null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar?a&&a():o.wxCheckPrivacySetting(function(n){var i=function(){var e=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+t.rankWidget.node.x-60)/n.width*e.width,top:(.5*n.height-t.rankWidget.node.y-60)/n.height*e.height,width:120/n.width*e.width,height:120/n.height*e.height};o.getUserInfo(function(){null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),a&&a())},i,!1)};if(n)return e?void o.wxPrivacyAuthorize(i,null):void(a&&a());i()},null):o.getUserInfo(function(){a()})},a.prototype.clickPower=function(){u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.POWER_VIEW,function(e){var a=e&&e.getComponent(z.pzaPowerView);a&&a.bindData("\u8865\u5145\u4f53\u529b",function(){var e;e=p.pzaLocalData.data.power+p.pzaLocalData.addPowerValue,p.pzaLocalData.data.power=e,p.pzaLocalData.addDirty("power"),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_POWER,null)},null)})},a.prototype.setBGAtta=function(){},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node);var e=f.pzaChannel.instance().getChannel();"wx"==e.channel&&e.destroyAuthorizationButton()},i([P({displayName:"\u91d1\u5e01",type:cc.Label})],a.prototype,"coinCount",void 0),i([P({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],a.prototype,"trophyCount",void 0),i([P({displayName:"scrollView",type:cc.ScrollView})],a.prototype,"scrollView",void 0),i([P({displayName:"\u7ae0\u8282\u5217\u8868",type:[g.pzaSurvivalItem]})],a.prototype,"items",void 0),i([P({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],a.prototype,"rankWidget",void 0),i([b],a)}(cc.Component);t.pzaSurvivalView=C,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaPowerView":"pzaPowerView","./pzaRankView":"pzaRankView","./pzaSurvivalItem":"pzaSurvivalItem"}],pzaTallBowlingNut:[function(e,a,t){"use strict";cc._RF.push(a,"1784dclvO5NaI7VOK7taKOf","pzaTallBowlingNut");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaBowlingNut=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaBaseComponent"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaSpineController"),d=e("../Zombie/pzaZombieBody"),h=e("../pzaGameState"),m=e("./pzaAttackType"),f=e("./pzaBowlingBody"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.colliderBody=null,a.rotateNode=null,a.isBoom=!1,a.bodyBindData=!1,a.rotateSpeed=180,a.speedX=200,a.yDirection=0,a.colliderInterval=0,a.killCount=0,a.animation=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.rotateNode.angle=0,this.yDirection=0,this.bodyBindData=!1,this.colliderInterval=0,this.killCount=0;var t=10*-this.baseData.yIndex+6;this.node.zIndex=t,c.pzaSoundManager.playAudio("plantplant"),c.pzaSoundManager.playAudio("throwBowling")},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.animation.pauseAnimation()},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.animation.resumeAnimation()},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.logicPos){this.colliderInterval-=e,this.baseData.logicPos.x+=this.speedX*e,this.baseData.logicPos.y+=this.speedX*e*this.yDirection;var a=h.pzaGameState.map.getMapYIndex(this.baseData.logicPos),t=h.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.yIndex!=a){this.baseData.yIndex=a;var o=10*-this.baseData.yIndex+5+this.yDirection;this.node.zIndex=o}this.baseData.xIndex!=t&&(this.baseData.xIndex=t),this.baseData.logicPos.x>=640&&this.close()}},a.prototype.logicLateUpdate=function(a){e.prototype.logicLateUpdate.call(this,a),this.bodyBindData||null==this.colliderBody||(this.bodyBindData=!0,this.colliderBody.bindData(this.baseData,this.onCollision.bind(this),this.onCollisionExit.bind(this))),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos)},a.prototype.onCollision=function(e){if(e.node.group==s.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var a=e.node.getComponent(d.pzaZombieBody);if(null==a||null==a.baseData)return;if(this.baseData.yIndex!=a.baseData.yIndex)return;var t=window.pzazombieManager.getZombie(a.baseData);t&&t.hurt(1e4,null,m.pzaAttackType.TALL_BOWLING),a.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=0;var o=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=o}},a.prototype.onCollisionExit=function(){},i([g({displayName:"\u78b0\u649e\u8eab\u4f53",type:f.pzaBowlingBody})],a.prototype,"colliderBody",void 0),i([g({displayName:"\u65cb\u8f6c\u8282\u70b9",type:cc.Node})],a.prototype,"rotateNode",void 0),i([g({displayName:"\u7206\u70b8\u575a\u679c"})],a.prototype,"isBoom",void 0),i([g({type:u.pzaSpineController})],a.prototype,"animation",void 0),i([y],a)}(l.pzaBaseComponent);t.pzaBowlingNut=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingBody":"pzaBowlingBody"}],pzaTallNutZombie:[function(e,a,t){"use strict";cc._RF.push(a,"834c03JQvhNZplAW+cYxdFU","pzaTallNutZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTallNutZombie=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaZombieEnum"),l=e("./pzaConeHeadZombie"),s=e("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.equip1Slot=s.pzaZombieSlotType.head_tallnut,a.hatType=s.pzaZombieSlotType.head_tallnut,a.isNut=!0,a.garlicSkinName="",a}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):(this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]]),this.isNut?this.slotMap.set(s.pzaZombieSlotType.head_tallnut,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.head_tallnut).addState(new s.pzaZombieSlotAtt(1,"Dbody1",262.41,-1.5,-90.45)).addState(new s.pzaZombieSlotAtt(2,"Dbody2",258.29,-1.21,-90.45)).addState(new s.pzaZombieSlotAtt(3,"Dbody3",244.29,-2.07,-90.45))):this.slotMap.set(s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",-11.09,33.86,-90.94)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",-11.09,33.86,-90.94)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",-22.53,37.55,-90.94))))},a.prototype.bindData=function(a,t){e.prototype.bindData.call(this,a,t),this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var o=this.animation.findBone("aduck");this.hasUseSrAni?o&&(o.scaleX=.158,o.scaleY=.158):o&&(o.scaleX=0,o.scaleY=0)},a.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,this.curSkinName="5plant/5zombie_plant_1_2",this.changeSkin(this.curSkinName)},a.prototype.equipDeath=function(){this.equipHurtState=p.pzaHurtStateEnum.DEAD,this.hasEquip=!1},a.prototype.updateMove=function(a){var t=this.baseData.xIndex;e.prototype.updateMove.call(this,a);var o=this.baseData.xIndex;t<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&t>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},a.prototype.ashesDeath=function(a,t){e.prototype.ashesDeath.call(this,a,t,this.hasInWater?"blow_5pant_duck":"blow_5pant")},i([u],a)}(l.pzaConeHeadZombie));t.pzaTallNutZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaTallNut:[function(e,a,t){"use strict";cc._RF.push(a,"bf049L/anZKXoHAQ0j0pCKJ","pzaTallNut");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTallNut=void 0;var r=e("../Data/pzaPlantEnum"),p=e("../pzaGameState"),l=e("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hurtTime=0,a}return n(a,e),a.prototype.playNormalAni=function(){this.animation.playAnimation("idle",!0)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.cate=r.pzaPlantCate.Nut,this.playNormalAni(),p.pzaGameState.onlyShroomCofee=!1,p.pzaGameState.onlyBoomPlant=!1,this.animation.setAnimationSkin("body_1")},a.prototype.plantDying=function(){e.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},a.prototype.plantHurt=function(){e.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},a.prototype.plantIntact=function(){e.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},a.prototype.death=function(a,t,o,n){e.prototype.death.call(this,a,t,o,n,"body_3")},i([c],a)}(l.pzaBasePlant));t.pzaTallNut=u,cc._RF.pop()},{"../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaTangleKelpEffect:[function(e,a,t){"use strict";cc._RF.push(a,"53e72GuT55P6JIIbXGWKW40","pzaTangleKelpEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTangleKelpEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.spine1=null,a.spine2=null,a.pullStartCall=null,a.pullEndCall=null,a}return n(a,e),a.prototype.showEffect=function(e,a){var t=this;this.pullStartCall=e,this.pullEndCall=a,this.spine1.node.stopAllActions(),this.spine1.node.y=30,this.spine1.playAnimation("attack1_1",!1,function(){t.pullDown(),t.pullStartCall&&t.pullStartCall()}),this.spine2.playAnimation("attack1_2",!1,null)},a.prototype.pullDown=function(){var e=this;this.spine1.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(-30,-70)),cc.callFunc(function(){e.close(),e.pullEndCall&&e.pullEndCall()})))},a.prototype.pauseSelf=function(){this.spine1.pauseAnimation(),this.spine2.pauseAnimation(),this.spine1.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.spine1.resumeAnimation(),this.spine2.resumeAnimation(),this.spine1.node.resumeAllActions()},i([c({displayName:"\u6c34\u83491",type:p.pzaSpineController})],a.prototype,"spine1",void 0),i([c({displayName:"\u6c34\u83492",type:p.pzaSpineController})],a.prototype,"spine2",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaTangleKelpEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaTangleKelp:[function(e,a,t){"use strict";cc._RF.push(a,"ce5f4Bw6xJFdLASTNSw7c7E","pzaTangleKelp");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTangleKelp=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../pzaEffectManager"),l=e("../pzaGameState"),s=e("./pzaAttackType"),c=e("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.playBlinkAni=function(){var e=this,a=function(){e.animation.playAnimation("idle",!1,a)};this.animation.playAnimation("idle",!1,a)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.node.stopAllActions(),this.node.opacity=255,this.playBlinkAni(),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1,l.pzaGameState.usePondPlant=!0},a.prototype.logicUpdate=function(a){if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){var t=this.findAttackTarget();null!=t&&this.attack(t)}},a.prototype.findAttackTarget=function(){return this.body.curTarget},a.prototype.attack=function(e){var a=this;this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),r.pzaSoundManager.playAudio("floop"),r.pzaSoundManager.playAudio("TangleKelp"),p.pzaEffectManager.createWaterFlowerEffect(e.yIndex,cc.v2(e.logicPos.x+7,e.logicPos.y+3),null,.5),p.pzaEffectManager.createTangleKelpEffect(e.logicPos,function(){p.pzaEffectManager.createWaterFlowerEffect(a.baseData.yIndex,cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y-25),null);var t=window.pzazombieManager.getZombie(e);t&&a.baseData&&t.hurt(a.baseData.atk,a.baseData,s.pzaAttackType.TWINE)},function(){p.pzaEffectManager.createWaterFlowerEffect(e.yIndex,e.logicPos,null,.5),a.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){a.death(null)})))})},i([d],a)}(c.pzaBasePlant));t.pzaTangleKelp=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaTaskMgr:[function(e,a,t){"use strict";cc._RF.push(a,"78294NVJKZNLKTaS0KOgc5f","pzaTaskMgr"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../Achieve/pzaAchieveMgr"),n=e("../Common/pzaGameManager"),i=e("../Common/pzaGamePropConfig"),r=e("../Common/pzaLocalData"),p=e("../Common/pzaRewardManager"),l=e("../Common/pzaTipManager"),s=e("../utils/pzaResMgr"),c=e("../utils/pzakc"),u=e("./pzaTask"),d=function(){function e(){this.taskMap=null,this.list=null,this.tmpConf=null}return e.instance=function(){return e._me||(e._me=new e),e._me},e.prototype.init=function(){if(this.tmpConf||(this.tmpConf=s.pzaResMgr.instance().getConf("a21")),!this.tmpConf)return null;this.taskMap=new Map,this.list=[];for(var e=r.pzaLocalData.data.tasks||{},a=0;a<this.tmpConf.length;a++){var t=new u.pzaTask(this.tmpConf[a]),o=e[""+t.id];t.state=o||0,this.taskMap.set(t.id,t),this.list.push(t)}return this.list.sort(function(e,a){var t={2:0,0:1,1:2};return t[e.state]-t[a.state]}),this.list},e.prototype.getTask=function(e){return this.taskMap.get(e)},e.prototype.canGetTask=function(e,a){var t=this.taskMap.get(e);return!(!t||t.state)&&(a>=t.condNum?(this.addTask(t),!0):void 0)},e.prototype.hasTask=function(e){return this.taskMap.has(e)},e.prototype.addTask=function(e,a,t){void 0===a&&(a=2),void 0===t&&(t=!1),e&&1!==e.state&&(e.state=a,r.pzaLocalData.data.tasks[""+e.id]=a,t||(r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate")))},e.prototype.obtainReward=function(e){var a=this.taskMap.get(e);if(a){a.state=2,r.pzaLocalData.data.tasks[""+e]=1,r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate");var t=[];null!=a.reward&&a.reward.forEach(function(e){if(null!=e){var a=e.split("_"),o=new i.pzaRewardPropData(parseInt(a[0]),parseInt(a[1]));t.push(o)}}),p.pzaRewardManager.recieveRewards(t),a.condRank<0&&o.default.instance().addAchieve(40)}else console.error("\u65e0\u6b64\u4efb\u52a1id",e)},e.prototype.getTaskList=function(){return this.init()},e.prototype.checkWhenPassRank=function(e,a,t){if(void 0===t&&(t=!0),n.pzaGameManager.getCurrentGame().isMainMode()&&!(e<6||a<10)){a>=10&&e++;var o=e-5-1,i=this.taskMap.get(o);1!=r.pzaLocalData.data.tasks[""+o]&&e>=i.condRank&&this.addTask(i),r.pzaLocalData.addDirty("tasks")}},e.prototype.checkStar=function(e){if(n.pzaGameManager.getCurrentGame().isMainMode()){for(var a=0;a<this.list.length;a++){var t=this.list[a];t.condRank>0||t.condNum<=e&&this.addTask(t,2,!0)}r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate")}},e.prototype.checkAddTask=function(e,a,t){if(void 0===a&&(a=1),void 0===t&&(t=!0),e&&n.pzaGameManager.getCurrentGame().isMainMode()&&!r.pzaLocalData.data.tasks[""+e]){var o=this.getTask(e);if(null!=o&&0==o.state&&!(o.condNum>a)&&(this.addTask(o),t)){var i=o.name+" \u4efb\u52a1\u8fbe\u6210";l.pzaTipManager.showGameTip(i)}}},e._me=null,e}();t.default=d,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaTipManager":"pzaTipManager","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaTask":"pzaTask"}],pzaTask:[function(e,a,t){"use strict";cc._RF.push(a,"43f05V/ouRMjbIlNw8kt2YK","pzaTask"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTask=void 0;var o=e("../utils/pzakc");t.pzaTask=function(e){this.id=0,this.name="",this.reward=[],this.condNum=0,this.condRank=0,this.state=0,this.id=e.id,this.name=e.name||"",this.reward=o.default.strArr(e.reward),this.condNum=e.condNum||0,this.condRank=e.condRank||0},cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaThreePeater:[function(e,a,t){"use strict";cc._RF.push(a,"9c84c/GRQpOC6M8xFkB02aA","pzaThreePeater");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaThreePeater=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaNodeManager"),l=e("../../Common/pzaSoundManager"),s=e("../Bullet/pzaBaseBullet"),c=e("../Data/pzaBuffData"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.attacking=!1,a.atkAniTime=1.4,a}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a);var o=function(){if(t.canAttack())return l.pzaSoundManager.playAudio("PeashooterAtk"),void t.animation.playAnimation("attack",!1,o,function(){t.shoot()});t.animation.playAnimation("idle",!1,o)};o(),u.pzaGameState.usePeaPlant=!0,u.pzaGameState.onlyBoomPlant=!1,u.pzaGameState.onlyShroomCofee=!1},a.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e)for(var a=2;a>=0;a--){var t=null,o=this.baseData.yIndex+a-1;if(!(o<0||o>=u.pzaGameState.map.getMapRow())){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=n){n.setParent(e);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(i);if(n.setPosition(l),o!=this.baseData.yIndex){var c=u.pzaGameState.map.getYInterval(o)/3+this.shootNode.y;t=u.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,o,0,c).y}var d=n.getComponent(s.pzaBaseBullet);d&&d.init(o,this.baseData.atk,1,t);var h=u.pzaGameState.map.getMapSkewColumn();h>0&&this.baseData.xIndex<=h-2&&(d.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},a.prototype.canAttack=function(){var e=this;if(null==this.baseData||null==this.baseData.logicPos)return!1;for(var a=function(a){var o=t.baseData.yIndex+a-1;if(o<0||o>=u.pzaGameState.map.getMapRow())return"continue";var n=!1;return window.pzazombieManager.zombieDatas[o].forEach(function(a){!a||!a.logicPos||a.logicPos.x<e.baseData.logicPos.x||a.buffData.hasBuff(c.pzaBuffType.DIVE)||a.buffData.hasBuff(c.pzaBuffType.FLY)||a.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||(n=!0)}),n||(n=t.findDrZomBoss()),n?{value:!0}:void 0},t=this,o=0;o<3;o++){var n=a(o);if("object"==typeof n)return n.value}return!1},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null!=e&&null!=e.baseData&&!e.baseData.isDead&&!e.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([m],a)}(d.pzaBasePlant);t.pzaThreePeater=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaThrowBullet:[function(e,a,t){"use strict";cc._RF.push(a,"fee5cYvFCdESpVzGX06894o","pzaThrowBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaThrowBullet=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaWorldEventManager"),u=e("../Data/pzaBuffData"),d=e("../Data/pzaPlantEnum"),h=e("../Data/pzaZombieEnum"),m=e("../Plant/pzaAttackType"),f=e("../Plant/pzaPlantBody"),z=e("../Zombie/pzaZombieBody"),y=e("../pzaEffectManager"),g=e("../pzaGameState"),v=e("./pzaBulletAnimator"),b=cc._decorator,P=b.ccclass,C=b.property,E=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.throwMaxHeight=270,a.maxLifeTime=3,a.hitPrefab=null,a.rotateSpeed=180,a.poolPrefab=null,a.lifeTime=0,a.bulletYIndex=-1,a.targetXIndex=-1,a.atk=0,a.aSpeed=-1e3,a.xSpeed=450,a.ySpeed=800,a.hasImmobilize=!1,a.hasSpatter=!1,a.hasFrost=!1,a.hasColl=!1,a.floorCheckY=0,a.target=null,a.xOffset=0,a.leftThrowTime=0,a.isDownHasDmg=!1,a.collider=null,a.stopXSpeed=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.init=function(e,a,t,o,n,i,r,l,s,c){if(void 0===r&&(r=-1),void 0===l&&(l=!1),void 0===s&&(s=!1),void 0===c&&(c=0),this.bulletYIndex=t,this.targetXIndex=r,this.atk=o,this.lifeTime=0,this.hasImmobilize=!1,this.hasSpatter=l,this.hasFrost=l,this.hasColl=!1,this.isDownHasDmg=s,null!=i&&null!=n){this.target=n,this.xOffset=i.x-this.target.logicPos.x,this.floorCheckY=i.y-130,c>0&&(this.throwMaxHeight=c),this.ySpeed=Math.sqrt(2*this.throwMaxHeight*Math.abs(this.aSpeed));var u=Math.abs(this.ySpeed/this.aSpeed)+Math.sqrt(2*Math.abs(this.node.y+this.throwMaxHeight-i.y)/Math.abs(this.aSpeed));this.leftThrowTime=u,this.floorCheckY=i.y-130;var d,h=i.x-this.node.x;this.xSpeed=h/u,a?p.pzaCollisionManager.getInstance.addZombieByRow(this.bulletYIndex,this):p.pzaCollisionManager.getInstance.addBulletByRow(this.bulletYIndex,this),this.node.scale=1,this.stopXSpeed=!1,this.bulletAni&&(e&&this.bulletAni&&this.bulletAni.node&&this.bulletAni.node.destroy(),d=this.bulletAni.node),(d=e?cc.instantiate(e.node):this.node.getChildByName("BulletAnimator"))&&(d.parent=this.node,d.setPosition(0,0),this.bulletAni=d.getComponent(v.pzaBulletAnimator),this.bulletAni.init(!1,null,this.rotateSpeed))}},a.prototype.update=function(){},a.prototype.updateBulletAngel=function(e){this.bulletAni&&(this.bulletAni.rotateSpeed=e)},a.prototype.logicUpdate=function(e){this.lifeTime+=e,this.leftThrowTime-=e,this.lifeTime>=this.maxLifeTime?this.close():(this.rotateSpeed||(this.rotateSpeed=180),this.updateMove(e))},a.prototype.updateMove=function(e){var a=this.xSpeed*e;if(this.node.x+=a,this.node.y+=this.ySpeed*e,this.ySpeed+=this.aSpeed*e,this.ySpeed<0&&this.isDownHasDmg&&(this.isDownHasDmg=!1,this.stopXSpeed=!0),this.ySpeed<0&&this.node.y<this.floorCheckY)return this.close(),void this.playHitEffect(null);if(null!=this.target&&0==this.stopXSpeed){var t=this.target.logicPos.x+this.xOffset-this.node.x;this.xSpeed=t/this.leftThrowTime}},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.onCollision=function(e){if(null!=e&&!this.hasColl&&!this.isDownHasDmg)if(e.node.group!=s.pzaGroupEnum.ZOMBIE){if(e.node.group==s.pzaGroupEnum.PLANT){var a=e.node.getComponent(f.pzaPlantBody);this.colliderPlant(a&&a.baseData)}}else{var t=e.node.getComponent(z.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},a.prototype.colliderZombie=function(e){var a=this;if(e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==h.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&!(e.zombieData&&e.zombieData.hypnosis||e.buffData.hasBuff(u.pzaBuffType.FLY)||e.buffData.hasBuff(u.pzaBuffType.INVINCIBLE))){var t=window.pzazombieManager.getZombie(e);if(t){if(t.hurt(this.atk,null,m.pzaAttackType.THROW_ATK),this.hasImmobilize&&!e.buffData.hasBuff(u.pzaBuffType.IMM_CONTROL)&&!e.buffData.hasBuff(u.pzaBuffType.IMM_IMMOBILIZE)){var o=e.buffData.releaseBuff(u.pzaBuffType.IMMOBILIZE);null!=o?o.buffTime=5:(o=new u.pzaBuffInfo(u.pzaBuffType.IMMOBILIZE,5),e.buffData.addBuff(o),t.bePauseControl(),y.pzaEffectManager.createButterEffect(e,cc.v2(e.logicPos.x,e.logicPos.y+130),t.node.zIndex))}if(!this.hasFrost||e.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||e.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,10,.5)),this.hasSpatter){for(var n=[],i=e.yIndex-1;i<=e.yIndex+1;i++)i<0||i>=g.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[i].forEach(function(a){null!=a&&a!=e&&a.xIndex==e.xIndex&&(a.buffData.hasBuff(u.pzaBuffType.FLY)||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||n.push(a))});n.forEach(function(e){var t=window.pzazombieManager.getZombie(e);null!=t&&(t.hurt(26),!a.hasFrost||t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||t.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,10,.5)))})}this.close(),this.playHitEffect(e)}}},a.prototype.colliderPlant=function(e){if(!(!e||e.isDead||-1!=this.bulletYIndex&&this.bulletYIndex!=e.yIndex||-1!=this.targetXIndex&&this.targetXIndex!=e.xIndex)){this.close();var a=null,t=-1;if(window.pzaplantManager.getAllPlant(d.pzaPlantEnum.UMBRELLA_LEAF).forEach(function(o){if(null==a||0!=t)if(o.xIndex==e.xIndex&&o.yIndex==e.yIndex)a=o,t=0;else if(Math.abs(o.xIndex-e.xIndex)<=1&&Math.abs(o.yIndex-e.yIndex)<=1){var n=Math.abs(o.xIndex-e.xIndex)+Math.abs(o.yIndex-e.yIndex);(null==a||n<t)&&(a=o,t=n)}}),null==a){var o=""+e.xIndex+e.yIndex,n=window.pzaplantManager.pumpkinDataMap.get(o);if(null==n){var i=window.pzaplantManager.plantDataMap.get(o);if(null==i){var r=window.pzaplantManager.plantEnvDataMap.get(o);null==r||(p=window.pzaplantManager.getPlantByData(r))&&p.hurt(this.atk,null,m.pzaAttackType.THROW_ATK)}else(p=window.pzaplantManager.getPlantByData(i))&&p.hurt(this.atk,null,m.pzaAttackType.THROW_ATK)}else{var p;(p=window.pzaplantManager.getPlantByData(n))&&p.hurt(this.atk,null,m.pzaAttackType.THROW_ATK)}}else c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.RICOCHET_BULLET,a,this.bulletAni.getPlayingSP().spriteFrame)}},a.prototype.playHitEffect=function(e){this.bulletAni&&this.bulletAni.showThrowHitEffect(e,this.bulletYIndex)},a.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletByRow(this.bulletYIndex,this),this.hasColl=!0,this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},a.prototype.setRotation=function(e){var a=this.bulletAni.getPlayingSP();a&&(a.node.rotation=e)},i([C({displayName:"\u6295\u5c04\u6700\u5927\u9ad8\u5ea6"})],a.prototype,"throwMaxHeight",void 0),i([C({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],a.prototype,"maxLifeTime",void 0),i([C({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],a.prototype,"hitPrefab",void 0),i([C({displayName:"\u65cb\u8f6c\u901f\u5ea6"})],a.prototype,"rotateSpeed",void 0),i([C(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([P],a)}(r.pzaBaseComponent);t.pzaThrowBullet=E,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBulletAnimator":"pzaBulletAnimator"}],pzaTipManager:[function(e,a,t){"use strict";cc._RF.push(a,"39a22IkorxKOZqNP3AroKAb","pzaTipManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTipManager=void 0;var r=e("../Battle/Data/pzaPlantEnum"),p=e("../Battle/pzaGameState"),l=e("./pzaGameCommonPool"),s=e("./pzaGameConfig"),c=e("./pzaGuideTip"),u=e("./pzaHomeTip"),d=e("./pzaMapManager"),h=e("./pzaPreviewTip"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.guideTipNode=null,a.homeTipNode=null,a.previewTipPrefab=null,a.guideTipPrefab=null,a.homeTipPrefab=null,a.curGuideTip=null,a.curHomeTip=null,a.curPreviewTip=null,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){t.instance=this},a.showHomeTip=function(e,a,o){void 0===a&&(a=null),void 0===o&&(o=0);var n=t.instance;if(null!=n&&null!=n.homeTipNode){this.hideHomeTip();var i=l.pzaGameCommonPool.requestInstant(n.homeTipPrefab);if(null!=i){a?i.setParent(a):i.setParent(n.homeTipNode);var r=i.getComponent(u.pzaHomeTip);r&&r.showTip(e,o),n.curHomeTip=r}}},a.hideHomeTip=function(){var e=t.instance;null!=e&&null!=e.curHomeTip&&(e.curHomeTip.close(),e.curHomeTip=null)},a.showPreviewTip=function(e,a,o,n){var i=t.instance;if(null!=i&&null!=i.guideTipNode){i.curPreviewTip&&i.curPreviewTip.close(),i.curPreviewTip=null;var r=l.pzaGameCommonPool.requestInstant(i.previewTipPrefab);if(null!=r){r.setParent(i.guideTipNode);var p=r.getComponent(h.pzaPreviewTip);p&&p.showTip(e,a,o,n),i.curPreviewTip=p}}},a.showGuideTip=function(e,a){void 0===a&&(a=0);var o=t.instance;if(null!=o&&null!=o.guideTipNode){this.hideGuideTip();var n=l.pzaGameCommonPool.requestInstant(o.guideTipPrefab);if(null!=n){n.setParent(o.guideTipNode);var i=n.getComponent(c.pzaGuideTip);i&&i.showGuideTip(e,a),o.curGuideTip=i}}},a.hideGuideTip=function(){var e=t.instance;null!=e&&null!=e.curGuideTip&&(e.curGuideTip.close(),e.curGuideTip=null)},a.showLossStarTip=function(e,a){var o=t.instance;if(null!=o&&null!=o.guideTipNode){this.hideGuideTip();var n=l.pzaGameCommonPool.requestInstant(o.guideTipPrefab);if(null!=n){n.setParent(o.guideTipNode);var i=n.getComponent(c.pzaGuideTip);i&&i.showStarLoseTip(e,a),o.curGuideTip=i}}},a.showGameTip=function(e,a,o,n){void 0===a&&(a=null),void 0===o&&(o=!1),void 0===n&&(n=5);var i=t.instance;if(null!=i&&null!=i.guideTipNode)if(e){this.hideGuideTip();var r=l.pzaGameCommonPool.requestInstant(i.guideTipPrefab);if(null!=r){r.setParent(i.guideTipNode);var p=r.getComponent(c.pzaGuideTip);p&&p.showGameTip(e,a,o,n),i.curGuideTip=p}}else a&&a()},a.showEnvPlantTip=function(e){p.pzaGameState.envPlantTip.has(e)||(p.pzaGameState.envPlantTip.add(e),e!=d.pzaBlockType.POND?e!=d.pzaBlockType.ROOF?e!=d.pzaBlockType.DOOM_HOLE&&e!=d.pzaBlockType.HOLE||this.showGameTip("\u65e0\u6cd5\u53ec\u5524\u9a91\u58eb\u5728\u8be5\u533a\u57df"):this.showGameTip("\u4f60\u53ea\u80fd\u5c06\u9a91\u58eb\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.LILY_PAD)+"\u91cc"):this.showGameTip("\u8bf7\u5148\u53ec\u5524"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.LILY_PAD)))},a.showPondPlantTip=function(e,a){p.pzaGameState.pondPlantTip.has(e)||(p.pzaGameState.pondPlantTip.add(e),this.showGameTip(a+"\u53ea\u80fd\u5728\u6c34\u91cc\u53ec\u5524"))},a.showSpecialPlantTip=function(e,a){p.pzaGameState.specialPlantTip.has(e)||(p.pzaGameState.specialPlantTip.add(e),e!=r.pzaPlantEnum.GRAVE_BUSTER?e!=r.pzaPlantEnum.POTATO_MINE?e!=r.pzaPlantEnum.SPIKEWEED?e!=r.pzaPlantEnum.COFFEE_BEAN?e!=r.pzaPlantEnum.GATLING_PEA?e!=r.pzaPlantEnum.TWIN_SUNFLOWER?e!=r.pzaPlantEnum.GLOOM_SHROOM?e!=r.pzaPlantEnum.CATTAIL?e!=r.pzaPlantEnum.WINTER_MELON?e!=r.pzaPlantEnum.GOLD_MAGNET?e!=r.pzaPlantEnum.SPIKEROCK?e!=r.pzaPlantEnum.COB_CANNON?e!=r.pzaPlantEnum.FIGHTKING?e!=r.pzaPlantEnum.STAR_FRUIT||this.showGameTip("\u4f60\u53ea\u80fd\u5c06"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.STAR_FRUIT).name+"\u53ec\u5524\u5728\u8fd9\u91cc"):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.PUFF_SHROOM).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.KERNEL_PULT).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.SPIKEWEED).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.MAGNET_SHROOM).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.MELON_PULT).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.LILY_PAD).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.FUME_SHROOM).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.SUN_FLOWER).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728"+s.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.REPEATER).name):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728\u5c01\u5370\u4e2d\u7684\u9a91\u58eb"):this.showGameTip(a+"\u53ea\u80fd\u53ec\u5524\u5728\u575a\u56fa\u7684\u5730\u9762"):this.showGameTip(a+"\u4e0d\u80fd\u53ec\u5524\u5728\u6b64\u5904"):this.showGameTip(a+"\u53ea\u80fd\u5728\u80fd\u91cf\u67f1\u53ec\u5524"))},a.showGameSpecialTip=function(e,a){p.pzaGameState.gameSpecialTip.has(e)||(p.pzaGameState.gameSpecialTip.add(e),this.showGameTip(a))},a.instance=null,i([z({displayName:"\u663e\u793a\u5f15\u5bfc\u63d0\u793a\u6846\u7684\u8282\u70b9",type:cc.Node})],a.prototype,"guideTipNode",void 0),i([z({displayName:"\u663e\u793a\u5927\u5385\u63d0\u793a\u6846\u7684\u8282\u70b9",type:cc.Node})],a.prototype,"homeTipNode",void 0),i([z({displayName:"\u9884\u89c8\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],a.prototype,"previewTipPrefab",void 0),i([z({displayName:"\u5f15\u5bfc\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],a.prototype,"guideTipPrefab",void 0),i([z({displayName:"\u5927\u5385\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],a.prototype,"homeTipPrefab",void 0),t=i([f],a)}(cc.Component);t.pzaTipManager=y,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameConfig":"pzaGameConfig","./pzaGuideTip":"pzaGuideTip","./pzaHomeTip":"pzaHomeTip","./pzaMapManager":"pzaMapManager","./pzaPreviewTip":"pzaPreviewTip"}],pzaTomb:[function(e,a,t){"use strict";cc._RF.push(a,"cbb17mM/rdJO6fjRCGZFwHz","pzaTomb");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTomb=void 0;var r=e("../Common/pzaBaseComponent"),p=e("../Common/pzaSpineController"),l=e("../Common/pzaUtil"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.animation=null,a.xIndex=0,a.yIndex=0,a.smallTomb=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this)},a.prototype.init=function(e,a,t,o){void 0===o&&(o=!1),this.xIndex=e,this.yIndex=a,t&&t(),this.smallTomb=Math.random()>.5,this.animation.setAnimationSkin("skin"+l.pzaUtil.getRandomNum(1,5)),this.node.zIndex=10*-a,window.pzaplantManager.holeMap.set(""+e+a,1),this.playJoinAni(),this.animation.spineAnimation.node.y=55,0==a?this.animation.spineAnimation.node.y=52:1==a&&(this.animation.spineAnimation.node.y=53)},a.prototype.playJoinAni=function(){var e=this;this.animation.playAnimation("ruchang",!1,function(){e.playIdleAni()})},a.prototype.playLightAni=function(){var e=this;this.animation.playAnimation("zhaohuan",!1,function(){e.playIdleAni()},null,1)},a.prototype.playIdleAni=function(){this.animation.playAnimation("idle",!0)},a.prototype.close=function(){e.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.xIndex+this.yIndex)},i([u(p.pzaSpineController)],a.prototype,"animation",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaTomb=d,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil"}],pzaTorchwood:[function(e,a,t){"use strict";cc._RF.push(a,"ec469XJcg1Ccr6pdk9quX8Q","pzaTorchwood");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTorchwood=void 0;var r=e("../../Common/pzaCollisionManager"),p=e("../pzaGameState"),l=e("./pzaAttackType"),s=e("./pzaBasePlant"),c=e("./pzaPlantBody"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.torchwoodBody=null,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.animation.playAnimation("idle",!0),p.pzaGameState.onlyShroomCofee=!1,p.pzaGameState.onlyBoomPlant=!1},a.prototype.hurtZombies=function(e,a){var t=this;void 0===a&&(a=this.baseData.atk),null!=e&&e.forEach(function(e){if(null!=t.baseData){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(a,t.baseData,l.pzaAttackType.FLOOR_ATK)}})},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a)},a.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),e.prototype.logicLateUpdate.call(this)},a.prototype.death=function(a,t){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),e.prototype.death.call(this,a,t)},a.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),e.prototype.flaserDeath.call(this)},i([h({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:c.pzaPlantBody})],a.prototype,"torchwoodBody",void 0),i([d],a)}(s.pzaBasePlant);t.pzaTorchwood=m,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaTouchShowGraph:[function(e,a,t){"use strict";cc._RF.push(a,"9f8bb7NbOpJRr7FFYVKnIOO","pzaTouchShowGraph");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTouchShowGraph=void 0;var r=e("../Common/pzaBaseComponent"),p=e("../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.touchShowGraph=null,a}return n(a,e),a.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.clearGraph,this)},a.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.clearGraph,this)},a.prototype.clearGraph=function(){this.touchShowGraph.clear()},i([c({type:cc.Graphics})],a.prototype,"touchShowGraph",void 0),i([s],a)}(r.pzaBaseComponent);t.pzaTouchShowGraph=u,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaTrackBlock:[function(e,a,t){"use strict";cc._RF.push(a,"004b1aWXDxGKob+6oYWLftX","pzaTrackBlock");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTrackBlock=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../Data/pzaGuideType"),l=e("../../Common/pzaSoundManager"),s=e("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.trackSPF=[],a.tramSPF=[],a.track=null,a.tram=null,a.fixedPos=!1,a.xIndex=-1,a.yIndex=-1,a.height=-1,a.heightMax=-1,a.hasTram=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this)},a.prototype.init=function(e,a,t,o,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),this.xIndex=e,this.yIndex=a,this.height=t,this.heightMax=o,this.hasTram=n,window.pzaMapManager.trackBlockMap.set(""+e+a,this),2==s.pzaGameState.curChapter&&3==s.pzaGameState.curPart&&4==e&&(2==a?(this.hasTram=!0,window.pzaplantManager.plantChangeMapRow(e,0,a)):this.hasTram=!1),this.tram.active=this.hasTram,this.tram.getComponent(cc.Sprite).spriteFrame=this.tramSPF[i?1:0];var r=this.track.getComponent(cc.Sprite);r.enabled=0==t,r.node.children[0].active=r.enabled},a.prototype.checkAbleSwitchTram=function(e,a){var t=window.pzaMapManager.trackBlockMap.get(""+e+a);if(!t)return!1;if(this.xIndex==t.xIndex&&this.yIndex+1==t.yIndex){if(this.height+1<=this.heightMax)return this.moveInBlockPlant(e,this.yIndex,a),l.pzaSoundManager.playAudio("trackslide",.2),!0}else if(this.xIndex==t.xIndex&&this.yIndex-1==t.yIndex&&this.height-1>=0)return this.moveInBlockPlant(e,this.yIndex,a),l.pzaSoundManager.playAudio("trackslide",.2),!0;return!1},a.prototype.moveInBlockPlant=function(e,a,t){this.hasTram=!1,this.tram.active=!1;var o=window.pzaMapManager.trackBlockMap.get(""+e+t);o.hasTram=!0,o.tram.active=!0,window.pzaplantManager.plantChangeMapRow(e,a,t),window.pzaGuideManager.guideType==p.pzaGuideType.GUIDE_TRACK_2_3&&1==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext()},Object.defineProperty(a.prototype,"fixedPosition",{get:function(){return this.fixedPos},set:function(e){this.fixedPos=e},enumerable:!1,configurable:!0}),i([d([cc.SpriteFrame])],a.prototype,"trackSPF",void 0),i([d([cc.SpriteFrame])],a.prototype,"tramSPF",void 0),i([d({type:cc.Node})],a.prototype,"track",void 0),i([d({type:cc.Node})],a.prototype,"tram",void 0),i([u],a)}(r.pzaBaseComponent);t.pzaTrackBlock=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaGuideType":"pzaGuideType","../pzaGameState":"pzaGameState"}],pzaTrackBullet:[function(e,a,t){"use strict";cc._RF.push(a,"6b0f9fmLplNC4K6TIvIqKNh","pzaTrackBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTrackBullet=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaCollisionManager"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaGroupEnum"),c=e("../../Common/pzaNodeManager"),u=e("../../Common/pzaUtil"),d=e("../../Common/pzaWorldEventManager"),h=e("../../Load/pzaBundleObjectPool"),m=e("../../Load/pzaPreLoadManager"),f=e("../Data/pzaBuffData"),z=e("../Effect/pzaShadowEffect"),y=e("../Zombie/pzaZombieBody"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bulletNode=null,a.maxLifeTime=3,a.poolPrefab=null,a.moveSpeed=500,a.angelSpeed=250,a.moveDirection=cc.v2(1,0),a.targetData=null,a.yIndex=-1,a.logicPos=null,a.atk=0,a.hasColl=!1,a.curShadow=null,a.lifeTime=0,a.collider=null,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.maxLifeTime=3},a.prototype.onDisable=function(){p.pzaCollisionManager.getInstance.delBulletOther(this),e.prototype.onDisable.call(this)},a.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},a.prototype.init=function(e,a,t,o){this.targetData=a,this.logicPos=t,this.atk=e,this.yIndex=o,this.hasColl=!1,this.lifeTime=0,this.moveDirection=cc.v2(1,0),this.node.setPosition(t),this.node.angle=0,this.lifeTime=0,this.createShadow(),p.pzaCollisionManager.getInstance.addBulletOther(this)},a.prototype.logicUpdate=function(e){this.lifeTime+=e,this.lifeTime>=this.maxLifeTime?this.close():(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis||this.updateDirection(e),this.updateMove(e))},a.prototype.updateDirection=function(e){var a=window.pzazombieManager.getZombie(this.targetData);if(null!=a){var t=a.getZombieHeadWps(this.yIndex);if(null!=t){var o=this.node.parent.convertToNodeSpaceAR(t).sub(this.logicPos).normalizeSelf(),n=u.pzaUtil.getVectorsRadion(o,this.moveDirection)*(180/Math.PI);if(!(Math.abs(n)<=1)){var i=n>=0?-this.angelSpeed*e:this.angelSpeed*e,r=u.pzaUtil.rotateAngle(this.moveDirection,i);this.moveDirection=r.normalizeSelf(),this.node.angle=u.pzaUtil.getVectorsRadion(this.moveDirection,cc.v2(1,0))*(180/Math.PI)}}}},a.prototype.updateMove=function(e){this.logicPos.x+=e*this.moveSpeed*this.moveDirection.x,this.logicPos.y+=e*this.moveSpeed*this.moveDirection.y,this.node.setPosition(this.logicPos),this.shadowMove()},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a)},a.prototype.onCollision=function(e){if(null!=e&&!this.hasColl)if(e.node.group!=s.pzaGroupEnum.ZOMBIE);else{var a=e.node.getComponent(y.pzaZombieBody);this.colliderZombie(a&&a.baseData)}},a.prototype.colliderZombie=function(e){if(e&&!e.isDead)if(null!=e.zombieData){if(e.zombieData&&e.zombieData.hypnosis)this.close();else if(e.buffData.hasBuff(f.pzaBuffType.INVINCIBLE))this.close();else if(!e.buffData.hasBuff(f.pzaBuffType.DIVE)){var a=window.pzazombieManager.getZombie(e);null!=a?(a.hurt(this.atk),this.close()):this.close()}}else this.close()},a.prototype.close=function(){d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.hasColl=!0,null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},a.prototype.createShadow=function(){var e=this,a=c.pzaNodeManager.getDownEffectNode();h.pzaBundleObjectPool.requestInstantByUrl2(m.pzaResourceUrl.SHADOW,function(t,o){if(null==t&&null!=o){o.setParent(a);var n=o.getComponent(z.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),e.curShadow=n,e.shadowMove()}else console.error(t)})},a.prototype.shadowMove=function(){if(null!=this.curShadow){var e=cc.v2(this.node.x,this.node.y-80);this.curShadow.followMove(e)}},i([b({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"bulletNode",void 0),i([b({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],a.prototype,"maxLifeTime",void 0),i([b(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([v],a)}(r.pzaBaseComponent);t.pzaTrackBullet=P,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaTryPlantCard:[function(e,a,t){"use strict";cc._RF.push(a,"25e79xufflKz5dPfz55BIRZ","pzaTryPlantCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTryPlantCard=void 0;var r=e("../../Battle/Data/pzaPlantEnum"),p=e("../../Battle/pzaGameState"),l=e("../../Common/pzaGameConfig"),s=e("../../Common/pzaSpriteFrameManager"),c=e("./pzaPlantCard"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.plantIcon=null,a.cardBoard=null,a.mask=null,a.tryCountText=null,a.professSP=null,a.curPlantType=null,a.isSelect=!1,a.noCommend=!1,a.index=null,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},a.prototype.bindData=function(e,a,t,o){if(this.curPlantType=e,this.selectCall=a,this.isSelect=!1,this.noCommend=3!=p.pzaGameState.curChapter&&4!=p.pzaGameState.curChapter&&8!=p.pzaGameState.curChapter&&9!=p.pzaGameState.curChapter&&e==r.pzaPlantEnum.CATTAIL,s.pzaSpriteFrameManager.loadPlantCard(e,this.plantIcon),s.pzaSpriteFrameManager.loadPlantCardSlotFrame(this.cardBoard,e),this.noCommend?(this.mask.active=!0,this.mask.children[0].active=!0,this.mask.opacity=200,this.tryCountText.node.active=!1):(this.mask.active=!1,this.mask.children[0].active=!1,this.tryCountText.node.active=!0),this.tryCountText.string=o.toString(),this.index=t,this.professSP=this.node.getChildByName("card_slot_1").getChildByName("Card").getChildByName("professor").getComponent(cc.Sprite),this.professSP){c.pzaPlantCard.fixCardStyle(null,null,this.plantIcon.node,this.professSP.node),this.professSP.node.active=!1;var n=l.pzaGameConfig.getPlantConfig(e);n&&(this.professSP.node.active=!0,s.pzaSpriteFrameManager.loadPlantProfess(n.profession,this.professSP))}},a.prototype.refreshView=function(e){e&&(this.tryCountText.string=e.toString())},a.prototype.clickCard=function(){this.noCommend||(this.selectCall&&this.selectCall(this.curPlantType,this.index,parseInt(this.tryCountText.string)),this.isSelect=!0,this.mask.active=!0,this.mask.opacity=177)},a.prototype.disSelect=function(){this.isSelect&&(this.isSelect=!1,this.mask.active=!1)},i([h({displayName:"\u690d\u7269\u56fe\u6807",type:cc.Sprite})],a.prototype,"plantIcon",void 0),i([h({type:cc.Sprite})],a.prototype,"cardBoard",void 0),i([h({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([h({displayName:"\u8bd5\u7528\u6b21\u6570",type:cc.Label})],a.prototype,"tryCountText",void 0),i([d],a)}(cc.Component);t.pzaTryPlantCard=m,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","./pzaPlantCard":"pzaPlantCard"}],pzaTrySelectView:[function(e,a,t){"use strict";cc._RF.push(a,"027b4eBRt5OLbIEDm+3D9Qu","pzaTrySelectView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTrySelectView=void 0;var p=e("../../Battle/Data/pzaPlantEnum"),l=e("../../Battle/pzaGameState"),s=e("../../Common/pzaGameCommonPool"),c=e("../../Common/pzaGameManager"),u=e("../../Common/pzaLocalData"),d=e("../../Common/pzaStatisticsMgr"),h=e("../../Common/pzaWorldEventManager"),m=e("../../utils/pzaChannel"),f=e("./pzaTryPlantCard"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tryBtn=null,a.useBtn=null,a.tryProgress=null,a.tips=null,a.cards=[],a.videoIcon=null,a.curTryPlant=null,a.curTryPlantIndex=null,a.curPlant=null,a.selectCall=null,a}return n(a,e),a.prototype.init=function(e){var a,t;this.selectCall=e,this.curPlant=null,this.tryBtn.active=!1,this.videoIcon.active=!u.pzaLocalData.data.isShowVideoIcon,this.setCurTryPlant(),this.cards.length;var o=null;try{for(var n=r(l.pzaGameState.extraAdPlantArr),i=n.next();!i.done;i=n.next())o=i.value}catch(f){a={error:f}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}if(o){var s=this.cards.length-1;this.cards[s].node.active=!0,this.cards[s].bindData(o,this.selectCardCall.bind(this),s,this.curTryPlant[s])}var d=c.pzaGameManager.getCurrentGame().getAdPlantArr();if(d)for(m=0;m<8;m++){var h=d.shift();h?(this.cards[m].node.active=!0,this.cards[m].bindData(h,this.selectCardCall.bind(this),m,this.curTryPlant[m])):this.cards[m].node.active=!1}else for(var m=0;m<8;m++)p.pzaPlantEnum.GATLING_PEA+m!=p.pzaPlantEnum.GOLD_MAGNET?(this.cards[m].node.active=!0,this.cards[m].bindData(p.pzaPlantEnum.GATLING_PEA+m,this.selectCardCall.bind(this),m,this.curTryPlant[m])):this.cards[m].node.active=!1;this.refreshView()},a.prototype.refreshView=function(){this.tips.string="\u6bcf\u89c2\u770b5\u4e2a\u5e7f\u544a\u89c6\u9891\u5373\u53ef\u89e3\u9501\u5168\u90e8\u9a91\u58eb",this.setCurTryPlant(),this.isEndLessMode()?this.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+u.pzaLocalData.data.watchADTryPlantCountEndLess.toString()+" / 5":this.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+u.pzaLocalData.data.watchADTryPlantCountNormal.toString()+" / 5";for(var e=0;e<this.cards.length;e++)this.cards[e].refreshView(this.curTryPlant[e]);this.useBtn.active=this.curTryPlant[this.curTryPlantIndex]>0,this.tryBtn.active=this.curTryPlant[this.curTryPlantIndex]<=0},a.prototype.isEndLessMode=function(){return l.pzaGameState.gameMode==l.pzaGameMode.SUR_ENDLESS||l.pzaGameState.gameMode==l.pzaGameMode.SURVIVAL||l.pzaGameState.gameMode==l.pzaGameMode.ZOMBIE_ENDLESS},a.prototype.setCurTryPlant=function(){this.isEndLessMode()?this.curTryPlant=u.pzaLocalData.data.tryPlantCountArrayEndLess:this.curTryPlant=u.pzaLocalData.data.tryPlantCountArrayNormal},a.prototype.selectCardCall=function(e,a){this.curPlant=e,this.tryBtn.getChildByName("ad_icon").active=!0,this.cards.forEach(function(e){e&&e.disSelect()}),d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"9"+e},{name:"adname",value:"\u5c40\u5185\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"}),this.useBtn.active=this.curTryPlant[a]>0,this.tryBtn.active=this.curTryPlant[a]<=0,this.curTryPlantIndex=a},a.prototype.clickUse=function(){this.close(),this.selectCall&&this.selectCall(this.curPlant)},a.prototype.clickTry=function(){var e=this;this.curPlant,l.pzaGameState.isVaseMode()&&this.curPlant,m.pzaChannel.instance().showVideo({sucCall:function(){if(e.isEndLessMode()){if(u.pzaLocalData.data.watchADTryPlantCountEndLess++,u.pzaLocalData.data.tryPlantCountArrayEndLess[e.curTryPlantIndex]++,u.pzaLocalData.data.watchADTryPlantCountEndLess>=5){u.pzaLocalData.data.watchADTryPlantCountEndLess=0;for(var a=0;a<u.pzaLocalData.data.tryPlantCountArrayEndLess.length;a++)u.pzaLocalData.data.tryPlantCountArrayEndLess[a]++}e.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+u.pzaLocalData.data.watchADTryPlantCountEndLess.toString()+" / 5"}else{if(u.pzaLocalData.data.watchADTryPlantCountNormal++,u.pzaLocalData.data.tryPlantCountArrayNormal[e.curTryPlantIndex]++,u.pzaLocalData.data.watchADTryPlantCountNormal>=5)for(u.pzaLocalData.data.watchADTryPlantCountNormal=0,a=0;a<u.pzaLocalData.data.tryPlantCountArrayNormal.length;a++)u.pzaLocalData.data.tryPlantCountArrayNormal[a]++;e.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+u.pzaLocalData.data.watchADTryPlantCountNormal.toString()+" / 5",u.pzaLocalData.addDirty("watchADTryPlantCountNormal","tryPlantCountArrayNormal")}e.refreshView()},failCall:function(){},endCall:function(){},posName:"\u5c40\u5185\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269",adsid:"9"})},a.prototype.clickClose=function(){this.selectCall&&this.selectCall(null),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.DISSELECT_CARD,null),l.pzaGameState.selectCard=null,this.close()},a.prototype.onEnable=function(){l.pzaGameState.curTryPlantIndex=null},a.prototype.close=function(){l.pzaGameState.gamePause=!1,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_RESUME,null),s.pzaGameCommonPool.returnInstant(this.node),l.pzaGameState.curTryPlantIndex=this.curTryPlantIndex},i([g({displayName:"\u8bd5\u7528\u6309\u94ae",type:cc.Node})],a.prototype,"tryBtn",void 0),i([g({displayName:"\u79cd\u690d\u6309\u94ae",type:cc.Node})],a.prototype,"useBtn",void 0),i([g({displayName:"\u8bd5\u7528\u8fdb\u5ea6",type:cc.Label})],a.prototype,"tryProgress",void 0),i([g({displayName:"\u63d0\u793a\u6587\u672c",type:cc.Label})],a.prototype,"tips",void 0),i([g({displayName:"\u5361\u7247",type:[f.pzaTryPlantCard]})],a.prototype,"cards",void 0),i([g({type:cc.Node})],a.prototype,"videoIcon",void 0),i([y],a)}(cc.Component);t.pzaTrySelectView=v,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel","./pzaTryPlantCard":"pzaTryPlantCard"}],pzaTwinSunflower:[function(e,a,t){"use strict";cc._RF.push(a,"b1ab1UU/d5FBq7i+EZv8G8N","pzaTwinSunflower");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaTwinSunflower=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaSoundManager"),s=e("../../Common/pzaUtil"),c=e("../pzaGameState"),u=e("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.bindData=function(a){var t=this;e.prototype.bindData.call(this,a),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=s.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!c.pzaGameState.gameWin&&t.baseData.plantData.atkInterval<=0){if(null==t.baseData||t.baseData.isDead)return;return t.baseData.plantData.atkInterval=s.pzaUtil.getRandomFloatNum(23.5,25),l.pzaSoundManager.playAudio("SunShroom"),void t.animation.playAnimation("idle2",!1,o,function(){window.pzaplantManager.plantCreateSun(t.baseData.logicPos.clone(),!0),window.pzaplantManager.plantCreateSun(t.baseData.logicPos.clone(),!0)})}t.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),c.pzaGameState.twinFlowerCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_15,c.pzaGameState.twinFlowerCount),c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.baseData.plantData.atkInterval-=a)},i([h],a)}(u.pzaBasePlant));t.pzaTwinSunflower=m,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaUIManager:[function(e,a,t){"use strict";cc._RF.push(a,"5fc2bwtxBVEhpbi01E3sB0R","pzaUIManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaUIManager=void 0;var r=e("../Load/pzaBundleObjectPool"),p=e("../Load/pzaPreLoadManager"),l=e("../utils/pzaChannel"),s=e("../View/pzaCommonMask"),c=e("../View/pzaGotRewardView"),u=e("../View/pzaPowerView"),d=e("./pzaGameCommonPool"),h=e("./pzaGameManager"),m=e("./pzaLocalData"),f=e("./pzaSpineController"),z=e("./pzaUtil"),y=e("./pzaWorldEventManager"),g=cc._decorator,v=g.ccclass,b=g.property,P=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.boardNode=null,a.popNode=null,a.loadNode=null,a.loadPro=null,a.snailAni=null,a.loadActText=null,a.loadErrorView=null,a.loadingSPF=[],a.progressBar=null,a.proTag=null,a.boardUINode=null,a.popUIMap=new Map,a}var t;return n(a,e),t=a,a.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),t.instance=this,this.loadNode.active=!1},a.baseShowBoardUI=function(e,a){l.pzaChannel.instance().closeBanner();var t=this.instance;if(null!=t&&null!=e){if(null!=t.boardUINode){if(t.boardUINode.url==e)return t.boardUINode.active=!0,void(a&&a(t.boardUINode));d.pzaGameCommonPool.returnInstant(t.boardUINode),t.boardUINode=null}s.pzaCommonMask.showMask(!0);var o=function(){r.pzaBundleObjectPool.requestInstantByUrl(e,!1,function(o,n){null==o&&null!=n?(n.url=e,n.setParent(t.boardNode),s.pzaCommonMask.hideMask(),a&&a(n),t.boardUINode=n):console.error(o)})},n=p.pzaPreLoadManager.getSubResources(e);null!=n?r.pzaBundleObjectPool.preLoadSubResource(n,function(){o()}):o()}},a.baseShowPopUI=function(e,a,t){void 0===t&&(t=!1),l.pzaChannel.instance().closeBanner();var o=this.instance;if(null!=o&&null!=e){var n=o.popUIMap.get(e);if(null!=n&&n.active&&0==t)a&&a(n);else{s.pzaCommonMask.showMask(!0);var i=function(){"resources/Prefab/View/WarningView"==e?r.pzaBundleObjectPool.requestInstantByUrl2(e,function(t,n){!t&&n?(n.setParent(o.popNode),s.pzaCommonMask.hideMask(),a&&a(n),o.popUIMap.set(e,n)):console.error(t)}):r.pzaBundleObjectPool.requestInstantByUrl(e,!1,function(t,n){!t&&n?(n.setParent(o.popNode),s.pzaCommonMask.hideMask(),a&&a(n),o.popUIMap.set(e,n)):console.error(t)})},c=p.pzaPreLoadManager.getSubResources(e);null!=c?r.pzaBundleObjectPool.preLoadSubResource(c,function(){i()}):i()}}},a.removeAllPopUI=function(){var e=this.instance;null!=e&&null!=e.popNode.children&&e.popNode.children.forEach(function(e){d.pzaGameCommonPool.returnInstant(e)})},a.removeBoardUI=function(){var e=this.instance;null!=e&&null!=e.boardUINode&&(d.pzaGameCommonPool.returnInstant(e.boardUINode),e.boardUINode=null)},a.showLoading=function(){var e=this.instance;if(null!=e){e.loadNode.active=!0,e.loadPro.string="0%",e.progressBar.progress=0,e.snailAni.playAnimation("idle2",!0);var a=e.loadNode.getComponent(cc.Sprite);z.pzaUtil.getRandomNum(0,e.loadingSPF.length-1),a.spriteFrame=e.loadingSPF[4]}},a.updateLoadPro=function(e){var a=this.instance;null!=a&&(a.loadPro.string=e+"%",a.progressBar.progress=e/100,a.proTag.x=a.progressBar.node.width*e/100)},a.hideLoading=function(e){var a=this.instance;null!=a?(e&&e(),a.loadNode.active=!1):e&&e()},a.showPowerView=function(){this.baseShowPopUI(p.pzaResourceUrl.POWER_VIEW,function(e){var a=e&&e.getComponent(u.pzaPowerView);a&&a.bindData("\u8865\u5145\u4f53\u529b",function(){var e;e=m.pzaLocalData.data.power+m.pzaLocalData.addPowerValue,m.pzaLocalData.data.power=e,m.pzaLocalData.addDirty("power"),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.UPDATE_POWER,null)},null)})},a.aniShowPopUI=function(e,a){var t=this.instance;null!=t&&null!=e&&this.baseShowPopUI(e,function(e){s.pzaCommonMask.showMask(!1),t.boardNode.stopAllActions(),t.boardNode.x=0,t.boardNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(-1680,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){t.boardNode.x=0}))),t.popNode.stopAllActions(),t.popNode.x=1680,t.popNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){t.popNode.x=0,s.pzaCommonMask.hideMask(),a&&a(e)})))})},a.aniHidePopUI=function(e){var a=this.instance;null!=a&&(s.pzaCommonMask.showMask(!1),a.boardNode.stopAllActions(),a.boardNode.x=-1680,a.boardNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){a.boardNode.x=0}))),a.popNode.stopAllActions(),a.popNode.x=0,a.popNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(1680,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){a.popNode.x=0,s.pzaCommonMask.hideMask(),e&&e()}))))},a.hasPopUI=function(){var e=this.instance;return null!=e&&null!=e.popNode.children&&e.popNode.children.length>0},a.setLoadingActText=function(e){var a=this.instance;null!=a&&(a.loadActText.string=e)},a.showLoadErrorView=function(){var e=this.instance;null!=e&&(e.loadErrorView.active=!0)},a.hideLoadErrorView=function(){var e=this.instance;null!=e&&(e.loadErrorView.active=!1)},a.prototype.clickReloadBtn=function(){h.pzaGameManager.getCurrentGame().preLoadFun&&h.pzaGameManager.getCurrentGame().preLoadFun()},a.prototype.clickBackHomeBtn=function(){t.hideLoadErrorView(),t.instance.loadNode.active=!1,t.baseShowBoardUI(p.pzaResourceUrl.HOME_SELECT_VIEW,null)},a.prototype.showRewardUI=function(e,a,o){t.baseShowPopUI(p.pzaResourceUrl.GOTREWARDVIEW,function(t){var n=t&&t.getComponent(c.pzaGotRewardView);n&&n.bindData(e,a,o)})},a.instance=null,i([b({displayName:"\u9762\u677f\u8282\u70b9",type:cc.Node})],a.prototype,"boardNode",void 0),i([b({displayName:"\u5f39\u7a97\u8282\u70b9",type:cc.Node})],a.prototype,"popNode",void 0),i([b({displayName:"\u52a0\u8f7d\u754c\u9762\u8282\u70b9",type:cc.Node})],a.prototype,"loadNode",void 0),i([b({displayName:"\u52a0\u8f7d\u8fdb\u5ea6",type:cc.Label})],a.prototype,"loadPro",void 0),i([b({displayName:"\u8717\u725b\u52a8\u753b",type:f.pzaSpineController})],a.prototype,"snailAni",void 0),i([b({displayName:"\u52a0\u8f7d\u52a8\u4f5c\u6587\u672c",type:cc.Label})],a.prototype,"loadActText",void 0),i([b({displayName:"\u52a0\u8f7d\u9519\u8bef\u754c\u9762",type:cc.Node})],a.prototype,"loadErrorView",void 0),i([b({type:[cc.SpriteFrame]})],a.prototype,"loadingSPF",void 0),i([b({type:cc.ProgressBar})],a.prototype,"progressBar",void 0),i([b({type:cc.Node})],a.prototype,"proTag",void 0),t=i([v],a)}(cc.Component);t.pzaUIManager=P,cc._RF.pop()},{"../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","../View/pzaGotRewardView":"pzaGotRewardView","../View/pzaPowerView":"pzaPowerView","../utils/pzaChannel":"pzaChannel","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaSpineController":"pzaSpineController","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaUIScrollView:[function(e,a,t){"use strict";cc._RF.push(a,"1d541xXhqpG9rjWwZVPxca5","pzaUIScrollView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.scrollSpeed=.2,a}return n(a,e),a.prototype.onDisable=function(){e.prototype.onDisable.call(this)},a.prototype._handleMoveLogic=function(e){var a=e.getDelta();this._processDeltaMove(a.mul(this.scrollSpeed))},i([l(cc.Integer)],a.prototype,"scrollSpeed",void 0),i([p],a)}(cc.ScrollView);t.default=s,cc._RF.pop()},{}],pzaUmbrellaLeaf:[function(e,a,t){"use strict";cc._RF.push(a,"029c8UfLAZMhr0KRIDyS44u","pzaUmbrellaLeaf");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaUmbrellaLeaf=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../../Common/pzaWorldEventManager"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaZombieEnum"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=e("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.attacking=!1,a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},a.prototype.onDisable=function(){e.prototype.onDisable.call(this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.attacking=!1,this.playNormalAni(),u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1,this.node.zIndex++,this.baseData&&this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.UNABLE_SELECT,-1))},a.prototype.logicUpdate=function(a){var t=this;if(e.prototype.logicUpdate.call(this,a),null!=this.baseData&&!this.baseData.isDead&&!this.attacking){var o=!1;window.pzazombieManager.zombieMap.forEach(function(e,a){null==a||a.isDead||null==a.zombieData||a.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||a.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||a.xIndex>t.baseData.xIndex+1||a.xIndex<t.baseData.xIndex-1||a.yIndex>t.baseData.yIndex+1||a.yIndex<t.baseData.yIndex-1||(a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.RICOCHET,-1)),o=!0)}),o&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()}))}},a.prototype.ricochetBullet=function(e,a){var t=this;if(e==this.baseData){this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()});var o=cc.v2(this.baseData.logicPos.x+80,this.baseData.logicPos.y+70);c.pzaEffectManager.createRicochetBulletEffect(o,a)}},a.prototype.ricochetZombie=function(e){var a=this;e==this.baseData&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){a.attacking=!1,a.playNormalAni()}))},a.prototype.playNormalAni=function(){this.animation.playAnimation("idle",!0,null)},a.prototype.death=function(a,t){window.pzaplantManager.removeNoTargetPlant(this.baseData.xIndex,this.baseData.yIndex),e.prototype.death.call(this,a,t,!1)},a.prototype.onFrozen=function(e){this.baseData.buffData.hasBuff(l.pzaBuffType.IMM_CONTROL)||(this.pauseSelf(),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROZEN,this.frozenTime)),this.frozenTime=e,this.animation&&(this.animation.spineAnimation.node.color=cc.color(55,149,255)))},i([m],a)}(d.pzaBasePlant));t.pzaUmbrellaLeaf=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaUtil:[function(e,a,t){"use strict";cc._RF.push(a,"f1088fhgM5C05+lhr93RDcO","pzaUtil");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var a,t=1,o=arguments.length;t<o;t++)for(var n in a=arguments[t])Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e}).apply(this,arguments)},n=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r},r=this&&this.__spread||function(){for(var e=[],a=0;a<arguments.length;a++)e=e.concat(i(arguments[a]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaUtil=void 0;var p=function(){function e(){}return e.uuid=function(){var e,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=[];for(e=0;e<16;e++)t[e]=a[0|16*Math.random()];return t.join("")},e.getRandomNum=function(e,a){if(e==a)return e;var t=e>a?a:e,o=(e>a?e+1:a+1)-t;return Math.floor(Math.random()*o)+t},e.getRandomFloatNum=function(e,a){return a<=e?e:e+(a-e)*Math.random()},e.getDistance=function(e,a){return null==e||null==a?0:Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))},e.getRandomIndexByWeight=function(e){var a,t;if(null==e||e.length<=0)return 0;var o=0;try{for(var i=n(e),r=i.next();!r.done;r=i.next())o+=r.value}catch(s){a={error:s}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}o*=Math.random();for(var p=0,l=e.length;p<l;p++)if((o-=e[p])<=0)return p;return e.length-1},e.getRandomValueFromArray=function(e){if(null==e||e.length<=0)return null;var a=e.length,t=Math.random();return e[Math.floor(t*a)]},e.getRandomArrayValue=function(e,a){if(null==e||e.length<=1||e.length<=a)return e||[];for(var t=e.slice(0),o=e.length,n=o-a,i=null,r=null;o-- >n;)i=t[r=Math.floor((o+1)*Math.random())],t[r]=t[o],t[o]=i;return t.slice(n)},e.switchGraySprite=function(e,a){var t=a?cc.Material.getBuiltinMaterial("2d-gray-sprite"):cc.Material.getBuiltinMaterial("2d-sprite");e&&e.setMaterial(0,t)},e.getAngle=function(e,a){return null==e||null==a?0:Math.atan2(e.y-a.y,e.x-a.x)*(180/Math.PI)},e.getVectorsRadion=function(e,a){return null==e||null==a?0:a.signAngle(e)},e.rotateAngle=function(e,a){if(0==a)return e;if(null==e)return cc.v2();var t=Math.PI/180*a,o=Math.sin(t),n=Math.cos(t),i=e.x*n+e.y*o,r=-e.x*o+e.y*n;return cc.v2(i,r)},e.isSameDay=function(e,a){return null!=e&&null!=a&&new Date(e).toDateString()===new Date(a).toDateString()},e.getDayInterval=function(e,a){var t=new Date(e),o=new Date(a),n=t.setHours(0,0,0,0),i=o.setHours(0,0,0,0)-n;return i=Math.abs(i),Math.floor(i/864e5)},e.getCurrencyStr=function(e){if(null==e)return"";if(e<1e3)return e+"";var a="",t=(e+"").split("");t=t.reverse();for(var o=0,n=0;n<t.length;n++)a=t[n]+a,o++,n<t.length-1&&o>=3&&(a=","+a,o=0);return a},e.blinkAni=function(e,a){if(void 0===a&&(a=!1),a){if(!e)return;var t=e.tw;return t&&t.stop(),void(e&&(e.color=cc.Color.WHITE))}var o=null,n=function(a,t,n,i){var r=a+(t-a)*i;if(!e||!e.name)return o&&o.stop(),r;var p=new cc.Color(r,r,r);return e&&(e.color=p),r};o=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:n}).to(.5,{c:255},{progress:n})),e.tw=o,o.start()},e.formatDateTime=function(e){var a=function(e){return e<10?"0"+e:e},t=new Date(e);return a(t.getMonth()+1)+"/"+a(t.getDate())+" "+a(t.getHours())+":"+a(t.getMinutes())},e.initGameSpeed=function(){cc.gameSpeed=1,cc.director.calculateDeltaTime=function(e){e||(e=performance.now()),this._deltaTime=e>this._lastUpdate?(e-this._lastUpdate)/1e3:0,this._deltaTime*=cc.gameSpeed,this._lastUpdate=e}},e.changeGameSpeed=function(e){cc.gameSpeed=e},e.secondsToHms=function(e){var a=Math.floor(e/3600),t=Math.floor((e-3600*a)/60);return[a,t,e%60].map(function(e){return e<10?"0"+e:e.toString()}).filter(function(e,t){return t>0||a>0}).join(":")},e.getGameSpeed=function(){return cc.gameSpeed||(cc.gameSpeed=1),cc.gameSpeed},e.analysisPickState=function(e,a){for(var t="",o=0;o<a;o++){var n=e[o];n=n&&""!=n?parseInt(n):0,0==o?t=""+n:t+=","+n}return t},e.setPickState=function(e,a,t){if(!e||null==a||null==t)return"";for(var o=e.split(","),n="",i=0;i<o.length;i++){var r=null;r=o[i]&&""!=o[i]?parseInt(o[i]):0,i==a&&(r=t),0==i?n=""+r:n+=","+r}return n},e.deepCopySet=function(e){var a=Array.from(e),t=r(a);return new Set(t)},e.deepCloneMap=function(e){var a=this;return new Map(Array.from(e).map(function(e){var t=i(e,2),n=t[0],r=t[1];return r instanceof Map?[n,a.deepCloneMap(r)]:Array.isArray(r)?[n,r.slice()]:r&&"object"==typeof r?[n,o({},r)]:[n,r]}))},e.deepCloneArray=function(a){return a.map(function(a){return Array.isArray(a)?e.deepCloneArray(a):a})},e.generateRandomString=function(e){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from({length:e}).reduce(function(e){return e+a.charAt(Math.floor(Math.random()*a.length))},"")},e}();t.pzaUtil=p,cc._RF.pop()},{}],pzaValueTest:[function(e,a,t){"use strict";cc._RF.push(a,"219e4O/3btIkL5WcVTzKVdm","pzaValueTest");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaValueTest=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.hideTime=2,a}return n(a,e),a.prototype.setView=function(e,a,t,o,n){this.node.parent=a,this.node.x=0,this.node.y=100+50*t,this.label.string=o+":"+n,this.hideTime=10,this.node.opacity=255,this.name=o,e.testValue[o]=this},a.prototype.refreshView=function(e){this.label.string=this.name+":"+e,this.hideTime=3,this.node.opacity=255},a.prototype.update=function(e){this.hideTime-=e,this.node.opacity>0&&this.hideTime<=0&&(this.node.opacity=0)},a.prototype.close=function(){this.node.destroy()},i([l({type:cc.Label})],a.prototype,"label",void 0),i([p],a)}(cc.Component);t.pzaValueTest=s,cc._RF.pop()},{}],pzaVideoGiftView:[function(e,a,t){"use strict";cc._RF.push(a,"ac701j067FJ/ZhV+w0N6Xxd","pzaVideoGiftView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},r=this&&this.__values||function(e){var a="function"==typeof Symbol&&Symbol.iterator,t=a&&e[a],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaVideoGiftView=void 0;var p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGiftConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaOperationMgr"),u=e("../Common/pzaRewardManager"),d=e("../Common/pzaStatisticsMgr"),h=e("../utils/pzaChannel"),m=e("./pzaRewardItem"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.rewardItemParent=null,a.items=[],a.title=null,a.cancelBtn=null,a.toggle=null,a.successCall=null,a.closeCall=null,a.giftId=null,a.isWatchadEnd=!1,a}return n(a,e),a.prototype.bindData=function(e,a,t){var o,n,i=this;try{for(var p=r(this.rewardItemParent.children),c=p.next();!c.done;c=p.next()){var u=c.value.getComponent(m.pzaRewardItem);this.items.push(u)}}catch(g){o={error:g}}finally{try{c&&!c.done&&(n=p.return)&&n.call(p)}finally{if(o)throw o.error}}h.pzaChannel.instance().showBanner(),this.giftId=e,this.isWatchadEnd=!1,this.giftData=l.pzaGiftConfig.getGiftData(e),this.title.string=this.giftData.name;for(var d=l.pzaGiftConfig.getGiftPropData(this.giftData.ID),f=0;f<4;f++){var z=this.items[f];if(null==z)return;var y=d[f];null==y?z.node.active=!1:(z.node.active=!0,z.init(y))}this.successCall=a,this.closeCall=t,this.cancelBtn.active=!1,"tt"==h.pzaChannel.instance().channel?this.cancelBtn.active=!0:(this.toggle.active=!1,setTimeout(function(){i&&i.cancelBtn&&(i.cancelBtn.active=!0)},s.pzaLocalData.data.DelayShowCancelBtnTime)),this.sendEvent()},a.prototype.sendEvent=function(){null!=this.giftId&&(this.giftId==l.pzaGiftID.Begin?d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"19"},{name:"adname",value:"\u798f\u5229\u793c\u5305\uff08\u65b0\u624b\uff09"}):this.giftId==l.pzaGiftID.Dave?d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"20"},{name:"adname",value:"\u798f\u5229\u793c\u5305\uff08\u4f53\u529b\uff09"}):this.giftId==l.pzaGiftID.Garden?d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"21"},{name:"adname",value:"\u798f\u5229\u793c\u5305\uff08\u6536\u85cf\uff09"}):this.giftId==l.pzaGiftID.Res&&d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u798f\u5229\u793c\u5305\uff08\u8d44\u6e90\uff09"}))},a.prototype.showCloseBtn=function(){this.toggle.active=!1,this.cancelBtn.active=!0},a.prototype.showVideo=function(){var e=this,a="",t="";this.giftId==l.pzaGiftID.Begin?(t="19",a="\u798f\u5229\u793c\u5305\uff08\u65b0\u624b\uff09"):this.giftId==l.pzaGiftID.Dave?(t="20",a="\u798f\u5229\u793c\u5305\uff08\u4f53\u529b\uff09"):this.giftId==l.pzaGiftID.Garden?(t="21",a="\u798f\u5229\u793c\u5305\uff08\u6536\u85cf\uff09"):this.giftId==l.pzaGiftID.Res&&(t="22",a="\u798f\u5229\u793c\u5305\uff08\u8d44\u6e90\uff09"),h.pzaChannel.instance().showVideo({sucCall:function(){e.isWatchadEnd=!0,u.pzaRewardManager.recieveRewards(l.pzaGiftConfig.getGiftPropData(e.giftData.ID),function(){e.close(),l.pzaGiftConfig.setGiftCount(e.giftData.ID),e.successCall&&e.successCall()})},failCall:function(){},endCall:function(){},posName:a,adsid:t})},a.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},a.prototype.close=function(){this.giftId!=l.pzaGiftID.Dave&&this.giftId!=l.pzaGiftID.Res||(this.isWatchadEnd?c.pzaOperationMgr.lastGiftType=this.giftId:this.giftId==l.pzaGiftID.Dave?c.pzaOperationMgr.lastGiftType=l.pzaGiftID.Res:c.pzaOperationMgr.lastGiftType=l.pzaGiftID.Dave),h.pzaChannel.instance().closeBanner(),p.pzaGameCommonPool.returnInstant(this.node)},i([y({displayName:"\u5956\u52b1item\u7236\u7ea7",type:cc.Node})],a.prototype,"rewardItemParent",void 0),i([y({displayName:"\u6807\u9898",type:cc.Label})],a.prototype,"title",void 0),i([y({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],a.prototype,"cancelBtn",void 0),i([y(cc.Node)],a.prototype,"toggle",void 0),i([z],a)}(cc.Component);t.pzaVideoGiftView=g,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGiftConfig":"pzaGiftConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel","./pzaRewardItem":"pzaRewardItem"}],pzaVideoPlantGiftView:[function(e,a,t){"use strict";cc._RF.push(a,"97f58kN/phJpInMTXNtODox","pzaVideoPlantGiftView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaVideoPlantGiftView=void 0;var r=e("../Battle/Data/pzaPlantEnum"),p=e("../Battle/pzaGameState"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGiftConfig"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSoundManager"),d=e("../utils/pzaChannel"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.item=null,a.plantName=null,a.plantDesc=null,a.videoIcon=null,a.plantImg=[],a}return n(a,e),a.prototype.bindData=function(e){switch(e){case r.pzaPlantEnum.GATLING_PEA:this.plantType=s.pzaPlantGiftType.GATLING_PEA;break;case r.pzaPlantEnum.GLOOM_SHROOM:this.plantType=s.pzaPlantGiftType.GLOOM_SHROOM;break;case r.pzaPlantEnum.CATTAIL:this.plantType=s.pzaPlantGiftType.CATTAIL;break;case r.pzaPlantEnum.SPIKEROCK:this.plantType=s.pzaPlantGiftType.SPIKEROCK;break;case r.pzaPlantEnum.COB_CANNON:this.plantType=s.pzaPlantGiftType.COB_CANNON;break;case r.pzaPlantEnum.WINTER_MELON:this.plantType=s.pzaPlantGiftType.WINTER_MELON}var a=s.pzaGiftConfig.getPlantGiftDesc(e);a&&(this.plantDesc.string=a),this.refreshView(),this.videoIcon.active=!c.pzaLocalData.data.isShowVideoIcon;for(var t=0;t<c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].length;t++)if(c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL][t]==e){c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].splice(t);break}},a.prototype.refreshView=function(){this.refreshPlantItem(this.item,this.plantType)},a.prototype.setBtnVideoNum=function(e,a){var t,o;switch(a){case s.pzaPlantGiftType.GATLING_PEA:t=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA),o=c.pzaLocalData.data.gatlingAdCount;break;case s.pzaPlantGiftType.GLOOM_SHROOM:t=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM),o=c.pzaLocalData.data.gloomShroomAdCount;break;case s.pzaPlantGiftType.CATTAIL:t=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL),o=c.pzaLocalData.data.cattailAdCount;break;case s.pzaPlantGiftType.SPIKEROCK:t=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK),o=c.pzaLocalData.data.spikerockAdCount;break;case s.pzaPlantGiftType.COB_CANNON:t=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON),o=c.pzaLocalData.data.cobCannonAdCount;break;case s.pzaPlantGiftType.WINTER_MELON:t=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON),o=c.pzaLocalData.data.winterMelonAdCount}var n=e.getChildByName("btn_5");n.active=!0;var i=e.getChildByName("buy_text").getComponent(cc.Label);i.string="\u9700\u8981\u89c2\u770b("+o+"/"+t.needVideo+")\u5e7f\u544a",o>=t.needVideo&&(n.active=!1,i.string="\u5df2\u89e3\u9501")},a.prototype.refreshPlantItem=function(e,a){var t=e.getChildByName("name").getComponent(cc.Label),o=e.getChildByName("btn_5").getComponent(cc.Button),n=new cc.Component.EventHandler;switch(n.target=this.node,n.component="pzaVideoPlantGiftView",n.handler="clickPlantVideoBtn",a){case s.pzaPlantGiftType.GATLING_PEA:t.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA).name,n.customEventData=r.pzaPlantEnum.GATLING_PEA.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[0];break;case s.pzaPlantGiftType.GLOOM_SHROOM:t.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM).name,n.customEventData=r.pzaPlantEnum.GLOOM_SHROOM.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[1];break;case s.pzaPlantGiftType.CATTAIL:t.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL).name,n.customEventData=r.pzaPlantEnum.CATTAIL.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[2];break;case s.pzaPlantGiftType.SPIKEROCK:t.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK).name,n.customEventData=r.pzaPlantEnum.SPIKEROCK.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[3];break;case s.pzaPlantGiftType.COB_CANNON:t.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON).name,n.customEventData=r.pzaPlantEnum.COB_CANNON.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[4];break;case s.pzaPlantGiftType.WINTER_MELON:t.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON).name,n.customEventData=r.pzaPlantEnum.WINTER_MELON.toString(),e.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[5]}this.plantName.string=t.string,o.clickEvents.push(n),this.setBtnVideoNum(e,a),this.removeTrialPlant()},a.prototype.removeTrialPlant=function(){var e,a=p.pzaGameState.curChapter,t=p.pzaGameState.curPart;2==a&&6==t?e=r.pzaPlantEnum.GATLING_PEA:2==a&&8==t?e=r.pzaPlantEnum.GLOOM_SHROOM:3==a&&1==t?e=r.pzaPlantEnum.CATTAIL:4==a&&9==t?e=r.pzaPlantEnum.SPIKEROCK:5==a&&4==t?e=r.pzaPlantEnum.COB_CANNON:5==a&&9==t&&(e=r.pzaPlantEnum.WINTER_MELON);var o=c.pzaLocalData.data.ownPlants.includes(e);if(e&&!o&&p.pzaGameState.gameMode==p.pzaGameMode.NORMAL)for(var n=0;n<c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].length;n++)if(c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL][n]==e){c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].splice(n);break}},a.prototype.clickPlantVideoBtn=function(e,a){var t=this;d.pzaChannel.instance().showVideo({sucCall:function(){var o,n=s.pzaGiftConfig.getPlantGiftData(parseInt(a));switch(n.plant){case r.pzaPlantEnum.GATLING_PEA:c.pzaLocalData.data.gatlingAdCount++,c.pzaLocalData.addDirty("gatlingAdCount"),o=c.pzaLocalData.data.gatlingAdCount;break;case r.pzaPlantEnum.GLOOM_SHROOM:c.pzaLocalData.data.gloomShroomAdCount++,c.pzaLocalData.addDirty("gloomShroomAdCount"),o=c.pzaLocalData.data.gloomShroomAdCount;break;case r.pzaPlantEnum.CATTAIL:c.pzaLocalData.data.cattailAdCount++,c.pzaLocalData.addDirty("cattailAdCount"),o=c.pzaLocalData.data.cattailAdCount;break;case r.pzaPlantEnum.SPIKEROCK:c.pzaLocalData.data.spikerockAdCount++,c.pzaLocalData.addDirty("spikerockAdCount"),o=c.pzaLocalData.data.spikerockAdCount;break;case r.pzaPlantEnum.COB_CANNON:c.pzaLocalData.data.cobCannonAdCount++,c.pzaLocalData.addDirty("cobCannonAdCount"),o=c.pzaLocalData.data.cobCannonAdCount;break;case r.pzaPlantEnum.WINTER_MELON:c.pzaLocalData.data.winterMelonAdCount++,c.pzaLocalData.addDirty("winterMelonAdCount"),o=c.pzaLocalData.data.winterMelonAdCount}o>=n.needVideo?(c.pzaLocalData.data.ownPlants.push(n.plant),c.pzaLocalData.addDirty("ownPlants"),t.close()):t.setBtnVideoNum(e.target.parent,t.plantType)},failCall:function(){},endCall:function(){},posName:"\u690d\u7269\u793c\u5305\u83b7\u53d6"})},a.prototype.clickCancel=function(){u.pzaSoundManager.playSFX(),this.close()},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u793c\u5305ITEM",type:cc.Node})],a.prototype,"item",void 0),i([f({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],a.prototype,"plantName",void 0),i([f({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],a.prototype,"plantDesc",void 0),i([f({displayName:"\u89c6\u9891ICON",type:cc.Node})],a.prototype,"videoIcon",void 0),i([f({type:[cc.SpriteFrame]})],a.prototype,"plantImg",void 0),i([m],a)}(cc.Component);t.pzaVideoPlantGiftView=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGiftConfig":"pzaGiftConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../utils/pzaChannel":"pzaChannel"}],pzaWallNut:[function(e,a,t){"use strict";cc._RF.push(a,"7f523i63cpNt5U+azxQROnr","pzaWallNut");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWallNut=void 0;var r=e("../../Common/pzaNameConf"),p=e("../Data/pzaPlantEnum"),l=e("../pzaGameState"),s=e("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hurtTime=0,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),a.plantData.cate=p.pzaPlantCate.Nut,this.playAniLogic(),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1,this.animation.setAnimationSkin(r.pzaPlantSkName.WALL_NUT.SKIN.intact)},a.prototype.playAniLogic=function(){var e=this,a=this.hurtTime>0?r.pzaPlantSkName.WALL_NUT.hurt:r.pzaPlantSkName.WALL_NUT.idle,t=function(){var a=e.hurtTime>0?r.pzaPlantSkName.WALL_NUT.hurt:r.pzaPlantSkName.WALL_NUT.idle;e.animation.playAnimation(a,!1,t)};this.animation.playAnimation(a,!1,t)},a.prototype.update=function(a){e.prototype.update.call(this,a),this.hurtTime-=a},a.prototype.logicUpdate=function(a){e.prototype.logicUpdate.call(this,a)},a.prototype.hurt=function(a,t,o){e.prototype.hurt.call(this,a,t,o),this.hurtTime=.3,this.animation.spineAnimation.animation==r.pzaPlantSkName.WALL_NUT.idle&&this.playAniLogic()},a.prototype.plantDying=function(){e.prototype.plantDying.call(this),this.animation.setAnimationSkin(r.pzaPlantSkName.WALL_NUT.SKIN.dying)},a.prototype.plantHurt=function(){e.prototype.plantHurt.call(this),this.animation.setAnimationSkin(r.pzaPlantSkName.WALL_NUT.SKIN.hurt)},a.prototype.plantIntact=function(){e.prototype.plantIntact.call(this),this.animation.setAnimationSkin(r.pzaPlantSkName.WALL_NUT.SKIN.intact)},a.prototype.death=function(a,t,o,n){e.prototype.death.call(this,a,t,o,n,r.pzaPlantSkName.WALL_NUT.SKIN.dying)},i([u],a)}(s.pzaBasePlant));t.pzaWallNut=d,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWarnLineEffect:[function(e,a,t){"use strict";cc._RF.push(a,"5ce5bgx5shBZ5/Pv0CyjKJq","pzaWarnLineEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWarnLineEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=(p.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),i([l],a)}(r.pzaBaseComponent));t.pzaWarnLineEffect=s,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaWarningView:[function(e,a,t){"use strict";cc._RF.push(a,"c8b2eMkM0xK7bVO1Yn/Wwm0","pzaWarningView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWarningView=void 0;var r=e("../Common/pzaCommonPopView"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaLocalData"),s=e("../Common/pzaSoundManager"),c=e("../Common/pzaTipManager"),u=e("../Common/pzaUIManager"),d=e("../utils/pzaChannel"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.tittle=null,a.tip=null,a.confirmBtn=null,a.cancelBtn=null,a.confirmTxt=null,a.cancelTxt=null,a.adIcon=null,a.shareIcon=null,a.rightAdIcon=null,a.rightShareIcon=null,a.leftPowerNode=null,a.leftPowerCostLab=null,a.rightPowerNode=null,a.rightPowerCostLab=null,a.powerProNode=null,a.poolPrefab=null,a.PropNum=null,a.PropUseBtn=null,a.toggle=null,a.confirmCall=null,a.cancelCall=null,a.isPropViewType=!1,a.costPower=0,a.interJudge=!1,a}return n(a,e),a.prototype.setView=function(){this.toggle.active=!1,this.confirmTxt.node.active=!this.isPropViewType,this.PropNum.node.parent.active=this.isPropViewType,this.adIcon.active=!this.isPropViewType,this.shareIcon.active=!this.isPropViewType,this.rightAdIcon.active=!this.isPropViewType,this.rightShareIcon.active=!this.isPropViewType,this.PropUseBtn.active=this.isPropViewType},a.prototype.show=function(e,a,t,o,n,i,r,p,s,c,u,h,m){void 0===i&&(i="\u8b66\u544a"),void 0===r&&(r=!1),void 0===p&&(p=!1),void 0===s&&(s=0),void 0===c&&(c=!1),void 0===u&&(u=0),void 0===h&&(h=!1),void 0===m&&(m=0),this.tip.lineHeight=28,this.isPropViewType=!1,this.setView(),this.leftPowerNode.active=!1,this.rightPowerNode.active=!1,this.powerProNode.active=!1,this.costPower=0,this.interJudge=!1,this.tip.string=e,this.confirmCall=o,this.cancelCall=n,this.confirmTxt.string=a,this.cancelTxt.string=t,this.tittle.string=i,null!=t?(this.cancelTxt.string=t,this.cancelBtn.active=!0,this.cancelBtn.x=121,this.confirmBtn.x=-121):(this.cancelBtn.active=!1,this.confirmBtn.x=0),this.adIcon.active=r,this.shareIcon.active=p,"ks"!=d.pzaChannel.instance().channel&&"tt"!=d.pzaChannel.instance().channel&&"my"!=d.pzaChannel.instance().channel||(this.shareIcon.active=!1,this.adIcon.active=r,p&&(this.adIcon.active=!0)),this.rightAdIcon.active=!1,this.rightShareIcon.active=!1,s&&(1==s&&(this.rightAdIcon.active=!0),2==s&&(this.rightShareIcon.active=!0,"ks"!=d.pzaChannel.instance().channel&&"tt"!=d.pzaChannel.instance().channel&&"my"!=d.pzaChannel.instance().channel||(this.rightAdIcon.active=!0,this.rightShareIcon.active=!1))),l.pzaLocalData.isShowPowerGift||(c=!1),c&&(this.powerProNode.active=!0,this.leftPowerNode.active=1==m,this.rightPowerNode.active=2==m,this.leftPowerCostLab.string=u+"",this.rightPowerCostLab.string=u+"",this.interJudge=h,this.costPower=u)},a.prototype.setTipLineHeight=function(e){this.tip.lineHeight=e},a.prototype.clickConfirmUseProp=function(){s.pzaSoundManager.playSFX(),l.pzaLocalData.consumeProp(this.PropType),this.close(),this.confirmCall&&this.confirmCall()},a.prototype.clickConfirm=function(){s.pzaSoundManager.playSFX(),this.close(),this.confirmCall&&this.confirmCall()},a.prototype.clickCancel=function(){if(s.pzaSoundManager.playSFX(),l.pzaLocalData.isShowPowerGift||(this.interJudge=!1),this.interJudge){if(l.pzaLocalData.data.power<this.costPower)return c.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void u.pzaUIManager.showPowerView();l.pzaLocalData.setPower(-this.costPower),this.cancelCall&&this.cancelCall()}else this.cancelCall&&this.cancelCall();this.close()},a.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):p.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u6807\u9898",type:cc.Label})],a.prototype,"tittle",void 0),i([f({displayName:"\u63d0\u793a\u8bed",type:cc.Label})],a.prototype,"tip",void 0),i([f({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Node})],a.prototype,"confirmBtn",void 0),i([f({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],a.prototype,"cancelBtn",void 0),i([f({displayName:"\u786e\u5b9a\u6309\u94ae\u6587\u6848",type:cc.Label})],a.prototype,"confirmTxt",void 0),i([f({displayName:"\u53d6\u6d88\u6309\u94ae\u6587\u6848",type:cc.Label})],a.prototype,"cancelTxt",void 0),i([f({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Node})],a.prototype,"adIcon",void 0),i([f({displayName:"\u5206\u4eab\u56fe\u6807",type:cc.Node})],a.prototype,"shareIcon",void 0),i([f({displayName:"\u53f3\u4fa7\u5e7f\u544a\u6807\u8bc6",type:cc.Node})],a.prototype,"rightAdIcon",void 0),i([f({displayName:"\u53f3\u4fa7\u5206\u4eab\u6807\u8bc6",type:cc.Node})],a.prototype,"rightShareIcon",void 0),i([f({displayName:"\u5de6\u8fb9\u4f53\u529b\u7b26\u53f7",type:cc.Node})],a.prototype,"leftPowerNode",void 0),i([f({displayName:"\u5de6\u8fb9\u4f53\u529b\u6587\u5b57",type:cc.Label})],a.prototype,"leftPowerCostLab",void 0),i([f({displayName:"\u53f3\u8fb9\u4f53\u529b\u7b26\u53f7",type:cc.Node})],a.prototype,"rightPowerNode",void 0),i([f({displayName:"\u53f3\u8fb9\u4f53\u529b\u6587\u5b57",type:cc.Label})],a.prototype,"rightPowerCostLab",void 0),i([f({displayName:"\u4f53\u529b\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],a.prototype,"powerProNode",void 0),i([f(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([f({displayName:"\u9053\u5177\u6b21\u6570",type:cc.Label})],a.prototype,"PropNum",void 0),i([f({displayName:"\u9053\u5177\u4f7f\u7528\u6309\u94ae",type:cc.Node})],a.prototype,"PropUseBtn",void 0),i([f(cc.Node)],a.prototype,"toggle",void 0),i([m],a)}(r.default);t.pzaWarningView=z,cc._RF.pop()},{"../Common/pzaCommonPopView":"pzaCommonPopView","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../utils/pzaChannel":"pzaChannel"}],pzaWaterLightEffect:[function(e,a,t){"use strict";cc._RF.push(a,"02c0fxAip5MbqgSRlsznf+Y","pzaWaterLightEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWaterLightEffect=void 0;var r=e("../../Common/pzaGameCommonPool"),p=e("../../Common/pzaUtil"),l=e("../../Common/pzaWorldEventManager"),s=e("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.waterLight1=null,a.waterLight2=null,a.waterLight3=null,a.interval=0,a.freeWaterArr1=[],a.freeWaterArr2=[],a.freeWaterArr3=[],a.activeWater=new Set,a.pause=!1,a.mapId=0,a.minY=-130,a.maxY=40,a.minX=0,a.maxX=0,a}return n(a,e),a.prototype.onLoad=function(){this.freeWaterArr1.push(this.waterLight1),this.freeWaterArr2.push(this.waterLight2),this.freeWaterArr3.push(this.waterLight3),this.waterLight1.name="1",this.waterLight2.name="2",this.waterLight3.name="3",this.minY=-130,this.maxY=40,this.mapId=0},a.prototype.onEnable=function(){this.interval=0,this.pause=!1,this.createLight(!1),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),s.pzaGameState.isNightScene?this.node.opacity=76.5:this.node.opacity=255},a.prototype.setMapId=function(e){this.mapId=e},a.prototype.onDisable=function(){var e=this;l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),this.activeWater.forEach(function(a){a.stopAllActions(),"1"==a.name?e.freeWaterArr1.push(a):"2"==a.name?e.freeWaterArr2.push(a):e.freeWaterArr3.push(a)}),this.activeWater.clear()},a.prototype.update=function(e){this.pause||(this.interval+=e,this.interval>=.07&&(this.interval=0,this.createLight(!1)))},a.prototype.createLight=function(e){var a=Math.random();this.mapId>0?((e||a<=.07)&&this.createLittleLight(this.minX,this.maxX),(e||a<=.14&&a>.07)&&this.createLittleLight(this.minX,this.maxX),(e||a<=.21&&a>.14)&&this.createLittleLight(this.minX,this.maxX),(e||a<=.28&&a>.21)&&this.createLittleLight(this.minX,this.maxX),20==this.mapId&&((e||a<=.14&&a>.07)&&this.createLittleLight(this.minX,this.maxX),(e||a<=.21&&a>.14)&&this.createLittleLight(this.minX,this.maxX),(e||a<=.28&&a>.21)&&this.createLittleLight(this.minX,this.maxX)),(e||a<=.37&&a>.28)&&this.createMiddleLight(this.minX,this.maxX),(e||a<=.46&&a>.37)&&this.createMiddleLight(this.minX,this.maxX),20==this.mapId&&((e||a<=.37&&a>.28)&&this.createMiddleLight(this.minX,this.maxX),(e||a<=.46&&a>.37)&&this.createMiddleLight(this.minX,this.maxX),(e||a<=.37&&a>.28)&&this.createMiddleLight(this.minX,this.maxX),(e||a<=.46&&a>.37)&&this.createMiddleLight(this.minX,this.maxX)),(e||a<=.52&&a>.46)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.57&&a>.52)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.62&&a>.57)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.67&&a>.62)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.72&&a>.67)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.77&&a>.72)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.82&&a>.77)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.87&&a>.82)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.92&&a>.87)&&this.createLargeLight(this.minX,this.maxX),(e||a>=.92)&&this.createLargeLight(this.minX,this.maxX),20==this.mapId&&((e||a<=.52&&a>.46)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.57&&a>.52)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.62&&a>.57)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.67&&a>.62)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.72&&a>.67)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.77&&a>.72)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.82&&a>.77)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.87&&a>.82)&&this.createLargeLight(this.minX,this.maxX),(e||a<=.92&&a>.87)&&this.createLargeLight(this.minX,this.maxX))):((e||a<=.07)&&this.createLittleLight(-365,-265),(e||a<=.14&&a>.07)&&this.createLittleLight(-265,-165),(e||a<=.21&&a>.14)&&this.createLittleLight(-165,-65),(e||a<=.28&&a>.21)&&this.createLittleLight(-65,65),(e||a<=.37&&a>.28)&&this.createMiddleLight(65,175),(e||a<=.46&&a>.37)&&this.createMiddleLight(425,570),(e||a<=.52&&a>.46)&&this.createLargeLight(175,200),(e||a<=.57&&a>.52)&&this.createLargeLight(200,225),(e||a<=.62&&a>.57)&&this.createLargeLight(225,250),(e||a<=.67&&a>.62)&&this.createLargeLight(250,275),(e||a<=.72&&a>.67)&&this.createLargeLight(275,300),(e||a<=.77&&a>.72)&&this.createLargeLight(300,325),(e||a<=.82&&a>.77)&&this.createLargeLight(325,350),(e||a<=.87&&a>.82)&&this.createLargeLight(350,375),(e||a<=.92&&a>.87)&&this.createLargeLight(375,400),(e||a>=.92)&&this.createLargeLight(400,425))},a.prototype.createLittleLight=function(e,a){for(var t=p.pzaUtil.getRandomNum(0,3),o=0;o<t;o++){var n=p.pzaUtil.getRandomNum(e,a),i=p.pzaUtil.getRandomNum(this.minY,this.maxY),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},a.prototype.createMiddleLight=function(e,a){for(var t=p.pzaUtil.getRandomNum(1,4),o=0;o<t;o++){var n=p.pzaUtil.getRandomNum(e,a),i=p.pzaUtil.getRandomNum(this.minY,this.maxY),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},a.prototype.createLargeLight=function(e,a){for(var t=p.pzaUtil.getRandomNum(2,6),o=0;o<t;o++){var n=p.pzaUtil.getRandomNum(e,a),i=p.pzaUtil.getRandomNum(this.minY,this.maxY),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},a.prototype.getWaterLight=function(){var e=this,a=Math.random();if(a<=.1){var t=this.freeWaterArr1.pop();null==t?((t=cc.instantiate(this.waterLight1)).setParent(this.node),t.name="1"):t.active=!0,t.opacity=122;var o=1*Math.random()+.4;return t.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){t.active=!1,e.freeWaterArr1.push(t),e.activeWater.delete(t)}))),t}if(a<=.7){var n=this.freeWaterArr2.pop();return null==n?((n=cc.instantiate(this.waterLight2)).setParent(this.node),n.name="2"):n.active=!0,n.opacity=122,o=1*Math.random()+.4,n.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){n.active=!1,e.freeWaterArr2.push(n),e.activeWater.delete(n)}))),n}var i=this.freeWaterArr3.pop();return null==i?((i=cc.instantiate(this.waterLight3)).setParent(this.node),i.name="3"):i.active=!0,i.opacity=122,o=1*Math.random()+.4,i.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){i.active=!1,e.freeWaterArr3.push(i),e.activeWater.delete(i)}))),i},a.prototype.pauseSelf=function(){this.pause=!0,this.activeWater.forEach(function(e){e&&e.pauseAllActions()})},a.prototype.resumeSelf=function(){this.pause=!1,this.activeWater.forEach(function(e){e&&e.resumeAllActions()})},a.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u6c34\u51491",type:cc.Node})],a.prototype,"waterLight1",void 0),i([d({displayName:"\u6c34\u51492",type:cc.Node})],a.prototype,"waterLight2",void 0),i([d({displayName:"\u6c34\u51493",type:cc.Node})],a.prototype,"waterLight3",void 0),i([u],a)}(cc.Component);t.pzaWaterLightEffect=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaWaterWaveEffect:[function(e,a,t){"use strict";cc._RF.push(a,"b8bfb61mf5JK4Xs6nmfC9To","pzaWaterWaveEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWaterWaveEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../utils/pzaFrameAnim"),l=e("../../Common/pzaGameCommonPool"),s=e("../Data/pzaZombieEnum"),c=e("../pzaGameState"),u=e("../../Common/pzaGameConfig"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.ani=null,a.poolPrefab=null,a.offset=cc.v2(0,0),a.miniGameOffsetY=0,a}return n(a,e),a.prototype.init=function(a,t,o,n){void 0===t&&(t=cc.v2(0,30)),void 0===o&&(o=1),e.prototype.bindData.call(this,a),this.offset=t,this.targetNode=n,this.node.scale=o,this.miniGameOffsetY=0,c.pzaGameState.isSmallGame()&&(this.miniGameOffsetY=-10,this.node.scale*=u.pzaGameConfig.miniZombieScale),this.updatePos(),this.ani.reset(),this.ani.play()},a.prototype.update=function(e){null!=this.baseData&&(this.baseData.zombieData.cate!=s.pzaZombieCate.Gargantuar&&(this.baseData.isDead||this.baseData.hp<=0)?this.close():(this.ani.updateFrame(e),this.updatePos()))},a.prototype.showWaterWave=function(){this.ani.node.active=!0},a.prototype.hideWaterWave=function(){this.ani.node.active=!1},a.prototype.updatePos=function(){null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.targetNode.x,this.targetNode.y+this.baseData.floatY+this.miniGameOffsetY).add(this.offset))},a.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([m({displayName:"\u52a8\u753b",type:p.default})],a.prototype,"ani",void 0),i([m(cc.Prefab)],a.prototype,"poolPrefab",void 0),i([h],a)}(r.pzaBaseComponent);t.pzaWaterWaveEffect=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../utils/pzaFrameAnim":"pzaFrameAnim","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState"}],pzaWinterMelonPult:[function(e,a,t){"use strict";cc._RF.push(a,"1c94fQ/hjZIqrQ4DMAZvZUU","pzaWinterMelonPult");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWinterMelonPult=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaGameCommonPool"),s=e("../../Common/pzaNodeManager"),c=e("../../Common/pzaSoundManager"),u=e("../Bullet/pzaThrowBullet"),d=e("../Data/pzaBuffData"),h=e("../pzaGameState"),m=e("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.shootNode=null,a.bulletPrefab=null,a.atkAniTime=1.4,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.node.zIndex=10*-this.baseData.yIndex-1,this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),h.pzaGameState.useThrowPlant=!0,h.pzaGameState.onlyBoomPlant=!1,h.pzaGameState.onlyShroomCofee=!1,h.pzaGameState.winterMelon[a.yIndex]=1;for(var t=h.pzaGameState.map.getMapRow(),o=!0,n=0;n<t;n++)if(1!=h.pzaGameState.winterMelon[n]){o=!1;break}o&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_23)},a.prototype.playNormalAni=function(){var e=this,a=function(){var t=e.findAttackTarget();if(null!=t)return c.pzaSoundManager.playAudio("melonimpact"),void e.animation.playAnimation("attack",!1,a,function(){e.attack(t)},e.atkAniTime/e.atkInterval);e.animation.playAnimation("idle",!1,a)};a()},a.prototype.findAttackTarget=function(){var e=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=null,t=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<e.baseData.logicPos.x)&&!o.buffData.hasBuff(d.pzaBuffType.FLY)&&!o.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-e.baseData.logicPos.x;(-1==t||n<t)&&(a=o,t=n)}}),null==a?this.findDrZomBoss():a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null==e||null==e.baseData||e.baseData.isDead||e.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)?null:e.baseData},a.prototype.attack=function(e){if(null!=e&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=s.pzaNodeManager.getBulletNode();if(null!=a){var t=window.pzazombieManager.getZombie(e);if(null!=t){var o=t.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=a.convertToNodeSpaceAR(o),i=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var r=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(a);var p=cc.v2(r.x+this.baseData.logicPos.x+16,r.y+this.baseData.logicPos.y+57);i.setPosition(p);var c=i.getComponent(u.pzaThrowBullet);null!=c&&(c.init(this.getBulletAni(),!1,this.baseData.yIndex,this.baseData.atk,e,n,-1,!0),c.updateBulletAngel(40),c.hasSpatter=!0,c.hasFrost=!0)}}}}}},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],a.prototype,"shootNode",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],a.prototype,"bulletPrefab",void 0),i([z],a)}(m.pzaBasePlant);t.pzaWinterMelonPult=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWordEffect:[function(e,a,t){"use strict";cc._RF.push(a,"dfe58WKdXhPIIN3qd6gO7l7","pzaWordEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWordEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaWorldEventManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.wordSprite=null,a.wordFrames=[],a.endCall=null,a}return n(a,e),a.prototype.onEnable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.CLOSE_REDTIP,this.closeWord,this)},a.prototype.onDisable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.CLOSE_REDTIP,this.closeWord,this)},a.prototype.closeWord=function(){this.node.stopAllActions(),this.close()},a.prototype.playReadyPlant=function(e){var a=this;this.endCall=e,this.node.stopAllActions(),this.node.scale=.01,this.wordSprite.spriteFrame=this.wordFrames[0],this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){a.node.scale=1,p.pzaSoundManager.playAudio("readygo")}),cc.scaleTo(.5,1.5),cc.callFunc(function(){a.wordSprite.spriteFrame=null}),cc.delayTime(.1),cc.callFunc(function(){a.node.scale=1,a.wordSprite.spriteFrame=a.wordFrames[1]}),cc.scaleTo(.5,1.5),cc.callFunc(function(){a.wordSprite.spriteFrame=null}),cc.delayTime(.1),cc.callFunc(function(){a.wordSprite.spriteFrame=a.wordFrames[2]}),cc.delayTime(.5),cc.callFunc(function(){a.endCall&&a.endCall(),a.close()})))},a.prototype.playLargeWave=function(e){var a=this;this.node.stopAllActions(),this.node.scale=1.4,this.wordSprite.spriteFrame=this.wordFrames[3],p.pzaSoundManager.playAudio("hugewave"),this.node.runAction(cc.sequence(cc.scaleTo(1,.8),cc.delayTime(1),cc.callFunc(function(){p.pzaSoundManager.playAudio("siren"),e?a.playLastWave():a.close()})))},a.prototype.playLastWave=function(){var e=this;this.node.stopAllActions(),this.node.scale=3,this.wordSprite.spriteFrame=this.wordFrames[4],p.pzaSoundManager.playAudio("finalwave"),this.node.runAction(cc.sequence(cc.scaleTo(1,1.5),cc.delayTime(4),cc.callFunc(function(){e.close()})))},a.prototype.pauseSelf=function(){this.node.pauseAllActions()},a.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([u({displayName:"\u6587\u5b57\u56fe",type:cc.Sprite})],a.prototype,"wordSprite",void 0),i([u({displayName:"\u6587\u5b57\u56fe\u7ec4",type:[cc.SpriteFrame]})],a.prototype,"wordFrames",void 0),i([c],a)}(r.pzaBaseComponent);t.pzaWordEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaWorldEventManager:[function(e,a,t){"use strict";cc._RF.push(a,"132dcxtIelN5q2Nk4+WL4Rp","pzaWorldEventManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaWorldEventManager=t.CircleActivityType=t.pzaWorldEventType=void 0,function(e){e.BACK_HOME="BACK_HOME",e.GAME_PAUSE="GAME_PAUSE",e.GAME_RESUME="GAME_RESUME",e.GAME_OVER="GAME_OVER",e.GAME_WIN="GAME_WIN",e.SELECT_CARD="SELECT_CARD",e.DISSELECT_CARD="DISSELECT_CARD",e.BLOW_WIND="BLOW_WIND",e.PLANT_PLANT="PLANT_PLANT",e.PLANT_AD_PLANT="PLANT_AD_PLANT",e.GROVE_SHAKE="GROVE_SHAKE",e.CLEAR_SCREEN="CLEAR_SCREEN",e.CLEAR_BULLET="CLEAR_BULLET",e.LACK_SUN="LACK_SUN",e.JALAPENO_BOOM="JALAPENO_BOOM",e.ICE_SHROOM_BOOM="ICE_SHROOM_BOOM",e.LAUNCH_COB_CANNON="LAUNCH_COB_CANNON",e.AUTO_PICK="AUTO_PICK",e.PASS_PICK="PASS_PICK",e.GUIDE_REFRESH_PROP="GUIDE_REFRESH_PROP",e.GUIDE_SHOW_SPEED="GUIDE_SHOW_SPEED",e.GUIDE_USE_SPEED="GUIDE_USE_SPEED",e.USE_GAME_PROP="USE_GAME_PROP",e.SPECIAL_ACH="SPECIAL_ACH",e.HIDE_DAVE_DIALOG="HIDE_DAVE_DIALOG",e.SHOW_DAVE_DIALOG="SHOW_DAVE_DIALOG",e.UPDATE_PART_PRO="UPDATE_PART_PRO",e.UPDATE_PLANT_PRICE="UPDATE_PLANT_PRICE",e.RICOCHET_BULLET="RICOCHET_BULLET",e.RICOCHET_ZOMBIE="RICOCHET_ZOMBIE",e.CLOSE_REDTIP="CLOSE_REDTIP",e.RESET_CARD_STATE="RESET_CARD_STATE",e.UPDATE_ALL_PLANT_PRICE="UPDATE_ALL_PLANT_PRICE",e.UPDATE_POWER="UPDATE_POWER",e.POWER_ANI="POWER_ANI",e.SHOW_BUBBLE_TIPS="SHOW_BUBBLE_TIPS",e.SHOW_BUBBLE_ARROW="SHOW_BUBBLE_ARROW",e.SETTIME_BUBBLE_CLOSE="SETTIME_BUBBLE_CLOSE",e.REFRESH_FREE_PLANT="REFRESH_FREE_PLANT",e.PLANTNUT_AD_PLANT="PLANTNUT_AD_PLANT",e.UPDATE_RECORD_STATE="UPDATE_RECORD_STATE",e.UPDATE_GARDEN_STATE="UPDATE_GARDEN_STATE",e.UPDATE_GARDEN_GUIDE="UPDATE_GARDEN_GUIDE",e.REPORT_AD_SHOW="REPORT_AD_SHOW",e.BACK_HOMEVIEW="BACK_HOMEVIEW",e.CLEAR_CLEANCAR="CLEAR_CLEANCAR",e.MISSILE_DEATH="MISSILE_DEATH",e.UPDATE_SIDEVIEW_STATE="UPDATE_SIDEVIEW_STATE",e.UPDATE_ADTICKET="UPDATE_ADTICKET",e.BATTLEPASS_GETALL="BATTLEPASS_GETALL",e.NEWPLAYER_TASK_OVER="NEWPLAYER_TASK_OVER",e.REFRESH_BELTVIEW="REFRESH_BELTVIEW",e.GUIDE_TIPS="GUIDE_TIPS",e.SET_CARDLIST="SET_CARDLIST",e.ONZOMBIEKILLED="ONZOMBIEKILLED",e.SELECT_PLANT_CARD="SELECT_PLANT_CARD",e.ONCLICK_DROPCARD="ONCLICK_DROPCARD",e.CLEAR_FROZENEFFECT="CLEAR_FROZENEFFECT",e.GUIDE_CLICKSHOVEL="GUIDE_CLICKSHOVEL",e.GUIDE_TIPS_OPACITY="GUIDE_TIPS_OPACITY",e.SHOW_SELECTCARD_DESC="SHOW_SELECTCARD_DESC",e.PARTVIEW_SCROLLTOCENTER="PARTVIEW_SCROLLTOCENTER",e.GUIDE_FREE_SHOPITEM="GUIDE_FREE_SHOPITEM",e.PLAY_DEMOSCENE="PLAY_DEMOSCENE",e.GUIDE_GARDEN_CLICKPOT="GUIDE_GARDEN_CLICKPOT",e.GARDEN_CANCEL_CHOICE="GARDEN_CANCEL_CHOICE",e.BATTLE_PASS_NORMALRWD="BATTLE_PASS_NORMALRWD",e.BATTLE_PASS_HIGHRWD="BATTLE_PASS_HIGHRWD",e.BATTLE_PASS_UPDATE_SCROLL="BATTLE_PASS_UPDATE_SCROLL",e.FORCEGUIDE_CLICK="FORCEGUIDE_CLICK",e.WEAKGUIDE_CLICKFREEBTN="WEAKGUIDE_CLICKFREEBTN",e.WEAKGUIDE_CLOSECLICK="WEAKGUIDE_CLOSECLICK",e.SET_GROVEOPACITY="SET_GROVEOPACITY",e.BELTEQUIP_GUIDE_START="BELTEQUIP_GUIDE_START",e.GARDENSHARE_GUIDE_START="GARDENSHARE_GUIDE_START",e.GARDENSHARE_GUIDE_OVER="GARDENSHARE_GUIDE_OVER",e.UPDATE_VIEW="UPDATE_VIEW",e.JUMP_VIEW="JUMP_VIEW"}(t.pzaWorldEventType||(t.pzaWorldEventType={})),function(e){e.RIDER_FALL_PIECE="mr_rider_fall_piece_te1",e.BELT_PIECE="mr_belt_piece_te1",e.MR_BATTLE_PASS_RESET="mr_battle_pass_reset_te3",e.NEWPLAYER_TASK="rider_newPlayer_te1"}(t.CircleActivityType||(t.CircleActivityType={}));var r=cc._decorator,p=r.ccclass,l=(r.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}var t;return n(a,e),t=a,a.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),t.worldEventNode=this.node},a.addListener=function(e,a,o){null!=t.worldEventNode&&t.worldEventNode.on(e,a,o,!1)},a.removeListener=function(e,a,o){null!=t.worldEventNode&&t.worldEventNode.off(e,a,o)},a.triggerEvent=function(e,a,o){null!=t.worldEventNode&&t.worldEventNode.emit(e,a,o)},a.worldEventNode=null,t=i([p],a)}(cc.Component));t.pzaWorldEventManager=l,cc._RF.pop()},{}],pzaYetiZombie:[function(e,a,t){"use strict";cc._RF.push(a,"6bf68f5cVRDSpfEXCibGTwO","pzaYetiZombie");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaYetiZombie=void 0;var r=e("../../Common/pzaGameConfig"),p=e("../Data/pzaZombieEnum"),l=e("../pzaGameState"),s=e("./pzaBaseZombie"),c=e("../../Achieve/pzaAchieveMgr"),u=e("../../Achieve/pzaAchieve"),d=e("../../Common/pzaLocalData"),h=cc._decorator,m=h.ccclass,f=(h.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.runAwayIndex=0,a.runAwayFlag=!1,a}return n(a,e),a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.runAwayIndex=Math.random()>.5?4:5,this.runAwayFlag=!1},a.prototype.logicUpdate=function(e){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(e);else if(this.hasTool)this.updateMove(e);else{var a=this.findTarget();null==a||a.isDead?this.updateMove(e):this.attack(e,a),this.canRunAway(),8!=l.pzaGameState.map.getMapXIndex(this.baseData.logicPos)||d.pzaLocalData.hasUnlockZombie[p.pzaZombieEnum.YETI_ZOMBIE]||(d.pzaLocalData.unlockZombie(p.pzaZombieEnum.YETI_ZOMBIE),c.default.instance().checkAddAchieve(u.pzaAchieveType.ACH_42))}else this.changeRowMove(e)}},a.prototype.canRunAway=function(){if(this.baseData.xIndex>=0&&this.baseData.xIndex<=this.runAwayIndex&&!this.runAwayFlag){var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=l.pzaGameState.map.getBlockWidth()/e,this.runAwayFlag||(this.runAwayFlag=!0,this.baseData.zombieData.direction=1,this.refreshOrientation())}},a.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([m],a)}(s.pzaBaseZombie));t.pzaYetiZombie=f,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaLocalData":"pzaLocalData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie"}],pzaZJPlantConf:[function(e,a,t){"use strict";cc._RF.push(a,"eaeb5zaxm1EoLvQdjBLCHiZ","pzaZJPlantConf");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZJPlantConf=void 0;var i=e("../utils/pzakc"),r=function(e){function a(a){var t=this,o=parseInt(a.id);return(t=e.call(this,o,a.name,parseInt(a.env),parseInt(a.hp),0,0,parseInt(a.gold),parseFloat(a.createCD),parseFloat(a.initCD),!!a.isNight)||this).atkArr=null,t.atk2Arr=null,t.atkCD=0,t.atkCD2=0,t.senior=0,t.completed=0,t.atkArr=i.default.strNumArr(a.atk),t.atk2Arr=i.default.strNumArr(a.atk2),t.atkCD=parseFloat(a.atkCD||0),t.atkCD2=parseFloat(a.atkCD2||0),t.atkInterval=t.atkCD,t.atkArr&&(t.atk=t.atkArr[0]),t.senior=parseInt(a.senior),t.completed=parseInt(a.Completed),t.rareLevel=t.senior,t}return n(a,e),a}(e("./pzaGameConfig").pzaPlantConfigData);t.pzaZJPlantConf=r,cc._RF.pop()},{"../utils/pzakc":"pzakc","./pzaGameConfig":"pzaGameConfig"}],pzaZJZombieConf:[function(e,a,t){"use strict";cc._RF.push(a,"a964faMAJFBxbXrAfbVOuCq","pzaZJZombieConf");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZJZombieConf=void 0;var i=function(e){function a(a){var t,o=this,n=parseInt(a.id);if((o=e.call(this,n,a.name,parseInt(a.hp),parseInt(a.armorHP),parseInt(a.armor),parseInt(a.tool),0,parseFloat(a.atkCD),0,parseInt(a.level),parseInt(a.weight),parseInt(a.min),parseInt(a.ableroad),parseInt(a.ableroad_old),a.typeId,a.showWeight)||this).equipType2=0,o.equipHp2=0,o.atkArr=null,o.atkInterval2=0,o.equipType2=parseInt(a.armor2||0),o.equipHp2=parseInt(a.armorHP2||0),o.atkArr=[a.atk],a.atk2&&o.atkArr.push(a.atk2),o.atkInterval2=parseInt(a.atkCD2||0),o.atk=o.atkArr[0]||0,null!=a.speed)if((t=a.speed.split(",")).length>1){var i=parseFloat(t[0]),r=parseFloat(t[1]);o.minSpeed=Math.min(i,r),o.maxSpeed=Math.max(i,r)}else o.minSpeed=o.maxSpeed=parseFloat(t[0]);return null!=a.speed2&&((t=a.speed2.split(",")).length>1?(i=parseFloat(t[0]),r=parseFloat(t[1]),o.specialMinSpeed=Math.min(i,r),o.specialMaxSpeed=Math.max(i,r)):o.specialMinSpeed=o.specialMaxSpeed=parseFloat(t[0])),o}return n(a,e),a}(e("./pzaGameConfig").pzaZombieConfigData);t.pzaZJZombieConf=i,cc._RF.pop()},{"./pzaGameConfig":"pzaGameConfig"}],pzaZombieBaseBullet:[function(e,a,t){"use strict";cc._RF.push(a,"0bd3e1+3rpDrYGxQK8+qEfk","pzaZombieBaseBullet");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieBaseBullet=void 0;var r=e("../../Common/pzaCollisionManager"),p=e("../../Common/pzaGameCommonPool"),l=e("../../Common/pzaGroupEnum"),s=e("../../Common/pzaNodeManager"),c=e("../../Common/pzaSoundManager"),u=e("../../Common/pzaWorldEventManager"),d=e("../Data/pzaBuffData"),h=e("../Data/pzaPlantEnum"),m=e("../Data/pzaZombieEnum"),f=e("../Effect/pzaBaseEffect"),z=e("../Plant/pzaAttackType"),y=e("../Plant/pzaPlantBody"),g=e("../pzaEffectManager"),v=e("../Zombie/pzaZombieBody"),b=e("./pzaBaseBullet"),P=cc._decorator,C=P.ccclass,E=P.property,S=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.normalBulletNode=null,a.fireBulletNode=null,a.fireBall=null,a.bulletLevel=0,a.direction=cc.v2(-1,0),a.colliderWoods=new Set,a}return n(a,e),a.prototype.init=function(e,a,t,o,n){void 0===t&&(t=1),void 0===o&&(o=null),void 0===n&&(n=cc.v2(-1,0)),this.bulletYIndex=e,r.pzaCollisionManager.getInstance.addZombieBulletByRow(this.bulletYIndex,this),this.atk=a,this.lifeTime=0,this.yTargetPos=o,this.realYSpeed=this.ySpeed,this.direction=n,this.isInAir=!1,this.maxPosX=null,this.node.scale=1,this.createShadow(),this.speed=this.originSpeed,this.bulletLevel=t,this.refreshBulletState(),this.colliderWoods.clear()},a.prototype.update=function(){},a.prototype.logicLateUpdate=function(e){1==this.bulletLevel?this.normalBulletNode.angle+=360*e:2==this.bulletLevel&&(this.fireBall.angle+=360*e)},a.prototype.refreshBulletState=function(){this.normalBulletNode.active=1==this.bulletLevel,this.fireBulletNode.active=2==this.bulletLevel},a.prototype.onCollision=function(e){if(e)if(e.node.group==l.pzaGroupEnum.PLANT){var a=e.node.getComponent(y.pzaPlantBody);if(a)this.colliderPlant(a&&a.baseData);else{var t=e.node.getComponent(v.pzaZombieBody);this.colliderZombie(t&&t.baseData)}}else e.node.group!=l.pzaGroupEnum.ZOMBIEFIRETORCH||this.colliderWoods.has(e)||this.colliderZombieTorch(e)},a.prototype.colliderZombieTorch=function(e){var a=e&&e.node.getComponent(v.pzaZombieBody);null==a||null==a.baseData||a.baseData.isDead||this.bulletLevel>=2||(this.bulletLevel++,this.colliderWoods.add(e),this.refreshBulletState(),this.bulletLevel>=2&&c.pzaSoundManager.playAudio("Torchwood",.5))},a.prototype.colliderPlant=function(e){if(e&&!e.isDead&&e.plantData.canBeShoot){this.playHitEffect(e),this.close();var a=null,t=-1;if(window.pzaplantManager.getAllPlant(h.pzaPlantEnum.UMBRELLA_LEAF).forEach(function(o){if(null==a||0!=t)if(o.xIndex==e.xIndex&&o.yIndex==e.yIndex)a=o,t=0;else if(Math.abs(o.xIndex-e.xIndex)<=1&&Math.abs(o.yIndex-e.yIndex)<=1){var n=Math.abs(o.xIndex-e.xIndex)+Math.abs(o.yIndex-e.yIndex);(null==a||n<t)&&(a=o,t=n)}}),this.bulletLevel>=2&&(a=null,this.atk=2*this.atk),null!=a){var o=null;return 1==this.bulletLevel?o=this.normalBulletNode.getComponent(cc.Sprite).spriteFrame:2==this.bulletLevel&&(o=this.fireBall.getComponent(cc.Sprite).spriteFrame),void u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.RICOCHET_BULLET,a,o)}var n=""+e.xIndex+e.yIndex,i=window.pzaplantManager.plantEnvDataMap.get(n),r=window.pzaplantManager.pumpkinDataMap.get(n);if(null==r){var p=window.pzaplantManager.plantDataMap.get(n);null==p?null==i||(l=window.pzaplantManager.getPlantByData(i))&&l.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK):(l=window.pzaplantManager.getPlantByData(p))&&l.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK)}else{var l;(l=window.pzaplantManager.getPlantByData(r))&&l.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK)}}},a.prototype.colliderZombie=function(e){if(e&&!e.isDead&&(null!=e.zombieData&&e.zombieData.zombieType==m.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==e.yIndex)&&!e.buffData.hasBuff(d.pzaBuffType.DIVE)&&!e.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)&&(this.isInAir||!e.buffData.hasBuff(d.pzaBuffType.FLY))&&(!this.isInAir||e.buffData.hasBuff(d.pzaBuffType.FLY))&&!e.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)&&e.zombieData&&e.zombieData.hypnosis){var a=window.pzazombieManager.getHypnoZombie(e);null!=a&&(this.isCanfrost?this.frostColliderZombie(e):(this.isMine?this.rangeAtk(e):a.hurt(this.atk),this.penetrate||this.close(),this.playHitEffect(e)))}},a.prototype.playHitEffect=function(e){var a=5,t=cc.v2(this.node.x,this.node.y);null!=e&&(a=10*-e.yIndex+5,t=cc.v2(e.logicPos.x,e.logicPos.y+70)),this.bulletLevel>=2&&(c.pzaSoundManager.playAudio("firepeaHit",.5),g.pzaEffectManager.createBoomFireEffect(this.bulletYIndex,0,t,null));var o=s.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=p.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=a,n.setPosition(t);var i=n.getComponent(f.pzaBaseEffect);i&&i.showEffect(null,null)}},a.prototype.close=function(){this.bulletYIndex<0?r.pzaCollisionManager.getInstance.delZombieBulletOther(this):r.pzaCollisionManager.getInstance.delZombieBulletByRow(this.bulletYIndex,this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([E({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"normalBulletNode",void 0),i([E({displayName:"\u706b\u7130\u5b50\u5f39\u8282\u70b9",type:cc.Node})],a.prototype,"fireBulletNode",void 0),i([E({displayName:"\u706b\u7130\u5b50\u5f39\u7403",type:cc.Node})],a.prototype,"fireBall",void 0),i([C],a)}(b.pzaBaseBullet);t.pzaZombieBaseBullet=S,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaAttackType":"pzaAttackType","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaBaseBullet":"pzaBaseBullet"}],pzaZombieBobsledTeam:[function(e,a,t){"use strict";cc._RF.push(a,"7a718blukBMlonF38uNGJmf","pzaZombieBobsledTeam");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieBobsledTeam=void 0;var r=e("../../Achieve/pzaAchieve"),p=e("../../Achieve/pzaAchieveMgr"),l=e("../../Common/pzaSoundManager"),s=e("../Data/pzaBuffData"),c=e("../Data/pzaZombieEnum"),u=e("../Plant/pzaAttackType"),d=e("../pzaEffectManager"),h=e("../pzaGameState"),m=e("./pzaBaseZombie"),f=e("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=(z.property,function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.butterSlot=null,a.playDownAni=!1,a.zombieInCar=!1,a.zombiePos=[],a}return n(a,e),a.prototype.onEnable=function(){e.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.opacity=255,this.animation.node.x=80},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.animation.playAnimation(this.uiIdleName,!0,null,null,.5)},a.prototype.preview=function(a,t,o){void 0===o&&(o=1),e.prototype.bindData.call(this,a),this.hasEquip=!0,this.hasTool=!0,this.zombieWin=!1,this.setZombieScale(o),this.node.scaleX=o,this.refreshFrostState(!0),this.playStayAnimation()},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.zombieInCar=!1,a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_ICE,-1)),a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_SPATTER,-1)),a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1)),l.pzaSoundManager.playAudio("zomboni",1),this.playMoveAnimation(),this.playDownAni=!1},a.prototype.logicUpdate=function(e){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||this.playDownAni||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.updateMove(e))))},a.prototype.updateMove=function(a){e.prototype.updateMove.call(this,a),this.leaveIce()?this.playDieAnimation(!1):this.zombieInCar||-1!=this.baseData.xIndex&&this.baseData.xIndex<=8&&this.jumpInCar()},a.prototype.onChangeIndex=function(){},a.prototype.leaveIce=function(){var e=this,a=window.pzaMapManager.getIceGround(this.baseData.yIndex);if(null==a||a.length<=0)return!0;var t=!0;return a.forEach(function(a){null!=a&&a.getIceX()<e.baseData.logicPos.x&&(t=!1)}),t},a.prototype.jumpInCar=function(){this.zombieInCar=!0,this.playMoveAnimation()},a.prototype.playDeathAnimation=function(a){e.prototype.playDeathAnimation.call(this,a),this.zombieState=f.pzaZombieState.DEAD,this.zombieHurtState=c.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.playAnimation("down",!1,a)},a.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.animation.node.pauseAllActions()},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.animation.node.resumeAllActions()},a.prototype.hurt=function(e,a,t){if(h.pzaGameState.critValue>0&&Math.random()<h.pzaGameState.critValue&&(e=Math.round(1.5*e)),this.baseData&&!this.baseData.isDead){if(t==u.pzaAttackType.CLEAN_CAR)return this.baseData.zombieDie(),void this.flaserDeath();if(t==u.pzaAttackType.BANG)return this.baseData.zombieDie(),void this.death(!1);if(t==u.pzaAttackType.EAT||t==u.pzaAttackType.DEATH||t==u.pzaAttackType.HIT_FLY)return this.baseData.zombieDie(),void this.death(!1);if(t!=u.pzaAttackType.TWINE)if(t!=u.pzaAttackType.BOOM){if(t==u.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!1);t==u.pzaAttackType.SPIKE?this.baseData.hurtZombieBody(e):this.baseData.hurtZombie(e),this.baseData.isDead||this.baseData.hp<=0?this.playDieAnimation(!0):(this.refreshHurtState(!1),this.animation.flash())}else this.ashesDeath();else this.twineDeath()}},a.prototype.playDieAnimation=function(e){var a=this;this.playDownAni=!0,this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,e),this.animation.playAnimation("down",!1,function(){if(!h.pzaGameState.gameWin){a.zombiePos=[],a.zombiePos.push(a.animation.spineAnimation.findBone("1").worldX),a.zombiePos.push(a.animation.spineAnimation.findBone("3").worldX),a.zombiePos.push(a.animation.spineAnimation.findBone("5").worldX),a.zombiePos.push(a.animation.spineAnimation.findBone("10").worldX);for(var e=0;e<4;e++){var t=cc.v2(a.zombiePos[e]+a.baseData.logicPos.x+h.pzaGameState.map.getBlockWidth()/2+14,a.baseData.logicPos.y),o=h.pzaGameState.map.getMapXIndex(t),n=window.pzazombieManager.createFixBlockZombieData(c.pzaZombieEnum.ZOMBIE_BOBSLED,o,a.baseData.yIndex);n.logicPos=t,window.pzazombieManager.createZombie(n,!1)}}a.close()})},a.prototype.ashesDeath=function(e,a){if(void 0===e&&(e=0),void 0===a&&(a=u.pzaAttackType.FLOOR_ATK),this.baseData.zombieDie(),this.death(!1),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var t=this.baseData.zombieData.zombieType;d.pzaEffectManager.createAshesEffect(t,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,"blow")}},a.prototype.death=function(a,t){void 0===t&&(t=null),e.prototype.death.call(this,a,t),h.pzaGameState.killZombieTeam++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_18,h.pzaGameState.killZombieTeam)},i([y],a)}(m.pzaBaseZombie));t.pzaZombieBobsledTeam=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzaZombieBobsled:[function(e,a,t){"use strict";cc._RF.push(a,"cc21b+6q0xMHKir0g6acnU1","pzaZombieBobsled");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieBobsled=void 0;var r=e("./pzaBaseZombie"),p=e("./pzaZombieSlot"),l=e("../Data/pzaZombieEnum"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n(a,e),a.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(e){e.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]])},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},i([c],a)}(r.pzaBaseZombie));t.pzaZombieBobsled=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaZombieBody:[function(e,a,t){"use strict";cc._RF.push(a,"b1abdSI13NE76lu3aJ+NI5X","pzaZombieBody");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieBody=void 0;var r=e("../../Common/pzaCollisionManager"),p=e("../../Common/pzaGroupEnum"),l=e("../Data/pzaBuffData"),s=e("../Data/pzaPlantEnum"),c=e("../Data/pzaZombieEnum"),u=e("../Plant/pzaAttackType"),d=e("../pzaBaseBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.isUseInitGroup=!1,a.collider=null,a}return n(a,e),a.prototype.bindData=function(a){if(e.prototype.bindData.call(this,a),!this.isUseInitGroup)if(a&&null!=a.zombieData&&a.zombieData.hypnosis)this.node.group=p.pzaGroupEnum.PLANT,r.pzaCollisionManager.getInstance.zombieToPlant(a.yIndex,this);else{if(null==a||null==a.yIndex)return;this.node.group=p.pzaGroupEnum.ZOMBIE,r.pzaCollisionManager.getInstance.addZombieByRow(a.yIndex,this)}},a.prototype.hypnosischangeGroup=function(){this.curTarget=null,this.node.group=p.pzaGroupEnum.PLANT},a.prototype.onCollisionEnter=function(e,a){this.onCollision(e,a,!1)},a.prototype.onCollisionStay=function(e,a){this.onCollision(e,a,!0)},a.prototype.getCollider=function(){var e=this;return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.baseData&&this.baseData.zombieData&&this.baseData.zombieData.zombieType===c.pzaZombieEnum.BUNGEE_ZOMBIE?this.collider.poSource=function(){return{x:e.node.parent.parent.x,y:e.node.parent.parent.y}}:this.collider.poSource=function(){return{x:e.node.parent.x+e.node.x,y:e.node.parent.y+e.node.y}},this.collider):null},a.prototype.onCollisionExit=function(e){if(null!=e&&null!=this.curTarget){if(e.node.group==p.pzaGroupEnum.PLANT){var a=e.node.getComponent(d.pzaBaseBody);if(null!=a)return void(a.baseData==this.curTarget&&(this.curTarget=null));if(null!=(t=e.node.getComponent(d.pzaBaseBody)))return void(t.baseData==this.curTarget&&(this.curTarget=null))}var t;if(e.node.group==p.pzaGroupEnum.ZOMBIE&&null!=(t=e.node.getComponent(d.pzaBaseBody))&&t.baseData==this.curTarget&&(this.curTarget=null),e.node.group==p.pzaGroupEnum.BRAIN){var o=e.node.getComponent(d.pzaBaseBody);if(null!=o)return void(o.baseData==this.curTarget&&(this.curTarget=null))}}},a.prototype.onCollision=function(e,a,t){if(null!=e&&null==this.curTarget){if(e.node.group==p.pzaGroupEnum.PLANT){var o=e.node.getComponent(d.pzaBaseBody);if(null!=o)return void this.colliderPlant(o.baseData,t);if(null!=(n=e.node.getComponent(d.pzaBaseBody)))return void this.colliderZombie(n.baseData)}var n;if(e.node.group==p.pzaGroupEnum.ZOMBIE&&null!=(n=e.node.getComponent(d.pzaBaseBody)))return void this.colliderZombie(n.baseData);if(e.node.group==p.pzaGroupEnum.BRAIN){var i=e.node.getComponent(d.pzaBaseBody);if(this.baseData.zombieData.direction<0&&null!=i&&null!=i.baseData&&i.baseData.yIndex==this.baseData.yIndex)return void(this.curTarget=i.baseData)}}},a.prototype.isCanClimbLabby=function(){return this.baseData.zombieData.cate!=c.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!=c.pzaZombieCate.IceCar&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE},a.prototype.colliderPlant=function(e,a){if(!(null==this.baseData||null==e||e.isDead||e&&e.buffData&&e.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||null!=e.plantData&&e.plantData.plantType==s.pzaPlantEnum.SQUASH&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE||this.baseData.yIndex!=e.yIndex||e&&e.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||null!=this.baseData.zombieData&&-1==this.baseData.zombieData.direction&&window.pzaMapManager.hasLadder(e.xIndex,e.yIndex)&&this.isCanClimbLabby()&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&0==this.baseData.canJump))if(null==this.baseData.zombieData||this.baseData.zombieData.zombieType!=c.pzaZombieEnum.ZOMBONI&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE){if(null==e.plantData||e.plantData.cate!==s.pzaPlantCate.Spike||this.baseData.zombieData.cate==c.pzaZombieCate.Gargantuar)if(null!=e.plantData&&e.plantData.adClearPlant)this.curTarget=e;else{if(this.baseData.zombieData.direction>0){if(this.baseData.logicPos.x>e.logicPos.x)return}else if(this.baseData.logicPos.x<e.logicPos.x)return;if(this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE&&this.baseData.zombieData.cate!==c.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!==c.pzaZombieCate.IceCar&&(this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE||this.baseData.zombieData.toolType==c.pzaEquipType.NO_EQUIP)||null!=e.plantData||this.baseData.zombieData.hypnosis){if(!a){var t=window.pzaplantManager.getPlantByData(e);e&&e.plantData&&e.plantData.plantType==s.pzaPlantEnum.SPIKEROCK&&this.baseData.zombieData.zombieType==c.pzaZombieEnum.Mac_GARGANTUAR&&t&&t.hurt(e.maxHp/3,this.baseData,u.pzaAttackType.BANG),e&&e.plantData&&e.plantData.plantType==s.pzaPlantEnum.SPIKEWEED&&this.baseData.zombieData.zombieType==c.pzaZombieEnum.Mac_GARGANTUAR&&t&&t.hurt(e.maxHp,this.baseData,u.pzaAttackType.BANG)}this.curTarget=e}}}else this.curTarget=e},a.prototype.colliderZombie=function(e){if(null!=this.baseData&&null!=e&&!e.isDead&&this.baseData.yIndex==e.yIndex){if(this.baseData.zombieData.direction>0){if(this.baseData.logicPos.x>e.logicPos.x)return}else if(this.baseData.logicPos.x<e.logicPos.x)return;this.curTarget=e}},i([f({displayName:"\u662f\u5426\u4f7f\u7528\u521d\u59cb\u78b0\u649e\u7ec4"})],a.prototype,"isUseInitGroup",void 0),i([m],a)}(d.pzaBaseBody);t.pzaZombieBody=z,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaBaseBody":"pzaBaseBody"}],pzaZombieCard:[function(e,a,t){"use strict";cc._RF.push(a,"3b719bhP+NDUpgv/kC7a5T2","pzaZombieCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieCard=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaSoundManager"),l=e("../../Common/pzaSpriteFrameManager"),s=e("../../Common/pzaWorldEventManager"),c=e("./pzaPlantCard"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardIcon=null,a.priceLabel=null,a.mask=null,a.selectTag=null,a.curZombieType=null,a.curPrice=0,a.clickCall=null,a}return n(a,e),a.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.SELECT_CARD,this.diselect,this)},a.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.SELECT_CARD,this.diselect,this)},a.prototype.bindData=function(e,a,t){this.curZombieType=e,this.curPrice=a,this.clickCall=t,null!=e?(this.node.active=!0,this.mask.active=!1,this.selectTag.active=!1,l.pzaSpriteFrameManager.loadZombieCard(e,this.cardIcon),c.pzaPlantCard.fixCardStyle(null,this.priceLabel,this.cardIcon.node),this.priceLabel.string=""+this.curPrice):this.node.active=!1},a.prototype.clickCard=function(){if(null!=this.curZombieType){var e=r.pzaGameState.selectZombie;this.clickCall&&this.clickCall(this.curZombieType),e==this.curZombieType&&(r.pzaGameState.selectCard=null,r.pzaGameState.selectZombie=null)}},a.prototype.update=function(){null==this.curZombieType||r.pzaGameState.gamePause||(r.pzaGameState.sunLightCount>=this.curPrice?this.mask.active=!1:this.mask.active=!0)},a.prototype.select=function(){if(null!=this.curZombieType){if(this.curPrice>r.pzaGameState.sunLightCount)return s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.LACK_SUN,null),p.pzaSoundManager.playAudio("sunlack"),r.pzaGameState.selectCard=null,void(r.pzaGameState.selectZombie=null);r.pzaGameState.selectCard=r.pzaSelectCardType.SLOT_CARD,r.pzaGameState.selectZombie=this.curZombieType,this.selectTag.active=!0,p.pzaSoundManager.playAudio("selectPlant")}},a.prototype.diselect=function(){this.selectTag.active=!1},i([h({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([h({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],a.prototype,"priceLabel",void 0),i([h({displayName:"\u906e\u7f69",type:cc.Node})],a.prototype,"mask",void 0),i([h({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],a.prototype,"selectTag",void 0),i([d],a)}(cc.Component);t.pzaZombieCard=m,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaPlantCard":"pzaPlantCard"}],pzaZombieEnermyPartCfg:[function(e,a,t){"use strict";cc._RF.push(a,"0e450UTG6JPxKRTcmtcZjNM","pzaZombieEnermyPartCfg"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieEnermyPartCfg=void 0;var o=e("../Battle/Data/pzaPlantEnum"),n=e("./pzaUtil"),i=function(){function e(e,a,t,o,n,i,r){this.level=1,this.name=null,this.plantPool=null,this.zombiePool=null,this.plantColumn=4,this.fixPlant=null,this.fixRowPlant=null,this.unlockChapter=1,this.unlockPart=1,this.endlessWeight=0,this.level=e,this.name=a,this.plantPool=t,this.zombiePool=o,this.plantColumn=n,this.fixPlant=i,this.fixRowPlant=r}return e.initPartConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var o=null,n=null,i=null,r=[],p=1,l=1;try{if(null!=a.plant&&""!=a.plant&&(o=JSON.parse(a.plant)),null!=a.special&&""!=a.special&&(n=JSON.parse(a.special)),null!=a.special2&&""!=a.special2&&(i=JSON.parse(a.special2)),null!=a.unlock){var s=a.unlock.split("-").map(Number);p=s[0],l=s[1]}}catch(d){console.log(d)}null!=a.zombie&&(r=a.zombie.split(",").map(Number));var c=parseInt(a.level),u=new e(c,a.name,o,r,parseInt(a.green),n,i);u.unlockChapter=p,u.unlockPart=l,u.endlessWeight=a.probability&&parseInt(a.probability),t.PartConfigMap.set(c,u)}})},e.initPuffFloat=function(e){var a=this;null!=e&&e.forEach(function(e){if(null!=e){var t=parseInt(e.level),o=parseInt(e.mini),n=parseInt(e.max);a.PuffFloatMap.set(t,{min:o,max:n}),a.maxPuffPart=Math.max(t,a.maxPuffPart)}})},e.getName=function(e){var a=this.PartConfigMap.get(e);return a&&a.name},e.getZombiePool=function(e){var a=this.PartConfigMap.get(e);return a&&a.zombiePool},e.getPlantType=function(e){var a=this.PartConfigMap.get(e);if(null==a)return[];var t=new Set;return null!=a.fixPlant&&a.fixPlant.forEach(function(e){if(null!=e){var a=e[1];t.add(a)}}),null!=a.fixRowPlant&&a.fixRowPlant.forEach(function(e){if(null!=e)for(var a=1;a<e.length;a++){var o=e[a];t.add(o)}}),null!=a.plantPool&&a.plantPool.forEach(function(e){if(null!=e){var a=e[0];t.add(a)}}),Array.from(t)},e.getPlantList=function(e,a){var t=[],n=this.PartConfigMap.get(e);if(null==n)return t;var i=new Set;if(null!=n.fixPlant&&n.fixPlant.forEach(function(e){if(null!=e){var a=e[1],o=e[0],r=(o-1)%n.plantColumn,p=4-Math.floor((o-1)/n.plantColumn);t.push({x:r,y:p,type:a}),i.add(""+r+p)}}),null!=n.fixRowPlant&&n.fixRowPlant.forEach(function(e){if(null!=e){for(var a=4-(e[0]-1),o=[],r=0;r<n.plantColumn;r++){var p=""+r+a;i.has(p)||o.push(r)}o.sort(function(){return Math.random()-.5});for(var l=1;l<e.length;l++){o.push(l),r=o[l-1];var s=e[l];t.push({x:r,y:a,type:s}),i.add(""+r+a)}}}),null!=n.plantPool){var r=[];n.plantPool.forEach(function(e){if(null!=e)for(var t=e[0],n=e[1],i=0;i<n;i++)a>0&&t==o.pzaPlantEnum.SUN_FLOWER?(a--,r.push(o.pzaPlantEnum.PUFF_SHROOM)):r.push(t)}),r.sort(function(){return Math.random()-.5});for(var p=0,l=0;l<n.plantColumn;l++)for(var s=0;s<5;s++){var c=""+l+s;if(!i.has(c)){var u=r[p];l<=1&&(u==o.pzaPlantEnum.WALL_NUT||u==o.pzaPlantEnum.TALL_NUT)?(p++,s--,r.push(u)):(t.push({x:l,y:s,type:r[p]}),p++)}}}return t},e.getPlantColumn=function(e){var a=this.PartConfigMap.get(e);return null==a?0:a.plantColumn},e.getEndlessCfgLevel=function(e){var a=[];1==e?a.push(10,11,12):a.push(10,11,12,13,14,15,16,17);for(var t=[],o=0;o<a.length;o++){var i=this.PartConfigMap.get(a[o]);t.push(i&&i.endlessWeight||0)}return a[n.pzaUtil.getRandomIndexByWeight(t)]},e.getRandomPuff=function(e){e=Math.min(this.maxPuffPart,e);var a=this.PuffFloatMap.get(e);return n.pzaUtil.getRandomNum(a.min,a.max)},e.PartConfigMap=new Map,e.PuffFloatMap=new Map,e.maxPuffPart=1,e}();t.pzaZombieEnermyPartCfg=i,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","./pzaUtil":"pzaUtil"}],pzaZombieEnum:[function(e,a,t){"use strict";cc._RF.push(a,"b5ab5QGCLlGqZm0T4j6hFMJ","pzaZombieEnum"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaEquipType=t.pzaHurtStateEnum=t.pzaZombieHurtCate=t.pzaZombieCate=t.pzaZombieEnum=void 0,function(e){e[e.ZOMBIE=1]="ZOMBIE",e[e.FLAG_ZOMBIE=2]="FLAG_ZOMBIE",e[e.CONE_HEAD_ZOMBIE=3]="CONE_HEAD_ZOMBIE",e[e.POLEVAULTING_ZOMBIE=4]="POLEVAULTING_ZOMBIE",e[e.BUCKET_HEAD_ZOMBIE=5]="BUCKET_HEAD_ZOMBIE",e[e.NEWSPAPER_ZOMBIE=6]="NEWSPAPER_ZOMBIE",e[e.SCREEN_DOOR_ZOMBIE=7]="SCREEN_DOOR_ZOMBIE",e[e.FOOTBALL_ZOMBIE=8]="FOOTBALL_ZOMBIE",e[e.DANCING_ZOMBIE=9]="DANCING_ZOMBIE",e[e.BACKUP_DANCER=10]="BACKUP_DANCER",e[e.DUCKY_TUBE_ZOMBIE=11]="DUCKY_TUBE_ZOMBIE",e[e.DUCKY_TUBE_CONE_ZOMBIE=12]="DUCKY_TUBE_CONE_ZOMBIE",e[e.DUCKY_TUBE_BUCKET_ZOMBIE=13]="DUCKY_TUBE_BUCKET_ZOMBIE",e[e.SNORKEL_ZOMBIE=14]="SNORKEL_ZOMBIE",e[e.ZOMBONI=15]="ZOMBONI",e[e.ZOMBIE_BOBSLED_TEAM=16]="ZOMBIE_BOBSLED_TEAM",e[e.DOLPHIN_RIDER_ZOMBIE=17]="DOLPHIN_RIDER_ZOMBIE",e[e.JACK_ZOMBIE=18]="JACK_ZOMBIE",e[e.BALLOON_ZOMBIE=19]="BALLOON_ZOMBIE",e[e.DIGGER_ZOMBIE=20]="DIGGER_ZOMBIE",e[e.POGO_ZOMBIE=21]="POGO_ZOMBIE",e[e.YETI_ZOMBIE=22]="YETI_ZOMBIE",e[e.BUNGEE_ZOMBIE=23]="BUNGEE_ZOMBIE",e[e.LADDER_ZOMBIE=24]="LADDER_ZOMBIE",e[e.CATAPULT_ZOMBIE=25]="CATAPULT_ZOMBIE",e[e.GARGANTUAR=26]="GARGANTUAR",e[e.RED_GARGANTUAR=27]="RED_GARGANTUAR",e[e.IMP=28]="IMP",e[e.DR_ZOMBOSS=29]="DR_ZOMBOSS",e[e.ZOMBIE_BOBSLED=30]="ZOMBIE_BOBSLED",e[e.IMP_MINI=31]="IMP_MINI",e[e.NormalPeaZombie=32]="NormalPeaZombie",e[e.Nut_Zombie=33]="Nut_Zombie",e[e.Mac_GARGANTUAR=34]="Mac_GARGANTUAR",e[e.SQUASH_ZOMBIE=35]="SQUASH_ZOMBIE",e[e.JALAPENO_ZOMBIE=36]="JALAPENO_ZOMBIE",e[e.GATLINGSHOOT_ZOMBIE=37]="GATLINGSHOOT_ZOMBIE",e[e.TALLNUT_ZOMBIE=38]="TALLNUT_ZOMBIE",e[e.Cream_Normal=39]="Cream_Normal",e[e.Cream_Pea=40]="Cream_Pea"}(t.pzaZombieEnum||(t.pzaZombieEnum={})),function(e){e[e.Null=0]="Null",e[e.Gargantuar=1]="Gargantuar",e[e.IceCar=2]="IceCar",e[e.Ladder=3]="Ladder"}(t.pzaZombieCate||(t.pzaZombieCate={})),function(e){e[e.Null=0]="Null",e[e.PENETRATE_HURT=1]="PENETRATE_HURT"}(t.pzaZombieHurtCate||(t.pzaZombieHurtCate={})),function(e){e[e.INTACT=0]="INTACT",e[e.HURT=1]="HURT",e[e.DYING=2]="DYING",e[e.DEAD=3]="DEAD",e[e.HURTCHARM=4]="HURTCHARM"}(t.pzaHurtStateEnum||(t.pzaHurtStateEnum={})),function(e){e[e.NO_EQUIP=0]="NO_EQUIP",e[e.NORMAL_EQUIP=1]="NORMAL_EQUIP",e[e.IRON_EQUIP=2]="IRON_EQUIP"}(t.pzaEquipType||(t.pzaEquipType={})),cc._RF.pop()},{}],pzaZombieHandbookView:[function(e,a,t){"use strict";cc._RF.push(a,"52c7fSRVGhMCbajYpKgtYzJ","pzaZombieHandbookView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieHandbookView=void 0;var r=e("../Battle/Data/pzaZombieEnum"),p=e("../Battle/Zombie/pzaBaseZombie"),l=e("../Common/pzaGameCommonPool"),s=e("../Common/pzaGameConfig"),c=e("../Common/pzaLocalData"),u=e("../Common/pzaSoundManager"),d=e("../Load/pzaBundleObjectPool"),h=e("../Load/pzaPreLoadManager"),m=e("./pzaZombiebookCard"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardPrefab=null,a.cardContent=null,a.zombieName=null,a.zombieDesc=null,a.zombieProp=null,a.special=null,a.bg=null,a.bg2=null,a.txtScroll=null,a.zombieAniNode=null,a.shadow=null,a.cardScroll=null,a.title=null,a.zombieMask=null,a.curZombie=null,a.zombieCardList=null,a.zombieAni=null,a.closeCall=null,a}return n(a,e),a.prototype.onEnable=function(){this.zombieCardList=[];for(var e=r.pzaZombieEnum.ZOMBIE;e<=r.pzaZombieEnum.Mac_GARGANTUAR;e++)if(e!=r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&e!=r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&e!=r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE&&e!=r.pzaZombieEnum.RED_GARGANTUAR&&e!=r.pzaZombieEnum.ZOMBIE_BOBSLED&&e!=r.pzaZombieEnum.IMP_MINI&&e!=r.pzaZombieEnum.NormalPeaZombie&&e!=r.pzaZombieEnum.Nut_Zombie&&e!=r.pzaZombieEnum.Mac_GARGANTUAR&&e!=r.pzaZombieEnum.YETI_ZOMBIE){var a=l.pzaGameCommonPool.requestInstant(this.cardPrefab);a.setParent(this.cardContent);var t=a.getComponent(m.pzaZombiebookCard);null!=t&&(t.bindData(e,this.showZombie.bind(this)),this.zombieCardList.push(t))}this.txtScroll.node.active=!0,this.curZombie=null,this.showZombie(r.pzaZombieEnum.ZOMBIE),this.cardScroll.scrollToTop(),this.title.string="\u602a\u4eba"},a.prototype.onDisable=function(){null!=this.zombieCardList&&this.zombieCardList.forEach(function(e){e&&e.close()}),this.zombieCardList=null,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null)},a.prototype.bindCloseCall=function(e){this.closeCall=e},a.prototype.showZombie=function(e){var a=this;if(this.curZombie!=e){this.shadow.active=!1,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null),this.curZombie=e;var t=s.pzaGameConfig.getZombieConfig(e),o=s.pzaGameConfig.ZombieBookMap.get(e);if(null!=t&&null!=o){if(this.zombieName.string=t.name,c.pzaLocalData.hasUnlockZombie(e))this.zombieDesc.node.active=null!=o.desc,null!=o.desc&&(this.zombieDesc.string=o.desc),this.zombieProp.node.active=null!=o.prop,null!=o.prop&&(this.zombieProp.string=o.prop),this.special.active=o.special,this.bg.node.active=null!=o.bg,null!=o.bg&&(this.bg.string=o.bg),this.bg2.node.active=null!=o.bg2,null!=o.bg2&&(this.bg2.string=o.bg2);else if(this.zombieDesc.node.active=!0,this.zombieDesc.string="(\u672a\u9047\u5230)",this.zombieProp.node.active=!1,this.special.active=!1,this.bg.node.active=!1,this.bg2.node.active=!1,e==r.pzaZombieEnum.YETI_ZOMBIE)return this.zombieName.string="\uff1f\uff1f\uff1f",void this.txtScroll.scrollToTop();this.txtScroll.scrollToTop(),e==r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&(e=r.pzaZombieEnum.ZOMBIE_BOBSLED);var n=h.pzaPreLoadManager.getZombieUrl(e);d.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(t,o){if(null==t&&null!=o){o.setParent(a.zombieAniNode),o.zIndex=0,a.zombieAniNode.scaleX=1.5,a.zombieAniNode.scaleY=1.5,a.zombieMask.enabled=!1;var n=-75,i=0;e==r.pzaZombieEnum.BALLOON_ZOMBIE?(o.setPosition(cc.v2(0,-150)),n=-80,a.shadow.setPosition(cc.v2(14,-80))):e==r.pzaZombieEnum.ZOMBIE_BOBSLED?(o.setPosition(cc.v2(0,-70)),a.zombieAniNode.scaleX=1.5,a.zombieAniNode.scaleY=1.5,i=10,n=-75,a.shadow.setPosition(cc.v2(i,n))):e==r.pzaZombieEnum.DR_ZOMBOSS?a.zombieMask.enabled=!0:(o.setPosition(cc.v2(0,-70)),a.shadow.setPosition(cc.v2(14,-70))),null!=a.zombieAni&&a.zombieAni.close(),a.zombieAni=o.getComponent(p.pzaBaseZombie),null!=a.zombieAni&&(a.zombieAni.uiShow(),e==r.pzaZombieEnum.ZOMBONI&&(o.scale=.8),a.zombieAni.needShadow&&(a.shadow.active=!0,e==r.pzaZombieEnum.DANCING_ZOMBIE&&(o.scale=1)))}else console.error(t)})}}},a.prototype.clickBack=function(){u.pzaSoundManager.playSFX(),this.close()},a.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},a.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([y({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],a.prototype,"cardPrefab",void 0),i([y({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],a.prototype,"cardContent",void 0),i([y({displayName:"\u50f5\u5c38\u540d\u79f0",type:cc.Label})],a.prototype,"zombieName",void 0),i([y({displayName:"\u50f5\u5c38\u4ecb\u7ecd",type:cc.Label})],a.prototype,"zombieDesc",void 0),i([y({displayName:"\u50f5\u5c38\u5c5e\u6027",type:cc.RichText})],a.prototype,"zombieProp",void 0),i([y({displayName:"\u7279\u6b8a",type:cc.Node})],a.prototype,"special",void 0),i([y({displayName:"\u80cc\u666f\u63cf\u8ff0",type:cc.Label})],a.prototype,"bg",void 0),i([y({displayName:"\u80cc\u666f\u63cf\u8ff02",type:cc.Label})],a.prototype,"bg2",void 0),i([y({displayName:"\u6587\u672cScroll",type:cc.ScrollView})],a.prototype,"txtScroll",void 0),i([y({displayName:"\u50f5\u5c38\u52a8\u753b\u8282\u70b9",type:cc.Node})],a.prototype,"zombieAniNode",void 0),i([y({displayName:"\u50f5\u5c38\u5f71\u5b50",type:cc.Node})],a.prototype,"shadow",void 0),i([y({displayName:"\u5361\u7247Scroll",type:cc.ScrollView})],a.prototype,"cardScroll",void 0),i([y({displayName:"\u6807\u9898",type:cc.Label})],a.prototype,"title",void 0),i([y({type:cc.Mask})],a.prototype,"zombieMask",void 0),i([z],a)}(cc.Component);t.pzaZombieHandbookView=g,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaZombiebookCard":"pzaZombiebookCard"}],pzaZombieHoleEffect:[function(e,a,t){"use strict";cc._RF.push(a,"d33deKSlFRFybS19vmriGEy","pzaZombieHoleEffect");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieHoleEffect=void 0;var r=e("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.hole=null,a.holeFrames=[],a.holeTime=0,a.holeStep=1,a.mapXIndex=-1,a.mapYIndex=-1,a}return n(a,e),a.prototype.init=function(e,a){this.mapXIndex=e,this.mapYIndex=a,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.ZombieHoleSet.add(this)},a.prototype.recover=function(e,a,t,o){this.mapXIndex=e,this.mapYIndex=a,this.holeTime=t,this.holeStep=o,this.showHole(),window.pzaMapManager.ZombieHoleSet.add(this)},a.prototype.logicUpdate=function(e){if(this.holeTime+=e,this.holeTime>=30)return this.close(),void this.createSkeleton();this.holeTime>=15&&1==this.holeStep&&(this.holeStep=2,this.showHole())},a.prototype.createSkeleton=function(){},a.prototype.showHole=function(){this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1],window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},a.prototype.clearHole=function(){this.holeTime=0,this.close()},a.prototype.close=function(){e.prototype.close.call(this),window.pzaMapManager.ZombieHoleSet.delete(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},i([s({displayName:"\u6d1e",type:cc.Sprite})],a.prototype,"hole",void 0),i([s({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],a.prototype,"holeFrames",void 0),i([l],a)}(r.pzaBaseComponent);t.pzaZombieHoleEffect=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaZombieManager:[function(e,a,t){"use strict";cc._RF.push(a,"3114bnqbzFBEqjH2YiD/Eos","pzaZombieManager");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieManager=void 0;var r=e("../Achieve/pzaAchieve"),p=e("../Achieve/pzaAchieveMgr"),l=e("../Common/pzaCollisionManager"),s=e("../Common/pzaGameConfig"),c=e("../Common/pzaGameManager"),u=e("../Common/pzaGamePartConfig"),d=e("../Common/pzaGroupEnum"),h=e("../Common/pzaLocalData"),m=e("../Common/pzaNodeManager"),f=e("../Common/pzaSoundManager"),z=e("../Common/pzaStatisticsMgr"),y=e("../Common/pzaUIManager"),g=e("../Common/pzaUtil"),v=e("../Common/pzaWorldEventManager"),b=e("../Common/pzaZJZombieConf"),P=e("../Load/pzaBundleObjectPool"),C=e("../Load/pzaPreLoadManager"),E=e("../View/Battle/pzaNewPlantView"),S=e("./Data/pzaBaseData"),_=e("./Data/pzaBuffData"),D=e("./Data/pzaDropType"),M=e("./Data/pzaGuideType"),w=e("./Data/pzaZombieEnum"),T=e("./Zombie/pzaBaseZombie"),A=e("./Zombie/pzaDrZomBoss"),B=e("./pzaEffectManager"),G=e("./pzaGameState"),I=e("./pzaSpineTool"),O=e("../View/Battle/pzaReviveView"),N=e("../Garden/pzaGardenMgr"),L=e("../Common/pzaBeltEquipConfig"),R=e("../View/pzaAniMask"),k=cc._decorator,U=k.ccclass,x=k.property,F=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.atlasSpine=null,a.baseSpineMaterial=null,a.zombieDatas=[new Set,new Set,new Set,new Set,new Set,new Set],a.zombieMap=new Map,a.hypnoZombieMap=new Map,a.curWaveZombieDatas=new Set,a.lastZombieDataMap=new Map,a.drZomBoss=null,a.wave=0,a.lastWave=!1,a.nextWaveTime=u.pzaWaveConfig.firstWaveTime,a.curWaveTime=0,a.preRefreshHp=0,a.hasShowRedTip=!1,a.specialNextWaveTime=0,a.lastWayZombieTime=0,a.zombieModeCheckTime=0,a}return n(a,e),a.prototype.onLoad=function(){window.pzazombieManager=this,I.pzaSpineTool.instance().init(this.atlasSpine),this.atlasSpine.node.y=3e3},a.prototype.init=function(){this.zombieDatas.forEach(function(e){e&&e.clear()}),this.zombieMap.clear(),this.hypnoZombieMap.clear(),this.curWaveZombieDatas.clear(),this.lastZombieDataMap.clear(),this.drZomBoss=null,this.wave=0,this.nextWaveTime=u.pzaWaveConfig.firstWaveTime,this.curWaveTime=0,this.preRefreshHp=0,this.hasShowRedTip=!1,this.lastWave=!1,this.specialNextWaveTime=0,this.lastWayZombieTime=0,this.zombieModeCheckTime=0},a.prototype.logicUpdate=function(e){G.pzaGameState.guideZombiePause||(this.refreshWaveZombie(e),this.lastWayZombieTime>0&&(this.lastWayZombieTime-=e,this.lastWayZombieTime<=0&&this.lastTombWaterZombie()),this.zombieModeCheckTime>0&&(this.zombieModeCheckTime-=e,this.zombieModeCheckTime<=0&&this.checkZombieGameFail()))},a.prototype.refreshWaveZombie=function(e){c.pzaGameManager.getCurrentGame().refreshNextWave(this,e)},a.prototype.lastTombWaterZombie=function(){c.pzaGameManager.getCurrentGame().lastTombWaterZombie(this)},a.prototype.createMiniBungee=function(e,a){for(var t=[],o=e-1;o<9;o++)t.push([o,0]),t.push([o,1]),t.push([o,2]),t.push([o,3]),t.push([o,4]);t.sort(function(){return Math.random()-.5});for(var n=0;n<a;n++){var i=t[n];if(null!=i){var r=window.pzazombieManager.createFixBlockZombieData(w.pzaZombieEnum.ZOMBIE,i[0],i[1]);this.zombieDatas[i[1]].delete(r),B.pzaEffectManager.createBungeeZombieEffect(r),this.curWaveZombieDatas.add(r)}}},a.prototype.createBungeePutZombie=function(e,a){if(null!=a){for(var t=[],o=e-1;o<9;o++)t.push([o,0]),t.push([o,1]),t.push([o,2]),t.push([o,3]),t.push([o,4]);t.sort(function(){return Math.random()-.5});for(var n=0;n<a.length;n++){var i=t[n],r=a[n];if(null!=i&&null!=r){if(r==w.pzaZombieEnum.GARGANTUAR||r==w.pzaZombieEnum.RED_GARGANTUAR){var p=[5,6,7,8],l=Math.floor(Math.random()*p.length);i[0]=p[l]}var s=window.pzazombieManager.createFixBlockZombieData(r,i[0],i[1]);this.zombieDatas[i[1]].delete(s),this.curWaveZombieDatas.add(s),B.pzaEffectManager.createBungeeZombieEffect(s)}}}},a.prototype.createZombie=function(e,a,t,o,n,i,r,p,l,c){var u=this;if(void 0===a&&(a=!0),void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===r&&(r=!1),void 0===p&&(p=null),void 0===l&&(l=cc.v2()),void 0===c&&(c=!0),null!=e&&null!=e.zombieData){var d=m.pzaNodeManager.getPlantZombieNode();if(null!=d){var z=e.zombieData.zombieType,y=C.pzaPreLoadManager.getZombieUrl(z);switch(G.pzaGameState.gameMode){case G.pzaGameMode.NORMAL:case G.pzaGameMode.NORMAL_WEEKTWO:G.pzaGameState.hasMainConf();break;case G.pzaGameMode.SURVIVAL:case G.pzaGameMode.SUR_ENDLESS:G.pzaGameState.survivalConfig}var g=function(){h.pzaLocalData.unlockZombie(z),P.pzaBundleObjectPool.requestInstantByUrl(y,!1,function(a,i){if(null==a&&null!=i){i.setParent(d),i.setPosition(e.logicPos);var p=i.getComponent(T.pzaBaseZombie);null!=p&&(G.pzaGameState.isSmallGame()?p.setZombieScale(s.pzaGameConfig.miniZombieScale):p.setZombieScale(1),r?p.bindData(e,!0):p.bindData(e),t&&p.breakDirt(n),o&&p.breakWater(n),u.zombieMap.set(e,p))}else console.error(a,"\u50f5\u5c38\u52a0\u8f7d\u5931\u8d25",z)}),a&&v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GROVE_SHAKE,e.yIndex),t&&i&&(f.pzaSoundManager.playAudio("tombzombie"),B.pzaEffectManager.createDirtEffect("idle3",e.yIndex,e.logicPos,null)),o&&(f.pzaSoundManager.playAudio("zombie_entering_water"),B.pzaEffectManager.createWaterFlowerEffect(e.yIndex,e.logicPos,null))};if(p){e.xIndex=p;var b=.1*G.pzaGameState.map.getYInterval(e.yIndex);e.logicPos=G.pzaGameState.map.getBlockLogicPos(e.xIndex,e.yIndex,0,b),e.logicPos.x+=l.x,e.logicPos.y+=l.y,e.buffData.addBuff(new _.pzaBuffInfo(_.pzaBuffType.UNABLE_SELECT,-1)),B.pzaEffectManager.createPortalEffect(e.xIndex,e.yIndex,function(){e.buffData.removeBuff(_.pzaBuffType.UNABLE_SELECT),g()},c)}else g()}}},a.prototype.createHypnZombie=function(e,a){var t=this;if(void 0===a&&(a=null),null!=e&&null!=e.zombieData){var o=m.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=e.zombieData.zombieType,i=C.pzaPreLoadManager.getZombieUrl(n);e.buffData.addBuff(new _.pzaBuffInfo(_.pzaBuffType.IMM_CONTROL,-1)),P.pzaBundleObjectPool.requestInstantByUrl(i,!1,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(e.logicPos);var r=i.getComponent(T.pzaBaseZombie);null!=r&&(G.pzaGameState.isSmallGame()?r.setZombieScale(s.pzaGameConfig.miniZombieScale):r.setZombieScale(1),r.bindData(e),r.body.node.group=d.pzaGroupEnum.PLANT,a&&r.breakDirt(a),t.hypnoZombieMap.set(e,r),l.pzaCollisionManager.getInstance.zombieToPlant(e.yIndex,r.body))}else console.error(n)})}}},a.prototype.createDrZomBoss=function(e,a){var t=this;void 0===a&&(a=0);var o=w.pzaZombieEnum.DR_ZOMBOSS,n=s.pzaGameConfig.getZombieConfig(o),i=new S.pzaBaseData(null,o);i.hp=i.maxHp=a>0?a:n.hp,i.atk=n.atk,i.logicPos=cc.v2(655,-20);var r=m.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=C.pzaPreLoadManager.getZombieUrl(o);h.pzaLocalData.unlockZombie(o),P.pzaBundleObjectPool.requestInstantByUrl(p,!1,function(a,o){if(null==a&&null!=o){o.setParent(r),o.setPosition(i.logicPos);var n=o.getComponent(A.pzaDrZomBoss);null!=n&&(n.bindData(i),n.playEnterAni(e),t.drZomBoss=n)}else console.error(a)})}},a.prototype.playerPutZombie=function(e,a,t){var o=this.createFixBlockZombieData(t,e,a);this.createZombie(o,!1);var n=s.pzaGameConfig.getZombieConfig(t);null==n&&MediaElementAudioSourceNode,G.pzaGameState.sunLightCount-=n.price},a.prototype.hasCanAttackZombie=function(e,a,t){if(void 0===t&&(t=!1),null==e||null==e.logicPos)return!1;var o=!1;return this.zombieDatas[e.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||!t&&n.buffData.hasBuff(_.pzaBuffType.DIVE)||n.buffData.hasBuff(_.pzaBuffType.FLY)||n.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)||a&&(n.xIndex<=-1||e.xIndex+a<n.xIndex)||(o=!0)}),o||(o=this.findDrZomBoss()),o},a.prototype.hasWildShootCanAttackZombie=function(e,a){if(null==e||null==e.logicPos)return!1;for(var t=!1,o=e.yIndex-1;o<=e.yIndex+1;o++)o<0||o>=G.pzaGameState.map.getMapRow()||this.zombieDatas[o].forEach(function(o){!o||!o.logicPos||o.logicPos.x<e.logicPos.x||o.buffData.hasBuff(_.pzaBuffType.DIVE)||o.buffData.hasBuff(_.pzaBuffType.FLY)||o.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)||a&&(o.xIndex<=-1||e.xIndex+a<o.xIndex)||(t=!0)});return t||(t=this.findDrZomBoss()),t},a.prototype.hasCanAttackBackZombie=function(e,a){if(null==e||null==e.logicPos)return!1;var t=!1;return this.zombieDatas[e.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x>e.logicPos.x||o.buffData.hasBuff(_.pzaBuffType.DIVE)||o.buffData.hasBuff(_.pzaBuffType.FLY)||o.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)||a&&(o.xIndex<=-1||e.xIndex+a>o.xIndex)||(t=!0)}),t||(t=this.findDrZomBoss()),t},a.prototype.hasZombieInBlock=function(e){if(null==e||null==e.logicPos)return!1;var a=!1;return this.zombieDatas[e.yIndex].forEach(function(t){t&&t.logicPos&&t.xIndex!=e.xIndex||(a=!0)}),a},a.prototype.findDrZomBoss=function(){var e=window.pzazombieManager.drZomBoss;return null!=e&&null!=e.baseData&&!e.baseData.isDead&&!e.baseData.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)},a.prototype.getCanAttackZombies=function(e,a,t){if(void 0===t&&(t=!1),null==e||null==e.logicPos)return null;var o=[];return this.zombieDatas[e.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<e.logicPos.x||0==t&&n.buffData.hasBuff(_.pzaBuffType.DIVE)||n.buffData.hasBuff(_.pzaBuffType.FLY)||n.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(_.pzaBuffType.INVINCIBLE)||a&&(n.xIndex<=-1||e.xIndex+a<n.xIndex)||o.push(n)}),this.canJoinDrZomBoss(e)&&o.push(this.canJoinDrZomBoss(e)),o},a.prototype.getCanAttackBackZombies=function(e,a){if(null==e||null==e.logicPos)return null;var t=[];return this.zombieDatas[e.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x>e.logicPos.x||o.buffData.hasBuff(_.pzaBuffType.DIVE)||o.buffData.hasBuff(_.pzaBuffType.FLY)||o.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(_.pzaBuffType.INVINCIBLE)||a&&(o.xIndex<=-1||e.xIndex-a>o.xIndex)||t.push(o)}),this.canJoinDrZomBoss(e)&&t.push(this.canJoinDrZomBoss(e)),t},a.prototype.canJoinDrZomBoss=function(e){if(e.xIndex<5)return null;var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)?null:a.baseData},a.prototype.getZombie=function(e){return null!=this.drZomBoss&&this.drZomBoss.baseData==e?this.drZomBoss:this.zombieMap.get(e)},a.prototype.getHypnoZombie=function(e){return this.hypnoZombieMap.get(e)},a.prototype.findFixRangeZombies=function(e,a){if(null==e)return null;var t=[];return this.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||g.pzaUtil.getDistance(e,n.logicPos)<=a&&t.push(o)}),t},a.prototype.findZombiesByXY=function(e,a,t){void 0===t&&(t=1);var o=[];return this.zombieMap.forEach(function(n,i){null==n||null==i||i.isDead||null==i.logicPos||i.xIndex<0||i.xIndex>=e-t&&i.xIndex<=e+t&&i.yIndex>=a-t&&i.yIndex<=a+t&&o.push(n)}),o},a.prototype.findFixNearestZombie=function(e,a,t){if(null==a)return null;var o=null,n=-1;return this.zombieDatas[e].forEach(function(e){if(e&&e.logicPos&&!(e.logicPos.x<a.x)&&!e.buffData.hasBuff(_.pzaBuffType.FLY)&&!e.buffData.hasBuff(_.pzaBuffType.UNABLE_SELECT)){var i=g.pzaUtil.getDistance(e.logicPos,a);if(!(i>t))return-1==n?(o=e,void(n=i)):void(n<=i||(o=e,n=i))}}),o},a.prototype.findFixNearestHypnoZombie=function(e,a,t){if(null==a)return null;var o=null,n=-1;return this.hypnoZombieMap.forEach(function(i,r){if(r&&r.logicPos&&r.yIndex==e&&!(r.logicPos.x>a.x)){var p=g.pzaUtil.getDistance(r.logicPos,a);if(!(p>t))return-1==n?(o=r,void(n=p)):void(n<=p||(o=r,n=p))}}),o},a.prototype.findAllZombies=function(){var e=[];return this.zombieMap.forEach(function(a,t){null==a||null==t||t.isDead||e.push(a)}),e},a.prototype.showBigWaveTip=function(e,a){this.hasShowRedTip||(this.hasShowRedTip=!0,this.nextWaveTime=u.pzaWaveConfig.redTipNextWaveTime,B.pzaEffectManager.createLargeWord(e,a))},a.prototype.specialBigWaveTip=function(){this.hasShowRedTip||(this.hasShowRedTip=!0,this.nextWaveTime=u.pzaWaveConfig.redTipNextWaveTime)},a.prototype.zombieDeath=function(e,a,t){if(void 0===a&&(a=!0),void 0===t&&(t=null),null!=e){this.zombieMap.delete(e);var o=this.zombieDatas[e.yIndex];null!=o&&o.delete(e),h.pzaLocalData.bpZombieDie(),e.zombieData.hypnosis||(e.hp=0),G.pzaGameState.isGameEnd||c.pzaGameManager.getCurrentGame().onZombieDeath(this,e,a,t)}},a.prototype.skipPassPart=function(){var e=0;h.pzaLocalData.hasUseProp&&(e=1);var a=Date.now()-h.pzaLocalData.gameStartTimeStamp;a=Math.ceil(a/1e3);var t=5*(G.pzaGameState.curChapter-1)+G.pzaGameState.curPart;z.pzaStatisticsMgr.sendLevelEvent(t,z.pzaEventLevelType.completed,e,a,G.pzaGameMode.NORMAL),h.pzaLocalData.hasUseProp=!1,h.pzaLocalData.data.autoPickLeft=G.pzaGameState.autoPickLeft,h.pzaLocalData.addDirty("autoPickLeft"),G.pzaGameState.gameWin=!0,G.pzaGameState.lossPlantCount=10,G.pzaGameState.lossCar=!0,0!=G.pzaGameState.partStar&&(G.pzaGameState.partStar=1),h.pzaLocalData.passPart(G.pzaGameState.curChapter,G.pzaGameState.curPart,G.pzaGameState.partStar),5==G.pzaGameState.curChapter&&10==G.pzaGameState.curPart&&(p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_1),h.pzaLocalData.data.passLastPartCnt++,h.pzaLocalData.addDirty("passLastPartCnt"),h.pzaLocalData.data.passLastPartCnt>1&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_24)),h.pzaLocalData.passPart(G.pzaGameState.curChapter,G.pzaGameState.curPart,G.pzaGameState.partStar);var o=s.pzaGameConfig.getPartDrop(G.pzaGameState.curChapter,G.pzaGameState.curPart);if(3==G.pzaGameState.curChapter&&4==G.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=M.pzaGuideType.GUIDE_SHOP_3_4,h.pzaLocalData.data.unlockShop=!0,h.pzaLocalData.addDirty("curGuideType","unlockShop")):4==G.pzaGameState.curChapter&&4==G.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=M.pzaGuideType.GUIDE_SHOP_4_4,h.pzaLocalData.addDirty("curGuideType")):5==G.pzaGameState.curChapter&&1==G.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=M.pzaGuideType.GUIDE_SHOP_5_1,h.pzaLocalData.addDirty("curGuideType")):2==G.pzaGameState.curChapter&&4==G.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=M.pzaGuideType.GUIDE_GARDEN_5_4,h.pzaLocalData.data.unlockGarden=!0,h.pzaLocalData.addDirty("curGuideType","unlockGarden")):1==G.pzaGameState.curChapter&&9==G.pzaGameState.curPart&&(h.pzaLocalData.data.curGuideType=M.pzaGuideType.RIDER_BELTEQUIP_GUIDE),G.pzaGameState.isZombieMode()||G.pzaGameState.isVaseMode())c.pzaGameManager.getCurrentGame().partWin(null,null,!0);else{switch(o){case D.pzaDropType.PLANT_CARD:var n=G.pzaGameState.curChapter+"-"+G.pzaGameState.curPart,i=s.pzaGameConfig.newPlantDropMap.get(n);h.pzaLocalData.data.ownPlants.push(i),h.pzaLocalData.addDirty("ownPlants"),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_4,h.pzaLocalData.data.ownPlants.length,!1),y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(e){(e&&e.getComponent(E.pzaNewPlantView)).showView(o,i)});break;case D.pzaDropType.HAND_BOOK:h.pzaLocalData.data.unlockBook=!0,h.pzaLocalData.addDirty("unlockBook"),R.pzaAniMask.showMask(function(){y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(e){R.pzaAniMask.hideMask(),(e&&e.getComponent(E.pzaNewPlantView)).showView(o,null)})});break;case D.pzaDropType.CG_PAPER:y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.CG_PAPER_VIEW,null);break;case D.pzaDropType.COIN_PACKAGE:s.pzaGameConfig.getPartStar(G.pzaGameState.curChapter,G.pzaGameState.curPart)<=0?(v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),c.pzaGameManager.getCurrentGame().showPassUiNoStar(),g.pzaUtil.changeGameSpeed(1)):(y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.GAME_WIN_VIEW,null),g.pzaUtil.changeGameSpeed(1));break;case D.pzaDropType.SHOVEL:case D.pzaDropType.BACONIC:case D.pzaDropType.TACO:case D.pzaDropType.SURVIVAL_TROPHY:R.pzaAniMask.showMask(function(){y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(e){R.pzaAniMask.hideMask(),(e&&e.getComponent(E.pzaNewPlantView)).showView(o,null)})});break;case D.pzaDropType.SPRINKLER:N.default.instance().addGardenTool(N.pzaGardenToolType.waterPot,1),R.pzaAniMask.showMask(function(){y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(e){R.pzaAniMask.hideMask(),(e&&e.getComponent(E.pzaNewPlantView)).showView(o,null)})});break;case D.pzaDropType.BELT_EQUIP:R.pzaAniMask.showMask(function(){y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(e){R.pzaAniMask.hideMask(),(e&&e.getComponent(E.pzaNewPlantView)).showView(o,null)})});break;default:c.pzaGameManager.getCurrentGame().partWin()}h.pzaLocalData.bpPassPart()}},a.prototype.checkZombieGameFail=function(){if(G.pzaGameState.isZombieMode()){var e=0;if(!(this.zombieDatas.forEach(function(a){e+=a.size}),e>0||window.pzaplantManager.brainMap.size<=0||G.pzaGameState.sunLightCount+25*window.pzaplantManager.AllSunLight.size>=50)){var a=function(){c.pzaGameManager.getCurrentGame().partFail(),c.pzaGameManager.showGameFail()};if(!G.pzaGameState.hadRevived)return G.pzaGameState.gamePause=!0,v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_PAUSE,null),h.pzaLocalData.isPopReviveView=!0,void y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.GAME_REVIVE_VIEW,function(e){var t=e&&e.getComponent(O.pzaReviveView);t&&t.init(null,a)});a()}}},a.prototype.hypnoZombieDeath=function(e){this.hypnoZombieMap.delete(e),e.hp=0},a.prototype.zombieHypnosis=function(e){if(null!=e&&null!=e.zombieData){e.zombieData.direction=1,e.zombieData.hypnosis=!0;var a=this.zombieMap.get(e);null!=a&&(this.hypnoZombieMap.set(e,a),l.pzaCollisionManager.getInstance.zombieToPlant(e.yIndex,a.body)),this.zombieDeath(e)}},a.prototype.zombieChangeMapRow=function(e,a,t){null!=a&&null!=t&&(this.zombieDatas[a.yIndex].delete(a),this.zombieDatas[t]&&this.zombieDatas[t].add(a),l.pzaCollisionManager.getInstance.zombieChangeRow(e,a.yIndex,t),a.yIndex=t)},a.prototype.getCurWaveLeftHp=function(){var e=0,a=0;return this.curWaveZombieDatas.forEach(function(t){null!=t&&(a+=t.maxHp,t.zombieData.hypnosis||(e+=t.hp))}),0==a?0:e/a},a.prototype.createZombieData=function(e,a){var t=s.pzaGameConfig.getZombieConfig(e),o=new S.pzaBaseData(null,e);o.hp=o.maxHp=t.hp,h.pzaLocalData.data.beltEquipData.slotList.includes(L.pzaBeltEquipEnum.HeiQi)&&(o.hp-=L.pzaBeltEquipConfig.getGrowthValue(L.pzaBeltEquipEnum.HeiQi)),o.atk=t.atk,o.zombieData.equipHp=o.zombieData.maxEquipHp=t.equipHp,o.zombieData.direction=-1,o.zombieData.initMSpd=o.zombieData.moveSpd=G.pzaGameState.map.getBlockWidth()/t.speed,o.zombieData.equipType=t.equipType,o.zombieData.toolType=t.toolType,t instanceof b.pzaZJZombieConf&&(o.zombieData.typeId=t.typeId,o.zombieData.showWeight=t.showWeight,o.zombieData.equipType2=t.equipType2,o.zombieData.equipHp2=o.zombieData.maxEquipHp2=t.equipHp2,o.zombieData.atkArr=t.atkArr,o.zombieData.atkInterval2=t.atkInterval2,G.pzaGameState.isSmallGame()&&(o.zombieData.equipHp2=o.zombieData.maxEquipHp2=t.equipHp2*s.pzaGameConfig.miniZombieHp)),G.pzaGameState.isSmallGame()&&(o.hp=o.maxHp=t.hp*s.pzaGameConfig.miniZombieHp,o.zombieData.equipHp=o.zombieData.maxEquipHp=t.equipHp*s.pzaGameConfig.miniZombieHp),o.yIndex=a;var n=G.pzaGameState.map.getMapColumn(),i=G.pzaGameState.map.getYInterval(a)/3;G.pzaGameState.isRoofMode()&&(i=G.pzaGameState.map.getYInterval(a)/6);var r=G.pzaGameState.map.getBlockLogicPos(n-1,a,0,i);return r.x=670,o.logicPos=r,this.zombieDatas[o.yIndex].add(o),o},a.prototype.createFixBlockZombieData=function(e,a,t,o){void 0===o&&(o=!1);var n=s.pzaGameConfig.getZombieConfig(e);G.pzaGameState.isZombieMode()&&e==w.pzaZombieEnum.IMP&&(n=s.pzaGameConfig.getZombieConfig(w.pzaZombieEnum.IMP_MINI));var i=new S.pzaBaseData(null,e);i.hp=i.maxHp=n.hp,i.atk=n.atk,i.zombieData.equipHp=i.zombieData.maxEquipHp=n.equipHp,i.zombieData.direction=-1,i.zombieData.initMSpd=i.zombieData.moveSpd=G.pzaGameState.map.getBlockWidth()/n.speed,i.zombieData.equipType=n.equipType,i.zombieData.toolType=n.toolType,n instanceof b.pzaZJZombieConf&&(i.zombieData.typeId=n.typeId,i.zombieData.showWeight=n.showWeight,i.zombieData.equipType2=n.equipType2,i.zombieData.equipHp2=i.zombieData.maxEquipHp2=n.equipHp2,i.zombieData.atkArr=n.atkArr,i.zombieData.atkInterval2=n.atkInterval2),G.pzaGameState.isSmallGame()&&(i.hp=i.maxHp=n.hp*s.pzaGameConfig.miniZombieHp,i.zombieData.equipHp=i.zombieData.maxEquipHp=n.equipHp),i.xIndex=a,i.yIndex=t;var r=G.pzaGameState.map.getXInterval(a)/2,p=G.pzaGameState.map.getYInterval(t)/3;G.pzaGameState.isRoofMode()&&(p=G.pzaGameState.map.getYInterval(t)/6),e==w.pzaZombieEnum.BUNGEE_ZOMBIE&&(p=G.pzaGameState.map.getYInterval(t)/3+40);var l=G.pzaGameState.map.getBlockLogicPos(a,t,r,p);if(i.logicPos=l,o)i.zombieData.hypnosis=o;else{var c=this.zombieDatas[i.yIndex];c&&c.add(i)}return i},a.prototype.clearAllZombie=function(){this.zombieDatas.forEach(function(e){e&&e.clear()}),this.zombieMap.forEach(function(e,a){a&&(a.isDead=!0),e&&e.close()}),this.zombieMap.clear(),this.hypnoZombieMap.forEach(function(e,a){a&&(a.isDead=!0),e&&e.close()}),this.hypnoZombieMap.clear()},a.prototype.getZombieMapData=function(){var e=0;return this.zombieMap.forEach(function(a,t){18==t.zombieData.zombieType&&e++}),e},a.prototype.getJackHasToolAmt=function(){var e=0;return this.zombieMap.forEach(function(a,t){18==t.zombieData.zombieType&&2==t.zombieData.toolType&&e++}),e},i([x(sp.Skeleton)],a.prototype,"atlasSpine",void 0),i([x(cc.Material)],a.prototype,"baseSpineMaterial",void 0),i([U],a)}(cc.Component);t.pzaZombieManager=F,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGroupEnum":"pzaGroupEnum","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZJZombieConf":"pzaZJZombieConf","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../View/Battle/pzaReviveView":"pzaReviveView","../View/pzaAniMask":"pzaAniMask","./Data/pzaBaseData":"pzaBaseData","./Data/pzaBuffData":"pzaBuffData","./Data/pzaDropType":"pzaDropType","./Data/pzaGuideType":"pzaGuideType","./Data/pzaZombieEnum":"pzaZombieEnum","./Zombie/pzaBaseZombie":"pzaBaseZombie","./Zombie/pzaDrZomBoss":"pzaDrZomBoss","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState","./pzaSpineTool":"pzaSpineTool"}],pzaZombieSelectView:[function(e,a,t){"use strict";cc._RF.push(a,"7618fDpLWdEeIIeX3WkhaY6","pzaZombieSelectView");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieSelectView=void 0;var r=e("../../Battle/pzaGameState"),p=e("../../Common/pzaGameConfig"),l=e("./pzaZombieCard"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardList=[],a}return n(a,e),a.prototype.init=function(e){for(var a=0;a<this.cardList.length;a++){var t=this.cardList[a],o=e[a];if(null==o)t.bindData(null,null,null);else{var n=p.pzaGameConfig.getZombieConfig(o).price;t.bindData(o,n,this.clickCardCall.bind(this))}}},a.prototype.clickCardCall=function(e){r.pzaGameState.selectZombie==e&&(r.pzaGameState.selectCard=null,r.pzaGameState.selectZombie=null,e=null),this.cardList.forEach(function(a){a.curZombieType==e?a.select():a.diselect()})},i([u({displayName:"\u5361\u7247\u5217\u8868",type:[l.pzaZombieCard]})],a.prototype,"cardList",void 0),i([c],a)}(cc.Component);t.pzaZombieSelectView=d,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","./pzaZombieCard":"pzaZombieCard"}],pzaZombieSlot:[function(e,a,t){"use strict";cc._RF.push(a,"f1301n9mitKk6/Wjk7m2ZLL","pzaZombieSlot"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieSlot=t.pzaZombieSlotAtt=t.pzaZombieSlotType=void 0;var o=e("../pzaSpineTool");(function(e){e.butter="10pr",e.butter2="10pr2",e.hat="1hat",e.hat1="1hat1",e.hat_green="2hat",e.hat_iron="3hat",e.door="4door",e.head_nut="5body",e.head_nut_hole="11body",e.helmet_red="6hat",e.helmet_black="7hat",e.helmet_fei="8hat",e.gar_hand="9weapon",e.hat_digger="19hat",e.hat_digger_in="19hat1",e.hat_digger2="12hat",e.hat_digger2_in="12hat1",e.gao="20pr",e.gao2="20pr1",e.gao3="20pr2",e.flag="18pr",e.hat_night="15hat1",e.hat_night_1="15hat01",e.hat_night_2="15hata02",e.ladder="14pr1",e.ladder2="14pr",e.newspaper="16pr",e.pogo="13pra",e.pogo2="13prb",e.pogo3="13prc",e.ice_car="17pra",e.ice_car_b="17prb",e.ice_car_z1="17prz1",e.ice_car_z2="17prz2",e.ice_car_z3="17prz3",e.ice_car_z4="17prz4",e.ice_car_z5="17prz5",e.ice_car_z6="17prz6",e.ice_car_z7="17prz7",e.MachineHead="1head",e.head_tallnut="Dbody1"})(t.pzaZombieSlotType||(t.pzaZombieSlotType={}));t.pzaZombieSlotAtt=function(e,a,t,o,n){void 0===t&&(t=0),void 0===o&&(o=0),void 0===n&&(n=0),this.attName=null,this.x=0,this.y=0,this.rotation=0,this.state=0,this.attName=a,this.x=t,this.y=o,this.state=e,this.rotation=n};var n=function(){function e(e,a){this.zombieSpine=null,this.slotName=null,this.state=0,this.stateMap=new Map,this.zombieSpine=e,this.slotName=a}return e.prototype.addState=function(e){return this.stateMap.set(e.state,e),this},e.prototype.updateState=function(e,a){if(void 0===a&&(a=!1),a||this.state!==e){if(e<=0)return o.pzaSpineTool.instance().setSlotAtt(this.zombieSpine,this.slotName,null,0,0),void(this.state=e);var t=this.stateMap.get(e);t?(o.pzaSpineTool.instance().setSlotAtt(this.zombieSpine,this.slotName,t.attName,t.x,t.y,t.rotation),this.state=t.state):console.log("\u65e0\u6b64equipState",e,this.slotName)}},e}();t.pzaZombieSlot=n,cc._RF.pop()},{"../pzaSpineTool":"pzaSpineTool"}],pzaZombieState:[function(e,a,t){"use strict";cc._RF.push(a,"1254fuzgXhNfbmLza1fO2Do","pzaZombieState"),Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombieState=void 0,function(e){e[e.STAY=1]="STAY",e[e.MOVE=2]="MOVE",e[e.EAT_ATK=3]="EAT_ATK",e[e.DEAD=4]="DEAD",e[e.SPECIAL=5]="SPECIAL"}(t.pzaZombieState||(t.pzaZombieState={})),cc._RF.pop()},{}],pzaZombiebookCard:[function(e,a,t){"use strict";cc._RF.push(a,"9484177j0tLUo9Ri0pFBdw8","pzaZombiebookCard");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZombiebookCard=void 0;var r=e("../Battle/Data/pzaZombieEnum"),p=e("../Common/pzaGameCommonPool"),l=e("../Common/pzaGameConfig"),s=e("../Common/pzaLocalData"),c=e("../Common/pzaSoundManager"),u=e("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.cardIcon=null,a.cardNode=null,a.voidNode=null,a.zombieType=null,a.clickCall=null,a.unlock=!1,a}return n(a,e),a.prototype.bindData=function(e,a){this.zombieType=e,this.clickCall=a;var t=l.pzaGameConfig.getZombieConfig(e);if(null==t||s.pzaLocalData.data.curChapter<t.unlockChapter||s.pzaLocalData.data.curChapter==t.unlockChapter&&s.pzaLocalData.data.curPart<t.unlockPart?this.unlock=!1:this.unlock=!0,this.cardNode.active=!0,!this.unlock)return this.voidNode.active=!0,void(this.cardIcon.node.active=!1);this.voidNode.active=!1,this.cardIcon.node.active=!0,u.pzaSpriteFrameManager.loadZombieCard(e,this.cardIcon),e==r.pzaZombieEnum.ZOMBONI?this.cardIcon.node.scale=.5:e==r.pzaZombieEnum.CATAPULT_ZOMBIE?this.cardIcon.node.scale=.5:e==r.pzaZombieEnum.GARGANTUAR?this.cardIcon.node.scale=.5:(this.cardIcon.node.scale=.5,this.cardIcon.node.x=0,this.cardIcon.node.y=0),e!=r.pzaZombieEnum.YETI_ZOMBIE||s.pzaLocalData.hasUnlockZombie(e)?this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"):this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#000000")},a.prototype.zjBindData=function(e,a){switch(this.zombieType=e,this.clickCall=a,this.unlock=!0,this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),this.voidNode.active=!1,this.cardNode.active=!0,e){case r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE:e=104}u.pzaSpriteFrameManager.loadZombieCard(e,this.cardIcon)},a.prototype.clickCard=function(){this.unlock&&(c.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.zombieType))},a.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],a.prototype,"cardIcon",void 0),i([m({displayName:"\u5361\u7247\u8282\u70b9",type:cc.Node})],a.prototype,"cardNode",void 0),i([m({displayName:"\u7a7a\u69fd",type:cc.Node})],a.prototype,"voidNode",void 0),i([h],a)}(cc.Component);t.pzaZombiebookCard=f,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaZomboni:[function(e,a,t){"use strict";cc._RF.push(a,"48dea0mPk5KtqXNcJhrI6kz","pzaZomboni");var o,n=this&&this.__extends||(o=function(e,a){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])})(e,a)},function(e,a){function t(){this.constructor=e}o(e,a),e.prototype=null===a?Object.create(a):(t.prototype=a.prototype,new t)}),i=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.pzaZomboni=void 0;var r=e("../../Common/pzaSoundManager"),p=e("../Data/pzaBuffData"),l=e("../Data/pzaZombieEnum"),s=e("../Plant/pzaAttackType"),c=e("../pzaEffectManager"),u=e("../pzaGameState"),d=e("./pzaBaseZombie"),h=e("./pzaZombieState"),m=e("../../Common/pzaNameConf"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.bodyWidth=50,a.butterSlot=null,a.iceMakeNode=null,a}return n(a,e),a.prototype.updateCarState=function(){this.slotMap||this.initEquips()},a.prototype.uiShow=function(){e.prototype.uiShow.call(this),this.updateCarState(1)},a.prototype.preview=function(a,t,o){e.prototype.preview.call(this,a,t,o)},a.prototype.bindData=function(a){e.prototype.bindData.call(this,a),this.animation.node.active=!0,this.animation.node.y=-20,this.animation.spineAnimation.node.rotation=0,this.baseData.zombieData.cate=l.pzaZombieCate.IceCar,console.log("logicY",this.baseData.logicPos.y),null!=a.logicPos&&(this.createSpecialGround(),a.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1)),a.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_SPATTER,-1)),a.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_IMMOBILIZE,-1)))},a.prototype.createSpecialGround=function(){var e=this.baseData.logicPos.x+this.iceMakeNode.x,a=this.baseData.logicPos.y+this.iceMakeNode.y;c.pzaEffectManager.createIceGround(this.baseData,e,a)},a.prototype.speedDown=function(){-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8))},a.prototype.logicUpdate=function(e){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(e),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(e),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(e):(this.speedDown(),this.updateMove(e),this.rollingPlant()):this.changeRowMove(e))))},a.prototype.changeRowMove=function(e){this.updateMove(e),this.baseData.logicPos.y+=150*e*(this.baseData.yIndex<this.changeTargetRow?1:-1);var a=.1*u.pzaGameState.map.getYInterval(this.changeTargetRow),t=u.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,a);if(this.baseData.yIndex<this.changeTargetRow&&t.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&t.y>=this.baseData.logicPos.y){this.baseData.logicPos.y=t.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1;var o=this.baseData.logicPos.x+this.iceMakeNode.x,n=this.baseData.logicPos.y+this.iceMakeNode.y;c.pzaEffectManager.createIceGround(this.baseData,o,n,!0)}},a.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var e,a=this.findTarget();e=a?""+a.xIndex+a.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var t=window.pzaplantManager.plantDataMap.get(e);if(null!=t){var o=window.pzaplantManager.getPlantByData(t);o&&o.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(e);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(e);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(e);if(null!=l){var c=window.pzaplantManager.getPlantByData(l);c&&c.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}}},a.prototype.hurt=function(a,t,o){var n=this;if(void 0===o&&(o=s.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(o==s.pzaAttackType.BANG)return this.baseData.zombieDie(),this.death(!0),void r.pzaSoundManager.playAudio("zomboniDeath");if(o!=s.pzaAttackType.SPIKE){if(o==s.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!0);e.prototype.hurt.call(this,a,t,o)}else{if(this.baseData.zombieDie(),r.pzaSoundManager.playAudio("ball_fall"),this.animation.playAnimation("jump",!1,function(){n.death(!0)}),null!=t){var i=window.pzaplantManager.getPlantByData(t);i&&i.hurt(50,this.baseData,s.pzaAttackType.BANG)}r.pzaSoundManager.playAudio("zomboniDeath")}}},a.prototype.death=function(a){e.prototype.death.call(this,a,null,!1),r.pzaSoundManager.playAudio("explosion")},a.prototype.playDeathAnimation=function(e){this.zombieState=h.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.playAnimation("blow",!1,e)},a.prototype.zombieDying=function(){this.zombieHurtState=l.pzaHurtStateEnum.DYING,this.animation.setAnimationSkin(m.pzaZombieSkName.ZOMBONI.SKIN.dying),this.animation.playAnimation(m.pzaZombieSkName.ZOMBONI.hurtMove,!0)},a.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.animation.setAnimationSkin(m.pzaZombieSkName.ZOMBONI.SKIN.hurt)},a.prototype.zombieIntact=function(){this.zombieHurtState=l.pzaHurtStateEnum.INTACT,this.animation.setAnimationSkin(m.pzaZombieSkName.ZOMBONI.SKIN.intact)},a.prototype.zombieScream=function(){r.pzaSoundManager.playAudio("Zomboni_Enter")},a.prototype.getMoveAniNameArray=function(){return this.zombieHurtState==l.pzaHurtStateEnum.INTACT?this.moveAniName:[m.pzaZombieSkName.ZOMBONI.hurtMove]},a.prototype.pauseSelf=function(){e.prototype.pauseSelf.call(this),this.animation.spineAnimation.node.pauseAllActions()},a.prototype.resumeSelf=function(){e.prototype.resumeSelf.call(this),this.animation.spineAnimation.node.resumeAllActions()},a.prototype.onChangeIndex=function(a,t){e.prototype.onChangeIndex.call(this,a,t),4!=a||5!=u.pzaGameState.mapId&&6!=u.pzaGameState.mapId||this.animation.spineAnimation.node.runAction(cc.rotateTo(12,-12))},i([y({displayName:"\u5236\u51b0\u8282\u70b9",type:cc.Node})],a.prototype,"iceMakeNode",void 0),i([z],a)}(d.pzaBaseZombie);t.pzaZomboni=g,cc._RF.pop()},{"../../Common/pzaNameConf":"pzaNameConf","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzakc:[function(e,a,t){"use strict";cc._RF.push(a,"a61f6W3ID1MGoqPrk0iw1E8","pzakc");var o=this&&this.__decorate||function(e,a,t,o){var n,i=arguments.length,r=i<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,o);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(r=(i<3?n(r):i>3?n(a,t,r):n(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},n=this&&this.__read||function(e,a){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,n,i=t.call(e),r=[];try{for(;(void 0===a||a-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(n)throw n.error}}return r},i=this&&this.__spread||function(){for(var e=[],a=0;a<arguments.length;a++)e=e.concat(n(arguments[a]));return e};Object.defineProperty(t,"__esModule",{value:!0});var r=e("../Common/pzaLocalData"),p=e("./pzaChannel"),l=cc._decorator,s=l.ccclass,c=(l.property,function(){function e(){}var a;return a=e,e.log=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];e.unshift("====>"),console.log.apply(window,e)},e.err=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];e.unshift("====>"),console.error.apply(window,e)},e.removeNodeChildren=function(e){e.children.forEach(function(e){e.isValid&&e.destroy()})},e.objToMap=function(e){var t=new Map;return a.forMap(e,function(a){t.set(a,Number(e[a]))}),t},e.mapToObj=function(e){var a={};return e.forEach(function(e,t){a[t]=e}),a},e.str=function(e){return null==e?"":e.trim()},e.num=function(e){return e?Number(e):0},e.strArr=function(e){return e?(e=e.replace(/\s/g,"").replace(/\uff0c/g,",")).split(","):null},e.strNumArr=function(e){if(!e)return null;for(var a=[],t=(e=e.replace(/\s/g,"").replace(/\uff0c/g,",")).split(","),o=0;o<t.length;o++)a.push(Number(t[o]||0));return a},e.strSet=function(e){if(!e)return null;for(var t=a.strArr(e),o=new Set,n=0;n<t.length;n++)o.add(t[n]);return o},e.strMap=function(e){if(!e)return null;for(var t=a.strArr(e),o=new Map,n=0;n<t.length;n++){var i=t[n].split(":");if(2!==i.length)throw new Error("\u89e3\u6790\u9519\u8bef!"+e);i[1].replace(/%/g,"");var r=parseInt(i[1]);if(isNaN(r))throw new Error("\u89e3\u6790\u9519\u8bef!"+i+","+e);o.set(i[0],r)}return o},e.forMap=function(e,a){for(var t=Object.keys(e),o=0,n=t.length;o<n;o++){var i=a(t[o],o);if(void 0!==i)return i}return null},e.loadSubGame=function(e,a,t,o,n){cc.assetManager.loadAny({url:e},{version:t,ext:"bundle",preset:"bundle",__isNative__:!0},function(){},function(t,i){if(t)n(t);else{var r=new cc.AssetManager.Bundle;i.base=i.base||e+"/",r.init(i),r.load("pkg/"+a,cc.Prefab,o,function(e,a){e?n(e):n(null,a,r)})}})},e.init=function(){var e=cc.view.getVisibleSize();a.view_x=e.width/2,a.view_y=e.height/2,a.view_mag=cc.v2(a.view_x,a.view_y).mag(),a.log("\u53ef\u89c6\u533a\u57df",a.view_x,a.view_y),cc.view.setResizeCallback(a.init),a.loadData(null)},e.leftPad=function(e,a,t){void 0===t&&(t="0");var o=a-e.length;if(o<=0)return e;for(var n=0;n<o;n++)e=t+e;return e},e.showPassTime=function(e){var a=Math.floor(e/1e3),t=Math.floor(a/86400);t>0&&(a%=86400);var o=Math.floor(a/3600);o>0&&(a%=3600);var n=""+Math.floor(a/60),i=""+a%60;return(t>0?t+"\u5929":"")+this.leftPad(""+o,2)+":"+this.leftPad(n,2)+":"+this.leftPad(i,2)},e.showPercent=function(e){return 100*e+"%"},e.bezier=function(e,a,t,o,n){var i=1-n;return i*(i*(e+(3*a-e)*n)+3*t*n*n)+o*n*n*n},e.bezierTo=function(e,t,o,n,i,r){return r||(r=Object.create(null)),r.progress=function(t,i,r,p){var l=a.bezier(t.x,o.x,n.x,i.x,p),s=a.bezier(t.y,o.y,n.y,i.y,p);return e.angle=a.posToAngle(r.x,r.y,l,s),r.x=l,r.y=s,r},cc.tween(e).to(t,{position:i},r)},e.posToAngle=function(e,a,t,o){return 180*Math.atan2(o-a,t-e)/Math.PI},e.posToRadian=function(e,a,t,o){return Math.atan2(o-a,t-e)},e.clone=function(e){if(Array.isArray(e)){for(var t=[],o=0,n=e.length;o<n;o++)t.push(a.clone(e[o]));return t}if("[object Object]"===Object.prototype.toString.call(e)){var i={};return a.forMap(e,function(t){i[t]=a.clone(e[t])}),i}return e},e.isNewDay=function(e){if(e<=0)return!0;var a=new Date(e),t=new Date;return a.getFullYear()!==t.getFullYear()||a.getMonth()!==t.getMonth()||a.getDate()!==t.getDate()},e.randomInt=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)},e.randomBool=function(e){return void 0===e&&(e=.5),Math.random()<e},e.randomPosNeg1=function(){return Math.random()>.5?1:-1},e.randomStr=function(e,t){for(var o=t||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",i=0;i<e;i++)n+=o[a.randomInt(0,e-1)];return n},e.distinctArr=function(e,a){return void 0===a&&(a=[]),Array.from(new Set(i(e,a)))},e.arrSub=function(e,a){for(var t=new Set(a),o=[],n=0,i=e.length;n<i;n++){var r=e[n];t.has(r)||o.push(r)}return o},e.randomChooseIndex=function(e,t){for(var o=new Array,n=new Array,i=e.length,r=0;r<i;r++)n[r]=r;for(var p=0;p<t;p++){var l=a.randomInt(0,n.length-1);o.push(n.splice(l,1)[0])}return o},e.randomChoose=function(e,a){if(!a||1===a)return[e[Math.floor(Math.random()*e.length)]];var t=e.slice(0);if(a>e.length)return t;for(var o=0,n=0,i=e.length,r=i-a;i-- >r;)o=t[n=Math.floor((i+1)*Math.random())],t[n]=t[i],t[i]=o;return t.slice(r)},e.randomDraw=function(e){var t=Math.random(),o=0;return a.forMap(e,function(a){if(t>o&&t<o+e[a])return a;o+=e[a]})},e.randomPick=function(e,a){if(!a||1===a)return e.splice(Math.floor(Math.random()*e.length),1);if(a>e.length)return e;for(var t=[],o=0;o<a;o++){var n=Math.floor(Math.random()*e.length);t.push(e.splice(n,1)[0])}return t},e.resetTexRect=function(e){if(e.spriteFrame){var t=e.spriteFrame.getRect(),o=e.spriteFrame.getTexture(),n=t.x/o.width,i=t.y/o.height,r=(t.x+t.width)/o.width,p=(t.y+t.height)/o.height,l=new cc.Vec4(n,i,r-n,p-i);e.getMaterial(0).setProperty("_TexRect",l)}else a.err("[ERR]resetTexRect",e)},e.shake=function(e,a,t,o){void 0===a&&(a=3),void 0===t&&(t=0),void 0===o&&(o=10);var n={shakeCount:a,node:e,orgX:e.x,orgY:e.y,isDone:!1,doneFn:function(){},done:null,tw:null};return n.done=function(e,a){return e&&(n.doneFn=function(){e.call(a||n.node)}),n},n.tw=cc.tween(n.node).repeat(n.shakeCount,cc.tween().to(.05,{x:n.orgX+o,y:n.orgY+t}).to(.05,{x:n.orgX-o,y:n.orgY-t})).call(function(){n.doneFn()}),n.tw.start(),n},e.resetMsgReciever=function(e,t){a.msgMap[e]=t},e.delMsgReciever=function(e){delete a.msgMap[e]},e.regMsgReciever=function(e,t){var o=a.msgMap[e];o?a.msgMap[e]=function(e){return!!o(e)&&t(e)}:a.resetMsgReciever(e,t)},e.sendMsg=function(e,t){var o=a.msgMap[e];o&&o(t)},e.moveTo=function(e,a,t,o,n){void 0===o&&(o=.5),void 0===n&&(n=function(){});var i=a.sub(cc.v2(e.position)),r=i.mag();if(0!==r){var p=i.x/r*t,l=i.y/r*t;cc.tween(e).to(o,{x:e.x+p,y:e.y+l}).call(n).start()}else n()},e.updateMove=function(e,a,t,o,n,i){if(void 0===o&&(o=10),void 0===n&&(n=0),e&&0!==o){var r=a.sub(t),p=r.mag();if(!(p<10)){0!==n&&(r.x<0&&e.scaleX>0||r.x>0&&e.scaleX<0)&&(e.scaleX=-e.scaleX);var l=r.x/p,s=r.y/p;i&&!i(r,p,l,s)||(e.x+=l*o,e.y+=s*o)}}},e.twoInt=function(e){return e<10?"0"+e:e},e.todayStr=function(){var e=new Date;return""+e.getFullYear()+a.twoInt(e.getMonth()+1)+a.twoInt(e.getDate())},e.saveData=function(e,t){var o=window.localStorage;o&&(a.saveObj[e]=t,o.setItem(a.gameName,JSON.stringify(a.saveObj)))},e.getData=function(e,t){var o=a.saveObj[e];return null==o?t:o},e.loadData=function(e){var t=window.localStorage;if(t){var o=t.getItem(a.gameName);if(o){if(a.saveObj=JSON.parse(o),!a.saveObj.userId){var n=""+a.randomInt(1e8,999999999);this.saveData("userId",n)}return a.saveObj[e]}n=""+a.randomInt(1e8,999999999),this.saveData("userId",n)}return null},e.clearData=function(){var e=window.localStorage;e&&e.removeItem(a.gameName)},e.jget=function(e,t){t||(t=function(e){if(e)return a.err(e)});var o=new XMLHttpRequest;o.responseType="arraybuffer",o.open("GET",e,!0),o.onload=function(){return 200==o.status?t(null,o.response):t("[ERR-jget]:"+o.status)},o.onerror=function(e){t(e)},o.send()},e.jgetJson=function(e,t){t||(t=function(e){if(e)return a.err(e)});var o=new XMLHttpRequest;o.responseType="json",o.open("GET",e,!0),o.onload=function(){return 200==o.status?(console.error("fail 200"),t(null,o.response)):(console.error("fail 2001"),t("[ERR-jget]:"+o.status))},o.onerror=function(e){console.error("fail 2002"),t(e)},o.send()},e.jpost=function(e,t,o){o||(o=function(e){if(e)return a.err(e)});var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8");var i=JSON.stringify(t);n.send(i),n.onerror=function(e){o(e)},n.onload=function(){if(200==n.status){if("object"==typeof n.responseText)return o(null,n.responseText);var t={postERR:""+n.responseText};try{t=JSON.parse(n.responseText)}catch(i){return a.err(i),o(null,{code:"1111",err:"jsonErr:"+n.responseText,url:e})}return o(null,t)}return o(null,{code:""+n.status})}},e.encodeUTF8=function(e){var a,t,o,n=[];for(a=0;a<e.length;a++)(t=e.charCodeAt(a))<128?n.push(t):t<2048?n.push(192+(t>>6&31),128+(63&t)):((o=55296^t)>>10==0?(t=(o<<10)+(56320^e.charCodeAt(++a))+65536,n.push(240+(t>>18&7),128+(t>>12&63))):n.push(224+(t>>12&15)),n.push(128+(t>>6&63),128+(63&t)));return n},e.s=function(e){var t,o,n,i=new Uint8Array(a.encodeUTF8(e)),r=16+(i.length+8>>>6<<4);for((e=new Uint8Array(r<<2)).set(new Uint8Array(i.buffer)),e=new Uint32Array(e.buffer),n=new DataView(e.buffer),t=0;t<r;t++)e[t]=n.getUint32(t<<2);e[i.length>>2]|=128<<24-8*(3&i.length),e[r-1]=i.length<<3;var p=[],l=[function(){return u[1]&u[2]|~u[1]&u[3]},function(){return u[1]^u[2]^u[3]},function(){return u[1]&u[2]|u[1]&u[3]|u[2]&u[3]},function(){return u[1]^u[2]^u[3]}],s=function(e,a){return e<<a|e>>>32-a},c=[1518500249,1859775393,-1894007588,-899497514],u=[1732584193,-271733879,null,null,-1009589776];for(u[2]=~u[0],u[3]=~u[1],t=0;t<e.length;t+=16){var d=u.slice(0);for(o=0;o<80;o++)p[o]=o<16?e[t+o]:s(p[o-3]^p[o-8]^p[o-14]^p[o-16],1),n=s(u[0],5)+l[o/20|0]()+u[4]+p[o]+c[o/20|0]|0,u[1]=s(u[1],30),u.pop(),u.unshift(n);for(o=0;o<5;o++)u[o]=u[o]+d[o]|0}for(n=new DataView(new Uint32Array(u).buffer),t=0;t<5;t++)u[t]=n.getUint32(t<<2);return Array.prototype.map.call(new Uint8Array(new Uint32Array(u).buffer),function(e){return(e<16?"0":"")+e.toString(16)}).join("")},e.b=function(e){var a=[];for(var t in e)a.push(t);a=a.sort();for(var o="",n=0;n<a.length;n++){var i=e[a[n]];"object"==typeof i&&(i=this.b(i)),o+=a[n]+i}return o},e.a=function(e,t,o){var n=[];for(var i in e)null!==e[i]&&void 0!==e[i]?n.push(i):delete e[i];n=n.sort();var r=a.b(e);return t&&(r+=t),r+=o||"pH0Xhyenu2e1zdUg",a.s(r)},e.jax=function(e,t,o){o||(o=function(e){if(e)return a.err(e)});var n=new XMLHttpRequest,i=Date.now();t.s=a.a(t,i),n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.setRequestHeader("ts",""+i);var r=JSON.stringify(t);n.send(r),n.onload=function(){if(200==n.status){var e={jaxERR:""+n.responseText};try{e=JSON.parse(n.responseText)}catch(t){return a.err(t),o(null,{re:"1111",err:"jsonErr:"+n.responseText})}return o(null,e)}return o(null,{re:"9"+n.status})}},e.eventReport=function(e,t,o){if(!p.pzaChannel.isConfRemote&&p.pzaChannel.instance().getPara("gid"))return"my"==p.pzaChannel.instance().getChannel().channel?console.log("\u6682\u505cmy\u6253\u70b9\u4e0a\u62a5=="):void p.pzaChannel.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/eventReport",{eventName:e,eventProp:t,gid:p.pzaChannel.instance().getPara("gid"),uid:r.pzaLocalData.data.saveId,userProps:o},function(t){t?a.err("eventReport",t):console.log("eventReport===>",e)});console.warn("eventReport===>",e)},e.htInit=function(e,t){if(void 0===t&&(t=function(){}),e){var o={gid:e,uid:a.getData("user",{}).id||"u"+Date.now(),v:a.htVer};a.jax(a.htHost+"init2",o,function(e,o){if(e||!o)return a.err("jhtERR",e),t(e||new Error("no re"));if(0!==o.re)return a.err("jht FAILED!"+JSON.stringify(o)),t(new Error("err:"+o.re));if(a.log("HT init OK:"+a.htVer),o.uid){var n=a.getData("user",{});n.id=o.uid,a.saveData("user",n)}o.picType&&(a.picType=o.picType),a.iconPre=o.iconPre,t(null,o)})}},e.htGetBox=function(e,t){if(void 0===t&&(t=function(){}),e){var o={bid:e};a.jax(a.htHost+"getBox",o,function(o,n){if(o)return t(o);if(0!==n.re||!n.arr)return t(new Error("\u670d\u52a1\u914d\u7f6e\u6709\u8befbid:"+e+",re:"+n.re));for(var i=[],r={},p=0;p<n.arr.length;p++)for(var l=n.arr[p],s=0;s<l.length;s++){var c=l[s].split("@"),u="",d="";c.length>=4&&"0"!==c[3]&&(u="_"+c[3]),c.length>=5&&(d=c[4]),r[c[0]]||(i.push({jumpKey:c[1],mid:c[0],iconUrl:a.iconPre+c[0]+u+"."+a.picType,txt:c[2],mark:d}),r[c[0]]=c[0])}t(null,i)})}else a.err("htGetBox bid\u4e3a\u7a7a!!")},e.ani_JitterNode=function(e,a,t,o,n){if(void 0===n&&(n=!1),n){var i=(r=cc.tween(e).by(a/4,{angle:t}).by(a/2,{angle:2*-t}).by(a/4,{angle:t})).delay(.5);cc.tween(e).repeatForever(i).start()}else{var r=cc.tween(e).by(a/2,{angle:t}).by(a/2,{angle:-t});(i=cc.tween(e).sequence(r,cc.tween(e).delay(.1),r.reverseTime()).delay(.1)).repeat(o).start()}},e.getRemainingSeconds=function(){var e=new Date,a=new Date(e);a.setHours(24,0,0,0);var t=a.getTime()-e.getTime();return Math.floor(t/1e3)},e.format=function(e,a){void 0===a&&(a=!0);var t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=e%60;return a?this.formatTime(t)+":"+this.formatTime(o)+":"+this.formatTime(n):this.formatTime(o)+":"+this.formatTime(n)},e.formatTime=function(e){return e<10?"0"+e:""+e},e.formatCountdown=function(e){var a=Math.floor(e%3600/60),t=Math.floor(e%60);return a.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")},e.getActivityEndTime=function(e){return this.getActivityLeaveTime(e)},e.getActivityLeaveTime=function(e,a){void 0===a&&(a=!0);var t=new Date,o=new Date(t.getFullYear(),t.getMonth(),t.getDate()+e+1).getTime()-t.getTime(),n=Math.floor(o/6e4)%60,i=Math.floor(o/36e5)%24,r=Math.floor(o/864e5),p=String(i).padStart(2,"0"),l=String(n).padStart(2,"0"),s="\u5269\u4f59\u65f6\u95f4: "+r+"\u5929"+p+":"+l;return!1===a&&(s=r+"\u5929"+p+":"+l),s},e.getActivityCloseTime=function(e){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e+1).getTime()-a.getTime(),o=Math.floor(t/6e4)%60,n=Math.floor(t/36e5)%24;return Math.floor(t/864e5),String(n).padStart(2,"0")+":"+String(o).padStart(2,"0")},e.showLeftDay=function(e){var a=e-Date.now(),t=Math.floor(a/864e5);return console.log("\u5269\u4f59\u5929\u6570: ",t),t},e.getLeaveTime=function(e){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e).getTime()-a.getTime(),o=Math.floor(t/1e3)%60,n=Math.floor(t/6e4)%60,i=Math.floor(t/36e5)%24,r=Math.floor(t/864e5),p=String(i).padStart(2,"0"),l=String(n).padStart(2,"0"),s=String(o).padStart(2,"0"),c=r+"\u5929"+p+":"+l;return r<=0&&(c=p+":"+l+":"+s),c},e.getLeaveDay=function(e){var a=e.getHours()+"";"0"==a&&(a="00");var t=e.getSeconds()+"";return"0"==t&&(t="00"),e.getFullYear()+"\u5e74"+(e.getUTCMonth()+1)+"\u6708"+e.getDate()+"\u5929"+a+":"+t},e.getMonthDays=function(){var e;e=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now();var a=new Date(e),t=(a.getDate(),a.getMonth()+1);return new Date(a.getFullYear(),t,0).getDate()},e.getCurrentDay=function(){var e;return e=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now(),new Date(e).getDate()},e.getCurrentMonty=function(){var e;return e=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now(),new Date(e).getMonth()+1},e.getCurrentYear=function(){var e;return e=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now(),new Date(e).getFullYear()},e.returnNowTime=function(e){var a=new Date(e),t=a.getDate(),o=a.getMonth()+1;return a.getFullYear()+"\u5e74"+o+"\u6708"+t+"\u65e5"},e.setServerTimeToLocal=function(e){console.log("\u4f7f\u7528\u670d\u52a1\u5668\u65f6\u95f4"),r.pzaLocalData.serverTime=e},e.getDaysDifference=function(e,a){var t=new Date(e),o=new Date(a),n=Math.abs(o.getTime()-t.getTime());return Math.floor(n/864e5)},e.getDaysDifference2=function(e,a){var t=new Date(e),o=new Date(a),n=t.getFullYear(),i=t.getMonth(),r=t.getDate(),p=o.getFullYear(),l=o.getMonth(),s=o.getDate(),c=new Date(n,i,r),u=new Date(p,l,s),d=Math.abs(u.getTime()-c.getTime());return Math.floor(d/864e5)},e.judgeMonth=function(){this.getCurrentMonty()!=r.pzaLocalData.data.nowMonth&&(r.pzaLocalData.data.monthSignDays=0,r.pzaLocalData.data.retroSignDays=0,r.pzaLocalData.data.nowMonth=this.getCurrentMonty(),r.pzaLocalData.addDirty("monthSignDays","retroSignDays","nowMonth")),this.judgeDay(),this.judgeWeek(),this.canLockMonthSign()},e.judgeWeek=function(){var e;e=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now();var a=!1;null==r.pzaLocalData.data.weekDayTime?(a=!1,r.pzaLocalData.data.weekDayTime=e):(a=this.isSameWeek(r.pzaLocalData.data.weekDayTime,e),r.pzaLocalData.data.weekDayTime=e),r.pzaLocalData.addDirty("weekDayTime");var t=new Date,o=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();0==a?(r.pzaLocalData.clearBpData(),r.pzaLocalData.data.bpWeekTaskStates={}):(r.pzaLocalData.data.bpWeekRecordLogin!=o&&(r.pzaLocalData.data.bpWeekRecordLogin=o,r.pzaLocalData.data.bpWeekLoginCnt++),r.pzaLocalData.addDirty("bpWeekRecordLogin","bpWeekLoginCnt"))},e.isSameWeek=function(e,a){var t=new Date(e),o=new Date(a),n=new Date(t);n.setDate(t.getDate()-(t.getDay()+6)%7),n.setHours(0,0,0,0);var i=new Date(o);i.setDate(o.getDate()-(o.getDay()+6)%7),i.setHours(0,0,0,0);var r=new Date(n);r.setDate(n.getDate()+6),r.setHours(23,59,59,999);var p=new Date(i);return p.setDate(p.getDate()+6),p.setHours(23,59,59,999),n<=o&&o<=r||i<=t&&t<=p},e.getNextMonday=function(){var e,a=(new Date).getDay();return e=0===a?1:1===a?7:8-a,this.getLeaveTime(e)},e.judgeDay=function(){var e=a.getCurrentYear(),t=a.getCurrentMonty(),o=a.getCurrentDay();if(r.pzaLocalData.data.signDasyEnd.length<3)r.pzaLocalData.data.signDasyEnd=[e,t,o],r.pzaLocalData.data.isSignInMonth=!1,r.pzaLocalData.addDirty("signDasyEnd","isSignInMonth");else{var n=!1;e==r.pzaLocalData.data.signDasyEnd[0]&&t==r.pzaLocalData.data.signDasyEnd[1]&&o==r.pzaLocalData.data.signDasyEnd[2]&&(n=!0),n||(r.pzaLocalData.data.isSignInMonth=!1,r.pzaLocalData.data.signDasyEnd=[e,t,o],r.pzaLocalData.addDirty("signDasyEnd"))}p.pzaChannel.instance().channel},e.newPlayerJudgeDay=function(){var e=new Date;0==p.pzaChannel.isConfRemote&&(e=new Date(r.pzaLocalData.serverTime));var a=e.getUTCFullYear()+"-"+e.getUTCMonth()+"-"+e.getUTCDate();if(a!=r.pzaLocalData.data.newPlayerSameDay){for(var t in r.pzaLocalData.data.newPlayerSameDay=a,r.pzaLocalData.data.newPlayerLoginCnt++,r.pzaLocalData.data.loginDays++,r.pzaLocalData.data.riderFallTasks)if(Object.prototype.hasOwnProperty.call(r.pzaLocalData.data.riderFallTasks,t)){var o=parseInt(t);o>=1&&o<=6&&(r.pzaLocalData.data.riderFallTasks[t]=0)}r.pzaLocalData.data.riderFallTaskPro={login:1,zombie:0,coin:0,sun:0,passpart:0,ad:0},r.pzaLocalData.data.riderFallTry=!0,r.pzaLocalData.addDirty("riderFallTry","riderFallTasks","riderFallTaskPro","newPlayerLoginCnt","newPlayerStep","newPlayerSameDay","loginDays")}this.recordNewPlayerTime()},e.recordNewPlayerTime=function(){var e=null;if(e=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now(),p.pzaChannel.isConfRemote&&(e=Date.now()),r.pzaLocalData.data.newPlayerStartTime){var a=this.getDaysDifference2(e,r.pzaLocalData.data.newPlayerStartTime);r.pzaLocalData.data.daysGap!=a&&(console.log("days\u4e0d\u4e00\u6837: ",a),r.pzaLocalData.data.daysGap=a,r.pzaLocalData.data.newPlayerStep=1+a,r.pzaLocalData.data.newPlayerStep>=7&&(r.pzaLocalData.data.newPlayerStep=7),r.pzaLocalData.addDirty("newPlayerStep","daysGap"))}else r.pzaLocalData.data.newPlayerStartTime=e,r.pzaLocalData.data.newPlayerStep=1,r.pzaLocalData.addDirty("newPlayerStep","newPlayerStartTime")},e.canLockMonthSign=function(){r.pzaLocalData.data.canMonthSign||r.pzaLocalData.data&&r.pzaLocalData.data.signDays>=7&&(r.pzaLocalData.data.canMonthSign=!0,r.pzaLocalData.addDirty("canMonthSign"))},e.gameName="td_hwcsmlq",e.dancingZomIdx=1,e.diggerZomIdx=1,e.callbackArr=function(e,a,t,o){void 0===o&&(o=!1);for(var n=[],i=e.length,r=function(e,a){return e?t(e,n):(void 0===a&&(a=null),n.push(a),o||n.length===i?t(null,n):void 0)},p=0;p<i;p++)a(e[p],r)},e.view_x=0,e.view_y=0,e.view_mag=0,e.shuffle=function(e){for(var a,t=e.length,o=0;t;)o=Math.random()*t-->>>0,a=n([e[o],e[t]],2),e[t]=a[0],e[o]=a[1];return e},e.msgMap={},e.saveObj={},e.htVer="203",e.picType="",e.iconPre="",e.htHost="https://ga.gamejym.com/htApi/ht_api/",a=o([s],e)}());t.default=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaChannel":"pzaChannel"}]},{},["pzaAchieve","pzaAchieveItem","pzaAchieveMgr","pzaAchieveRewardItem","pzaAchieveView","pzaBattlePassConf","pzaBattlePassItem","pzaBattlePassMgr","pzaBattlePassTaskConf","pzaBattlePassTaskItem","pzaBattlePassTaskMgr","pzaBattlePassTaskView","pzaBattlePassView","pzaBaseBullet","pzaBulletAnimator","pzaButterBaseBullet","pzaCatSunBullet","pzaCobBullet","pzaCupidBullet","pzaDirBullet","pzaDoomBullet","pzaGoldBullet","pzaIceMelonBaseBullet","pzaIceMelonBullet","pzaMelonBullet","pzaMissile","pzaPeaBullet","pzaPeaFireBaseBullet","pzaPeaFireTrackBullet","pzaPeaTrackBullet","pzaPenetrateBullet","pzaPhoenixBullet","pzaRotateBullet","pzaShroomBullet","pzaSnowBaseBullet","pzaThrowBullet","pzaTrackBullet","pzaZombieBaseBullet","pzaBaseData","pzaBattleData","pzaBuffData","pzaDropType","pzaGoodsEnum","pzaGuideType","pzaJarData","pzaPlantEnum","pzaZombieEnum","pzaDemoBaseBullet","pzaDemoBaseComp","pzaDemoBasePlant","pzaDemoBaseZombie","pzaDemoConf","pzaDemoMgr","JalapenoBoomEffect","pzaATest","pzaAbsorbIronEquip","pzaBackPumpkin","pzaBaseEffect","pzaBaseShooter","pzaBattleFrameAnim","pzaBoomFireEffect","pzaBungeeTarget","pzaBungeeZombieEffect","pzaButterEffect","pzaCobHoleEffect","pzaColdWind","pzaDoomHoleEffect","pzaDrZomBall","pzaDropCard","pzaDropCoin","pzaDropPlantCard","pzaFireBallEffect","pzaFireEffect","pzaFogEffect","pzaFrozenEffect","pzaGoldHoleEffect","pzaGroveEffect","pzaHammerEffect","pzaHitFlyEffect","pzaHoleBlock","pzaIceGroundEffect","pzaLadder","pzaPitchFork","pzaPlantCreateEffect","pzaPlantDeathEffect","pzaPlanternEffect","pzaPortalDoor","pzaPortalEffect","pzaRainEffect","pzaRainNightEffect","pzaRicochetBulletEffect","pzaRoofPreEffect","pzaShadowEffect","pzaShovelEffect","pzaShovelPlantShooter","pzaShowGrassEffect","pzaSleepEffect","pzaSpeedBlinkEffect","pzaTangleKelpEffect","pzaTrackBlock","pzaWarnLineEffect","pzaWaterLightEffect","pzaWaterWaveEffect","pzaWordEffect","pzaZombieHoleEffect","pzaAttackType","pzaBasePlant","pzaBlover","pzaBoomNut","pzaBowlingBody","pzaBowlingNut","pzaBowlingWallBody","pzaCabbagePult","pzaCactus","pzaCaiWen","pzaCattail","pzaCherryBomb","pzaChomper","pzaCobCannon","pzaCoffeeBean","pzaDoomShroom","pzaFightKing","pzaFireBlover","pzaFlowerPot","pzaFlowerPotShadow","pzaFumeShroom","pzaGaby","pzaGarlic","pzaGatlingPea","pzaGeneSnowPea","pzaGloomShroom","pzaGoldMagnet","pzaGraveBuster","pzaHypnoShroom","pzaIceShroom","pzaImitater","pzaJalapeno","pzaKernelPult","pzaLaserBean","pzaLilyPad","pzaMagnetShroom","pzaMarigold","pzaMelonPult","pzaPeashooter","pzaPhoenix","pzaPlantBody","pzaPlantern","pzaPotatoMine","pzaPuffShroom","pzaPuffShroomPult","pzaPumpkin","pzaPumpkinLightDef","pzaPumpkinPurple","pzaRepeater","pzaRepeaterReverse","pzaScaredyShroom","pzaSeaShroom","pzaSnowPea","pzaSpikerock","pzaSpikeweed","pzaSplitPea","pzaSquash","pzaStarFruit","pzaStarFruitShadow","pzaSunFlower","pzaSunShroom","pzaSuperChomper","pzaTallBowlingNut","pzaTallNut","pzaTangleKelp","pzaThreePeater","pzaTorchwood","pzaTwinSunflower","pzaUmbrellaLeaf","pzaWallNut","pzaWinterMelonPult","pzaBackupDancerZombie","pzaBalloonZombie","pzaBaseZombie","pzaBucketHeadZombie","pzaBungeeZombie","pzaCatapultZombie","pzaConeHeadZombie","pzaCreamPea","pzaDancingZombie","pzaDiggerZombie","pzaDolphinRiderZombie","pzaDrZomBoss","pzaDuckyTubeBucketZombie","pzaDuckyTubeConeZombie","pzaDuckyTubeZombie","pzaFlagZombie","pzaFootballZombie","pzaGargantuar","pzaGatlingShooterZombie","pzaImp","pzaJackZombie","pzaJalapenoZombie","pzaLadderZombie","pzaMachineGargantuar","pzaNewspaperZombie","pzaNormalZombie","pzaNutZombie","pzaPeaZombie","pzaPogoZombie","pzaPolevaultingZombie","pzaScreenDoorZombie","pzaSnorkelZombie","pzaSquashZombie","pzaTallNutZombie","pzaYetiZombie","pzaZombieBobsled","pzaZombieBobsledTeam","pzaZombieBody","pzaZombieSlot","pzaZombieState","pzaZomboni","pzaBaseBody","pzaBrain","pzaCleanCar","pzaEffectManager","pzaGameState","pzaGameTouch","pzaJar","pzaJarBody","pzaPlantManager","pzaPlantTouch","pzaPortalDoorBody","pzaSpineTool","pzaSunLight","pzaTomb","pzaTouchShowGraph","pzaValueTest","pzaZombieManager","pzaBaseComponent","pzaBaseComponentManager","pzaBeltConfig","pzaBeltEquipConfig","pzaBeltSlotConfig","pzaChapterConfig","pzaCollisionManager","pzaCommonPopView","pzaCountDown","pzaDayCd","pzaDaySignConfig","pzaGameArtTest","pzaGameBase","pzaGameBelt","pzaGameBoss","pzaGameCommonPool","pzaGameConfig","pzaGameJar","pzaGameKnock","pzaGameManager","pzaGameMiniGame","pzaGameNormal","pzaGamePartConfig","pzaGamePropConfig","pzaGameRecruitMgr","pzaGameSmall","pzaGameSurEndless","pzaGameSurvival","pzaGameTime","pzaGameVase","pzaGameVaseEndless","pzaGameZombieEnemy","pzaGameZombieEnemyEndless","pzaGiftConfig","pzaGlobalMask","pzaGroupEnum","pzaGuideManager","pzaGuideTip","pzaHomeTip","pzaItemTips","pzaKnockMiniGame","pzaLocalData","pzaMapManager","pzaNameConf","pzaNodeManager","pzaOperationMgr","pzaPreviewTip","pzaRankMgr","pzaRecruitDrawConf","pzaRedPointMgr","pzaRewardManager","pzaShareGiftConfig","pzaSmallMiniGame","pzaSoundManager","pzaSpineController","pzaSpriteFrameManager","pzaStatisticsMgr","pzaSurvivalConfig","pzaTipManager","pzaUIManager","pzaUtil","pzaWorldEventManager","pzaZJPlantConf","pzaZJZombieConf","pzaZombieEnermyPartCfg","pzaGardenDave","pzaGardenDropCoin","pzaGardenMgr","pzaGardenPlant","pzaGardenPlantConfig","pzaGardenPot","pzaGardenShadow","pzaGardenSnail","pzaGardenTool","pzaGardenView","pzaBundleObjectPool","pzaPreLoadManager","pzaBeltHeroActivityMgr","pzaExchangeView","pzaLoginActivityConf","pzaLoginActivityItem","pzaLoginActivityView","pzaLoginRewardMgr","pzaLoginRewardView","pzaLoginRiderHelpView","pzaLoginRiderView","pzaPieceSummonConf","pzaRiderFallTaskConf","pzaMiniGameConf","pzaMiniVaseConf","pzaMonthSignConf","pzaMonthSignItem","pzaMonthSignMgr","pzaMonthSignView","pzaRiderFallParentView","pzaRiderFallTaskItem","pzaRiderFallTaskView","pzaRiderFallView","pzaShopConfig","pzaShopDave","pzaTask","pzaTaskMgr","pzaAssessView","pzaBagPlantCard","pzaBattleDownView","pzaBattleFreePlant","pzaBattlePropView","pzaBattleUpView","pzaBeltCard","pzaCGPaperView","pzaComicView","pzaDaveAdReward","pzaDaveTreasureView","pzaGameFailView","pzaGameWinNoStarView","pzaGameWinView","pzaGardenShareView","pzaGetAchieveItem","pzaGetAchieveView","pzaGuideView","pzaImitaterSelectView","pzaLoginView","pzaMenuView","pzaNewBeltView","pzaNewPlantView","pzaNewZombieView","pzaOptionView","pzaPartDataView","pzaPlantBeltView","pzaPlantCard","pzaPlantSelectCardList","pzaPlantSelectDesc","pzaPlantSelectView","pzaRecordView","pzaReviveView","pzaTryPlantCard","pzaTrySelectView","pzaZombieCard","pzaZombieSelectView","pzaBeltBianShenView","pzaBeltEquipItem","pzaBeltEquipView","pzaBeltOverView","pzaBeltSlotItem","pzaActivityPageItem","pzaActivityPageView","pzaAdTicketIcon","pzaAdTicketView","pzaAniMask","pzaBubbleItem","pzaBubbleTips","pzaBuyConfirmView","pzaChallengeView","pzaClickShowTimer","pzaCommonMask","pzaCommonRewardView","pzaDaySignItem","pzaDaySignView","pzaEggAniView","pzaFitIPhoneX","pzaGiftRwdItem","pzaGiftView","pzaGiftViewItem","pzaGotRewardView","pzaGuanKaItemView","pzaGuideDialogView","pzaHandbookCard","pzaHandbookView","pzaHomeView","pzaMiniGameItem","pzaMiniGameView","pzaPartSelectView","pzaPlantHandbookView","pzaPlantSkinCard","pzaPower","pzaPowerTime","pzaPowerView","pzaPreOpenView","pzaPropNameTip","pzaPuzzleItem","pzaPuzzleView","pzaRankItem","pzaRankView","pzaRecordBtn","pzaRecruitDrawItem","pzaRecruitView","pzaRewardItem","pzaSaveView","pzaShareGiftJar","pzaShareGiftView","pzaShareRewardItem","pzaShopItem","pzaShopView","pzaSidebarView","pzaSpecialTipsView","pzaSurvivalItem","pzaSurvivalView","pzaUIScrollView","pzaVideoGiftView","pzaVideoPlantGiftView","pzaWarningView","pzaZombieHandbookView","pzaZombiebookCard","pzaNewPlayTaskConf","pzaNewPlayTaskMgr","pzaNewPlayerStepConf","pzaNewPlayerTaskItem","pzaNewPlayerTaskView","pzaArtTest","Byte_analytics","ShufenManager","ks_analytics","lanfei","pzaAES","pzaAdNative","pzaBulletPool","pzaChannel","pzaChannelBiLi","pzaChannelHw","pzaChannelIOS","pzaChannelKs","pzaChannelMg","pzaChannelMi","pzaChannelMy","pzaChannelMy1","pzaChannelNoAD","pzaChannelOppo","pzaChannelQQ","pzaChannelRY","pzaChannelTT","pzaChannelTap","pzaChannelVivo","pzaChannelVivo2","pzaChannelWeb","pzaChannelWx","pzaChannelWx1","pzaFrameAnim","pzaFrameAnimComponent","pzaGdyxIcon","pzaGdyxItem","pzaHtBox","pzaKDefine","pzaLayeredAssembler","pzaLayeredRootSprite","pzaNativeInterAd","pzaParseCond","pzaPrivacyWin","pzaResMgr","pzaStateComponent","pzakc"]);